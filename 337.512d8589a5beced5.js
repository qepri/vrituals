"use strict";(self.webpackChunkfront_simple=self.webpackChunkfront_simple||[]).push([[337],{8337:(oe,S,p)=>{p.r(S),p.d(S,{default:()=>ee});var t=p(4438),w=p(33),m=p(7673),x=p(7468),F=p(5794),u=p(177),l=p(9417),h=p(3373),b=p(3841);const A=(o,n)=>n.id,R=(o,n)=>n.key;function E(o,n){if(1&o&&(t.j41(0,"label",10),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.Y8G("for",e.id),t.R7$(),t.JRh(e.label)}}function P(o,n){if(1&o&&t.nrm(0,"textarea",11),2&o){const e=t.XpG().$implicit;t.Y8G("id",e.id)("formControl",e.formControl)("placeholder",e.placeholder||"")}}function N(o,n){if(1&o&&t.nrm(0,"input",12),2&o){const e=t.XpG().$implicit;t.Y8G("type",e.type)("id",e.id)("formControl",e.formControl)("placeholder",e.placeholder||"")}}function M(o,n){if(1&o&&(t.j41(0,"div",13),t.nrm(1,"input",15),t.j41(2,"label",16),t.EFF(3),t.k0s()()),2&o){const e=t.XpG().$implicit;t.R7$(),t.Y8G("formControl",e.formControl)("id",e.id),t.R7$(),t.Y8G("for",e.id),t.R7$(),t.SpI(" ",e.label," ")}}function D(o,n){if(1&o&&(t.j41(0,"small"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit,i=t.XpG(2).$implicit;t.R7$(),t.JRh(i.errors[e.key])}}function I(o,n){if(1&o&&t.DNE(0,D,2,1,"small"),2&o){const e=n.$implicit,i=t.XpG(2).$implicit;t.vxM(0,i.errors&&i.errors[e.key]?0:-1)}}function X(o,n){if(1&o&&(t.j41(0,"div",14),t.Z7z(1,I,1,1,null,null,R),t.nI1(3,"keyvalue"),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.Dyx(t.bMT(3,0,e.formControl.errors))}}function B(o,n){if(1&o&&(t.j41(0,"div",9),t.DNE(1,E,2,2,"label",10)(2,P,1,3,"textarea",11)(3,N,1,4,"input",12)(4,M,4,4,"div",13)(5,X,4,2,"div",14),t.k0s()),2&o){const e=n.$implicit;t.R7$(),t.vxM(1,"checkbox"!==e.type?1:-1),t.R7$(),t.vxM(2,"textarea"===e.type?2:-1),t.R7$(),t.vxM(3,"text"===e.type?3:-1),t.R7$(),t.vxM(4,"checkbox"===e.type?4:-1),t.R7$(),t.vxM(5,e.formControl.invalid&&e.formControl.touched&&e.errors?5:-1)}}function V(o,n){if(1&o&&(t.j41(0,"small"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit,i=t.XpG(2).$implicit;t.R7$(),t.JRh(i.errors[e.key])}}function Y(o,n){if(1&o&&t.DNE(0,V,2,1,"small"),2&o){const e=n.$implicit,i=t.XpG(2).$implicit;t.vxM(0,i.errors&&i.errors[e.key]?0:-1)}}function J(o,n){if(1&o&&(t.j41(0,"div",14),t.Z7z(1,Y,1,1,null,null,R),t.nI1(3,"keyvalue"),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.Dyx(t.bMT(3,0,e.formControl.errors))}}function W(o,n){if(1&o&&(t.j41(0,"div",9)(1,"label",10),t.EFF(2),t.k0s(),t.nrm(3,"input",12),t.DNE(4,J,4,2,"div",14),t.k0s()),2&o){const e=n.$implicit;t.R7$(),t.Y8G("for",e.id),t.R7$(),t.JRh(e.label),t.R7$(),t.Y8G("type",e.type)("id",e.id)("formControl",e.formControl)("placeholder",e.placeholder||""),t.R7$(),t.vxM(4,e.formControl.invalid&&e.formControl.touched&&e.errors?4:-1)}}let z=(()=>{class o{constructor(){this.store=(0,t.WQX)(b.P),this.toastr=(0,t.WQX)(F.tw),this.artistService=(0,t.WQX)(h.gA),this.loading=(0,t.vPA)(!1),this.formArtistProfile=new l.gE({displayName:new l.MJ("",{validators:[l.k0.required,l.k0.maxLength(30)],nonNullable:!0}),bio:new l.MJ("",{nonNullable:!0}),website:new l.MJ("",{validators:[l.k0.pattern("https?://.+")],nonNullable:!0}),instagram:new l.MJ("",{nonNullable:!0}),twitter:new l.MJ("",{nonNullable:!0}),isCurator:new l.MJ(!1,{nonNullable:!0})}),this.fields={basicInfo:[{formControl:this.formArtistProfile.controls.displayName,id:"displayName",label:"Display Name",name:"displayName",type:"text",placeholder:"The Sun",errors:{required:"Display name is required",maxlength:"Display name cannot exceed 30 characters"}},{formControl:this.formArtistProfile.controls.bio,id:"bio",label:"Biography",name:"bio",type:"textarea",placeholder:"Know how you are"},{formControl:this.formArtistProfile.controls.isCurator,id:"isCurator",label:"Curator",name:"isCurator",type:"checkbox"}],socialMedia:[{formControl:this.formArtistProfile.controls.website,id:"website",label:"Website",name:"website",type:"url",placeholder:"https://yourwebsite.com",errors:{pattern:"Please enter a valid URL (including http:// or https://)"}},{formControl:this.formArtistProfile.controls.instagram,id:"instagram",label:"Instagram",name:"instagram",type:"text",placeholder:"@username"},{formControl:this.formArtistProfile.controls.twitter,id:"twitter",label:"Twitter",name:"twitter",type:"text",placeholder:"@username"}]},(0,t.QZP)(()=>{const e=this.store.artistProfile();e&&this.formArtistProfile.patchValue({displayName:e.displayName,bio:e.bio||"",website:e.website||"",instagram:e.instagram||"",twitter:e.twitter||"",isCurator:e.isCurator})})}ngOnInit(){const e=this.store.getArtistProfileForm();e&&this.formArtistProfile.patchValue(e),this.formArtistProfile.valueChanges.subscribe(i=>{this.formArtistProfile.valid&&this.store.setArtistProfileForm(i)})}saveProfile(){if(this.formArtistProfile.valid){const e=this.formArtistProfile.getRawValue();this.store.setArtistProfileForm(e),this.toastr.success("Profile saved successfully!")}else this.formArtistProfile.markAllAsTouched(),this.toastr.error("Please correct the errors in the form.")}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-artist-profile-form"]],standalone:!0,features:[t.aNF],decls:20,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"mb-4"],[3,"ngSubmit","formGroup"],[1,"card","mb-4"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],[1,"mb-3"],[1,"form-label",3,"for"],["rows","4",1,"form-control",3,"id","formControl","placeholder"],[1,"form-control",3,"type","id","formControl","placeholder"],[1,"form-check"],[1,"text-danger","mt-1"],["type","checkbox",1,"form-check-input",3,"formControl","id"],[3,"for"]],template:function(i,r){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t.EFF(4,"Artist Profile"),t.k0s(),t.j41(5,"form",4),t.bIt("ngSubmit",function(){return r.saveProfile()}),t.j41(6,"div",5)(7,"div",6)(8,"h5",7),t.EFF(9,"Basic Information"),t.k0s()(),t.j41(10,"div",8),t.Z7z(11,B,6,5,"div",9,A),t.k0s()(),t.j41(13,"div",5)(14,"div",6)(15,"h5",7),t.EFF(16,"Social Media"),t.k0s()(),t.j41(17,"div",8),t.Z7z(18,W,5,7,"div",9,A),t.k0s()()()()()()),2&i&&(t.R7$(5),t.Y8G("formGroup",r.formArtistProfile),t.R7$(6),t.Dyx(r.fields.basicInfo),t.R7$(7),t.Dyx(r.fields.socialMedia))},dependencies:[l.X1,l.qT,l.me,l.Zm,l.BC,l.cb,l.l_,l.j4,u.MD,u.lG]})}}return o})();var Q=p(4221),$=p(190),_=p(980),j=p(7533);const U=(o,n)=>(null==n.series?null:n.series.id)||"standalone",Z=(o,n)=>n.id;function O(o,n){1&o&&(t.j41(0,"div",4)(1,"div",10)(2,"span",11),t.EFF(3,"Loading..."),t.k0s()()())}function L(o,n){if(1&o&&t.EFF(0),2&o){const e=t.XpG().$implicit;t.SpI(" Series: ",e.series.title," ")}}function H(o,n){1&o&&t.EFF(0," Standalone Artworks ")}function q(o,n){if(1&o&&t.nrm(0,"video",18),2&o){const e=t.XpG().$implicit;t.Y8G("src",e.fileUrl,t.B4B)}}function K(o,n){if(1&o&&t.nrm(0,"img",28),2&o){const e=t.XpG().$implicit;t.FS9("alt",e.title),t.Y8G("src",e.fileUrl,t.B4B)}}function tt(o,n){if(1&o&&(t.j41(0,"p",26),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.SpI("$",e.price,"")}}function et(o,n){if(1&o&&(t.j41(0,"p",27)(1,"small",29),t.EFF(2),t.k0s()()),2&o){const e=t.XpG().$implicit;t.R7$(2),t.Lme("Edition ",e.editionNumber,"/",e.totalEditions,"")}}function ot(o,n){if(1&o){const e=t.RV6();t.j41(0,"div",16)(1,"div",17),t.DNE(2,q,1,1,"video",18)(3,K,1,2),t.j41(4,"div",15)(5,"div",19)(6,"h5",20),t.EFF(7),t.k0s(),t.j41(8,"div")(9,"button",21),t.bIt("click",function(){const r=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.editArtwork(r))}),t.nrm(10,"i",22),t.k0s(),t.j41(11,"button",23),t.bIt("click",function(){const r=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.deleteArtwork(r))}),t.nrm(12,"i",24),t.k0s()()(),t.j41(13,"p",25),t.EFF(14),t.k0s(),t.DNE(15,tt,2,1,"p",26)(16,et,3,2,"p",27),t.k0s()()()}if(2&o){const e=n.$implicit,i=t.XpG(4);t.R7$(2),t.vxM(2,i.isVideo(e.fileUrl)?2:3),t.R7$(5),t.JRh(e.title),t.R7$(7),t.JRh(e.type),t.R7$(),t.vxM(15,e.price?15:-1),t.R7$(),t.vxM(16,e.editionNumber&&e.totalEditions?16:-1)}}function rt(o,n){if(1&o&&(t.j41(0,"div",1),t.Z7z(1,ot,17,5,"div",16,Z),t.k0s()),2&o){const e=t.XpG(2).$implicit;t.R7$(),t.Dyx(e.artworks)}}function it(o,n){1&o&&(t.j41(0,"div",30)(1,"div",10)(2,"span",11),t.EFF(3,"Loading artworks..."),t.k0s()()())}function nt(o,n){1&o&&(t.DNE(0,rt,3,0)(1,it,4,0),t.nv$(2,0,null,null,1),t.qhs(0,-1))}function st(o,n){1&o&&(t.j41(0,"p",29),t.EFF(1,"No artworks in this group."),t.k0s())}function lt(o,n){if(1&o&&(t.j41(0,"div",8)(1,"div",12)(2,"h5",13),t.DNE(3,L,1,1)(4,H,1,0),t.j41(5,"span",14),t.EFF(6),t.k0s()()(),t.j41(7,"div",15),t.DNE(8,nt,4,0)(9,st,2,0),t.k0s()()),2&o){const e=n.$implicit;t.R7$(3),t.vxM(3,e.series?3:4),t.R7$(3),t.JRh(e.artworks.length),t.R7$(2),t.vxM(8,e.artworks.length>0?8:9)}}function at(o,n){if(1&o){const e=t.RV6();t.j41(0,"div",9)(1,"div",31)(2,"h5",32),t.EFF(3,"No artworks added yet"),t.k0s(),t.j41(4,"p",33),t.EFF(5,"Start building your portfolio by adding your first artwork"),t.k0s(),t.j41(6,"button",34),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.openArtworkModal())}),t.nrm(7,"i",7),t.EFF(8," Add Your First Artwork "),t.k0s()()()}}let ct=(()=>{class o{constructor(){this.store=(0,t.WQX)(b.P),this.toastr=(0,t.WQX)(F.tw),this.modalService=(0,t.WQX)(Q.Bq),this.artworkService=(0,t.WQX)(h.UN),this.isVideo=j.A,this.loading=(0,t.vPA)(!1)}get series(){return this.store.series()}get artworks(){return this.store.artworks()}get groupedArtworks(){const e=this.artworks,i=this.series,r=new Map;e.forEach(a=>{const c=a.seriesId||null;r.has(c)||r.set(c,[]),r.get(c).push(a)});const s=[];return r.forEach((a,c)=>{const d=c?i.find(f=>f.id===c):null;s.push({series:c?{id:c,title:d?.title||"Unknown Series"}:null,artworks:a})}),s.sort((a,c)=>null===a.series?1:null===c.series?-1:a.series.title.localeCompare(c.series.title)),s}openArtworkModal(){const e=this.modalService.open($.DC,{size:"lg",centered:!0,backdrop:"static",scrollable:!0}),i=e.componentInstance;i.artwork=null,i.seriesOptions=this.series.map(r=>({id:r.id,label:r.title})),e.result.then(r=>{this.handleSaveArtwork(r.formData,r.files,r.aspectRatio)},()=>{})}editArtwork(e){const i=this.modalService.open($.DC,{size:"lg",centered:!0,backdrop:"static",scrollable:!0}),r=i.componentInstance;r.artwork=e,r.seriesOptions=this.series.map(s=>({id:s.id,label:s.title})),i.result.then(s=>{this.handleSaveArtwork(s.formData,s.files,s.aspectRatio,e)},()=>{})}handleSaveArtwork(e,i,r,s){if(this.loading.set(!0),!s)return i.length?void this.artworkService.uploadArtwork(e,i[0],r).pipe((0,_.j)(()=>this.loading.set(!1))).subscribe({next:a=>{this.store.addArtwork(a),this.toastr.success("Artwork created successfully")},error:()=>this.toastr.error("Failed to upload artwork")}):(this.loading.set(!1),void this.toastr.error("Please select a file for your artwork"));this.artworkService.updateArtwork(s.id,e).pipe((0,_.j)(()=>this.loading.set(!1))).subscribe({next:a=>{this.store.updateArtwork(a),this.toastr.success("Artwork updated successfully")},error:()=>this.toastr.error("Failed to update artwork")})}deleteArtwork(e){confirm(`Are you sure you want to delete "${e.title}"?`)&&(this.loading.set(!0),this.artworkService.deleteArtwork(e.id).pipe((0,_.j)(()=>this.loading.set(!1))).subscribe({next:()=>{this.store.removeArtwork(e.id),this.toastr.success("Artwork deleted successfully")},error:()=>this.toastr.error("Failed to delete artwork")}))}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-artwork-form"]],standalone:!0,features:[t.aNF],decls:13,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"mb-4"],[1,"d-flex","justify-content-center","mb-4"],[1,"mb-4","d-flex","justify-content-end"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus"],[1,"card","mb-4"],[1,"card"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"badge","bg-info","ms-2"],[1,"card-body"],[1,"col-md-4","mb-3"],[1,"card","h-100"],["autoplay","","loop","","muted","",1,"card-img-top",2,"object-fit","cover","height","280px",3,"src"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"card-title","mb-0","text-truncate"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"fa","fa-edit"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fa","fa-trash"],[1,"card-text","text-muted","small"],[1,"card-text","fw-bold"],[1,"card-text"],[1,"card-img-top",2,"object-fit","cover","height","280px",3,"src","alt"],[1,"text-muted"],[1,"text-center","py-3"],[1,"card-body","text-center","py-5"],[1,"mb-3"],[1,"text-muted","mb-4"],[1,"btn","btn-lg","btn-primary",3,"click"]],template:function(i,r){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t.EFF(4,"Artwork Management"),t.k0s(),t.DNE(5,O,4,0,"div",4),t.j41(6,"div",5)(7,"button",6),t.bIt("click",function(){return r.openArtworkModal()}),t.nrm(8,"i",7),t.EFF(9," Add New Artwork "),t.k0s()(),t.Z7z(10,lt,10,3,"div",8,U),t.DNE(12,at,9,0,"div",9),t.k0s()()()),2&i&&(t.R7$(5),t.vxM(5,r.loading()?5:-1),t.R7$(5),t.Dyx(r.groupedArtworks),t.R7$(2),t.vxM(12,0!==r.groupedArtworks.length||r.loading()?-1:12))},dependencies:[l.X1,u.MD]})}}return o})();const C=(o,n)=>n.id,G=()=>[];function pt(o,n){if(1&o&&(t.j41(0,"option",22),t.EFF(1),t.k0s()),2&o){const e=n.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.label)}}function mt(o,n){if(1&o&&(t.j41(0,"select",21),t.Z7z(1,pt,2,2,"option",22,C),t.k0s()),2&o){const e=t.XpG().$implicit;t.Y8G("id",e.id)("formControl",e.formControl),t.R7$(),t.Dyx(e.options||t.lJ4(2,G))}}function dt(o,n){if(1&o&&t.nrm(0,"input",23),2&o){const e=t.XpG().$implicit;t.Y8G("type",e.type)("id",e.id)("formControl",e.formControl)}}function ft(o,n){if(1&o&&(t.j41(0,"div",10)(1,"label",20),t.EFF(2),t.k0s(),t.DNE(3,mt,3,3,"select",21)(4,dt,1,3),t.k0s()),2&o){const e=n.$implicit;t.R7$(),t.Y8G("for",e.id),t.R7$(),t.JRh(e.label),t.R7$(),t.vxM(3,"select"===e.type?3:4)}}function ut(o,n){if(1&o&&(t.j41(0,"div",10)(1,"label",20),t.EFF(2),t.k0s(),t.j41(3,"div",24),t.nrm(4,"input",25)(5,"input",26),t.k0s()()),2&o){const e=n.$implicit;t.R7$(),t.Y8G("for",e.id),t.R7$(),t.JRh(e.label),t.R7$(2),t.Y8G("type",e.type)("id",e.id)("formControl",e.formControl),t.R7$(),t.Y8G("value",e.formControl.value)}}function _t(o,n){if(1&o&&(t.j41(0,"option",22),t.EFF(1),t.k0s()),2&o){const e=n.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.label)}}function ht(o,n){if(1&o&&(t.j41(0,"div",10)(1,"label",20),t.EFF(2),t.k0s(),t.j41(3,"select",21),t.Z7z(4,_t,2,2,"option",22,C),t.k0s()()),2&o){const e=n.$implicit;t.R7$(),t.Y8G("for",e.id),t.R7$(),t.JRh(e.label),t.R7$(),t.Y8G("id",e.id)("formControl",e.formControl),t.R7$(),t.Dyx(e.options||t.lJ4(4,G))}}let gt=(()=>{class o{constructor(){this.store=(0,t.WQX)(b.P),this.toastr=(0,t.WQX)(F.tw),this.gallery=this.store.gallery,this.bgImagePreview=null,this.formGallery=new l.gE({bgImage:new l.MJ(""),bgRepeat:new l.MJ("no-repeat"),bgColor:new l.MJ("#f9f9f9"),containerColor:new l.MJ("#ffffff"),textColor:new l.MJ("#333333"),accentColor:new l.MJ("#000000"),fontFamily:new l.MJ("Roboto Mono, monospace")}),this.repeatOptions=[{id:"no-repeat",label:"No Repeat"},{id:"repeat",label:"Repeat"},{id:"repeat-x",label:"Repeat Horizontally"},{id:"repeat-y",label:"Repeat Vertically"}],this.fontOptions=[{id:"Roboto Mono, monospace",label:"Roboto Mono"},{id:"Arial, sans-serif",label:"Arial"},{id:"Helvetica, sans-serif",label:"Helvetica"},{id:"Georgia, serif",label:"Georgia"},{id:"Times New Roman, serif",label:"Times New Roman"}],this.fields={background:[{formControl:this.formGallery.controls.bgImage,id:"bgImage",label:"Background Image URL",name:"bgImage",type:"text"},{formControl:this.formGallery.controls.bgRepeat,id:"bgRepeat",label:"Background Repeat",name:"bgRepeat",type:"select",options:this.repeatOptions},{formControl:this.formGallery.controls.bgColor,id:"bgColor",label:"Background Color",name:"bgColor",type:"color"}],colors:[{formControl:this.formGallery.controls.containerColor,id:"containerColor",label:"Container Color",name:"containerColor",type:"color"},{formControl:this.formGallery.controls.textColor,id:"textColor",label:"Text Color",name:"textColor",type:"color"},{formControl:this.formGallery.controls.accentColor,id:"accentColor",label:"Accent Color",name:"accentColor",type:"color"}],typography:[{formControl:this.formGallery.controls.fontFamily,id:"fontFamily",label:"Font Family",name:"fontFamily",type:"select",options:this.fontOptions}]},(0,t.QZP)(()=>{const e=this.store.gallery();e&&!this.store.getGalleryForm()&&(this.formGallery.patchValue({bgImage:e.bgImage||"",bgRepeat:e.bgRepeat||"no-repeat",bgColor:e.bgColor||"#f9f9f9",containerColor:e.containerColor||"#ffffff",textColor:e.textColor||"#333333",accentColor:e.accentColor||"#000000",fontFamily:e.fontFamily||"Roboto Mono, monospace"}),this.bgImagePreview=e.bgImage||null)})}ngOnInit(){const e=this.store.getGalleryForm();e&&(this.formGallery.patchValue({bgImage:e.bgImage||"",bgRepeat:e.bgRepeat||"no-repeat",bgColor:e.bgColor||"#f9f9f9",containerColor:e.containerColor||"#ffffff",textColor:e.textColor||"#333333",accentColor:e.accentColor||"#000000",fontFamily:e.fontFamily||"Roboto Mono, monospace"}),e.bgImage&&(this.bgImagePreview=e.bgImage)),this.formGallery.valueChanges.subscribe(i=>{this.formGallery.valid&&(this.bgImagePreview=i.bgImage&&i.bgImage.trim()?i.bgImage:null,this.store.setGalleryForm({bgImage:i.bgImage||"",bgRepeat:i.bgRepeat||"no-repeat",bgColor:i.bgColor||"#f9f9f9",containerColor:i.containerColor||"#ffffff",textColor:i.textColor||"#333333",accentColor:i.accentColor||"#000000",fontFamily:i.fontFamily||"Roboto Mono, monospace"}))})}saveGallery(){if(this.formGallery.valid){const e=this.formGallery.getRawValue(),i={};Object.entries(e).forEach(([r,s])=>{null!=s&&(i[r]=s)}),this.store.setGalleryForm(i),this.toastr.success("Gallery settings saved successfully!")}else this.formGallery.markAllAsTouched(),this.toastr.error("Please correct the errors in the form.")}get previewStyles(){return{"background-image":this.bgImagePreview?`url(${this.bgImagePreview})`:"none","background-repeat":this.formGallery.get("bgRepeat")?.value,"background-color":this.formGallery.get("bgColor")?.value,"font-family":this.formGallery.get("fontFamily")?.value}}get containerStyles(){return{"background-color":this.formGallery.get("containerColor")?.value,color:this.formGallery.get("textColor")?.value}}get accentStyles(){return{color:this.formGallery.get("accentColor")?.value}}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-gallery-form"]],standalone:!0,features:[t.aNF],decls:45,vars:5,consts:[[1,"no-hue-rotate","container","no-hue-rotate"],[1,"row"],[1,"col-12"],[1,"mb-4"],[1,"col-md-7"],[1,"card","mb-4"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","submit",1,"btn","btn-primary"],[1,"col-md-5"],[1,"card","mb-4","sticky-top",2,"top","20px"],[1,"card-body","p-0"],[1,"gallery-preview",2,"min-height","300px","padding","20px",3,"ngStyle"],[1,"container",2,"padding","15px","border-radius","5px",3,"ngStyle"],[3,"ngStyle"],[1,"btn","btn-sm",2,"border","1px solid",3,"ngStyle"],[1,"form-label",3,"for"],[1,"form-select",3,"id","formControl"],[3,"value"],[1,"form-control",3,"type","id","formControl"],[1,"input-group"],[1,"form-control","form-control-color",2,"width","60px",3,"type","id","formControl"],["type","text","readonly","",1,"form-control",3,"value"]],template:function(i,r){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t.EFF(4,"Gallery Customization"),t.k0s(),t.j41(5,"div",1)(6,"div",4)(7,"div",5)(8,"div",6)(9,"h5",7),t.EFF(10,"Gallery Settings"),t.k0s()(),t.j41(11,"div",8)(12,"form",9),t.bIt("ngSubmit",function(){return r.saveGallery()}),t.j41(13,"div",3)(14,"h6",10),t.EFF(15,"Background"),t.k0s(),t.Z7z(16,ft,5,3,"div",10,C),t.k0s(),t.j41(18,"div",3)(19,"h6",10),t.EFF(20,"Colors"),t.k0s(),t.Z7z(21,ut,6,6,"div",10,C),t.k0s(),t.j41(23,"div",3)(24,"h6",10),t.EFF(25,"Typography"),t.k0s(),t.Z7z(26,ht,6,5,"div",10,C),t.k0s(),t.j41(28,"div",11)(29,"button",12),t.EFF(30," Save Gallery Settings "),t.k0s()()()()()(),t.j41(31,"div",13)(32,"div",14)(33,"div",6)(34,"h5",7),t.EFF(35,"Preview"),t.k0s()(),t.j41(36,"div",15)(37,"div",16)(38,"div",17)(39,"h4",18),t.EFF(40,"Gallery Title"),t.k0s(),t.j41(41,"p"),t.EFF(42,"This is how your gallery text will appear to visitors."),t.k0s(),t.j41(43,"div",19),t.EFF(44," Sample Button "),t.k0s()()()()()()()()()()),2&i&&(t.R7$(12),t.Y8G("formGroup",r.formGallery),t.R7$(4),t.Dyx(r.fields.background),t.R7$(5),t.Dyx(r.fields.colors),t.R7$(5),t.Dyx(r.fields.typography),t.R7$(11),t.Y8G("ngStyle",r.previewStyles),t.R7$(),t.Y8G("ngStyle",r.containerStyles),t.R7$(),t.Y8G("ngStyle",r.accentStyles),t.R7$(4),t.Y8G("ngStyle",r.accentStyles))},dependencies:[l.X1,l.qT,l.xH,l.y7,l.me,l.wz,l.BC,l.cb,l.l_,l.j4,u.MD,u.B3]})}}return o})();const T=(o,n)=>n.id,Ft=(o,n)=>n.key;function bt(o,n){1&o&&(t.j41(0,"div",4)(1,"div",14)(2,"span",15),t.EFF(3,"Loading..."),t.k0s()()())}function Ct(o,n){if(1&o){const e=t.RV6();t.j41(0,"div",17)(1,"div",18)(2,"div")(3,"h5",19),t.EFF(4),t.k0s(),t.j41(5,"p",19),t.EFF(6),t.k0s(),t.j41(7,"div",20)(8,"small",21),t.EFF(9),t.k0s(),t.j41(10,"small",22),t.EFF(11),t.k0s()()(),t.j41(12,"div",23)(13,"button",24),t.bIt("click",function(){const r=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.editSeries(r))}),t.nrm(14,"i",25),t.EFF(15," Edit "),t.k0s(),t.j41(16,"button",26),t.bIt("click",function(){const r=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.deleteSeries(r.id))}),t.nrm(17,"i",27),t.EFF(18," Delete "),t.k0s()()()()}if(2&o){const e=n.$implicit;t.R7$(4),t.JRh(e.title),t.R7$(2),t.JRh(e.description||"No description provided"),t.R7$(3),t.SpI("Name: ",e.name,""),t.R7$(2),t.SpI(" Artworks: ",(null==e.artworks?null:e.artworks.length)||0," ")}}function vt(o,n){if(1&o&&(t.j41(0,"div",5)(1,"div",6)(2,"h5",7),t.EFF(3,"Your Series"),t.k0s()(),t.j41(4,"div",8)(5,"div",16),t.Z7z(6,Ct,19,4,"div",17,T),t.k0s()()()),2&o){const e=t.XpG();t.R7$(6),t.Dyx(e.series())}}function yt(o,n){1&o&&(t.j41(0,"div",28),t.EFF(1," You haven't created any series yet. "),t.k0s())}function kt(o,n){if(1&o&&t.nrm(0,"textarea",30),2&o){const e=t.XpG().$implicit;t.Y8G("id",e.id)("formControl",e.formControl)("placeholder",e.placeholder||"")}}function St(o,n){if(1&o&&t.nrm(0,"input",32),2&o){const e=t.XpG().$implicit;t.Y8G("type",e.type)("id",e.id)("formControl",e.formControl)("placeholder",e.placeholder||"")}}function wt(o,n){if(1&o&&(t.j41(0,"small"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit,i=t.XpG(2).$implicit;t.R7$(),t.JRh(i.errors[e.key])}}function xt(o,n){if(1&o&&t.DNE(0,wt,2,1,"small"),2&o){const e=n.$implicit,i=t.XpG(2).$implicit;t.vxM(0,i.errors[e.key]?0:-1)}}function At(o,n){if(1&o&&(t.j41(0,"div",31),t.Z7z(1,xt,1,1,null,null,Ft),t.nI1(3,"keyvalue"),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.Dyx(t.bMT(3,0,e.formControl.errors))}}function Rt(o,n){if(1&o&&(t.j41(0,"div",10)(1,"label",29),t.EFF(2),t.k0s(),t.DNE(3,kt,1,3,"textarea",30)(4,St,1,4)(5,At,4,2,"div",31),t.k0s()),2&o){const e=n.$implicit;t.R7$(),t.Y8G("for",e.id),t.R7$(),t.JRh(e.label),t.R7$(),t.vxM(3,"textarea"===e.type?3:4),t.R7$(2),t.vxM(5,e.formControl.invalid&&e.formControl.touched&&e.errors?5:-1)}}function $t(o,n){if(1&o){const e=t.RV6();t.j41(0,"button",33),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.cancelEdit())}),t.EFF(1," Cancel "),t.k0s()}}let jt=(()=>{class o{constructor(){this.store=(0,t.WQX)(b.P),this.toastr=(0,t.WQX)(F.tw),this.seriesService=(0,t.WQX)(h.xB),this.loading=(0,t.vPA)(!1),this.editMode=(0,t.vPA)(!1),this.currentSeriesId=(0,t.vPA)(null),this.formSeries=new l.gE({name:new l.MJ("",{validators:[l.k0.required,l.k0.maxLength(20)],nonNullable:!0}),title:new l.MJ("",{validators:[l.k0.required,l.k0.maxLength(30)],nonNullable:!0}),description:new l.MJ("",{validators:[l.k0.maxLength(950)],nonNullable:!0})}),this.series=this.store.series,this.fields=[{formControl:this.formSeries.controls.name,id:"name",label:"Series Name",name:"name",type:"text",placeholder:"Short name for the series",errors:{required:"Name is required",maxlength:"Name cannot exceed 20 characters"}},{formControl:this.formSeries.controls.title,id:"title",label:"Series Title",name:"title",type:"text",placeholder:"Full title for display",errors:{required:"Title is required",maxlength:"Title cannot exceed 30 characters"}},{formControl:this.formSeries.controls.description,id:"description",label:"Description",name:"description",type:"textarea",placeholder:"Describe what unifies this series of artworks",errors:{maxlength:"Description cannot exceed 950 characters"}}],this.effect=(0,t.QZP)(()=>{"series-form"===this.store.validationTrigger()&&(this.formSeries.markAllAsTouched(),this.store.validationTrigger.set(null))})}ngOnInit(){this.formSeries.valueChanges.subscribe(e=>{this.formSeries.valid&&this.store.addSeriesForm({name:e.name||"",title:e.title||"",description:e.description||void 0})})}saveSeries(){if(this.formSeries.invalid)return this.formSeries.markAllAsTouched(),void this.toastr.error("Please correct the form errors");const e=this.formSeries.getRawValue(),i={name:e.name,title:e.title,description:e.description||void 0};this.loading.set(!0),this.editMode()?this.seriesService.update(this.currentSeriesId(),i).pipe((0,_.j)(()=>this.loading.set(!1))).subscribe({next:r=>{this.updateSeriesInStore(r),this.toastr.success("Series updated successfully"),this.resetForm()},error:r=>{this.toastr.error("Failed to update series"),console.error("Error updating series:",r)}}):this.seriesService.create(i).pipe((0,_.j)(()=>this.loading.set(!1))).subscribe({next:r=>{this.store.addSeries(r),this.toastr.success("Series created successfully"),this.resetForm()},error:r=>{this.toastr.error("Failed to create series"),console.error("Error creating series:",r)}})}updateSeriesInStore(e){this.store.series.update(i=>i.map(r=>r.id===e.id?e:r))}editSeries(e){this.formSeries.patchValue({name:e.name,title:e.title,description:e.description||""}),this.editMode.set(!0),this.currentSeriesId.set(e.id)}cancelEdit(){this.resetForm()}resetForm(){this.formSeries.reset(),this.editMode.set(!1),this.currentSeriesId.set(null)}deleteSeries(e){this.loading.set(!0),this.seriesService.remove(e).pipe((0,_.j)(()=>this.loading.set(!1))).subscribe({next:()=>{this.store.removeSeries(e),this.toastr.success("Series deleted successfully"),this.currentSeriesId()===e&&this.resetForm()},error:i=>{this.toastr.error("Failed to delete series"),console.error("Error deleting series:",i)}})}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-series-form"]],standalone:!0,features:[t.aNF],decls:20,vars:7,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"mb-4"],[1,"d-flex","justify-content-center","mb-4"],[1,"card","mb-4"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","button",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"list-group"],[1,"list-group-item"],[1,"d-flex","justify-content-between","align-items-start"],[1,"mb-1"],[1,"d-flex","gap-3"],[1,"text-muted"],[1,"badge","bg-info"],[1,"btn-group"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"alert","alert-info","mb-4"],[1,"form-label",3,"for"],["rows","3",1,"form-control",3,"id","formControl","placeholder"],[1,"text-danger","mt-1"],[1,"form-control",3,"type","id","formControl","placeholder"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(i,r){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t.EFF(4,"Series Management"),t.k0s(),t.DNE(5,bt,4,0,"div",4)(6,vt,8,0,"div",5)(7,yt,2,0),t.j41(8,"div",5)(9,"div",6)(10,"h5",7),t.EFF(11),t.k0s()(),t.j41(12,"div",8)(13,"form",9),t.bIt("ngSubmit",function(){return r.saveSeries()}),t.Z7z(14,Rt,6,4,"div",10,T),t.j41(16,"div",11),t.DNE(17,$t,2,0,"button",12),t.j41(18,"button",13),t.EFF(19),t.k0s()()()()()()()()),2&i&&(t.R7$(5),t.vxM(5,r.loading()?5:-1),t.R7$(),t.vxM(6,r.series().length>0?6:r.loading()?-1:7),t.R7$(5),t.JRh(r.editMode()?"Edit Series":"Create New Series"),t.R7$(2),t.Y8G("formGroup",r.formSeries),t.R7$(),t.Dyx(r.fields),t.R7$(3),t.vxM(17,r.editMode()?17:-1),t.R7$(),t.Y8G("disabled",r.loading()),t.R7$(),t.SpI(" ",r.editMode()?"Update Series":"Create Series"," "))},dependencies:[l.X1,l.qT,l.me,l.BC,l.cb,l.l_,l.j4,u.MD,u.lG]})}}return o})();var g=p(9437),y=p(5558),Gt=p(1774);const k=(o,n)=>n.id,Tt=(o,n)=>({"justify-content-between":o,"justify-content-end":n});function Et(o,n){if(1&o){const e=t.RV6();t.j41(0,"li",9)(1,"button",16),t.bIt("click",function(){const r=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.goToStep(r.id))}),t.EFF(2),t.k0s()()}if(2&o){const e=n.$implicit,i=t.XpG();t.R7$(),t.AVh("active",i.currentStep()===e.id),t.R7$(),t.Lme(" ",e.id+1,". ",e.title," ")}}function Pt(o,n){1&o&&(t.j41(0,"div",5)(1,"div",2)(2,"div",17)(3,"div",18),t.nrm(4,"div",19),t.j41(5,"div"),t.EFF(6,"Processing your artist setup..."),t.k0s()()()()())}function Nt(o,n){if(1&o&&(t.j41(0,"div",5)(1,"div",2)(2,"div",20),t.EFF(3),t.k0s()()()),2&o){const e=t.XpG();t.R7$(3),t.SpI(" ",e.error()," ")}}function Mt(o,n){1&o&&(t.j41(0,"div",5)(1,"div",2)(2,"div",21),t.EFF(3," Your artist profile has been successfully set up! "),t.k0s()()())}function Dt(o,n){1&o&&t.nrm(0,"app-artist-profile-form")}function It(o,n){1&o&&t.nrm(0,"app-series-form")}function Xt(o,n){1&o&&t.nrm(0,"app-artwork-form")}function Bt(o,n){1&o&&t.nrm(0,"app-gallery-form",22)}function Vt(o,n){if(1&o&&(t.j41(0,"p")(1,"strong"),t.EFF(2,"Name:"),t.k0s(),t.EFF(3),t.k0s(),t.j41(4,"p")(5,"strong"),t.EFF(6,"Bio:"),t.k0s(),t.EFF(7),t.k0s()),2&o){let e,i;const r=t.XpG(2);t.R7$(3),t.SpI(" ",null==(e=r.store.artistProfile())?null:e.displayName,""),t.R7$(4),t.SpI(" ",(null==(i=r.store.artistProfile())?null:i.bio)||"Not provided","")}}function Yt(o,n){1&o&&(t.j41(0,"p"),t.EFF(1,"Artist profile information available for review."),t.k0s())}function Jt(o,n){if(1&o&&(t.j41(0,"li",28),t.EFF(1),t.k0s()),2&o){const e=n.$implicit;t.R7$(),t.JRh(e.title)}}function Wt(o,n){if(1&o&&(t.j41(0,"ul",27),t.Z7z(1,Jt,2,1,"li",28,k),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.Dyx(e.store.series())}}function zt(o,n){1&o&&(t.j41(0,"p"),t.EFF(1,"No series created."),t.k0s())}function Qt(o,n){if(1&o&&t.nrm(0,"video",31),2&o){const e=t.XpG().$implicit;t.Y8G("src",e.fileUrl,t.B4B)}}function Ut(o,n){if(1&o&&t.nrm(0,"img",33),2&o){const e=t.XpG().$implicit;t.FS9("alt",e.title),t.Y8G("src",e.fileUrl,t.B4B)}}function Zt(o,n){if(1&o&&(t.j41(0,"div",29)(1,"div",30),t.DNE(2,Qt,1,1,"video",31)(3,Ut,1,2),t.j41(4,"div",7)(5,"h6",32),t.EFF(6),t.k0s()()()()),2&o){const e=n.$implicit,i=t.XpG(3);t.R7$(2),t.vxM(2,i.isVideoUrl(e.fileUrl)?2:3),t.R7$(4),t.JRh(e.title)}}function Ot(o,n){if(1&o&&(t.j41(0,"div",10),t.Z7z(1,Zt,7,2,"div",29,k),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.Dyx(e.store.artworks())}}function Lt(o,n){1&o&&(t.j41(0,"p"),t.EFF(1,"No artworks uploaded."),t.k0s())}function Ht(o,n){if(1&o&&(t.j41(0,"div",23)(1,"div",24)(2,"h3",25),t.EFF(3,"Review & Submit"),t.k0s()(),t.j41(4,"div",7)(5,"p"),t.EFF(6,"Please review your information before submitting."),t.k0s(),t.j41(7,"div",26)(8,"h5"),t.EFF(9,"Artist Profile"),t.k0s(),t.DNE(10,Vt,8,2)(11,Yt,2,0),t.k0s(),t.j41(12,"div",26)(13,"h5"),t.EFF(14),t.k0s(),t.DNE(15,Wt,3,0,"ul",27)(16,zt,2,0),t.k0s(),t.j41(17,"div",26)(18,"h5"),t.EFF(19),t.k0s(),t.DNE(20,Ot,3,0,"div",10)(21,Lt,2,0),t.k0s()()()),2&o){const e=t.XpG();t.R7$(10),t.vxM(10,e.store.artistProfile()?10:11),t.R7$(4),t.SpI("Series (",e.store.series().length,")"),t.R7$(),t.vxM(15,e.store.series().length>0?15:16),t.R7$(4),t.SpI("Artworks (",e.store.artworks().length,")"),t.R7$(),t.vxM(20,e.store.artworks().length>0?20:21)}}function qt(o,n){if(1&o){const e=t.RV6();t.j41(0,"button",34),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.prevStep())}),t.EFF(1," Previous "),t.k0s()}}function Kt(o,n){if(1&o){const e=t.RV6();t.j41(0,"button",35),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.nextStep())}),t.EFF(1," Next "),t.k0s()}}function te(o,n){if(1&o){const e=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.submitSetup())}),t.EFF(1," Complete Setup "),t.k0s()}if(2&o){const e=t.XpG();t.Y8G("disabled",e.loading())}}let ee=(()=>{class o{constructor(){this.store=(0,t.WQX)(b.P),this.artistProfileService=(0,t.WQX)(h.gA),this.kwalhiaArtService=(0,t.WQX)(h.UN),this.galleryService=(0,t.WQX)(h.AF),this.seriesService=(0,t.WQX)(h.xB),this.toastr=(0,t.WQX)(F.tw),this.route=(0,t.WQX)(w.nX),this.router=(0,t.WQX)(w.Ix),this.isVideoUrl=j.A,this.currentStep=(0,t.vPA)(0),this.loading=(0,t.vPA)(!1),this.error=(0,t.vPA)(null),this.success=(0,t.vPA)(!1),this.artistName=(0,t.vPA)(""),this.isNewProfile=(0,t.vPA)(!1),this.steps=[{id:0,title:"Artist Profile",component:"artist-profile-form",path:"profileConfig"},{id:1,title:"Series",component:"series-form",path:"seriesConfig"},{id:2,title:"Artworks",component:"artwork-form",path:"artworksConfig"},{id:3,title:"Gallery",component:"gallery-form",path:"galleryConfig"},{id:4,title:"Review",component:"review",path:"submit"}]}ngOnInit(){this.route.data.subscribe(e=>{void 0!==e.step&&this.currentStep.set(e.step),this.isNewProfile.set(!0===e.isNew)}),this.route.params.subscribe(e=>{e.artistName&&this.artistName.set(e.artistName)}),this.isNewProfile()||this.checkAndFetchData()}checkAndFetchData(){const e=!this.store.artistProfile(),i=2===this.currentStep()&&!this.store.artworks().length,r=1===this.currentStep()&&!this.store.series().length,s=3===this.currentStep()&&!this.store.gallery();(e||i||r||s)&&this.fetchAllUserData()}fetchAllUserData(){this.loading.set(!0);const e=this.artistProfileService.getMyProfile().pipe((0,g.W)(()=>(0,m.of)(null))),i=this.seriesService.getMySeries({page:1,limit:50}).pipe((0,g.W)(()=>(0,m.of)({data:[]}))),r=this.kwalhiaArtService.getMyArtworks({page:1,limit:100}).pipe((0,g.W)(()=>(0,m.of)({data:[]}))),s=this.galleryService.getMyGallery().pipe((0,g.W)(()=>(0,m.of)(null)));(0,x.p)({profile:e,series:i,artworks:r,gallery:s}).pipe((0,_.j)(()=>this.loading.set(!1))).subscribe({next:a=>{if(a.profile&&(this.store.setArtistProfile(a.profile),this.store.setArtistProfileForm({displayName:a.profile.displayName,bio:a.profile.bio,website:a.profile.website,instagram:a.profile.instagram,twitter:a.profile.twitter})),a.series?.data?.length){const c=a.series.data.map(d=>{const f=a.artworks.data.filter(v=>v.seriesId===d.id);return{...d,artworks:f}});this.store.series.set(c)}a.artworks?.data?.length&&this.store.artworks.set(a.artworks.data),a.gallery&&(this.store.setGallery(a.gallery),this.store.setGalleryForm({bgImage:a.gallery.bgImage,bgRepeat:a.gallery.bgRepeat,bgColor:a.gallery.bgColor,containerColor:a.gallery.containerColor,textColor:a.gallery.textColor,accentColor:a.gallery.accentColor,fontFamily:a.gallery.fontFamily}))},error:a=>{console.error("Error fetching user data:",a),this.error.set("Failed to load your data. Please try again.")}})}goToStep(e){if(e>=0&&e<this.steps.length){const i=this.steps[e].path,r=this.isNewProfile()?"new":this.getRouteArtistName();this.router.navigate(["/"+Gt.S.KWH+`/${r}/${i}`])}}prevStep(){this.currentStep()>0&&this.goToStep(this.currentStep()-1)}nextStep(){if(this.currentStep()<this.steps.length-1){const e=this.steps[this.currentStep()].component;if(this.store.validationTrigger.set(e),0===this.currentStep()){const i=this.store.getArtistProfileForm();if(!i||!i.displayName)return void this.toastr.error("Please complete the required fields")}this.goToStep(this.currentStep()+1)}}getRouteArtistName(){return this.artistName()||this.store.artistProfile()?.displayName?.toLowerCase().replace(/\s+/g,"-")||"new"}submitSetup(){this.loading.set(!0),this.error.set(null);const e=this.store.getArtistProfileForm();if(!e)return this.error.set("Artist profile information is missing"),void this.loading.set(!1);const i=this.store.artistProfile();(i?this.artistProfileService.update(i.id,e):this.artistProfileService.create(e)).pipe((0,y.n)(s=>{this.store.setArtistProfile(s),this.store.setArtistProfileForm(e);const a=this.store.getSeriesForms();if(a.length>0){const c=a.map(d=>this.seriesService.create(d).pipe((0,g.W)(()=>(0,m.of)(null))));return(0,x.p)(c)}return(0,m.of)([])}),(0,y.n)(s=>(s.filter(Boolean).forEach(a=>{a&&this.store.addSeries(a)}),this.uploadArtworks())),(0,y.n)(()=>{const s=this.store.getGalleryForm(),a=this.store.gallery()?.id;return s&&a?this.galleryService.update(a,s):(0,m.of)(null)}),(0,_.j)(()=>this.loading.set(!1))).subscribe({next:s=>{s&&this.store.setGallery(s),this.success.set(!0),this.toastr.success("Artist profile setup completed successfully"),setTimeout(()=>{this.router.navigate(["/dash"])},2e3)},error:s=>{console.error("Error in setup process:",s),this.error.set("There was an error setting up your artist profile. Please try again.")}})}uploadArtworks(){const e=this.store.getArtworkForms();if(0===e.length)return(0,m.of)([]);const i=(r=0,s=[])=>{if(r>=e.length)return(0,m.of)(s);const a=e[r],c=a._tempId?this.store.getArtworkFile(a._tempId):null;if(!c)return i(r+1,s);const d=new FormData;return d.append("file",c),Object.entries(a).forEach(([f,v])=>{"_tempId"!==f&&null!=v&&d.append(f,v.toString())}),this.kwalhiaArtService.uploadWithFormData(d).pipe((0,g.W)(()=>(0,m.of)(null)),(0,y.n)(f=>(f&&(this.store.addArtwork(f),s.push(f)),i(r+1,s))))};return i()}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-start"]],standalone:!0,features:[t.aNF],decls:30,vars:10,consts:[[1,"container","my-5",2,"padding","0 10vw"],[1,"row","mb-4"],[1,"col-12"],[1,"mb-3"],[1,"lead"],[1,"row","mb-4","hue-rotating"],[1,"card"],[1,"card-body"],[1,"nav","nav-pills","nav-justified"],[1,"nav-item"],[1,"row"],[1,"row","mt-4","mx-4"],[1,"col-12","hue-rotating"],[1,"d-flex",3,"ngClass"],[1,"col-4","btn","btn-outline-secondary"],[1,"col-4","btn","btn-primary"],[1,"nav-link",3,"click"],[1,"alert","alert-info"],[1,"d-flex","align-items-center"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"no-hue-rotate"],[1,"card","hue-rotating"],[1,"card-header"],[1,"mb-0"],[1,"mb-4"],[1,"list-group"],[1,"list-group-item"],[1,"col-md-3","mb-3"],[1,"card","h-100"],["autoplay","","loop","","muted","",1,"card-img-top",2,"object-fit","cover","height","280px",3,"src"],[1,"card-title","text-truncate"],[1,"card-img-top",2,"object-fit","cover","height","280px",3,"src","alt"],[1,"col-4","btn","btn-outline-secondary",3,"click"],[1,"col-4","btn","btn-primary",3,"click"],["type","button",1,"col-6","btn","btn-primary",2,"filter","invert()",3,"click","disabled"]],template:function(i,r){if(1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t.EFF(4,"Artist Setup"),t.k0s(),t.j41(5,"p",4),t.EFF(6,"Complete your profile, create series, upload artworks, and customize your gallery."),t.k0s()()(),t.j41(7,"div",5)(8,"div",2)(9,"div",6)(10,"div",7)(11,"ul",8),t.Z7z(12,Et,3,4,"li",9,k),t.k0s()()()()(),t.DNE(14,Pt,7,0,"div",5)(15,Nt,4,1,"div",5)(16,Mt,4,0,"div",5),t.j41(17,"div",10)(18,"div",2),t.DNE(19,Dt,1,0)(20,It,1,0)(21,Xt,1,0)(22,Bt,1,0)(23,Ht,22,5),t.j41(24,"div",11)(25,"div",12)(26,"div",13),t.DNE(27,qt,2,0,"button",14)(28,Kt,2,0,"button",15)(29,te,2,1),t.k0s()()()()()()),2&i){let s;t.R7$(12),t.Dyx(r.steps),t.R7$(2),t.vxM(14,r.loading()?14:-1),t.R7$(),t.vxM(15,r.error()?15:-1),t.R7$(),t.vxM(16,r.success()?16:-1),t.R7$(3),t.vxM(19,0===(s=r.currentStep())?19:1===s?20:2===s?21:3===s?22:4===s?23:-1),t.R7$(7),t.Y8G("ngClass",t.l_i(7,Tt,r.currentStep()>0,0===r.currentStep())),t.R7$(),t.vxM(27,r.currentStep()>0?27:-1),t.R7$(),t.vxM(28,r.currentStep()<r.steps.length-1?28:r.currentStep()===r.steps.length-1?29:-1)}},dependencies:[z,ct,gt,jt,u.MD,u.YU,l.X1]})}}return o})()}}]);