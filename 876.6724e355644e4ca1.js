"use strict";(self.webpackChunkfront_simple=self.webpackChunkfront_simple||[]).push([[876],{5135:($,x,u)=>{u.d(x,{G:()=>A});var e=u(177),t=u(4438),c=u(9417);const F=(h,j)=>j.id,T=(h,j)=>j.key,n=()=>[];function r(h,j){if(1&h&&t.nrm(0,"textarea",5),2&h){const l=t.XpG().$implicit,k=t.XpG();t.Y8G("id",l.id)("formControl",l.formControl)("placeholder",l.placeholder||"")("rows",k.rows())}}function d(h,j){if(1&h&&(t.j41(0,"option",8),t.EFF(1),t.k0s()),2&h){const l=t.XpG(2).$implicit;t.R7$(),t.SpI("Select ",l.label,"")}}function D(h,j){if(1&h&&(t.j41(0,"option",9),t.EFF(1),t.k0s()),2&h){const l=j.$implicit;t.Y8G("value",l.id),t.R7$(),t.JRh(l.label)}}function f(h,j){if(1&h&&(t.j41(0,"select",7),t.DNE(1,d,2,1,"option",8),t.Z7z(2,D,2,2,"option",9,F),t.k0s()),2&h){const l=t.XpG().$implicit;t.Y8G("id",l.id)("formControl",l.formControl),t.R7$(),t.vxM(1,l.hideEmptyOptions?-1:1),t.R7$(),t.Dyx(l.options||t.lJ4(3,n))}}function I(h,j){if(1&h&&t.nrm(0,"input",10),2&h){const l=t.XpG().$implicit;t.Y8G("type",l.type)("id",l.id)("formControl",l.formControl)("placeholder",l.placeholder||"")}}function p(h,j){if(1&h&&(t.j41(0,"small"),t.EFF(1),t.k0s()),2&h){const l=t.XpG().$implicit,k=t.XpG(2).$implicit;t.R7$(),t.JRh(k.errors[l.key])}}function w(h,j){if(1&h&&t.DNE(0,p,2,1,"small"),2&h){const l=j.$implicit,k=t.XpG(2).$implicit;t.vxM(0,k.errors&&k.errors[l.key]?0:-1)}}function E(h,j){if(1&h&&(t.j41(0,"div",6),t.Z7z(1,w,1,1,null,null,T),t.nI1(3,"keyvalue"),t.k0s()),2&h){const l=t.XpG().$implicit;t.R7$(),t.Dyx(t.bMT(3,0,l.formControl.errors))}}function R(h,j){if(1&h&&(t.j41(0,"div")(1,"div",1)(2,"label",4),t.EFF(3),t.k0s(),t.DNE(4,r,1,4,"textarea",5)(5,f,4,4)(6,I,1,4)(7,E,4,2,"div",6),t.k0s()()),2&h){const l=j.$implicit,k=t.XpG();t.HbH(k.columnClass()),t.R7$(2),t.Y8G("for",l.id),t.R7$(),t.JRh(l.label),t.R7$(),t.vxM(4,"textarea"===l.type?4:"select"===l.type?5:6),t.R7$(3),t.vxM(7,l.formControl.invalid&&l.formControl.touched&&l.errors?7:-1)}}let A=(()=>{class h{constructor(){this.formGroup=t.hFB.required(),this.fields=t.hFB.required(),this.title=(0,t.hFB)("Section"),this.columns=(0,t.hFB)(1),this.rows=(0,t.hFB)(3),this.columnClass=(0,t.EWP)(()=>1===this.columns()?"col-12":"col-md-"+12/this.columns())}static{this.\u0275fac=function(k){return new(k||h)}}static{this.\u0275cmp=t.VBU({type:h,selectors:[["app-artwork-fieldset"]],inputs:{formGroup:[t.Mj6.SignalBased,"formGroup"],fields:[t.Mj6.SignalBased,"fields"],title:[t.Mj6.SignalBased,"title"],columns:[t.Mj6.SignalBased,"columns"],rows:[t.Mj6.SignalBased,"rows"]},standalone:!0,features:[t.aNF],decls:6,vars:1,consts:[[1,"mb-4"],[1,"mb-3"],[1,"row"],[3,"class"],[1,"form-label",3,"for"],[1,"form-control",3,"id","formControl","placeholder","rows"],[1,"text-danger","mt-1"],[1,"form-select",3,"id","formControl"],["value",""],[3,"value"],[1,"form-control",3,"type","id","formControl","placeholder"]],template:function(k,o){1&k&&(t.j41(0,"div",0)(1,"h5",1),t.EFF(2),t.k0s(),t.j41(3,"div",2),t.Z7z(4,R,8,6,"div",3,F),t.k0s()()),2&k&&(t.R7$(2),t.JRh(o.title()),t.R7$(2),t.Dyx(o.fields()))},dependencies:[c.X1,c.xH,c.y7,c.me,c.wz,c.BC,c.l_,e.MD,e.lG]})}}return h})()},190:($,x,u)=>{u.d(x,{DC:()=>w,Xj:()=>A,_z:()=>X});var e=u(4438),t=u(9417),c=u(177),F=u(5794),T=u(4221),n=u(6443),r=u(5135),d=u(7533);function D(a,C){if(1&a&&e.nrm(0,"video",17),2&a){const i=e.XpG().$implicit;e.Y8G("src",i,e.B4B)}}function f(a,C){if(1&a&&e.nrm(0,"img",18),2&a){const i=e.XpG().$implicit;e.Y8G("src",i,e.B4B)}}function I(a,C){if(1&a&&(e.j41(0,"div",16),e.DNE(1,D,1,1,"video",17)(2,f,1,1),e.k0s()),2&a){const i=C.$implicit,m=e.XpG(2);e.R7$(),e.vxM(1,m.isVideo(i)?1:2)}}function p(a,C){if(1&a&&(e.j41(0,"div",9)(1,"div",11),e.Z7z(2,I,3,1,"div",16,e.Vm6),e.k0s()()),2&a){const i=e.XpG();e.R7$(2),e.Dyx(i.previewUrls)}}let w=(()=>{class a{constructor(){this.toastr=(0,e.WQX)(F.tw),this.modal=(0,e.WQX)(T.Lw),this.isVideo=d.A,this._artwork=null,this._seriesOptions=[],this.selectedFiles=[],this.previewUrls=[],this.formArtwork=new t.gE({title:new t.MJ("",{validators:[t.k0.required,t.k0.maxLength(100)],nonNullable:!0}),type:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),yearOfCreation:new t.MJ(null),heightCm:new t.MJ(null),widthCm:new t.MJ(null),technique:new t.MJ("",{nonNullable:!0}),medium:new t.MJ("",{nonNullable:!0}),copies:new t.MJ("",{nonNullable:!0}),web:new t.MJ("",{nonNullable:!0}),price:new t.MJ(null),description:new t.MJ("",{nonNullable:!0}),seriesId:new t.MJ("",{nonNullable:!0}),editionNumber:new t.MJ(null),totalEditions:new t.MJ(null)}),this.artworkTypes=Object.values(n.H2).map(i=>({id:i,label:i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()})),this.fields={basicInfo:[{formControl:this.formArtwork.controls.title,id:"title",label:"Artwork Title",name:"title",type:"text",placeholder:"Title of your artwork",errors:{required:"Title is required",maxlength:"Title cannot exceed 100 characters"}},{formControl:this.formArtwork.controls.type,id:"type",label:"Artwork Type",name:"type",type:"select",placeholder:"Select artwork type",options:this.artworkTypes,errors:{required:"Type is required"}},{formControl:this.formArtwork.controls.description,id:"description",label:"Description",name:"description",type:"textarea",placeholder:"Describe your artwork"}],details:[{formControl:this.formArtwork.controls.yearOfCreation,id:"yearOfCreation",label:"Year of Creation",name:"yearOfCreation",type:"number"},{formControl:this.formArtwork.controls.technique,id:"technique",label:"Technique",name:"technique",type:"text"},{formControl:this.formArtwork.controls.medium,id:"medium",label:"Medium",name:"medium",type:"text"},{formControl:this.formArtwork.controls.editionNumber,id:"editionNumber",label:"Edition Number",name:"editionNumber",type:"number",placeholder:"e.g., 2"},{formControl:this.formArtwork.controls.totalEditions,id:"totalEditions",label:"Total Editions",name:"totalEditions",type:"number",placeholder:"e.g., 10"}],dimensions:[{formControl:this.formArtwork.controls.heightCm,id:"heightCm",label:"Height (cm)",name:"heightCm",type:"number"},{formControl:this.formArtwork.controls.widthCm,id:"widthCm",label:"Width (cm)",name:"widthCm",type:"number"}],additional:[{formControl:this.formArtwork.controls.seriesId,id:"seriesId",label:"Series",name:"seriesId",type:"select",options:[]},{formControl:this.formArtwork.controls.price,id:"price",label:"Price",name:"price",type:"number"}]}}get artwork(){return this._artwork}set artwork(i){this._artwork=i,i?this.initFormWithArtwork(i):this.resetForm()}get seriesOptions(){return this._seriesOptions}set seriesOptions(i){this._seriesOptions=i}ngOnInit(){this.updateSeriesOptions()}updateSeriesOptions(){this.fields.additional[0].options=[{id:"",label:"None (standalone artwork)"},...this.seriesOptions]}initFormWithArtwork(i){this.resetForm(),this.formArtwork.patchValue({title:i.title,type:i.type,yearOfCreation:i.yearOfCreation||null,heightCm:i.heightCm||null,widthCm:i.widthCm||null,technique:i.technique||"",medium:i.medium||"",copies:i.copies||"",web:i.web||"",price:i.price||null,description:i.description||"",seriesId:i.seriesId||"",editionNumber:i.editionNumber||null,totalEditions:i.totalEditions||null}),this.previewUrls=[i.fileUrl]}onFilesSelected(i){const m=i.target;if(!m.files?.length)return;this.artwork||(this.selectedFiles=[],this.previewUrls=[]);const s=Array.from(m.files);let b=!1;const v=[];s.forEach(y=>{if(y.size>10485760)return this.toastr.error(`File "${y.name}" exceeds 10MB size limit`),void(b=!0);const G=y.name.split(".").pop()?.toLowerCase();if(!G||!["jpg","jpeg","png","webm","mp4","gif","txt"].includes(G))return this.toastr.error(`File "${y.name}" has unsupported format`),void(b=!0);v.push(y);const S=new FileReader;S.onload=()=>{this.previewUrls.push(S.result)},S.readAsDataURL(y)}),this.selectedFiles=[...this.selectedFiles,...v],b&&0===v.length&&(m.value="")}resetForm(){this.formArtwork.reset(),this.selectedFiles=[],this.previewUrls=[],this.formArtwork.patchValue({type:"",technique:"",medium:"",copies:"",web:"",description:"",seriesId:""})}saveArtwork(){if(!this.formArtwork.valid)return this.formArtwork.markAllAsTouched(),void this.toastr.error("Please correct the errors in the form");if(!this.artwork&&0===this.selectedFiles.length)return void this.toastr.error("Please select at least one file for your artwork");const i=this.formArtwork.getRawValue();i.editionNumber&&i.totalEditions&&i.editionNumber>i.totalEditions?this.toastr.error("Edition number cannot be greater than total editions"):this.modal.close({formData:{title:i.title,type:i.type,yearOfCreation:i.yearOfCreation||void 0,heightCm:i.heightCm||void 0,widthCm:i.widthCm||void 0,technique:i.technique,medium:i.medium,copies:i.copies,web:i.web,price:i.price||void 0,description:i.description,seriesId:i.seriesId||void 0,editionNumber:i.editionNumber||void 0,totalEditions:i.totalEditions||void 0},files:this.selectedFiles})}static{this.\u0275fac=function(m){return new(m||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-artwork-modal"]],standalone:!0,features:[e.aNF],decls:25,vars:17,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],[1,"mb-4"],["for","fileUpload",1,"form-label"],["type","file","id","fileUpload","accept",".jpg,.jpeg,.png,.webm,.mp4,.gif,.txt",1,"form-control",3,"change","multiple"],[1,"form-text"],[1,"mt-3"],[3,"formGroup","fields","title"],[1,"row"],[1,"col-md-6"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-md-3","mb-2"],["autoplay","","loop","","muted","",1,"img-thumbnail",2,"height","100px","width","100%","object-fit","cover",3,"src"],["alt","Preview",1,"img-thumbnail",2,"height","100px","width","100%","object-fit","cover",3,"src"]],template:function(m,s){1&m&&(e.j41(0,"div",0)(1,"h5",1),e.EFF(2),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){return s.modal.dismiss()}),e.k0s()(),e.j41(4,"div",3)(5,"form",4)(6,"div",5)(7,"label",6),e.EFF(8,"Artwork File"),e.k0s(),e.j41(9,"input",7),e.bIt("change",function(v){return s.onFilesSelected(v)}),e.k0s(),e.j41(10,"div",8),e.EFF(11," Supported formats: JPG, PNG, WEBM, MP4, GIF, TXT (Max 10MB) "),e.k0s(),e.DNE(12,p,4,0,"div",9),e.k0s(),e.nrm(13,"app-artwork-fieldset",10),e.j41(14,"div",11)(15,"div",12),e.nrm(16,"app-artwork-fieldset",10),e.k0s(),e.j41(17,"div",12),e.nrm(18,"app-artwork-fieldset",10),e.k0s()(),e.nrm(19,"app-artwork-fieldset",10),e.k0s()(),e.j41(20,"div",13)(21,"button",14),e.bIt("click",function(){return s.modal.dismiss()}),e.EFF(22,"Cancel"),e.k0s(),e.j41(23,"button",15),e.bIt("click",function(){return s.saveArtwork()}),e.EFF(24),e.k0s()()),2&m&&(e.R7$(2),e.JRh(s.artwork?"Edit Artwork":"Add New Artwork"),e.R7$(3),e.Y8G("formGroup",s.formArtwork),e.R7$(4),e.Y8G("multiple",!s.artwork),e.R7$(3),e.vxM(12,s.previewUrls.length>0?12:-1),e.R7$(),e.Y8G("formGroup",s.formArtwork)("fields",s.fields.basicInfo)("title","Basic Information"),e.R7$(3),e.Y8G("formGroup",s.formArtwork)("fields",s.fields.details)("title","Details"),e.R7$(2),e.Y8G("formGroup",s.formArtwork)("fields",s.fields.dimensions)("title","Dimensions"),e.R7$(),e.Y8G("formGroup",s.formArtwork)("fields",s.fields.additional)("title","Additional Information"),e.R7$(5),e.SpI(" ",s.artwork?"Update Artwork":"Add Artwork"," "))},dependencies:[t.X1,t.qT,t.cb,t.j4,c.MD,r.G],encapsulation:2})}}return a})();function R(a,C){if(1&a&&(e.j41(0,"div",5)(1,"h6"),e.EFF(2,"Preview:"),e.k0s(),e.nrm(3,"img",15),e.k0s()),2&a){const i=e.XpG();e.R7$(3),e.Y8G("src",i.previewUrl,e.B4B)}}u(8194);let A=(()=>{class a{constructor(){this.toastr=(0,e.WQX)(F.tw),this.modal=(0,e.WQX)(T.Lw),this.textureType=n.Ap.FLOOR,this.previewUrl=null,this.selectedFile=null,this.uploadForm=new t.gE({isPublic:new t.MJ(!1,{nonNullable:!0})})}get typeDisplay(){return this.textureType.charAt(0).toUpperCase()+this.textureType.slice(1).toLowerCase()}onFileSelected(i){const m=i.target;if(!m.files?.length)return;const s=m.files[0];if(s.size>10485760)return this.toastr.error("File exceeds 10MB size limit"),void(m.value="");const b=s.name.split(".").pop()?.toLowerCase();if(!b||!["jpg","jpeg","png","webm","mp4","gif"].includes(b))return this.toastr.error(`Unsupported file format: ${b}`),void(m.value="");this.selectedFile=s;const y=new FileReader;y.onload=()=>{this.previewUrl=y.result},y.readAsDataURL(s)}upload(){if(!this.selectedFile)return void this.toastr.error("Please select a file");const i=this.uploadForm.getRawValue();this.modal.close({type:this.textureType,file:this.selectedFile,isPublic:i.isPublic})}static{this.\u0275fac=function(m){return new(m||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-texture-upload-modal"]],standalone:!0,features:[e.aNF],decls:23,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],[1,"mb-4"],["for","textureFile",1,"form-label"],["type","file","id","textureFile","accept",".jpg,.jpeg,.png,.webm,.mp4,.gif",1,"form-control",3,"change"],[1,"form-text"],[1,"form-check"],["type","checkbox","id","isPublic","formControlName","isPublic",1,"form-check-input"],["for","isPublic",1,"form-check-label"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["alt","Texture preview",1,"img-thumbnail",2,"max-height","200px",3,"src"]],template:function(m,s){1&m&&(e.j41(0,"div",0)(1,"h5",1),e.EFF(2),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){return s.modal.dismiss()}),e.k0s()(),e.j41(4,"div",3)(5,"form",4)(6,"div",5)(7,"label",6),e.EFF(8,"Select Texture File"),e.k0s(),e.j41(9,"input",7),e.bIt("change",function(v){return s.onFileSelected(v)}),e.k0s(),e.j41(10,"div",8),e.EFF(11," Supported formats: JPG, PNG, WEBM, MP4, GIF (Max 10MB) "),e.k0s()(),e.DNE(12,R,4,1,"div",5),e.j41(13,"div",5)(14,"div",9),e.nrm(15,"input",10),e.j41(16,"label",11),e.EFF(17," Make this texture public (available to other artists) "),e.k0s()()()()(),e.j41(18,"div",12)(19,"button",13),e.bIt("click",function(){return s.modal.dismiss()}),e.EFF(20,"Cancel"),e.k0s(),e.j41(21,"button",14),e.bIt("click",function(){return s.upload()}),e.EFF(22," Upload Texture "),e.k0s()()),2&m&&(e.R7$(2),e.SpI("Upload ",s.typeDisplay," Texture"),e.R7$(3),e.Y8G("formGroup",s.uploadForm),e.R7$(7),e.vxM(12,s.previewUrl?12:-1),e.R7$(9),e.Y8G("disabled",!s.selectedFile))},dependencies:[t.X1,t.qT,t.Zm,t.BC,t.cb,t.j4,t.JD,c.MD]})}}return a})();const h=(a,C)=>C.id,j=(a,C)=>C.key,l=()=>[];function k(a,C){if(1&a&&e.nrm(0,"textarea",22),2&a){const i=e.XpG().$implicit;e.Y8G("id",i.id)("formControl",i.formControl)("placeholder",i.placeholder||"")("rows",i.rows||3)}}function o(a,C){if(1&a&&e.nrm(0,"input",24),2&a){const i=e.XpG().$implicit;e.Y8G("type",i.type)("id",i.id)("formControl",i.formControl)("placeholder",i.placeholder||"")}}function _(a,C){if(1&a&&(e.j41(0,"small"),e.EFF(1),e.k0s()),2&a){const i=e.XpG().$implicit,m=e.XpG(2).$implicit;e.R7$(),e.JRh(m.errors[i.key])}}function g(a,C){if(1&a&&e.DNE(0,_,2,1,"small"),2&a){const i=C.$implicit,m=e.XpG(2).$implicit;e.vxM(0,m.errors&&m.errors[i.key]?0:-1)}}function M(a,C){if(1&a&&(e.j41(0,"div",23),e.Z7z(1,g,1,1,null,null,j),e.nI1(3,"keyvalue"),e.k0s()),2&a){const i=e.XpG().$implicit;e.R7$(),e.Dyx(e.bMT(3,0,i.formControl.errors))}}function O(a,C){if(1&a&&(e.j41(0,"div",6)(1,"label",7),e.EFF(2),e.k0s(),e.DNE(3,k,1,4,"textarea",22)(4,o,1,4)(5,M,4,2,"div",23),e.k0s()),2&a){const i=C.$implicit;e.R7$(),e.Y8G("for",i.id),e.R7$(),e.JRh(i.label),e.R7$(),e.vxM(3,"textarea"===i.type?3:4),e.R7$(2),e.vxM(5,i.formControl.invalid&&i.formControl.touched&&i.errors?5:-1)}}function U(a,C){if(1&a&&(e.j41(0,"option",9),e.EFF(1),e.k0s()),2&a){const i=C.$implicit;e.Y8G("value",i.id),e.R7$(),e.JRh(i.label)}}function B(a,C){1&a&&e.EFF(0," Supported formats: OBJ, GLTF, GLB, FBX, STL (Max 50MB) ")}function V(a,C){1&a&&e.EFF(0," Supported formats: PLY, LAS, PTS, XYZ, DXF (Max 50MB) ")}function N(a,C){if(1&a&&(e.j41(0,"div",15),e.nrm(1,"img",25),e.k0s()),2&a){const i=e.XpG();e.R7$(),e.Y8G("src",i.thumbnailPreview,e.B4B)}}function L(a,C){if(1&a&&(e.j41(0,"div",15),e.nrm(1,"img",26),e.k0s()),2&a){const i=e.XpG();e.R7$(),e.Y8G("src",i.texturePreview,e.B4B)}}function J(a,C){if(1&a&&(e.j41(0,"div",18),e.nrm(1,"input",27),e.j41(2,"label",28),e.EFF(3),e.k0s()()),2&a){const i=C.$implicit;e.R7$(),e.Y8G("id",i.id)("formControl",i.formControl),e.R7$(),e.Y8G("for",i.id),e.R7$(),e.SpI(" ",i.label," ")}}let X=(()=>{class a{constructor(){this.toastr=(0,e.WQX)(F.tw),this.modal=(0,e.WQX)(T.Lw),this._object=null,this.objectTypeOptions=[{id:n.ex.MESH,label:"Mesh (3D Model)"},{id:n.ex.POINT_CLOUD,label:"Point Cloud"}],this.objectFile=null,this.thumbnailFile=null,this.textureFile=null,this.thumbnailPreview=null,this.texturePreview=null,this.objectForm=new t.gE({title:new t.MJ("",{validators:[t.k0.required,t.k0.maxLength(100)],nonNullable:!0}),shortDescription:new t.MJ("",{validators:[t.k0.required],nonNullable:!0}),description:new t.MJ(""),objectType:new t.MJ(n.ex.MESH,{validators:[t.k0.required],nonNullable:!0}),isPublic:new t.MJ(!1,{nonNullable:!0}),aiGenerated:new t.MJ(!1,{nonNullable:!0})}),this.basicInfoFields=[{formControl:this.objectForm.controls.title,id:"title",label:"Title",name:"title",type:"text",placeholder:"Enter title for your 3D object",errors:{required:"Title is required",maxlength:"Title cannot exceed 100 characters"}},{formControl:this.objectForm.controls.shortDescription,id:"shortDescription",label:"Short Description",name:"shortDescription",type:"text",placeholder:"Brief description (shown in listings)",errors:{required:"Short description is required"}},{formControl:this.objectForm.controls.description,id:"description",label:"Full Description",name:"description",type:"textarea",placeholder:"Detailed description of your 3D object",rows:3}],this.objectTypeField={formControl:this.objectForm.controls.objectType,id:"objectType",label:"Object Type",name:"objectType",type:"select",options:this.objectTypeOptions.map(i=>({id:i.id,label:i.label}))},this.optionFields=[{formControl:this.objectForm.controls.isPublic,id:"isPublic",label:"Make this object publicly available",name:"isPublic",type:"checkbox"},{formControl:this.objectForm.controls.aiGenerated,id:"aiGenerated",label:"This object was AI-generated",name:"aiGenerated",type:"checkbox"}]}get object(){return this._object}set object(i){this._object=i,i&&this.initFormWithObject(i)}initFormWithObject(i){this.objectForm.patchValue({title:i.title,shortDescription:i.shortDescription,description:i.description||"",objectType:i.metadata.objectType,isPublic:i.isPublic,aiGenerated:i.metadata.aiGenerated}),this.thumbnailPreview=i.thumbnailUrl,i.hasTextures&&i.textureCdnUrl&&(this.texturePreview=i.textureCdnUrl)}onObjectFileSelected(i){const m=i.target;if(!m.files?.length)return;const s=m.files[0],b=this.objectForm.get("objectType")?.value,v=s.name.split(".").pop()?.toLowerCase(),P=b===n.ex.MESH?["obj","gltf","glb","gltb","fbx","stl"]:["ply","las","pts","xyz","dxf"];return v&&P.includes(v)?s.size>52428800?(this.toastr.error("File size exceeds 50MB limit"),void(m.value="")):void(this.objectFile=s):(this.toastr.error(`Invalid file format. Supported formats: ${P.join(", ")}`),void(m.value=""))}onThumbnailFileSelected(i){const m=i.target;if(!m.files?.length)return;const s=m.files[0],b=s.name.split(".").pop()?.toLowerCase(),v=["jpg","jpeg","png"];if(!b||!v.includes(b))return this.toastr.error(`Invalid thumbnail format. Supported formats: ${v.join(", ")}`),void(m.value="");if(s.size>5242880)return this.toastr.error("Thumbnail size exceeds 5MB limit"),void(m.value="");this.thumbnailFile=s;const y=new FileReader;y.onload=()=>{this.thumbnailPreview=y.result},y.readAsDataURL(s)}onTextureFileSelected(i){const m=i.target;if(!m.files?.length)return;const s=m.files[0],b=s.name.split(".").pop()?.toLowerCase(),v=["jpg","jpeg","png"];if(!b||!v.includes(b))return this.toastr.error(`Invalid texture format. Supported formats: ${v.join(", ")}`),void(m.value="");if(s.size>5242880)return this.toastr.error("Texture size exceeds 5MB limit"),void(m.value="");this.textureFile=s;const y=new FileReader;y.onload=()=>{this.texturePreview=y.result},y.readAsDataURL(s)}save(){if(this.objectForm.invalid)return this.objectForm.markAllAsTouched(),void this.toastr.error("Please correct the form errors");if(!this.object&&!this.objectFile)return void this.toastr.error("Please select a 3D object file");if(!this.object&&!this.thumbnailFile)return void this.toastr.error("Please provide a thumbnail image");const i=new FormData,m=this.objectForm.getRawValue();Object.entries(m).forEach(([s,b])=>{i.append(s,b.toString())}),this.objectFile&&i.append("objectFile",this.objectFile),this.thumbnailFile&&i.append("thumbnailFile",this.thumbnailFile),this.textureFile&&i.append("textureFile",this.textureFile),console.log("Object file present:",!!this.objectFile),console.log("Thumbnail file present:",!!this.thumbnailFile),console.log("Form values:",this.objectForm.getRawValue()),this.modal.close({formValues:this.objectForm.getRawValue(),objectFile:this.objectFile,thumbnailFile:this.thumbnailFile,textureFile:this.textureFile})}static{this.\u0275fac=function(m){return new(m||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-three-d-object-modal"]],standalone:!0,features:[e.aNF],decls:51,vars:13,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],[1,"mb-4"],[1,"mb-3"],[1,"form-label",3,"for"],[1,"form-select",3,"id","formControl","disabled"],[3,"value"],["for","objectFile",1,"form-label"],["type","file","id","objectFile",1,"form-control",3,"change","disabled"],[1,"form-text"],["for","thumbnailFile",1,"form-label"],["type","file","id","thumbnailFile","accept",".jpg,.jpeg,.png",1,"form-control",3,"change"],[1,"mt-2"],["for","textureFile",1,"form-label"],["type","file","id","textureFile","accept",".jpg,.jpeg,.png",1,"form-control",3,"change"],[1,"form-check","mb-3"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"form-control",3,"id","formControl","placeholder","rows"],[1,"text-danger","mt-1"],[1,"form-control",3,"type","id","formControl","placeholder"],["alt","Thumbnail preview",1,"img-thumbnail",2,"height","150px",3,"src"],["alt","Texture preview",1,"img-thumbnail",2,"height","150px",3,"src"],["type","checkbox",1,"form-check-input",3,"id","formControl"],[1,"form-check-label",3,"for"]],template:function(m,s){if(1&m&&(e.j41(0,"div",0)(1,"h5",1),e.EFF(2),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){return s.modal.dismiss()}),e.k0s()(),e.j41(4,"div",3)(5,"form",4)(6,"div",5)(7,"h6",6),e.EFF(8,"Basic Information"),e.k0s(),e.Z7z(9,O,6,4,"div",6,h),e.k0s(),e.j41(11,"div",5)(12,"h6",6),e.EFF(13,"Object Type & Files"),e.k0s(),e.j41(14,"div",6)(15,"label",7),e.EFF(16),e.k0s(),e.j41(17,"select",8),e.Z7z(18,U,2,2,"option",9,h),e.k0s()(),e.j41(20,"div",6)(21,"label",10),e.EFF(22,"3D Object File"),e.k0s(),e.j41(23,"input",11),e.bIt("change",function(v){return s.onObjectFileSelected(v)}),e.k0s(),e.j41(24,"div",12),e.DNE(25,B,1,0)(26,V,1,0),e.k0s()(),e.j41(27,"div",6)(28,"label",13),e.EFF(29,"Thumbnail Image"),e.k0s(),e.j41(30,"input",14),e.bIt("change",function(v){return s.onThumbnailFileSelected(v)}),e.k0s(),e.j41(31,"div",12),e.EFF(32,"Supported formats: JPG, PNG (Max 5MB)"),e.k0s(),e.DNE(33,N,2,1,"div",15),e.k0s(),e.j41(34,"div",6)(35,"label",16),e.EFF(36,"Texture Image (Optional)"),e.k0s(),e.j41(37,"input",17),e.bIt("change",function(v){return s.onTextureFileSelected(v)}),e.k0s(),e.j41(38,"div",12),e.EFF(39,"Supported formats: JPG, PNG (Max 5MB)"),e.k0s(),e.DNE(40,L,2,1,"div",15),e.k0s()(),e.j41(41,"div",5)(42,"h6",6),e.EFF(43,"Options"),e.k0s(),e.Z7z(44,J,4,4,"div",18,h),e.k0s()()(),e.j41(46,"div",19)(47,"button",20),e.bIt("click",function(){return s.modal.dismiss()}),e.EFF(48,"Cancel"),e.k0s(),e.j41(49,"button",21),e.bIt("click",function(){return s.save()}),e.EFF(50),e.k0s()()),2&m){let b;e.R7$(2),e.JRh(s.object?"Edit 3D Object":"Upload 3D Object"),e.R7$(3),e.Y8G("formGroup",s.objectForm),e.R7$(4),e.Dyx(s.basicInfoFields),e.R7$(6),e.Y8G("for",s.objectTypeField.id),e.R7$(),e.JRh(s.objectTypeField.label),e.R7$(),e.Y8G("id",s.objectTypeField.id)("formControl",s.objectTypeField.formControl)("disabled",!!s.object),e.R7$(),e.Dyx(s.objectTypeField.options||e.lJ4(12,l)),e.R7$(5),e.Y8G("disabled",!!s.object),e.R7$(2),e.vxM(25,"mesh"===(null==(b=s.objectForm.get("objectType"))?null:b.value)?25:26),e.R7$(8),e.vxM(33,s.thumbnailPreview?33:-1),e.R7$(7),e.vxM(40,s.texturePreview?40:-1),e.R7$(4),e.Dyx(s.optionFields),e.R7$(6),e.SpI(" ",s.object?"Update Object":"Upload Object"," ")}},dependencies:[t.X1,t.qT,t.xH,t.y7,t.me,t.Zm,t.wz,t.BC,t.cb,t.l_,t.j4,c.MD,c.lG],encapsulation:2})}}return a})()},8194:($,x,u)=>{u.d(x,{M:()=>j});var e=u(4438),t=u(9417),c=u(177),F=u(5794),T=u(4221),n=u(5135),r=u(3841);const d=(l,k)=>k.id;function D(l,k){if(1&l&&(e.j41(0,"div",10)(1,"div",15),e.nrm(2,"input",16),e.j41(3,"label",17),e.EFF(4),e.k0s()()()),2&l){const o=k.$implicit;e.R7$(2),e.Y8G("type",o.type)("id",o.id)("formControl",o.formControl),e.R7$(),e.Y8G("for",o.id),e.R7$(),e.JRh(o.label)}}function f(l,k){if(1&l){const o=e.RV6();e.j41(0,"div",21)(1,"div",15)(2,"input",19),e.bIt("change",function(){const g=e.eBV(o).$implicit,M=e.XpG(4);return e.Njj(M.toggleArtwork(g.id))}),e.k0s(),e.j41(3,"label",22),e.EFF(4),e.k0s()()()}if(2&l){const o=k.$implicit,_=e.XpG(4);e.R7$(2),e.Y8G("id","artwork-"+o.id)("checked",_.selectedArtworks.includes(o.id)),e.R7$(),e.Y8G("for","artwork-"+o.id),e.R7$(),e.SpI(" ",o.title," ")}}function I(l,k){if(1&l&&(e.j41(0,"div",20)(1,"h6"),e.EFF(2,"Artworks in this series:"),e.k0s(),e.j41(3,"div",9),e.Z7z(4,f,5,4,"div",21,d),e.k0s()()),2&l){const o=e.XpG().$implicit,_=e.XpG(2);e.R7$(4),e.Dyx(_.getArtworksForSeries(o.id))}}function p(l,k){if(1&l){const o=e.RV6();e.j41(0,"div",18)(1,"div",15)(2,"input",19),e.bIt("change",function(){const g=e.eBV(o).$implicit,M=e.XpG(2);return e.Njj(M.toggleSeries(g.id))}),e.k0s(),e.j41(3,"label",17),e.EFF(4),e.k0s()(),e.DNE(5,I,6,0,"div",20),e.k0s()}if(2&l){const o=k.$implicit,_=e.XpG(2);e.R7$(2),e.Y8G("id","series-"+o.id)("checked",_.selectedSeries.includes(o.id)),e.R7$(),e.Y8G("for","series-"+o.id),e.R7$(),e.SpI(" ",o.label," "),e.R7$(),e.vxM(5,_.selectedSeries.includes(o.id)?5:-1)}}function w(l,k){if(1&l&&(e.j41(0,"div",11),e.Z7z(1,p,6,5,"div",18,d),e.k0s()),2&l){const o=e.XpG();e.R7$(),e.Dyx(o.seriesOptions)}}function E(l,k){1&l&&(e.j41(0,"p",23),e.EFF(1,"No series available. Please create series and artworks first."),e.k0s())}function R(l,k){if(1&l){const o=e.RV6();e.j41(0,"div",18)(1,"div",15)(2,"input",19),e.bIt("change",function(){const g=e.eBV(o).$implicit,M=e.XpG(2);return e.Njj(M.toggleThreeDObject(g.id))}),e.k0s(),e.j41(3,"label",17),e.EFF(4),e.k0s()()()}if(2&l){const o=k.$implicit,_=e.XpG(2);e.R7$(2),e.Y8G("id","object-"+o.id)("checked",_.selectedThreeDObjects.includes(o.id)),e.R7$(),e.Y8G("for","object-"+o.id),e.R7$(),e.SpI(" ",o.label," ")}}function A(l,k){if(1&l&&(e.j41(0,"div",11),e.Z7z(1,R,5,4,"div",18,d),e.k0s()),2&l){const o=e.XpG();e.R7$(),e.Dyx(o.threeDObjectOptions)}}function h(l,k){1&l&&(e.j41(0,"p",23),e.EFF(1,"No 3D objects available. Please create some 3D objects first."),e.k0s())}let j=(()=>{class l{constructor(){this.toastr=(0,e.WQX)(F.tw),this.store=(0,e.WQX)(r.P),this.modal=(0,e.WQX)(T.Lw),this._config=null,this._hydraScriptOptions=[],this._seriesOptions=[],this._threeDObjectOptions=[],this._textureOptions={floor:[],wall:[],ceiling:[],sky:[]},this.selectedArtworks=[],this.selectedSeries=[],this.selectedThreeDObjects=[],this.formVrConfig=new t.gE({title:new t.MJ("",{validators:[t.k0.required,t.k0.maxLength(100)],nonNullable:!0}),ceilingTextureRepeat:new t.MJ(1,{validators:[t.k0.required,t.k0.min(.1),t.k0.max(10)],nonNullable:!0}),wallTextureRepeat:new t.MJ(1,{validators:[t.k0.required,t.k0.min(.1),t.k0.max(10)],nonNullable:!0}),skyTextureRepeat:new t.MJ(1,{validators:[t.k0.required,t.k0.min(.1),t.k0.max(10)],nonNullable:!0}),floorTextureRepeat:new t.MJ(1,{validators:[t.k0.required,t.k0.min(.1),t.k0.max(10)],nonNullable:!0}),floorTextureId:new t.MJ(""),wallTextureId:new t.MJ(""),ceilingTextureId:new t.MJ(""),skyTextureId:new t.MJ(""),flyAllowed:new t.MJ(!1,{nonNullable:!0}),randomAllowed:new t.MJ(!1,{nonNullable:!0}),hydraScriptId:new t.MJ("")}),this.fields={basicInfo:[{formControl:this.formVrConfig.controls.title,id:"title",label:"Configuration Title",name:"title",type:"text",placeholder:"Enter a name for this VR configuration",errors:{required:"Title is required",maxlength:"Title cannot exceed 100 characters"}},{formControl:this.formVrConfig.controls.hydraScriptId,id:"hydraScriptId",label:"Hydra Script",name:"hydraScriptId",type:"select",options:[],placeholder:"Select a Hydra script"}],textureSettings:[{formControl:this.formVrConfig.controls.floorTextureId,id:"floorTextureId",label:"Floor Texture",name:"floorTextureId",type:"select",options:[],placeholder:"Select a floor texture"},{formControl:this.formVrConfig.controls.floorTextureRepeat,id:"floorTextureRepeat",label:"Floor Texture Repeat",name:"floorTextureRepeat",type:"number",placeholder:"1.0",errors:{required:"Repeat value is required",min:"Minimum value is 0.1",max:"Maximum value is 10"}},{formControl:this.formVrConfig.controls.wallTextureId,id:"wallTextureId",label:"Wall Texture",name:"wallTextureId",type:"select",options:[],placeholder:"Select a wall texture"},{formControl:this.formVrConfig.controls.wallTextureRepeat,id:"wallTextureRepeat",label:"Wall Texture Repeat",name:"wallTextureRepeat",type:"number",placeholder:"1.0",errors:{required:"Repeat value is required",min:"Minimum value is 0.1",max:"Maximum value is 10"}},{formControl:this.formVrConfig.controls.ceilingTextureId,id:"ceilingTextureId",label:"Ceiling Texture",name:"ceilingTextureId",type:"select",options:[],placeholder:"Select a ceiling texture"},{formControl:this.formVrConfig.controls.ceilingTextureRepeat,id:"ceilingTextureRepeat",label:"Ceiling Texture Repeat",name:"ceilingTextureRepeat",type:"number",placeholder:"1.0",errors:{required:"Repeat value is required",min:"Minimum value is 0.1",max:"Maximum value is 10"}},{formControl:this.formVrConfig.controls.skyTextureId,id:"skyTextureId",label:"Sky Texture",name:"skyTextureId",type:"select",options:[],placeholder:"Select a sky texture"},{formControl:this.formVrConfig.controls.skyTextureRepeat,id:"skyTextureRepeat",label:"Sky Texture Repeat",name:"skyTextureRepeat",type:"number",placeholder:"1.0",errors:{required:"Repeat value is required",min:"Minimum value is 0.1",max:"Maximum value is 10"}}],options:[{formControl:this.formVrConfig.controls.flyAllowed,id:"flyAllowed",label:"Enable Flying",name:"flyAllowed",type:"checkbox"},{formControl:this.formVrConfig.controls.randomAllowed,id:"randomAllowed",label:"Allow Random Placement",name:"randomAllowed",type:"checkbox"}]}}get config(){return this._config}set config(o){this._config=o,o&&this.initFormWithConfig(o)}get seriesOptions(){return this._seriesOptions}set seriesOptions(o){this._seriesOptions=o}get textureOptions(){return this._textureOptions}set textureOptions(o){this._textureOptions=o}get hydraScriptOptions(){return this._hydraScriptOptions}set hydraScriptOptions(o){this._hydraScriptOptions=o}get threeDObjectOptions(){return this._threeDObjectOptions}set threeDObjectOptions(o){this._threeDObjectOptions=o}ngOnInit(){this.updateTextureOptions(),this.updateHydraScriptOptions(),this.config&&this.loadSelectedItems()}updateTextureOptions(){this.fields.textureSettings[0].options=[{id:"",label:"None"},...this.textureOptions.floor.map(O=>({id:O.id,label:O.filename}))],this.fields.textureSettings[2].options=[{id:"",label:"None"},...this.textureOptions.wall.map(O=>({id:O.id,label:O.filename}))],this.fields.textureSettings[4].options=[{id:"",label:"None"},...this.textureOptions.ceiling.map(O=>({id:O.id,label:O.filename}))],this.fields.textureSettings[6].options=[{id:"",label:"None"},...this.textureOptions.sky.map(O=>({id:O.id,label:O.filename}))]}initFormWithConfig(o){this.formVrConfig.patchValue({title:o.title,ceilingTextureRepeat:o.ceilingTextureRepeat,wallTextureRepeat:o.wallTextureRepeat,skyTextureRepeat:o.skyTextureRepeat,floorTextureRepeat:o.floorTextureRepeat,flyAllowed:o.flyAllowed,randomAllowed:o.randomAllowed,floorTextureId:o.floorTextureId||"",wallTextureId:o.wallTextureId||"",ceilingTextureId:o.ceilingTextureId||"",skyTextureId:o.skyTextureId||"",hydraScriptId:o.hydraScriptId||""})}loadSelectedItems(){this.config?.artworks&&(this.selectedArtworks=this.config.artworks.map(o=>o.id)),this.config?.series&&(this.selectedSeries=this.config.series.map(o=>o.id)),this.config?.threeDObjects&&(this.selectedThreeDObjects=this.config.threeDObjects.map(o=>o.id))}toggleSeries(o){const _=this.selectedSeries.indexOf(o);if(-1===_)this.selectedSeries.push(o);else{this.selectedSeries.splice(_,1);const g=this.getArtworksForSeries(o).map(M=>M.id);this.selectedArtworks=this.selectedArtworks.filter(M=>!g.includes(M))}}toggleArtwork(o){const _=this.selectedArtworks.indexOf(o);-1===_?this.selectedArtworks.push(o):this.selectedArtworks.splice(_,1)}toggleThreeDObject(o){const _=this.selectedThreeDObjects.indexOf(o);-1===_?this.selectedThreeDObjects.push(o):this.selectedThreeDObjects.splice(_,1)}getArtworksForSeries(o){return this.store.artworks().filter(_=>_.seriesId===o)}updateHydraScriptOptions(){const o=this.fields.basicInfo.find(_=>"hydraScriptId"===_.id);o&&(o.options=[{id:"",label:"None"},...this.hydraScriptOptions])}saveConfiguration(){if(!this.formVrConfig.valid)return this.formVrConfig.markAllAsTouched(),void this.toastr.error("Please correct the errors in the form");const o=this.formVrConfig.getRawValue(),_=this.config?.artworkTransforms||{},g={};this.selectedArtworks.forEach(O=>{_[O]&&(g[O]=_[O])});const M={...o,artworkIds:this.selectedArtworks,seriesIds:this.selectedSeries,threeDObjectIds:this.selectedThreeDObjects,artworkTransforms:g};this.modal.close(M)}static{this.\u0275fac=function(_){return new(_||l)}}static{this.\u0275cmp=e.VBU({type:l,selectors:[["app-vr-base-config-modal"]],standalone:!0,features:[e.aNF],decls:29,vars:12,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],[3,"formGroup","fields","title"],[3,"formGroup","fields","title","columns"],[1,"mb-4"],[1,"mb-3"],[1,"row"],[1,"col-md-6","mb-3"],[1,"list-group"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"form-check"],[1,"form-check-input",3,"type","id","formControl"],[1,"form-check-label",3,"for"],[1,"list-group-item"],["type","checkbox",1,"form-check-input",3,"change","id","checked"],[1,"mt-3","ms-4"],[1,"col-md-4","mb-2"],[1,"form-check-label","text-truncate",3,"for"],[1,"text-muted"]],template:function(_,g){1&_&&(e.j41(0,"div",0)(1,"h5",1),e.EFF(2),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){return g.modal.dismiss()}),e.k0s()(),e.j41(4,"div",3)(5,"form",4),e.nrm(6,"app-artwork-fieldset",5)(7,"app-artwork-fieldset",6),e.j41(8,"div",7)(9,"h5",8),e.EFF(10,"Options"),e.k0s(),e.j41(11,"div",9),e.Z7z(12,D,5,5,"div",10,d),e.k0s()(),e.j41(14,"div",7)(15,"h5",8),e.EFF(16,"Select Series"),e.k0s(),e.DNE(17,w,3,0,"div",11)(18,E,2,0),e.k0s(),e.j41(19,"div",7)(20,"h5",8),e.EFF(21,"Select 3D Objects"),e.k0s(),e.DNE(22,A,3,0,"div",11)(23,h,2,0),e.k0s()()(),e.j41(24,"div",12)(25,"button",13),e.bIt("click",function(){return g.modal.dismiss()}),e.EFF(26,"Cancel"),e.k0s(),e.j41(27,"button",14),e.bIt("click",function(){return g.saveConfiguration()}),e.EFF(28),e.k0s()()),2&_&&(e.R7$(2),e.JRh(g.config?"Edit VR Configuration":"Create VR Configuration"),e.R7$(3),e.Y8G("formGroup",g.formVrConfig),e.R7$(),e.Y8G("formGroup",g.formVrConfig)("fields",g.fields.basicInfo)("title","Configuration Details"),e.R7$(),e.Y8G("formGroup",g.formVrConfig)("fields",g.fields.textureSettings)("title","Texture Settings")("columns",2),e.R7$(5),e.Dyx(g.fields.options),e.R7$(5),e.vxM(17,g.seriesOptions.length>0?17:18),e.R7$(5),e.vxM(22,g.threeDObjectOptions.length>0?22:23),e.R7$(6),e.SpI(" ",g.config?"Update Configuration":"Create Configuration"," "))},dependencies:[t.X1,t.qT,t.me,t.BC,t.cb,t.l_,t.j4,c.MD,n.G]})}}return l})()},6443:($,x,u)=>{u.d(x,{H2:()=>e.H,Ap:()=>t,ex:()=>c});var e=u(6447),t=function(F){return F.FLOOR="floor",F.WALL="wall",F.SKY="sky",F.CEILING="ceiling",F}(t||{}),c=function(F){return F.MESH="mesh",F.POINT_CLOUD="pointCloud",F}(c||{})},6447:($,x,u)=>{u.d(x,{H:()=>e});var e=function(c){return c.DIGIITALART="digitalart",c.PAINTING="painting",c.SCULPTURE="sculpture",c.INSTALLATION="installation",c.MIXEDMEDIA="mixedmedia",c.DRAWING="drawing",c.PHOTOGRAPH="photograph",c.PERFORMANCE="performance",c.COLLAGE="collage",c.VIDEOART="videoart",c.CREATIVECODE="creativecode",c.POETRY="poetry",c.VIDEODANCE="videodance",c}(e||{})},2010:($,x,u)=>{u.d(x,{v:()=>F});var e=u(5312),t=u(4438),c=u(1626);let F=(()=>{class T{constructor(r){this.http=r,this.apiUrl=e.c.apiUrl}findAll(r){return this.http.get(`${this.apiUrl}/${this.endpoint}`,{params:{...r}})}findOne(r){return this.http.get(`${this.apiUrl}/${this.endpoint}/${r}`)}create(r){return this.http.post(`${this.apiUrl}/${this.endpoint}`,r)}update(r,d){return this.http.patch(`${this.apiUrl}/${this.endpoint}/${r}`,d)}remove(r){return this.http.delete(`${this.apiUrl}/${this.endpoint}/${r}`)}static{this.\u0275fac=function(d){return new(d||T)(t.KVO(c.Qq))}}static{this.\u0275prov=t.jDH({token:T,factory:T.\u0275fac})}}return T})()},2249:($,x,u)=>{u.d(x,{f:()=>F});var e=u(2010),t=u(4438),c=u(1626);let F=(()=>{class T extends e.v{constructor(r){super(r),this.http=r,this.endpoint="hydra-scripts"}getMyScripts(r){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-scripts`,{params:{...r}})}getHydraScript(r){return this.http.get(`${this.apiUrl}/${this.endpoint}/${r}`)}static{this.\u0275fac=function(d){return new(d||T)(t.KVO(c.Qq))}}static{this.\u0275prov=t.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})()},3373:($,x,u)=>{u.d(x,{gA:()=>F,vA:()=>e.v,AF:()=>r,fC:()=>D.f,UN:()=>T,xB:()=>n,RV:()=>d});var e=u(2010),t=u(4438),c=u(1626);let F=(()=>{class f extends e.v{constructor(p){super(p),this.http=p,this.endpoint="artist-profiles"}getMyProfile(){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-profile`)}publishArtistSite(p){return this.http.post(`${this.apiUrl}/${this.endpoint}/${p}/publish`,{})}static{this.\u0275fac=function(w){return new(w||f)(t.KVO(c.Qq))}}static{this.\u0275prov=t.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})(),T=(()=>{class f extends e.v{constructor(p){super(p),this.http=p,this.endpoint="kwalhia-art"}getAllArtworks(p){return this.findAll(p)}getMyArtworks(p){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-artwork`,{params:{...p}})}getArtwork(p){return this.findOne(p)}uploadArtwork(p,w){const E=new FormData;return E.append("file",w),Object.entries(p).forEach(([R,A])=>{null!=A&&E.append(R,A.toString())}),this.http.post(`${this.apiUrl}/${this.endpoint}`,E)}updateArtwork(p,w,E){const R=new FormData;return E&&R.append("file",E),Object.entries(w).forEach(([A,h])=>{null!=h&&R.append(A,h.toString())}),this.http.patch(`${this.apiUrl}/${this.endpoint}/${p}`,R)}uploadWithFormData(p){return this.http.post(`${this.apiUrl}/${this.endpoint}`,p)}deleteArtwork(p){return this.remove(p)}create(p){return console.warn("Please use uploadArtwork method instead of create for adding new artwork"),super.create(p)}static{this.\u0275fac=function(w){return new(w||f)(t.KVO(c.Qq))}}static{this.\u0275prov=t.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})(),n=(()=>{class f extends e.v{constructor(p){super(p),this.http=p,this.endpoint="series"}getMySeries(p){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-series`,{params:{...p}})}static{this.\u0275fac=function(w){return new(w||f)(t.KVO(c.Qq))}}static{this.\u0275prov=t.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})(),r=(()=>{class f extends e.v{constructor(p){super(p),this.http=p,this.endpoint="galleries"}getMyGallery(){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-gallery`)}static{this.\u0275fac=function(w){return new(w||f)(t.KVO(c.Qq))}}static{this.\u0275prov=t.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})(),d=(()=>{class f extends e.v{constructor(p){super(p),this.http=p,this.endpoint="textures"}getTexture(p){return this.http.get(`${this.apiUrl}/${this.endpoint}/${p}`)}getMyTextures(p){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-textures`,{params:{...p}})}getTexturesByType(p,w){return this.http.get(`${this.apiUrl}/${this.endpoint}/type/${p}`,{params:{...w}})}uploadTexture(p,w,E=!1){const R=new FormData;return R.append("file",w),R.append("type",p),R.append("isPublic",E.toString()),this.http.post(`${this.apiUrl}/${this.endpoint}`,R)}static{this.\u0275fac=function(w){return new(w||f)(t.KVO(c.Qq))}}static{this.\u0275prov=t.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})();var D=u(2249)},3841:($,x,u)=>{u.d(x,{P:()=>c});var e=u(4438);u(6447);let c=(()=>{class F{constructor(){this.validationTrigger=(0,e.vPA)(null),this.artistProfileForm=(0,e.vPA)(null),this.artistProfile=(0,e.vPA)(null),this.artworkForms=(0,e.vPA)([]),this.artworks=(0,e.vPA)([]),this.galleryForm=(0,e.vPA)(null),this.gallery=(0,e.vPA)(null),this.seriesForms=(0,e.vPA)([]),this.series=(0,e.vPA)([]),this.curatedSelectionForm=(0,e.vPA)(null),this.curatedSelections=(0,e.vPA)([]),this.artworkFiles=(0,e.vPA)(new Map),this.vrConfigs=(0,e.vPA)([]),this.textures=(0,e.vPA)([]),this.hydraScripts=(0,e.vPA)([]),this.threeDObjects=(0,e.vPA)([])}setArtistProfileForm(n){this.artistProfileForm.set(n)}getArtistProfileForm(){return this.artistProfileForm()}setArtistProfile(n){this.artistProfile.set(n)}addArtworkForm(n,r){const d=crypto.randomUUID(),D={...n,_tempId:d};this.artworkForms.update(f=>[...f,D]),this.artworkFiles.update(f=>{const I=new Map(f);return I.set(d,r),I})}getArtworkForms(){return this.artworkForms()}getArtworkFile(n){return this.artworkFiles()?.get(n)}addArtwork(n){this.artworks.update(r=>[...r,n])}setGalleryForm(n){this.galleryForm.set(n)}getGalleryForm(){return this.galleryForm()}setGallery(n){this.gallery.set(n)}addSeriesForm(n){this.seriesForms.set([n])}getSeriesForms(){return this.seriesForms()}addSeries(n){this.series.update(r=>[...r,n])}reset(){this.artistProfileForm.set(null),this.artistProfile.set(null),this.artworkForms.set([]),this.artworks.set([]),this.galleryForm.set(null),this.gallery.set(null),this.seriesForms.set([]),this.series.set([]),this.curatedSelectionForm.set(null),this.curatedSelections.set([]),this.artworkFiles.set(new Map)}removeArtwork(n){this.artworks.update(r=>r.filter(d=>d.id!==n))}removeSeries(n){this.series.update(r=>r.filter(d=>d.id!==n)),this.artworks.update(r=>r.map(d=>d.seriesId===n?{...d,seriesId:void 0,series:void 0}:d))}updateArtwork(n){this.artworks.update(r=>r.map(d=>d.id===n.id?n:d))}removeArtworkForm(n){this.artworkForms.update(r=>r.filter(d=>d._tempId!==n)),this.artworkFiles.update(r=>{const d=new Map(r);return d.delete(n),d})}updateArtworkForm(n,r){this.artworkForms.update(d=>d.map(D=>D._tempId===n?{...r,_tempId:D._tempId}:D))}updateArtworkFile(n,r){this.artworkFiles.update(d=>{const D=new Map(d);return D.set(n,r),D})}addVrConfig(n){this.vrConfigs.update(r=>[...r,n])}updateVrConfig(n){this.vrConfigs.update(r=>r.map(d=>d.id===n.id?n:d))}removeVrConfig(n){this.vrConfigs.update(r=>r.filter(d=>d.id!==n))}addTexture(n){this.textures.update(r=>[...r,n])}updateTexture(n){this.textures.update(r=>r.map(d=>d.id===n.id?n:d))}removeTexture(n){this.textures.update(r=>r.filter(d=>d.id!==n))}addHydraScript(n){this.hydraScripts.update(r=>[...r,n])}updateHydraScript(n){this.hydraScripts.update(r=>r.map(d=>d.id===n.id?n:d))}removeHydraScript(n){this.hydraScripts.update(r=>r.filter(d=>d.id!==n))}addThreeDObject(n){this.threeDObjects.update(r=>[...r,n])}updateThreeDObject(n){this.threeDObjects.update(r=>r.map(d=>d.id===n.id?n:d))}removeThreeDObject(n){this.threeDObjects.update(r=>r.filter(d=>d.id!==n))}static{this.\u0275fac=function(r){return new(r||F)}}static{this.\u0275prov=e.jDH({token:F,factory:F.\u0275fac,providedIn:"root"})}}return F})()},7533:($,x,u)=>{function e(t){if(!t)return!1;const c=t.toLowerCase();return c.endsWith(".mp4")||c.endsWith(".webm")||c.includes("video/")}u.d(x,{A:()=>e})}}]);