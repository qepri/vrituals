"use strict";(self.webpackChunkfront_simple=self.webpackChunkfront_simple||[]).push([[538],{1538:(S,F,d)=>{d.r(F),d.d(F,{default:()=>oe});var b=d(467),t=d(4438),f=d(33),$=d(9079),_=d(4572),j=d(5964),h=d(6354),w=d(177),E=d(3373),p=d(9226),M=d(1626);let l=(()=>{class o extends E.vA{constructor(e){super(e),this.endpoint=p.O.ARTIST_PROFILES}findByDisplayName(e){return this.http.get(`${this.apiUrl}/${this.endpoint}/by-display-name/${e}`)}getSeriesWithCovers(e){return this.http.get(`${this.apiUrl}/${this.endpoint}/${e}/series-with-covers`)}getArtistArtworks(e,r){return this.http.get(`${this.apiUrl}/${this.endpoint}/${e}/artworks`,{params:{...r}})}getArtistSeries(e,r){return this.http.get(`${this.apiUrl}/${this.endpoint}/${e}/series`,{params:{...r}})}static{this.\u0275fac=function(r){return new(r||o)(t.KVO(M.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var g=d(5312);let P=(()=>{class o{constructor(e){this.http=e,this.apiUrl=g.c.apiUrl,this.endpoint=p.O.GALLERIES}findOne(e){return this.http.get(`${this.apiUrl}/${this.endpoint}/${e}`)}update(e,r){return this.http.patch(`${this.apiUrl}/${this.endpoint}/${e}`,r)}static{this.\u0275fac=function(r){return new(r||o)(t.KVO(M.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var y=d(6332);let R=(()=>{class o extends E.vA{constructor(e){super(e),this.endpoint=p.O.SERIES}static{this.\u0275fac=function(r){return new(r||o)(t.KVO(M.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),x=(()=>{class o{constructor(e){this.http=e,this.baseUrl=g.c.apiUrl}findPublishedByArtist(e,r){const n={page:(r.page||1).toString(),limit:(r.limit||10).toString()};return this.http.get(`${this.baseUrl}/${p.O.VR_CONFIGS}/artist/${e}`,{params:n})}findPublishedOne(e){return this.http.get(`${this.baseUrl}/${p.O.VR_CONFIGS}/${e}`)}getPublishedRandomConfig(e,r){return this.http.get(`${this.baseUrl}/${p.O.VR_CONFIGS}/${e}/random/${r}`)}static{this.\u0275fac=function(r){return new(r||o)(t.KVO(M.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),X=(()=>{class o{constructor(){this.styleElement=null}applyGalleryStyles(e){if(!e)return;this.removeStyles();const r=`\n    :root {\n      --bg-color: ${e.bgColor};\n      --container-color: ${e.containerColor};\n      --text-color: ${e.textColor};\n      --accent-color: ${e.accentColor};\n      --font-family: ${e.fontFamily};\n    }\n    \n    body {\n      background-color: var(--bg-color) !important;\n      color: var(--text-color) !important;\n      font-family: var(--font-family) !important;\n    }\n  `;this.styleElement=document.createElement("style"),this.styleElement.textContent=r,document.head.appendChild(this.styleElement)}hexToRgba(e,r){return`rgba(${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}, ${r})`}adjustBrightness(e,r){const n=parseInt(e.replace("#",""),16),i=Math.round(2.55*r),s=(n>>16)+i,m=(n>>8&255)+i,c=(255&n)+i;return"#"+(16777216+65536*(s<255?s<1?0:s:255)+256*(m<255?m<1?0:m:255)+(c<255?c<1?0:c:255)).toString(16).slice(1)}removeStyles(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var I=d(4843),U=d(7468),G=d(9437),N=d(7673),A=d(6101);let O=(()=>{class o{constructor(){this.router=(0,t.WQX)(f.Ix),this.artistProfileApi=(0,t.WQX)(l),this.kwalhiaArtApi=(0,t.WQX)(y.e),this.galleryApi=(0,t.WQX)(P),this.seriesApi=(0,t.WQX)(R),this.vrConfigApi=(0,t.WQX)(x),this.cache=new Map,this.CACHE_DURATION=3e5,this.state=(0,t.vPA)({artistProfile:null,artworks:[],gallery:null,series:[],vrConfigs:[],selectedSeriesName:"",selectedArtworkId:null,loading:!1,loadingMore:!1,hasMoreArtworks:!1,currentPage:0,error:null}),this.artistProfile=(0,t.EWP)(()=>this.state().artistProfile),this.artworks=(0,t.EWP)(()=>this.state().artworks),this.gallery=(0,t.EWP)(()=>this.state().gallery),this.series=(0,t.EWP)(()=>this.state().series),this.vrConfigs=(0,t.EWP)(()=>this.state().vrConfigs),this.selectedSeriesName=(0,t.EWP)(()=>this.state().selectedSeriesName),this.selectedArtworkId=(0,t.EWP)(()=>this.state().selectedArtworkId),this.loading=(0,t.EWP)(()=>this.state().loading),this.error=(0,t.EWP)(()=>this.state().error),this.loadingMore=(0,t.EWP)(()=>this.state().loadingMore),this.hasMoreArtworks=(0,t.EWP)(()=>this.state().hasMoreArtworks),this.filteredArtworks=(0,t.EWP)(()=>{const e=this.state().artworks,r=this.state().selectedSeriesName;if(!r||"all"===r)return(0,A.R3)(e);const n=this.state().series.find(i=>i.name.toLowerCase().replace(/\s+/g,"-")===r.toLowerCase());return(0,A.R3)(n?e.filter(i=>i.seriesId===n.id):e)}),this.currentArtistName=(0,$.ot)(this.router.events.pipe((0,h.T)(()=>this.router.url.split("/")[1]||null)))}updateState(e){this.state.update(r=>({...r,...e}))}isCacheValid(e){return Date.now()-e.timestamp<this.CACHE_DURATION}loadArtistData(e,r){var n=this;return(0,b.A)(function*(){const i=n.cache.get(e);if(i&&n.isCacheValid(i))n.updateState({...i.data,selectedSeriesName:r||"all"});else{n.updateState({loading:!0,error:null});try{const s=yield(0,I._)(n.artistProfileApi.findByDisplayName(e)),m=(0,U.p)({artworks:n.artistProfileApi.getArtistArtworks(s.id,{page:1,limit:100}),seriesWithCovers:n.artistProfileApi.getSeriesWithCovers(s.id),vrConfigs:n.vrConfigApi.findPublishedByArtist(s.id,{page:1,limit:50}).pipe((0,G.W)(k=>(console.warn(`Failed to load VR configs for artist ${s.id}:`,k),(0,N.of)({data:[],meta:{total:0,page:1,lastPage:1,limit:50}}))))}),c=yield(0,I._)(m),u={artistProfile:s,artworks:(0,A.R3)(c.artworks.data),gallery:s.gallery||null,series:c.seriesWithCovers,vrConfigs:c.vrConfigs.data,selectedSeriesName:r||"all",selectedArtworkId:null,loading:!1,loadingMore:!1,hasMoreArtworks:c.artworks.meta.page<c.artworks.meta.lastPage,currentPage:1,error:null};n.cache.set(e,{artistName:e,data:{...u,selectedSeriesName:"all"},timestamp:Date.now()}),n.updateState(u)}catch(s){n.updateState({loading:!1,error:s instanceof Error?s.message:"Failed to load artist data"})}}})()}setSelectedSeries(e){this.updateState({selectedSeriesName:e||"all"})}setSelectedArtworkId(e){this.updateState({selectedArtworkId:e})}loadMoreArtworks(){var e=this;return(0,b.A)(function*(){const r=e.state();if(r.artistProfile&&!r.loadingMore&&r.hasMoreArtworks){e.updateState({loadingMore:!0});try{const n=r.currentPage+1,i=yield(0,I._)(e.artistProfileApi.getArtistArtworks(r.artistProfile.id,{page:n,limit:20}));e.updateState({artworks:(0,A.R3)([...r.artworks,...i.data]),loadingMore:!1,hasMoreArtworks:n<i.meta.lastPage,currentPage:n})}catch{e.updateState({loadingMore:!1,error:"Failed to load more artworks"})}}})()}reset(){this.state.set({artistProfile:null,artworks:[],gallery:null,series:[],vrConfigs:[],selectedSeriesName:"",selectedArtworkId:null,loading:!1,loadingMore:!1,hasMoreArtworks:!1,currentPage:0,error:null})}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var v=d(9373);let V=(()=>{class o{constructor(){this.artistName="",this.displayName="",this.currentRoute="",this.router=(0,t.WQX)(f.Ix),this.route=(0,t.WQX)(f.nX)}navigateToArtist(){this.router.navigate(["/arte",this.artistName])}navigateToGallery(){this.router.navigate(["/arte",this.artistName,v.S.GALLERY])}navigateToVR(){this.router.navigate(["/arte",this.artistName,v.S.VR])}isActiveRoute(e){return this.currentRoute===e}get isGalleryActive(){return this.currentRoute===v.S.GALLERY}get isVRActive(){return this.currentRoute===v.S.VR}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-public-navbar"]],inputs:{artistName:"artistName",displayName:"displayName",currentRoute:"currentRoute"},standalone:!0,features:[t.aNF],decls:14,vars:5,consts:[[1,"navbar","py-4","mb-4"],[1,"container"],[1,"d-flex","justify-content-between","align-items-center","w-100"],[1,"artist-name","fs-2","fw-light","mb-0"],[1,"text-decoration-none","cursor-pointer",2,"cursor","pointer",3,"click"],[1,"navbar-nav"],[1,"nav","nav-pills"],[1,"nav-item"],[2,"cursor","pointer",3,"click"]],template:function(r,n){1&r&&(t.j41(0,"nav",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"a",4),t.bIt("click",function(){return n.navigateToArtist()}),t.EFF(5),t.k0s()(),t.j41(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),t.bIt("click",function(){return n.navigateToGallery()}),t.EFF(10," Gallery "),t.k0s()(),t.j41(11,"li",7)(12,"a",8),t.bIt("click",function(){return n.navigateToVR()}),t.EFF(13," VR "),t.k0s()()()()()()()),2&r&&(t.R7$(5),t.SpI(" ",n.displayName," "),t.R7$(4),t.HbH(n.isGalleryActive?"nav-link active":"nav-link"),t.R7$(3),t.HbH(n.isVRActive?"nav-link active":"nav-link"))},dependencies:[w.MD],styles:[".artist-name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition:color .3s ease}.artist-name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#6c757d!important}.nav-link[_ngcontent-%COMP%]{color:#6c757d;transition:all .3s ease}.nav-link[_ngcontent-%COMP%]:hover{color:#212529}.nav-link.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]})}}return o})();const B=(o,a)=>a.id;function H(o,a){if(1&o&&(t.j41(0,"p",6),t.EFF(1),t.k0s()),2&o){let e;const r=t.XpG();t.R7$(),t.JRh(null==(e=r.artistProfile())?null:e.bio)}}function z(o,a){if(1&o&&(t.j41(0,"a",8)(1,"b"),t.EFF(2),t.k0s()()),2&o){let e,r;const n=t.XpG();t.Y8G("href",null==(e=n.artistProfile())?null:e.website,t.B4B),t.R7$(2),t.SpI(" ",null==(r=n.artistProfile())||null==r.website?null:r.website.replace("https://","")," ")}}function Q(o,a){if(1&o&&(t.j41(0,"a",8),t.EFF(1," Instagram "),t.k0s()),2&o){let e;const r=t.XpG();t.Y8G("href","https://instagram.com/"+(null==(e=r.artistProfile())?null:e.instagram),t.B4B)}}function K(o,a){if(1&o&&(t.j41(0,"a",8),t.EFF(1," Twitter "),t.k0s()),2&o){let e;const r=t.XpG();t.Y8G("href","https://twitter.com/"+(null==(e=r.artistProfile())?null:e.twitter),t.B4B)}}function Y(o,a){1&o&&(t.j41(0,"div",10)(1,"p",11),t.EFF(2,"No series available"),t.k0s()())}function J(o,a){if(1&o&&t.nrm(0,"video",22),2&o){const e=t.XpG(2).$implicit;t.Y8G("src",e.coverImage,t.B4B)("title",e.title)}}function Z(o,a){if(1&o&&t.nrm(0,"img",23),2&o){const e=t.XpG(2).$implicit;t.Y8G("src",e.coverImage,t.B4B)("alt",e.title)}}function q(o,a){if(1&o&&(t.j41(0,"div",15),t.DNE(1,J,1,2,"video",22)(2,Z,1,2),t.k0s()),2&o){const e=t.XpG().$implicit,r=t.XpG(2);t.R7$(),t.vxM(1,r.isVideo(e.coverImage)?1:2)}}function tt(o,a){if(1&o&&(t.j41(0,"p",18),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.description," ")}}function et(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",14),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.navigateToSeriesGallery(n.name))}),t.DNE(1,q,3,1,"div",15),t.j41(2,"div",16)(3,"h3",17),t.EFF(4),t.k0s(),t.DNE(5,tt,2,1,"p",18),t.j41(6,"div",19)(7,"small",20),t.EFF(8),t.k0s(),t.j41(9,"small",21),t.EFF(10,"Click to view gallery \u2192"),t.k0s()()()()}if(2&o){const e=a.$implicit;t.R7$(),t.vxM(1,e.coverImage?1:-1),t.R7$(3),t.JRh(e.title),t.R7$(),t.vxM(5,e.description?5:-1),t.R7$(3),t.Lme(" ",e.artworkCount," work",1!==e.artworkCount?"s":""," ")}}function rt(o,a){if(1&o&&(t.j41(0,"div",12),t.Z7z(1,et,11,5,"div",13,B),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Dyx(e.series())}}let ot=(()=>{class o{get artistName(){return this.route.snapshot.params.artistName||""}constructor(){this.store=(0,t.WQX)(O),this.dynamicStyles=(0,t.WQX)(X),this.route=(0,t.WQX)(f.nX),this.router=(0,t.WQX)(f.Ix),this.artistProfile=this.store.artistProfile,this.gallery=this.store.gallery,this.series=this.store.series,this.AppRoutes=v.S,(0,t.QZP)(()=>{const e=this.gallery();e&&this.dynamicStyles.applyGalleryStyles(e)})}ngOnInit(){}isVideo(e){return e?.toLowerCase().includes(".mp4")||e?.toLowerCase().includes(".webm")||e?.toLowerCase().includes(".mov")}navigateToSeriesGallery(e){const r=e.toLowerCase().replace(/\s+/g,"-");this.router.navigate(["arte",this.artistName,"glry",r])}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-arte"]],standalone:!0,features:[t.aNF],decls:14,vars:8,consts:[[1,"min-vh-100"],[3,"artistName","displayName","currentRoute"],[1,"container"],[1,"row"],[1,"col-lg-4"],[1,"artist-info"],[1,"bio","mb-4"],[1,"links"],["target","_blank",1,"link",3,"href"],[1,"col-lg-8"],[1,"empty-state","text-center","py-5"],[1,"mb-0"],[1,"series-grid"],[1,"series-item","mb-5","cursor-pointer"],[1,"series-item","mb-5","cursor-pointer",3,"click"],[1,"cover-container","mb-3"],[1,"series-info"],[1,"series-title","mb-2"],[1,"series-description","mb-3",2,"white-space","pre-line"],[1,"d-flex","justify-content-between","align-items-center"],[1,"artwork-count"],[1,"text-muted"],["autoplay","","muted","","loop","","playsinline","",1,"cover-media",3,"src","title"],[1,"cover-media",3,"src","alt"]],template:function(r,n){if(1&r&&(t.j41(0,"div",0),t.nrm(1,"app-public-navbar",1),t.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t.DNE(6,H,2,1,"p",6),t.j41(7,"div",7),t.DNE(8,z,3,2,"a",8)(9,Q,2,1,"a",8)(10,K,2,1,"a",8),t.k0s()()(),t.j41(11,"div",9),t.DNE(12,Y,3,0,"div",10)(13,rt,3,0),t.k0s()()()()),2&r){let i,s,m,c,u;t.R7$(),t.Y8G("artistName",n.artistName)("displayName",(null==(i=n.artistProfile())?null:i.displayName)||"")("currentRoute",n.AppRoutes.ARTE),t.R7$(5),t.vxM(6,null!=(s=n.artistProfile())&&s.bio?6:-1),t.R7$(2),t.vxM(8,null!=(m=n.artistProfile())&&m.website?8:-1),t.R7$(),t.vxM(9,null!=(c=n.artistProfile())&&c.instagram?9:-1),t.R7$(),t.vxM(10,null!=(u=n.artistProfile())&&u.twitter?10:-1),t.R7$(2),t.vxM(12,0===n.series().length?12:13)}},dependencies:[w.MD,V],styles:[".artist-name[_ngcontent-%COMP%]{color:var(--text-color);letter-spacing:.5px}.section-title[_ngcontent-%COMP%]{color:var(--accent-color);font-weight:400;font-size:1.25rem;margin-bottom:1.5rem;padding-bottom:.5rem;border-bottom:1px solid var(--accent-color);opacity:.8}.artist-info[_ngcontent-%COMP%]{padding:2rem 0}.bio[_ngcontent-%COMP%]{line-height:1.6;color:var(--text-color);opacity:.9}.links[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.link[_ngcontent-%COMP%]{color:var(--accent-color);text-decoration:none;font-size:.9rem;padding:.5rem 0;border-bottom:1px solid transparent;transition:border-color .2s ease;max-width:-moz-fit-content;max-width:fit-content}.link[_ngcontent-%COMP%]:hover{color:var(--accent-color);border-bottom-color:var(--accent-color)}.series-grid[_ngcontent-%COMP%]{max-width:100%}.series-item[_ngcontent-%COMP%]{border-bottom:1px solid var(--accent-color);padding-bottom:2rem;transition:transform .2s ease}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.series-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.series-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.cover-container[_ngcontent-%COMP%]{width:100%;max-width:600px;aspect-ratio:16/10;overflow:hidden;border-radius:4px;background:var(--container-color)}.cover-media[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .4s ease}.cover-media[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.series-title[_ngcontent-%COMP%]{color:var(--text-color);font-weight:500;font-size:1.5rem;line-height:1.3}.series-description[_ngcontent-%COMP%]{color:var(--text-color);opacity:.8;line-height:1.6;max-width:90%}.artwork-count[_ngcontent-%COMP%]{color:var(--accent-color);opacity:.7;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.empty-state[_ngcontent-%COMP%]{color:var(--text-color);opacity:.6}@media (max-width: 768px){.cover-container[_ngcontent-%COMP%]{aspect-ratio:4/3}.series-title[_ngcontent-%COMP%]{font-size:1.25rem}.artist-name[_ngcontent-%COMP%]{font-size:1.75rem!important}}"],changeDetection:0})}}return o})();const L=(o,a)=>a.id;function nt(o,a){if(1&o){const e=t.RV6();t.j41(0,"button",9),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG();return t.Njj(i.selectSeries(n.name))}),t.EFF(1),t.k0s()}if(2&o){const e=a.$implicit,r=t.XpG();t.AVh("btn-secondary",r.isSeriesSelected(e.name))("text-white",r.isSeriesSelected(e.name)),t.R7$(),t.SpI(" ",e.title," ")}}function it(o,a){1&o&&(t.j41(0,"div",7)(1,"p",10),t.EFF(2,"No artworks available"),t.k0s()())}function st(o,a){if(1&o&&t.nrm(0,"video",15),2&o){const e=t.XpG().$implicit;t.Y8G("src",e.fileUrl,t.B4B)("title",e.title)}}function at(o,a){if(1&o&&t.nrm(0,"img",24),2&o){const e=t.XpG().$implicit;t.Y8G("src",e.fileUrl,t.B4B)("alt",e.title)}}function lt(o,a){if(1&o&&(t.j41(0,"span",18),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.yearOfCreation)}}function ct(o,a){if(1&o&&(t.j41(0,"span",19),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit,r=t.XpG(2);t.R7$(),t.JRh(r.formatEdition(e))}}function dt(o,a){if(1&o&&(t.j41(0,"div",22),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.medium)}}function pt(o,a){if(1&o&&(t.j41(0,"div",23),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit,r=t.XpG(2);t.R7$(),t.SpI(" ",r.formatPrice(e.price)," ")}}function mt(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",13),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.openArtwork(n))}),t.j41(1,"div",14),t.DNE(2,st,1,2,"video",15)(3,at,1,2),t.j41(4,"div",16)(5,"div",17),t.DNE(6,lt,2,1,"span",18)(7,ct,2,1,"span",19),t.k0s(),t.j41(8,"div",20)(9,"h4",21),t.EFF(10),t.k0s(),t.DNE(11,dt,2,1,"div",22),t.k0s(),t.DNE(12,pt,2,1,"div",23),t.k0s()()()}if(2&o){const e=a.$implicit,r=t.XpG(2);t.R7$(2),t.vxM(2,r.isVideo(e.fileUrl)?2:3),t.R7$(4),t.vxM(6,e.yearOfCreation?6:-1),t.R7$(),t.vxM(7,r.formatEdition(e)?7:-1),t.R7$(3),t.JRh(e.title),t.R7$(),t.vxM(11,e.medium?11:-1),t.R7$(),t.vxM(12,e.price?12:-1)}}function ht(o,a){if(1&o&&(t.j41(0,"div",11),t.Z7z(1,mt,13,6,"div",12,L),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Dyx(e.artworks())}}function ut(o,a){if(1&o&&t.nrm(0,"video",32),2&o){const e=t.XpG(2);t.Y8G("src",e.selectedArtwork.fileUrl,t.B4B)}}function ft(o,a){if(1&o&&t.nrm(0,"img",41),2&o){const e=t.XpG(2);t.Y8G("src",e.selectedArtwork.fileUrl,t.B4B)("alt",e.selectedArtwork.title)}}function gt(o,a){if(1&o&&(t.j41(0,"p",35),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.JRh(e.selectedArtwork.description)}}function vt(o,a){if(1&o&&(t.j41(0,"div",37)(1,"span",42),t.EFF(2,"Year"),t.k0s(),t.j41(3,"span",43),t.EFF(4),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(4),t.JRh(e.selectedArtwork.yearOfCreation)}}function _t(o,a){if(1&o&&(t.j41(0,"div",37)(1,"span",42),t.EFF(2,"Medium"),t.k0s(),t.j41(3,"span",43),t.EFF(4),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(4),t.JRh(e.selectedArtwork.medium)}}function yt(o,a){if(1&o&&(t.j41(0,"div",37)(1,"span",42),t.EFF(2,"Technique"),t.k0s(),t.j41(3,"span",43),t.EFF(4),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(4),t.JRh(e.selectedArtwork.technique)}}function kt(o,a){if(1&o&&(t.j41(0,"div",37)(1,"span",42),t.EFF(2,"Dimensions"),t.k0s(),t.j41(3,"span",43),t.EFF(4),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(4),t.JRh(e.getDimensions(e.selectedArtwork))}}function Ct(o,a){if(1&o&&(t.j41(0,"div",37)(1,"span",42),t.EFF(2,"Edition"),t.k0s(),t.j41(3,"span",43),t.EFF(4),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(4),t.JRh(e.formatEdition(e.selectedArtwork))}}function bt(o,a){if(1&o&&(t.j41(0,"div",37)(1,"span",42),t.EFF(2,"Type"),t.k0s(),t.j41(3,"span",43),t.EFF(4),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(4),t.JRh(e.formatArtworkType(e.selectedArtwork.type))}}function wt(o,a){if(1&o&&(t.j41(0,"div",37)(1,"span",42),t.EFF(2,"Series"),t.k0s(),t.j41(3,"span",43),t.EFF(4),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(4),t.JRh(e.selectedArtwork.series.title)}}function xt(o,a){if(1&o&&(t.j41(0,"div",38)(1,"span",44),t.EFF(2),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(2),t.JRh(e.formatPrice(e.selectedArtwork.price))}}function Ft(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",25),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeModal())}),t.j41(1,"button",26),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeModal())}),t.EFF(2,"\xd7"),t.k0s(),t.j41(3,"button",27),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.navigateToPrevious())}),t.EFF(4," \u2039 "),t.k0s(),t.j41(5,"button",28),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.navigateToNext())}),t.EFF(6," \u203a "),t.k0s(),t.j41(7,"div",29),t.EFF(8),t.k0s(),t.j41(9,"div",30),t.bIt("click",function(n){return t.eBV(e),t.Njj(n.stopPropagation())}),t.j41(10,"div",31),t.DNE(11,ut,1,1,"video",32)(12,ft,1,2),t.k0s(),t.j41(13,"div",33)(14,"div",34)(15,"h2"),t.EFF(16),t.k0s(),t.DNE(17,gt,2,1,"p",35),t.j41(18,"div",36),t.DNE(19,vt,5,1,"div",37)(20,_t,5,1,"div",37)(21,yt,5,1,"div",37)(22,kt,5,1,"div",37)(23,Ct,5,1,"div",37)(24,bt,5,1,"div",37)(25,wt,5,1,"div",37),t.k0s(),t.DNE(26,xt,3,1,"div",38),t.k0s(),t.j41(27,"div",39)(28,"button",40),t.EFF(29,"COLLECT"),t.k0s()()()()()}if(2&o){const e=t.XpG();t.R7$(8),t.Lme(" ",e.getCurrentArtworkIndex()," / ",e.getTotalArtworks()," "),t.R7$(3),t.vxM(11,e.isVideo(e.selectedArtwork.fileUrl)?11:12),t.R7$(5),t.JRh(e.selectedArtwork.title),t.R7$(),t.vxM(17,e.selectedArtwork.description?17:-1),t.R7$(2),t.vxM(19,e.selectedArtwork.yearOfCreation?19:-1),t.R7$(),t.vxM(20,e.selectedArtwork.medium?20:-1),t.R7$(),t.vxM(21,e.selectedArtwork.technique?21:-1),t.R7$(),t.vxM(22,e.getDimensions(e.selectedArtwork)?22:-1),t.R7$(),t.vxM(23,e.formatEdition(e.selectedArtwork)?23:-1),t.R7$(),t.vxM(24,e.selectedArtwork.type?24:-1),t.R7$(),t.vxM(25,null!=e.selectedArtwork.series&&e.selectedArtwork.series.title?25:-1),t.R7$(),t.vxM(26,e.selectedArtwork.price?26:-1)}}let $t=(()=>{class o{get artistName(){return this.route.snapshot.params.artistName||""}constructor(){this.store=(0,t.WQX)(O),this.dynamicStyles=(0,t.WQX)(X),this.router=(0,t.WQX)(f.Ix),this.route=(0,t.WQX)(f.nX),this.cdr=(0,t.WQX)(t.gRc),this.artistProfile=this.store.artistProfile,this.gallery=this.store.gallery,this.artworks=this.store.filteredArtworks,this.series=this.store.series,this.selectedSeriesName=this.store.selectedSeriesName,this.loadingMore=this.store.loadingMore,this.hasMoreArtworks=this.store.hasMoreArtworks,this.selectedArtworkId=this.store.selectedArtworkId,this.AppRoutes=v.S,this.selectedArtwork=null,this.touchStartX=0,this.touchEndX=0,this.minSwipeDistance=50,(0,t.QZP)(()=>{const e=this.gallery();e&&this.dynamicStyles.applyGalleryStyles(e)}),(0,t.QZP)(()=>{const e=this.selectedArtworkId(),r=this.artworks();if(console.log("GlryComponent effect - artworkId:",e),console.log("GlryComponent effect - artworks count:",r.length),console.log("GlryComponent effect - artwork IDs:",r.map(n=>n.id)),e&&r.length>0){const n=r.find(i=>i.id===e);console.log("Found artwork:",n),n&&this.selectedArtwork?.id!==n.id?(console.log("Opening modal for artwork:",n.title),this.selectedArtwork=n,document.body.style.overflow="hidden",this.cdr.detectChanges(),console.log("Modal should be open now. selectedArtwork:",this.selectedArtwork)):n||console.log("Artwork with ID not found in current filtered artworks")}else!e&&this.selectedArtwork&&(console.log("Closing modal - no artwork ID"),this.selectedArtwork=null,document.body.style.overflow="")})}ngOnInit(){}selectSeries(e){const r=this.route.snapshot.params.artistName;if(e&&"all"!==e){const n=encodeURIComponent(e.toLowerCase().replace(/\s+/g,"-"));this.store.setSelectedSeries(n),this.router.navigate(["arte",r,"glry",n])}else this.store.setSelectedSeries("all"),this.router.navigate(["arte",r,"glry"])}getFilterBtnClass(e){return"filter-btn "+(this.selectedSeriesName()===encodeURIComponent(e.toLowerCase().replace(/\s+/g,"-"))?"active":"")}getSeriesSlug(e){return encodeURIComponent(e.toLowerCase().replace(/\s+/g,"-"))}isSeriesSelected(e){return this.selectedSeriesName()===this.getSeriesSlug(e)}loadMore(){this.store.loadMoreArtworks()}isVideo(e){return e?.toLowerCase().includes(".mp4")||e?.toLowerCase().includes(".webm")||e?.toLowerCase().includes(".mov")}formatPrice(e){return e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e):""}formatEdition(e){return e.editionNumber&&e.totalEditions?`${e.editionNumber}/${e.totalEditions}`:""}openArtwork(e){this.selectedArtwork=e,document.body.style.overflow="hidden";const r=this.route.snapshot.params.artistName,n=this.route.snapshot.params.seriesId;this.router.navigate(n?["arte",r,"glry",n,e.id]:["arte",r,"glry","all",e.id],{replaceUrl:!0}),this.store.setSelectedArtworkId(e.id)}closeModal(){this.selectedArtwork=null,document.body.style.overflow="";const e=this.route.snapshot.params.artistName,r=this.route.snapshot.params.seriesId;this.router.navigate(r?["arte",e,"glry",r]:["arte",e,"glry"],{replaceUrl:!0}),this.store.setSelectedArtworkId(null)}getDimensions(e){return e.heightCm&&e.widthCm?`${e.heightCm} \xd7 ${e.widthCm} cm`:e.heightCm?`${e.heightCm} cm (H)`:e.widthCm?`${e.widthCm} cm (W)`:""}formatArtworkType(e){return e.replace(/([A-Z])/g," $1").trim().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" ")}handleKeyboardEvent(e){if(this.selectedArtwork)switch(e.key){case"ArrowLeft":e.preventDefault(),this.navigateToPrevious();break;case"ArrowRight":e.preventDefault(),this.navigateToNext();break;case"Escape":e.preventDefault(),this.closeModal()}}onTouchStart(e){this.selectedArtwork&&(this.touchStartX=e.changedTouches[0].screenX)}onTouchEnd(e){this.selectedArtwork&&(this.touchEndX=e.changedTouches[0].screenX,this.handleSwipe())}handleSwipe(){const e=this.touchEndX-this.touchStartX;Math.abs(e)<this.minSwipeDistance||(e>0?this.navigateToPrevious():this.navigateToNext())}navigateToNext(){const e=this.artworks();if(0===e.length)return;const r=e.findIndex(s=>s.id===this.selectedArtwork?.id);if(-1===r)return;const i=e[(r+1)%e.length];this.selectedArtwork=i,this.updateArtworkUrl(i)}navigateToPrevious(){const e=this.artworks();if(0===e.length)return;const r=e.findIndex(s=>s.id===this.selectedArtwork?.id);if(-1===r)return;const i=e[0===r?e.length-1:r-1];this.selectedArtwork=i,this.updateArtworkUrl(i)}updateArtworkUrl(e){const r=this.route.snapshot.params.artistName,n=this.route.snapshot.params.seriesId;this.router.navigate(n?["arte",r,"glry",n,e.id]:["arte",r,"glry","all",e.id],{replaceUrl:!0}),this.store.setSelectedArtworkId(e.id)}getCurrentArtworkIndex(){return this.artworks().findIndex(r=>r.id===this.selectedArtwork?.id)+1}getTotalArtworks(){return this.artworks().length}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-glry"]],hostBindings:function(r,n){1&r&&t.bIt("keydown",function(s){return n.handleKeyboardEvent(s)},!1,t.tSv)("touchstart",function(s){return n.onTouchStart(s)})("touchend",function(s){return n.onTouchEnd(s)})},standalone:!0,features:[t.aNF],decls:12,vars:9,consts:[[1,"min-vh-100"],[3,"artistName","displayName","currentRoute"],[1,"container","px-4","mb-4"],[1,"d-flex","flex-wrap","gap-2","justify-content-center"],[1,"btn","btn-outline-secondary","px-4","py-2",3,"click"],[1,"btn","btn-outline-secondary","px-4","py-2","series-btn",3,"btn-secondary","text-white"],[1,"container","px-4"],[1,"empty-state","text-center","py-5"],[1,"artwork-fullscreen"],[1,"btn","btn-outline-secondary","px-4","py-2","series-btn",3,"click"],[1,"mb-0"],[1,"masonry-grid"],[1,"artwork-item"],[1,"artwork-item",3,"click"],[1,"artwork-media"],["autoplay","","muted","","loop","","playsinline","",1,"artwork-image",3,"src","title"],[1,"artwork-overlay","position-absolute","w-100","h-100","p-4","text-white"],[1,"d-flex","justify-content-between"],[1,"badge","bg-dark","px-3","py-2"],[1,"badge","bg-dark","px-3","py-2","text-accent"],[1,"position-absolute","top-50","start-50","translate-middle","text-center"],[1,"fw-bold"],[1,"small","fst-italic","opacity-75"],[1,"position-absolute","bottom-0","start-50","translate-middle-x","text-center","h5","fw-bold","mb-4"],["loading","lazy",1,"artwork-image",3,"src","alt"],[1,"artwork-fullscreen",3,"click"],[1,"close-btn",3,"click"],["title","Previous artwork (\u2190)",1,"nav-btn","prev-btn",3,"click"],["title","Next artwork (\u2192)",1,"nav-btn","next-btn",3,"click"],[1,"artwork-counter"],[1,"artwork-container",3,"click"],[1,"artwork-display"],["controls","","autoplay","","muted","","loop","",3,"src"],[1,"artwork-details"],[1,"details-content"],[1,"description"],[1,"details-grid"],[1,"detail-item"],[1,"price-section"],[1,"actions"],[1,"buy-btn"],[3,"src","alt"],[1,"label"],[1,"value"],[1,"price"]],template:function(r,n){if(1&r&&(t.j41(0,"div",0),t.nrm(1,"app-public-navbar",1),t.j41(2,"div",2)(3,"div",3)(4,"button",4),t.bIt("click",function(){return n.selectSeries("all")}),t.EFF(5," All Artworks "),t.k0s(),t.Z7z(6,nt,2,5,"button",5,L),t.k0s()(),t.j41(8,"div",6),t.DNE(9,it,3,0,"div",7)(10,ht,3,0),t.k0s(),t.DNE(11,Ft,30,13,"div",8),t.k0s()),2&r){let i;t.R7$(),t.Y8G("artistName",n.artistName)("displayName",(null==(i=n.artistProfile())?null:i.displayName)||"")("currentRoute",n.AppRoutes.GALLERY),t.R7$(3),t.AVh("btn-secondary","all"===n.selectedSeriesName())("text-white","all"===n.selectedSeriesName()),t.R7$(2),t.Dyx(n.series()),t.R7$(3),t.vxM(9,0===n.artworks().length?9:10),t.R7$(2),t.vxM(11,n.selectedArtwork?11:-1)}},dependencies:[V],styles:[".artist-name[_ngcontent-%COMP%]{color:var(--text-color);letter-spacing:.5px}.masonry-grid[_ngcontent-%COMP%]{column-count:4;column-gap:1.5rem;max-width:100%}.artwork-item[_ngcontent-%COMP%]{break-inside:avoid;margin-bottom:1.5rem;background:var(--container-color);overflow:hidden;cursor:pointer;transition:transform .2s ease}.artwork-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.artwork-media[_ngcontent-%COMP%]{width:100%;line-height:0;position:relative;overflow:hidden}.artwork-image[_ngcontent-%COMP%]{width:100%;height:auto;display:block;object-fit:cover}.artwork-overlay[_ngcontent-%COMP%]{top:0;background:#000000bf;opacity:0;transition:opacity .3s;font-family:var(--font-family);text-shadow:0 1px 3px rgba(0,0,0,.8)}.artwork-item[_ngcontent-%COMP%]:hover   .artwork-overlay[_ngcontent-%COMP%]{opacity:1}.text-accent[_ngcontent-%COMP%]{color:var(--accent-color)!important}.empty-state[_ngcontent-%COMP%]{color:var(--text-color);opacity:.6}.artwork-fullscreen[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000;background:#000000f2;display:flex;align-items:center;justify-content:center;cursor:pointer}.close-btn[_ngcontent-%COMP%], .nav-btn[_ngcontent-%COMP%]{position:absolute;background:0 0;border:none;color:#fff;font-size:2rem;cursor:pointer;border-radius:50%;transition:background .2s;z-index:1001}.close-btn[_ngcontent-%COMP%]{top:2rem;right:2rem;width:50px;height:50px}.close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.nav-btn[_ngcontent-%COMP%]{top:50%;transform:translateY(-50%);background:#000000b3;width:60px;height:60px;display:none;align-items:center;justify-content:center}.nav-btn[_ngcontent-%COMP%]:hover{background:#000000e6;transform:translateY(-50%) scale(1.1)}.prev-btn[_ngcontent-%COMP%]{left:2rem}.next-btn[_ngcontent-%COMP%]{right:2rem}.artwork-counter[_ngcontent-%COMP%]{position:absolute;bottom:2rem;left:50%;transform:translate(-50%);background:#000000b3;color:#fff;padding:.5rem 1rem;border-radius:20px;font-size:.9rem;z-index:1001}.artwork-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 400px;max-width:90vw;max-height:90vh;gap:2rem;cursor:default}.artwork-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#000}.artwork-display[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .artwork-display[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{max-width:100%;max-height:80vh;object-fit:contain}.artwork-details[_ngcontent-%COMP%]{background:#fff;padding:0;display:flex;flex-direction:column;min-width:400px;max-height:90vh;position:relative}.details-content[_ngcontent-%COMP%]{padding:2rem 2rem 5rem;flex-grow:1;overflow-y:auto;max-height:calc(90vh - 80px)}.artwork-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:1rem;color:#000;line-height:1.2}.description[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;color:#333;margin-bottom:1.5rem;font-style:italic;white-space:pre-line}.details-grid[_ngcontent-%COMP%]{margin-bottom:1.5rem}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:.75rem 0;border-bottom:1px solid #f0f0f0;gap:1rem}.detail-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#666;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px;min-width:80px;flex-shrink:0}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#000;font-weight:500;text-align:right;word-break:break-word}.price-section[_ngcontent-%COMP%]{padding:1rem 0;border-top:2px solid #f0f0f0;margin-top:1rem}.price-section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#000}.actions[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:1.5rem 2rem;border-top:1px solid #f0f0f0;background:#fafafa;z-index:10}.buy-btn[_ngcontent-%COMP%]{background:#000;color:#fff;border:none;padding:1rem 2rem;font-size:1rem;cursor:pointer;transition:all .2s;width:100%;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.buy-btn[_ngcontent-%COMP%]:hover{background:#333;transform:translateY(-1px)}.series-btn[_ngcontent-%COMP%]{border-color:var(--accent-color)!important;color:var(--accent-color)!important;font-family:var(--font-family);transition:all .3s ease}.series-btn[_ngcontent-%COMP%]:hover{background-color:var(--accent-color)!important;border-color:var(--accent-color)!important;color:var(--bg-color)!important}.btn-secondary[_ngcontent-%COMP%]{border-color:var(--accent-color)!important}@media (min-width:1024px){.nav-btn[_ngcontent-%COMP%]{display:flex!important}}@media (max-width:1200px){.masonry-grid[_ngcontent-%COMP%]{column-count:3}}@media (max-width:768px){.masonry-grid[_ngcontent-%COMP%]{column-count:2;column-gap:1rem}.artwork-item[_ngcontent-%COMP%]{margin-bottom:1rem}.artwork-overlay[_ngcontent-%COMP%]{display:none}.artwork-container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:0;max-width:95vw}.artwork-display[_ngcontent-%COMP%]{max-height:50vh;min-height:300px}.artwork-details[_ngcontent-%COMP%]{min-width:auto;max-height:50vh}.details-content[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 5rem;max-height:calc(50vh - 80px)}.artwork-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.detail-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.25rem;padding:.5rem 0}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.8rem;min-width:auto}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-align:left;font-size:.9rem}.price-section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.4rem}.actions[_ngcontent-%COMP%]{padding:1rem 1.5rem}.buy-btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.875rem 1.5rem}.close-btn[_ngcontent-%COMP%]{top:1rem;right:1rem}.nav-btn[_ngcontent-%COMP%]{display:none}.artwork-counter[_ngcontent-%COMP%]{bottom:1rem;font-size:.8rem;padding:.4rem .8rem}}@media (max-width:480px){.masonry-grid[_ngcontent-%COMP%]{column-count:1}.artist-name[_ngcontent-%COMP%]{font-size:1.5rem!important}}"],changeDetection:0})}}return o})(),Pt=(()=>{class o{constructor(e){this.http=e,this.baseUrl=g.c.apiUrl}getPublicTexture(e){return this.http.get(`${this.baseUrl}/${p.O.TEXTURES}/${e}`)}static{this.\u0275fac=function(r){return new(r||o)(t.KVO(M.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Mt=d(7343),Rt=d(345);function At(o,a){1&o&&(t.j41(0,"div",1)(1,"div",4)(2,"span",5),t.EFF(3,"Loading VR Scene..."),t.k0s()()())}function Et(o,a){if(1&o&&(t.j41(0,"div",2)(1,"div",6),t.EFF(2),t.k0s()()),2&o){const e=t.XpG();t.R7$(2),t.JRh(e.error())}}function Ot(o,a){if(1&o&&(t.j41(0,"div",3)(1,"div",7),t.nrm(2,"iframe",8),t.k0s()()),2&o){const e=t.XpG();t.R7$(2),t.Y8G("src",e.iframeSrc(),t.f$h)}}let Tt=(()=>{class o{constructor(){this.route=(0,t.WQX)(f.nX),this.vrConfigService=(0,t.WQX)(x),this.textureService=(0,t.WQX)(Pt),this.hydraScriptService=(0,t.WQX)(Mt.v),this.sanitizer=(0,t.WQX)(Rt.up),this.loading=(0,t.vPA)(!0),this.error=(0,t.vPA)(null),this.config=(0,t.vPA)(null),this.iframeSrc=(0,t.vPA)(null),this.hydraScript=(0,t.vPA)(null),this.textures=(0,t.vPA)(new Map),this.blobUrls=(0,t.vPA)([]),this.sceneEffect=(0,t.QZP)(()=>{const e=this.config();e&&this.generateScene(e)},{allowSignalWrites:!0}),this.cleanupEffect=(0,t.QZP)(e=>{e(()=>{this.blobUrls().forEach(r=>URL.revokeObjectURL(r))})})}ngOnInit(){this.route.params.subscribe(e=>{console.log("VR Component received params:",e);const r=e.configId,n=e.hash;console.log("ConfigId:",r,"Hash:",n),r&&n?(console.log("Loading random config with ID:",r,"and hash:",n),this.loadRandomConfig(r,n)):r&&(console.log("Loading static config with ID:",r),this.loadConfig(r))})}loadConfig(e){this.loading.set(!0),this.error.set(null),this.vrConfigService.findPublishedOne(e).subscribe({next:r=>{this.config.set(r),this.loadResources(r)},error:r=>{this.error.set("Failed to load VR configuration"),this.loading.set(!1)}})}loadRandomConfig(e,r){this.loading.set(!0),this.error.set(null),this.vrConfigService.getPublishedRandomConfig(e,r).subscribe({next:n=>{this.config.set(n),this.loadResources(n)},error:n=>{this.error.set("Failed to load VR configuration"),this.loading.set(!1)}})}loadResources(e){const r=[];e.hydraScriptId&&r.push(this.hydraScriptService.getPublicHydraScript(e.hydraScriptId).pipe((0,G.W)(i=>(console.warn(`Failed to load Hydra script ${e.hydraScriptId}:`,i),(0,N.of)(null))))),[e.floorTextureId,e.wallTextureId,e.ceilingTextureId,e.skyTextureId].filter(i=>!!i).forEach(i=>{r.push(this.textureService.getPublicTexture(i).pipe((0,G.W)(s=>(console.warn(`Failed to load texture ${i}:`,s),(0,N.of)(null)))))}),r.length>0?(0,U.p)(r).subscribe({next:i=>{let s=0;if(e.hydraScriptId){const c=i[s];c&&this.hydraScript.set(c),s=1}const m=new Map;for(let c=s;c<i.length;c++){const u=i[c];u&&m.set(u.id,u)}this.textures.set(m),this.loading.set(!1)},error:i=>{this.error.set("Failed to load resources"),this.loading.set(!1)}}):this.loading.set(!1)}generateScene(e){const r=this.createSceneHtml(e,this.hydraScript()),n=new Blob([r],{type:"text/html"}),i=URL.createObjectURL(n);this.blobUrls.update(s=>[...s,i]),this.iframeSrc.set(this.sanitizer.bypassSecurityTrustResourceUrl(i))}createSceneHtml(e,r){return`\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="utf-8">\n    <title>VR Gallery - ${e.title}</title>\n    <script src="https://kordac.qepri.xyz/room_002/assets/js/aframe.js"><\/script>\n    <script src="https://kordac.qepri.xyz/room_002/assets/js/xtras.js"><\/script>\n    ${r?'<script src="https://kordac.qepri.xyz/room_002/assets/js/hydra.js"><\/script>':""}\n</head>\n<body>\n    <a-scene vr-mode-ui="enabled: true" renderer="colorManagement: true">\n        <a-assets>\n            ${this.generateAssets(e)}\n        </a-assets>\n\n        ${this.generateEnvironment(e)}\n        ${this.generateRoomGeometries(e)}\n        ${this.generateArtworks(e)}\n        ${this.generate3DObjects(e)}\n        ${this.generateCamera(e)}\n\n        <a-light type="ambient" color="#404040"></a-light>\n        <a-light type="directional" position="5 10 5" color="#444"></a-light>\n    </a-scene>\n\n    <script>\n      ${this.generateHydraScript(r)}\n      ${this.generateAdditionalComponents()}\n    <\/script>\n</body>\n</html>`}generateAssets(e){let r="";return[{id:e.floorTextureId,elementId:"floor-texture"},{id:e.wallTextureId,elementId:"wall-texture"},{id:e.ceilingTextureId,elementId:"ceiling-texture"},{id:e.skyTextureId,elementId:"sky-texture"}].forEach(({id:s,elementId:m})=>{if(!s)return;const c=this.textures().get(s);c&&(r+=`<img id="${m}" src="${c.cdnUrl}" crossorigin="anonymous">\n`)}),e.artworks?.forEach(s=>{r+=`<img id="artwork-${s.id}" src="${s.fileUrl}" crossorigin="anonymous">\n`}),e.threeDObjects?.forEach(s=>{const m=s.metadata.fileFormat.toLowerCase();["gltf","glb","obj"].includes(m),r+=`<a-asset-item id="object-${s.id}" src="${s.objectCdnUrl}" crossorigin="anonymous"></a-asset-item>\n`,s.hasTextures&&s.textureCdnUrl&&(r+=`<img id="texture-${s.id}" src="${s.textureCdnUrl}" crossorigin="anonymous">\n`)}),[{geometry:e.floorGeometry,textureType:"floor"},{geometry:e.wallsGeometry,textureType:"wall"},{geometry:e.ceilingGeometry,textureType:"ceiling"}].forEach(({geometry:s})=>{if(!s)return;const m=s.metadata.fileFormat.toLowerCase();["gltf","glb","obj","ply","pcd"].includes(m)&&(r+=`<a-asset-item id="geometry-${s.id}" src="${s.objectCdnUrl}" crossorigin="anonymous"></a-asset-item>\n`)}),r}generateEnvironment(e){let r="";if(e.floorTextureId&&!e.floorGeometry){const c=e.environmentTransforms?.floor||{};r+=`\n        <a-plane\n          id="floor"\n          position="${this.getFormattedVector(c.position,"0 0 0")}"\n          rotation="${this.getFormattedVector(c.rotation,"-90 0 0")}"\n          scale="${this.getFormattedVector(c.scale,"1 1 1")}"\n          width="100"\n          height="100"\n          material="src: #floor-texture; repeat: ${e.floorTextureRepeat} ${e.floorTextureRepeat}"\n          class="environment">\n        </a-plane>\n      `}if(e.wallTextureId&&!e.wallsGeometry){const c=e.environmentTransforms?.walls||{};r+=`\n        <a-entity\n          id="walls"\n          position="${this.getFormattedVector(c.position,"0 0 0")}"\n          rotation="${this.getFormattedVector(c.rotation,"0 0 0")}"\n          scale="${this.getFormattedVector(c.scale,"1 1 1")}"\n          class="environment">\n          <a-plane position="0 5 -20" width="40" height="10" material="src: #wall-texture; repeat: ${e.wallTextureRepeat} ${e.wallTextureRepeat}"></a-plane>\n          <a-plane position="-20 5 0" rotation="0 90 0" width="40" height="10" material="src: #wall-texture; repeat: ${e.wallTextureRepeat} ${e.wallTextureRepeat}"></a-plane>\n          <a-plane position="20 5 0" rotation="0 -90 0" width="40" height="10" material="src: #wall-texture; repeat: ${e.wallTextureRepeat} ${e.wallTextureRepeat}"></a-plane>\n        </a-entity>\n      `}if(e.ceilingTextureId&&!e.ceilingGeometry){const c=e.environmentTransforms?.ceiling||{};r+=`\n        <a-plane\n          id="ceiling"\n          position="${this.getFormattedVector(c.position,"0 10 0")}"\n          rotation="${this.getFormattedVector(c.rotation,"90 0 0")}"\n          scale="${this.getFormattedVector(c.scale,"1 1 1")}"\n          width="40"\n          height="40"\n          material="src: #ceiling-texture; repeat: ${e.ceilingTextureRepeat} ${e.ceilingTextureRepeat}"\n          class="environment">\n        </a-plane>\n      `}if(e.skyTextureId){const c=e.environmentTransforms?.sky||{};r+=`\n        <a-sky\n          id="sky"\n          src="#sky-texture"\n          position="${this.getFormattedVector(c.position,"0 0 0")}"\n          rotation="${this.getFormattedVector(c.rotation,"0 0 0")}"\n          scale="${this.getFormattedVector(c.scale,"1 1 1")}"\n          animation="property: rotation; to: 0 360 0; loop: true; dur: 70000"\n          material="shader: flat; repeat: ${e.skyTextureRepeat} ${e.skyTextureRepeat}; side: back"\n          class="environment">\n        </a-sky>\n      `}const n=e.environmentTransforms?.fakeSky||{};return r+=`\n      <a-entity\n        id="fake_sky"\n        geometry="primitive: sphere; radius: 30"\n        position="${this.getFormattedVector(n.position,"0 1.7 0")}"\n        rotation="${this.getFormattedVector(n.rotation,"0 0 0")}"\n        scale="${this.getFormattedVector(n.scale,"-1 1 1")}"\n        material="opacity: 0.8; side: double; shader: flat;"\n        class="environment">\n      </a-entity>\n    `,r}generateRoomGeometries(e){let r="";return[{geometry:e.floorGeometry,type:"floor",textureId:e.floorTextureId,repeat:e.floorTextureRepeat},{geometry:e.wallsGeometry,type:"walls",textureId:e.wallTextureId,repeat:e.wallTextureRepeat},{geometry:e.ceilingGeometry,type:"ceiling",textureId:e.ceilingTextureId,repeat:e.ceilingTextureRepeat}].forEach(({geometry:i,type:s,textureId:m,repeat:c})=>{if(!i)return;const u=e.geometryTransforms?.[s]||{},k=this.getFormattedVector(u.position,"0 0 0"),C=this.getFormattedVector(u.rotation,"0 0 0"),ne=this.getFormattedVector(u.scale,"1 1 1"),D=i.metadata.fileFormat.toLowerCase();let T="";["gltf","glb"].includes(D)?T=`gltf-model="#geometry-${i.id}"`:"obj"===D?T=`obj-model="obj: #geometry-${i.id}"`:["ply","pcd"].includes(D)&&(T=`ply-model="src: #geometry-${i.id}"`);let W="";m&&(W=`material="src: #${"walls"===s?"wall":s}-texture; repeat: ${c} ${c}"`),r+=`\n        <a-entity\n          id="geometry-${i.id}"\n          class="room-geometry ${s}"\n          position="${k}"\n          rotation="${C}"\n          scale="${ne}"\n          ${T}\n          ${W}>\n        </a-entity>\n      `}),r}generateArtworks(e){let r="";return e.artworks?.forEach((n,i)=>{const s=e.artworkTransforms?.[n.id],m=this.getFormattedVector(s?.position,this.getDefaultPosition(i,e.artworks.length)),c=this.getFormattedVector(s?.rotation,"0 0 0"),u=this.getFormattedVector(s?.scale,this.getArtworkScale(n));r+=`\n        <a-plane\n          id="${n.id}"\n          src="#artwork-${n.id}"\n          position="${m}"\n          rotation="${c}"\n          side="double"\n          scale="${u}"\n          material="shader: flat"></a-plane>\n      `}),r}generate3DObjects(e){let r="";return e.threeDObjects?.forEach((n,i)=>{const s=e.threeDObjectTransforms?.[n.id],m=this.getFormattedVector(s?.position,this.getDefault3DObjectPosition(i,e.threeDObjects.length)),c=this.getFormattedVector(s?.rotation,"0 0 0"),u=this.getFormattedVector(s?.scale,"1 1 1"),k=n.metadata.fileFormat.toLowerCase();let C="";C=["gltf","glb"].includes(k)?`gltf-model="#object-${n.id}"`:"obj"===k?`obj-model="obj: #object-${n.id}"`:["ply","pcd"].includes(k)?`ply-model="src: #object-${n.id}"`:`gltf-model="#object-${n.id}"`,r+=`\n        <a-entity\n          id="${n.id}"\n          class="three-d-object"\n          position="${m}"\n          rotation="${c}"\n          scale="${u}"\n          material="shader: flat"\n          ${C}\n          ${n.hasTextures&&n.textureCdnUrl?`material="src: #texture-${n.id}"`:""}>\n        </a-entity>\n      `}),r}generateCamera(e){const r=e.environmentTransforms?.camera||{};return`\n      <a-entity\n        id="camera-rig"\n        position="${this.getFormattedVector(r.position,"0 1.7 5")}"\n        rotation="${this.getFormattedVector(r.rotation,"0 0 0")}">\n        <a-entity\n          camera\n          wasd-controls="acceleration: 10"\n          movement-controls="fly: ${e.flyAllowed}; speed: 0.05"\n          look-controls="pointerLockEnabled: true">\n        </a-entity>\n        <a-entity hand-controls="hand: left"></a-entity>\n        <a-entity hand-controls="hand: right" ${e.hydraScriptId?"hydra-toggle":""}></a-entity>\n      </a-entity>\n    `}getFormattedVector(e,r){return e?"string"==typeof e?e:`${e.x} ${e.y} ${e.z}`:r}getDefaultPosition(e,r){const n=Math.ceil(Math.sqrt(r));return`${3*(e%n-(n-1)/2)} 1.7 ${-5-3*Math.floor(e/n)}`}getDefault3DObjectPosition(e,r){return`${4*(e%3-1)} 1 ${-8-4*Math.floor(e/3)}`}getArtworkScale(e){return 2*this.getArtworkAspectRatio(e)+" 2 1"}getArtworkAspectRatio(e){if(e.metadata&&e.metadata.length>0){const r=e.metadata[0];if(r.aspectRatio){if(r.aspectRatio.includes(":")){const[n,i]=r.aspectRatio.split(":").map(Number);return n/i}return parseFloat(r.aspectRatio)}}return e.widthCm&&e.heightCm?e.widthCm/e.heightCm:1}generateHydraScript(e){if(!e)return"";const n=this.config()?.environmentTransforms?.fakeSky||{},i=this.getFormattedVector(n.position,"0 1.7 0"),s=this.getFormattedVector(n.rotation,"0 0 0"),m=this.getFormattedVector(n.scale,"-1 1 1");return`\n      const offscreenCanvas = new OffscreenCanvas(512, 512);\n      const hydra = new Hydra({\n        canvas: offscreenCanvas,\n        enableStreamCapture: false,\n        detectAudio: ${e.enableMic},\n        detectVideo: ${e.enableCamera},\n        width: 512,\n        height: 512,\n      });\n\n      ${e.hydraScript}\n\n      const fakeSky = document.createElement('a-entity');\n      fakeSky.setAttribute('id', 'fake_sky');\n      fakeSky.setAttribute('geometry', 'primitive: sphere; radius: 30');\n      fakeSky.setAttribute('scale', '${m}');\n      fakeSky.setAttribute('position', '${i}');\n      fakeSky.setAttribute('rotation', '${s}');\n      fakeSky.setAttribute('material', 'opacity: 0.8; side: double; shader: flat;');\n      fakeSky.setAttribute('canvas-updater', '');\n      document.querySelector('a-scene').appendChild(fakeSky);\n\n      AFRAME.registerComponent('canvas-updater', {\n        dependencies: ['geometry', 'material'],\n        tick: function () {\n          const material = this.el.getObject3D('mesh').material;\n          if (!material.map) {\n            const texture = new THREE.CanvasTexture(offscreenCanvas);\n            material.map = texture;\n          } else {\n            material.map.needsUpdate = true;\n          }\n        }\n      });\n\n      AFRAME.registerComponent('hydra-toggle', {\n        init: function() {\n          this.el.addEventListener('bbuttondown', this.toggleHydra);\n        },\n\n        toggleHydra: function() {\n          const fakeSky = document.querySelector("#fake_sky");\n          const isVisible = fakeSky.getAttribute("visible") !== false;\n\n          if (isVisible) {\n            console.log("Hydra visuals: HIDDEN");\n            fakeSky.setAttribute("visible", false);\n          } else {\n            console.log("Hydra visuals: SHOWING");\n            fakeSky.setAttribute("visible", true);\n          }\n        }\n      });\n    `}generateAdditionalComponents(){return"\n      // PLY Loader Component for Point Clouds\n      AFRAME.registerComponent('ply-model', {\n        schema: {\n          src: { type: 'asset' }\n        },\n\n        init: function() {\n          const loader = new THREE.PLYLoader();\n          const src = this.data.src;\n\n          loader.load(src, (geometry) => {\n            const material = new THREE.PointsMaterial({\n              color: 0xffffff,\n              size: 0.02,\n              vertexColors: THREE.VertexColors\n            });\n            const points = new THREE.Points(geometry, material);\n            this.el.setObject3D('mesh', points);\n          });\n        }\n      });\n\n      // Enhanced OBJ Loader Component\n      AFRAME.registerComponent('obj-model', {\n        schema: {\n          obj: { type: 'asset' }\n        },\n\n        init: function() {\n          const loader = new THREE.OBJLoader();\n          const src = this.data.obj;\n\n          loader.load(src, (object) => {\n            this.el.setObject3D('mesh', object);\n          });\n        }\n      });\n    "}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-vr"]],standalone:!0,features:[t.aNF],decls:4,vars:3,consts:[[1,"vr-viewer-container"],[1,"loading-overlay"],[1,"error-overlay"],[1,"card","iframe-card"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"alert","alert-danger"],[1,"card-body","p-0"],["frameborder","0","allowfullscreen","","allowvr","",1,"vr-iframe",3,"src"]],template:function(r,n){1&r&&(t.j41(0,"div",0),t.DNE(1,At,4,0,"div",1)(2,Et,3,1,"div",2)(3,Ot,3,1,"div",3),t.k0s()),2&r&&(t.R7$(),t.vxM(1,n.loading()?1:-1),t.R7$(),t.vxM(2,n.error()?2:-1),t.R7$(),t.vxM(3,n.iframeSrc()&&!n.loading()?3:-1))},dependencies:[w.MD],styles:[".vr-viewer-container[_ngcontent-%COMP%]{height:100vh;width:100%;position:relative;overflow:hidden}.loading-overlay[_ngcontent-%COMP%], .error-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;z-index:1000;background:#000c}.iframe-card[_ngcontent-%COMP%]{height:100vh;border:none;border-radius:0}.vr-iframe[_ngcontent-%COMP%]{width:100%;height:100vh;border:none}"]})}}return o})();const St=(o,a)=>a.id;function jt(o,a){1&o&&(t.j41(0,"div",3)(1,"div",4)(2,"span",5),t.EFF(3,"Loading VR galleries..."),t.k0s()(),t.j41(4,"p",6),t.EFF(5,"Loading VR galleries..."),t.k0s()())}function It(o,a){if(1&o&&(t.j41(0,"div",7),t.nrm(1,"i",8),t.EFF(2),t.k0s()),2&o){const e=t.XpG();t.R7$(2),t.SpI(" ",e.error()," ")}}function Gt(o,a){if(1&o&&(t.j41(0,"p",13),t.EFF(1),t.k0s()),2&o){let e;const r=t.XpG(2);t.R7$(),t.SpI(" Explore ",null==(e=r.artistProfile())?null:e.displayName,"'s immersive virtual reality art experiences ")}}function Nt(o,a){if(1&o&&t.EFF(0),2&o){let e;const r=t.XpG(3);t.SpI(" ",null==(e=r.artistProfile())?null:e.displayName," hasn't published any VR galleries yet. ")}}function Vt(o,a){1&o&&t.EFF(0," No VR galleries have been published yet. ")}function Dt(o,a){if(1&o&&(t.j41(0,"div",14)(1,"div",10)(2,"div",3),t.nrm(3,"i",15),t.j41(4,"h3",16),t.EFF(5,"No VR Galleries Available"),t.k0s(),t.j41(6,"p",16),t.DNE(7,Nt,1,1)(8,Vt,1,0),t.k0s()()()()),2&o){const e=t.XpG(2);t.R7$(7),t.vxM(7,e.artistProfile()?7:8)}}function Xt(o,a){1&o&&(t.j41(0,"span",41),t.nrm(1,"i",55),t.EFF(2," Dynamic "),t.k0s())}function Ut(o,a){if(1&o&&(t.j41(0,"span",58),t.EFF(1),t.k0s()),2&o){const e=a.$implicit;t.R7$(),t.JRh(e)}}function Lt(o,a){if(1&o&&(t.j41(0,"div",44),t.nrm(1,"i",56),t.j41(2,"span",16),t.EFF(3,"Series:"),t.k0s(),t.j41(4,"div",57),t.Z7z(5,Ut,2,1,"span",58,t.fX1),t.k0s()()),2&o){const e=t.XpG().$implicit;t.R7$(5),t.Dyx(e.seriesNames)}}function Wt(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",17)(1,"div",37)(2,"div",38)(3,"h5",39),t.nrm(4,"i",40),t.EFF(5),t.k0s(),t.DNE(6,Xt,3,0,"span",41),t.k0s(),t.j41(7,"div",23)(8,"div",42),t.nrm(9,"i",43),t.j41(10,"strong"),t.EFF(11),t.k0s(),t.EFF(12),t.k0s(),t.DNE(13,Lt,7,0,"div",44),t.j41(14,"div",45),t.nrm(15,"i",22),t.j41(16,"small",16),t.EFF(17),t.k0s()()(),t.j41(18,"div",46)(19,"div",14)(20,"div",47)(21,"button",48),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG(3);return t.Njj(i.previewVR(n))}),t.nrm(22,"i",49),t.EFF(23," Preview "),t.k0s()(),t.j41(24,"div",47)(25,"button",50),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG(3);return t.Njj(i.enterVR(n))}),t.nrm(26,"i",51),t.EFF(27," Enter VR "),t.k0s()()(),t.j41(28,"div",52)(29,"small",53),t.nrm(30,"i",54),t.EFF(31," Ready to explore in VR! "),t.k0s()()()()()}if(2&o){const e=a.$implicit,r=t.XpG(3);t.R7$(5),t.SpI(" ",e.title," "),t.R7$(),t.vxM(6,e.randomAllowed?6:-1),t.R7$(5),t.JRh(e.totalArtworks),t.R7$(),t.SpI(" ",1===e.totalArtworks?"artwork":"artworks"," "),t.R7$(),t.vxM(13,e.seriesNames.length>0?13:-1),t.R7$(4),t.JRh(r.getControlsDescription(e))}}function Bt(o,a){if(1&o&&(t.j41(0,"div",14),t.Z7z(1,Wt,32,6,"div",17,St),t.k0s(),t.j41(3,"div",18)(4,"div",10)(5,"div",19)(6,"div",20)(7,"h5",21),t.nrm(8,"i",22),t.EFF(9," VR Controls Guide "),t.k0s()(),t.j41(10,"div",23)(11,"div",14)(12,"div",24)(13,"div",25),t.nrm(14,"i",26),t.j41(15,"h6"),t.EFF(16,"Desktop"),t.k0s(),t.j41(17,"ul",27)(18,"li")(19,"strong"),t.EFF(20,"WASD"),t.k0s(),t.EFF(21," - Move around"),t.k0s(),t.j41(22,"li")(23,"strong"),t.EFF(24,"Mouse"),t.k0s(),t.EFF(25," - Look around"),t.k0s(),t.j41(26,"li")(27,"strong"),t.EFF(28,"Click & Drag"),t.k0s(),t.EFF(29," - Rotate view"),t.k0s(),t.j41(30,"li")(31,"strong"),t.EFF(32,"Scroll"),t.k0s(),t.EFF(33," - Zoom in/out"),t.k0s()()()(),t.j41(34,"div",24)(35,"div",25),t.nrm(36,"i",28),t.j41(37,"h6"),t.EFF(38,"Mobile/Tablet"),t.k0s(),t.j41(39,"ul",27)(40,"li")(41,"strong"),t.EFF(42,"Touch & Drag"),t.k0s(),t.EFF(43," - Look around"),t.k0s(),t.j41(44,"li")(45,"strong"),t.EFF(46,"Pinch"),t.k0s(),t.EFF(47," - Zoom in/out"),t.k0s(),t.j41(48,"li")(49,"strong"),t.EFF(50,"Two fingers"),t.k0s(),t.EFF(51," - Move"),t.k0s(),t.j41(52,"li")(53,"strong"),t.EFF(54,"Gyroscope"),t.k0s(),t.EFF(55," - Tilt to look"),t.k0s()()()(),t.j41(56,"div",24)(57,"div",25),t.nrm(58,"i",29),t.j41(59,"h6"),t.EFF(60,"VR Headset"),t.k0s(),t.j41(61,"ul",27)(62,"li")(63,"strong"),t.EFF(64,"Head Movement"),t.k0s(),t.EFF(65," - Look around"),t.k0s(),t.j41(66,"li")(67,"strong"),t.EFF(68,"Controller Joystick"),t.k0s(),t.EFF(69," - Move"),t.k0s(),t.j41(70,"li")(71,"strong"),t.EFF(72,"Trigger"),t.k0s(),t.EFF(73," - Interact"),t.k0s(),t.j41(74,"li")(75,"strong"),t.EFF(76,"B Button"),t.k0s(),t.EFF(77," - Toggle effects"),t.k0s()()()()(),t.j41(78,"div",30)(79,"div",31)(80,"div",32),t.nrm(81,"i",33),t.j41(82,"strong"),t.EFF(83,"Tips:"),t.k0s(),t.EFF(84," For the best VR experience, use a compatible headset like Meta Quest or similar WebXR-enabled device. "),t.k0s()(),t.j41(85,"div",31)(86,"div",34),t.nrm(87,"i",35),t.j41(88,"strong"),t.EFF(89,"Browser:"),t.k0s(),t.EFF(90," Chrome recommended for desktop and mobile. For VR headsets, use "),t.j41(91,"a",36),t.EFF(92,"Wolvic browser"),t.k0s(),t.EFF(93,". "),t.k0s()()()()()()()),2&o){const e=t.XpG(2);t.R7$(),t.Dyx(e.vrConfigsWithArtworkCount())}}function Ht(o,a){if(1&o&&(t.j41(0,"div",9)(1,"div",10)(2,"h1",11),t.nrm(3,"i",12),t.EFF(4," VR Galleries "),t.k0s(),t.DNE(5,Gt,2,1,"p",13),t.k0s()(),t.DNE(6,Dt,9,1,"div",14)(7,Bt,94,0)),2&o){const e=t.XpG();t.R7$(5),t.vxM(5,e.artistProfile()?5:-1),t.R7$(),t.vxM(6,0===e.vrConfigsWithArtworkCount().length?6:7)}}let zt=(()=>{class o{constructor(){this.store=(0,t.WQX)(O),this.route=(0,t.WQX)(f.nX),this.router=(0,t.WQX)(f.Ix),this.artistProfile=this.store.artistProfile,this.vrConfigs=this.store.vrConfigs,this.loading=this.store.loading,this.error=this.store.error,this.AppRoutes=v.S,this.vrConfigsWithArtworkCount=(0,t.EWP)(()=>this.vrConfigs().map(r=>({...r,totalArtworks:this.getTotalArtworkCount(r),seriesNames:this.getSeriesNames(r)})))}get artistName(){return this.route.snapshot.params.artistName||""}getTotalArtworkCount(e){let r=0;return e.artworks&&(r+=e.artworks.length),e.series&&e.series.forEach(n=>{n.artworks&&(r+=n.artworks.length)}),r}getSeriesNames(e){return e.series?e.series.map(r=>r.name):[]}getControlsDescription(e){const r=[];return e.flyAllowed&&r.push("Flying enabled"),e.randomAllowed&&r.push("Random mode available"),r.push("WASD movement","Mouse look"),r.join(" \u2022 ")}enterVR(e){const r=this.artistName;if(e.randomAllowed){const n=this.generateRandomHash();this.router.navigate(["/arte",r,"vr",e.id,n])}else this.router.navigate(["/arte",r,"vr",e.id])}previewVR(e){this.router.navigate(["/arte",this.artistName,"vr",e.id])}generateRandomHash(){return Math.random().toString(36).substring(2,15)}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-vr-glry"]],standalone:!0,features:[t.aNF],decls:6,vars:4,consts:[[1,"min-vh-100"],[3,"artistName","displayName","currentRoute"],[1,"container","vr-gallery-container"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"row","mb-4"],[1,"col-12"],[1,"display-6","mb-3"],[1,"fas","fa-vr-cardboard","me-3"],[1,"lead","text-muted"],[1,"row"],[1,"fas","fa-cube","fa-4x","text-muted","mb-4"],[1,"text-muted"],[1,"col-lg-4","col-md-6","mb-4"],[1,"row","mt-5"],[1,"card"],[1,"card-header"],[1,"mb-0"],[1,"fas","fa-gamepad","me-2"],[1,"card-body"],[1,"col-md-4","mb-3"],[1,"text-center"],[1,"fas","fa-desktop","fa-2x","text-primary","mb-3"],[1,"list-unstyled","small"],[1,"fas","fa-mobile-alt","fa-2x","text-primary","mb-3"],[1,"fas","fa-vr-cardboard","fa-2x","text-primary","mb-3"],[1,"row","mt-4"],[1,"col-md-6"],[1,"alert","alert-info","mb-0"],[1,"fas","fa-lightbulb","me-2"],[1,"alert","alert-success","mb-0"],[1,"fas","fa-browser","me-2"],["href","https://wolvic.com/en/","target","_blank",1,"alert-link"],[1,"card","h-100","vr-config-card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"fas","fa-cube","me-2"],[1,"badge","bg-primary"],[1,"artwork-count","mb-3"],[1,"fas","fa-images","me-2"],[1,"series-info","mb-3"],[1,"controls-info"],[1,"card-footer"],[1,"col-6"],[1,"btn","btn-outline-primary","btn-sm","w-100",3,"click"],[1,"fas","fa-eye","me-1"],[1,"btn","btn-primary","btn-sm","w-100",3,"click"],[1,"fas","fa-external-link-alt","me-1"],[1,"text-center","mt-2"],[1,"text-success"],[1,"fas","fa-check-circle","me-1"],[1,"fas","fa-random","me-1"],[1,"fas","fa-layer-group","me-2"],[1,"mt-1"],[1,"badge","bg-light","text-dark","me-1"]],template:function(r,n){if(1&r&&(t.j41(0,"div",0),t.nrm(1,"app-public-navbar",1),t.j41(2,"div",2),t.DNE(3,jt,6,0,"div",3)(4,It,3,1)(5,Ht,8,2),t.k0s()()),2&r){let i;t.R7$(),t.Y8G("artistName",n.artistName)("displayName",(null==(i=n.artistProfile())?null:i.displayName)||"")("currentRoute",n.AppRoutes.VR),t.R7$(2),t.vxM(3,n.loading()?3:n.error()?4:5)}},dependencies:[w.MD,V],styles:[".vr-gallery-container[_ngcontent-%COMP%]{padding:2rem 0}.vr-config-card[_ngcontent-%COMP%]{transition:all .3s ease;border:1px solid rgba(var(--bs-border-color-rgb),.2);box-shadow:0 2px 8px #00000014}.vr-config-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #00000026;border-color:var(--bs-primary)}.vr-config-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--bs-primary),var(--bs-info));color:#fff;border-bottom:none}.vr-config-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-weight:600}.artwork-count[_ngcontent-%COMP%]{padding:.75rem;background:rgba(var(--bs-primary-rgb),.1);border-radius:.5rem;border-left:4px solid var(--bs-primary)}.series-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.75rem;border:1px solid rgba(var(--bs-dark-rgb),.2)}.controls-info[_ngcontent-%COMP%]{padding:.5rem;background:rgba(var(--bs-secondary-rgb),.05);border-radius:.375rem}.card-footer[_ngcontent-%COMP%]{background:rgba(var(--bs-light-rgb),.5);border-top:1px solid rgba(var(--bs-border-color-rgb),.2)}.btn-sm[_ngcontent-%COMP%]{font-size:.8rem;padding:.375rem .75rem}.btn-outline-primary[_ngcontent-%COMP%]:disabled, .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.alert[_ngcontent-%COMP%]{border-radius:.5rem;border:none;box-shadow:0 2px 8px #0000001a}.text-center[_ngcontent-%COMP%]   .fas.fa-4x[_ngcontent-%COMP%]{opacity:.3}.card[_ngcontent-%COMP%]:last-child{background:linear-gradient(135deg,rgba(var(--bs-primary-rgb),.05),rgba(var(--bs-info-rgb),.05));border:1px solid rgba(var(--bs-primary-rgb),.2)}.card[_ngcontent-%COMP%]:last-child   .card-header[_ngcontent-%COMP%]{background:rgba(var(--bs-primary-rgb),.1);color:var(--bs-primary);border-bottom:1px solid rgba(var(--bs-primary-rgb),.2)}@media (max-width: 768px){.vr-gallery-container[_ngcontent-%COMP%]{padding:1rem 0}.display-6[_ngcontent-%COMP%]{font-size:1.75rem}.lead[_ngcontent-%COMP%]{font-size:1rem}.col-6[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{font-size:.7rem;padding:.25rem .5rem}}"]})}}return o})(),Qt=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-loader"]],standalone:!0,features:[t.aNF],decls:2,vars:0,consts:[[1,"loader-container"],[1,"spinner"]],template:function(r,n){1&r&&(t.j41(0,"div",0),t.nrm(1,"div",1),t.k0s())},styles:[".loader-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;width:100%}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #333;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}p[_ngcontent-%COMP%]{margin-top:16px;color:#333;font-family:Arial,sans-serif}"]})}}return o})();function Kt(o,a){1&o&&t.nrm(0,"app-loader")}function Yt(o,a){if(1&o&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2,"Error Loading Artist Data"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s()()),2&o){const e=t.XpG();t.R7$(4),t.JRh(e.error())}}function Jt(o,a){1&o&&t.nrm(0,"app-arte")}function Zt(o,a){1&o&&t.nrm(0,"app-glry")}function qt(o,a){1&o&&t.nrm(0,"app-vr-glry")}function te(o,a){1&o&&t.nrm(0,"app-vr")}function ee(o,a){1&o&&t.nrm(0,"app-arte")}function re(o,a){if(1&o&&t.DNE(0,Jt,1,0)(1,Zt,1,0)(2,qt,1,0)(3,te,1,0)(4,ee,1,0),2&o){let e;const r=t.XpG();t.vxM(0,(e=r.currentRouteSignal())===r.AppRoutes.ARTE?0:e===r.AppRoutes.GALLERY?1:e===r.AppRoutes.VR?2:"VR_VIEWER"===e?3:4)}}let oe=(()=>{class o{constructor(){this.router=(0,t.WQX)(f.Ix),this.route=(0,t.WQX)(f.nX),this.store=(0,t.WQX)(O),this.AppRoutes=v.S,this.loading=this.store.loading,this.error=this.store.error,this.routeData=(0,$.ot)((0,_.z)([this.route.params,this.router.events.pipe((0,j.p)(e=>e instanceof f.wF),(0,h.T)(()=>this.router.url))]).pipe((0,h.T)(([e,r])=>({artistName:e.artistName,seriesName:e.seriesId?decodeURIComponent(e.seriesId):e.seriesId,artworkId:e.artworkId,configId:e.configId,hash:e.hash,currentRoute:this.detectRouteType(r)})))),this.currentRouteSignal=(0,t.EWP)(()=>this.routeData()?.currentRoute),this.currentArtistName=null}detectRouteType(e){if(e.includes(`/${v.S.GALLERY}`))return v.S.GALLERY;if(e.includes(`/${v.S.VR}`)){const r=e.split(`/${v.S.VR}/`);return r.length>1&&r[1]?"VR_VIEWER":v.S.VR}return e.includes(`/${v.S.ARTE}`),v.S.ARTE}ngOnInit(){var e=this;return(0,b.A)(function*(){const r=e.routeData();console.log("KwalhiaPublic ngOnInit - route data:",r),r?.artistName&&r.artistName!==e.currentArtistName?(e.currentArtistName=r.artistName,console.log("Loading artist data for:",r.artistName,"seriesName:",r.seriesName),yield e.store.loadArtistData(r.artistName,r.seriesName),r.artworkId&&(console.log("Setting artwork ID from URL:",r.artworkId),e.store.setSelectedArtworkId(r.artworkId))):r?.seriesName&&(e.store.setSelectedSeries(r.seriesName),r.artworkId&&(console.log("Setting artwork ID (series change):",r.artworkId),e.store.setSelectedArtworkId(r.artworkId)))})()}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-kwalhia-public"]],standalone:!0,features:[t.aNF],decls:3,vars:1,consts:[[1,"error-container"]],template:function(r,n){1&r&&t.DNE(0,Kt,1,0,"app-loader")(1,Yt,5,1)(2,re,5,1),2&r&&t.vxM(0,n.loading()?0:n.error()?1:2)},dependencies:[ot,$t,Tt,zt,Qt],styles:[".artist-name[_ngcontent-%COMP%]{color:var(--text-color);letter-spacing:.5px}.section-title[_ngcontent-%COMP%]{color:var(--accent-color);font-weight:400;font-size:1.25rem;margin-bottom:1.5rem;padding-bottom:.5rem;border-bottom:1px solid var(--accent-color);opacity:.8}.artist-info[_ngcontent-%COMP%]{padding:2rem 0}.bio[_ngcontent-%COMP%]{line-height:1.6;color:var(--text-color);opacity:.9}.links[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.link[_ngcontent-%COMP%]{color:var(--accent-color);text-decoration:none;font-size:.9rem;padding:.5rem 0;border-bottom:1px solid transparent;transition:border-color .2s ease}.link[_ngcontent-%COMP%]:hover{color:var(--accent-color);border-bottom-color:var(--accent-color)}.series-grid[_ngcontent-%COMP%]{max-width:100%}.series-item[_ngcontent-%COMP%]{border-bottom:1px solid var(--accent-color);padding-bottom:2rem}.series-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.cover-container[_ngcontent-%COMP%]{width:100%;max-width:600px;aspect-ratio:16/10;overflow:hidden;border-radius:4px;background:var(--container-color)}.cover-media[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .4s ease}.cover-media[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.series-title[_ngcontent-%COMP%]{color:var(--text-color);font-weight:500;font-size:1.5rem;line-height:1.3}.series-description[_ngcontent-%COMP%]{color:var(--text-color);opacity:.8;line-height:1.6;max-width:90%}.artwork-count[_ngcontent-%COMP%]{color:var(--accent-color);opacity:.7;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.empty-state[_ngcontent-%COMP%]{color:var(--text-color);opacity:.6}@media (max-width: 768px){.cover-container[_ngcontent-%COMP%]{aspect-ratio:4/3}.series-title[_ngcontent-%COMP%]{font-size:1.25rem}.artist-name[_ngcontent-%COMP%]{font-size:1.75rem!important}}"]})}}return o})()},2010:(S,F,d)=>{d.d(F,{v:()=>$});var b=d(5312),t=d(4438),f=d(1626);let $=(()=>{class _{constructor(h){this.http=h,this.apiUrl=b.c.apiUrl}findAll(h){return this.http.get(`${this.apiUrl}/${this.endpoint}`,{params:{...h}})}findOne(h){return this.http.get(`${this.apiUrl}/${this.endpoint}/${h}`)}create(h){return this.http.post(`${this.apiUrl}/${this.endpoint}`,h)}update(h,w){return this.http.patch(`${this.apiUrl}/${this.endpoint}/${h}`,w)}remove(h){return this.http.delete(`${this.apiUrl}/${this.endpoint}/${h}`)}static{this.\u0275fac=function(w){return new(w||_)(t.KVO(f.Qq))}}static{this.\u0275prov=t.jDH({token:_,factory:_.\u0275fac})}}return _})()},2249:(S,F,d)=>{d.d(F,{f:()=>$});var b=d(2010),t=d(4438),f=d(1626);let $=(()=>{class _ extends b.v{constructor(h){super(h),this.http=h,this.endpoint="hydra-scripts"}getMyScripts(h){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-scripts`,{params:{...h}})}getHydraScript(h){return this.http.get(`${this.apiUrl}/${this.endpoint}/${h}`)}static{this.\u0275fac=function(w){return new(w||_)(t.KVO(f.Qq))}}static{this.\u0275prov=t.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})()},3373:(S,F,d)=>{d.d(F,{gA:()=>$,vA:()=>b.v,AF:()=>h,fC:()=>E.f,UN:()=>_,xB:()=>j,RV:()=>w});var b=d(2010),t=d(4438),f=d(1626);let $=(()=>{class p extends b.v{constructor(l){super(l),this.http=l,this.endpoint="artist-profiles"}getMyProfile(){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-profile`)}publishArtistSite(l){return this.http.post(`${this.apiUrl}/${this.endpoint}/${l}/publish`,{})}static{this.\u0275fac=function(g){return new(g||p)(t.KVO(f.Qq))}}static{this.\u0275prov=t.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})(),_=(()=>{class p extends b.v{constructor(l){super(l),this.http=l,this.endpoint="kwalhia-art"}getAllArtworks(l){return this.findAll(l)}getMyArtworks(l){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-artwork`,{params:{...l}})}getArtwork(l){return this.findOne(l)}uploadArtwork(l,g,P){const y=new FormData;return y.append("file",g),y.append("aspectRatio",P),Object.entries(l).forEach(([R,x])=>{null!=x&&y.append(R,x.toString())}),this.http.post(`${this.apiUrl}/${this.endpoint}`,y)}updateArtwork(l,g,P){const y=new FormData;return P&&y.append("file",P),Object.entries(g).forEach(([R,x])=>{null!=x&&y.append(R,x.toString())}),this.http.patch(`${this.apiUrl}/${this.endpoint}/${l}`,y)}uploadWithFormData(l){return this.http.post(`${this.apiUrl}/${this.endpoint}`,l)}deleteArtwork(l){return this.remove(l)}create(l){return console.warn("Please use uploadArtwork method instead of create for adding new artwork"),super.create(l)}static{this.\u0275fac=function(g){return new(g||p)(t.KVO(f.Qq))}}static{this.\u0275prov=t.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})(),j=(()=>{class p extends b.v{constructor(l){super(l),this.http=l,this.endpoint="series"}getMySeries(l){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-series`,{params:{...l}})}static{this.\u0275fac=function(g){return new(g||p)(t.KVO(f.Qq))}}static{this.\u0275prov=t.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})(),h=(()=>{class p extends b.v{constructor(l){super(l),this.http=l,this.endpoint="galleries"}getMyGallery(){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-gallery`)}static{this.\u0275fac=function(g){return new(g||p)(t.KVO(f.Qq))}}static{this.\u0275prov=t.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})(),w=(()=>{class p extends b.v{constructor(l){super(l),this.http=l,this.endpoint="textures"}getTexture(l){return this.http.get(`${this.apiUrl}/${this.endpoint}/${l}`)}getMyTextures(l){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-textures`,{params:{...l}})}getTexturesByType(l,g){return this.http.get(`${this.apiUrl}/${this.endpoint}/type/${l}`,{params:{...g}})}uploadTexture(l,g,P=!1){const y=new FormData;return y.append("file",g),y.append("type",l),y.append("isPublic",P.toString()),this.http.post(`${this.apiUrl}/${this.endpoint}`,y)}static{this.\u0275fac=function(g){return new(g||p)(t.KVO(f.Qq))}}static{this.\u0275prov=t.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})();var E=d(2249)}}]);