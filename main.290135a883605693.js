(self.webpackChunkfront_simple=self.webpackChunkfront_simple||[]).push([[792],{9052:(Dt,qe,S)=>{"use strict";S.d(qe,{i5:()=>cr,oL:()=>Vs,Yo:()=>$l,n5:()=>Xt,_r:()=>oe,Nu:()=>gn,Oo:()=>Un});var l=S(1774),M=S(177),h=S(4438),ge=S(8800);let W=(()=>{class nt{constructor(Z){this.themeService=Z,this.isDarkTheme=this.themeService.isDarkTheme}toggleTheme(){this.themeService.toggleTheme()}static{this.\u0275fac=function(me){return new(me||nt)(h.rXU(ge.Fs))}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-theme-toggle"]],standalone:!0,features:[h.aNF],decls:3,vars:4,consts:[[1,"theme-toggle-btn",3,"click"],[1,"theme-icon"]],template:function(me,ke){1&me&&(h.j41(0,"button",0),h.bIt("click",function(){return ke.toggleTheme()}),h.j41(1,"span",1),h.nrm(2,"i"),h.k0s()()),2&me&&(h.BMQ("aria-label",ke.isDarkTheme()?"Switch to light theme":"Switch to dark theme"),h.R7$(2),h.ZvI("\n        ",ke.isDarkTheme()?"fa-solid fa-sun":"fa-solid fa-moon","\n         "))},dependencies:[M.MD],styles:[".theme-toggle-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;border:0px;background-color:transparent;color:var(--text);cursor:pointer;transition:all .3s ease}.theme-icon[_ngcontent-%COMP%]{font-size:1.2rem}.theme-text[_ngcontent-%COMP%]{font-size:.9rem}"]})}}return nt})();var X=S(33);let oe=(()=>{class nt{constructor(Z){this.router=Z}navigateToHome(){this.router.navigate([l.S.HOME])}static{this.\u0275fac=function(me){return new(me||nt)(h.rXU(X.Ix))}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-navbar"]],standalone:!0,features:[h.aNF],decls:7,vars:0,consts:[[1,"navbar","mb-3","fixed-top",2,"background-color","transparent"],[1,"container-fluid"],[1,"btn","navbar-brand","position-absolute","top-50","start-50","translate-middle",3,"click"],[1,"m-0","rainbow-text","text-lowercase"],[1,"ms-auto"]],template:function(me,ke){1&me&&(h.j41(0,"nav",0)(1,"div",1)(2,"button",2),h.bIt("click",function(){return ke.navigateToHome()}),h.j41(3,"h1",3),h.EFF(4,"kwalhia"),h.k0s()(),h.j41(5,"div",4),h.nrm(6,"app-theme-toggle"),h.k0s()()())},dependencies:[W],styles:["h1[_ngcontent-%COMP%]{font-size:var(--font-size-h3);color:var(--text);letter-spacing:5px}.bg-body-tertiary[_ngcontent-%COMP%]{background-color:var(--bg)!important}.rainbow-text[_ngcontent-%COMP%]{background:linear-gradient(to right,var(--text) 20%,color-mix(in srgb,var(--text) 80%,transparent) 40%,color-mix(in srgb,var(--text) 60%,transparent) 60%,var(--text) 80%);background-size:200% auto;color:transparent;-webkit-background-clip:text;background-clip:text;animation:_ngcontent-%COMP%_shine 8s ease-in-out infinite;opacity:.9}@keyframes _ngcontent-%COMP%_shine{0%{background-position:-200% center}to{background-position:200% center}}"]})}}return nt})();var H=S(4221),G=S(467),k=S(5794),P=S(4909);const q=(nt,Me)=>Me.stripeInvoiceId;function ne(nt,Me){if(1&nt&&(h.nrm(0,"i",16),h.j41(1,"div")(2,"h6",17),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.j41(5,"p",17),h.EFF(6),h.nI1(7,"translate"),h.j41(8,"b"),h.EFF(9),h.k0s(),h.EFF(10,"!"),h.nrm(11,"br"),h.EFF(12),h.nI1(13,"translate"),h.k0s()()),2&nt){const Z=h.XpG();h.R7$(3),h.JRh(h.bMT(4,4,"BILLING.PRO_MEMBER")),h.R7$(3),h.SpI("",h.bMT(7,6,"BILLING.WELCOME_BACK"),", "),h.R7$(3),h.JRh(Z.userName()),h.R7$(3),h.JRh(h.bMT(13,8,"BILLING.ENJOY_PREMIUM"))}}function ce(nt,Me){if(1&nt&&(h.nrm(0,"i",18),h.j41(1,"div")(2,"h6",17),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.j41(5,"p",17),h.EFF(6),h.nI1(7,"translate"),h.j41(8,"b"),h.EFF(9),h.k0s(),h.EFF(10,"!"),h.k0s()()),2&nt){const Z=h.XpG();h.R7$(3),h.JRh(h.bMT(4,3,"BILLING.FREE_ACCOUNT")),h.R7$(3),h.SpI("",h.bMT(7,5,"BILLING.UNLOCK_FEATURES"),", "),h.R7$(3),h.JRh(Z.userName())}}function he(nt,Me){1&nt&&(h.nrm(0,"span",22),h.EFF(1),h.nI1(2,"translate")),2&nt&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"COMMON.REDIRECTING")," "))}function Ae(nt,Me){1&nt&&(h.EFF(0),h.nI1(1,"translate")),2&nt&&h.SpI(" ",h.bMT(1,1,"BILLING.BUTTONS.UPGRADE")," ")}function we(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"div",5)(1,"div",3)(2,"div",19)(3,"small",20),h.EFF(4),h.nI1(5,"translate"),h.k0s(),h.j41(6,"button",21),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.upgradeNow())}),h.DNE(7,he,3,3)(8,Ae,2,3),h.k0s()()()()}if(2&nt){const Z=h.XpG();h.R7$(4),h.JRh(h.bMT(5,3,"BILLING.MESSAGES.PREMIUM_DESC")),h.R7$(2),h.Y8G("disabled",Z.isCancelling()),h.R7$(),h.vxM(7,Z.isCancelling()?7:8)}}function de(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"tr")(1,"td"),h.EFF(2),h.nI1(3,"date"),h.k0s(),h.j41(4,"td"),h.EFF(5),h.k0s(),h.j41(6,"td"),h.EFF(7),h.k0s(),h.j41(8,"td")(9,"button",23),h.bIt("click",function(){const ke=h.eBV(Z).$implicit,dt=h.XpG();return h.Njj(dt.viewInvoice(ke.pdfUrl))}),h.EFF(10),h.nI1(11,"translate"),h.k0s()()()}if(2&nt){const Z=Me.$implicit;h.R7$(2),h.JRh(h.i5U(3,5,Z.createdAt,"mediumDate")),h.R7$(3),h.JRh(Z.subscriptionType),h.R7$(2),h.Lme("",Z.currency," ",Z.amount,""),h.R7$(3),h.SpI(" ",h.bMT(11,8,"BILLING.INVOICES.VIEW_PDF")," ")}}function Re(nt,Me){1&nt&&(h.j41(0,"tr")(1,"td",24),h.EFF(2),h.nI1(3,"translate"),h.k0s()()),2&nt&&(h.R7$(2),h.JRh(h.bMT(3,1,"BILLING.INVOICES.NO_INVOICES")))}function ze(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"div",13)(1,"div",25)(2,"div",26)(3,"small",20),h.EFF(4),h.nI1(5,"translate"),h.k0s(),h.j41(6,"span"),h.EFF(7),h.nI1(8,"date"),h.k0s()(),h.j41(9,"div",26)(10,"small",20),h.EFF(11),h.nI1(12,"translate"),h.k0s(),h.j41(13,"span"),h.EFF(14),h.k0s()(),h.j41(15,"div",26)(16,"small",20),h.EFF(17),h.nI1(18,"translate"),h.k0s(),h.j41(19,"span"),h.EFF(20),h.k0s()(),h.j41(21,"div",27)(22,"button",23),h.bIt("click",function(){const ke=h.eBV(Z).$implicit,dt=h.XpG();return h.Njj(dt.viewInvoice(ke.pdfUrl))}),h.EFF(23),h.nI1(24,"translate"),h.k0s()()()()}if(2&nt){const Z=Me.$implicit;h.R7$(4),h.SpI("",h.bMT(5,8,"BILLING.INVOICES.DATE"),":"),h.R7$(3),h.JRh(h.i5U(8,10,Z.createdAt,"mediumDate")),h.R7$(4),h.SpI("",h.bMT(12,13,"BILLING.INVOICES.TYPE"),":"),h.R7$(3),h.JRh(Z.subscriptionType),h.R7$(3),h.SpI("",h.bMT(18,15,"BILLING.INVOICES.AMOUNT"),":"),h.R7$(3),h.Lme("",Z.currency," ",Z.amount,""),h.R7$(3),h.SpI(" ",h.bMT(24,17,"BILLING.INVOICES.VIEW_PDF")," ")}}function Ge(nt,Me){1&nt&&(h.j41(0,"div",14),h.EFF(1),h.nI1(2,"translate"),h.k0s()),2&nt&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"BILLING.INVOICES.NO_INVOICES")," "))}function Oe(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"div",15)(1,"button",28),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG(),dt=h.sdS(41);return h.Njj(ke.openCancelModal(dt))}),h.EFF(2),h.k0s()()}if(2&nt){const Z=h.XpG();h.R7$(),h.Y8G("disabled",Z.isCancelling()),h.R7$(),h.SpI(" ",Z.isCancelling()?"Cancelling...":"Cancel Subscription"," ")}}function Ye(nt,Me){if(1&nt&&(h.j41(0,"div",15)(1,"p"),h.EFF(2),h.nI1(3,"translate"),h.nI1(4,"date"),h.k0s()()),2&nt){let Z;const me=h.XpG();h.R7$(2),h.Lme("",h.bMT(3,2,"BILLING.MESSAGES.SUBSCRIPTION_ENDS"),": ",h.i5U(4,4,null==(Z=me.subscriptionStatus())?null:Z.subscriptionEndDate,"mediumDate")," ")}}function yt(nt,Me){1&nt&&(h.j41(0,"div",29)(1,"p"),h.EFF(2),h.nI1(3,"translate"),h.k0s()()),2&nt&&(h.R7$(2),h.JRh(h.bMT(3,1,"BILLING.MESSAGES.NO_SUBSCRIPTION")))}function _t(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"div",30)(1,"h5",31),h.EFF(2),h.nI1(3,"translate"),h.k0s(),h.j41(4,"button",32),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.modal.dismiss())}),h.k0s()(),h.j41(5,"div",33)(6,"p"),h.EFF(7),h.nI1(8,"translate"),h.k0s()(),h.j41(9,"div",34)(10,"button",35),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(null==ke.modalRef?null:ke.modalRef.dismiss())}),h.EFF(11),h.nI1(12,"translate"),h.k0s(),h.j41(13,"button",36),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG();return ke.cancelSubscription(),h.Njj(null==ke.modalRef?null:ke.modalRef.close())}),h.EFF(14),h.nI1(15,"translate"),h.k0s()()}if(2&nt){const Z=h.XpG();h.R7$(2),h.JRh(h.bMT(3,5,"BILLING.BUTTONS.CANCEL")),h.R7$(5),h.JRh(h.bMT(8,7,"BILLING.MESSAGES.CANCEL_CONFIRM")),h.R7$(4),h.SpI(" ",h.bMT(12,9,"COMMON.CANCEL")," "),h.R7$(2),h.Y8G("disabled",Z.isCancelling()),h.R7$(),h.SpI(" ",Z.isCancelling()?"COMMON.PROCESSING":h.bMT(15,11,"BILLING.MESSAGES.CONFIRM_CANCEL")," ")}}let ut=(()=>{class nt{constructor(){this.paymentService=(0,h.WQX)(ge.WG),this.stripeBillingService=(0,h.WQX)(ge.aT),this.toastr=(0,h.WQX)(k.tw),this.router=(0,h.WQX)(X.Ix),this.activeOffcanvas=(0,h.WQX)(H.DI,{optional:!0}),this.modalService=(0,h.WQX)(H.Bq),this.activeModal=(0,h.WQX)(H.Lw,{optional:!0}),this.userName=(0,h.hFB)(""),this.userIsPro=(0,h.hFB)(!1),this.invoices=(0,h.hFB)([]),this.subscriptionStatus=(0,h.hFB)(null),this.isLoading=(0,h.hFB)(!1),this.error=(0,h.vPA)(null),this.isCancelling=(0,h.vPA)(!1),this.isProcessing=(0,h.vPA)(!1),this.modalRef=null,this.appRoutes=(0,h.vPA)(l.S),this.navigateTo=(Z,me)=>{this.closeModal(),this.router.navigate([Z],me)}}closeModal(){this.activeModal&&this.activeModal.close(),this.activeOffcanvas&&this.activeOffcanvas.dismiss()}cancelSubscription(){this.isCancelling.set(!0),this.stripeBillingService.cancelSubscription().subscribe({next:Z=>{this.toastr.success(Z.message)},error:Z=>{this.toastr.error(Z.message||"Failed to cancel subscription")},complete:()=>{this.isCancelling.set(!1)}})}updatePaymentMethod(){this.isProcessing.set(!0),this.paymentService.createCheckoutSession("month").subscribe({next:Z=>{Z?.url&&(window.location.href=Z.url)},error:Z=>{this.toastr.error("Failed to update payment method")},complete:()=>{this.isProcessing.set(!1)}})}viewInvoice(Z){window.open(Z,"_blank")}reactivateSubscription(){this.isProcessing.set(!0),this.paymentService.createCheckoutSession("month").subscribe({next:Z=>{Z?.url&&(window.location.href=Z.url)},error:Z=>{this.toastr.error("Failed to reactivate subscription")},complete:()=>{this.isProcessing.set(!1)}})}upgradeNow(){this.isProcessing.set(!0),this.paymentService.createCheckoutSession("month").subscribe({next:Z=>{Z?.url&&(window.location.href=Z.url)},error:Z=>{this.toastr.error("Failed to initiate upgrade")},complete:()=>{this.isProcessing.set(!1)}})}openCancelModal(Z){this.modalRef=this.modalService.open(Z,{centered:!0,backdrop:"static"}),this.modalRef.result.then(()=>{this.cancelSubscription()},()=>{})}static{this.\u0275fac=function(me){return new(me||nt)}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-billing"]],inputs:{userName:[h.Mj6.SignalBased,"userName"],userIsPro:[h.Mj6.SignalBased,"userIsPro"],invoices:[h.Mj6.SignalBased,"invoices"],subscriptionStatus:[h.Mj6.SignalBased,"subscriptionStatus"],isLoading:[h.Mj6.SignalBased,"isLoading"]},standalone:!0,features:[h.aNF],decls:42,vars:20,consts:[["cancelModal",""],[1,"container","p-3"],[1,"card","bg-primary","text-white","mb-4"],[1,"card-body"],[1,"d-flex","align-items-center"],[1,"card","my-3"],[1,"card","mb-4"],[1,"p-3"],[1,"mb-3"],[1,"d-none","d-md-block"],[1,"table-responsive"],[1,"table","mb-0"],[1,"d-md-none"],[1,"card","mb-2"],[1,"text-center","py-3"],[1,"d-flex","justify-content-end"],[1,"fas","fa-crown","me-2","p-md-5"],[1,"mb-0"],[1,"fas","fa-user","me-2","p-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted"],[1,"btn","btn-sm","btn-success",3,"click","disabled"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],["colspan","4",1,"text-center"],[1,"card-body","p-3",2,"border","none !important"],[1,"d-flex","justify-content-between","mb-2"],[1,"d-grid"],[1,"btn","btn-link","m-3",3,"click","disabled"],[1,"d-flex","justify-content-end","px-4"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"]],template:function(me,ke){if(1&me&&(h.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),h.DNE(4,ne,14,10)(5,ce,11,7),h.k0s()()(),h.DNE(6,we,9,5,"div",5),h.j41(7,"div",6)(8,"div",7)(9,"h6",8),h.EFF(10),h.nI1(11,"translate"),h.k0s(),h.j41(12,"div",9)(13,"div",10)(14,"table",11)(15,"thead")(16,"tr")(17,"th"),h.EFF(18),h.nI1(19,"translate"),h.k0s(),h.j41(20,"th"),h.EFF(21),h.nI1(22,"translate"),h.k0s(),h.j41(23,"th"),h.EFF(24),h.nI1(25,"translate"),h.k0s(),h.j41(26,"th"),h.EFF(27),h.nI1(28,"translate"),h.k0s()()(),h.j41(29,"tbody"),h.Z7z(30,de,12,10,"tr",null,q,!1,Re,4,3,"tr"),h.k0s()()()(),h.j41(33,"div",12),h.Z7z(34,ze,25,19,"div",13,q,!1,Ge,3,3,"div",14),h.k0s()(),h.DNE(37,Oe,3,2,"div",15)(38,Ye,5,7)(39,yt,4,3)(40,_t,16,13,"ng-template",null,0,h.C5r),h.k0s()()),2&me){let dt;h.R7$(4),h.vxM(4,!0===ke.userIsPro()?4:5),h.R7$(2),h.vxM(6,!0!==ke.userIsPro()?6:-1),h.R7$(4),h.SpI(" ",h.bMT(11,10,"BILLING.INVOICES.TITLE")," "),h.R7$(8),h.JRh(h.bMT(19,12,"BILLING.INVOICES.DATE")),h.R7$(3),h.JRh(h.bMT(22,14,"BILLING.INVOICES.TYPE")),h.R7$(3),h.JRh(h.bMT(25,16,"BILLING.INVOICES.AMOUNT")),h.R7$(3),h.JRh(h.bMT(28,18,"BILLING.INVOICES.ACTIONS")),h.R7$(3),h.Dyx(ke.invoices()),h.R7$(4),h.Dyx(ke.invoices()),h.R7$(3),h.vxM(37,!0===(null==(dt=ke.subscriptionStatus())?null:dt.isSubscribed)?37:!1===(null==(dt=ke.subscriptionStatus())?null:dt.isSubscribed)&&!1!==(null==(dt=ke.subscriptionStatus())?null:dt.cancelAtPeriodEnd)?38:!1===(null==(dt=ke.subscriptionStatus())?null:dt.isSubscribed)?39:-1)}},dependencies:[M.vh,P.h,P.D9]})}}return nt})();var ae=S(4843),x=S(9417);let T=(()=>{class nt{constructor(Z,me,ke){this.accountSettings=Z,this.toastr=me,this.fb=ke,this.settingsForm=this.fb.group({language:[this.accountSettings.currentLanguage()]})}ngOnInit(){this.settingsForm.patchValue({language:this.accountSettings.currentLanguage()})}onSubmit(){this.settingsForm.valid&&this.settingsForm.dirty&&(this.accountSettings.updateLanguage(this.settingsForm.value.language),this.toastr.success("Language updated"),this.settingsForm.markAsPristine())}static{this.\u0275fac=function(me){return new(me||nt)(h.rXU(ge.Yf),h.rXU(k.tw),h.rXU(x.ok))}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-account-settings"]],standalone:!0,features:[h.aNF],decls:18,vars:11,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","language",1,"form-label"],["id","language","formControlName","language",1,"form-select"],["value","en"],["value","es"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(me,ke){1&me&&(h.j41(0,"div",0)(1,"div",1)(2,"h5",2),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.j41(5,"form",3),h.bIt("ngSubmit",function(){return ke.onSubmit()}),h.j41(6,"div",4)(7,"label",5),h.EFF(8),h.nI1(9,"translate"),h.k0s(),h.j41(10,"select",6)(11,"option",7),h.EFF(12,"English"),h.k0s(),h.j41(13,"option",8),h.EFF(14,"Espa\xf1ol"),h.k0s()()(),h.j41(15,"button",9),h.EFF(16),h.nI1(17,"translate"),h.k0s()()()()),2&me&&(h.R7$(3),h.JRh(h.bMT(4,5,"SETTINGS.LANGUAGE.TITLE")),h.R7$(2),h.Y8G("formGroup",ke.settingsForm),h.R7$(3),h.JRh(h.bMT(9,7,"SETTINGS.LANGUAGE.DISPLAY")),h.R7$(7),h.Y8G("disabled",ke.settingsForm.pristine),h.R7$(),h.SpI(" ",h.bMT(17,9,"SETTINGS.LANGUAGE.SAVE")," "))},dependencies:[x.X1,x.qT,x.xH,x.y7,x.wz,x.BC,x.cb,x.j4,x.JD,P.h,P.D9,x.YN]})}}return nt})(),K=(()=>{class nt{constructor(){this.activeModal=(0,h.WQX)(H.Lw)}confirm(){this.activeModal.close("logout")}dismiss(){this.activeModal.dismiss()}static{this.\u0275fac=function(me){return new(me||nt)}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-logout-confirmation-modal"]],standalone:!0,features:[h.aNF],decls:17,vars:12,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-sign-out-alt","me-2"]],template:function(me,ke){1&me&&(h.j41(0,"div",0)(1,"h4",1),h.EFF(2),h.nI1(3,"translate"),h.k0s(),h.j41(4,"button",2),h.bIt("click",function(){return ke.dismiss()}),h.k0s()(),h.j41(5,"div",3)(6,"p"),h.EFF(7),h.nI1(8,"translate"),h.k0s()(),h.j41(9,"div",4)(10,"button",5),h.bIt("click",function(){return ke.dismiss()}),h.EFF(11),h.nI1(12,"translate"),h.k0s(),h.j41(13,"button",6),h.bIt("click",function(){return ke.confirm()}),h.nrm(14,"i",7),h.EFF(15),h.nI1(16,"translate"),h.k0s()()),2&me&&(h.R7$(2),h.JRh(h.bMT(3,4,"LOGOUT.CONFIRM_TITLE")),h.R7$(5),h.JRh(h.bMT(8,6,"LOGOUT.CONFIRM_MESSAGE")),h.R7$(4),h.SpI(" ",h.bMT(12,8,"COMMON.CANCEL")," "),h.R7$(4),h.SpI(" ",h.bMT(16,10,"LOGOUT.CONFIRM_BUTTON")," "))},dependencies:[M.MD,P.h,P.D9],encapsulation:2})}}return nt})();const te=(nt,Me)=>Me.id;function ve(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"button",7),h.bIt("click",function(){const ke=h.eBV(Z).$implicit,dt=h.XpG();return h.Njj(dt.setActiveSection(ke.id))}),h.nrm(1,"i"),h.EFF(2),h.nI1(3,"translate"),h.k0s()}if(2&nt){const Z=Me.$implicit,me=h.XpG();h.AVh("active",me.activeSection()===Z.id),h.R7$(),h.ZvI("p-2 fas ",Z.icon,""),h.R7$(),h.SpI(" ",h.bMT(3,6,Z.label)," ")}}function Ce(nt,Me){1&nt&&(h.j41(0,"div",8)(1,"div",9)(2,"span",10),h.EFF(3," Initializing... "),h.k0s()()())}function Be(nt,Me){1&nt&&(h.j41(0,"div",11)(1,"div",9)(2,"span",10),h.EFF(3," Loading... "),h.k0s()()())}function Ne(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"div",12),h.EFF(1),h.nI1(2,"translate"),h.j41(3,"button",13),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.refreshData())}),h.EFF(4),h.nI1(5,"translate"),h.k0s()()}2&nt&&(h.R7$(),h.SpI(" ",h.bMT(2,2,"BILLING.MESSAGES.FAILED_LOAD")," "),h.R7$(3),h.SpI(" ",h.bMT(5,4,"COMMON.TRY")," "))}function z(nt,Me){if(1&nt&&(h.j41(0,"div",14)(1,"h3"),h.EFF(2),h.nI1(3,"translate"),h.k0s(),h.nrm(4,"app-billing",15),h.k0s()),2&nt){const Z=h.XpG(2);h.R7$(2),h.SpI(" ",h.bMT(3,6,"BILLING.TITLE")," "),h.R7$(2),h.Y8G("userName",Z.userName())("userIsPro",Z.userIsPro())("invoices",Z.invoices())("subscriptionStatus",Z.subscriptionStatus())("isLoading","loading"===Z.requestState())}}function Fe(nt,Me){1&nt&&(h.j41(0,"div",16)(1,"h3"),h.EFF(2),h.nI1(3,"translate"),h.k0s(),h.nrm(4,"app-account-settings"),h.k0s()),2&nt&&(h.R7$(2),h.SpI(" ",h.bMT(3,1,"SETTINGS.TITLE")," "))}function Pt(nt,Me){1&nt&&(h.j41(0,"div",16)(1,"h3"),h.EFF(2),h.nI1(3,"translate"),h.k0s(),h.j41(4,"p"),h.EFF(5),h.nI1(6,"translate"),h.k0s()()),2&nt&&(h.R7$(2),h.SpI(" ",h.bMT(3,2,"SETTINGS.SELECT_OPTIONS")," "),h.R7$(3),h.SpI(" ",h.bMT(6,4,"SETTINGS.CHOSE_SECTION")," "))}function ot(nt,Me){if(1&nt&&h.DNE(0,z,5,8)(1,Fe,5,3)(2,Pt,7,6),2&nt){let Z;const me=h.XpG();h.vxM(0,"billing"===(Z=me.activeSection())?0:"settings"===Z?1:2)}}function Vt(nt,Me){1&nt&&(h.j41(0,"div",11)(1,"p"),h.EFF(2),h.nI1(3,"translate"),h.k0s()()),2&nt&&(h.R7$(2),h.SpI(" ",h.bMT(3,1,"COMMON.NO_DATA")," "))}function vt(nt,Me){1&nt&&(h.j41(0,"div",11)(1,"p"),h.EFF(2),h.nI1(3,"translate"),h.k0s()()),2&nt&&(h.R7$(2),h.SpI(" ",h.bMT(3,1,"COMMON.LOAD_END")," "))}let st=(()=>{class nt{constructor(){this.stripeBillingService=(0,h.WQX)(ge.aT),this.toastr=(0,h.WQX)(k.tw),this.translate=(0,h.WQX)(P.c$),this.modalService=(0,h.WQX)(H.Bq),this.userName=(0,h.hFB)(""),this.userIsPro=(0,h.hFB)(!1),this.logout=(0,h.CGW)(),this.menuItems=[{id:"billing",label:"PROFILE_CONFIG.MENU_SIDE.BILLING",icon:"fa-credit-card"},{id:"settings",label:"PROFILE_CONFIG.MENU_SIDE.SETTINGS",icon:"fa-cog"},{id:"logout",label:"PROFILE_CONFIG.MENU_SIDE.LOGOUT",icon:"fa-sign-out-alt"}],this.activeSection=(0,h.vPA)("billing"),this.invoices=(0,h.vPA)([]),this.subscriptionStatus=(0,h.vPA)(null),this.requestState=(0,h.vPA)("no-result")}ngOnInit(){this.fetchInitialData()}fetchInitialData(){var Z=this;return(0,G.A)(function*(){console.log("Starting fetch..."),Z.requestState.set("starting");try{console.log("Loading..."),Z.requestState.set("loading");const[me,ke]=yield Promise.all([(0,ae._)(Z.stripeBillingService.getUserInvoices()),(0,ae._)(Z.stripeBillingService.getSubscriptionStatus())]);console.log("Responses:",{invoicesResponse:me,statusResponse:ke}),me&&Z.invoices.set(me),ke&&Z.subscriptionStatus.set(ke),console.log("Success"),Z.requestState.set("success")}catch(me){console.error("Error fetching billing data:",me),Z.requestState.set("error")}finally{console.log("Finalized"),Z.requestState.set("success")}})()}setActiveSection(Z){"logout"!==Z?this.activeSection.set(Z):this.showLogoutConfirmation()}refreshData(){this.fetchInitialData()}showLogoutConfirmation(){this.modalService.open(K,{centered:!0,backdrop:"static"}).result.then(me=>{"logout"===me&&this.logout.emit()}).catch(()=>{})}static{this.\u0275fac=function(me){return new(me||nt)}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-profile-config"]],inputs:{userName:[h.Mj6.SignalBased,"userName"],userIsPro:[h.Mj6.SignalBased,"userIsPro"]},outputs:{logout:"logout"},standalone:!0,features:[h.aNF],decls:17,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-3","p-3","border-end"],[1,"mb-4"],[1,"list-group"],[1,"list-group-item","list-group-item-action","d-flex","align-items-center","gap-3","p-2",3,"active"],[1,"col-md-9"],[1,"list-group-item","list-group-item-action","d-flex","align-items-center","gap-3","p-2",3,"click"],[1,"p-1","text-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"p-4","text-center"],[1,"alert","alert-danger","m-3"],[1,"btn","btn-link",3,"click"],[1,"p-0"],[3,"userName","userIsPro","invoices","subscriptionStatus","isLoading"],[1,"p-1"]],template:function(me,ke){if(1&me&&(h.j41(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h4",3),h.EFF(5),h.nI1(6,"translate"),h.k0s(),h.j41(7,"div",4),h.Z7z(8,ve,4,8,"button",5,te),h.k0s()(),h.j41(10,"div",6),h.DNE(11,Ce,4,0)(12,Be,4,0)(13,Ne,6,6)(14,ot,3,1)(15,Vt,4,3)(16,vt,4,3),h.k0s()()()()),2&me){let dt;h.R7$(5),h.JRh(h.bMT(6,2,"NAV.SETTINGS")),h.R7$(3),h.Dyx(ke.menuItems),h.R7$(3),h.vxM(11,"starting"===(dt=ke.requestState())?11:"loading"===dt?12:"error"===dt?13:"success"===dt?14:"no-result"===dt?15:16)}},dependencies:[M.MD,ut,T,P.h,P.D9]})}}return nt})();const Ft=["profileConfigModal"],$e=["profileConfigOffcanvas"];function Xe(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"button",22),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.navigateTo(ke.appRoutes().UPGRADE))}),h.EFF(1),h.nI1(2,"translate"),h.k0s()}2&nt&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"NAV.UPGRADE")," "))}function kt(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"button",22),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.navigateTo(ke.appRoutes().CREATE))}),h.EFF(1),h.nI1(2,"translate"),h.k0s()}2&nt&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"NAV.CREATE")," "))}function cn(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"div",23)(1,"div",24)(2,"button",25),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.closeModal())}),h.k0s()(),h.j41(3,"div",26)(4,"app-profile-config",27),h.bIt("launchComponent",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.openModal())})("logout",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.onLogout())}),h.k0s()()()}if(2&nt){const Z=h.XpG();h.R7$(4),h.Y8G("userName",Z.userName())("userIsPro",Z.userIsPro())}}function rn(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"div",28)(1,"div",29)(2,"button",30),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.closeOffcanvas())}),h.k0s()(),h.j41(3,"div",31)(4,"app-profile-config",32),h.bIt("launchComponent",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.openOffCanvas())})("logout",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.onLogout())}),h.k0s()()()}}let gn=(()=>{class nt{constructor(Z,me,ke){this.router=Z,this.modalService=me,this.offcanvasService=ke,this.userName=(0,h.hFB)(""),this.logout=(0,h.CGW)(),this.userIsPro=(0,h.hFB)(!1),this.profileConfigModal=(0,h.ebz)("profileConfigModal"),this.profileConfigOffcanvas=(0,h.ebz)("profileConfigOffcanvas"),this.appRoutes=(0,h.vPA)(l.S),this.isMenuCollapsed=!0,this.toggleSidebar=(0,h.CGW)(),this.navigateTo=(dt,Lt)=>{this.router.navigate([dt],Lt),this.isMenuCollapsed=!0},this.modalRef=null,this.offcanvasRef=null}onLogout(){this.closeModal(),this.closeOffcanvas(),this.logout.emit()}openModal(){const Z=this.modalService.open(this.profileConfigModal(),{fullscreen:!0,keyboard:!0,backdrop:"static",centered:!0,animation:!0});return this.modalRef=Z,this.isMenuCollapsed=!0,Z}openOffCanvas(){this.offcanvasRef&&this.offcanvasRef.dismiss();const Z=this.offcanvasService.open(this.profileConfigOffcanvas(),{position:"bottom",backdrop:"static"});return this.offcanvasRef=Z,Z}closeModal(){this.modalRef&&(this.modalRef.close(),this.modalRef=null)}closeOffcanvas(){this.offcanvasRef&&(this.offcanvasRef.dismiss(),this.offcanvasRef=null)}static{this.\u0275fac=function(me){return new(me||nt)(h.rXU(X.Ix),h.rXU(H.Bq),h.rXU(H.RS))}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-private-navbar"]],viewQuery:function(me,ke){1&me&&(h.wEZ(ke.profileConfigModal,Ft,5),h.wEZ(ke.profileConfigOffcanvas,$e,5)),2&me&&h.NyB(2)},inputs:{userName:[h.Mj6.SignalBased,"userName"],userIsPro:[h.Mj6.SignalBased,"userIsPro"]},outputs:{logout:"logout",toggleSidebar:"toggleSidebar"},standalone:!0,features:[h.aNF],decls:32,vars:7,consts:[["profileConfigModal",""],["profileConfigOffcanvas",""],[1,"navbar","fixed-top","navbar-expand-md","bg-body-tertiary"],[1,"container-fluid"],[1,"d-flex","align-items-center"],[1,"btn","btn-link","me-2",3,"click"],[1,"fas","fa-bars"],[1,"position-absolute","start-50","translate-middle-x","d-none","d-md-block"],[1,"btn","navbar-brand",3,"click"],[1,"m-0","rainbow-text","text-lowercase","heading-alt"],[1,"d-md-none","mx-auto"],[1,"m-0","rainbow-text","text-lowercase"],["type","button",1,"navbar-toggler",3,"click"],[1,"fa-solid","fa-hamsa","nav-icon"],["id","navbarText",1,"collapse","navbar-collapse",3,"ngbCollapse"],[1,"navbar-nav","me-auto","mb-lg-0"],[1,"nav-item","btn-nav"],[1,"navbar-text","d-flex","align-items-center","px-2"],[1,"btn","nav-link",3,"click"],[1,"vr","mx-2"],[1,"navbar-text","d-flex","align-items-center"],[1,"btn","btn-primary"],[1,"btn","btn-primary",3,"click"],[1,"modal-content"],[1,"modal-header","d-flex","justify-content-between","align-items-center"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","m-3"],[3,"launchComponent","logout","userName","userIsPro"],[1,"offcanvas-content"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close",3,"click"],[1,"offcanvas-body","m-3"],[3,"launchComponent","logout"]],template:function(me,ke){if(1&me){const dt=h.RV6();h.j41(0,"nav",2)(1,"div",3)(2,"div",4)(3,"button",5),h.bIt("click",function(){return h.eBV(dt),h.Njj(ke.toggleSidebar.emit())}),h.nrm(4,"i",6),h.k0s()(),h.j41(5,"div",7)(6,"button",8),h.bIt("click",function(){return h.eBV(dt),h.Njj(ke.navigateTo(ke.appRoutes().DASH))}),h.j41(7,"h1",9),h.EFF(8,"kwalhia"),h.k0s()()(),h.j41(9,"div",10)(10,"button",8),h.bIt("click",function(){return h.eBV(dt),h.Njj(ke.navigateTo(ke.appRoutes().DASH))}),h.j41(11,"h1",11),h.EFF(12,"kwalhia"),h.k0s()()(),h.j41(13,"button",12),h.bIt("click",function(){return h.eBV(dt),h.Njj(ke.isMenuCollapsed=!ke.isMenuCollapsed)}),h.nrm(14,"i",13),h.k0s(),h.j41(15,"div",14)(16,"ul",15),h.nrm(17,"li",16),h.k0s(),h.j41(18,"div",17)(19,"span")(20,"button",18),h.bIt("click",function(){return h.eBV(dt),h.Njj(ke.openModal())}),h.EFF(21),h.nI1(22,"translate"),h.k0s()(),h.nrm(23,"div",19)(24,"app-theme-toggle"),h.k0s(),h.j41(25,"span",20),h.DNE(26,Xe,3,3,"button",21)(27,kt,3,3),h.k0s()()()(),h.DNE(28,cn,5,2,"ng-template",null,0,h.C5r)(30,rn,5,0,"ng-template",null,1,h.C5r)}2&me&&(h.R7$(13),h.BMQ("aria-expanded",!ke.isMenuCollapsed),h.R7$(2),h.Y8G("ngbCollapse",ke.isMenuCollapsed),h.R7$(6),h.Lme(" ",h.bMT(22,5,"NAV.HI")," ",ke.userName()," "),h.R7$(5),h.vxM(26,!1===ke.userIsPro()?26:27))},dependencies:[W,H.HC,H.$G,P.h,P.D9,st],styles:["h1[_ngcontent-%COMP%]{font-size:var(--font-size-h3);color:var(--text);letter-spacing:5px}.bg-body-tertiary[_ngcontent-%COMP%]{background-color:var(--bg)!important}.rainbow-text[_ngcontent-%COMP%]{background:linear-gradient(to right,var(--text) 20%,color-mix(in srgb,var(--text) 80%,transparent) 40%,color-mix(in srgb,var(--text) 60%,transparent) 60%,var(--text) 80%);background-size:200% auto;color:transparent;-webkit-background-clip:text;background-clip:text;animation:_ngcontent-%COMP%_shine 8s ease-in-out infinite;opacity:.9}@keyframes _ngcontent-%COMP%_shine{0%{background-position:-200% center}to{background-position:200% center}}"]})}}return nt})(),Xt=(()=>{class nt{static{this.\u0275fac=function(me){return new(me||nt)}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-footer"]],standalone:!0,features:[h.aNF],decls:10,vars:3,consts:[[1,"py-3","my-4"],[1,"text-center","text-body-secondary"],[1,"nav","justify-content-center","pb-3","mb-3"],[1,"nav-item"],["href","#",1,"nav-link","text-body-secondary"]],template:function(me,ke){1&me&&(h.j41(0,"footer",0)(1,"p",1),h.EFF(2),h.nI1(3,"translate"),h.nrm(4,"br"),h.k0s(),h.nrm(5,"hr"),h.j41(6,"ul",2)(7,"li",3)(8,"a",4),h.EFF(9,"Symbolic transferences of isomorphic light "),h.k0s()()()()),2&me&&(h.R7$(2),h.JRh(h.bMT(3,1,"FOOTER.RIGHTS")))},dependencies:[P.h,P.D9],styles:["footer[_ngcontent-%COMP%]{position:relative}"]})}}return nt})(),Ot=(()=>{class nt{constructor(){this.id="",this.placeholder="",this.control=new x.MJ(""),this.showPassword=!1,this.onChange=()=>{},this.onTouched=()=>{},this.control.valueChanges.subscribe(Z=>{this.onChange(Z)})}togglePasswordVisibility(){this.showPassword=!this.showPassword}writeValue(Z){this.control.setValue(Z,{emitEvent:!1})}registerOnChange(Z){this.onChange=Z}registerOnTouched(Z){this.onTouched=Z}setDisabledState(Z){Z?this.control.disable():this.control.enable()}static{this.\u0275fac=function(me){return new(me||nt)}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-password-input"]],inputs:{id:"id",placeholder:"placeholder"},standalone:!0,features:[h.Jv_([{provide:x.kq,useExisting:(0,h.Rfq)(()=>nt),multi:!0}]),h.aNF],decls:4,vars:8,consts:[[1,"position-relative"],[1,"form-control",3,"type","id","formControl","placeholder"],["type","button",1,"btn","btn-link","position-absolute","top-50","end-0","translate-middle-y","text-muted","pe-3",2,"border","none","background","none",3,"click"],[1,"fas"]],template:function(me,ke){1&me&&(h.j41(0,"div",0),h.nrm(1,"input",1),h.j41(2,"button",2),h.bIt("click",function(){return ke.togglePasswordVisibility()}),h.nrm(3,"i",3),h.k0s()()),2&me&&(h.R7$(),h.Y8G("type",ke.showPassword?"text":"password")("id",ke.id)("formControl",ke.control)("placeholder",ke.placeholder),h.R7$(2),h.AVh("fa-eye",ke.showPassword)("fa-eye-slash",!ke.showPassword))},dependencies:[M.MD,x.X1,x.me,x.BC,x.l_],encapsulation:2})}}return nt})();var It=S(6101),an=S(9242),Fn=S(6697),Xn=S(5964),Zn=S(5558),Hr=S(9437),Hn=S(8810),Dn=S(1339);let Un=(()=>{class nt{constructor(Z,me,ke,dt){this.fb=Z,this.router=me,this.authService=ke,this.toastr=dt,this.token=(0,h.hFB)(null),this.resetForm=this.fb.group({newPassword:["",[x.k0.required,x.k0.minLength(8)]],confirmPassword:["",x.k0.required]},{validator:this.passwordMatchValidator})}ngOnInit(){this.token()||this.router.navigate(["/"])}onSubmit(){if(this.resetForm.valid){const Z=this.token();if(Z){const me=this.resetForm.get("newPassword")?.value;this.authService.resetPassword(Z,me).subscribe({next:()=>{this.toastr.success("","Password reset successful. You may login"),this.navigateToHome()},error:ke=>{alert("Password reset failed: "+(ke.message||"Unknown error"))}})}else alert("Invalid or missing reset token."),this.navigateToHome()}}navigateToHome(){this.router.navigate(["/"],{queryParams:{}}).then(()=>{window.location.reload()})}passwordMatchValidator(Z){const me=Z.get("newPassword")?.value,ke=Z.get("confirmPassword")?.value;return me===ke?null:{mismatch:!0}}static{this.\u0275fac=function(me){return new(me||nt)(h.rXU(x.ok),h.rXU(X.Ix),h.rXU(Dn.u),h.rXU(k.tw))}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-reset-password"]],inputs:{token:[h.Mj6.SignalBased,"token"]},standalone:!0,features:[h.aNF],decls:14,vars:2,consts:[[1,"container","mt-5","pb-2"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","newPassword",1,"form-label"],["type","password","id","newPassword","formControlName","newPassword",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(me,ke){1&me&&(h.j41(0,"div",0)(1,"h3"),h.EFF(2,"Reset Password"),h.k0s(),h.j41(3,"form",1),h.bIt("ngSubmit",function(){return ke.onSubmit()}),h.j41(4,"div",2)(5,"label",3),h.EFF(6,"New Password"),h.k0s(),h.nrm(7,"input",4),h.k0s(),h.j41(8,"div",2)(9,"label",5),h.EFF(10,"Confirm Password"),h.k0s(),h.nrm(11,"input",6),h.k0s(),h.j41(12,"button",7),h.EFF(13,"Reset Password"),h.k0s()()()),2&me&&(h.R7$(3),h.Y8G("formGroup",ke.resetForm),h.R7$(9),h.Y8G("disabled",!ke.resetForm.valid))},dependencies:[M.MD,x.X1,x.qT,x.me,x.BC,x.cb,x.j4,x.JD]})}}return nt})();function Pi(nt,Me){1&nt&&(h.j41(0,"div",0),h.EFF(1),h.nI1(2,"translate"),h.k0s()),2&nt&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"AUTH.MESSAGES.REGISTRATION_SUCCESS")," "))}function Qi(nt,Me){if(1&nt&&h.nrm(0,"app-reset-password",1),2&nt){const Z=h.XpG();h.Y8G("token",Z.resetToken())}}function Rr(nt,Me){1&nt&&(h.nrm(0,"span",20),h.EFF(1),h.nI1(2,"translate")),2&nt&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"COMMON.LOADING")," "))}function ii(nt,Me){1&nt&&(h.EFF(0),h.nI1(1,"translate")),2&nt&&h.SpI(" ",h.bMT(1,1,"AUTH.BUTTONS.LOGIN")," ")}function yi(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"form",11),h.bIt("ngSubmit",function(){h.eBV(Z);const ke=h.XpG(2);return h.Njj(ke.onLogin())}),h.j41(1,"div",12)(2,"label",13),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.nrm(5,"input",14),h.k0s(),h.j41(6,"div",12)(7,"label",15),h.EFF(8),h.nI1(9,"translate"),h.k0s(),h.nrm(10,"app-password-input",16),h.k0s(),h.j41(11,"div",17)(12,"button",18),h.DNE(13,Rr,3,3)(14,ii,2,3),h.k0s(),h.j41(15,"button",19),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG(2);return h.Njj(ke.onForgotPassword())}),h.EFF(16),h.nI1(17,"translate"),h.k0s()()()}if(2&nt){let Z;const me=h.XpG(2);h.Y8G("formGroup",me.loginForm),h.R7$(3),h.JRh(h.bMT(4,7,"AUTH.EMAIL")),h.R7$(5),h.JRh(h.bMT(9,9,"AUTH.PASSWORD")),h.R7$(4),h.Y8G("disabled",!me.loginForm.valid||me.buttonLoading()),h.R7$(),h.vxM(13,me.buttonLoading()?13:14),h.R7$(2),h.Y8G("disabled",!(null!=(Z=me.loginForm.get("email"))&&Z.valid)),h.R7$(),h.SpI(" ",h.bMT(17,11,"AUTH.FORGOT_PASSWORD")," ")}}function uo(nt,Me){}function Yn(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"button",6),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.activeForm.set("login"))}),h.EFF(5),h.nI1(6,"translate"),h.k0s(),h.j41(7,"button",7),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.activeForm.set("register"))}),h.EFF(8),h.nI1(9,"translate"),h.k0s()()(),h.DNE(10,yi,18,13,"form",8)(11,uo,0,0),h.k0s(),h.nrm(12,"hr"),h.j41(13,"div",9),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG();return h.Njj(ke.showTermsWarning())}),h.nrm(14,"div",10),h.k0s()()}if(2&nt){const Z=h.XpG();h.R7$(4),h.AVh("btn-primary","login"===Z.activeForm())("btn-outline-primary","login"!==Z.activeForm()),h.R7$(),h.SpI(" ",h.bMT(6,11,"AUTH.BUTTONS.LOGIN")," "),h.R7$(2),h.AVh("btn-primary","register"===Z.activeForm())("btn-outline-primary","register"!==Z.activeForm()),h.R7$(),h.SpI(" ",h.bMT(9,13,"AUTH.BUTTONS.REGISTER")," "),h.R7$(2),h.vxM(10,"login"===Z.activeForm()?10:11)}}let cr=(()=>{class nt{constructor(Z,me,ke,dt,Lt,wn,li,Bi){this.recaptchaV3Service=Z,this.recaptchaManager=me,this.authService=ke,this.router=dt,this.toastr=Lt,this.route=wn,this.googleAuthService=li,this.translate=Bi,this.fb=new x.ok,this.activeForm=(0,h.vPA)("login"),this.initialEmail=(0,h.hFB)(),this.initialTab=(0,h.hFB)(),this.jwtToken=(0,h.vPA)(""),this.buttonLoading=(0,h.vPA)(!1),this.registrationSuccess=(0,h.vPA)(!1),this.termsAccepted=(0,h.vPA)(!1),this.resetToken=(0,h.vPA)(null),this.registerFormStatus=(0,h.vPA)("INVALID"),this.loginFormStatus=(0,h.vPA)("INVALID"),this.loginForm=this.fb.group({email:["",[x.k0.required,(0,It.R7)()]],password:["",[x.k0.required,x.k0.minLength(8)]]}),this.registerForm=this.fb.group({name:["",{validators:[x.k0.required,(0,It.X1)("upper")]}],lastname:["",{validators:[x.k0.required,(0,It.X1)("upper")]}],email:["",{validators:[x.k0.required,(0,It.R7)()]}],birthdate:["",[x.k0.required]],password:["",[x.k0.required,x.k0.minLength(8)]],confirmPassword:["",[x.k0.required]]},{validators:this.passwordMatchValidator}),this.isRegisterFormValid=(0,h.EWP)(()=>"VALID"===this.registerFormStatus()&&this.termsAccepted()),this.resetPasswordForm=(0,h.vPA)(this.fb.group({token:["",x.k0.required],newPassword:["",x.k0.required]})),this.loginForm.statusChanges.subscribe(fi=>{this.loginFormStatus.set(fi)}),this.registerForm.statusChanges.subscribe(fi=>{this.registerFormStatus.set(fi)}),(0,h.QZP)(()=>{const fr="login"===this.activeForm()||this.termsAccepted();this.googleAuthService.renderGoogleButton("google-btn",fr)})}ngOnInit(){this.googleAuthService.loadGoogleScript().subscribe({next:Z=>{Z&&setTimeout(()=>{this.googleAuthService.renderGoogleButton("google-btn")},300)},error:Z=>{console.error("Failed to load Google Sign-In:",Z)}}),this.route.queryParams.subscribe(Z=>{const me=Z.email,ke=Z.action,dt=Z.token;dt?this.resetToken.set(dt):me&&(this.loginForm.patchValue({email:me}),this.registerForm.patchValue({email:me})),this.activeForm.set("signup"===ke?"register":"login")})}passwordMatchValidator(Z){const me=Z.get("password")?.value,ke=Z.get("confirmPassword")?.value;return me===ke?null:{passwordMismatch:!0}}onLogin(){this.buttonLoading.set(!0),"VALID"===this.loginFormStatus()&&this.recaptchaV3Service.execute("login").pipe((0,Fn.s)(1),(0,Xn.p)(Z=>!!Z||(this.buttonLoading.set(!1),this.toastr.error(this.translate.instant("AUTH.MESSAGES.LOGIN_FAILED")),!1)),(0,Zn.n)(Z=>{const me={email:this.loginForm.get("email")?.value||"",password:this.loginForm.get("password")?.value||"",recaptchaToken:Z};return this.authService.login(me)}),(0,Hr.W)(Z=>(console.error("Login error:",Z),this.toastr.error(this.translate.instant("AUTH.MESSAGES.LOGIN_FAILED")),this.buttonLoading.set(!1),(0,Hn.$)(()=>Z)))).subscribe({next:Z=>{console.log("Login response:",Z),Z.accessToken?(this.handleSuccessfulLogin(Z.accessToken),this.buttonLoading.set(!1)):(this.buttonLoading.set(!1),this.toastr.error("Login failed"))},error:Z=>{console.error("Subscription error:",Z)}})}handleSuccessfulLogin(Z){this.jwtToken.set(Z),localStorage.setItem("jwt",Z),console.log("JWT token stored:",Z),this.authService.updateAuthState(),this.recaptchaManager.hideBadge(),this.router.navigate([l.S.DASH]),this.toastr.success("","Login succesfull")}onRegister(){this.buttonLoading.set(!0),this.isRegisterFormValid()&&this.recaptchaV3Service.execute("register").subscribe({next:Z=>{const me=this.registerForm.value;this.authService.register({name:me.name||"",lastname:me.lastname||"",email:me.email||"",birthdate:me.birthdate||"",password:me.password||"",recaptchaToken:Z}).subscribe({next:()=>{this.registrationSuccess.set(!0),this.recaptchaManager.hideBadge(),this.toastr.success(this.translate.instant("AUTH.MESSAGES.REGISTRATION_SUCCESS")),this.buttonLoading.set(!1)},error:dt=>{this.buttonLoading.set(!1),this.toastr.error(dt.error?.message||dt.message||"Registration failed","Error")}})},error:Z=>{console.error("reCAPTCHA error:",Z),this.toastr.error("ReCAPTCHA verification failed","Error"),this.buttonLoading.set(!1)}})}onTermsChange(Z){const me=Z.target;this.termsAccepted.set(me.checked),me.checked&&this.googleAuthService.renderGoogleButton("google-btn")}isGoogleButtonEnabled(){return"login"===this.activeForm()||"register"===this.activeForm()&&this.termsAccepted()}renderGoogleButton(){setTimeout(()=>{const Z=document.getElementById("google-btn");Z&&(Z.innerHTML="",this.googleAuthService.renderGoogleButton("google-btn"))},100)}handleGoogleClick(Z){Z.preventDefault(),Z.stopPropagation()}showTermsWarning(){"register"===this.activeForm()&&!this.termsAccepted()&&this.toastr.warning("Please accept terms and conditions for Sign-in","Action Required")}onForgotPassword(){const Z=this.loginForm.get("email")?.value;Z?this.authService.forgotPassword(Z).subscribe({next:()=>alert("If an account with that email exists, a password reset link has been sent."),error:me=>alert("Failed to send password reset email: "+(me.message||"Unknown error"))}):alert("Please enter your email in the login form first.")}onResetPassword(){if(this.resetPasswordForm().valid){const{token:Z,newPassword:me}=this.resetPasswordForm().value;this.authService.resetPassword(Z,me).subscribe({next:()=>{this.toastr.success("","You can now log with your new password")},error:ke=>alert("Password reset failed: "+(ke.message||"Unknown error"))})}}static{this.\u0275fac=function(me){return new(me||nt)(h.rXU(an.ob),h.rXU(ge.gZ),h.rXU(Dn.u),h.rXU(X.Ix),h.rXU(k.tw),h.rXU(X.nX),h.rXU(ge.ni),h.rXU(P.c$))}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-auth"]],inputs:{initialEmail:[h.Mj6.SignalBased,"initialEmail"],initialTab:[h.Mj6.SignalBased,"initialTab"]},standalone:!0,features:[h.aNF],decls:3,vars:1,consts:[["role","alert",1,"alert","alert-success"],[3,"token"],[1,"card"],[1,"card-body"],[1,"d-flex","justify-content-center","mb-4"],["role","group",1,"btn-group"],[1,"btn",3,"click"],[1,"btn","col-12",3,"click"],[3,"formGroup"],[1,"text-center",3,"click"],["id","google-btn",1,"d-flex","justify-content-center","pb-2","mb-2"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","login-email",1,"form-label"],["type","email","id","login-email","formControlName","email",1,"form-control"],["for","login-password",1,"form-label"],["id","login-password","formControlName","password","placeholder",""],[1,"d-flex","justify-content-between","align-items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-link",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(me,ke){1&me&&h.DNE(0,Pi,3,3,"div",0)(1,Qi,1,1)(2,Yn,15,15),2&me&&h.vxM(0,ke.registrationSuccess()?0:ke.resetToken()?1:2)},dependencies:[M.MD,x.X1,x.qT,x.me,x.BC,x.cb,x.j4,x.JD,x.YN,H.Pv,Ot,an.tA,Un,P.h,P.D9]})}}return nt})(),mr=(()=>{class nt{constructor(){this.roleInfo=h.hFB.required(),this.defaultAvatarUrl="assets/img/chatbot-roles-profiles/zenia.jpg"}static{this.\u0275fac=function(me){return new(me||nt)}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-character-avatar"]],inputs:{roleInfo:[h.Mj6.SignalBased,"roleInfo"]},standalone:!0,features:[h.aNF],decls:8,vars:4,consts:[[1,"container","d-flex","flex-column","align-items-center","mx-2","py-2"],[1,"avatar-wrapper"],[1,"avatar-container","rounded-circle","overflow-hidden","mb-3"],[1,"img-fluid",3,"src","alt"],[1,"text-center","my-3","fade-in-delay"],[1,"text-center","fade-in-delay","text-muted"]],template:function(me,ke){1&me&&(h.j41(0,"div",0)(1,"div",1)(2,"div",2),h.nrm(3,"img",3),h.k0s()(),h.j41(4,"h5",4),h.EFF(5),h.k0s(),h.j41(6,"p",5),h.EFF(7),h.k0s()()),2&me&&(h.R7$(3),h.Y8G("src",ke.roleInfo().avatarPic||ke.defaultAvatarUrl,h.B4B)("alt",ke.roleInfo().name),h.R7$(2),h.JRh(ke.roleInfo().name),h.R7$(2),h.JRh(ke.roleInfo().description))},styles:[".avatar-wrapper[_ngcontent-%COMP%]{width:150px;height:150px;animation:_ngcontent-%COMP%_scaleIn .8s cubic-bezier(.17,.67,.45,1.32) forwards}.avatar-container[_ngcontent-%COMP%]{width:100%;height:100%;opacity:0;animation:_ngcontent-%COMP%_fadeIn .8s ease-in forwards}.fade-in-delay[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn .8s ease-in forwards;animation-delay:.4s}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.img-fluid[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}"]})}}return nt})();const{entries:Si,setPrototypeOf:Ir,isFrozen:Kr,getPrototypeOf:gr,getOwnPropertyDescriptor:Zr}=Object;let{freeze:ls,seal:ar,create:Rt}=Object,{apply:zt,construct:at}=typeof Reflect<"u"&&Reflect;ls||(ls=function(Me){return Me}),ar||(ar=function(Me){return Me}),zt||(zt=function(Me,Z,me){return Me.apply(Z,me)}),at||(at=function(Me,Z){return new Me(...Z)});const St=zn(Array.prototype.forEach),fn=zn(Array.prototype.pop),vn=zn(Array.prototype.push),kn=zn(String.prototype.toLowerCase),zi=zn(String.prototype.toString),oi=zn(String.prototype.match),gi=zn(String.prototype.replace),Nr=zn(String.prototype.indexOf),$n=zn(String.prototype.trim),hr=zn(Object.prototype.hasOwnProperty),cs=zn(RegExp.prototype.test),Qr=function Kn(nt){return function(){for(var Me=arguments.length,Z=new Array(Me),me=0;me<Me;me++)Z[me]=arguments[me];return at(nt,Z)}}(TypeError);function zn(nt){return function(Me){for(var Z=arguments.length,me=new Array(Z>1?Z-1:0),ke=1;ke<Z;ke++)me[ke-1]=arguments[ke];return zt(nt,Me,me)}}function xi(nt,Me){let Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kn;Ir&&Ir(nt,null);let me=Me.length;for(;me--;){let ke=Me[me];if("string"==typeof ke){const dt=Z(ke);dt!==ke&&(Kr(Me)||(Me[me]=dt),ke=dt)}nt[ke]=!0}return nt}function Sr(nt){for(let Me=0;Me<nt.length;Me++)hr(nt,Me)||(nt[Me]=null);return nt}function us(nt){const Me=Rt(null);for(const[Z,me]of Si(nt))hr(nt,Z)&&(Me[Z]=Array.isArray(me)?Sr(me):me&&"object"==typeof me&&me.constructor===Object?us(me):me);return Me}function Fs(nt,Me){for(;null!==nt;){const me=Zr(nt,Me);if(me){if(me.get)return zn(me.get);if("function"==typeof me.value)return zn(me.value)}nt=gr(nt)}return function Z(){return null}}const hs=ls(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ir=ls(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ks=ls(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Mo=ls(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),As=ls(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Us=ls(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),vs=ls(["#text"]),ho=ls(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Qe=ls(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),L=ls(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),$=ls(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ue=ar(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ze=ar(/<%[\w\W]*|[\w\W]*%>/gm),pt=ar(/\${[\w\W]*}/gm),en=ar(/^data-[\-\w.\u00B7-\uFFFF]/),pn=ar(/^aria-[\-\w]+$/),Vn=ar(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ai=ar(/^(?:\w+script|data):/i),ur=ar(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ei=ar(/^html$/i),Yi=ar(/^[a-z][.\w]*(-[.\w]+)+$/i);var ns=Object.freeze({__proto__:null,MUSTACHE_EXPR:ue,ERB_EXPR:Ze,TMPLIT_EXPR:pt,DATA_ATTR:en,ARIA_ATTR:pn,IS_ALLOWED_URI:Vn,IS_SCRIPT_OR_DATA:ai,ATTR_WHITESPACE:ur,DOCTYPE_NAME:Ei,CUSTOM_ELEMENT:Yi});var Is=function Tr(){let nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const Me=Zi=>Tr(Zi);if(Me.version="3.1.7",Me.removed=[],!nt||!nt.document||9!==nt.document.nodeType)return Me.isSupported=!1,Me;let{document:Z}=nt;const me=Z,ke=me.currentScript,{DocumentFragment:dt,HTMLTemplateElement:Lt,Node:wn,Element:li,NodeFilter:Bi,NamedNodeMap:fi=nt.NamedNodeMap||nt.MozNamedAttrMap,HTMLFormElement:fr,DOMParser:Ns,trustedTypes:Gs}=nt,Ts=li.prototype,fa=Fs(Ts,"cloneNode"),Ws=Fs(Ts,"remove"),yr=Fs(Ts,"nextSibling"),Rc=Fs(Ts,"childNodes"),Mn=Fs(Ts,"parentNode");if("function"==typeof Lt){const Zi=Z.createElement("template");Zi.content&&Zi.content.ownerDocument&&(Z=Zi.content.ownerDocument)}let Ti,tl="";const{implementation:Ga,createNodeIterator:Qa,createDocumentFragment:jl,getElementsByTagName:gl}=Z,{importNode:Xl}=me;let bo={};Me.isSupported="function"==typeof Si&&"function"==typeof Mn&&Ga&&void 0!==Ga.createHTMLDocument;const{MUSTACHE_EXPR:Aa,ERB_EXPR:mc,TMPLIT_EXPR:De,DATA_ATTR:I,ARIA_ATTR:F,IS_SCRIPT_OR_DATA:re,ATTR_WHITESPACE:Te,CUSTOM_ELEMENT:et}=ns;let{IS_ALLOWED_URI:mt}=ns,Mt=null;const Kt=xi({},[...hs,...ir,...Ks,...As,...vs]);let Yt=null;const Nn=xi({},[...ho,...Qe,...L,...$]);let A=Object.seal(Rt(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Se=null,ee=null,fe=!0,it=!0,Ht=!1,Wt=!0,Wn=!1,dr=!0,qi=!1,ps=!1,ji=!1,wr=!1,vi=!1,lt=!1,kr=!0,Sn=!1,Or=!0,is=!1,ys={},Gn=null;const Mi=xi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ci=null;const Ui=xi({},["audio","video","img","source","image","track"]);let Fr=null;const Di=xi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),lo="http://www.w3.org/1998/Math/MathML",sa="http://www.w3.org/2000/svg",Yr="http://www.w3.org/1999/xhtml";let Lr=Yr,Il=!1,po=null;const Jo=xi({},[lo,sa,Yr],zi);let xo=null;const Co=["application/xhtml+xml","text/html"];let qs=null,Wa=null;const br=Z.createElement("form"),au=function(Gt){return Gt instanceof RegExp||Gt instanceof Function},Rl=function(){let Gt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Wa||Wa!==Gt){if((!Gt||"object"!=typeof Gt)&&(Gt={}),Gt=us(Gt),xo=-1===Co.indexOf(Gt.PARSER_MEDIA_TYPE)?"text/html":Gt.PARSER_MEDIA_TYPE,qs="application/xhtml+xml"===xo?zi:kn,Mt=hr(Gt,"ALLOWED_TAGS")?xi({},Gt.ALLOWED_TAGS,qs):Kt,Yt=hr(Gt,"ALLOWED_ATTR")?xi({},Gt.ALLOWED_ATTR,qs):Nn,po=hr(Gt,"ALLOWED_NAMESPACES")?xi({},Gt.ALLOWED_NAMESPACES,zi):Jo,Fr=hr(Gt,"ADD_URI_SAFE_ATTR")?xi(us(Di),Gt.ADD_URI_SAFE_ATTR,qs):Di,ci=hr(Gt,"ADD_DATA_URI_TAGS")?xi(us(Ui),Gt.ADD_DATA_URI_TAGS,qs):Ui,Gn=hr(Gt,"FORBID_CONTENTS")?xi({},Gt.FORBID_CONTENTS,qs):Mi,Se=hr(Gt,"FORBID_TAGS")?xi({},Gt.FORBID_TAGS,qs):{},ee=hr(Gt,"FORBID_ATTR")?xi({},Gt.FORBID_ATTR,qs):{},ys=!!hr(Gt,"USE_PROFILES")&&Gt.USE_PROFILES,fe=!1!==Gt.ALLOW_ARIA_ATTR,it=!1!==Gt.ALLOW_DATA_ATTR,Ht=Gt.ALLOW_UNKNOWN_PROTOCOLS||!1,Wt=!1!==Gt.ALLOW_SELF_CLOSE_IN_ATTR,Wn=Gt.SAFE_FOR_TEMPLATES||!1,dr=!1!==Gt.SAFE_FOR_XML,qi=Gt.WHOLE_DOCUMENT||!1,wr=Gt.RETURN_DOM||!1,vi=Gt.RETURN_DOM_FRAGMENT||!1,lt=Gt.RETURN_TRUSTED_TYPE||!1,ji=Gt.FORCE_BODY||!1,kr=!1!==Gt.SANITIZE_DOM,Sn=Gt.SANITIZE_NAMED_PROPS||!1,Or=!1!==Gt.KEEP_CONTENT,is=Gt.IN_PLACE||!1,mt=Gt.ALLOWED_URI_REGEXP||Vn,Lr=Gt.NAMESPACE||Yr,A=Gt.CUSTOM_ELEMENT_HANDLING||{},Gt.CUSTOM_ELEMENT_HANDLING&&au(Gt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(A.tagNameCheck=Gt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Gt.CUSTOM_ELEMENT_HANDLING&&au(Gt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(A.attributeNameCheck=Gt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Gt.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof Gt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(A.allowCustomizedBuiltInElements=Gt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Wn&&(it=!1),vi&&(wr=!0),ys&&(Mt=xi({},vs),Yt=[],!0===ys.html&&(xi(Mt,hs),xi(Yt,ho)),!0===ys.svg&&(xi(Mt,ir),xi(Yt,Qe),xi(Yt,$)),!0===ys.svgFilters&&(xi(Mt,Ks),xi(Yt,Qe),xi(Yt,$)),!0===ys.mathMl&&(xi(Mt,As),xi(Yt,L),xi(Yt,$))),Gt.ADD_TAGS&&(Mt===Kt&&(Mt=us(Mt)),xi(Mt,Gt.ADD_TAGS,qs)),Gt.ADD_ATTR&&(Yt===Nn&&(Yt=us(Yt)),xi(Yt,Gt.ADD_ATTR,qs)),Gt.ADD_URI_SAFE_ATTR&&xi(Fr,Gt.ADD_URI_SAFE_ATTR,qs),Gt.FORBID_CONTENTS&&(Gn===Mi&&(Gn=us(Gn)),xi(Gn,Gt.FORBID_CONTENTS,qs)),Or&&(Mt["#text"]=!0),qi&&xi(Mt,["html","head","body"]),Mt.table&&(xi(Mt,["tbody"]),delete Se.tbody),Gt.TRUSTED_TYPES_POLICY){if("function"!=typeof Gt.TRUSTED_TYPES_POLICY.createHTML)throw Qr('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof Gt.TRUSTED_TYPES_POLICY.createScriptURL)throw Qr('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ti=Gt.TRUSTED_TYPES_POLICY,tl=Ti.createHTML("")}else void 0===Ti&&(Ti=function(Me,Z){if("object"!=typeof Me||"function"!=typeof Me.createPolicy)return null;let me=null;const ke="data-tt-policy-suffix";Z&&Z.hasAttribute(ke)&&(me=Z.getAttribute(ke));const dt="dompurify"+(me?"#"+me:"");try{return Me.createPolicy(dt,{createHTML:Lt=>Lt,createScriptURL:Lt=>Lt})}catch{return console.warn("TrustedTypes policy "+dt+" could not be created."),null}}(Gs,ke)),null!==Ti&&"string"==typeof tl&&(tl=Ti.createHTML(""));ls&&ls(Gt),Wa=Gt}},nl=xi({},["mi","mo","mn","ms","mtext"]),gc=xi({},["annotation-xml"]),xr=xi({},["title","style","font","a","script"]),to=xi({},[...ir,...Ks,...Mo]),Sa=xi({},[...As,...Us]),go=function(Gt){vn(Me.removed,{element:Gt});try{Mn(Gt).removeChild(Gt)}catch{Ws(Gt)}},pa=function(Gt,ni){try{vn(Me.removed,{attribute:ni.getAttributeNode(Gt),from:ni})}catch{vn(Me.removed,{attribute:null,from:ni})}if(ni.removeAttribute(Gt),"is"===Gt&&!Yt[Gt])if(wr||vi)try{go(ni)}catch{}else try{ni.setAttribute(Gt,"")}catch{}},vl=function(Gt){let ni=null,Xi=null;if(ji)Gt="<remove></remove>"+Gt;else{const j=oi(Gt,/^[\r\n\t ]+/);Xi=j&&j[0]}"application/xhtml+xml"===xo&&Lr===Yr&&(Gt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Gt+"</body></html>");const vo=Ti?Ti.createHTML(Gt):Gt;if(Lr===Yr)try{ni=(new Ns).parseFromString(vo,xo)}catch{}if(!ni||!ni.documentElement){ni=Ga.createDocument(Lr,"template",null);try{ni.documentElement.innerHTML=Il?tl:vo}catch{}}const D=ni.body||ni.documentElement;return Gt&&Xi&&D.insertBefore(Z.createTextNode(Xi),D.childNodes[0]||null),Lr===Yr?gl.call(ni,qi?"html":"body")[0]:qi?ni.documentElement:D},Wo=function(Gt){return Qa.call(Gt.ownerDocument||Gt,Gt,Bi.SHOW_ELEMENT|Bi.SHOW_COMMENT|Bi.SHOW_TEXT|Bi.SHOW_PROCESSING_INSTRUCTION|Bi.SHOW_CDATA_SECTION,null)},Ya=function(Gt){return Gt instanceof fr&&("string"!=typeof Gt.nodeName||"string"!=typeof Gt.textContent||"function"!=typeof Gt.removeChild||!(Gt.attributes instanceof fi)||"function"!=typeof Gt.removeAttribute||"function"!=typeof Gt.setAttribute||"string"!=typeof Gt.namespaceURI||"function"!=typeof Gt.insertBefore||"function"!=typeof Gt.hasChildNodes)},Nl=function(Gt){return"function"==typeof wn&&Gt instanceof wn},oa=function(Gt,ni,Xi){bo[Gt]&&St(bo[Gt],vo=>{vo.call(Me,ni,Xi,Wa)})},lu=function(Gt){let ni=null;if(oa("beforeSanitizeElements",Gt,null),Ya(Gt))return go(Gt),!0;const Xi=qs(Gt.nodeName);if(oa("uponSanitizeElement",Gt,{tagName:Xi,allowedTags:Mt}),Gt.hasChildNodes()&&!Nl(Gt.firstElementChild)&&cs(/<[/\w]/g,Gt.innerHTML)&&cs(/<[/\w]/g,Gt.textContent)||7===Gt.nodeType||dr&&8===Gt.nodeType&&cs(/<[/\w]/g,Gt.data))return go(Gt),!0;if(!Mt[Xi]||Se[Xi]){if(!Se[Xi]&&ic(Xi)&&(A.tagNameCheck instanceof RegExp&&cs(A.tagNameCheck,Xi)||A.tagNameCheck instanceof Function&&A.tagNameCheck(Xi)))return!1;if(Or&&!Gn[Xi]){const vo=Mn(Gt)||Gt.parentNode,D=Rc(Gt)||Gt.childNodes;if(D&&vo)for(let R=D.length-1;R>=0;--R){const Y=fa(D[R],!0);Y.__removalCount=(Gt.__removalCount||0)+1,vo.insertBefore(Y,yr(Gt))}}return go(Gt),!0}return Gt instanceof li&&!function(Gt){let ni=Mn(Gt);(!ni||!ni.tagName)&&(ni={namespaceURI:Lr,tagName:"template"});const Xi=kn(Gt.tagName),vo=kn(ni.tagName);return!!po[Gt.namespaceURI]&&(Gt.namespaceURI===sa?ni.namespaceURI===Yr?"svg"===Xi:ni.namespaceURI===lo?"svg"===Xi&&("annotation-xml"===vo||nl[vo]):!!to[Xi]:Gt.namespaceURI===lo?ni.namespaceURI===Yr?"math"===Xi:ni.namespaceURI===sa?"math"===Xi&&gc[vo]:!!Sa[Xi]:Gt.namespaceURI===Yr?!(ni.namespaceURI===sa&&!gc[vo]||ni.namespaceURI===lo&&!nl[vo])&&!Sa[Xi]&&(xr[Xi]||!to[Xi]):!("application/xhtml+xml"!==xo||!po[Gt.namespaceURI]))}(Gt)||("noscript"===Xi||"noembed"===Xi||"noframes"===Xi)&&cs(/<\/no(script|embed|frames)/i,Gt.innerHTML)?(go(Gt),!0):(Wn&&3===Gt.nodeType&&(ni=Gt.textContent,St([Aa,mc,De],vo=>{ni=gi(ni,vo," ")}),Gt.textContent!==ni&&(vn(Me.removed,{element:Gt.cloneNode()}),Gt.textContent=ni)),oa("afterSanitizeElements",Gt,null),!1)},cu=function(Gt,ni,Xi){if(kr&&("id"===ni||"name"===ni)&&(Xi in Z||Xi in br))return!1;if((!it||ee[ni]||!cs(I,ni))&&(!fe||!cs(F,ni)))if(!Yt[ni]||ee[ni]){if(!(ic(Gt)&&(A.tagNameCheck instanceof RegExp&&cs(A.tagNameCheck,Gt)||A.tagNameCheck instanceof Function&&A.tagNameCheck(Gt))&&(A.attributeNameCheck instanceof RegExp&&cs(A.attributeNameCheck,ni)||A.attributeNameCheck instanceof Function&&A.attributeNameCheck(ni))||"is"===ni&&A.allowCustomizedBuiltInElements&&(A.tagNameCheck instanceof RegExp&&cs(A.tagNameCheck,Xi)||A.tagNameCheck instanceof Function&&A.tagNameCheck(Xi))))return!1}else if(!Fr[ni]&&!cs(mt,gi(Xi,Te,""))&&("src"!==ni&&"xlink:href"!==ni&&"href"!==ni||"script"===Gt||0!==Nr(Xi,"data:")||!ci[Gt])&&(!Ht||cs(re,gi(Xi,Te,"")))&&Xi)return!1;return!0},ic=function(Gt){return"annotation-xml"!==Gt&&oi(Gt,et)},Kl=function(Gt){oa("beforeSanitizeAttributes",Gt,null);const{attributes:ni}=Gt;if(!ni)return;const Xi={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Yt};let vo=ni.length;for(;vo--;){const D=ni[vo],{name:j,namespaceURI:R,value:Y}=D,be=qs(j);let Ve="value"===j?Y:$n(Y);if(Xi.attrName=be,Xi.attrValue=Ve,Xi.keepAttr=!0,Xi.forceKeepAttr=void 0,oa("uponSanitizeAttribute",Gt,Xi),Ve=Xi.attrValue,Xi.forceKeepAttr||(pa(j,Gt),!Xi.keepAttr))continue;if(!Wt&&cs(/\/>/i,Ve)){pa(j,Gt);continue}Wn&&St([Aa,mc,De],Zt=>{Ve=gi(Ve,Zt," ")});const ht=qs(Gt.nodeName);if(cu(ht,be,Ve)){if(Sn&&("id"===be||"name"===be)&&(pa(j,Gt),Ve="user-content-"+Ve),dr&&cs(/((--!?|])>)|<\/(style|title)/i,Ve)){pa(j,Gt);continue}if(Ti&&"object"==typeof Gs&&"function"==typeof Gs.getAttributeType&&!R)switch(Gs.getAttributeType(ht,be)){case"TrustedHTML":Ve=Ti.createHTML(Ve);break;case"TrustedScriptURL":Ve=Ti.createScriptURL(Ve)}try{R?Gt.setAttributeNS(R,j,Ve):Gt.setAttribute(j,Ve),Ya(Gt)?go(Gt):fn(Me.removed)}catch{}}}oa("afterSanitizeAttributes",Gt,null)},Pl=function Zi(Gt){let ni=null;const Xi=Wo(Gt);for(oa("beforeSanitizeShadowDOM",Gt,null);ni=Xi.nextNode();)oa("uponSanitizeShadowNode",ni,null),!lu(ni)&&(ni.content instanceof dt&&Zi(ni.content),Kl(ni));oa("afterSanitizeShadowDOM",Gt,null)};return Me.sanitize=function(Zi){let Gt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ni=null,Xi=null,vo=null,D=null;if(Il=!Zi,Il&&(Zi="\x3c!--\x3e"),"string"!=typeof Zi&&!Nl(Zi)){if("function"!=typeof Zi.toString)throw Qr("toString is not a function");if("string"!=typeof(Zi=Zi.toString()))throw Qr("dirty is not a string, aborting")}if(!Me.isSupported)return Zi;if(ps||Rl(Gt),Me.removed=[],"string"==typeof Zi&&(is=!1),is){if(Zi.nodeName){const Y=qs(Zi.nodeName);if(!Mt[Y]||Se[Y])throw Qr("root node is forbidden and cannot be sanitized in-place")}}else if(Zi instanceof wn)ni=vl("\x3c!----\x3e"),Xi=ni.ownerDocument.importNode(Zi,!0),1===Xi.nodeType&&"BODY"===Xi.nodeName||"HTML"===Xi.nodeName?ni=Xi:ni.appendChild(Xi);else{if(!wr&&!Wn&&!qi&&-1===Zi.indexOf("<"))return Ti&&lt?Ti.createHTML(Zi):Zi;if(ni=vl(Zi),!ni)return wr?null:lt?tl:""}ni&&ji&&go(ni.firstChild);const j=Wo(is?Zi:ni);for(;vo=j.nextNode();)lu(vo)||(vo.content instanceof dt&&Pl(vo.content),Kl(vo));if(is)return Zi;if(wr){if(vi)for(D=jl.call(ni.ownerDocument);ni.firstChild;)D.appendChild(ni.firstChild);else D=ni;return(Yt.shadowroot||Yt.shadowrootmode)&&(D=Xl.call(me,D,!0)),D}let R=qi?ni.outerHTML:ni.innerHTML;return qi&&Mt["!doctype"]&&ni.ownerDocument&&ni.ownerDocument.doctype&&ni.ownerDocument.doctype.name&&cs(Ei,ni.ownerDocument.doctype.name)&&(R="<!DOCTYPE "+ni.ownerDocument.doctype.name+">\n"+R),Wn&&St([Aa,mc,De],Y=>{R=gi(R,Y," ")}),Ti&&lt?Ti.createHTML(R):R},Me.setConfig=function(){Rl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),ps=!0},Me.clearConfig=function(){Wa=null,ps=!1},Me.isValidAttribute=function(Zi,Gt,ni){Wa||Rl({});const Xi=qs(Zi),vo=qs(Gt);return cu(Xi,vo,ni)},Me.addHook=function(Zi,Gt){"function"==typeof Gt&&(bo[Zi]=bo[Zi]||[],vn(bo[Zi],Gt))},Me.removeHook=function(Zi){if(bo[Zi])return fn(bo[Zi])},Me.removeHooks=function(Zi){bo[Zi]&&(bo[Zi]=[])},Me.removeAllHooks=function(){bo={}},Me}();let ws={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function ro(nt){ws=nt}const Vo=/[&<>"']/,ea=new RegExp(Vo.source,"g"),Gi=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,vr=new RegExp(Gi.source,"g"),Cl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},To=nt=>Cl[nt];function so(nt,Me){if(Me){if(Vo.test(nt))return nt.replace(ea,To)}else if(Gi.test(nt))return nt.replace(vr,To);return nt}const Zl=/(^|[^\[])\^/g;function Ss(nt,Me){let Z="string"==typeof nt?nt:nt.source;Me=Me||"";const me={replace:(ke,dt)=>{let Lt="string"==typeof dt?dt:dt.source;return Lt=Lt.replace(Zl,"$1"),Z=Z.replace(ke,Lt),me},getRegex:()=>new RegExp(Z,Me)};return me}function ja(nt){try{nt=encodeURI(nt).replace(/%25/g,"%")}catch{return null}return nt}const _r={exec:()=>null};function ka(nt,Me){const me=nt.replace(/\|/g,(dt,Lt,wn)=>{let li=!1,Bi=Lt;for(;--Bi>=0&&"\\"===wn[Bi];)li=!li;return li?"|":" |"}).split(/ \|/);let ke=0;if(me[0].trim()||me.shift(),me.length>0&&!me[me.length-1].trim()&&me.pop(),Me)if(me.length>Me)me.splice(Me);else for(;me.length<Me;)me.push("");for(;ke<me.length;ke++)me[ke]=me[ke].trim().replace(/\\\|/g,"|");return me}function ma(nt,Me,Z){const me=nt.length;if(0===me)return"";let ke=0;for(;ke<me;){const dt=nt.charAt(me-ke-1);if(dt!==Me||Z){if(dt===Me||!Z)break;ke++}else ke++}return nt.slice(0,me-ke)}function Qo(nt,Me,Z,me){const ke=Me.href,dt=Me.title?so(Me.title):null,Lt=nt[1].replace(/\\([\[\]])/g,"$1");if("!"!==nt[0].charAt(0)){me.state.inLink=!0;const wn={type:"link",raw:Z,href:ke,title:dt,text:Lt,tokens:me.inlineTokens(Lt)};return me.state.inLink=!1,wn}return{type:"image",raw:Z,href:ke,title:dt,text:so(Lt)}}class ga{options;rules;lexer;constructor(Me){this.options=Me||ws}space(Me){const Z=this.rules.block.newline.exec(Me);if(Z&&Z[0].length>0)return{type:"space",raw:Z[0]}}code(Me){const Z=this.rules.block.code.exec(Me);if(Z){const me=Z[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:Z[0],codeBlockStyle:"indented",text:this.options.pedantic?me:ma(me,"\n")}}}fences(Me){const Z=this.rules.block.fences.exec(Me);if(Z){const me=Z[0],ke=function Ba(nt,Me){const Z=nt.match(/^(\s+)(?:```)/);if(null===Z)return Me;const me=Z[1];return Me.split("\n").map(ke=>{const dt=ke.match(/^\s+/);if(null===dt)return ke;const[Lt]=dt;return Lt.length>=me.length?ke.slice(me.length):ke}).join("\n")}(me,Z[3]||"");return{type:"code",raw:me,lang:Z[2]?Z[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):Z[2],text:ke}}}heading(Me){const Z=this.rules.block.heading.exec(Me);if(Z){let me=Z[2].trim();if(/#$/.test(me)){const ke=ma(me,"#");(this.options.pedantic||!ke||/ $/.test(ke))&&(me=ke.trim())}return{type:"heading",raw:Z[0],depth:Z[1].length,text:me,tokens:this.lexer.inline(me)}}}hr(Me){const Z=this.rules.block.hr.exec(Me);if(Z)return{type:"hr",raw:ma(Z[0],"\n")}}blockquote(Me){const Z=this.rules.block.blockquote.exec(Me);if(Z){let me=ma(Z[0],"\n").split("\n"),ke="",dt="";const Lt=[];for(;me.length>0;){let wn=!1;const li=[];let Bi;for(Bi=0;Bi<me.length;Bi++)if(/^ {0,3}>/.test(me[Bi]))li.push(me[Bi]),wn=!0;else{if(wn)break;li.push(me[Bi])}me=me.slice(Bi);const fi=li.join("\n"),fr=fi.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");ke=ke?`${ke}\n${fi}`:fi,dt=dt?`${dt}\n${fr}`:fr;const Ns=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(fr,Lt,!0),this.lexer.state.top=Ns,0===me.length)break;const Gs=Lt[Lt.length-1];if("code"===Gs?.type)break;if("blockquote"===Gs?.type){const Ts=Gs,fa=Ts.raw+"\n"+me.join("\n"),Ws=this.blockquote(fa);Lt[Lt.length-1]=Ws,ke=ke.substring(0,ke.length-Ts.raw.length)+Ws.raw,dt=dt.substring(0,dt.length-Ts.text.length)+Ws.text;break}if("list"!==Gs?.type);else{const Ts=Gs,fa=Ts.raw+"\n"+me.join("\n"),Ws=this.list(fa);Lt[Lt.length-1]=Ws,ke=ke.substring(0,ke.length-Gs.raw.length)+Ws.raw,dt=dt.substring(0,dt.length-Ts.raw.length)+Ws.raw,me=fa.substring(Lt[Lt.length-1].raw.length).split("\n")}}return{type:"blockquote",raw:ke,tokens:Lt,text:dt}}}list(Me){let Z=this.rules.block.list.exec(Me);if(Z){let me=Z[1].trim();const ke=me.length>1,dt={type:"list",raw:"",ordered:ke,start:ke?+me.slice(0,-1):"",loose:!1,items:[]};me=ke?`\\d{1,9}\\${me.slice(-1)}`:`\\${me}`,this.options.pedantic&&(me=ke?me:"[*+-]");const Lt=new RegExp(`^( {0,3}${me})((?:[\t ][^\\n]*)?(?:\\n|$))`);let wn=!1;for(;Me;){let li=!1,Bi="",fi="";if(!(Z=Lt.exec(Me))||this.rules.block.hr.test(Me))break;Bi=Z[0],Me=Me.substring(Bi.length);let fr=Z[2].split("\n",1)[0].replace(/^\t+/,yr=>" ".repeat(3*yr.length)),Ns=Me.split("\n",1)[0],Gs=!fr.trim(),Ts=0;if(this.options.pedantic?(Ts=2,fi=fr.trimStart()):Gs?Ts=Z[1].length+1:(Ts=Z[2].search(/[^ ]/),Ts=Ts>4?1:Ts,fi=fr.slice(Ts),Ts+=Z[1].length),Gs&&/^[ \t]*$/.test(Ns)&&(Bi+=Ns+"\n",Me=Me.substring(Ns.length+1),li=!0),!li){const yr=new RegExp(`^ {0,${Math.min(3,Ts-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),Rc=new RegExp(`^ {0,${Math.min(3,Ts-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Mn=new RegExp(`^ {0,${Math.min(3,Ts-1)}}(?:\`\`\`|~~~)`),Ti=new RegExp(`^ {0,${Math.min(3,Ts-1)}}#`),tl=new RegExp(`^ {0,${Math.min(3,Ts-1)}}<[a-z].*>`,"i");for(;Me;){const Ga=Me.split("\n",1)[0];let Qa;if(Ns=Ga,this.options.pedantic?(Ns=Ns.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "),Qa=Ns):Qa=Ns.replace(/\t/g,"    "),Mn.test(Ns)||Ti.test(Ns)||tl.test(Ns)||yr.test(Ns)||Rc.test(Ns))break;if(Qa.search(/[^ ]/)>=Ts||!Ns.trim())fi+="\n"+Qa.slice(Ts);else{if(Gs||fr.replace(/\t/g,"    ").search(/[^ ]/)>=4||Mn.test(fr)||Ti.test(fr)||Rc.test(fr))break;fi+="\n"+Ns}!Gs&&!Ns.trim()&&(Gs=!0),Bi+=Ga+"\n",Me=Me.substring(Ga.length+1),fr=Qa.slice(Ts)}}dt.loose||(wn?dt.loose=!0:/\n[ \t]*\n[ \t]*$/.test(Bi)&&(wn=!0));let Ws,fa=null;this.options.gfm&&(fa=/^\[[ xX]\] /.exec(fi),fa&&(Ws="[ ] "!==fa[0],fi=fi.replace(/^\[[ xX]\] +/,""))),dt.items.push({type:"list_item",raw:Bi,task:!!fa,checked:Ws,loose:!1,text:fi,tokens:[]}),dt.raw+=Bi}dt.items[dt.items.length-1].raw=dt.items[dt.items.length-1].raw.trimEnd(),dt.items[dt.items.length-1].text=dt.items[dt.items.length-1].text.trimEnd(),dt.raw=dt.raw.trimEnd();for(let li=0;li<dt.items.length;li++)if(this.lexer.state.top=!1,dt.items[li].tokens=this.lexer.blockTokens(dt.items[li].text,[]),!dt.loose){const Bi=dt.items[li].tokens.filter(fr=>"space"===fr.type),fi=Bi.length>0&&Bi.some(fr=>/\n.*\n/.test(fr.raw));dt.loose=fi}if(dt.loose)for(let li=0;li<dt.items.length;li++)dt.items[li].loose=!0;return dt}}html(Me){const Z=this.rules.block.html.exec(Me);if(Z)return{type:"html",block:!0,raw:Z[0],pre:"pre"===Z[1]||"script"===Z[1]||"style"===Z[1],text:Z[0]}}def(Me){const Z=this.rules.block.def.exec(Me);if(Z){const me=Z[1].toLowerCase().replace(/\s+/g," "),ke=Z[2]?Z[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",dt=Z[3]?Z[3].substring(1,Z[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):Z[3];return{type:"def",tag:me,raw:Z[0],href:ke,title:dt}}}table(Me){const Z=this.rules.block.table.exec(Me);if(!Z||!/[:|]/.test(Z[2]))return;const me=ka(Z[1]),ke=Z[2].replace(/^\||\| *$/g,"").split("|"),dt=Z[3]&&Z[3].trim()?Z[3].replace(/\n[ \t]*$/,"").split("\n"):[],Lt={type:"table",raw:Z[0],header:[],align:[],rows:[]};if(me.length===ke.length){for(const wn of ke)/^ *-+: *$/.test(wn)?Lt.align.push("right"):/^ *:-+: *$/.test(wn)?Lt.align.push("center"):/^ *:-+ *$/.test(wn)?Lt.align.push("left"):Lt.align.push(null);for(let wn=0;wn<me.length;wn++)Lt.header.push({text:me[wn],tokens:this.lexer.inline(me[wn]),header:!0,align:Lt.align[wn]});for(const wn of dt)Lt.rows.push(ka(wn,Lt.header.length).map((li,Bi)=>({text:li,tokens:this.lexer.inline(li),header:!1,align:Lt.align[Bi]})));return Lt}}lheading(Me){const Z=this.rules.block.lheading.exec(Me);if(Z)return{type:"heading",raw:Z[0],depth:"="===Z[2].charAt(0)?1:2,text:Z[1],tokens:this.lexer.inline(Z[1])}}paragraph(Me){const Z=this.rules.block.paragraph.exec(Me);if(Z){const me="\n"===Z[1].charAt(Z[1].length-1)?Z[1].slice(0,-1):Z[1];return{type:"paragraph",raw:Z[0],text:me,tokens:this.lexer.inline(me)}}}text(Me){const Z=this.rules.block.text.exec(Me);if(Z)return{type:"text",raw:Z[0],text:Z[0],tokens:this.lexer.inline(Z[0])}}escape(Me){const Z=this.rules.inline.escape.exec(Me);if(Z)return{type:"escape",raw:Z[0],text:so(Z[1])}}tag(Me){const Z=this.rules.inline.tag.exec(Me);if(Z)return!this.lexer.state.inLink&&/^<a /i.test(Z[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(Z[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(Z[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(Z[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:Z[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:Z[0]}}link(Me){const Z=this.rules.inline.link.exec(Me);if(Z){const me=Z[2].trim();if(!this.options.pedantic&&/^</.test(me)){if(!/>$/.test(me))return;const Lt=ma(me.slice(0,-1),"\\");if((me.length-Lt.length)%2==0)return}else{const Lt=function yo(nt,Me){if(-1===nt.indexOf(Me[1]))return-1;let Z=0;for(let me=0;me<nt.length;me++)if("\\"===nt[me])me++;else if(nt[me]===Me[0])Z++;else if(nt[me]===Me[1]&&(Z--,Z<0))return me;return-1}(Z[2],"()");if(Lt>-1){const li=(0===Z[0].indexOf("!")?5:4)+Z[1].length+Lt;Z[2]=Z[2].substring(0,Lt),Z[0]=Z[0].substring(0,li).trim(),Z[3]=""}}let ke=Z[2],dt="";if(this.options.pedantic){const Lt=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(ke);Lt&&(ke=Lt[1],dt=Lt[3])}else dt=Z[3]?Z[3].slice(1,-1):"";return ke=ke.trim(),/^</.test(ke)&&(ke=this.options.pedantic&&!/>$/.test(me)?ke.slice(1):ke.slice(1,-1)),Qo(Z,{href:ke&&ke.replace(this.rules.inline.anyPunctuation,"$1"),title:dt&&dt.replace(this.rules.inline.anyPunctuation,"$1")},Z[0],this.lexer)}}reflink(Me,Z){let me;if((me=this.rules.inline.reflink.exec(Me))||(me=this.rules.inline.nolink.exec(Me))){const dt=Z[(me[2]||me[1]).replace(/\s+/g," ").toLowerCase()];if(!dt){const Lt=me[0].charAt(0);return{type:"text",raw:Lt,text:Lt}}return Qo(me,dt,me[0],this.lexer)}}emStrong(Me,Z,me=""){let ke=this.rules.inline.emStrongLDelim.exec(Me);if(!(!ke||ke[3]&&me.match(/[\p{L}\p{N}]/u))&&(!ke[1]&&!ke[2]||!me||this.rules.inline.punctuation.exec(me))){const Lt=[...ke[0]].length-1;let wn,li,Bi=Lt,fi=0;const fr="*"===ke[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(fr.lastIndex=0,Z=Z.slice(-1*Me.length+Lt);null!=(ke=fr.exec(Z));){if(wn=ke[1]||ke[2]||ke[3]||ke[4]||ke[5]||ke[6],!wn)continue;if(li=[...wn].length,ke[3]||ke[4]){Bi+=li;continue}if((ke[5]||ke[6])&&Lt%3&&!((Lt+li)%3)){fi+=li;continue}if(Bi-=li,Bi>0)continue;li=Math.min(li,li+Bi+fi);const Ns=[...ke[0]][0].length,Gs=Me.slice(0,Lt+ke.index+Ns+li);if(Math.min(Lt,li)%2){const fa=Gs.slice(1,-1);return{type:"em",raw:Gs,text:fa,tokens:this.lexer.inlineTokens(fa)}}const Ts=Gs.slice(2,-2);return{type:"strong",raw:Gs,text:Ts,tokens:this.lexer.inlineTokens(Ts)}}}}codespan(Me){const Z=this.rules.inline.code.exec(Me);if(Z){let me=Z[2].replace(/\n/g," ");const ke=/[^ ]/.test(me),dt=/^ /.test(me)&&/ $/.test(me);return ke&&dt&&(me=me.substring(1,me.length-1)),me=so(me,!0),{type:"codespan",raw:Z[0],text:me}}}br(Me){const Z=this.rules.inline.br.exec(Me);if(Z)return{type:"br",raw:Z[0]}}del(Me){const Z=this.rules.inline.del.exec(Me);if(Z)return{type:"del",raw:Z[0],text:Z[2],tokens:this.lexer.inlineTokens(Z[2])}}autolink(Me){const Z=this.rules.inline.autolink.exec(Me);if(Z){let me,ke;return"@"===Z[2]?(me=so(Z[1]),ke="mailto:"+me):(me=so(Z[1]),ke=me),{type:"link",raw:Z[0],text:me,href:ke,tokens:[{type:"text",raw:me,text:me}]}}}url(Me){let Z;if(Z=this.rules.inline.url.exec(Me)){let me,ke;if("@"===Z[2])me=so(Z[0]),ke="mailto:"+me;else{let dt;do{dt=Z[0],Z[0]=this.rules.inline._backpedal.exec(Z[0])?.[0]??""}while(dt!==Z[0]);me=so(Z[0]),ke="www."===Z[1]?"http://"+Z[0]:Z[0]}return{type:"link",raw:Z[0],text:me,href:ke,tokens:[{type:"text",raw:me,text:me}]}}}inlineText(Me){const Z=this.rules.inline.text.exec(Me);if(Z){let me;return me=this.lexer.state.inRawBlock?Z[0]:so(Z[0]),{type:"text",raw:Z[0],text:me}}}}const Ta=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,ll=/(?:[*+-]|\d{1,9}[.)])/,va=Ss(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,ll).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),No=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ta=/(?!\s*\])(?:\\.|[^\[\]\\])+/,zl=Ss(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",ta).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ao=Ss(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ll).getRegex(),Yo="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",$i=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Xa=Ss("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",$i).replace("tag",Yo).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),_a=Ss(No).replace("hr",Ta).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yo).getRegex(),na={blockquote:Ss(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",_a).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:zl,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Ta,html:Xa,lheading:va,list:ao,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:_a,table:_r,text:/^[^\n]+/},Ha=Ss("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ta).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yo).getRegex(),cl={...na,table:Ha,paragraph:Ss(No).replace("hr",Ta).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ha).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yo).getRegex()},wl={...na,html:Ss("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",$i).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:_r,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ss(No).replace("hr",Ta).replace("heading"," *#{1,6} *[^\n]").replace("lheading",va).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ya=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ka=/^( {2,}|\\)\n(?!\s*$)/,Qs="\\p{P}\\p{S}",Jl=Ss(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Qs).getRegex(),da=Ss(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Qs).getRegex(),ba=Ss("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Qs).getRegex(),Po=Ss("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Qs).getRegex(),Ho=Ss(/\\([punct])/,"gu").replace(/punct/g,Qs).getRegex(),Tl=Ss(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),_s=Ss($i).replace("(?:--\x3e|$)","--\x3e").getRegex(),Gl=Ss("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",_s).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),xa=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,qo=Ss(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",xa).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ul=Ss(/^!?\[(label)\]\[(ref)\]/).replace("label",xa).replace("ref",ta).getRegex(),ia=Ss(/^!?\[(ref)\](?:\[\])?/).replace("ref",ta).getRegex(),Ja={_backpedal:_r,anyPunctuation:Ho,autolink:Tl,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:Ka,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:_r,emStrongLDelim:da,emStrongRDelimAst:ba,emStrongRDelimUnd:Po,escape:ya,link:qo,nolink:ia,punctuation:Jl,reflink:ul,reflinkSearch:Ss("reflink|nolink(?!\\()","g").replace("reflink",ul).replace("nolink",ia).getRegex(),tag:Gl,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:_r},zo={...Ja,link:Ss(/^!?\[(label)\]\((.*?)\)/).replace("label",xa).getRegex(),reflink:Ss(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xa).getRegex()},Jr={...Ja,escape:Ss(ya).replace("])","~|])").getRegex(),url:Ss(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},dl={...Jr,br:Ss(Ka).replace("{2,}","*").getRegex(),text:Ss(Jr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ec={normal:na,gfm:cl,pedantic:wl},Da={normal:Ja,gfm:Jr,breaks:dl,pedantic:zo};class Ys{tokens;options;state;tokenizer;inlineQueue;constructor(Me){this.tokens=[],this.tokens.links=Object.create(null),this.options=Me||ws,this.options.tokenizer=this.options.tokenizer||new ga,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const Z={block:ec.normal,inline:Da.normal};this.options.pedantic?(Z.block=ec.pedantic,Z.inline=Da.pedantic):this.options.gfm&&(Z.block=ec.gfm,Z.inline=this.options.breaks?Da.breaks:Da.gfm),this.tokenizer.rules=Z}static get rules(){return{block:ec,inline:Da}}static lex(Me,Z){return new Ys(Z).lex(Me)}static lexInline(Me,Z){return new Ys(Z).inlineTokens(Me)}lex(Me){Me=Me.replace(/\r\n|\r/g,"\n"),this.blockTokens(Me,this.tokens);for(let Z=0;Z<this.inlineQueue.length;Z++){const me=this.inlineQueue[Z];this.inlineTokens(me.src,me.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(Me,Z=[],me=!1){let ke,dt,Lt;for(this.options.pedantic&&(Me=Me.replace(/\t/g,"    ").replace(/^ +$/gm,""));Me;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(wn=>!!(ke=wn.call({lexer:this},Me,Z))&&(Me=Me.substring(ke.raw.length),Z.push(ke),!0)))){if(ke=this.tokenizer.space(Me)){Me=Me.substring(ke.raw.length),1===ke.raw.length&&Z.length>0?Z[Z.length-1].raw+="\n":Z.push(ke);continue}if(ke=this.tokenizer.code(Me)){Me=Me.substring(ke.raw.length),dt=Z[Z.length-1],!dt||"paragraph"!==dt.type&&"text"!==dt.type?Z.push(ke):(dt.raw+="\n"+ke.raw,dt.text+="\n"+ke.text,this.inlineQueue[this.inlineQueue.length-1].src=dt.text);continue}if(ke=this.tokenizer.fences(Me)){Me=Me.substring(ke.raw.length),Z.push(ke);continue}if(ke=this.tokenizer.heading(Me)){Me=Me.substring(ke.raw.length),Z.push(ke);continue}if(ke=this.tokenizer.hr(Me)){Me=Me.substring(ke.raw.length),Z.push(ke);continue}if(ke=this.tokenizer.blockquote(Me)){Me=Me.substring(ke.raw.length),Z.push(ke);continue}if(ke=this.tokenizer.list(Me)){Me=Me.substring(ke.raw.length),Z.push(ke);continue}if(ke=this.tokenizer.html(Me)){Me=Me.substring(ke.raw.length),Z.push(ke);continue}if(ke=this.tokenizer.def(Me)){Me=Me.substring(ke.raw.length),dt=Z[Z.length-1],!dt||"paragraph"!==dt.type&&"text"!==dt.type?this.tokens.links[ke.tag]||(this.tokens.links[ke.tag]={href:ke.href,title:ke.title}):(dt.raw+="\n"+ke.raw,dt.text+="\n"+ke.raw,this.inlineQueue[this.inlineQueue.length-1].src=dt.text);continue}if(ke=this.tokenizer.table(Me)){Me=Me.substring(ke.raw.length),Z.push(ke);continue}if(ke=this.tokenizer.lheading(Me)){Me=Me.substring(ke.raw.length),Z.push(ke);continue}if(Lt=Me,this.options.extensions&&this.options.extensions.startBlock){let wn=1/0;const li=Me.slice(1);let Bi;this.options.extensions.startBlock.forEach(fi=>{Bi=fi.call({lexer:this},li),"number"==typeof Bi&&Bi>=0&&(wn=Math.min(wn,Bi))}),wn<1/0&&wn>=0&&(Lt=Me.substring(0,wn+1))}if(this.state.top&&(ke=this.tokenizer.paragraph(Lt))){dt=Z[Z.length-1],me&&"paragraph"===dt?.type?(dt.raw+="\n"+ke.raw,dt.text+="\n"+ke.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=dt.text):Z.push(ke),me=Lt.length!==Me.length,Me=Me.substring(ke.raw.length);continue}if(ke=this.tokenizer.text(Me)){Me=Me.substring(ke.raw.length),dt=Z[Z.length-1],dt&&"text"===dt.type?(dt.raw+="\n"+ke.raw,dt.text+="\n"+ke.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=dt.text):Z.push(ke);continue}if(Me){const wn="Infinite loop on byte: "+Me.charCodeAt(0);if(this.options.silent){console.error(wn);break}throw new Error(wn)}}return this.state.top=!0,Z}inline(Me,Z=[]){return this.inlineQueue.push({src:Me,tokens:Z}),Z}inlineTokens(Me,Z=[]){let me,ke,dt,wn,li,Bi,Lt=Me;if(this.tokens.links){const fi=Object.keys(this.tokens.links);if(fi.length>0)for(;null!=(wn=this.tokenizer.rules.inline.reflinkSearch.exec(Lt));)fi.includes(wn[0].slice(wn[0].lastIndexOf("[")+1,-1))&&(Lt=Lt.slice(0,wn.index)+"["+"a".repeat(wn[0].length-2)+"]"+Lt.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(wn=this.tokenizer.rules.inline.blockSkip.exec(Lt));)Lt=Lt.slice(0,wn.index)+"["+"a".repeat(wn[0].length-2)+"]"+Lt.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(wn=this.tokenizer.rules.inline.anyPunctuation.exec(Lt));)Lt=Lt.slice(0,wn.index)+"++"+Lt.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;Me;)if(li||(Bi=""),li=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(fi=>!!(me=fi.call({lexer:this},Me,Z))&&(Me=Me.substring(me.raw.length),Z.push(me),!0)))){if(me=this.tokenizer.escape(Me)){Me=Me.substring(me.raw.length),Z.push(me);continue}if(me=this.tokenizer.tag(Me)){Me=Me.substring(me.raw.length),ke=Z[Z.length-1],ke&&"text"===me.type&&"text"===ke.type?(ke.raw+=me.raw,ke.text+=me.text):Z.push(me);continue}if(me=this.tokenizer.link(Me)){Me=Me.substring(me.raw.length),Z.push(me);continue}if(me=this.tokenizer.reflink(Me,this.tokens.links)){Me=Me.substring(me.raw.length),ke=Z[Z.length-1],ke&&"text"===me.type&&"text"===ke.type?(ke.raw+=me.raw,ke.text+=me.text):Z.push(me);continue}if(me=this.tokenizer.emStrong(Me,Lt,Bi)){Me=Me.substring(me.raw.length),Z.push(me);continue}if(me=this.tokenizer.codespan(Me)){Me=Me.substring(me.raw.length),Z.push(me);continue}if(me=this.tokenizer.br(Me)){Me=Me.substring(me.raw.length),Z.push(me);continue}if(me=this.tokenizer.del(Me)){Me=Me.substring(me.raw.length),Z.push(me);continue}if(me=this.tokenizer.autolink(Me)){Me=Me.substring(me.raw.length),Z.push(me);continue}if(!this.state.inLink&&(me=this.tokenizer.url(Me))){Me=Me.substring(me.raw.length),Z.push(me);continue}if(dt=Me,this.options.extensions&&this.options.extensions.startInline){let fi=1/0;const fr=Me.slice(1);let Ns;this.options.extensions.startInline.forEach(Gs=>{Ns=Gs.call({lexer:this},fr),"number"==typeof Ns&&Ns>=0&&(fi=Math.min(fi,Ns))}),fi<1/0&&fi>=0&&(dt=Me.substring(0,fi+1))}if(me=this.tokenizer.inlineText(dt)){Me=Me.substring(me.raw.length),"_"!==me.raw.slice(-1)&&(Bi=me.raw.slice(-1)),li=!0,ke=Z[Z.length-1],ke&&"text"===ke.type?(ke.raw+=me.raw,ke.text+=me.text):Z.push(me);continue}if(Me){const fi="Infinite loop on byte: "+Me.charCodeAt(0);if(this.options.silent){console.error(fi);break}throw new Error(fi)}}return Z}}class hl{options;parser;constructor(Me){this.options=Me||ws}space(Me){return""}code({text:Me,lang:Z,escaped:me}){const ke=(Z||"").match(/^\S*/)?.[0],dt=Me.replace(/\n$/,"")+"\n";return ke?'<pre><code class="language-'+so(ke)+'">'+(me?dt:so(dt,!0))+"</code></pre>\n":"<pre><code>"+(me?dt:so(dt,!0))+"</code></pre>\n"}blockquote({tokens:Me}){return`<blockquote>\n${this.parser.parse(Me)}</blockquote>\n`}html({text:Me}){return Me}heading({tokens:Me,depth:Z}){return`<h${Z}>${this.parser.parseInline(Me)}</h${Z}>\n`}hr(Me){return"<hr>\n"}list(Me){const Z=Me.ordered,me=Me.start;let ke="";for(let wn=0;wn<Me.items.length;wn++)ke+=this.listitem(Me.items[wn]);const dt=Z?"ol":"ul";return"<"+dt+(Z&&1!==me?' start="'+me+'"':"")+">\n"+ke+"</"+dt+">\n"}listitem(Me){let Z="";if(Me.task){const me=this.checkbox({checked:!!Me.checked});Me.loose?Me.tokens.length>0&&"paragraph"===Me.tokens[0].type?(Me.tokens[0].text=me+" "+Me.tokens[0].text,Me.tokens[0].tokens&&Me.tokens[0].tokens.length>0&&"text"===Me.tokens[0].tokens[0].type&&(Me.tokens[0].tokens[0].text=me+" "+Me.tokens[0].tokens[0].text)):Me.tokens.unshift({type:"text",raw:me+" ",text:me+" "}):Z+=me+" "}return Z+=this.parser.parse(Me.tokens,!!Me.loose),`<li>${Z}</li>\n`}checkbox({checked:Me}){return"<input "+(Me?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:Me}){return`<p>${this.parser.parseInline(Me)}</p>\n`}table(Me){let Z="",me="";for(let dt=0;dt<Me.header.length;dt++)me+=this.tablecell(Me.header[dt]);Z+=this.tablerow({text:me});let ke="";for(let dt=0;dt<Me.rows.length;dt++){const Lt=Me.rows[dt];me="";for(let wn=0;wn<Lt.length;wn++)me+=this.tablecell(Lt[wn]);ke+=this.tablerow({text:me})}return ke&&(ke=`<tbody>${ke}</tbody>`),"<table>\n<thead>\n"+Z+"</thead>\n"+ke+"</table>\n"}tablerow({text:Me}){return`<tr>\n${Me}</tr>\n`}tablecell(Me){const Z=this.parser.parseInline(Me.tokens),me=Me.header?"th":"td";return(Me.align?`<${me} align="${Me.align}">`:`<${me}>`)+Z+`</${me}>\n`}strong({tokens:Me}){return`<strong>${this.parser.parseInline(Me)}</strong>`}em({tokens:Me}){return`<em>${this.parser.parseInline(Me)}</em>`}codespan({text:Me}){return`<code>${Me}</code>`}br(Me){return"<br>"}del({tokens:Me}){return`<del>${this.parser.parseInline(Me)}</del>`}link({href:Me,title:Z,tokens:me}){const ke=this.parser.parseInline(me),dt=ja(Me);if(null===dt)return ke;let Lt='<a href="'+(Me=dt)+'"';return Z&&(Lt+=' title="'+Z+'"'),Lt+=">"+ke+"</a>",Lt}image({href:Me,title:Z,text:me}){const ke=ja(Me);if(null===ke)return me;let dt=`<img src="${Me=ke}" alt="${me}"`;return Z&&(dt+=` title="${Z}"`),dt+=">",dt}text(Me){return"tokens"in Me&&Me.tokens?this.parser.parseInline(Me.tokens):Me.text}}class ha{strong({text:Me}){return Me}em({text:Me}){return Me}codespan({text:Me}){return Me}del({text:Me}){return Me}html({text:Me}){return Me}text({text:Me}){return Me}link({text:Me}){return""+Me}image({text:Me}){return""+Me}br(){return""}}class Bs{options;renderer;textRenderer;constructor(Me){this.options=Me||ws,this.options.renderer=this.options.renderer||new hl,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ha}static parse(Me,Z){return new Bs(Z).parse(Me)}static parseInline(Me,Z){return new Bs(Z).parseInline(Me)}parse(Me,Z=!0){let me="";for(let ke=0;ke<Me.length;ke++){const dt=Me[ke];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[dt.type]){const wn=dt,li=this.options.extensions.renderers[wn.type].call({parser:this},wn);if(!1!==li||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(wn.type)){me+=li||"";continue}}const Lt=dt;switch(Lt.type){case"space":me+=this.renderer.space(Lt);continue;case"hr":me+=this.renderer.hr(Lt);continue;case"heading":me+=this.renderer.heading(Lt);continue;case"code":me+=this.renderer.code(Lt);continue;case"table":me+=this.renderer.table(Lt);continue;case"blockquote":me+=this.renderer.blockquote(Lt);continue;case"list":me+=this.renderer.list(Lt);continue;case"html":me+=this.renderer.html(Lt);continue;case"paragraph":me+=this.renderer.paragraph(Lt);continue;case"text":{let wn=Lt,li=this.renderer.text(wn);for(;ke+1<Me.length&&"text"===Me[ke+1].type;)wn=Me[++ke],li+="\n"+this.renderer.text(wn);me+=Z?this.renderer.paragraph({type:"paragraph",raw:li,text:li,tokens:[{type:"text",raw:li,text:li}]}):li;continue}default:{const wn='Token with "'+Lt.type+'" type was not found.';if(this.options.silent)return console.error(wn),"";throw new Error(wn)}}}return me}parseInline(Me,Z){Z=Z||this.renderer;let me="";for(let ke=0;ke<Me.length;ke++){const dt=Me[ke];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[dt.type]){const wn=this.options.extensions.renderers[dt.type].call({parser:this},dt);if(!1!==wn||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(dt.type)){me+=wn||"";continue}}const Lt=dt;switch(Lt.type){case"escape":case"text":me+=Z.text(Lt);break;case"html":me+=Z.html(Lt);break;case"link":me+=Z.link(Lt);break;case"image":me+=Z.image(Lt);break;case"strong":me+=Z.strong(Lt);break;case"em":me+=Z.em(Lt);break;case"codespan":me+=Z.codespan(Lt);break;case"br":me+=Z.br(Lt);break;case"del":me+=Z.del(Lt);break;default:{const wn='Token with "'+Lt.type+'" type was not found.';if(this.options.silent)return console.error(wn),"";throw new Error(wn)}}}return me}}class za{options;block;constructor(Me){this.options=Me||ws}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(Me){return Me}postprocess(Me){return Me}processAllTokens(Me){return Me}provideLexer(){return this.block?Ys.lex:Ys.lexInline}provideParser(){return this.block?Bs.parse:Bs.parseInline}}const xe=new class Dl{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Bs;Renderer=hl;TextRenderer=ha;Lexer=Ys;Tokenizer=ga;Hooks=za;constructor(...Me){this.use(...Me)}walkTokens(Me,Z){let me=[];for(const ke of Me)switch(me=me.concat(Z.call(this,ke)),ke.type){case"table":{const dt=ke;for(const Lt of dt.header)me=me.concat(this.walkTokens(Lt.tokens,Z));for(const Lt of dt.rows)for(const wn of Lt)me=me.concat(this.walkTokens(wn.tokens,Z));break}case"list":me=me.concat(this.walkTokens(ke.items,Z));break;default:{const dt=ke;this.defaults.extensions?.childTokens?.[dt.type]?this.defaults.extensions.childTokens[dt.type].forEach(Lt=>{const wn=dt[Lt].flat(1/0);me=me.concat(this.walkTokens(wn,Z))}):dt.tokens&&(me=me.concat(this.walkTokens(dt.tokens,Z)))}}return me}use(...Me){const Z=this.defaults.extensions||{renderers:{},childTokens:{}};return Me.forEach(me=>{const ke={...me};if(ke.async=this.defaults.async||ke.async||!1,me.extensions&&(me.extensions.forEach(dt=>{if(!dt.name)throw new Error("extension name required");if("renderer"in dt){const Lt=Z.renderers[dt.name];Z.renderers[dt.name]=Lt?function(...wn){let li=dt.renderer.apply(this,wn);return!1===li&&(li=Lt.apply(this,wn)),li}:dt.renderer}if("tokenizer"in dt){if(!dt.level||"block"!==dt.level&&"inline"!==dt.level)throw new Error("extension level must be 'block' or 'inline'");const Lt=Z[dt.level];Lt?Lt.unshift(dt.tokenizer):Z[dt.level]=[dt.tokenizer],dt.start&&("block"===dt.level?Z.startBlock?Z.startBlock.push(dt.start):Z.startBlock=[dt.start]:"inline"===dt.level&&(Z.startInline?Z.startInline.push(dt.start):Z.startInline=[dt.start]))}"childTokens"in dt&&dt.childTokens&&(Z.childTokens[dt.name]=dt.childTokens)}),ke.extensions=Z),me.renderer){const dt=this.defaults.renderer||new hl(this.defaults);for(const Lt in me.renderer){if(!(Lt in dt))throw new Error(`renderer '${Lt}' does not exist`);if(["options","parser"].includes(Lt))continue;const li=me.renderer[Lt],Bi=dt[Lt];dt[Lt]=(...fi)=>{let fr=li.apply(dt,fi);return!1===fr&&(fr=Bi.apply(dt,fi)),fr||""}}ke.renderer=dt}if(me.tokenizer){const dt=this.defaults.tokenizer||new ga(this.defaults);for(const Lt in me.tokenizer){if(!(Lt in dt))throw new Error(`tokenizer '${Lt}' does not exist`);if(["options","rules","lexer"].includes(Lt))continue;const li=me.tokenizer[Lt],Bi=dt[Lt];dt[Lt]=(...fi)=>{let fr=li.apply(dt,fi);return!1===fr&&(fr=Bi.apply(dt,fi)),fr}}ke.tokenizer=dt}if(me.hooks){const dt=this.defaults.hooks||new za;for(const Lt in me.hooks){if(!(Lt in dt))throw new Error(`hook '${Lt}' does not exist`);if(["options","block"].includes(Lt))continue;const li=me.hooks[Lt],Bi=dt[Lt];dt[Lt]=za.passThroughHooks.has(Lt)?fi=>{if(this.defaults.async)return Promise.resolve(li.call(dt,fi)).then(Ns=>Bi.call(dt,Ns));const fr=li.call(dt,fi);return Bi.call(dt,fr)}:(...fi)=>{let fr=li.apply(dt,fi);return!1===fr&&(fr=Bi.apply(dt,fi)),fr}}ke.hooks=dt}if(me.walkTokens){const dt=this.defaults.walkTokens,Lt=me.walkTokens;ke.walkTokens=function(wn){let li=[];return li.push(Lt.call(this,wn)),dt&&(li=li.concat(dt.call(this,wn))),li}}this.defaults={...this.defaults,...ke}}),this}setOptions(Me){return this.defaults={...this.defaults,...Me},this}lexer(Me,Z){return Ys.lex(Me,Z??this.defaults)}parser(Me,Z){return Bs.parse(Me,Z??this.defaults)}parseMarkdown(Me){return(me,ke)=>{const dt={...ke},Lt={...this.defaults,...dt},wn=this.onError(!!Lt.silent,!!Lt.async);if(!0===this.defaults.async&&!1===dt.async)return wn(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof me>"u"||null===me)return wn(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof me)return wn(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(me)+", string expected"));Lt.hooks&&(Lt.hooks.options=Lt,Lt.hooks.block=Me);const li=Lt.hooks?Lt.hooks.provideLexer():Me?Ys.lex:Ys.lexInline,Bi=Lt.hooks?Lt.hooks.provideParser():Me?Bs.parse:Bs.parseInline;if(Lt.async)return Promise.resolve(Lt.hooks?Lt.hooks.preprocess(me):me).then(fi=>li(fi,Lt)).then(fi=>Lt.hooks?Lt.hooks.processAllTokens(fi):fi).then(fi=>Lt.walkTokens?Promise.all(this.walkTokens(fi,Lt.walkTokens)).then(()=>fi):fi).then(fi=>Bi(fi,Lt)).then(fi=>Lt.hooks?Lt.hooks.postprocess(fi):fi).catch(wn);try{Lt.hooks&&(me=Lt.hooks.preprocess(me));let fi=li(me,Lt);Lt.hooks&&(fi=Lt.hooks.processAllTokens(fi)),Lt.walkTokens&&this.walkTokens(fi,Lt.walkTokens);let fr=Bi(fi,Lt);return Lt.hooks&&(fr=Lt.hooks.postprocess(fr)),fr}catch(fi){return wn(fi)}}}onError(Me,Z){return me=>{if(me.message+="\nPlease report this to https://github.com/markedjs/marked.",Me){const ke="<p>An error occurred:</p><pre>"+so(me.message+"",!0)+"</pre>";return Z?Promise.resolve(ke):ke}if(Z)return Promise.reject(me);throw me}}};function Ee(nt,Me){return xe.parse(nt,Me)}function Al(nt,Me){if(1&nt&&(h.j41(0,"div",5)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"div",18)(6,"strong"),h.EFF(7),h.nI1(8,"translate"),h.k0s()(),h.nrm(9,"div",19),h.k0s()()()()()),2&nt){const Z=Me.$implicit,me=h.XpG();h.R7$(4),h.HbH("user"===Z.role?"bg-primary text-white":"bg-secondary text-white"),h.R7$(3),h.JRh("user"===Z.role?h.bMT(8,4,"CHAT.YOU"):me.getSelectedRoleName()),h.R7$(2),h.Y8G("innerHTML",me.formatMessage(Z.content),h.npT)}}function Wl(nt,Me){if(1&nt&&(h.j41(0,"div",6),h.EFF(1),h.nI1(2,"translate"),h.k0s()),2&nt){let Z;const me=h.XpG();h.R7$(),h.SpI(" ",h.bMT(2,1,null!==(Z=me.errorMessage())&&void 0!==Z?Z:"")," ")}}function $c(nt,Me){1&nt&&(h.nrm(0,"span",20),h.EFF(1),h.nI1(2,"translate")),2&nt&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"CHAT.SENDING")," "))}function ou(nt,Me){1&nt&&(h.nrm(0,"i",21),h.EFF(1),h.nI1(2,"translate")),2&nt&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"CHAT.SEND")," "))}Ee.options=Ee.setOptions=function(nt){return xe.setOptions(nt),ro(Ee.defaults=xe.defaults),Ee},Ee.getDefaults=function eo(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Ee.defaults=ws,Ee.use=function(...nt){return xe.use(...nt),ro(Ee.defaults=xe.defaults),Ee},Ee.walkTokens=function(nt,Me){return xe.walkTokens(nt,Me)},Ee.parseInline=xe.parseInline,Ee.Parser=Bs,Ee.parser=Bs.parse,Ee.Renderer=hl,Ee.TextRenderer=ha,Ee.Lexer=Ys,Ee.lexer=Ys.lex,Ee.Tokenizer=ga,Ee.Hooks=za,Ee.parse=Ee;let Vs=(()=>{class nt{constructor(){this.isLoading=(0,h.vPA)(!0),this.selectedRole=h.hFB.required(),this.roleInfo=h.hFB.required(),this.conversationId=(0,h.hFB)(),this.currentConversation=(0,h.hFB)(),this.conversationIdChange=(0,h.CGW)(),this.sendMessageEvent=(0,h.CGW)(),this.userMessage=(0,h.vPA)(localStorage.getItem("unsent_message")||""),this.chatHistory=(0,h.vPA)([]),this.isSending=(0,h.vPA)(!1),this.errorMessage=(0,h.vPA)(null),this.isLimitReached=(0,h.vPA)(!1),(0,h.QZP)(()=>{const Z=this.currentConversation();Z&&this.chatHistory.set(Z.messages)},{allowSignalWrites:!0})}ngOnInit(){Ee.setOptions({breaks:!0,gfm:!0})}sendMessage(){const Z=this.userMessage().trim();Z&&(localStorage.setItem("unsent_message",Z),this.isSending.set(!0),this.errorMessage.set(null),this.chatHistory.update(me=>[...me,{role:"user",content:Z}]),this.sendMessageEvent.emit(Z))}addBotMessage(Z,me=!1){this.chatHistory.update(ke=>[...ke,{role:"bot",content:Z}]),this.isSending.set(!1),me||(localStorage.removeItem("unsent_message"),this.userMessage.set(""))}setErrorMessage(Z){this.errorMessage.set(Z),this.isSending.set(!1)}setLimitReached(Z){this.isLimitReached.set(Z),Z&&this.errorMessage.set("CHAT.LIMIT_REACHED")}getSelectedRoleName(){return this.selectedRole()?.name||"Bot"}formatMessage(Z){const me=Ee.parse(Z);return"string"==typeof me?Is.sanitize(me):(console.warn("Markdown parsing returned a Promise. Using original message."),Is.sanitize(Z))}handleInput(Z){this.userMessage.set(Z.target.value)}static{this.\u0275fac=function(me){return new(me||nt)}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-chat-ui"]],inputs:{selectedRole:[h.Mj6.SignalBased,"selectedRole"],roleInfo:[h.Mj6.SignalBased,"roleInfo"],conversationId:[h.Mj6.SignalBased,"conversationId"],currentConversation:[h.Mj6.SignalBased,"currentConversation"]},outputs:{conversationIdChange:"conversationIdChange",sendMessageEvent:"sendMessageEvent"},standalone:!0,features:[h.aNF],decls:18,vars:9,consts:[[1,"d-flex","flex-column","h-100"],[1,"flex-grow-1","px-4","pb-5"],[1,"col-12","col-md-8","mx-auto","py-4","mb-5"],[1,"text-center","my-3"],[3,"roleInfo"],[1,""],[1,"alert","alert-warning","mt-3","text-center"],[1,"position-fixed","bottom-0","start-0","end-0","bg-dark","border-top","border-secondary"],[1,"container-xl","py-3"],[1,"row","justify-content-center"],[1,"col-12","col-lg-8"],[1,"input-group","px-sm-5"],["rows","2",1,"form-control","bg-dark","text-light","rounded-start","border-secondary",2,"min-height","60px","max-height","120px","resize","none","border-radius","0.5rem 0 0 0.5rem",3,"input","keydown.enter","value","placeholder","disabled"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",2,"min-width","100px","border-radius","0 0.5rem 0.5rem 0 !important",3,"click","disabled"],[1,"row","mb-3"],[1,"col-12","d-flex","justify-content-center"],[1,"col-12","col-sm-10","col-md-9"],[1,"rounded","p-3"],[1,"small","mb-1"],[3,"innerHTML"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"fa-solid","fa-paper-plane","me-2"]],template:function(me,ke){1&me&&(h.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h.nrm(4,"app-character-avatar",4),h.k0s(),h.Z7z(5,Al,10,6,"div",5,h.fX1),h.DNE(7,Wl,3,3,"div",6),h.k0s()(),h.j41(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"textarea",12),h.nI1(14,"translate"),h.bIt("input",function(Lt){return ke.handleInput(Lt)})("keydown.enter",function(Lt){return Lt.preventDefault(),ke.sendMessage()}),h.k0s(),h.j41(15,"button",13),h.bIt("click",function(){return ke.sendMessage()}),h.DNE(16,$c,3,3)(17,ou,3,3),h.k0s()()()()()()()),2&me&&(h.R7$(4),h.Y8G("roleInfo",ke.selectedRole()),h.R7$(),h.Dyx(ke.chatHistory()),h.R7$(2),h.vxM(7,ke.errorMessage()?7:-1),h.R7$(6),h.Y8G("value",ke.userMessage())("placeholder",h.bMT(14,7,"CHAT.PLACEHOLDER"))("disabled",ke.isLimitReached()),h.R7$(2),h.Y8G("disabled",ke.isSending()||ke.isLimitReached()),h.R7$(),h.vxM(16,ke.isSending()?16:17))},dependencies:[M.MD,x.YN,mr,P.h,P.D9],styles:["[_ngcontent-%COMP%]:deep(pre){background-color:#0000000d;padding:1rem;border-radius:.375rem;white-space:pre-wrap;word-break:break-word}[_ngcontent-%COMP%]:deep(code){background-color:#0000000d;padding:.2rem .4rem;border-radius:.25rem;font-family:monospace}[_ngcontent-%COMP%]:deep(p:last-child){margin-bottom:0}.loader[_ngcontent-%COMP%]{width:15px;aspect-ratio:1;border-radius:50%;animation:_ngcontent-%COMP%_l5 1s infinite linear alternate}@keyframes _ngcontent-%COMP%_l5{0%{box-shadow:20px 0 #000,-20px 0 #0002;background:#000}33%{box-shadow:20px 0 #000,-20px 0 #0002;background:#0002}66%{box-shadow:20px 0 #0002,-20px 0 #000;background:#0002}to{box-shadow:20px 0 #0002,-20px 0 #000;background:#000}}[_nghost-%COMP%]     .flex-grow-1{padding-bottom:100px}"]})}}return nt})();const bu=["scrollContainer"],Ac=(nt,Me)=>Me.id,fl=()=>[M.vh,H.md];function nc(nt,Me){if(1&nt&&(h.j41(0,"div",12)(1,"div",13)(2,"span"),h.EFF(3),h.nI1(4,"date"),h.k0s(),h.nrm(5,"br"),h.j41(6,"span"),h.EFF(7),h.nI1(8,"date"),h.k0s()()()),2&nt){const Z=h.XpG(2).$implicit;h.R7$(3),h.SpI("Created: ",h.i5U(4,2,Z.createdAt,"short"),""),h.R7$(4),h.SpI("Updated: ",h.i5U(8,5,Z.updatedAt,"short"),"")}}function pl(nt,Me){if(1&nt){const Z=h.RV6();h.j41(0,"button",8),h.bIt("click",function(){h.eBV(Z);const ke=h.XpG().$implicit,dt=h.XpG();return h.Njj(dt.onConversationClick(ke))}),h.j41(1,"div",9)(2,"span",10),h.EFF(3),h.k0s(),h.j41(4,"span",11),h.EFF(5),h.k0s()()(),h.DNE(6,nc,9,8,"ng-template",null,1,h.C5r)}if(2&nt){const Z=h.sdS(7),me=h.XpG().$implicit,ke=h.XpG();h.Y8G("ngbTooltip",Z),h.R7$(3),h.JRh(me.role.name||"Bot"),h.R7$(2),h.SpI(" ",ke.getCleanTitle(me.title,me.role.name)," ")}}function Zo(nt,Me){1&nt&&(h.j41(0,"div",6)(1,"div",14),h.nrm(2,"span",15),h.k0s()())}function Ic(nt,Me){1&nt&&(h.j41(0,"div",6)(1,"div",14),h.nrm(2,"span",15),h.k0s()())}function ml(nt,Me){1&nt&&(h.DNE(0,pl,8,3)(1,Zo,3,0)(2,Ic,3,0),h.nv$(3,0,fl,1,2,null,2,null,h.T$4),h.qhs(0,-1))}function Ea(nt,Me){1&nt&&(h.j41(0,"p",6),h.EFF(1,"No conversations yet."),h.k0s())}function Go(nt,Me){1&nt&&(h.j41(0,"div",7)(1,"div",16)(2,"span",17),h.EFF(3,"Loading..."),h.k0s()()())}let $l=(()=>{class nt{constructor(){this.conversations=(0,h.hFB)([]),this.conversationSelected=(0,h.CGW)(),this.currentPage=(0,h.vPA)(1),this.isLoading=(0,h.vPA)(!1),this.visibleConversations=(0,h.EWP)(()=>this.conversations().slice(0,20*this.currentPage()))}ngOnInit(){this.loadMoreItems()}onConversationClick(Z){this.conversationSelected.emit(Z)}getCleanTitle(Z,me){if(!me||!Z)return Z;const ke=`${me} - `;return Z.startsWith(ke)?Z.substring(ke.length):Z}getConversationTooltip(Z){const me=new Date(Z.createdAt).toLocaleString(),ke=new Date(Z.updatedAt).toLocaleString();return`\n        ${Z.title}\n        ${me}\n        ${ke}\n        `}onScroll(Z){const me=Z.target;me.scrollHeight-(me.scrollTop+me.clientHeight)<100&&!this.isLoading()&&this.loadMoreItems()}loadMoreItems(){const Z=this.conversations();20*this.currentPage()<Z.length&&(this.isLoading.set(!0),setTimeout(()=>{this.currentPage.update(ke=>ke+1),this.isLoading.set(!1)},500))}static{this.\u0275fac=function(me){return new(me||nt)}}static{this.\u0275cmp=h.VBU({type:nt,selectors:[["app-conversations-list"]],viewQuery:function(me,ke){if(1&me&&h.GBs(bu,5),2&me){let dt;h.mGM(dt=h.lsd())&&(ke.scrollContainer=dt.first)}},inputs:{conversations:[h.Mj6.SignalBased,"conversations"]},outputs:{conversationSelected:"conversationSelected"},standalone:!0,features:[h.aNF],decls:8,vars:2,consts:[["scrollContainer",""],["tooltipTemplate",""],[500,null],[1,"container"],[1,"conversation-wrapper",3,"scroll"],[1,"list-group"],[1,"list-group-item"],[1,"text-center","py-3"],["placement","bottom","container","body",1,"list-group-item","list-group-item-action","py-2",3,"click","ngbTooltip"],[1,"d-flex","align-items-center","gap-2"],[1,"badge","bg-primary","text-wrap"],[1,"text-truncate"],[1,"tooltip-content"],[1,"tooltip-dates"],[1,"placeholder-glow"],[1,"placeholder","col-12"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(me,ke){if(1&me){const dt=h.RV6();h.j41(0,"div",3)(1,"div",4,0),h.bIt("scroll",function(wn){return h.eBV(dt),h.Njj(ke.onScroll(wn))}),h.j41(3,"div",5),h.Z7z(4,ml,5,0,null,null,Ac,!1,Ea,2,0,"p",6),h.k0s(),h.DNE(7,Go,4,0,"div",7),h.k0s()()}2&me&&(h.R7$(4),h.Dyx(ke.visibleConversations()),h.R7$(3),h.vxM(7,ke.isLoading()?7:-1))},dependencies:[M.MD,H.n8],styles:[".conversation-wrapper[_ngcontent-%COMP%]{height:65vh;overflow-y:auto;overflow-x:hidden}"]})}}return nt})();S(2308)},2308:(Dt,qe,S)=>{"use strict";S.r(qe),S.d(qe,{default:()=>Re});var l=S(177),M=S(1626),h=S(4438),ge=S(467),W=S(5312),X=S(1946),oe=S(4843);let H=(()=>{class ze{constructor(Oe){this.http=Oe,this.baseUrl=W.c.apiUrl,this.uploadState=(0,h.vPA)({isUploading:!1,progress:0,error:null}),this.documents=(0,h.vPA)([]),this.loadDocuments()}uploadDocument(Oe){const Ye=new M.Lr;return this.http.post(W.c.apiUrl+X.F.UPLOAD_DOCUMENT,Oe,{headers:Ye})}getDocuments(){return this.http.get(W.c.apiUrl+X.F.GET_DOCUMENTS)}loadDocuments(){var Oe=this;return(0,ge.A)(function*(){try{const Ye=yield(0,oe._)(Oe.getDocuments());Oe.documents.set(Ye)}catch(Ye){console.error("Error loading documents:",Ye),Oe.documents.set([])}})()}static{this.\u0275fac=function(Ye){return new(Ye||ze)(h.KVO(M.Qq))}}static{this.\u0275prov=h.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})();var G=S(5794);const k=(ze,Ge)=>Ge.id;function P(ze,Ge){if(1&ze&&(h.j41(0,"div",7)(1,"div",11),h.EFF(2),h.k0s()()),2&ze){const Oe=h.XpG();h.R7$(),h.xc7("width",Oe.uploadService.uploadState().progress,"%"),h.R7$(),h.SpI(" ",Oe.uploadService.uploadState().progress,"% ")}}function q(ze,Ge){if(1&ze){const Oe=h.RV6();h.j41(0,"div",12),h.nrm(1,"i",13),h.k0s(),h.j41(2,"p",14),h.EFF(3,"Drag and drop your PDF here, or"),h.k0s(),h.j41(4,"input",15,0),h.bIt("change",function(yt){h.eBV(Oe);const _t=h.XpG();return h.Njj(_t.onFileSelected(yt))}),h.k0s(),h.j41(6,"button",16),h.bIt("click",function(){h.eBV(Oe);const yt=h.sdS(5);return h.Njj(yt.click())}),h.EFF(7," Browse Files "),h.k0s()}if(2&ze){const Oe=h.XpG();h.R7$(6),h.Y8G("disabled",Oe.uploadService.uploadState().isUploading)}}function ne(ze,Ge){if(1&ze&&(h.j41(0,"div",8),h.EFF(1),h.k0s()),2&ze){let Oe;const Ye=h.XpG();h.R7$(),h.SpI(" ",null!==(Oe=null==(Oe=Ye.uploadService.uploadState().error)?null:Oe.message)&&void 0!==Oe?Oe:"An unknown error occurred"," ")}}function ce(ze,Ge){1&ze&&(h.j41(0,"p",10),h.EFF(1,"No documents uploaded yet"),h.k0s())}function he(ze,Ge){1&ze&&(h.j41(0,"span",21),h.EFF(1,"Processed"),h.k0s())}function Ae(ze,Ge){1&ze&&(h.j41(0,"span",22),h.EFF(1,"Processing"),h.k0s())}function we(ze,Ge){if(1&ze&&(h.j41(0,"div",18)(1,"div",19)(2,"div")(3,"h6",20),h.EFF(4),h.k0s(),h.j41(5,"small",5),h.EFF(6),h.nI1(7,"date"),h.k0s()(),h.j41(8,"div"),h.DNE(9,he,2,0,"span",21)(10,Ae,2,0),h.k0s()()()),2&ze){const Oe=Ge.$implicit,Ye=h.XpG(2);h.R7$(4),h.JRh(Oe.fileName),h.R7$(2),h.Lme(" ",Ye.formatSize(Oe.size)," \u2022 ",h.i5U(7,4,Oe.createdAt,"medium")," "),h.R7$(3),h.vxM(9,Oe.isProcessed?9:10)}}function de(ze,Ge){if(1&ze&&(h.j41(0,"div",17),h.Z7z(1,we,11,7,"div",18,k),h.k0s()),2&ze){const Oe=h.XpG();h.R7$(),h.Dyx(Oe.uploadService.documents())}}let Re=(()=>{class ze{constructor(){this.toastr=(0,h.WQX)(G.tw),this.uploadService=(0,h.WQX)(H),this.isDragOver=!1,this.MAX_FILE_SIZE=31457280}onDragOver(Oe){Oe.preventDefault(),Oe.stopPropagation(),this.isDragOver=!0}onDrop(Oe){Oe.preventDefault(),Oe.stopPropagation(),this.isDragOver=!1;const Ye=Oe.dataTransfer?.files;Ye?.length&&this.uploadFile(Ye[0])}onFileSelected(Oe){const Ye=Oe.target.files?.[0];if(!Ye)return;if("application/pdf"!==Ye.type)return void this.toastr.error("Only PDF files are allowed");if(Ye.size>this.MAX_FILE_SIZE)return void this.toastr.error("File size must not exceed 10MB");const yt=new FormData;yt.append("file",Ye),this.uploadService.uploadDocument(yt).subscribe({next:_t=>{this.toastr.success("File uploaded successfully"),this.uploadService.loadDocuments()},error:_t=>{console.error("Upload error:",_t),this.toastr.error(_t.message||"Upload failed")}})}formatSize(Oe){if(0===Oe)return"0 Bytes";const _t=Math.floor(Math.log(Oe)/Math.log(1024));return parseFloat((Oe/Math.pow(1024,_t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][_t]}uploadFile(Oe){try{if("application/pdf"!==Oe.type)return void this.toastr.error("Only PDF files are allowed");if(Oe.size>this.MAX_FILE_SIZE)return void this.toastr.error("File size must not exceed 10MB");const Ye=new FormData;Ye.append("file",Oe),this.uploadService.uploadState.update(yt=>({...yt,isUploading:!0,progress:0,error:null})),console.log("Uploading file:",{name:Oe.name,type:Oe.type,size:Oe.size}),this.uploadService.uploadDocument(Ye).subscribe({next:yt=>{if(yt.type===M.hv.UploadProgress&&yt.total){const _t=Math.round(100*yt.loaded/yt.total);this.uploadService.uploadState.update(ut=>({...ut,progress:_t}))}else yt.type===M.hv.Response&&(this.toastr.success("Document uploaded successfully"),this.uploadService.uploadState.update(_t=>({..._t,isUploading:!1,progress:100})),this.uploadService.loadDocuments())},error:yt=>{console.error("Upload error:",yt),this.toastr.error(yt.error?.message||"Upload failed"),this.uploadService.uploadState.update(_t=>({..._t,isUploading:!1,error:{type:"server",message:yt.error?.message||"Upload failed"}}))}})}catch(Ye){console.error("Client error:",Ye),this.toastr.error("Failed to process file"),this.uploadService.uploadState.update(yt=>({...yt,isUploading:!1,error:{type:"client",message:Ye.message}}))}}static{this.\u0275fac=function(Ye){return new(Ye||ze)}}static{this.\u0275cmp=h.VBU({type:ze,selectors:[["app-upload-document"]],standalone:!0,features:[h.aNF],decls:17,vars:5,consts:[["fileInput",""],[1,"container","py-4"],[1,"card","mb-4"],[1,"card-body"],[1,"card-title"],[1,"text-muted"],[1,"upload-area","p-4","border","rounded","text-center",3,"dragover","dragleave","drop"],[1,"progress","mb-3"],[1,"alert","alert-danger","mt-3"],[1,"card"],[1,"text-muted","text-center","py-4"],[1,"progress-bar"],[1,"mb-3"],[1,"fas","fa-cloud-upload-alt","fa-3x","text-primary"],[1,"mb-2"],["type","file","accept","application/pdf",1,"d-none",3,"change"],[1,"btn","btn-primary",3,"click","disabled"],[1,"list-group"],[1,"list-group-item"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-1"],[1,"badge","bg-success"],[1,"badge","bg-warning"]],template:function(Ye,yt){1&Ye&&(h.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h5",4),h.EFF(4,"Upload Document"),h.k0s(),h.j41(5,"p",5),h.EFF(6,"Supported format: PDF (Max 10MB)"),h.k0s(),h.j41(7,"div",6),h.bIt("dragover",function(ut){return yt.onDragOver(ut)})("dragleave",function(){return yt.isDragOver=!1})("drop",function(ut){return yt.onDrop(ut)}),h.DNE(8,P,3,3,"div",7)(9,q,8,1)(10,ne,2,1,"div",8),h.k0s()()(),h.j41(11,"div",9)(12,"div",3)(13,"h5",4),h.EFF(14,"Uploaded Documents"),h.k0s(),h.DNE(15,ce,2,0,"p",10)(16,de,3,0),h.k0s()()()),2&Ye&&(h.R7$(7),h.AVh("drag-over",yt.isDragOver),h.R7$(),h.vxM(8,yt.uploadService.uploadState().isUploading?8:9),h.R7$(2),h.vxM(10,yt.uploadService.uploadState().error?10:-1),h.R7$(5),h.vxM(15,0===yt.uploadService.documents().length?15:16))},dependencies:[l.MD,l.vh],styles:[".upload-area[_ngcontent-%COMP%]{transition:all .3s ease;cursor:pointer}.upload-area.drag-over[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.1);border-style:dashed!important}.progress[_ngcontent-%COMP%]{height:.5rem}"]})}}return ze})()},6852:(Dt,qe,S)=>{"use strict";S.d(qe,{aK:()=>tx,vl:()=>ge,v1:()=>Sy});var l=S(9052),M=S(33),h=S(4438);let ge=(()=>{class c{static{this.\u0275fac=function(s){return new(s||c)}}static{this.\u0275cmp=h.VBU({type:c,selectors:[["app-main-layout"]],standalone:!0,features:[h.aNF],decls:4,vars:0,consts:[[1,"container","hue-rotating",2,"padding-top","10vh"]],template:function(s,a){1&s&&(h.nrm(0,"app-navbar"),h.j41(1,"main",0),h.nrm(2,"router-outlet"),h.k0s(),h.nrm(3,"app-footer"))},dependencies:[l._r,M.n3,l.n5]})}}return c})();var W=S(467);let X=(()=>{class c{static{this.\u0275fac=function(s){return new(s||c)}}static{this.\u0275cmp=h.VBU({type:c,selectors:[["app-loader-dots"]],standalone:!0,features:[h.aNF],decls:1,vars:0,consts:[[1,"loader"]],template:function(s,a){1&s&&h.nrm(0,"span",0)},styles:['.loader[_ngcontent-%COMP%]{width:176px;height:176px;display:inline-block;position:relative}.loader[_ngcontent-%COMP%]:after, .loader[_ngcontent-%COMP%]:before{content:"";box-sizing:border-box;width:176px;height:176px;border-radius:50%;background:var(--primary);position:absolute;left:0;top:0;animation:_ngcontent-%COMP%_animloader 2s linear infinite;transition:background-color .3s ease}.loader[_ngcontent-%COMP%]:after{animation-delay:1s}@keyframes _ngcontent-%COMP%_animloader{0%{transform:scale(0);opacity:1}to{transform:scale(1);opacity:0}}.loader-contrast[_ngcontent-%COMP%]:after, .loader-contrast[_ngcontent-%COMP%]:before{background:var(--text)}.loader-light[_ngcontent-%COMP%]:after, .loader-light[_ngcontent-%COMP%]:before{background:var(--surface)}']})}}return c})();var oe=S(177),H=S(9417),G=S(8800);const k=()=>({"background-color":"rgba(0,0,0,0.5)"});function P(c,e){1&c&&(h.j41(0,"small"),h.EFF(1,"Birth date is required"),h.k0s())}function q(c,e){if(1&c&&(h.j41(0,"div",20),h.DNE(1,P,2,0,"small",21),h.k0s()),2&c){let n;const s=h.XpG();h.R7$(),h.Y8G("ngIf",null==(n=s.birthDateForm.get("birthdate"))||null==n.errors?null:n.errors.required)}}function ne(c,e){1&c&&(h.j41(0,"small"),h.EFF(1,"You must accept the terms"),h.k0s())}function ce(c,e){if(1&c&&(h.j41(0,"div",20),h.DNE(1,ne,2,0,"small",21),h.k0s()),2&c){let n;const s=h.XpG();h.R7$(),h.Y8G("ngIf",null==(n=s.birthDateForm.get("termsAccepted"))||null==n.errors?null:n.errors.required)}}function he(c,e){if(1&c&&(h.j41(0,"div",22),h.EFF(1),h.k0s()),2&c){const n=h.XpG();h.R7$(),h.SpI(" ",n.errorMessage," ")}}function Ae(c,e){1&c&&h.nrm(0,"span",23)}let we=(()=>{class c{constructor(n,s){this.fb=n,this.userService=s,this.birthdateUpdated=(0,h.CGW)(),this.errorMessage="",this.isLoading=!1;const a=new Date;a.setFullYear(a.getFullYear()-21),this.maxDate=a.toISOString().split("T")[0]}ngOnInit(){this.birthDateForm=this.fb.group({birthdate:["",H.k0.required],termsAccepted:[!1,H.k0.requiredTrue]})}updateBirthDate(){if(this.birthDateForm.valid){this.isLoading=!0,this.errorMessage="";const n=this.birthDateForm.get("birthdate").value,s=new Date(n),a=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")} 00:00:00+00`;this.userService.updateBirthDate(a).subscribe({next:u=>{this.birthdateUpdated.emit()},error:u=>{this.errorMessage=u.error?.message||"Update failed",this.isLoading=!1},complete:()=>{this.isLoading=!1}})}}static{this.\u0275fac=function(s){return new(s||c)(h.rXU(H.ok),h.rXU(G.DL))}}static{this.\u0275cmp=h.VBU({type:c,selectors:[["app-birth-date-modal"]],outputs:{birthdateUpdated:"birthdateUpdated"},standalone:!0,features:[h.aNF],decls:28,vars:9,consts:[["tabindex","-1",1,"modal","show","d-block",3,"ngStyle"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[3,"formGroup"],[1,"mb-3"],["for","birthdate",1,"form-label"],["type","date","id","birthdate","formControlName","birthdate",1,"form-control",3,"max"],["class","text-danger",4,"ngIf"],[1,"mb-3","form-check"],["type","checkbox","id","terms","formControlName","termsAccepted",1,"form-check-input"],["for","terms",1,"form-check-label"],["href","https://zenia.cc/terms.html","target","_blank"],["href","https://zenia.cc/privacy.html","target","_blank"],["class","alert alert-danger",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(s,a){if(1&s&&(h.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),h.EFF(5,"Welcome \u{1f9d8}"),h.k0s()(),h.j41(6,"div",5)(7,"form",6)(8,"div",7)(9,"label",8),h.EFF(10,"Birth Date"),h.k0s(),h.nrm(11,"input",9),h.DNE(12,q,2,1,"div",10),h.k0s(),h.j41(13,"div",11),h.nrm(14,"input",12),h.j41(15,"label",13),h.EFF(16," I have read and accept "),h.j41(17,"a",14),h.EFF(18," terms and conditions "),h.k0s(),h.EFF(19," and "),h.j41(20,"a",15),h.EFF(21," privacy policy. "),h.k0s()(),h.DNE(22,ce,2,1,"div",10),h.k0s()(),h.DNE(23,he,2,1,"div",16),h.k0s(),h.j41(24,"div",17)(25,"button",18),h.bIt("click",function(){return a.updateBirthDate()}),h.DNE(26,Ae,1,0,"span",19),h.EFF(27," Accept "),h.k0s()()()()()),2&s){let u,p;h.Y8G("ngStyle",h.lJ4(8,k)),h.R7$(7),h.Y8G("formGroup",a.birthDateForm),h.R7$(4),h.Y8G("max",a.maxDate),h.R7$(),h.Y8G("ngIf",(null==(u=a.birthDateForm.get("birthdate"))?null:u.touched)&&(null==(u=a.birthDateForm.get("birthdate"))?null:u.errors)),h.R7$(10),h.Y8G("ngIf",(null==(p=a.birthDateForm.get("termsAccepted"))?null:p.touched)&&(null==(p=a.birthDateForm.get("termsAccepted"))?null:p.errors)),h.R7$(),h.Y8G("ngIf",a.errorMessage),h.R7$(2),h.Y8G("disabled",!a.birthDateForm.valid||a.isLoading),h.R7$(),h.Y8G("ngIf",a.isLoading)}},dependencies:[oe.MD,oe.bT,oe.B3,H.X1,H.qT,H.me,H.Zm,H.BC,H.cb,H.j4,H.JD]})}}return c})();var de=S(4909);const ae=1,x=2,T=3,yi=0,uo=1,Yn=2,cr=0,mr=1,Si=2,Ir=3,Kr=4,gr=5,Zr=6,ls=7,at=301,St=302,kn=306,oi=1001,Nr=1003,zn=1006,Sr=1008,Fs=1009,hs=1010,ir=1011,Ks=1012,Mo=1013,As=1014,Us=1015,vs=1016,ho=1017,Qe=1018,L=1020,$=35902,ue=1021,Ze=1022,pt=1023,en=1024,pn=1025,Vn=1026,ai=1027,ur=1028,Ei=1029,Yi=1030,ns=1031,fs=1033,Pr=33776,Tr=33777,Is=33778,eo=33779,ws=35840,ro=35841,Vo=35842,ea=35843,Gi=36196,vr=37492,Cl=37496,To=37808,so=37809,Zl=37810,Ss=37811,ja=37812,_r=37813,ka=37814,ma=37815,yo=37816,Qo=37817,Ba=37818,ga=37819,ca=37820,oo=37821,Ro=36492,Ta=36494,Ua=36495,ll=36283,va=36284,No=36285,Va=36286,Po="srgb",Ho="srgb-linear",Tl="linear",_s="srgb",xa=7680,Ac="300 es",fl=2e3;class pl{addEventListener(e,n){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[e]&&(s[e]=[]),-1===s[e].indexOf(n)&&s[e].push(n)}hasEventListener(e,n){if(void 0===this._listeners)return!1;const s=this._listeners;return void 0!==s[e]&&-1!==s[e].indexOf(n)}removeEventListener(e,n){if(void 0===this._listeners)return;const a=this._listeners[e];if(void 0!==a){const u=a.indexOf(n);-1!==u&&a.splice(u,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const s=this._listeners[e.type];if(void 0!==s){e.target=this;const a=s.slice(0);for(let u=0,p=a.length;u<p;u++)a[u].call(this,e);e.target=null}}}const Zo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],ml=Math.PI/180,Ea=180/Math.PI;function Go(){const c=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(Zo[255&c]+Zo[c>>8&255]+Zo[c>>16&255]+Zo[c>>24&255]+"-"+Zo[255&e]+Zo[e>>8&255]+"-"+Zo[e>>16&15|64]+Zo[e>>24&255]+"-"+Zo[63&n|128]+Zo[n>>8&255]+"-"+Zo[n>>16&255]+Zo[n>>24&255]+Zo[255&s]+Zo[s>>8&255]+Zo[s>>16&255]+Zo[s>>24&255]).toLowerCase()}function Rs(c,e,n){return Math.max(e,Math.min(n,c))}function Me(c,e,n){return(1-n)*c+n*e}function Ws(c,e){switch(e.constructor){case Float32Array:return c;case Uint32Array:return c/4294967295;case Uint16Array:return c/65535;case Uint8Array:return c/255;case Int32Array:return Math.max(c/2147483647,-1);case Int16Array:return Math.max(c/32767,-1);case Int8Array:return Math.max(c/127,-1);default:throw new Error("Invalid component type.")}}function yr(c,e){switch(e.constructor){case Float32Array:return c;case Uint32Array:return Math.round(4294967295*c);case Uint16Array:return Math.round(65535*c);case Uint8Array:return Math.round(255*c);case Int32Array:return Math.round(2147483647*c);case Int16Array:return Math.round(32767*c);case Int8Array:return Math.round(127*c);default:throw new Error("Invalid component type.")}}class Mn{constructor(e=0,n=0){Mn.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,s=this.y,a=e.elements;return this.x=a[0]*n+a[3]*s+a[6],this.y=a[1]*n+a[4]*s+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(n,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===n)return Math.PI/2;const s=this.dot(e)/n;return Math.acos(Rs(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,s=this.y-e.y;return n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,s){return this.x=e.x+(n.x-e.x)*s,this.y=e.y+(n.y-e.y)*s,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const s=Math.cos(n),a=Math.sin(n),u=this.x-e.x,p=this.y-e.y;return this.x=u*s-p*a+e.x,this.y=u*a+p*s+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ti{constructor(e,n,s,a,u,p,v,b,E){Ti.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,n,s,a,u,p,v,b,E)}set(e,n,s,a,u,p,v,b,E){const O=this.elements;return O[0]=e,O[1]=a,O[2]=v,O[3]=n,O[4]=u,O[5]=b,O[6]=s,O[7]=p,O[8]=E,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,s=e.elements;return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],this}extractBasis(e,n,s){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const s=e.elements,a=n.elements,u=this.elements,p=s[0],v=s[3],b=s[6],E=s[1],O=s[4],U=s[7],V=s[2],Q=s[5],se=s[8],ye=a[0],le=a[3],J=a[6],He=a[1],Le=a[4],Pe=a[7],Ct=a[2],ft=a[5],bt=a[8];return u[0]=p*ye+v*He+b*Ct,u[3]=p*le+v*Le+b*ft,u[6]=p*J+v*Pe+b*bt,u[1]=E*ye+O*He+U*Ct,u[4]=E*le+O*Le+U*ft,u[7]=E*J+O*Pe+U*bt,u[2]=V*ye+Q*He+se*Ct,u[5]=V*le+Q*Le+se*ft,u[8]=V*J+Q*Pe+se*bt,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],s=e[1],a=e[2],u=e[3],p=e[4],v=e[5],b=e[6],E=e[7],O=e[8];return n*p*O-n*v*E-s*u*O+s*v*b+a*u*E-a*p*b}invert(){const e=this.elements,n=e[0],s=e[1],a=e[2],u=e[3],p=e[4],v=e[5],b=e[6],E=e[7],O=e[8],U=O*p-v*E,V=v*b-O*u,Q=E*u-p*b,se=n*U+s*V+a*Q;if(0===se)return this.set(0,0,0,0,0,0,0,0,0);const ye=1/se;return e[0]=U*ye,e[1]=(a*E-O*s)*ye,e[2]=(v*s-a*p)*ye,e[3]=V*ye,e[4]=(O*n-a*b)*ye,e[5]=(a*u-v*n)*ye,e[6]=Q*ye,e[7]=(s*b-E*n)*ye,e[8]=(p*n-s*u)*ye,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,s,a,u,p,v){const b=Math.cos(u),E=Math.sin(u);return this.set(s*b,s*E,-s*(b*p+E*v)+p+e,-a*E,a*b,-a*(-E*p+b*v)+v+n,0,0,1),this}scale(e,n){return this.premultiply(tl.makeScale(e,n)),this}rotate(e){return this.premultiply(tl.makeRotation(-e)),this}translate(e,n){return this.premultiply(tl.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),s=Math.sin(e);return this.set(n,-s,0,s,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,s=e.elements;for(let a=0;a<9;a++)if(n[a]!==s[a])return!1;return!0}fromArray(e,n=0){for(let s=0;s<9;s++)this.elements[s]=e[s+n];return this}toArray(e=[],n=0){const s=this.elements;return e[n]=s[0],e[n+1]=s[1],e[n+2]=s[2],e[n+3]=s[3],e[n+4]=s[4],e[n+5]=s[5],e[n+6]=s[6],e[n+7]=s[7],e[n+8]=s[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const tl=new Ti;function Ga(c){for(let e=c.length-1;e>=0;--e)if(c[e]>=65535)return!0;return!1}function gl(c){return document.createElementNS("http://www.w3.org/1999/xhtml",c)}function Xl(){const c=gl("canvas");return c.style.display="block",c}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const bo={};function Aa(c){c in bo||(bo[c]=!0,console.warn(c))}const F={enabled:!0,workingColorSpace:Ho,spaces:{},convert:function(c,e,n){return!1===this.enabled||e===n||!e||!n||(this.spaces[e].transfer===_s&&(c.r=re(c.r),c.g=re(c.g),c.b=re(c.b)),this.spaces[e].primaries!==this.spaces[n].primaries&&(c.applyMatrix3(this.spaces[e].toXYZ),c.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===_s&&(c.r=Te(c.r),c.g=Te(c.g),c.b=Te(c.b))),c},fromWorkingColorSpace:function(c,e){return this.convert(c,this.workingColorSpace,e)},toWorkingColorSpace:function(c,e){return this.convert(c,e,this.workingColorSpace)},getPrimaries:function(c){return this.spaces[c].primaries},getTransfer:function(c){return""===c?Tl:this.spaces[c].transfer},getLuminanceCoefficients:function(c,e=this.workingColorSpace){return c.fromArray(this.spaces[e].luminanceCoefficients)},define:function(c){Object.assign(this.spaces,c)},_getMatrix:function(c,e,n){return c.copy(this.spaces[e].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(c){return this.spaces[c].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(c=this.workingColorSpace){return this.spaces[c].workingColorSpaceConfig.unpackColorSpace}};function re(c){return c<.04045?.0773993808*c:Math.pow(.9478672986*c+.0521327014,2.4)}function Te(c){return c<.0031308?12.92*c:1.055*Math.pow(c,.41666)-.055}const et=[.64,.33,.3,.6,.15,.06],mt=[.2126,.7152,.0722],Mt=[.3127,.329],Kt=(new Ti).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Yt=(new Ti).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);let Nn;F.define({[Ho]:{primaries:et,whitePoint:Mt,transfer:Tl,toXYZ:Kt,fromXYZ:Yt,luminanceCoefficients:mt,workingColorSpaceConfig:{unpackColorSpace:Po},outputColorSpaceConfig:{drawingBufferColorSpace:Po}},[Po]:{primaries:et,whitePoint:Mt,transfer:_s,toXYZ:Kt,fromXYZ:Yt,luminanceCoefficients:mt,outputColorSpaceConfig:{drawingBufferColorSpace:Po}}});class A{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{void 0===Nn&&(Nn=gl("canvas")),Nn.width=e.width,Nn.height=e.height;const s=Nn.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),n=Nn}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=gl("canvas");n.width=e.width,n.height=e.height;const s=n.getContext("2d");s.drawImage(e,0,0,e.width,e.height);const a=s.getImageData(0,0,e.width,e.height),u=a.data;for(let p=0;p<u.length;p++)u[p]=255*re(u[p]/255);return s.putImageData(a,0,0),n}if(e.data){const n=e.data.slice(0);for(let s=0;s<n.length;s++)n[s]=n instanceof Uint8Array||n instanceof Uint8ClampedArray?Math.floor(255*re(n[s]/255)):re(n[s]);return{data:n,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Se=0;class ee{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Se++}),this.uuid=Go(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.images[this.uuid])return e.images[this.uuid];const s={uuid:this.uuid,url:""},a=this.data;if(null!==a){let u;if(Array.isArray(a)){u=[];for(let p=0,v=a.length;p<v;p++)u.push(fe(a[p].isDataTexture?a[p].image:a[p]))}else u=fe(a);s.url=u}return n||(e.images[this.uuid]=s),s}}function fe(c){return typeof HTMLImageElement<"u"&&c instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&c instanceof ImageBitmap?A.getDataURL(c):c.data?{data:Array.from(c.data),width:c.width,height:c.height,type:c.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let it=0,Ht=(()=>{class c extends pl{constructor(n=c.DEFAULT_IMAGE,s=c.DEFAULT_MAPPING,a=oi,u=oi,p=zn,v=Sr,b=pt,E=Fs,O=c.DEFAULT_ANISOTROPY,U=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:it++}),this.uuid=Go(),this.name="",this.source=new ee(n),this.mipmaps=[],this.mapping=s,this.channel=0,this.wrapS=a,this.wrapT=u,this.magFilter=p,this.minFilter=v,this.anisotropy=O,this.format=b,this.internalFormat=null,this.type=E,this.offset=new Mn(0,0),this.repeat=new Mn(1,1),this.center=new Mn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ti,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=U,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(n=null){this.source.data=n}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(n){return this.name=n.name,this.source=n.source,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.channel=n.channel,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.colorSpace=n.colorSpace,this.userData=JSON.parse(JSON.stringify(n.userData)),this.needsUpdate=!0,this}toJSON(n){const s=void 0===n||"string"==typeof n;if(!s&&void 0!==n.textures[this.uuid])return n.textures[this.uuid];const a={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(n).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(a.userData=this.userData),s||(n.textures[this.uuid]=a),a}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(n){if(300!==this.mapping)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case 1e3:n.x=n.x-Math.floor(n.x);break;case oi:n.x=n.x<0?0:1;break;case 1002:n.x=1===Math.abs(Math.floor(n.x)%2)?Math.ceil(n.x)-n.x:n.x-Math.floor(n.x)}if(n.y<0||n.y>1)switch(this.wrapT){case 1e3:n.y=n.y-Math.floor(n.y);break;case oi:n.y=n.y<0?0:1;break;case 1002:n.y=1===Math.abs(Math.floor(n.y)%2)?Math.ceil(n.y)-n.y:n.y-Math.floor(n.y)}return this.flipY&&(n.y=1-n.y),n}set needsUpdate(n){!0===n&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(n){!0===n&&this.pmremVersion++}}return c.DEFAULT_IMAGE=null,c.DEFAULT_MAPPING=300,c.DEFAULT_ANISOTROPY=1,c})();class Wt{constructor(e=0,n=0,s=0,a=1){Wt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=s,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,s,a){return this.x=e,this.y=n,this.z=s,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,s=this.y,a=this.z,u=this.w,p=e.elements;return this.x=p[0]*n+p[4]*s+p[8]*a+p[12]*u,this.y=p[1]*n+p[5]*s+p[9]*a+p[13]*u,this.z=p[2]*n+p[6]*s+p[10]*a+p[14]*u,this.w=p[3]*n+p[7]*s+p[11]*a+p[15]*u,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,s,a,u;const b=e.elements,E=b[0],O=b[4],U=b[8],V=b[1],Q=b[5],se=b[9],ye=b[2],le=b[6],J=b[10];if(Math.abs(O-V)<.01&&Math.abs(U-ye)<.01&&Math.abs(se-le)<.01){if(Math.abs(O+V)<.1&&Math.abs(U+ye)<.1&&Math.abs(se+le)<.1&&Math.abs(E+Q+J-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const Le=(E+1)/2,Pe=(Q+1)/2,Ct=(J+1)/2,ft=(O+V)/4,bt=(U+ye)/4,Et=(se+le)/4;return Le>Pe&&Le>Ct?Le<.01?(s=0,a=.707106781,u=.707106781):(s=Math.sqrt(Le),a=ft/s,u=bt/s):Pe>Ct?Pe<.01?(s=.707106781,a=0,u=.707106781):(a=Math.sqrt(Pe),s=ft/a,u=Et/a):Ct<.01?(s=.707106781,a=.707106781,u=0):(u=Math.sqrt(Ct),s=bt/u,a=Et/u),this.set(s,a,u,n),this}let He=Math.sqrt((le-se)*(le-se)+(U-ye)*(U-ye)+(V-O)*(V-O));return Math.abs(He)<.001&&(He=1),this.x=(le-se)/He,this.y=(U-ye)/He,this.z=(V-O)/He,this.w=Math.acos((E+Q+J-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(n,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,s){return this.x=e.x+(n.x-e.x)*s,this.y=e.y+(n.y-e.y)*s,this.z=e.z+(n.z-e.z)*s,this.w=e.w+(n.w-e.w)*s,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Wn extends pl{constructor(e=1,n=1,s={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Wt(0,0,e,n),this.scissorTest=!1,this.viewport=new Wt(0,0,e,n);const a={width:e,height:n,depth:1};s=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:zn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},s);const u=new Ht(a,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.colorSpace);u.flipY=!1,u.generateMipmaps=s.generateMipmaps,u.internalFormat=s.internalFormat,this.textures=[];const p=s.count;for(let v=0;v<p;v++)this.textures[v]=u.clone(),this.textures[v].isRenderTargetTexture=!0;this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,this.resolveDepthBuffer=s.resolveDepthBuffer,this.resolveStencilBuffer=s.resolveStencilBuffer,this.depthTexture=s.depthTexture,this.samples=s.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,s=1){if(this.width!==e||this.height!==n||this.depth!==s){this.width=e,this.height=n,this.depth=s;for(let a=0,u=this.textures.length;a<u;a++)this.textures[a].image.width=e,this.textures[a].image.height=n,this.textures[a].image.depth=s;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let s=0,a=e.textures.length;s<a;s++)this.textures[s]=e.textures[s].clone(),this.textures[s].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new ee(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class dr extends Wn{constructor(e=1,n=1,s={}){super(e,n,s),this.isWebGLRenderTarget=!0}}class qi extends Ht{constructor(e=null,n=1,s=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:s,depth:a},this.magFilter=Nr,this.minFilter=Nr,this.wrapR=oi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ji extends Ht{constructor(e=null,n=1,s=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:s,depth:a},this.magFilter=Nr,this.minFilter=Nr,this.wrapR=oi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class vi{constructor(e=0,n=0,s=0,a=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=s,this._w=a}static slerpFlat(e,n,s,a,u,p,v){let b=s[a+0],E=s[a+1],O=s[a+2],U=s[a+3];const V=u[p+0],Q=u[p+1],se=u[p+2],ye=u[p+3];if(0===v)return e[n+0]=b,e[n+1]=E,e[n+2]=O,void(e[n+3]=U);if(1===v)return e[n+0]=V,e[n+1]=Q,e[n+2]=se,void(e[n+3]=ye);if(U!==ye||b!==V||E!==Q||O!==se){let le=1-v;const J=b*V+E*Q+O*se+U*ye,He=J>=0?1:-1,Le=1-J*J;if(Le>Number.EPSILON){const Ct=Math.sqrt(Le),ft=Math.atan2(Ct,J*He);le=Math.sin(le*ft)/Ct,v=Math.sin(v*ft)/Ct}const Pe=v*He;if(b=b*le+V*Pe,E=E*le+Q*Pe,O=O*le+se*Pe,U=U*le+ye*Pe,le===1-v){const Ct=1/Math.sqrt(b*b+E*E+O*O+U*U);b*=Ct,E*=Ct,O*=Ct,U*=Ct}}e[n]=b,e[n+1]=E,e[n+2]=O,e[n+3]=U}static multiplyQuaternionsFlat(e,n,s,a,u,p){const v=s[a],b=s[a+1],E=s[a+2],O=s[a+3],U=u[p],V=u[p+1],Q=u[p+2],se=u[p+3];return e[n]=v*se+O*U+b*Q-E*V,e[n+1]=b*se+O*V+E*U-v*Q,e[n+2]=E*se+O*Q+v*V-b*U,e[n+3]=O*se-v*U-b*V-E*Q,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,s,a){return this._x=e,this._y=n,this._z=s,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const s=e._x,a=e._y,u=e._z,p=e._order,v=Math.cos,b=Math.sin,E=v(s/2),O=v(a/2),U=v(u/2),V=b(s/2),Q=b(a/2),se=b(u/2);switch(p){case"XYZ":this._x=V*O*U+E*Q*se,this._y=E*Q*U-V*O*se,this._z=E*O*se+V*Q*U,this._w=E*O*U-V*Q*se;break;case"YXZ":this._x=V*O*U+E*Q*se,this._y=E*Q*U-V*O*se,this._z=E*O*se-V*Q*U,this._w=E*O*U+V*Q*se;break;case"ZXY":this._x=V*O*U-E*Q*se,this._y=E*Q*U+V*O*se,this._z=E*O*se+V*Q*U,this._w=E*O*U-V*Q*se;break;case"ZYX":this._x=V*O*U-E*Q*se,this._y=E*Q*U+V*O*se,this._z=E*O*se-V*Q*U,this._w=E*O*U+V*Q*se;break;case"YZX":this._x=V*O*U+E*Q*se,this._y=E*Q*U+V*O*se,this._z=E*O*se-V*Q*U,this._w=E*O*U-V*Q*se;break;case"XZY":this._x=V*O*U-E*Q*se,this._y=E*Q*U-V*O*se,this._z=E*O*se+V*Q*U,this._w=E*O*U+V*Q*se;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+p)}return!0===n&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const s=n/2,a=Math.sin(s);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,s=n[0],a=n[4],u=n[8],p=n[1],v=n[5],b=n[9],E=n[2],O=n[6],U=n[10],V=s+v+U;if(V>0){const Q=.5/Math.sqrt(V+1);this._w=.25/Q,this._x=(O-b)*Q,this._y=(u-E)*Q,this._z=(p-a)*Q}else if(s>v&&s>U){const Q=2*Math.sqrt(1+s-v-U);this._w=(O-b)/Q,this._x=.25*Q,this._y=(a+p)/Q,this._z=(u+E)/Q}else if(v>U){const Q=2*Math.sqrt(1+v-s-U);this._w=(u-E)/Q,this._x=(a+p)/Q,this._y=.25*Q,this._z=(b+O)/Q}else{const Q=2*Math.sqrt(1+U-s-v);this._w=(p-a)/Q,this._x=(u+E)/Q,this._y=(b+O)/Q,this._z=.25*Q}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let s=e.dot(n)+1;return s<Number.EPSILON?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Rs(this.dot(e),-1,1)))}rotateTowards(e,n){const s=this.angleTo(e);if(0===s)return this;const a=Math.min(1,n/s);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const s=e._x,a=e._y,u=e._z,p=e._w,v=n._x,b=n._y,E=n._z,O=n._w;return this._x=s*O+p*v+a*E-u*b,this._y=a*O+p*b+u*v-s*E,this._z=u*O+p*E+s*b-a*v,this._w=p*O-s*v-a*b-u*E,this._onChangeCallback(),this}slerp(e,n){if(0===n)return this;if(1===n)return this.copy(e);const s=this._x,a=this._y,u=this._z,p=this._w;let v=p*e._w+s*e._x+a*e._y+u*e._z;if(v<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,v=-v):this.copy(e),v>=1)return this._w=p,this._x=s,this._y=a,this._z=u,this;const b=1-v*v;if(b<=Number.EPSILON){const Q=1-n;return this._w=Q*p+n*this._w,this._x=Q*s+n*this._x,this._y=Q*a+n*this._y,this._z=Q*u+n*this._z,this.normalize(),this}const E=Math.sqrt(b),O=Math.atan2(E,v),U=Math.sin((1-n)*O)/E,V=Math.sin(n*O)/E;return this._w=p*U+this._w*V,this._x=s*U+this._x*V,this._y=a*U+this._y*V,this._z=u*U+this._z*V,this._onChangeCallback(),this}slerpQuaternions(e,n,s){return this.copy(e).slerp(n,s)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),s=Math.random(),a=Math.sqrt(1-s),u=Math.sqrt(s);return this.set(a*Math.sin(e),a*Math.cos(e),u*Math.sin(n),u*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class lt{constructor(e=0,n=0,s=0){lt.prototype.isVector3=!0,this.x=e,this.y=n,this.z=s}set(e,n,s){return void 0===s&&(s=this.z),this.x=e,this.y=n,this.z=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(Sn.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(Sn.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,s=this.y,a=this.z,u=e.elements;return this.x=u[0]*n+u[3]*s+u[6]*a,this.y=u[1]*n+u[4]*s+u[7]*a,this.z=u[2]*n+u[5]*s+u[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,s=this.y,a=this.z,u=e.elements,p=1/(u[3]*n+u[7]*s+u[11]*a+u[15]);return this.x=(u[0]*n+u[4]*s+u[8]*a+u[12])*p,this.y=(u[1]*n+u[5]*s+u[9]*a+u[13])*p,this.z=(u[2]*n+u[6]*s+u[10]*a+u[14])*p,this}applyQuaternion(e){const n=this.x,s=this.y,a=this.z,u=e.x,p=e.y,v=e.z,b=e.w,E=2*(p*a-v*s),O=2*(v*n-u*a),U=2*(u*s-p*n);return this.x=n+b*E+p*U-v*O,this.y=s+b*O+v*E-u*U,this.z=a+b*U+u*O-p*E,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,s=this.y,a=this.z,u=e.elements;return this.x=u[0]*n+u[4]*s+u[8]*a,this.y=u[1]*n+u[5]*s+u[9]*a,this.z=u[2]*n+u[6]*s+u[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(n,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,s){return this.x=e.x+(n.x-e.x)*s,this.y=e.y+(n.y-e.y)*s,this.z=e.z+(n.z-e.z)*s,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const s=e.x,a=e.y,u=e.z,p=n.x,v=n.y,b=n.z;return this.x=a*b-u*v,this.y=u*p-s*b,this.z=s*v-a*p,this}projectOnVector(e){const n=e.lengthSq();if(0===n)return this.set(0,0,0);const s=e.dot(this)/n;return this.copy(e).multiplyScalar(s)}projectOnPlane(e){return kr.copy(this).projectOnVector(e),this.sub(kr)}reflect(e){return this.sub(kr.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===n)return Math.PI/2;const s=this.dot(e)/n;return Math.acos(Rs(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,s=this.y-e.y,a=this.z-e.z;return n*n+s*s+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,s){const a=Math.sin(n)*e;return this.x=a*Math.sin(s),this.y=Math.cos(n)*e,this.z=a*Math.cos(s),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,s){return this.x=e*Math.sin(n),this.y=s,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),s=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=s,this.z=a,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,4*n)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,3*n)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=2*Math.random()-1,s=Math.sqrt(1-n*n);return this.x=s*Math.cos(e),this.y=n,this.z=s*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const kr=new lt,Sn=new vi;class ti{constructor(e=new lt(1/0,1/0,1/0),n=new lt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,s=e.length;n<s;n+=3)this.expandByPoint(is.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,s=e.count;n<s;n++)this.expandByPoint(is.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,s=e.length;n<s;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const s=is.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const s=e.geometry;if(void 0!==s){const u=s.getAttribute("position");if(!0===n&&void 0!==u&&!0!==e.isInstancedMesh)for(let p=0,v=u.count;p<v;p++)!0===e.isMesh?e.getVertexPosition(p,is):is.fromBufferAttribute(u,p),is.applyMatrix4(e.matrixWorld),this.expandByPoint(is);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),ys.copy(e.boundingBox)):(null===s.boundingBox&&s.computeBoundingBox(),ys.copy(s.boundingBox)),ys.applyMatrix4(e.matrixWorld),this.union(ys)}const a=e.children;for(let u=0,p=a.length;u<p;u++)this.expandByObject(a[u],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,is),is.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,s;return e.normal.x>0?(n=e.normal.x*this.min.x,s=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,s=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,s+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,s+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,s+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,s+=e.normal.z*this.min.z),n<=-e.constant&&s>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(lo),sa.subVectors(this.max,lo),Gn.subVectors(e.a,lo),Mi.subVectors(e.b,lo),ci.subVectors(e.c,lo),Ui.subVectors(Mi,Gn),Fr.subVectors(ci,Mi),Di.subVectors(Gn,ci);let n=[0,-Ui.z,Ui.y,0,-Fr.z,Fr.y,0,-Di.z,Di.y,Ui.z,0,-Ui.x,Fr.z,0,-Fr.x,Di.z,0,-Di.x,-Ui.y,Ui.x,0,-Fr.y,Fr.x,0,-Di.y,Di.x,0];return!(!Il(n,Gn,Mi,ci,sa)||(n=[1,0,0,0,1,0,0,0,1],!Il(n,Gn,Mi,ci,sa)))&&(Yr.crossVectors(Ui,Fr),n=[Yr.x,Yr.y,Yr.z],Il(n,Gn,Mi,ci,sa))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,is).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(is).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Or[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Or[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Or[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Or[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Or[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Or[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Or[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Or[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Or)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Or=[new lt,new lt,new lt,new lt,new lt,new lt,new lt,new lt],is=new lt,ys=new ti,Gn=new lt,Mi=new lt,ci=new lt,Ui=new lt,Fr=new lt,Di=new lt,lo=new lt,sa=new lt,Yr=new lt,Lr=new lt;function Il(c,e,n,s,a){for(let u=0,p=c.length-3;u<=p;u+=3){Lr.fromArray(c,u);const v=a.x*Math.abs(Lr.x)+a.y*Math.abs(Lr.y)+a.z*Math.abs(Lr.z),b=e.dot(Lr),E=n.dot(Lr),O=s.dot(Lr);if(Math.max(-Math.max(b,E,O),Math.min(b,E,O))>v)return!1}return!0}const po=new ti,Jo=new lt,xo=new lt;class Co{constructor(e=new lt,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const s=this.center;void 0!==n?s.copy(n):po.setFromPoints(e).getCenter(s);let a=0;for(let u=0,p=e.length;u<p;u++)a=Math.max(a,s.distanceToSquared(e[u]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const s=this.center.distanceToSquared(e);return n.copy(e),s>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Jo.subVectors(e,this.center);const n=Jo.lengthSq();if(n>this.radius*this.radius){const s=Math.sqrt(n),a=.5*(s-this.radius);this.center.addScaledVector(Jo,a/s),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(xo.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Jo.copy(e.center).add(xo)),this.expandByPoint(Jo.copy(e.center).sub(xo))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const mo=new lt,qs=new lt,Wa=new lt,br=new lt,au=new lt,Rl=new lt,nl=new lt;class gc{constructor(e=new lt,n=new lt(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,mo)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const s=n.dot(this.direction);return s<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=mo.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(mo.copy(this.origin).addScaledVector(this.direction,n),mo.distanceToSquared(e))}distanceSqToSegment(e,n,s,a){qs.copy(e).add(n).multiplyScalar(.5),Wa.copy(n).sub(e).normalize(),br.copy(this.origin).sub(qs);const u=.5*e.distanceTo(n),p=-this.direction.dot(Wa),v=br.dot(this.direction),b=-br.dot(Wa),E=br.lengthSq(),O=Math.abs(1-p*p);let U,V,Q,se;if(O>0)if(U=p*b-v,V=p*v-b,se=u*O,U>=0)if(V>=-se)if(V<=se){const ye=1/O;U*=ye,V*=ye,Q=U*(U+p*V+2*v)+V*(p*U+V+2*b)+E}else V=u,U=Math.max(0,-(p*V+v)),Q=-U*U+V*(V+2*b)+E;else V=-u,U=Math.max(0,-(p*V+v)),Q=-U*U+V*(V+2*b)+E;else V<=-se?(U=Math.max(0,-(-p*u+v)),V=U>0?-u:Math.min(Math.max(-u,-b),u),Q=-U*U+V*(V+2*b)+E):V<=se?(U=0,V=Math.min(Math.max(-u,-b),u),Q=V*(V+2*b)+E):(U=Math.max(0,-(p*u+v)),V=U>0?u:Math.min(Math.max(-u,-b),u),Q=-U*U+V*(V+2*b)+E);else V=p>0?-u:u,U=Math.max(0,-(p*V+v)),Q=-U*U+V*(V+2*b)+E;return s&&s.copy(this.origin).addScaledVector(this.direction,U),a&&a.copy(qs).addScaledVector(Wa,V),Q}intersectSphere(e,n){mo.subVectors(e.center,this.origin);const s=mo.dot(this.direction),a=mo.dot(mo)-s*s,u=e.radius*e.radius;if(a>u)return null;const p=Math.sqrt(u-a),v=s-p,b=s+p;return b<0?null:this.at(v<0?b:v,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(0===n)return 0===e.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(e.normal)+e.constant)/n;return s>=0?s:null}intersectPlane(e,n){const s=this.distanceToPlane(e);return null===s?null:this.at(s,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return 0===n||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let s,a,u,p,v,b;const E=1/this.direction.x,O=1/this.direction.y,U=1/this.direction.z,V=this.origin;return E>=0?(s=(e.min.x-V.x)*E,a=(e.max.x-V.x)*E):(s=(e.max.x-V.x)*E,a=(e.min.x-V.x)*E),O>=0?(u=(e.min.y-V.y)*O,p=(e.max.y-V.y)*O):(u=(e.max.y-V.y)*O,p=(e.min.y-V.y)*O),s>p||u>a||((u>s||isNaN(s))&&(s=u),(p<a||isNaN(a))&&(a=p),U>=0?(v=(e.min.z-V.z)*U,b=(e.max.z-V.z)*U):(v=(e.max.z-V.z)*U,b=(e.min.z-V.z)*U),s>b||v>a)||((v>s||s!=s)&&(s=v),(b<a||a!=a)&&(a=b),a<0)?null:this.at(s>=0?s:a,n)}intersectsBox(e){return null!==this.intersectBox(e,mo)}intersectTriangle(e,n,s,a,u){au.subVectors(n,e),Rl.subVectors(s,e),nl.crossVectors(au,Rl);let v,p=this.direction.dot(nl);if(p>0){if(a)return null;v=1}else{if(!(p<0))return null;v=-1,p=-p}br.subVectors(this.origin,e);const b=v*this.direction.dot(Rl.crossVectors(br,Rl));if(b<0)return null;const E=v*this.direction.dot(au.cross(br));if(E<0||b+E>p)return null;const O=-v*br.dot(nl);return O<0?null:this.at(O/p,u)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class xr{constructor(e,n,s,a,u,p,v,b,E,O,U,V,Q,se,ye,le){xr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,n,s,a,u,p,v,b,E,O,U,V,Q,se,ye,le)}set(e,n,s,a,u,p,v,b,E,O,U,V,Q,se,ye,le){const J=this.elements;return J[0]=e,J[4]=n,J[8]=s,J[12]=a,J[1]=u,J[5]=p,J[9]=v,J[13]=b,J[2]=E,J[6]=O,J[10]=U,J[14]=V,J[3]=Q,J[7]=se,J[11]=ye,J[15]=le,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new xr).fromArray(this.elements)}copy(e){const n=this.elements,s=e.elements;return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],this}copyPosition(e){const n=this.elements,s=e.elements;return n[12]=s[12],n[13]=s[13],n[14]=s[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,s){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(e,n,s){return this.set(e.x,n.x,s.x,0,e.y,n.y,s.y,0,e.z,n.z,s.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,s=e.elements,a=1/to.setFromMatrixColumn(e,0).length(),u=1/to.setFromMatrixColumn(e,1).length(),p=1/to.setFromMatrixColumn(e,2).length();return n[0]=s[0]*a,n[1]=s[1]*a,n[2]=s[2]*a,n[3]=0,n[4]=s[4]*u,n[5]=s[5]*u,n[6]=s[6]*u,n[7]=0,n[8]=s[8]*p,n[9]=s[9]*p,n[10]=s[10]*p,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,s=e.x,a=e.y,u=e.z,p=Math.cos(s),v=Math.sin(s),b=Math.cos(a),E=Math.sin(a),O=Math.cos(u),U=Math.sin(u);if("XYZ"===e.order){const V=p*O,Q=p*U,se=v*O,ye=v*U;n[0]=b*O,n[4]=-b*U,n[8]=E,n[1]=Q+se*E,n[5]=V-ye*E,n[9]=-v*b,n[2]=ye-V*E,n[6]=se+Q*E,n[10]=p*b}else if("YXZ"===e.order){const V=b*O,Q=b*U,se=E*O,ye=E*U;n[0]=V+ye*v,n[4]=se*v-Q,n[8]=p*E,n[1]=p*U,n[5]=p*O,n[9]=-v,n[2]=Q*v-se,n[6]=ye+V*v,n[10]=p*b}else if("ZXY"===e.order){const V=b*O,Q=b*U,se=E*O,ye=E*U;n[0]=V-ye*v,n[4]=-p*U,n[8]=se+Q*v,n[1]=Q+se*v,n[5]=p*O,n[9]=ye-V*v,n[2]=-p*E,n[6]=v,n[10]=p*b}else if("ZYX"===e.order){const V=p*O,Q=p*U,se=v*O,ye=v*U;n[0]=b*O,n[4]=se*E-Q,n[8]=V*E+ye,n[1]=b*U,n[5]=ye*E+V,n[9]=Q*E-se,n[2]=-E,n[6]=v*b,n[10]=p*b}else if("YZX"===e.order){const V=p*b,Q=p*E,se=v*b,ye=v*E;n[0]=b*O,n[4]=ye-V*U,n[8]=se*U+Q,n[1]=U,n[5]=p*O,n[9]=-v*O,n[2]=-E*O,n[6]=Q*U+se,n[10]=V-ye*U}else if("XZY"===e.order){const V=p*b,Q=p*E,se=v*b,ye=v*E;n[0]=b*O,n[4]=-U,n[8]=E*O,n[1]=V*U+ye,n[5]=p*O,n[9]=Q*U-se,n[2]=se*U-Q,n[6]=v*O,n[10]=ye*U+V}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(bs,e,go)}lookAt(e,n,s){const a=this.elements;return Wo.subVectors(e,n),0===Wo.lengthSq()&&(Wo.z=1),Wo.normalize(),pa.crossVectors(s,Wo),0===pa.lengthSq()&&(1===Math.abs(s.z)?Wo.x+=1e-4:Wo.z+=1e-4,Wo.normalize(),pa.crossVectors(s,Wo)),pa.normalize(),vl.crossVectors(Wo,pa),a[0]=pa.x,a[4]=vl.x,a[8]=Wo.x,a[1]=pa.y,a[5]=vl.y,a[9]=Wo.y,a[2]=pa.z,a[6]=vl.z,a[10]=Wo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const s=e.elements,a=n.elements,u=this.elements,p=s[0],v=s[4],b=s[8],E=s[12],O=s[1],U=s[5],V=s[9],Q=s[13],se=s[2],ye=s[6],le=s[10],J=s[14],He=s[3],Le=s[7],Pe=s[11],Ct=s[15],ft=a[0],bt=a[4],Et=a[8],tt=a[12],je=a[1],Nt=a[5],mn=a[9],ln=a[13],yn=a[2],Ln=a[6],sn=a[10],ri=a[14],xn=a[3],Qn=a[7],Ii=a[11],Vi=a[15];return u[0]=p*ft+v*je+b*yn+E*xn,u[4]=p*bt+v*Nt+b*Ln+E*Qn,u[8]=p*Et+v*mn+b*sn+E*Ii,u[12]=p*tt+v*ln+b*ri+E*Vi,u[1]=O*ft+U*je+V*yn+Q*xn,u[5]=O*bt+U*Nt+V*Ln+Q*Qn,u[9]=O*Et+U*mn+V*sn+Q*Ii,u[13]=O*tt+U*ln+V*ri+Q*Vi,u[2]=se*ft+ye*je+le*yn+J*xn,u[6]=se*bt+ye*Nt+le*Ln+J*Qn,u[10]=se*Et+ye*mn+le*sn+J*Ii,u[14]=se*tt+ye*ln+le*ri+J*Vi,u[3]=He*ft+Le*je+Pe*yn+Ct*xn,u[7]=He*bt+Le*Nt+Pe*Ln+Ct*Qn,u[11]=He*Et+Le*mn+Pe*sn+Ct*Ii,u[15]=He*tt+Le*ln+Pe*ri+Ct*Vi,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],s=e[4],a=e[8],u=e[12],p=e[1],v=e[5],b=e[9],E=e[13],O=e[2],U=e[6],V=e[10],Q=e[14];return e[3]*(+u*b*U-a*E*U-u*v*V+s*E*V+a*v*Q-s*b*Q)+e[7]*(+n*b*Q-n*E*V+u*p*V-a*p*Q+a*E*O-u*b*O)+e[11]*(+n*E*U-n*v*Q-u*p*U+s*p*Q+u*v*O-s*E*O)+e[15]*(-a*v*O-n*b*U+n*v*V+a*p*U-s*p*V+s*b*O)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,s){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=n,a[14]=s),this}invert(){const e=this.elements,n=e[0],s=e[1],a=e[2],u=e[3],p=e[4],v=e[5],b=e[6],E=e[7],O=e[8],U=e[9],V=e[10],Q=e[11],se=e[12],ye=e[13],le=e[14],J=e[15],He=U*le*E-ye*V*E+ye*b*Q-v*le*Q-U*b*J+v*V*J,Le=se*V*E-O*le*E-se*b*Q+p*le*Q+O*b*J-p*V*J,Pe=O*ye*E-se*U*E+se*v*Q-p*ye*Q-O*v*J+p*U*J,Ct=se*U*b-O*ye*b-se*v*V+p*ye*V+O*v*le-p*U*le,ft=n*He+s*Le+a*Pe+u*Ct;if(0===ft)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const bt=1/ft;return e[0]=He*bt,e[1]=(ye*V*u-U*le*u-ye*a*Q+s*le*Q+U*a*J-s*V*J)*bt,e[2]=(v*le*u-ye*b*u+ye*a*E-s*le*E-v*a*J+s*b*J)*bt,e[3]=(U*b*u-v*V*u-U*a*E+s*V*E+v*a*Q-s*b*Q)*bt,e[4]=Le*bt,e[5]=(O*le*u-se*V*u+se*a*Q-n*le*Q-O*a*J+n*V*J)*bt,e[6]=(se*b*u-p*le*u-se*a*E+n*le*E+p*a*J-n*b*J)*bt,e[7]=(p*V*u-O*b*u+O*a*E-n*V*E-p*a*Q+n*b*Q)*bt,e[8]=Pe*bt,e[9]=(se*U*u-O*ye*u-se*s*Q+n*ye*Q+O*s*J-n*U*J)*bt,e[10]=(p*ye*u-se*v*u+se*s*E-n*ye*E-p*s*J+n*v*J)*bt,e[11]=(O*v*u-p*U*u-O*s*E+n*U*E+p*s*Q-n*v*Q)*bt,e[12]=Ct*bt,e[13]=(O*ye*a-se*U*a+se*s*V-n*ye*V-O*s*le+n*U*le)*bt,e[14]=(se*v*a-p*ye*a-se*s*b+n*ye*b+p*s*le-n*v*le)*bt,e[15]=(p*U*a-O*v*a+O*s*b-n*U*b-p*s*V+n*v*V)*bt,this}scale(e){const n=this.elements,s=e.x,a=e.y,u=e.z;return n[0]*=s,n[4]*=a,n[8]*=u,n[1]*=s,n[5]*=a,n[9]*=u,n[2]*=s,n[6]*=a,n[10]*=u,n[3]*=s,n[7]*=a,n[11]*=u,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,n,s){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,s,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),s=Math.sin(e);return this.set(1,0,0,0,0,n,-s,0,0,s,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),s=Math.sin(e);return this.set(n,0,s,0,0,1,0,0,-s,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),s=Math.sin(e);return this.set(n,-s,0,0,s,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const s=Math.cos(n),a=Math.sin(n),u=1-s,p=e.x,v=e.y,b=e.z,E=u*p,O=u*v;return this.set(E*p+s,E*v-a*b,E*b+a*v,0,E*v+a*b,O*v+s,O*b-a*p,0,E*b-a*v,O*b+a*p,u*b*b+s,0,0,0,0,1),this}makeScale(e,n,s){return this.set(e,0,0,0,0,n,0,0,0,0,s,0,0,0,0,1),this}makeShear(e,n,s,a,u,p){return this.set(1,s,u,0,e,1,p,0,n,a,1,0,0,0,0,1),this}compose(e,n,s){const a=this.elements,u=n._x,p=n._y,v=n._z,b=n._w,E=u+u,O=p+p,U=v+v,V=u*E,Q=u*O,se=u*U,ye=p*O,le=p*U,J=v*U,He=b*E,Le=b*O,Pe=b*U,Ct=s.x,ft=s.y,bt=s.z;return a[0]=(1-(ye+J))*Ct,a[1]=(Q+Pe)*Ct,a[2]=(se-Le)*Ct,a[3]=0,a[4]=(Q-Pe)*ft,a[5]=(1-(V+J))*ft,a[6]=(le+He)*ft,a[7]=0,a[8]=(se+Le)*bt,a[9]=(le-He)*bt,a[10]=(1-(V+ye))*bt,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,n,s){const a=this.elements;let u=to.set(a[0],a[1],a[2]).length();const p=to.set(a[4],a[5],a[6]).length(),v=to.set(a[8],a[9],a[10]).length();this.determinant()<0&&(u=-u),e.x=a[12],e.y=a[13],e.z=a[14],Sa.copy(this);const E=1/u,O=1/p,U=1/v;return Sa.elements[0]*=E,Sa.elements[1]*=E,Sa.elements[2]*=E,Sa.elements[4]*=O,Sa.elements[5]*=O,Sa.elements[6]*=O,Sa.elements[8]*=U,Sa.elements[9]*=U,Sa.elements[10]*=U,n.setFromRotationMatrix(Sa),s.x=u,s.y=p,s.z=v,this}makePerspective(e,n,s,a,u,p,v=fl){const b=this.elements,E=2*u/(n-e),O=2*u/(s-a),U=(n+e)/(n-e),V=(s+a)/(s-a);let Q,se;if(v===fl)Q=-(p+u)/(p-u),se=-2*p*u/(p-u);else{if(2001!==v)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+v);Q=-p/(p-u),se=-p*u/(p-u)}return b[0]=E,b[4]=0,b[8]=U,b[12]=0,b[1]=0,b[5]=O,b[9]=V,b[13]=0,b[2]=0,b[6]=0,b[10]=Q,b[14]=se,b[3]=0,b[7]=0,b[11]=-1,b[15]=0,this}makeOrthographic(e,n,s,a,u,p,v=fl){const b=this.elements,E=1/(n-e),O=1/(s-a),U=1/(p-u),V=(n+e)*E,Q=(s+a)*O;let se,ye;if(v===fl)se=(p+u)*U,ye=-2*U;else{if(2001!==v)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+v);se=u*U,ye=-1*U}return b[0]=2*E,b[4]=0,b[8]=0,b[12]=-V,b[1]=0,b[5]=2*O,b[9]=0,b[13]=-Q,b[2]=0,b[6]=0,b[10]=ye,b[14]=-se,b[3]=0,b[7]=0,b[11]=0,b[15]=1,this}equals(e){const n=this.elements,s=e.elements;for(let a=0;a<16;a++)if(n[a]!==s[a])return!1;return!0}fromArray(e,n=0){for(let s=0;s<16;s++)this.elements[s]=e[s+n];return this}toArray(e=[],n=0){const s=this.elements;return e[n]=s[0],e[n+1]=s[1],e[n+2]=s[2],e[n+3]=s[3],e[n+4]=s[4],e[n+5]=s[5],e[n+6]=s[6],e[n+7]=s[7],e[n+8]=s[8],e[n+9]=s[9],e[n+10]=s[10],e[n+11]=s[11],e[n+12]=s[12],e[n+13]=s[13],e[n+14]=s[14],e[n+15]=s[15],e}}const to=new lt,Sa=new xr,bs=new lt(0,0,0),go=new lt(1,1,1),pa=new lt,vl=new lt,Wo=new lt,Ya=new xr,Nl=new vi;let oa=(()=>{class c{constructor(n=0,s=0,a=0,u=c.DEFAULT_ORDER){this.isEuler=!0,this._x=n,this._y=s,this._z=a,this._order=u}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get order(){return this._order}set order(n){this._order=n,this._onChangeCallback()}set(n,s,a,u=this._order){return this._x=n,this._y=s,this._z=a,this._order=u,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}setFromRotationMatrix(n,s=this._order,a=!0){const u=n.elements,p=u[0],v=u[4],b=u[8],E=u[1],O=u[5],U=u[9],V=u[2],Q=u[6],se=u[10];switch(s){case"XYZ":this._y=Math.asin(Rs(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(-U,se),this._z=Math.atan2(-v,p)):(this._x=Math.atan2(Q,O),this._z=0);break;case"YXZ":this._x=Math.asin(-Rs(U,-1,1)),Math.abs(U)<.9999999?(this._y=Math.atan2(b,se),this._z=Math.atan2(E,O)):(this._y=Math.atan2(-V,p),this._z=0);break;case"ZXY":this._x=Math.asin(Rs(Q,-1,1)),Math.abs(Q)<.9999999?(this._y=Math.atan2(-V,se),this._z=Math.atan2(-v,O)):(this._y=0,this._z=Math.atan2(E,p));break;case"ZYX":this._y=Math.asin(-Rs(V,-1,1)),Math.abs(V)<.9999999?(this._x=Math.atan2(Q,se),this._z=Math.atan2(E,p)):(this._x=0,this._z=Math.atan2(-v,O));break;case"YZX":this._z=Math.asin(Rs(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(-U,O),this._y=Math.atan2(-V,p)):(this._x=0,this._y=Math.atan2(b,se));break;case"XZY":this._z=Math.asin(-Rs(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(Q,O),this._y=Math.atan2(b,p)):(this._x=Math.atan2(-U,se),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,!0===a&&this._onChangeCallback(),this}setFromQuaternion(n,s,a){return Ya.makeRotationFromQuaternion(n),this.setFromRotationMatrix(Ya,s,a)}setFromVector3(n,s=this._order){return this.set(n.x,n.y,n.z,s)}reorder(n){return Nl.setFromEuler(this),this.setFromQuaternion(Nl,n)}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}fromArray(n){return this._x=n[0],this._y=n[1],this._z=n[2],void 0!==n[3]&&(this._order=n[3]),this._onChangeCallback(),this}toArray(n=[],s=0){return n[s]=this._x,n[s+1]=this._y,n[s+2]=this._z,n[s+3]=this._order,n}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return c.DEFAULT_ORDER="XYZ",c})();class lu{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return!!(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let cu=0;const ic=new lt,Kl=new vi,Pl=new xr,Zi=new lt,Gt=new lt,ni=new lt,Xi=new vi,vo=new lt(1,0,0),D=new lt(0,1,0),j=new lt(0,0,1),R={type:"added"},Y={type:"removed"},be={type:"childadded",child:null},Ve={type:"childremoved",child:null};let ht=(()=>{class c extends pl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:cu++}),this.uuid=Go(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=c.DEFAULT_UP.clone();const n=new lt,s=new oa,a=new vi,u=new lt(1,1,1);s._onChange(function p(){a.setFromEuler(s,!1)}),a._onChange(function v(){s.setFromQuaternion(a,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:u},modelViewMatrix:{value:new xr},normalMatrix:{value:new Ti}}),this.matrix=new xr,this.matrixWorld=new xr,this.matrixAutoUpdate=c.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=c.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new lu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(n){return this.quaternion.premultiply(n),this}setRotationFromAxisAngle(n,s){this.quaternion.setFromAxisAngle(n,s)}setRotationFromEuler(n){this.quaternion.setFromEuler(n,!0)}setRotationFromMatrix(n){this.quaternion.setFromRotationMatrix(n)}setRotationFromQuaternion(n){this.quaternion.copy(n)}rotateOnAxis(n,s){return Kl.setFromAxisAngle(n,s),this.quaternion.multiply(Kl),this}rotateOnWorldAxis(n,s){return Kl.setFromAxisAngle(n,s),this.quaternion.premultiply(Kl),this}rotateX(n){return this.rotateOnAxis(vo,n)}rotateY(n){return this.rotateOnAxis(D,n)}rotateZ(n){return this.rotateOnAxis(j,n)}translateOnAxis(n,s){return ic.copy(n).applyQuaternion(this.quaternion),this.position.add(ic.multiplyScalar(s)),this}translateX(n){return this.translateOnAxis(vo,n)}translateY(n){return this.translateOnAxis(D,n)}translateZ(n){return this.translateOnAxis(j,n)}localToWorld(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(this.matrixWorld)}worldToLocal(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(Pl.copy(this.matrixWorld).invert())}lookAt(n,s,a){n.isVector3?Zi.copy(n):Zi.set(n,s,a);const u=this.parent;this.updateWorldMatrix(!0,!1),Gt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pl.lookAt(Gt,Zi,this.up):Pl.lookAt(Zi,Gt,this.up),this.quaternion.setFromRotationMatrix(Pl),u&&(Pl.extractRotation(u.matrixWorld),Kl.setFromRotationMatrix(Pl),this.quaternion.premultiply(Kl.invert()))}add(n){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.removeFromParent(),n.parent=this,this.children.push(n),n.dispatchEvent(R),be.child=n,this.dispatchEvent(be),be.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)}remove(n){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.remove(arguments[a]);return this}const s=this.children.indexOf(n);return-1!==s&&(n.parent=null,this.children.splice(s,1),n.dispatchEvent(Y),Ve.child=n,this.dispatchEvent(Ve),Ve.child=null),this}removeFromParent(){const n=this.parent;return null!==n&&n.remove(this),this}clear(){return this.remove(...this.children)}attach(n){return this.updateWorldMatrix(!0,!1),Pl.copy(this.matrixWorld).invert(),null!==n.parent&&(n.parent.updateWorldMatrix(!0,!1),Pl.multiply(n.parent.matrixWorld)),n.applyMatrix4(Pl),n.removeFromParent(),n.parent=this,this.children.push(n),n.updateWorldMatrix(!1,!0),n.dispatchEvent(R),be.child=n,this.dispatchEvent(be),be.child=null,this}getObjectById(n){return this.getObjectByProperty("id",n)}getObjectByName(n){return this.getObjectByProperty("name",n)}getObjectByProperty(n,s){if(this[n]===s)return this;for(let a=0,u=this.children.length;a<u;a++){const v=this.children[a].getObjectByProperty(n,s);if(void 0!==v)return v}}getObjectsByProperty(n,s,a=[]){this[n]===s&&a.push(this);const u=this.children;for(let p=0,v=u.length;p<v;p++)u[p].getObjectsByProperty(n,s,a);return a}getWorldPosition(n){return this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gt,n,ni),n}getWorldScale(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gt,Xi,n),n}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return n.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(n){n(this);const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].traverse(n)}traverseVisible(n){if(!1===this.visible)return;n(this);const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].traverseVisible(n)}traverseAncestors(n){const s=this.parent;null!==s&&(n(s),s.traverseAncestors(n))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,n=!0);const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].updateMatrixWorld(n)}updateWorldMatrix(n,s){const a=this.parent;if(!0===n&&null!==a&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===s){const u=this.children;for(let p=0,v=u.length;p<v;p++)u[p].updateWorldMatrix(!1,!0)}}toJSON(n){const s=void 0===n||"string"==typeof n,a={};s&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},a.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const u={};function p(b,E){return void 0===b[E.uuid]&&(b[E.uuid]=E.toJSON(n)),E.uuid}if(u.uuid=this.uuid,u.type=this.type,""!==this.name&&(u.name=this.name),!0===this.castShadow&&(u.castShadow=!0),!0===this.receiveShadow&&(u.receiveShadow=!0),!1===this.visible&&(u.visible=!1),!1===this.frustumCulled&&(u.frustumCulled=!1),0!==this.renderOrder&&(u.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(u.userData=this.userData),u.layers=this.layers.mask,u.matrix=this.matrix.toArray(),u.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(u.matrixAutoUpdate=!1),this.isInstancedMesh&&(u.type="InstancedMesh",u.count=this.count,u.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(u.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(u.type="BatchedMesh",u.perObjectFrustumCulled=this.perObjectFrustumCulled,u.sortObjects=this.sortObjects,u.drawRanges=this._drawRanges,u.reservedRanges=this._reservedRanges,u.visibility=this._visibility,u.active=this._active,u.bounds=this._bounds.map(b=>({boxInitialized:b.boxInitialized,boxMin:b.box.min.toArray(),boxMax:b.box.max.toArray(),sphereInitialized:b.sphereInitialized,sphereRadius:b.sphere.radius,sphereCenter:b.sphere.center.toArray()})),u.maxInstanceCount=this._maxInstanceCount,u.maxVertexCount=this._maxVertexCount,u.maxIndexCount=this._maxIndexCount,u.geometryInitialized=this._geometryInitialized,u.geometryCount=this._geometryCount,u.matricesTexture=this._matricesTexture.toJSON(n),null!==this._colorsTexture&&(u.colorsTexture=this._colorsTexture.toJSON(n)),null!==this.boundingSphere&&(u.boundingSphere={center:u.boundingSphere.center.toArray(),radius:u.boundingSphere.radius}),null!==this.boundingBox&&(u.boundingBox={min:u.boundingBox.min.toArray(),max:u.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?u.background=this.background.toJSON():this.background.isTexture&&(u.background=this.background.toJSON(n).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(u.environment=this.environment.toJSON(n).uuid);else if(this.isMesh||this.isLine||this.isPoints){u.geometry=p(n.geometries,this.geometry);const b=this.geometry.parameters;if(void 0!==b&&void 0!==b.shapes){const E=b.shapes;if(Array.isArray(E))for(let O=0,U=E.length;O<U;O++)p(n.shapes,E[O]);else p(n.shapes,E)}}if(this.isSkinnedMesh&&(u.bindMode=this.bindMode,u.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(p(n.skeletons,this.skeleton),u.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const b=[];for(let E=0,O=this.material.length;E<O;E++)b.push(p(n.materials,this.material[E]));u.material=b}else u.material=p(n.materials,this.material);if(this.children.length>0){u.children=[];for(let b=0;b<this.children.length;b++)u.children.push(this.children[b].toJSON(n).object)}if(this.animations.length>0){u.animations=[];for(let b=0;b<this.animations.length;b++)u.animations.push(p(n.animations,this.animations[b]))}if(s){const b=v(n.geometries),E=v(n.materials),O=v(n.textures),U=v(n.images),V=v(n.shapes),Q=v(n.skeletons),se=v(n.animations),ye=v(n.nodes);b.length>0&&(a.geometries=b),E.length>0&&(a.materials=E),O.length>0&&(a.textures=O),U.length>0&&(a.images=U),V.length>0&&(a.shapes=V),Q.length>0&&(a.skeletons=Q),se.length>0&&(a.animations=se),ye.length>0&&(a.nodes=ye)}return a.object=u,a;function v(b){const E=[];for(const O in b){const U=b[O];delete U.metadata,E.push(U)}return E}}clone(n){return(new this.constructor).copy(this,n)}copy(n,s=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldAutoUpdate=n.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.animations=n.animations.slice(),this.userData=JSON.parse(JSON.stringify(n.userData)),!0===s)for(let a=0;a<n.children.length;a++)this.add(n.children[a].clone());return this}}return c.DEFAULT_UP=new lt(0,1,0),c.DEFAULT_MATRIX_AUTO_UPDATE=!0,c.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,c})();const Zt=new lt,Qt=new lt,Pn=new lt,Ar=new lt,Gr=new lt,Do=new lt,uu=new lt,vc=new lt,rc=new lt,Nc=new lt,Ol=new Wt,oh=new Wt,ah=new Wt;class Fl{constructor(e=new lt,n=new lt,s=new lt){this.a=e,this.b=n,this.c=s}static getNormal(e,n,s,a){a.subVectors(s,n),Zt.subVectors(e,n),a.cross(Zt);const u=a.lengthSq();return u>0?a.multiplyScalar(1/Math.sqrt(u)):a.set(0,0,0)}static getBarycoord(e,n,s,a,u){Zt.subVectors(a,n),Qt.subVectors(s,n),Pn.subVectors(e,n);const p=Zt.dot(Zt),v=Zt.dot(Qt),b=Zt.dot(Pn),E=Qt.dot(Qt),O=Qt.dot(Pn),U=p*E-v*v;if(0===U)return u.set(0,0,0),null;const V=1/U,Q=(E*b-v*O)*V,se=(p*O-v*b)*V;return u.set(1-Q-se,se,Q)}static containsPoint(e,n,s,a){return null!==this.getBarycoord(e,n,s,a,Ar)&&Ar.x>=0&&Ar.y>=0&&Ar.x+Ar.y<=1}static getInterpolation(e,n,s,a,u,p,v,b){return null===this.getBarycoord(e,n,s,a,Ar)?(b.x=0,b.y=0,"z"in b&&(b.z=0),"w"in b&&(b.w=0),null):(b.setScalar(0),b.addScaledVector(u,Ar.x),b.addScaledVector(p,Ar.y),b.addScaledVector(v,Ar.z),b)}static getInterpolatedAttribute(e,n,s,a,u,p){return Ol.setScalar(0),oh.setScalar(0),ah.setScalar(0),Ol.fromBufferAttribute(e,n),oh.fromBufferAttribute(e,s),ah.fromBufferAttribute(e,a),p.setScalar(0),p.addScaledVector(Ol,u.x),p.addScaledVector(oh,u.y),p.addScaledVector(ah,u.z),p}static isFrontFacing(e,n,s,a){return Zt.subVectors(s,n),Qt.subVectors(e,n),Zt.cross(Qt).dot(a)<0}set(e,n,s){return this.a.copy(e),this.b.copy(n),this.c.copy(s),this}setFromPointsAndIndices(e,n,s,a){return this.a.copy(e[n]),this.b.copy(e[s]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,n,s,a){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,s),this.c.fromBufferAttribute(e,a),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zt.subVectors(this.c,this.b),Qt.subVectors(this.a,this.b),.5*Zt.cross(Qt).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Fl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Fl.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,s,a,u){return Fl.getInterpolation(e,this.a,this.b,this.c,n,s,a,u)}containsPoint(e){return Fl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Fl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const s=this.a,a=this.b,u=this.c;let p,v;Gr.subVectors(a,s),Do.subVectors(u,s),vc.subVectors(e,s);const b=Gr.dot(vc),E=Do.dot(vc);if(b<=0&&E<=0)return n.copy(s);rc.subVectors(e,a);const O=Gr.dot(rc),U=Do.dot(rc);if(O>=0&&U<=O)return n.copy(a);const V=b*U-O*E;if(V<=0&&b>=0&&O<=0)return p=b/(b-O),n.copy(s).addScaledVector(Gr,p);Nc.subVectors(e,u);const Q=Gr.dot(Nc),se=Do.dot(Nc);if(se>=0&&Q<=se)return n.copy(u);const ye=Q*E-b*se;if(ye<=0&&E>=0&&se<=0)return v=E/(E-se),n.copy(s).addScaledVector(Do,v);const le=O*se-Q*U;if(le<=0&&U-O>=0&&Q-se>=0)return uu.subVectors(u,a),v=(U-O)/(U-O+(Q-se)),n.copy(a).addScaledVector(uu,v);const J=1/(le+ye+V);return p=ye*J,v=V*J,n.copy(s).addScaledVector(Gr,p).addScaledVector(Do,v)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const lh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_c={h:0,s:0,l:0},Gu={h:0,s:0,l:0};function Ll(c,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?c+6*(e-c)*n:n<.5?e:n<2/3?c+6*(e-c)*(2/3-n):c}class Oi{constructor(e,n,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,s)}set(e,n,s){if(void 0===n&&void 0===s){const a=e;a&&a.isColor?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a)}else this.setRGB(e,n,s);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Po){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,F.toWorkingColorSpace(this,n),this}setRGB(e,n,s,a=F.workingColorSpace){return this.r=e,this.g=n,this.b=s,F.toWorkingColorSpace(this,a),this}setHSL(e,n,s,a=F.workingColorSpace){if(e=function $l(c,e){return(c%e+e)%e}(e,1),n=Rs(n,0,1),s=Rs(s,0,1),0===n)this.r=this.g=this.b=s;else{const u=s<=.5?s*(1+n):s+n-s*n,p=2*s-u;this.r=Ll(p,u,e+1/3),this.g=Ll(p,u,e),this.b=Ll(p,u,e-1/3)}return F.toWorkingColorSpace(this,a),this}setStyle(e,n=Po){function s(u){void 0!==u&&parseFloat(u)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let u;const v=a[2];switch(a[1]){case"rgb":case"rgba":if(u=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(v))return s(u[4]),this.setRGB(Math.min(255,parseInt(u[1],10))/255,Math.min(255,parseInt(u[2],10))/255,Math.min(255,parseInt(u[3],10))/255,n);if(u=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(v))return s(u[4]),this.setRGB(Math.min(100,parseInt(u[1],10))/100,Math.min(100,parseInt(u[2],10))/100,Math.min(100,parseInt(u[3],10))/100,n);break;case"hsl":case"hsla":if(u=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(v))return s(u[4]),this.setHSL(parseFloat(u[1])/360,parseFloat(u[2])/100,parseFloat(u[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const u=a[1],p=u.length;if(3===p)return this.setRGB(parseInt(u.charAt(0),16)/15,parseInt(u.charAt(1),16)/15,parseInt(u.charAt(2),16)/15,n);if(6===p)return this.setHex(parseInt(u,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Po){const s=lh[e.toLowerCase()];return void 0!==s?this.setHex(s,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=re(e.r),this.g=re(e.g),this.b=re(e.b),this}copyLinearToSRGB(e){return this.r=Te(e.r),this.g=Te(e.g),this.b=Te(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Po){return F.fromWorkingColorSpace(qa.copy(this),e),65536*Math.round(Rs(255*qa.r,0,255))+256*Math.round(Rs(255*qa.g,0,255))+Math.round(Rs(255*qa.b,0,255))}getHexString(e=Po){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=F.workingColorSpace){F.fromWorkingColorSpace(qa.copy(this),n);const s=qa.r,a=qa.g,u=qa.b,p=Math.max(s,a,u),v=Math.min(s,a,u);let b,E;const O=(v+p)/2;if(v===p)b=0,E=0;else{const U=p-v;switch(E=O<=.5?U/(p+v):U/(2-p-v),p){case s:b=(a-u)/U+(a<u?6:0);break;case a:b=(u-s)/U+2;break;case u:b=(s-a)/U+4}b/=6}return e.h=b,e.s=E,e.l=O,e}getRGB(e,n=F.workingColorSpace){return F.fromWorkingColorSpace(qa.copy(this),n),e.r=qa.r,e.g=qa.g,e.b=qa.b,e}getStyle(e=Po){F.fromWorkingColorSpace(qa.copy(this),e);const n=qa.r,s=qa.g,a=qa.b;return e!==Po?`color(${e} ${n.toFixed(3)} ${s.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(255*n)},${Math.round(255*s)},${Math.round(255*a)})`}offsetHSL(e,n,s){return this.getHSL(_c),this.setHSL(_c.h+e,_c.s+n,_c.l+s)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,s){return this.r=e.r+(n.r-e.r)*s,this.g=e.g+(n.g-e.g)*s,this.b=e.b+(n.b-e.b)*s,this}lerpHSL(e,n){this.getHSL(_c),e.getHSL(Gu);const s=Me(_c.h,Gu.h,n),a=Me(_c.s,Gu.s,n),u=Me(_c.l,Gu.l,n);return this.setHSL(s,a,u),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,s=this.g,a=this.b,u=e.elements;return this.r=u[0]*n+u[3]*s+u[6]*a,this.g=u[1]*n+u[4]*s+u[7]*a,this.b=u[2]*n+u[5]*s+u[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const qa=new Oi;Oi.NAMES=lh;let mp=0;class il extends pl{static get type(){return"Material"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:mp++}),this.uuid=Go(),this.name="",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Oi(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=xa,this.stencilZFail=xa,this.stencilZPass=xa,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const n in e){const s=e[n];if(void 0===s){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const a=this[n];void 0!==a?a&&a.isColor?a.set(s):a&&a.isVector3&&s&&s.isVector3?a.copy(s):this[n]=s:console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`)}}toJSON(e){const n=void 0===e||"string"==typeof e;n&&(e={textures:{},images:{}});const s={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function a(u){const p=[];for(const v in u){const b=u[v];delete b.metadata,p.push(b)}return p}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),void 0!==this.sheen&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(s.dispersion=this.dispersion),void 0!==this.iridescence&&(s.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(s.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(s.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(s.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(s.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(e).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(e).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(e).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(e).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(e).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(s.combine=this.combine)),void 0!==this.envMapRotation&&(s.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(s.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(s.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(s.size=this.size),null!==this.shadowSide&&(s.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(s.blending=this.blending),0!==this.side&&(s.side=this.side),!0===this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=!0),204!==this.blendSrc&&(s.blendSrc=this.blendSrc),205!==this.blendDst&&(s.blendDst=this.blendDst),100!==this.blendEquation&&(s.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(s.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(s.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(s.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(s.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(s.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(s.depthFunc=this.depthFunc),!1===this.depthTest&&(s.depthTest=this.depthTest),!1===this.depthWrite&&(s.depthWrite=this.depthWrite),!1===this.colorWrite&&(s.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(s.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(s.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(s.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(s.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==xa&&(s.stencilFail=this.stencilFail),this.stencilZFail!==xa&&(s.stencilZFail=this.stencilZFail),this.stencilZPass!==xa&&(s.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(s.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.alphaHash&&(s.alphaHash=!0),!0===this.alphaToCoverage&&(s.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=!0),!0===this.forceSinglePass&&(s.forceSinglePass=!0),!0===this.wireframe&&(s.wireframe=!0),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(s.flatShading=!0),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),!1===this.fog&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData),n){const u=a(e.textures),p=a(e.images);u.length>0&&(s.textures=u),p.length>0&&(s.images=p)}return s}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let s=null;if(null!==n){const a=n.length;s=new Array(a);for(let u=0;u!==a;++u)s[u]=n[u].clone()}return this.clippingPlanes=s,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Wu extends il{static get type(){return"MeshBasicMaterial"}constructor(e){super(),this.isMeshBasicMaterial=!0,this.color=new Oi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new oa,this.combine=yi,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Oo=new lt,Pc=new Mn;class ms{constructor(e,n,s=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=void 0!==e?e.length/n:0,this.normalized=s,this.usage=35044,this.updateRanges=[],this.gpuType=Us,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,s){e*=this.itemSize,s*=n.itemSize;for(let a=0,u=this.itemSize;a<u;a++)this.array[e+a]=n.array[s+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let n=0,s=this.count;n<s;n++)Pc.fromBufferAttribute(this,n),Pc.applyMatrix3(e),this.setXY(n,Pc.x,Pc.y);else if(3===this.itemSize)for(let n=0,s=this.count;n<s;n++)Oo.fromBufferAttribute(this,n),Oo.applyMatrix3(e),this.setXYZ(n,Oo.x,Oo.y,Oo.z);return this}applyMatrix4(e){for(let n=0,s=this.count;n<s;n++)Oo.fromBufferAttribute(this,n),Oo.applyMatrix4(e),this.setXYZ(n,Oo.x,Oo.y,Oo.z);return this}applyNormalMatrix(e){for(let n=0,s=this.count;n<s;n++)Oo.fromBufferAttribute(this,n),Oo.applyNormalMatrix(e),this.setXYZ(n,Oo.x,Oo.y,Oo.z);return this}transformDirection(e){for(let n=0,s=this.count;n<s;n++)Oo.fromBufferAttribute(this,n),Oo.transformDirection(e),this.setXYZ(n,Oo.x,Oo.y,Oo.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let s=this.array[e*this.itemSize+n];return this.normalized&&(s=Ws(s,this.array)),s}setComponent(e,n,s){return this.normalized&&(s=yr(s,this.array)),this.array[e*this.itemSize+n]=s,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Ws(n,this.array)),n}setX(e,n){return this.normalized&&(n=yr(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Ws(n,this.array)),n}setY(e,n){return this.normalized&&(n=yr(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Ws(n,this.array)),n}setZ(e,n){return this.normalized&&(n=yr(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Ws(n,this.array)),n}setW(e,n){return this.normalized&&(n=yr(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,s){return e*=this.itemSize,this.normalized&&(n=yr(n,this.array),s=yr(s,this.array)),this.array[e+0]=n,this.array[e+1]=s,this}setXYZ(e,n,s,a){return e*=this.itemSize,this.normalized&&(n=yr(n,this.array),s=yr(s,this.array),a=yr(a,this.array)),this.array[e+0]=n,this.array[e+1]=s,this.array[e+2]=a,this}setXYZW(e,n,s,a,u){return e*=this.itemSize,this.normalized&&(n=yr(n,this.array),s=yr(s,this.array),a=yr(a,this.array),u=yr(u,this.array)),this.array[e+0]=n,this.array[e+1]=s,this.array[e+2]=a,this.array[e+3]=u,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class Md extends ms{constructor(e,n,s){super(new Uint16Array(e),n,s)}}class gp extends ms{constructor(e,n,s){super(new Uint32Array(e),n,s)}}class Ji extends ms{constructor(e,n,s){super(new Float32Array(e),n,s)}}let ch=0;const kl=new xr,uh=new ht,yc=new lt,rr=new ti,Cd=new ti,rl=new lt;class Ms extends pl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ch++}),this.uuid=Go(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Ga(e)?gp:Md)(e,1):e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,n,s=0){this.groups.push({start:e,count:n,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;void 0!==n&&(n.applyMatrix4(e),n.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const u=(new Ti).getNormalMatrix(e);s.applyNormalMatrix(u),s.needsUpdate=!0}const a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(e),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return kl.makeRotationFromQuaternion(e),this.applyMatrix4(kl),this}rotateX(e){return kl.makeRotationX(e),this.applyMatrix4(kl),this}rotateY(e){return kl.makeRotationY(e),this.applyMatrix4(kl),this}rotateZ(e){return kl.makeRotationZ(e),this.applyMatrix4(kl),this}translate(e,n,s){return kl.makeTranslation(e,n,s),this.applyMatrix4(kl),this}scale(e,n,s){return kl.makeScale(e,n,s),this.applyMatrix4(kl),this}lookAt(e){return uh.lookAt(e),uh.updateMatrix(),this.applyMatrix4(uh.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(yc).negate(),this.translate(yc.x,yc.y,yc.z),this}setFromPoints(e){const n=this.getAttribute("position");if(void 0===n){const s=[];for(let a=0,u=e.length;a<u;a++){const p=e[a];s.push(p.x,p.y,p.z||0)}this.setAttribute("position",new Ji(s,3))}else{for(let s=0,a=n.count;s<a;s++){const u=e[s];n.setXYZ(s,u.x,u.y,u.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ti);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new lt(-1/0,-1/0,-1/0),new lt(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++)rr.setFromBufferAttribute(n[s]),this.morphTargetsRelative?(rl.addVectors(this.boundingBox.min,rr.min),this.boundingBox.expandByPoint(rl),rl.addVectors(this.boundingBox.max,rr.max),this.boundingBox.expandByPoint(rl)):(this.boundingBox.expandByPoint(rr.min),this.boundingBox.expandByPoint(rr.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Co);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new lt,1/0);if(e){const s=this.boundingSphere.center;if(rr.setFromBufferAttribute(e),n)for(let u=0,p=n.length;u<p;u++)Cd.setFromBufferAttribute(n[u]),this.morphTargetsRelative?(rl.addVectors(rr.min,Cd.min),rr.expandByPoint(rl),rl.addVectors(rr.max,Cd.max),rr.expandByPoint(rl)):(rr.expandByPoint(Cd.min),rr.expandByPoint(Cd.max));rr.getCenter(s);let a=0;for(let u=0,p=e.count;u<p;u++)rl.fromBufferAttribute(e,u),a=Math.max(a,s.distanceToSquared(rl));if(n)for(let u=0,p=n.length;u<p;u++){const v=n[u],b=this.morphTargetsRelative;for(let E=0,O=v.count;E<O;E++)rl.fromBufferAttribute(v,E),b&&(yc.fromBufferAttribute(e,E),rl.add(yc)),a=Math.max(a,s.distanceToSquared(rl))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(null===e||void 0===n.position||void 0===n.normal||void 0===n.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const s=n.position,a=n.normal,u=n.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ms(new Float32Array(4*s.count),4));const p=this.getAttribute("tangent"),v=[],b=[];for(let Et=0;Et<s.count;Et++)v[Et]=new lt,b[Et]=new lt;const E=new lt,O=new lt,U=new lt,V=new Mn,Q=new Mn,se=new Mn,ye=new lt,le=new lt;function J(Et,tt,je){E.fromBufferAttribute(s,Et),O.fromBufferAttribute(s,tt),U.fromBufferAttribute(s,je),V.fromBufferAttribute(u,Et),Q.fromBufferAttribute(u,tt),se.fromBufferAttribute(u,je),O.sub(E),U.sub(E),Q.sub(V),se.sub(V);const Nt=1/(Q.x*se.y-se.x*Q.y);isFinite(Nt)&&(ye.copy(O).multiplyScalar(se.y).addScaledVector(U,-Q.y).multiplyScalar(Nt),le.copy(U).multiplyScalar(Q.x).addScaledVector(O,-se.x).multiplyScalar(Nt),v[Et].add(ye),v[tt].add(ye),v[je].add(ye),b[Et].add(le),b[tt].add(le),b[je].add(le))}let He=this.groups;0===He.length&&(He=[{start:0,count:e.count}]);for(let Et=0,tt=He.length;Et<tt;++Et){const je=He[Et],Nt=je.start;for(let ln=Nt,yn=Nt+je.count;ln<yn;ln+=3)J(e.getX(ln+0),e.getX(ln+1),e.getX(ln+2))}const Le=new lt,Pe=new lt,Ct=new lt,ft=new lt;function bt(Et){Ct.fromBufferAttribute(a,Et),ft.copy(Ct);const tt=v[Et];Le.copy(tt),Le.sub(Ct.multiplyScalar(Ct.dot(tt))).normalize(),Pe.crossVectors(ft,tt);const Nt=Pe.dot(b[Et])<0?-1:1;p.setXYZW(Et,Le.x,Le.y,Le.z,Nt)}for(let Et=0,tt=He.length;Et<tt;++Et){const je=He[Et],Nt=je.start;for(let ln=Nt,yn=Nt+je.count;ln<yn;ln+=3)bt(e.getX(ln+0)),bt(e.getX(ln+1)),bt(e.getX(ln+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(void 0!==n){let s=this.getAttribute("normal");if(void 0===s)s=new ms(new Float32Array(3*n.count),3),this.setAttribute("normal",s);else for(let V=0,Q=s.count;V<Q;V++)s.setXYZ(V,0,0,0);const a=new lt,u=new lt,p=new lt,v=new lt,b=new lt,E=new lt,O=new lt,U=new lt;if(e)for(let V=0,Q=e.count;V<Q;V+=3){const se=e.getX(V+0),ye=e.getX(V+1),le=e.getX(V+2);a.fromBufferAttribute(n,se),u.fromBufferAttribute(n,ye),p.fromBufferAttribute(n,le),O.subVectors(p,u),U.subVectors(a,u),O.cross(U),v.fromBufferAttribute(s,se),b.fromBufferAttribute(s,ye),E.fromBufferAttribute(s,le),v.add(O),b.add(O),E.add(O),s.setXYZ(se,v.x,v.y,v.z),s.setXYZ(ye,b.x,b.y,b.z),s.setXYZ(le,E.x,E.y,E.z)}else for(let V=0,Q=n.count;V<Q;V+=3)a.fromBufferAttribute(n,V+0),u.fromBufferAttribute(n,V+1),p.fromBufferAttribute(n,V+2),O.subVectors(p,u),U.subVectors(a,u),O.cross(U),s.setXYZ(V+0,O.x,O.y,O.z),s.setXYZ(V+1,O.x,O.y,O.z),s.setXYZ(V+2,O.x,O.y,O.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,s=e.count;n<s;n++)rl.fromBufferAttribute(e,n),rl.normalize(),e.setXYZ(n,rl.x,rl.y,rl.z)}toNonIndexed(){function e(v,b){const E=v.array,O=v.itemSize,U=v.normalized,V=new E.constructor(b.length*O);let Q=0,se=0;for(let ye=0,le=b.length;ye<le;ye++){Q=v.isInterleavedBufferAttribute?b[ye]*v.data.stride+v.offset:b[ye]*O;for(let J=0;J<O;J++)V[se++]=E[Q++]}return new ms(V,O,U)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Ms,s=this.index.array,a=this.attributes;for(const v in a){const E=e(a[v],s);n.setAttribute(v,E)}const u=this.morphAttributes;for(const v in u){const b=[],E=u[v];for(let O=0,U=E.length;O<U;O++){const Q=e(E[O],s);b.push(Q)}n.morphAttributes[v]=b}n.morphTargetsRelative=this.morphTargetsRelative;const p=this.groups;for(let v=0,b=p.length;v<b;v++){const E=p[v];n.addGroup(E.start,E.count,E.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const b=this.parameters;for(const E in b)void 0!==b[E]&&(e[E]=b[E]);return e}e.data={attributes:{}};const n=this.index;null!==n&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const s=this.attributes;for(const b in s)e.data.attributes[b]=s[b].toJSON(e.data);const a={};let u=!1;for(const b in this.morphAttributes){const E=this.morphAttributes[b],O=[];for(let U=0,V=E.length;U<V;U++)O.push(E[U].toJSON(e.data));O.length>0&&(a[b]=O,u=!0)}u&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));const v=this.boundingSphere;return null!==v&&(e.data.boundingSphere={center:v.center.toArray(),radius:v.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const s=e.index;null!==s&&this.setIndex(s.clone(n));const a=e.attributes;for(const E in a)this.setAttribute(E,a[E].clone(n));const u=e.morphAttributes;for(const E in u){const O=[],U=u[E];for(let V=0,Q=U.length;V<Q;V++)O.push(U[V].clone(n));this.morphAttributes[E]=O}this.morphTargetsRelative=e.morphTargetsRelative;const p=e.groups;for(let E=0,O=p.length;E<O;E++){const U=p[E];this.addGroup(U.start,U.count,U.materialIndex)}const v=e.boundingBox;null!==v&&(this.boundingBox=v.clone());const b=e.boundingSphere;return null!==b&&(this.boundingSphere=b.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const cm=new xr,$u=new gc,wd=new Co,ju=new lt,cf=new lt,uf=new lt,df=new lt,vp=new lt,hf=new lt,_n=new lt,Cs=new lt;class no extends ht{constructor(e=new Ms,n=new Wu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,s=Object.keys(n);if(s.length>0){const a=n[s[0]];if(void 0!==a){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,p=a.length;u<p;u++){const v=a[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[v]=u}}}}getVertexPosition(e,n){const s=this.geometry,u=s.morphAttributes.position,p=s.morphTargetsRelative;n.fromBufferAttribute(s.attributes.position,e);const v=this.morphTargetInfluences;if(u&&v){hf.set(0,0,0);for(let b=0,E=u.length;b<E;b++){const O=v[b];0!==O&&(vp.fromBufferAttribute(u[b],e),hf.addScaledVector(p?vp:vp.sub(n),O))}n.add(hf)}return n}raycast(e,n){const s=this.geometry,u=this.matrixWorld;void 0!==this.material&&(null===s.boundingSphere&&s.computeBoundingSphere(),wd.copy(s.boundingSphere),wd.applyMatrix4(u),$u.copy(e.ray).recast(e.near),(!1!==wd.containsPoint($u.origin)||!(null===$u.intersectSphere(wd,ju)||$u.origin.distanceToSquared(ju)>(e.far-e.near)**2))&&(cm.copy(u).invert(),$u.copy(e.ray).applyMatrix4(cm),(null===s.boundingBox||!1!==$u.intersectsBox(s.boundingBox))&&this._computeIntersections(e,n,$u)))}_computeIntersections(e,n,s){let a;const u=this.geometry,p=this.material,v=u.index,b=u.attributes.position,E=u.attributes.uv,O=u.attributes.uv1,U=u.attributes.normal,V=u.groups,Q=u.drawRange;if(null!==v)if(Array.isArray(p))for(let se=0,ye=V.length;se<ye;se++){const le=V[se],J=p[le.materialIndex];for(let Pe=Math.max(le.start,Q.start),Ct=Math.min(v.count,Math.min(le.start+le.count,Q.start+Q.count));Pe<Ct;Pe+=3)a=Hs(this,J,e,s,E,O,U,v.getX(Pe),v.getX(Pe+1),v.getX(Pe+2)),a&&(a.faceIndex=Math.floor(Pe/3),a.face.materialIndex=le.materialIndex,n.push(a))}else for(let le=Math.max(0,Q.start),J=Math.min(v.count,Q.start+Q.count);le<J;le+=3)a=Hs(this,p,e,s,E,O,U,v.getX(le),v.getX(le+1),v.getX(le+2)),a&&(a.faceIndex=Math.floor(le/3),n.push(a));else if(void 0!==b)if(Array.isArray(p))for(let se=0,ye=V.length;se<ye;se++){const le=V[se],J=p[le.materialIndex];for(let Pe=Math.max(le.start,Q.start),Ct=Math.min(b.count,Math.min(le.start+le.count,Q.start+Q.count));Pe<Ct;Pe+=3)a=Hs(this,J,e,s,E,O,U,Pe,Pe+1,Pe+2),a&&(a.faceIndex=Math.floor(Pe/3),a.face.materialIndex=le.materialIndex,n.push(a))}else for(let le=Math.max(0,Q.start),J=Math.min(b.count,Q.start+Q.count);le<J;le+=3)a=Hs(this,p,e,s,E,O,U,le,le+1,le+2),a&&(a.faceIndex=Math.floor(le/3),n.push(a))}}function Hs(c,e,n,s,a,u,p,v,b,E){c.getVertexPosition(v,cf),c.getVertexPosition(b,uf),c.getVertexPosition(E,df);const O=function Fo(c,e,n,s,a,u,p,v){let b;if(b=1===e.side?s.intersectTriangle(p,u,a,!0,v):s.intersectTriangle(a,u,p,0===e.side,v),null===b)return null;Cs.copy(v),Cs.applyMatrix4(c.matrixWorld);const E=n.ray.origin.distanceTo(Cs);return E<n.near||E>n.far?null:{distance:E,point:Cs.clone(),object:c}}(c,e,n,s,cf,uf,df,_n);if(O){const U=new lt;Fl.getBarycoord(_n,cf,uf,df,U),a&&(O.uv=Fl.getInterpolatedAttribute(a,v,b,E,U,new Mn)),u&&(O.uv1=Fl.getInterpolatedAttribute(u,v,b,E,U,new Mn)),p&&(O.normal=Fl.getInterpolatedAttribute(p,v,b,E,U,new lt),O.normal.dot(s.direction)>0&&O.normal.multiplyScalar(-1));const V={a:v,b,c:E,normal:new lt,materialIndex:0};Fl.getNormal(cf,uf,df,V.normal),O.face=V,O.barycoord=U}return O}class du extends Ms{constructor(e=1,n=1,s=1,a=1,u=1,p=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:s,widthSegments:a,heightSegments:u,depthSegments:p};const v=this;a=Math.floor(a),u=Math.floor(u),p=Math.floor(p);const b=[],E=[],O=[],U=[];let V=0,Q=0;function se(ye,le,J,He,Le,Pe,Ct,ft,bt,Et,tt){const je=Pe/bt,Nt=Ct/Et,mn=Pe/2,ln=Ct/2,yn=ft/2,Ln=bt+1,sn=Et+1;let ri=0,xn=0;const Qn=new lt;for(let Ii=0;Ii<sn;Ii++){const Vi=Ii*Nt-ln;for(let os=0;os<Ln;os++)Qn[ye]=(os*je-mn)*He,Qn[le]=Vi*Le,Qn[J]=yn,E.push(Qn.x,Qn.y,Qn.z),Qn[ye]=0,Qn[le]=0,Qn[J]=ft>0?1:-1,O.push(Qn.x,Qn.y,Qn.z),U.push(os/bt),U.push(1-Ii/Et),ri+=1}for(let Ii=0;Ii<Et;Ii++)for(let Vi=0;Vi<bt;Vi++){const Zs=V+Vi+Ln*(Ii+1),An=V+(Vi+1)+Ln*(Ii+1),mi=V+(Vi+1)+Ln*Ii;b.push(V+Vi+Ln*Ii,Zs,mi),b.push(Zs,An,mi),xn+=6}v.addGroup(Q,xn,tt),Q+=xn,V+=ri}se("z","y","x",-1,-1,s,n,e,p,u,0),se("z","y","x",1,-1,s,n,-e,p,u,1),se("x","z","y",1,1,e,s,n,a,p,2),se("x","z","y",1,-1,e,s,-n,a,p,3),se("x","y","z",1,-1,e,n,s,a,u,4),se("x","y","z",-1,-1,e,n,-s,a,u,5),this.setIndex(b),this.setAttribute("position",new Ji(E,3)),this.setAttribute("normal",new Ji(O,3)),this.setAttribute("uv",new Ji(U,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new du(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function sc(c){const e={};for(const n in c){e[n]={};for(const s in c[n]){const a=c[n][s];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][s]=null):e[n][s]=a.clone():e[n][s]=Array.isArray(a)?a.slice():a}}return e}function $o(c){const e={};for(let n=0;n<c.length;n++){const s=sc(c[n]);for(const a in s)e[a]=s[a]}return e}function Xu(c){const e=c.getRenderTarget();return null===e?c.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:F.workingColorSpace}const gv={clone:sc,merge:$o};class Lo extends il{static get type(){return"ShaderMaterial"}constructor(e){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=sc(e.uniforms),this.uniformsGroups=function ff(c){const e=[];for(let n=0;n<c.length;n++)e.push(c[n].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const a in this.uniforms){const p=this.uniforms[a].value;n.uniforms[a]=p&&p.isTexture?{type:"t",value:p.toJSON(e).uuid}:p&&p.isColor?{type:"c",value:p.getHex()}:p&&p.isVector2?{type:"v2",value:p.toArray()}:p&&p.isVector3?{type:"v3",value:p.toArray()}:p&&p.isVector4?{type:"v4",value:p.toArray()}:p&&p.isMatrix3?{type:"m3",value:p.toArray()}:p&&p.isMatrix4?{type:"m4",value:p.toArray()}:{value:p}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const s={};for(const a in this.extensions)!0===this.extensions[a]&&(s[a]=!0);return Object.keys(s).length>0&&(n.extensions=s),n}}class bc extends ht{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new xr,this.projectionMatrix=new xr,this.projectionMatrixInverse=new xr,this.coordinateSystem=fl}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const jc=new lt,oc=new Mn,Fc=new Mn;class aa extends bc{constructor(e=50,n=1,s=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=s,this.far=a,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=2*Ea*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ml*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ea*Math.atan(Math.tan(.5*ml*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,s){jc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(jc.x,jc.y).multiplyScalar(-e/jc.z),jc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(jc.x,jc.y).multiplyScalar(-e/jc.z)}getViewSize(e,n){return this.getViewBounds(e,oc,Fc),n.subVectors(Fc,oc)}setViewOffset(e,n,s,a,u,p){this.aspect=e/n,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=s,this.view.offsetY=a,this.view.width=u,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(.5*ml*this.fov)/this.zoom,s=2*n,a=this.aspect*s,u=-.5*a;const p=this.view;if(null!==this.view&&this.view.enabled){const b=p.fullWidth,E=p.fullHeight;u+=p.offsetX*a/b,n-=p.offsetY*s/E,a*=p.width/b,s*=p.height/E}const v=this.filmOffset;0!==v&&(u+=e*v/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+a,n,n-s,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,null!==this.view&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}class hh extends ht{constructor(e,n,s){super(),this.type="CubeCamera",this.renderTarget=s,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new aa(-90,1,e,n);a.layers=this.layers,this.add(a);const u=new aa(-90,1,e,n);u.layers=this.layers,this.add(u);const p=new aa(-90,1,e,n);p.layers=this.layers,this.add(p);const v=new aa(-90,1,e,n);v.layers=this.layers,this.add(v);const b=new aa(-90,1,e,n);b.layers=this.layers,this.add(b);const E=new aa(-90,1,e,n);E.layers=this.layers,this.add(E)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[s,a,u,p,v,b]=n;for(const E of n)this.remove(E);if(e===fl)s.up.set(0,1,0),s.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),u.up.set(0,0,-1),u.lookAt(0,1,0),p.up.set(0,0,1),p.lookAt(0,-1,0),v.up.set(0,1,0),v.lookAt(0,0,1),b.up.set(0,1,0),b.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);s.up.set(0,-1,0),s.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),u.up.set(0,0,1),u.lookAt(0,1,0),p.up.set(0,0,-1),p.lookAt(0,-1,0),v.up.set(0,-1,0),v.lookAt(0,0,1),b.up.set(0,-1,0),b.lookAt(0,0,-1)}for(const E of n)this.add(E),E.updateMatrixWorld()}update(e,n){null===this.parent&&this.updateMatrixWorld();const{renderTarget:s,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[u,p,v,b,E,O]=this.children,U=e.getRenderTarget(),V=e.getActiveCubeFace(),Q=e.getActiveMipmapLevel(),se=e.xr.enabled;e.xr.enabled=!1;const ye=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,e.setRenderTarget(s,0,a),e.render(n,u),e.setRenderTarget(s,1,a),e.render(n,p),e.setRenderTarget(s,2,a),e.render(n,v),e.setRenderTarget(s,3,a),e.render(n,b),e.setRenderTarget(s,4,a),e.render(n,E),s.texture.generateMipmaps=ye,e.setRenderTarget(s,5,a),e.render(n,O),e.setRenderTarget(U,V,Q),e.xr.enabled=se,s.texture.needsPMREMUpdate=!0}}class xu extends Ht{constructor(e,n,s,a,u,p,v,b,E,O){super(e=void 0!==e?e:[],n=void 0!==n?n:at,s,a,u,p,v,b,E,O),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Ku extends dr{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const s={width:e,height:e,depth:1};this.texture=new xu([s,s,s,s,s,s],n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:zn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const s_uniforms={tEquirect:{value:null}},s_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",s_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new du(5,5,5),u=new Lo({name:"CubemapFromEquirect",uniforms:sc(s_uniforms),vertexShader:s_vertexShader,fragmentShader:s_fragmentShader,side:1,blending:0});u.uniforms.tEquirect.value=n;const p=new no(a,u),v=n.minFilter;return n.minFilter===Sr&&(n.minFilter=zn),new hh(1,10,this).update(e,p),n.minFilter=v,p.geometry.dispose(),p.material.dispose(),this}clear(e,n,s,a){const u=e.getRenderTarget();for(let p=0;p<6;p++)e.setRenderTarget(this,p),e.clear(n,s,a);e.setRenderTarget(u)}}const xc=new lt,Dd=new lt,vv=new Ti;class Eu{constructor(e=new lt(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,s,a){return this.normal.set(e,n,s),this.constant=a,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,s){const a=xc.subVectors(s,n).cross(Dd.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const s=e.delta(xc),a=this.normal.dot(s);if(0===a)return 0===this.distanceToPoint(e.start)?n.copy(e.start):null;const u=-(e.start.dot(this.normal)+this.constant)/a;return u<0||u>1?null:n.copy(e.start).addScaledVector(s,u)}intersectsLine(e){const n=this.distanceToPoint(e.start),s=this.distanceToPoint(e.end);return n<0&&s>0||s<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const s=n||vv.getNormalMatrix(e),a=this.coplanarPoint(xc).applyMatrix4(e),u=this.normal.applyMatrix3(s).normalize();return this.constant=-a.dot(u),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const hu=new Co,fh=new lt;class ph{constructor(e=new Eu,n=new Eu,s=new Eu,a=new Eu,u=new Eu,p=new Eu){this.planes=[e,n,s,a,u,p]}set(e,n,s,a,u,p){const v=this.planes;return v[0].copy(e),v[1].copy(n),v[2].copy(s),v[3].copy(a),v[4].copy(u),v[5].copy(p),this}copy(e){const n=this.planes;for(let s=0;s<6;s++)n[s].copy(e.planes[s]);return this}setFromProjectionMatrix(e,n=fl){const s=this.planes,a=e.elements,u=a[0],p=a[1],v=a[2],b=a[3],E=a[4],O=a[5],U=a[6],V=a[7],Q=a[8],se=a[9],ye=a[10],le=a[11],J=a[12],He=a[13],Le=a[14],Pe=a[15];if(s[0].setComponents(b-u,V-E,le-Q,Pe-J).normalize(),s[1].setComponents(b+u,V+E,le+Q,Pe+J).normalize(),s[2].setComponents(b+p,V+O,le+se,Pe+He).normalize(),s[3].setComponents(b-p,V-O,le-se,Pe-He).normalize(),s[4].setComponents(b-v,V-U,le-ye,Pe-Le).normalize(),n===fl)s[5].setComponents(b+v,V+U,le+ye,Pe+Le).normalize();else{if(2001!==n)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);s[5].setComponents(v,U,ye,Le).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),hu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;null===n.boundingSphere&&n.computeBoundingSphere(),hu.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(hu)}intersectsSprite(e){return hu.center.set(0,0,0),hu.radius=.7071067811865476,hu.applyMatrix4(e.matrixWorld),this.intersectsSphere(hu)}intersectsSphere(e){const n=this.planes,s=e.center,a=-e.radius;for(let u=0;u<6;u++)if(n[u].distanceToPoint(s)<a)return!1;return!0}intersectsBox(e){const n=this.planes;for(let s=0;s<6;s++){const a=n[s];if(fh.x=a.normal.x>0?e.max.x:e.min.x,fh.y=a.normal.y>0?e.max.y:e.min.y,fh.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(fh)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let s=0;s<6;s++)if(n[s].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function _p(){let c=null,e=!1,n=null,s=null;function a(u,p){n(u,p),s=c.requestAnimationFrame(a)}return{start:function(){!0!==e&&null!==n&&(s=c.requestAnimationFrame(a),e=!0)},stop:function(){c.cancelAnimationFrame(s),e=!1},setAnimationLoop:function(u){n=u},setContext:function(u){c=u}}}function um(c){const e=new WeakMap;return{get:function a(v){return v.isInterleavedBufferAttribute&&(v=v.data),e.get(v)},remove:function u(v){v.isInterleavedBufferAttribute&&(v=v.data);const b=e.get(v);b&&(c.deleteBuffer(b.buffer),e.delete(v))},update:function p(v,b){if(v.isInterleavedBufferAttribute&&(v=v.data),v.isGLBufferAttribute){const O=e.get(v);return void((!O||O.version<v.version)&&e.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version}))}const E=e.get(v);if(void 0===E)e.set(v,function n(v,b){const E=v.array,O=v.usage,U=E.byteLength,V=c.createBuffer();let Q;if(c.bindBuffer(b,V),c.bufferData(b,E,O),v.onUploadCallback(),E instanceof Float32Array)Q=c.FLOAT;else if(E instanceof Uint16Array)Q=v.isFloat16BufferAttribute?c.HALF_FLOAT:c.UNSIGNED_SHORT;else if(E instanceof Int16Array)Q=c.SHORT;else if(E instanceof Uint32Array)Q=c.UNSIGNED_INT;else if(E instanceof Int32Array)Q=c.INT;else if(E instanceof Int8Array)Q=c.BYTE;else if(E instanceof Uint8Array)Q=c.UNSIGNED_BYTE;else{if(!(E instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+E);Q=c.UNSIGNED_BYTE}return{buffer:V,type:Q,bytesPerElement:E.BYTES_PER_ELEMENT,version:v.version,size:U}}(v,b));else if(E.version<v.version){if(E.size!==v.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function s(v,b,E){const O=b.array,U=b.updateRanges;if(c.bindBuffer(E,v),0===U.length)c.bufferSubData(E,0,O);else{U.sort((Q,se)=>Q.start-se.start);let V=0;for(let Q=1;Q<U.length;Q++){const se=U[V],ye=U[Q];ye.start<=se.start+se.count+1?se.count=Math.max(se.count,ye.start+ye.count-se.start):(++V,U[V]=ye)}U.length=V+1;for(let Q=0,se=U.length;Q<se;Q++){const ye=U[Q];c.bufferSubData(E,ye.start*O.BYTES_PER_ELEMENT,O,ye.start,ye.count)}b.clearUpdateRanges()}b.onUploadCallback()})(E.buffer,v,b),E.version=v.version}}}}class Qu extends Ms{constructor(e=1,n=1,s=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:s,heightSegments:a};const u=e/2,p=n/2,v=Math.floor(s),b=Math.floor(a),E=v+1,O=b+1,U=e/v,V=n/b,Q=[],se=[],ye=[],le=[];for(let J=0;J<O;J++){const He=J*V-p;for(let Le=0;Le<E;Le++)se.push(Le*U-u,-He,0),ye.push(0,0,1),le.push(Le/v),le.push(1-J/b)}for(let J=0;J<b;J++)for(let He=0;He<v;He++){const Pe=He+E*(J+1),Ct=He+1+E*(J+1),ft=He+1+E*J;Q.push(He+E*J,Pe,ft),Q.push(Pe,Ct,ft)}this.setIndex(Q),this.setAttribute("position",new Ji(se,3)),this.setAttribute("normal",new Ji(ye,3)),this.setAttribute("uv",new Ji(le,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qu(e.width,e.height,e.widthSegments,e.heightSegments)}}const rs={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Ci={common:{diffuse:{value:new Oi(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ti},alphaMap:{value:null},alphaMapTransform:{value:new Ti},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ti}},envmap:{envMap:{value:null},envMapRotation:{value:new Ti},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ti}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ti}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ti},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ti},normalScale:{value:new Mn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ti},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ti}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ti}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ti}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Oi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Oi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ti},alphaTest:{value:0},uvTransform:{value:new Ti}},sprite:{diffuse:{value:new Oi(16777215)},opacity:{value:1},center:{value:new Mn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ti},alphaMap:{value:null},alphaMapTransform:{value:new Ti},alphaTest:{value:0}}},m={basic:{uniforms:$o([Ci.common,Ci.specularmap,Ci.envmap,Ci.aomap,Ci.lightmap,Ci.fog]),vertexShader:rs.meshbasic_vert,fragmentShader:rs.meshbasic_frag},lambert:{uniforms:$o([Ci.common,Ci.specularmap,Ci.envmap,Ci.aomap,Ci.lightmap,Ci.emissivemap,Ci.bumpmap,Ci.normalmap,Ci.displacementmap,Ci.fog,Ci.lights,{emissive:{value:new Oi(0)}}]),vertexShader:rs.meshlambert_vert,fragmentShader:rs.meshlambert_frag},phong:{uniforms:$o([Ci.common,Ci.specularmap,Ci.envmap,Ci.aomap,Ci.lightmap,Ci.emissivemap,Ci.bumpmap,Ci.normalmap,Ci.displacementmap,Ci.fog,Ci.lights,{emissive:{value:new Oi(0)},specular:{value:new Oi(1118481)},shininess:{value:30}}]),vertexShader:rs.meshphong_vert,fragmentShader:rs.meshphong_frag},standard:{uniforms:$o([Ci.common,Ci.envmap,Ci.aomap,Ci.lightmap,Ci.emissivemap,Ci.bumpmap,Ci.normalmap,Ci.displacementmap,Ci.roughnessmap,Ci.metalnessmap,Ci.fog,Ci.lights,{emissive:{value:new Oi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rs.meshphysical_vert,fragmentShader:rs.meshphysical_frag},toon:{uniforms:$o([Ci.common,Ci.aomap,Ci.lightmap,Ci.emissivemap,Ci.bumpmap,Ci.normalmap,Ci.displacementmap,Ci.gradientmap,Ci.fog,Ci.lights,{emissive:{value:new Oi(0)}}]),vertexShader:rs.meshtoon_vert,fragmentShader:rs.meshtoon_frag},matcap:{uniforms:$o([Ci.common,Ci.bumpmap,Ci.normalmap,Ci.displacementmap,Ci.fog,{matcap:{value:null}}]),vertexShader:rs.meshmatcap_vert,fragmentShader:rs.meshmatcap_frag},points:{uniforms:$o([Ci.points,Ci.fog]),vertexShader:rs.points_vert,fragmentShader:rs.points_frag},dashed:{uniforms:$o([Ci.common,Ci.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rs.linedashed_vert,fragmentShader:rs.linedashed_frag},depth:{uniforms:$o([Ci.common,Ci.displacementmap]),vertexShader:rs.depth_vert,fragmentShader:rs.depth_frag},normal:{uniforms:$o([Ci.common,Ci.bumpmap,Ci.normalmap,Ci.displacementmap,{opacity:{value:1}}]),vertexShader:rs.meshnormal_vert,fragmentShader:rs.meshnormal_frag},sprite:{uniforms:$o([Ci.sprite,Ci.fog]),vertexShader:rs.sprite_vert,fragmentShader:rs.sprite_frag},background:{uniforms:{uvTransform:{value:new Ti},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:rs.background_vert,fragmentShader:rs.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ti}},vertexShader:rs.backgroundCube_vert,fragmentShader:rs.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rs.cube_vert,fragmentShader:rs.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rs.equirect_vert,fragmentShader:rs.equirect_frag},distanceRGBA:{uniforms:$o([Ci.common,Ci.displacementmap,{referencePosition:{value:new lt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rs.distanceRGBA_vert,fragmentShader:rs.distanceRGBA_frag},shadow:{uniforms:$o([Ci.lights,Ci.fog,{color:{value:new Oi(0)},opacity:{value:1}}]),vertexShader:rs.shadow_vert,fragmentShader:rs.shadow_frag}};m.physical={uniforms:$o([m.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ti},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ti},clearcoatNormalScale:{value:new Mn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ti},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ti},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ti},sheen:{value:0},sheenColor:{value:new Oi(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ti},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ti},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ti},transmissionSamplerSize:{value:new Mn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ti},attenuationDistance:{value:0},attenuationColor:{value:new Oi(0)},specularColor:{value:new Oi(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ti},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ti},anisotropyVector:{value:new Mn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ti}}]),vertexShader:rs.meshphysical_vert,fragmentShader:rs.meshphysical_frag};const N={r:0,b:0,g:0},f=new oa,_=new xr;function w(c,e,n,s,a,u,p){const v=new Oi(0);let E,O,b=!0===u?0:1,U=null,V=0,Q=null;function se(He){let Le=!0===He.isScene?He.background:null;return Le&&Le.isTexture&&(Le=(He.backgroundBlurriness>0?n:e).get(Le)),Le}function J(He,Le){He.getRGB(N,Xu(c)),s.buffers.color.setClear(N.r,N.g,N.b,Le,p)}return{getClearColor:function(){return v},setClearColor:function(He,Le=1){v.set(He),b=Le,J(v,b)},getClearAlpha:function(){return b},setClearAlpha:function(He){b=He,J(v,b)},render:function ye(He){let Le=!1;const Pe=se(He);null===Pe?J(v,b):Pe&&Pe.isColor&&(J(Pe,1),Le=!0);const Ct=c.xr.getEnvironmentBlendMode();"additive"===Ct?s.buffers.color.setClear(0,0,0,1,p):"alpha-blend"===Ct&&s.buffers.color.setClear(0,0,0,0,p),(c.autoClear||Le)&&(s.buffers.depth.setTest(!0),s.buffers.depth.setMask(!0),s.buffers.color.setMask(!0),c.clear(c.autoClearColor,c.autoClearDepth,c.autoClearStencil))},addToRenderList:function le(He,Le){const Pe=se(Le);Pe&&(Pe.isCubeTexture||Pe.mapping===kn)?(void 0===O&&(O=new no(new du(1,1,1),new Lo({name:"BackgroundCubeMaterial",uniforms:sc(m.backgroundCube.uniforms),vertexShader:m.backgroundCube.vertexShader,fragmentShader:m.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),O.geometry.deleteAttribute("normal"),O.geometry.deleteAttribute("uv"),O.onBeforeRender=function(Ct,ft,bt){this.matrixWorld.copyPosition(bt.matrixWorld)},Object.defineProperty(O.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(O)),f.copy(Le.backgroundRotation),f.x*=-1,f.y*=-1,f.z*=-1,Pe.isCubeTexture&&!1===Pe.isRenderTargetTexture&&(f.y*=-1,f.z*=-1),O.material.uniforms.envMap.value=Pe,O.material.uniforms.flipEnvMap.value=Pe.isCubeTexture&&!1===Pe.isRenderTargetTexture?-1:1,O.material.uniforms.backgroundBlurriness.value=Le.backgroundBlurriness,O.material.uniforms.backgroundIntensity.value=Le.backgroundIntensity,O.material.uniforms.backgroundRotation.value.setFromMatrix4(_.makeRotationFromEuler(f)),O.material.toneMapped=F.getTransfer(Pe.colorSpace)!==_s,(U!==Pe||V!==Pe.version||Q!==c.toneMapping)&&(O.material.needsUpdate=!0,U=Pe,V=Pe.version,Q=c.toneMapping),O.layers.enableAll(),He.unshift(O,O.geometry,O.material,0,0,null)):Pe&&Pe.isTexture&&(void 0===E&&(E=new no(new Qu(2,2),new Lo({name:"BackgroundMaterial",uniforms:sc(m.background.uniforms),vertexShader:m.background.vertexShader,fragmentShader:m.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),E.geometry.deleteAttribute("normal"),Object.defineProperty(E.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(E)),E.material.uniforms.t2D.value=Pe,E.material.uniforms.backgroundIntensity.value=Le.backgroundIntensity,E.material.toneMapped=F.getTransfer(Pe.colorSpace)!==_s,!0===Pe.matrixAutoUpdate&&Pe.updateMatrix(),E.material.uniforms.uvTransform.value.copy(Pe.matrix),(U!==Pe||V!==Pe.version||Q!==c.toneMapping)&&(E.material.needsUpdate=!0,U=Pe,V=Pe.version,Q=c.toneMapping),E.layers.enableAll(),He.unshift(E,E.geometry,E.material,0,0,null))}}}function _e(c,e){const n=c.getParameter(c.MAX_VERTEX_ATTRIBS),s={},a=V(null);let u=a,p=!1;function E(je){return c.bindVertexArray(je)}function O(je){return c.deleteVertexArray(je)}function V(je){const Nt=[],mn=[],ln=[];for(let yn=0;yn<n;yn++)Nt[yn]=0,mn[yn]=0,ln[yn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Nt,enabledAttributes:mn,attributeDivisors:ln,object:je,attributes:{},index:null}}function ye(){const je=u.newAttributes;for(let Nt=0,mn=je.length;Nt<mn;Nt++)je[Nt]=0}function le(je){J(je,0)}function J(je,Nt){const ln=u.enabledAttributes,yn=u.attributeDivisors;u.newAttributes[je]=1,0===ln[je]&&(c.enableVertexAttribArray(je),ln[je]=1),yn[je]!==Nt&&(c.vertexAttribDivisor(je,Nt),yn[je]=Nt)}function He(){const je=u.newAttributes,Nt=u.enabledAttributes;for(let mn=0,ln=Nt.length;mn<ln;mn++)Nt[mn]!==je[mn]&&(c.disableVertexAttribArray(mn),Nt[mn]=0)}function Le(je,Nt,mn,ln,yn,Ln,sn){!0===sn?c.vertexAttribIPointer(je,Nt,mn,yn,Ln):c.vertexAttribPointer(je,Nt,mn,ln,yn,Ln)}function Et(){tt(),p=!0,u!==a&&(u=a,E(u.object))}function tt(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:function v(je,Nt,mn,ln,yn){let Ln=!1;const sn=function U(je,Nt,mn){const ln=!0===mn.wireframe;let yn=s[je.id];void 0===yn&&(yn={},s[je.id]=yn);let Ln=yn[Nt.id];void 0===Ln&&(Ln={},yn[Nt.id]=Ln);let sn=Ln[ln];return void 0===sn&&(sn=V(function b(){return c.createVertexArray()}()),Ln[ln]=sn),sn}(ln,mn,Nt);u!==sn&&(u=sn,E(u.object)),Ln=function Q(je,Nt,mn,ln){const yn=u.attributes,Ln=Nt.attributes;let sn=0;const ri=mn.getAttributes();for(const xn in ri)if(ri[xn].location>=0){const Ii=yn[xn];let Vi=Ln[xn];if(void 0===Vi&&("instanceMatrix"===xn&&je.instanceMatrix&&(Vi=je.instanceMatrix),"instanceColor"===xn&&je.instanceColor&&(Vi=je.instanceColor)),void 0===Ii||Ii.attribute!==Vi||Vi&&Ii.data!==Vi.data)return!0;sn++}return u.attributesNum!==sn||u.index!==ln}(je,ln,mn,yn),Ln&&function se(je,Nt,mn,ln){const yn={},Ln=Nt.attributes;let sn=0;const ri=mn.getAttributes();for(const xn in ri)if(ri[xn].location>=0){let Ii=Ln[xn];void 0===Ii&&("instanceMatrix"===xn&&je.instanceMatrix&&(Ii=je.instanceMatrix),"instanceColor"===xn&&je.instanceColor&&(Ii=je.instanceColor));const Vi={};Vi.attribute=Ii,Ii&&Ii.data&&(Vi.data=Ii.data),yn[xn]=Vi,sn++}u.attributes=yn,u.attributesNum=sn,u.index=ln}(je,ln,mn,yn),null!==yn&&e.update(yn,c.ELEMENT_ARRAY_BUFFER),(Ln||p)&&(p=!1,function Pe(je,Nt,mn,ln){ye();const yn=ln.attributes,Ln=mn.getAttributes(),sn=Nt.defaultAttributeValues;for(const ri in Ln){const xn=Ln[ri];if(xn.location>=0){let Qn=yn[ri];if(void 0===Qn&&("instanceMatrix"===ri&&je.instanceMatrix&&(Qn=je.instanceMatrix),"instanceColor"===ri&&je.instanceColor&&(Qn=je.instanceColor)),void 0!==Qn){const Ii=Qn.normalized,Vi=Qn.itemSize,os=e.get(Qn);if(void 0===os)continue;const Zs=os.buffer,An=os.type,mi=os.bytesPerElement,er=An===c.INT||An===c.UNSIGNED_INT||Qn.gpuType===Mo;if(Qn.isInterleavedBufferAttribute){const _i=Qn.data,Cr=_i.stride,$r=Qn.offset;if(_i.isInstancedInterleavedBuffer){for(let jr=0;jr<xn.locationSize;jr++)J(xn.location+jr,_i.meshPerAttribute);!0!==je.isInstancedMesh&&void 0===ln._maxInstanceCount&&(ln._maxInstanceCount=_i.meshPerAttribute*_i.count)}else for(let jr=0;jr<xn.locationSize;jr++)le(xn.location+jr);c.bindBuffer(c.ARRAY_BUFFER,Zs);for(let jr=0;jr<xn.locationSize;jr++)Le(xn.location+jr,Vi/xn.locationSize,An,Ii,Cr*mi,($r+Vi/xn.locationSize*jr)*mi,er)}else{if(Qn.isInstancedBufferAttribute){for(let _i=0;_i<xn.locationSize;_i++)J(xn.location+_i,Qn.meshPerAttribute);!0!==je.isInstancedMesh&&void 0===ln._maxInstanceCount&&(ln._maxInstanceCount=Qn.meshPerAttribute*Qn.count)}else for(let _i=0;_i<xn.locationSize;_i++)le(xn.location+_i);c.bindBuffer(c.ARRAY_BUFFER,Zs);for(let _i=0;_i<xn.locationSize;_i++)Le(xn.location+_i,Vi/xn.locationSize,An,Ii,Vi*mi,Vi/xn.locationSize*_i*mi,er)}}else if(void 0!==sn){const Ii=sn[ri];if(void 0!==Ii)switch(Ii.length){case 2:c.vertexAttrib2fv(xn.location,Ii);break;case 3:c.vertexAttrib3fv(xn.location,Ii);break;case 4:c.vertexAttrib4fv(xn.location,Ii);break;default:c.vertexAttrib1fv(xn.location,Ii)}}}}He()}(je,Nt,mn,ln),null!==yn&&c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,e.get(yn).buffer))},reset:Et,resetDefaultState:tt,dispose:function Ct(){Et();for(const je in s){const Nt=s[je];for(const mn in Nt){const ln=Nt[mn];for(const yn in ln)O(ln[yn].object),delete ln[yn];delete Nt[mn]}delete s[je]}},releaseStatesOfGeometry:function ft(je){if(void 0===s[je.id])return;const Nt=s[je.id];for(const mn in Nt){const ln=Nt[mn];for(const yn in ln)O(ln[yn].object),delete ln[yn];delete Nt[mn]}delete s[je.id]},releaseStatesOfProgram:function bt(je){for(const Nt in s){const mn=s[Nt];if(void 0===mn[je.id])continue;const ln=mn[je.id];for(const yn in ln)O(ln[yn].object),delete ln[yn];delete mn[je.id]}},initAttributes:ye,enableAttribute:le,disableUnusedAttributes:He}}function Ue(c,e,n){let s;function p(E,O,U){0!==U&&(c.drawArraysInstanced(s,E,O,U),n.update(O,s,U))}this.setMode=function a(E){s=E},this.render=function u(E,O){c.drawArrays(s,E,O),n.update(O,s,1)},this.renderInstances=p,this.renderMultiDraw=function v(E,O,U){if(0===U)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(s,E,0,O,0,U);let Q=0;for(let se=0;se<U;se++)Q+=O[se];n.update(Q,s,1)},this.renderMultiDrawInstances=function b(E,O,U,V){if(0===U)return;const Q=e.get("WEBGL_multi_draw");if(null===Q)for(let se=0;se<E.length;se++)p(E[se],O[se],V[se]);else{Q.multiDrawArraysInstancedWEBGL(s,E,0,O,0,V,0,U);let se=0;for(let ye=0;ye<U;ye++)se+=O[ye]*V[ye];n.update(se,s,1)}}}function Tt(c,e,n,s){let a;function b(bt){if("highp"===bt){if(c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_FLOAT).precision>0&&c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT).precision>0)return"highp";bt="mediump"}return"mediump"===bt&&c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_FLOAT).precision>0&&c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let E=void 0!==n.precision?n.precision:"highp";const O=b(E);O!==E&&(console.warn("THREE.WebGLRenderer:",E,"not supported, using",O,"instead."),E=O);const U=!0===n.logarithmicDepthBuffer,V=!0===n.reverseDepthBuffer&&e.has("EXT_clip_control"),Q=c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS),se=c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function u(){if(void 0!==a)return a;if(!0===e.has("EXT_texture_filter_anisotropic")){const bt=e.get("EXT_texture_filter_anisotropic");a=c.getParameter(bt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a},getMaxPrecision:b,textureFormatReadable:function p(bt){return!(bt!==pt&&s.convert(bt)!==c.getParameter(c.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function v(bt){const Et=bt===vs&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(bt!==Fs&&s.convert(bt)!==c.getParameter(c.IMPLEMENTATION_COLOR_READ_TYPE)&&bt!==Us&&!Et)},precision:E,logarithmicDepthBuffer:U,reverseDepthBuffer:V,maxTextures:Q,maxVertexTextures:se,maxTextureSize:c.getParameter(c.MAX_TEXTURE_SIZE),maxCubemapSize:c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:c.getParameter(c.MAX_VERTEX_ATTRIBS),maxVertexUniforms:c.getParameter(c.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:c.getParameter(c.MAX_VARYING_VECTORS),maxFragmentUniforms:c.getParameter(c.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:se>0,maxSamples:c.getParameter(c.MAX_SAMPLES)}}function Ut(c){const e=this;let n=null,s=0,a=!1,u=!1;const p=new Eu,v=new Ti,b={value:null,needsUpdate:!1};function O(U,V,Q,se){const ye=null!==U?U.length:0;let le=null;if(0!==ye){if(le=b.value,!0!==se||null===le){const J=Q+4*ye,He=V.matrixWorldInverse;v.getNormalMatrix(He),(null===le||le.length<J)&&(le=new Float32Array(J));for(let Le=0,Pe=Q;Le!==ye;++Le,Pe+=4)p.copy(U[Le]).applyMatrix4(He,v),p.normal.toArray(le,Pe),le[Pe+3]=p.constant}b.value=le,b.needsUpdate=!0}return e.numPlanes=ye,e.numIntersection=0,le}this.uniform=b,this.numPlanes=0,this.numIntersection=0,this.init=function(U,V){const Q=0!==U.length||V||0!==s||a;return a=V,s=U.length,Q},this.beginShadows=function(){u=!0,O(null)},this.endShadows=function(){u=!1},this.setGlobalState=function(U,V){n=O(U,V,0)},this.setState=function(U,V,Q){const se=U.clippingPlanes,ye=U.clipIntersection,le=U.clipShadows,J=c.get(U);if(!a||null===se||0===se.length||u&&!le)u?O(null):function E(){b.value!==n&&(b.value=n,b.needsUpdate=s>0),e.numPlanes=s,e.numIntersection=0}();else{const He=u?0:s,Le=4*He;let Pe=J.clippingState||null;b.value=Pe,Pe=O(se,V,Le,Q);for(let Ct=0;Ct!==Le;++Ct)Pe[Ct]=n[Ct];J.clippingState=Pe,this.numIntersection=ye?this.numPlanes:0,this.numPlanes+=He}}}function tn(c){let e=new WeakMap;function n(p,v){return 303===v?p.mapping=at:304===v&&(p.mapping=St),p}function a(p){const v=p.target;v.removeEventListener("dispose",a);const b=e.get(v);void 0!==b&&(e.delete(v),b.dispose())}return{get:function s(p){if(p&&p.isTexture){const v=p.mapping;if(303===v||304===v){if(e.has(p))return n(e.get(p).texture,p.mapping);{const b=p.image;if(b&&b.height>0){const E=new Ku(b.height);return E.fromEquirectangularTexture(c,p),e.set(p,E),p.addEventListener("dispose",a),n(E.texture,p.mapping)}return null}}}return p},dispose:function u(){e=new WeakMap}}}class un extends bc{constructor(e=-1,n=1,s=1,a=-1,u=.1,p=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=s,this.bottom=a,this.near=u,this.far=p,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,n,s,a,u,p){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=s,this.view.offsetY=a,this.view.width=u,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let u=s-e,p=s+e,v=a+n,b=a-n;if(null!==this.view&&this.view.enabled){const E=(this.right-this.left)/this.view.fullWidth/this.zoom,O=(this.top-this.bottom)/this.view.fullHeight/this.zoom;u+=E*this.view.offsetX,p=u+E*this.view.width,v-=O*this.view.offsetY,b=v-O*this.view.height}this.projectionMatrix.makeOrthographic(u,p,v,b,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,null!==this.view&&(n.object.view=Object.assign({},this.view)),n}}const si=[.125,.215,.35,.446,.526,.582],es=new un,Mr=new Oi;let ds=null,ss=0,xs=0,wo=!1;const Wr=(1+Math.sqrt(5))/2,Es=1/Wr,io=[new lt(-Wr,Es,0),new lt(Wr,Es,0),new lt(-Es,0,Wr),new lt(Es,0,Wr),new lt(0,Wr,-Es),new lt(0,Wr,Es),new lt(-1,1,-1),new lt(1,1,-1),new lt(-1,1,1),new lt(1,1,1)];class Ao{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,s=.1,a=100){ds=this._renderer.getRenderTarget(),ss=this._renderer.getActiveCubeFace(),xs=this._renderer.getActiveMipmapLevel(),wo=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,s,a,u),n>0&&this._blur(u,0,0,n),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Pa(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Ec(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ds,ss,xs),this._renderer.xr.enabled=wo,e.scissorTest=!1,la(e,0,0,e.width,e.height)}_fromTexture(e,n){this._setSize(e.mapping===at||e.mapping===St?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),ds=this._renderer.getRenderTarget(),ss=this._renderer.getActiveCubeFace(),xs=this._renderer.getActiveMipmapLevel(),wo=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const s=n||this._allocateTargets();return this._textureToCubeUV(e,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,s={magFilter:zn,minFilter:zn,generateMipmaps:!1,type:vs,format:pt,colorSpace:Ho,depthBuffer:!1},a=Na(e,n,s);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Na(e,n,s);const{_lodMax:u}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Io(c){const e=[],n=[],s=[];let a=c;const u=c-4+1+si.length;for(let p=0;p<u;p++){const v=Math.pow(2,a);n.push(v);let b=1/v;p>c-4?b=si[p-c+4-1]:0===p&&(b=0),s.push(b);const E=1/(v-2),O=-E,U=1+E,V=[O,O,U,O,U,U,O,O,U,U,O,U],Q=6,se=6,ye=3,le=2,J=1,He=new Float32Array(ye*se*Q),Le=new Float32Array(le*se*Q),Pe=new Float32Array(J*se*Q);for(let ft=0;ft<Q;ft++){const bt=ft%3*2/3-1,Et=ft>2?0:-1;He.set([bt,Et,0,bt+2/3,Et,0,bt+2/3,Et+1,0,bt,Et,0,bt+2/3,Et+1,0,bt,Et+1,0],ye*se*ft),Le.set(V,le*se*ft),Pe.set([ft,ft,ft,ft,ft,ft],J*se*ft)}const Ct=new Ms;Ct.setAttribute("position",new ms(He,ye)),Ct.setAttribute("uv",new ms(Le,le)),Ct.setAttribute("faceIndex",new ms(Pe,J)),e.push(Ct),a>4&&a--}return{lodPlanes:e,sizeLods:n,sigmas:s}}(u)),this._blurMaterial=function yl(c,e,n){const s=new Float32Array(20),a=new lt(0,1,0);return new Lo({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${c}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(u,e,n)}return a}_compileMaterial(e){const n=new no(this._lodPlanes[0],e);this._renderer.compile(n,es)}_sceneToCubeUV(e,n,s,a){const v=new aa(90,1,n,s),b=[1,-1,1,1,1,1],E=[1,1,1,-1,-1,-1],O=this._renderer,U=O.autoClear,V=O.toneMapping;O.getClearColor(Mr),O.toneMapping=cr,O.autoClear=!1;const Q=new Wu({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),se=new no(new du,Q);let ye=!1;const le=e.background;le?le.isColor&&(Q.color.copy(le),e.background=null,ye=!0):(Q.color.copy(Mr),ye=!0);for(let J=0;J<6;J++){const He=J%3;0===He?(v.up.set(0,b[J],0),v.lookAt(E[J],0,0)):1===He?(v.up.set(0,0,b[J]),v.lookAt(0,E[J],0)):(v.up.set(0,b[J],0),v.lookAt(0,0,E[J]));const Le=this._cubeSize;la(a,He*Le,J>2?Le:0,Le,Le),O.setRenderTarget(a),ye&&O.render(se,v),O.render(e,v)}se.geometry.dispose(),se.material.dispose(),O.toneMapping=V,O.autoClear=U,e.background=le}_textureToCubeUV(e,n){const s=this._renderer,a=e.mapping===at||e.mapping===St;a?(null===this._cubemapMaterial&&(this._cubemapMaterial=Pa()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Ec());const u=a?this._cubemapMaterial:this._equirectMaterial,p=new no(this._lodPlanes[0],u);u.uniforms.envMap.value=e;const b=this._cubeSize;la(n,0,0,3*b,2*b),s.setRenderTarget(n),s.render(p,es)}_applyPMREM(e){const n=this._renderer,s=n.autoClear;n.autoClear=!1;const a=this._lodPlanes.length;for(let u=1;u<a;u++){const p=Math.sqrt(this._sigmas[u]*this._sigmas[u]-this._sigmas[u-1]*this._sigmas[u-1]);this._blur(e,u-1,u,p,io[(a-u-1)%io.length])}n.autoClear=s}_blur(e,n,s,a,u){const p=this._pingPongRenderTarget;this._halfBlur(e,p,n,s,a,"latitudinal",u),this._halfBlur(p,e,s,s,a,"longitudinal",u)}_halfBlur(e,n,s,a,u,p,v){const b=this._renderer,E=this._blurMaterial;"latitudinal"!==p&&"longitudinal"!==p&&console.error("blur direction must be either latitudinal or longitudinal!");const U=new no(this._lodPlanes[a],E),V=E.uniforms,Q=this._sizeLods[s]-1,se=isFinite(u)?Math.PI/(2*Q):2*Math.PI/39,ye=u/se,le=isFinite(u)?1+Math.floor(3*ye):20;le>20&&console.warn(`sigmaRadians, ${u}, is too large and will clip, as it requested ${le} samples when the maximum is set to 20`);const J=[];let He=0;for(let bt=0;bt<20;++bt){const Et=bt/ye,tt=Math.exp(-Et*Et/2);J.push(tt),0===bt?He+=tt:bt<le&&(He+=2*tt)}for(let bt=0;bt<J.length;bt++)J[bt]=J[bt]/He;V.envMap.value=e.texture,V.samples.value=le,V.weights.value=J,V.latitudinal.value="latitudinal"===p,v&&(V.poleAxis.value=v);const{_lodMax:Le}=this;V.dTheta.value=se,V.mipInt.value=Le-s;const Pe=this._sizeLods[a];la(n,3*Pe*(a>Le-4?a-Le+4:0),4*(this._cubeSize-Pe),3*Pe,2*Pe),b.setRenderTarget(n),b.render(U,es)}}function Na(c,e,n){const s=new dr(c,e,n);return s.texture.mapping=kn,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function la(c,e,n,s,a){c.viewport.set(e,n,s,a),c.scissor.set(e,n,s,a)}function Ec(){return new Lo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Pa(){return new Lo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Qc(c){let e=new WeakMap,n=null;function u(v){const b=v.target;b.removeEventListener("dispose",u);const E=e.get(b);void 0!==E&&(e.delete(b),E.dispose())}return{get:function s(v){if(v&&v.isTexture){const b=v.mapping,E=303===b||304===b,O=b===at||b===St;if(E||O){let U=e.get(v);if(v.isRenderTargetTexture&&v.pmremVersion!==(void 0!==U?U.texture.pmremVersion:0))return null===n&&(n=new Ao(c)),U=E?n.fromEquirectangular(v,U):n.fromCubemap(v,U),U.texture.pmremVersion=v.pmremVersion,e.set(v,U),U.texture;if(void 0!==U)return U.texture;{const Q=v.image;return E&&Q&&Q.height>0||O&&Q&&function a(v){let b=0;for(let O=0;O<6;O++)void 0!==v[O]&&b++;return 6===b}(Q)?(null===n&&(n=new Ao(c)),U=E?n.fromEquirectangular(v):n.fromCubemap(v),U.texture.pmremVersion=v.pmremVersion,e.set(v,U),v.addEventListener("dispose",u),U.texture):null}}}return v},dispose:function p(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function bl(c){const e={};function n(s){if(void 0!==e[s])return e[s];let a;switch(s){case"WEBGL_depth_texture":a=c.getExtension("WEBGL_depth_texture")||c.getExtension("MOZ_WEBGL_depth_texture")||c.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=c.getExtension("WEBGL_compressed_texture_s3tc")||c.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=c.getExtension("WEBGL_compressed_texture_pvrtc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=c.getExtension(s)}return e[s]=a,a}return{has:function(s){return null!==n(s)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(s){const a=n(s);return null===a&&Aa("THREE.WebGLRenderer: "+s+" extension not supported."),a}}}function sl(c,e,n,s){const a={},u=new WeakMap;function p(U){const V=U.target;null!==V.index&&e.remove(V.index);for(const se in V.attributes)e.remove(V.attributes[se]);for(const se in V.morphAttributes){const ye=V.morphAttributes[se];for(let le=0,J=ye.length;le<J;le++)e.remove(ye[le])}V.removeEventListener("dispose",p),delete a[V.id];const Q=u.get(V);Q&&(e.remove(Q),u.delete(V)),s.releaseStatesOfGeometry(V),!0===V.isInstancedBufferGeometry&&delete V._maxInstanceCount,n.memory.geometries--}function E(U){const V=[],Q=U.index,se=U.attributes.position;let ye=0;if(null!==Q){const He=Q.array;ye=Q.version;for(let Le=0,Pe=He.length;Le<Pe;Le+=3){const Ct=He[Le+0],ft=He[Le+1],bt=He[Le+2];V.push(Ct,ft,ft,bt,bt,Ct)}}else{if(void 0===se)return;ye=se.version;for(let Le=0,Pe=se.array.length/3-1;Le<Pe;Le+=3){const Ct=Le+0,ft=Le+1,bt=Le+2;V.push(Ct,ft,ft,bt,bt,Ct)}}const le=new(Ga(V)?gp:Md)(V,1);le.version=ye;const J=u.get(U);J&&e.remove(J),u.set(U,le)}return{get:function v(U,V){return!0===a[V.id]||(V.addEventListener("dispose",p),a[V.id]=!0,n.memory.geometries++),V},update:function b(U){const V=U.attributes;for(const se in V)e.update(V[se],c.ARRAY_BUFFER);const Q=U.morphAttributes;for(const se in Q){const ye=Q[se];for(let le=0,J=ye.length;le<J;le++)e.update(ye[le],c.ARRAY_BUFFER)}},getWireframeAttribute:function O(U){const V=u.get(U);if(V){const Q=U.index;null!==Q&&V.version<Q.version&&E(U)}else E(U);return u.get(U)}}}function id(c,e,n){let s,u,p;function E(V,Q,se){0!==se&&(c.drawElementsInstanced(s,Q,u,V*p,se),n.update(Q,s,se))}this.setMode=function a(V){s=V},this.setIndex=function v(V){u=V.type,p=V.bytesPerElement},this.render=function b(V,Q){c.drawElements(s,Q,u,V*p),n.update(Q,s,1)},this.renderInstances=E,this.renderMultiDraw=function O(V,Q,se){if(0===se)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(s,Q,0,u,V,0,se);let le=0;for(let J=0;J<se;J++)le+=Q[J];n.update(le,s,1)},this.renderMultiDrawInstances=function U(V,Q,se,ye){if(0===se)return;const le=e.get("WEBGL_multi_draw");if(null===le)for(let J=0;J<V.length;J++)E(V[J]/p,Q[J],ye[J]);else{le.multiDrawElementsInstancedWEBGL(s,Q,0,u,V,0,ye,0,se);let J=0;for(let He=0;He<se;He++)J+=Q[He]*ye[He];n.update(J,s,1)}}}function Yc(c){const n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function a(){n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function s(u,p,v){switch(n.calls++,p){case c.TRIANGLES:n.triangles+=v*(u/3);break;case c.LINES:n.lines+=v*(u/2);break;case c.LINE_STRIP:n.lines+=v*(u-1);break;case c.LINE_LOOP:n.lines+=v*u;break;case c.POINTS:n.points+=v*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",p)}}}}function mu(c,e,n){const s=new WeakMap,a=new Wt;return{update:function u(p,v,b){const E=p.morphTargetInfluences,O=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,U=void 0!==O?O.length:0;let V=s.get(v);if(void 0===V||V.count!==U){let tt=function(){bt.dispose(),s.delete(v),v.removeEventListener("dispose",tt)};void 0!==V&&V.texture.dispose();const Q=void 0!==v.morphAttributes.position,se=void 0!==v.morphAttributes.normal,ye=void 0!==v.morphAttributes.color,le=v.morphAttributes.position||[],J=v.morphAttributes.normal||[],He=v.morphAttributes.color||[];let Le=0;!0===Q&&(Le=1),!0===se&&(Le=2),!0===ye&&(Le=3);let Pe=v.attributes.position.count*Le,Ct=1;Pe>e.maxTextureSize&&(Ct=Math.ceil(Pe/e.maxTextureSize),Pe=e.maxTextureSize);const ft=new Float32Array(Pe*Ct*4*U),bt=new qi(ft,Pe,Ct,U);bt.type=Us,bt.needsUpdate=!0;const Et=4*Le;for(let je=0;je<U;je++){const Nt=le[je],mn=J[je],ln=He[je],yn=Pe*Ct*4*je;for(let Ln=0;Ln<Nt.count;Ln++){const sn=Ln*Et;!0===Q&&(a.fromBufferAttribute(Nt,Ln),ft[yn+sn+0]=a.x,ft[yn+sn+1]=a.y,ft[yn+sn+2]=a.z,ft[yn+sn+3]=0),!0===se&&(a.fromBufferAttribute(mn,Ln),ft[yn+sn+4]=a.x,ft[yn+sn+5]=a.y,ft[yn+sn+6]=a.z,ft[yn+sn+7]=0),!0===ye&&(a.fromBufferAttribute(ln,Ln),ft[yn+sn+8]=a.x,ft[yn+sn+9]=a.y,ft[yn+sn+10]=a.z,ft[yn+sn+11]=4===ln.itemSize?a.w:1)}}V={count:U,texture:bt,size:new Mn(Pe,Ct)},s.set(v,V),v.addEventListener("dispose",tt)}if(!0===p.isInstancedMesh&&null!==p.morphTexture)b.getUniforms().setValue(c,"morphTexture",p.morphTexture,n);else{let Q=0;for(let ye=0;ye<E.length;ye++)Q+=E[ye];const se=v.morphTargetsRelative?1:1-Q;b.getUniforms().setValue(c,"morphTargetBaseInfluence",se),b.getUniforms().setValue(c,"morphTargetInfluences",E)}b.getUniforms().setValue(c,"morphTargetsTexture",V.texture,n),b.getUniforms().setValue(c,"morphTargetsTextureSize",V.size)}}}function rd(c,e,n,s){let a=new WeakMap;function v(b){const E=b.target;E.removeEventListener("dispose",v),n.remove(E.instanceMatrix),null!==E.instanceColor&&n.remove(E.instanceColor)}return{update:function u(b){const E=s.render.frame,U=e.get(b,b.geometry);if(a.get(U)!==E&&(e.update(U),a.set(U,E)),b.isInstancedMesh&&(!1===b.hasEventListener("dispose",v)&&b.addEventListener("dispose",v),a.get(b)!==E&&(n.update(b.instanceMatrix,c.ARRAY_BUFFER),null!==b.instanceColor&&n.update(b.instanceColor,c.ARRAY_BUFFER),a.set(b,E))),b.isSkinnedMesh){const V=b.skeleton;a.get(V)!==E&&(V.update(),a.set(V,E))}return U},dispose:function p(){a=new WeakMap}}}class Sc extends Ht{constructor(e,n,s,a,u,p,v,b,E,O=Vn){if(O!==Vn&&O!==ai)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&O===Vn&&(s=As),void 0===s&&O===ai&&(s=L),super(null,a,u,p,v,b,O,s,E),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=void 0!==v?v:Nr,this.minFilter=void 0!==b?b:Nr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return null!==this.compareFunction&&(n.compareFunction=this.compareFunction),n}}const Cu=new Ht,qc=new Sc(1,1),uc=new qi,Od=new ji,wu=new xu,dc=[],Dh=[],Rf=new Float32Array(16),Ah=new Float32Array(9),Wp=new Float32Array(4);function Zc(c,e,n){const s=c[0];if(s<=0||s>0)return c;const a=e*n;let u=dc[a];if(void 0===u&&(u=new Float32Array(a),dc[a]=u),0!==e){s.toArray(u,0);for(let p=1,v=0;p!==e;++p)v+=n,c[p].toArray(u,v)}return u}function Ma(c,e){if(c.length!==e.length)return!1;for(let n=0,s=c.length;n<s;n++)if(c[n]!==e[n])return!1;return!0}function Oa(c,e){for(let n=0,s=e.length;n<s;n++)c[n]=e[n]}function Fd(c,e){let n=Dh[e];void 0===n&&(n=new Int32Array(e),Dh[e]=n);for(let s=0;s!==e;++s)n[s]=c.allocateTextureUnit();return n}function sd(c,e){const n=this.cache;n[0]!==e&&(c.uniform1f(this.addr,e),n[0]=e)}function $p(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y)&&(c.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ma(n,e))return;c.uniform2fv(this.addr,e),Oa(n,e)}}function Nf(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(c.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(c.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ma(n,e))return;c.uniform3fv(this.addr,e),Oa(n,e)}}function Tu(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(c.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ma(n,e))return;c.uniform4fv(this.addr,e),Oa(n,e)}}function Pf(c,e){const n=this.cache,s=e.elements;if(void 0===s){if(Ma(n,e))return;c.uniformMatrix2fv(this.addr,!1,e),Oa(n,e)}else{if(Ma(n,s))return;Wp.set(s),c.uniformMatrix2fv(this.addr,!1,Wp),Oa(n,s)}}function Om(c,e){const n=this.cache,s=e.elements;if(void 0===s){if(Ma(n,e))return;c.uniformMatrix3fv(this.addr,!1,e),Oa(n,e)}else{if(Ma(n,s))return;Ah.set(s),c.uniformMatrix3fv(this.addr,!1,Ah),Oa(n,s)}}function od(c,e){const n=this.cache,s=e.elements;if(void 0===s){if(Ma(n,e))return;c.uniformMatrix4fv(this.addr,!1,e),Oa(n,e)}else{if(Ma(n,s))return;Rf.set(s),c.uniformMatrix4fv(this.addr,!1,Rf),Oa(n,s)}}function Of(c,e){const n=this.cache;n[0]!==e&&(c.uniform1i(this.addr,e),n[0]=e)}function Ld(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y)&&(c.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ma(n,e))return;c.uniform2iv(this.addr,e),Oa(n,e)}}function Ih(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(c.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ma(n,e))return;c.uniform3iv(this.addr,e),Oa(n,e)}}function jp(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(c.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ma(n,e))return;c.uniform4iv(this.addr,e),Oa(n,e)}}function Ff(c,e){const n=this.cache;n[0]!==e&&(c.uniform1ui(this.addr,e),n[0]=e)}function Fm(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y)&&(c.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ma(n,e))return;c.uniform2uiv(this.addr,e),Oa(n,e)}}function Xp(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(c.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ma(n,e))return;c.uniform3uiv(this.addr,e),Oa(n,e)}}function Kp(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(c.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ma(n,e))return;c.uniform4uiv(this.addr,e),Oa(n,e)}}function $v(c,e,n){const s=this.cache,a=n.allocateTextureUnit();let u;s[0]!==a&&(c.uniform1i(this.addr,a),s[0]=a),this.type===c.SAMPLER_2D_SHADOW?(qc.compareFunction=515,u=qc):u=Cu,n.setTexture2D(e||u,a)}function jv(c,e,n){const s=this.cache,a=n.allocateTextureUnit();s[0]!==a&&(c.uniform1i(this.addr,a),s[0]=a),n.setTexture3D(e||Od,a)}function Xv(c,e,n){const s=this.cache,a=n.allocateTextureUnit();s[0]!==a&&(c.uniform1i(this.addr,a),s[0]=a),n.setTextureCube(e||wu,a)}function Qp(c,e,n){const s=this.cache,a=n.allocateTextureUnit();s[0]!==a&&(c.uniform1i(this.addr,a),s[0]=a),n.setTexture2DArray(e||uc,a)}function Rh(c,e){c.uniform1fv(this.addr,e)}function p1(c,e){const n=Zc(e,this.size,2);c.uniform2fv(this.addr,n)}function m1(c,e){const n=Zc(e,this.size,3);c.uniform3fv(this.addr,n)}function Jx(c,e){const n=Zc(e,this.size,4);c.uniform4fv(this.addr,n)}function Yp(c,e){const n=Zc(e,this.size,4);c.uniformMatrix2fv(this.addr,!1,n)}function km(c,e){const n=Zc(e,this.size,9);c.uniformMatrix3fv(this.addr,!1,n)}function Kv(c,e){const n=Zc(e,this.size,16);c.uniformMatrix4fv(this.addr,!1,n)}function Qv(c,e){c.uniform1iv(this.addr,e)}function Yv(c,e){c.uniform2iv(this.addr,e)}function kd(c,e){c.uniform3iv(this.addr,e)}function g1(c,e){c.uniform4iv(this.addr,e)}function v1(c,e){c.uniform1uiv(this.addr,e)}function _1(c,e){c.uniform2uiv(this.addr,e)}function y1(c,e){c.uniform3uiv(this.addr,e)}function b1(c,e){c.uniform4uiv(this.addr,e)}function Du(c,e,n){const s=this.cache,a=e.length,u=Fd(n,a);Ma(s,u)||(c.uniform1iv(this.addr,u),Oa(s,u));for(let p=0;p!==a;++p)n.setTexture2D(e[p]||Cu,u[p])}function Nh(c,e,n){const s=this.cache,a=e.length,u=Fd(n,a);Ma(s,u)||(c.uniform1iv(this.addr,u),Oa(s,u));for(let p=0;p!==a;++p)n.setTexture3D(e[p]||Od,u[p])}function x1(c,e,n){const s=this.cache,a=e.length,u=Fd(n,a);Ma(s,u)||(c.uniform1iv(this.addr,u),Oa(s,u));for(let p=0;p!==a;++p)n.setTextureCube(e[p]||wu,u[p])}function E1(c,e,n){const s=this.cache,a=e.length,u=Fd(n,a);Ma(s,u)||(c.uniform1iv(this.addr,u),Oa(s,u));for(let p=0;p!==a;++p)n.setTexture2DArray(e[p]||uc,u[p])}class M1{constructor(e,n,s){this.id=e,this.addr=s,this.cache=[],this.type=n.type,this.setValue=function Lm(c){switch(c){case 5126:return sd;case 35664:return $p;case 35665:return Nf;case 35666:return Tu;case 35674:return Pf;case 35675:return Om;case 35676:return od;case 5124:case 35670:return Of;case 35667:case 35671:return Ld;case 35668:case 35672:return Ih;case 35669:case 35673:return jp;case 5125:return Ff;case 36294:return Fm;case 36295:return Xp;case 36296:return Kp;case 35678:case 36198:case 36298:case 36306:case 35682:return $v;case 35679:case 36299:case 36307:return jv;case 35680:case 36300:case 36308:case 36293:return Xv;case 36289:case 36303:case 36311:case 36292:return Qp}}(n.type)}}class C1{constructor(e,n,s){this.id=e,this.addr=s,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=function S1(c){switch(c){case 5126:return Rh;case 35664:return p1;case 35665:return m1;case 35666:return Jx;case 35674:return Yp;case 35675:return km;case 35676:return Kv;case 5124:case 35670:return Qv;case 35667:case 35671:return Yv;case 35668:case 35672:return kd;case 35669:case 35673:return g1;case 5125:return v1;case 36294:return _1;case 36295:return y1;case 36296:return b1;case 35678:case 36198:case 36298:case 36306:case 35682:return Du;case 35679:case 36299:case 36307:return Nh;case 35680:case 36300:case 36308:case 36293:return x1;case 36289:case 36303:case 36311:case 36292:return E1}}(n.type)}}class w1{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,s){const a=this.seq;for(let u=0,p=a.length;u!==p;++u){const v=a[u];v.setValue(e,n[v.id],s)}}}const qp=/(\w+)(\])?(\[|\.)?/g;function qv(c,e){c.seq.push(e),c.map[e.id]=e}function T1(c,e,n){const s=c.name,a=s.length;for(qp.lastIndex=0;;){const u=qp.exec(s);let v=u[1];const E=u[3];if("]"===u[2]&&(v|=0),void 0===E||"["===E&&qp.lastIndex+2===a){qv(n,void 0===E?new M1(v,c,e):new C1(v,c,e));break}{let U=n.map[v];void 0===U&&(U=new w1(v),qv(n,U)),n=U}}}class Zp{constructor(e,n){this.seq=[],this.map={};const s=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let a=0;a<s;++a){const u=e.getActiveUniform(n,a);T1(u,e.getUniformLocation(n,u.name),this)}}setValue(e,n,s,a){const u=this.map[n];void 0!==u&&u.setValue(e,s,a)}setOptional(e,n,s){const a=n[s];void 0!==a&&this.setValue(e,s,a)}static upload(e,n,s,a){for(let u=0,p=n.length;u!==p;++u){const v=n[u],b=s[v.id];!1!==b.needsUpdate&&v.setValue(e,b.value,a)}}static seqWithValue(e,n){const s=[];for(let a=0,u=e.length;a!==u;++a){const p=e[a];p.id in n&&s.push(p)}return s}}function Zv(c,e,n){const s=c.createShader(e);return c.shaderSource(s,n),c.compileShader(s),s}const Jp=37297;let Au=0;const Bm=new Ti;function Um(c,e,n){const s=c.getShaderParameter(e,c.COMPILE_STATUS),a=c.getShaderInfoLog(e).trim();if(s&&""===a)return"";const u=/ERROR: 0:(\d+)/.exec(a);if(u){const p=parseInt(u[1]);return n.toUpperCase()+"\n\n"+a+"\n\n"+function Lf(c,e){const n=c.split("\n"),s=[],a=Math.max(e-6,0),u=Math.min(e+6,n.length);for(let p=a;p<u;p++){const v=p+1;s.push(`${v===e?">":" "} ${v}: ${n[p]}`)}return s.join("\n")}(c.getShaderSource(e),p)}return a}function eE(c,e){const n=function Jv(c){F._getMatrix(Bm,F.workingColorSpace,c);const e=`mat3( ${Bm.elements.map(n=>n.toFixed(4))} )`;switch(F.getTransfer(c)){case Tl:return[e,"LinearTransferOETF"];case _s:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",c),[e,"LinearTransferOETF"]}}(e);return[`vec4 ${c}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function tE(c,e){let n;switch(e){case mr:n="Linear";break;case Si:n="Reinhard";break;case Ir:n="Cineon";break;case Kr:n="ACESFilmic";break;case Zr:n="AgX";break;case ls:n="Neutral";break;case gr:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+c+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const Vm=new lt;function Ph(c){return""!==c}function e_(c,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return c.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function t_(c,e){return c.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const D1=/^[ \t]*#include +<([\w\d./]+)>/gm;function Gm(c){return c.replace(D1,n_)}const A1=new Map;function n_(c,e){let n=rs[e];if(void 0===n){const s=A1.get(e);if(void 0===s)throw new Error("Can not resolve #include <"+e+">");n=rs[s],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,s)}return Gm(n)}const i_=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function r_(c){return c.replace(i_,I1)}function I1(c,e,n,s){let a="";for(let u=parseInt(e);u<parseInt(n);u++)a+=s.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return a}function Wm(c){let e=`precision ${c.precision} float;\n\tprecision ${c.precision} int;\n\tprecision ${c.precision} sampler2D;\n\tprecision ${c.precision} samplerCube;\n\tprecision ${c.precision} sampler3D;\n\tprecision ${c.precision} sampler2DArray;\n\tprecision ${c.precision} sampler2DShadow;\n\tprecision ${c.precision} samplerCubeShadow;\n\tprecision ${c.precision} sampler2DArrayShadow;\n\tprecision ${c.precision} isampler2D;\n\tprecision ${c.precision} isampler3D;\n\tprecision ${c.precision} isamplerCube;\n\tprecision ${c.precision} isampler2DArray;\n\tprecision ${c.precision} usampler2D;\n\tprecision ${c.precision} usampler3D;\n\tprecision ${c.precision} usamplerCube;\n\tprecision ${c.precision} usampler2DArray;\n\t`;return"highp"===c.precision?e+="\n#define HIGH_PRECISION":"mediump"===c.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===c.precision&&(e+="\n#define LOW_PRECISION"),e}function o_(c,e,n,s){const a=c.getContext(),u=n.defines;let p=n.vertexShader,v=n.fragmentShader;const b=function e0(c){let e="SHADOWMAP_TYPE_BASIC";return c.shadowMapType===ae?e="SHADOWMAP_TYPE_PCF":c.shadowMapType===x?e="SHADOWMAP_TYPE_PCF_SOFT":c.shadowMapType===T&&(e="SHADOWMAP_TYPE_VSM"),e}(n),E=function s_(c){let e="ENVMAP_TYPE_CUBE";if(c.envMap)switch(c.envMapMode){case at:case St:e="ENVMAP_TYPE_CUBE";break;case kn:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),O=function $m(c){let e="ENVMAP_MODE_REFLECTION";return c.envMap&&c.envMapMode===St&&(e="ENVMAP_MODE_REFRACTION"),e}(n),U=function R1(c){let e="ENVMAP_BLENDING_NONE";if(c.envMap)switch(c.combine){case yi:e="ENVMAP_BLENDING_MULTIPLY";break;case uo:e="ENVMAP_BLENDING_MIX";break;case Yn:e="ENVMAP_BLENDING_ADD"}return e}(n),V=function Bd(c){const e=c.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,s=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:s,maxMip:n}}(n),Q=function zm(c){return[c.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",c.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ph).join("\n")}(n),se=function nE(c){const e=[];for(const n in c){const s=c[n];!1!==s&&e.push("#define "+n+" "+s)}return e.join("\n")}(u),ye=a.createProgram();let le,J,He=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(le=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,se].filter(Ph).join("\n"),le.length>0&&(le+="\n"),J=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,se].filter(Ph).join("\n"),J.length>0&&(J+="\n")):(le=[Wm(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,se,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+O:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+b:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ph).join("\n"),J=[Wm(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,se,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+E:"",n.envMap?"#define "+O:"",n.envMap?"#define "+U:"",V?"#define CUBEUV_TEXEL_WIDTH "+V.texelWidth:"",V?"#define CUBEUV_TEXEL_HEIGHT "+V.texelHeight:"",V?"#define CUBEUV_MAX_MIP "+V.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+b:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==cr?"#define TONE_MAPPING":"",n.toneMapping!==cr?rs.tonemapping_pars_fragment:"",n.toneMapping!==cr?tE("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",rs.colorspace_pars_fragment,eE("linearToOutputTexel",n.outputColorSpace),(F.getLuminanceCoefficients(Vm),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${Vm.x.toFixed(4)}, ${Vm.y.toFixed(4)}, ${Vm.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ph).join("\n")),p=Gm(p),p=e_(p,n),p=t_(p,n),v=Gm(v),v=e_(v,n),v=t_(v,n),p=r_(p),v=r_(v),!0!==n.isRawShaderMaterial&&(He="#version 300 es\n",le=[Q,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+le,J=["#define varying in",n.glslVersion===Ac?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Ac?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+J);const Pe=He+J+v,Ct=Zv(a,a.VERTEX_SHADER,He+le+p),ft=Zv(a,a.FRAGMENT_SHADER,Pe);function bt(Nt){if(c.debug.checkShaderErrors){const mn=a.getProgramInfoLog(ye).trim(),ln=a.getShaderInfoLog(Ct).trim(),yn=a.getShaderInfoLog(ft).trim();let Ln=!0,sn=!0;if(!1===a.getProgramParameter(ye,a.LINK_STATUS))if(Ln=!1,"function"==typeof c.debug.onShaderError)c.debug.onShaderError(a,ye,Ct,ft);else{const ri=Um(a,Ct,"vertex"),xn=Um(a,ft,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(ye,a.VALIDATE_STATUS)+"\n\nMaterial Name: "+Nt.name+"\nMaterial Type: "+Nt.type+"\n\nProgram Info Log: "+mn+"\n"+ri+"\n"+xn)}else""!==mn?console.warn("THREE.WebGLProgram: Program Info Log:",mn):(""===ln||""===yn)&&(sn=!1);sn&&(Nt.diagnostics={runnable:Ln,programLog:mn,vertexShader:{log:ln,prefix:le},fragmentShader:{log:yn,prefix:J}})}a.deleteShader(Ct),a.deleteShader(ft),Et=new Zp(a,ye),tt=function iE(c,e){const n={},s=c.getProgramParameter(e,c.ACTIVE_ATTRIBUTES);for(let a=0;a<s;a++){const u=c.getActiveAttrib(e,a),p=u.name;let v=1;u.type===c.FLOAT_MAT2&&(v=2),u.type===c.FLOAT_MAT3&&(v=3),u.type===c.FLOAT_MAT4&&(v=4),n[p]={type:u.type,location:c.getAttribLocation(e,p),locationSize:v}}return n}(a,ye)}let Et,tt;a.attachShader(ye,Ct),a.attachShader(ye,ft),void 0!==n.index0AttributeName?a.bindAttribLocation(ye,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(ye,0,"position"),a.linkProgram(ye),this.getUniforms=function(){return void 0===Et&&bt(this),Et},this.getAttributes=function(){return void 0===tt&&bt(this),tt};let je=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===je&&(je=a.getProgramParameter(ye,Jp)),je},this.destroy=function(){s.releaseStatesOfProgram(this),a.deleteProgram(ye),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Au++,this.cacheKey=e,this.usedTimes=1,this.program=ye,this.vertexShader=Ct,this.fragmentShader=ft,this}let N1=0;class jm{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const s=e.fragmentShader,a=this._getShaderStage(e.vertexShader),u=this._getShaderStage(s),p=this._getShaderCacheForMaterial(e);return!1===p.has(a)&&(p.add(a),a.usedTimes++),!1===p.has(u)&&(p.add(u),u.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const s of n)s.usedTimes--,0===s.usedTimes&&this.shaderCache.delete(s.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let s=n.get(e);return void 0===s&&(s=new Set,n.set(e,s)),s}_getShaderStage(e){const n=this.shaderCache;let s=n.get(e);return void 0===s&&(s=new Xm(e),n.set(e,s)),s}}class Xm{constructor(e){this.id=N1++,this.code=e,this.usedTimes=0}}function P1(c,e,n,s,a,u,p){const v=new lu,b=new jm,E=new Set,O=[],U=a.logarithmicDepthBuffer,V=a.vertexTextures;let Q=a.precision;const se={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function ye(tt){return E.add(tt),0===tt?"uv":`uv${tt}`}return{getParameters:function le(tt,je,Nt,mn,ln){const yn=mn.fog,Ln=ln.geometry,ri=(tt.isMeshStandardMaterial?n:e).get(tt.envMap||(tt.isMeshStandardMaterial?mn.environment:null)),xn=ri&&ri.mapping===kn?ri.image.height:null,Qn=se[tt.type];null!==tt.precision&&(Q=a.getMaxPrecision(tt.precision),Q!==tt.precision&&console.warn("THREE.WebGLProgram.getParameters:",tt.precision,"not supported, using",Q,"instead."));const Ii=Ln.morphAttributes.position||Ln.morphAttributes.normal||Ln.morphAttributes.color,Vi=void 0!==Ii?Ii.length:0;let Zs,An,mi,er,os=0;if(void 0!==Ln.morphAttributes.position&&(os=1),void 0!==Ln.morphAttributes.normal&&(os=2),void 0!==Ln.morphAttributes.color&&(os=3),Qn){const _o=m[Qn];Zs=_o.vertexShader,An=_o.fragmentShader}else Zs=tt.vertexShader,An=tt.fragmentShader,b.update(tt),mi=b.getVertexShaderID(tt),er=b.getFragmentShaderID(tt);const _i=c.getRenderTarget(),Cr=c.state.buffers.depth.getReversed(),$r=!0===ln.isInstancedMesh,jr=!0===ln.isBatchedMesh,zs=!!tt.map,di=!!ri,xt=!!tt.aoMap,Er=!!tt.lightMap,qn=!!tt.bumpMap,Hi=!!tt.normalMap,bi=!!tt.displacementMap,Br=!!tt.emissiveMap,Wi=!!tt.metalnessMap,gt=!!tt.roughnessMap,Ke=tt.anisotropy>0,nn=tt.clearcoat>0,Bn=tt.iridescence>0,Cn=tt.sheen>0,lr=tt.transmission>0,Ai=Ke&&!!tt.anisotropyMap,Fi=nn&&!!tt.clearcoatMap,Os=nn&&!!tt.clearcoatNormalMap,ei=nn&&!!tt.clearcoatRoughnessMap,Ki=Bn&&!!tt.iridescenceMap,Ur=Bn&&!!tt.iridescenceThicknessMap,ts=Cn&&!!tt.sheenColorMap,tr=Cn&&!!tt.sheenRoughnessMap,Js=!!tt.specularMap,as=!!tt.specularColorMap,Uo=!!tt.specularIntensityMap,$t=lr&&!!tt.transmissionMap,Ri=lr&&!!tt.thicknessMap,On=!!tt.alphaMap,Ds=!!tt.extensions;let wa=cr;tt.toneMapped&&(null===_i||!0===_i.isXRRenderTarget)&&(wa=c.toneMapping);const ol={shaderID:Qn,shaderType:tt.type,shaderName:tt.name,vertexShader:Zs,fragmentShader:An,defines:tt.defines,customVertexShaderID:mi,customFragmentShaderID:er,isRawShaderMaterial:!0===tt.isRawShaderMaterial,glslVersion:tt.glslVersion,precision:Q,batching:jr,batchingColor:jr&&null!==ln._colorsTexture,instancing:$r,instancingColor:$r&&null!==ln.instanceColor,instancingMorph:$r&&null!==ln.morphTexture,supportsVertexTextures:V,outputColorSpace:null===_i?c.outputColorSpace:!0===_i.isXRRenderTarget?_i.texture.colorSpace:Ho,alphaToCoverage:!!tt.alphaToCoverage,map:zs,matcap:!!tt.matcap,envMap:di,envMapMode:di&&ri.mapping,envMapCubeUVHeight:xn,aoMap:xt,lightMap:Er,bumpMap:qn,normalMap:Hi,displacementMap:V&&bi,emissiveMap:Br,normalMapObjectSpace:Hi&&1===tt.normalMapType,normalMapTangentSpace:Hi&&0===tt.normalMapType,metalnessMap:Wi,roughnessMap:gt,anisotropy:Ke,anisotropyMap:Ai,clearcoat:nn,clearcoatMap:Fi,clearcoatNormalMap:Os,clearcoatRoughnessMap:ei,dispersion:tt.dispersion>0,iridescence:Bn,iridescenceMap:Ki,iridescenceThicknessMap:Ur,sheen:Cn,sheenColorMap:ts,sheenRoughnessMap:tr,specularMap:Js,specularColorMap:as,specularIntensityMap:Uo,transmission:lr,transmissionMap:$t,thicknessMap:Ri,gradientMap:!!tt.gradientMap,opaque:!1===tt.transparent&&1===tt.blending&&!1===tt.alphaToCoverage,alphaMap:On,alphaTest:tt.alphaTest>0,alphaHash:!!tt.alphaHash,combine:tt.combine,mapUv:zs&&ye(tt.map.channel),aoMapUv:xt&&ye(tt.aoMap.channel),lightMapUv:Er&&ye(tt.lightMap.channel),bumpMapUv:qn&&ye(tt.bumpMap.channel),normalMapUv:Hi&&ye(tt.normalMap.channel),displacementMapUv:bi&&ye(tt.displacementMap.channel),emissiveMapUv:Br&&ye(tt.emissiveMap.channel),metalnessMapUv:Wi&&ye(tt.metalnessMap.channel),roughnessMapUv:gt&&ye(tt.roughnessMap.channel),anisotropyMapUv:Ai&&ye(tt.anisotropyMap.channel),clearcoatMapUv:Fi&&ye(tt.clearcoatMap.channel),clearcoatNormalMapUv:Os&&ye(tt.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ei&&ye(tt.clearcoatRoughnessMap.channel),iridescenceMapUv:Ki&&ye(tt.iridescenceMap.channel),iridescenceThicknessMapUv:Ur&&ye(tt.iridescenceThicknessMap.channel),sheenColorMapUv:ts&&ye(tt.sheenColorMap.channel),sheenRoughnessMapUv:tr&&ye(tt.sheenRoughnessMap.channel),specularMapUv:Js&&ye(tt.specularMap.channel),specularColorMapUv:as&&ye(tt.specularColorMap.channel),specularIntensityMapUv:Uo&&ye(tt.specularIntensityMap.channel),transmissionMapUv:$t&&ye(tt.transmissionMap.channel),thicknessMapUv:Ri&&ye(tt.thicknessMap.channel),alphaMapUv:On&&ye(tt.alphaMap.channel),vertexTangents:!!Ln.attributes.tangent&&(Hi||Ke),vertexColors:tt.vertexColors,vertexAlphas:!0===tt.vertexColors&&!!Ln.attributes.color&&4===Ln.attributes.color.itemSize,pointsUvs:!0===ln.isPoints&&!!Ln.attributes.uv&&(zs||On),fog:!!yn,useFog:!0===tt.fog,fogExp2:!!yn&&yn.isFogExp2,flatShading:!0===tt.flatShading,sizeAttenuation:!0===tt.sizeAttenuation,logarithmicDepthBuffer:U,reverseDepthBuffer:Cr,skinning:!0===ln.isSkinnedMesh,morphTargets:void 0!==Ln.morphAttributes.position,morphNormals:void 0!==Ln.morphAttributes.normal,morphColors:void 0!==Ln.morphAttributes.color,morphTargetsCount:Vi,morphTextureStride:os,numDirLights:je.directional.length,numPointLights:je.point.length,numSpotLights:je.spot.length,numSpotLightMaps:je.spotLightMap.length,numRectAreaLights:je.rectArea.length,numHemiLights:je.hemi.length,numDirLightShadows:je.directionalShadowMap.length,numPointLightShadows:je.pointShadowMap.length,numSpotLightShadows:je.spotShadowMap.length,numSpotLightShadowsWithMaps:je.numSpotLightShadowsWithMaps,numLightProbes:je.numLightProbes,numClippingPlanes:p.numPlanes,numClipIntersection:p.numIntersection,dithering:tt.dithering,shadowMapEnabled:c.shadowMap.enabled&&Nt.length>0,shadowMapType:c.shadowMap.type,toneMapping:wa,decodeVideoTexture:zs&&!0===tt.map.isVideoTexture&&F.getTransfer(tt.map.colorSpace)===_s,decodeVideoTextureEmissive:Br&&!0===tt.emissiveMap.isVideoTexture&&F.getTransfer(tt.emissiveMap.colorSpace)===_s,premultipliedAlpha:tt.premultipliedAlpha,doubleSided:2===tt.side,flipSided:1===tt.side,useDepthPacking:tt.depthPacking>=0,depthPacking:tt.depthPacking||0,index0AttributeName:tt.index0AttributeName,extensionClipCullDistance:Ds&&!0===tt.extensions.clipCullDistance&&s.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ds&&!0===tt.extensions.multiDraw||jr)&&s.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:s.has("KHR_parallel_shader_compile"),customProgramCacheKey:tt.customProgramCacheKey()};return ol.vertexUv1s=E.has(1),ol.vertexUv2s=E.has(2),ol.vertexUv3s=E.has(3),E.clear(),ol},getProgramCacheKey:function J(tt){const je=[];if(tt.shaderID?je.push(tt.shaderID):(je.push(tt.customVertexShaderID),je.push(tt.customFragmentShaderID)),void 0!==tt.defines)for(const Nt in tt.defines)je.push(Nt),je.push(tt.defines[Nt]);return!1===tt.isRawShaderMaterial&&(function He(tt,je){tt.push(je.precision),tt.push(je.outputColorSpace),tt.push(je.envMapMode),tt.push(je.envMapCubeUVHeight),tt.push(je.mapUv),tt.push(je.alphaMapUv),tt.push(je.lightMapUv),tt.push(je.aoMapUv),tt.push(je.bumpMapUv),tt.push(je.normalMapUv),tt.push(je.displacementMapUv),tt.push(je.emissiveMapUv),tt.push(je.metalnessMapUv),tt.push(je.roughnessMapUv),tt.push(je.anisotropyMapUv),tt.push(je.clearcoatMapUv),tt.push(je.clearcoatNormalMapUv),tt.push(je.clearcoatRoughnessMapUv),tt.push(je.iridescenceMapUv),tt.push(je.iridescenceThicknessMapUv),tt.push(je.sheenColorMapUv),tt.push(je.sheenRoughnessMapUv),tt.push(je.specularMapUv),tt.push(je.specularColorMapUv),tt.push(je.specularIntensityMapUv),tt.push(je.transmissionMapUv),tt.push(je.thicknessMapUv),tt.push(je.combine),tt.push(je.fogExp2),tt.push(je.sizeAttenuation),tt.push(je.morphTargetsCount),tt.push(je.morphAttributeCount),tt.push(je.numDirLights),tt.push(je.numPointLights),tt.push(je.numSpotLights),tt.push(je.numSpotLightMaps),tt.push(je.numHemiLights),tt.push(je.numRectAreaLights),tt.push(je.numDirLightShadows),tt.push(je.numPointLightShadows),tt.push(je.numSpotLightShadows),tt.push(je.numSpotLightShadowsWithMaps),tt.push(je.numLightProbes),tt.push(je.shadowMapType),tt.push(je.toneMapping),tt.push(je.numClippingPlanes),tt.push(je.numClipIntersection),tt.push(je.depthPacking)}(je,tt),function Le(tt,je){v.disableAll(),je.supportsVertexTextures&&v.enable(0),je.instancing&&v.enable(1),je.instancingColor&&v.enable(2),je.instancingMorph&&v.enable(3),je.matcap&&v.enable(4),je.envMap&&v.enable(5),je.normalMapObjectSpace&&v.enable(6),je.normalMapTangentSpace&&v.enable(7),je.clearcoat&&v.enable(8),je.iridescence&&v.enable(9),je.alphaTest&&v.enable(10),je.vertexColors&&v.enable(11),je.vertexAlphas&&v.enable(12),je.vertexUv1s&&v.enable(13),je.vertexUv2s&&v.enable(14),je.vertexUv3s&&v.enable(15),je.vertexTangents&&v.enable(16),je.anisotropy&&v.enable(17),je.alphaHash&&v.enable(18),je.batching&&v.enable(19),je.dispersion&&v.enable(20),je.batchingColor&&v.enable(21),tt.push(v.mask),v.disableAll(),je.fog&&v.enable(0),je.useFog&&v.enable(1),je.flatShading&&v.enable(2),je.logarithmicDepthBuffer&&v.enable(3),je.reverseDepthBuffer&&v.enable(4),je.skinning&&v.enable(5),je.morphTargets&&v.enable(6),je.morphNormals&&v.enable(7),je.morphColors&&v.enable(8),je.premultipliedAlpha&&v.enable(9),je.shadowMapEnabled&&v.enable(10),je.doubleSided&&v.enable(11),je.flipSided&&v.enable(12),je.useDepthPacking&&v.enable(13),je.dithering&&v.enable(14),je.transmission&&v.enable(15),je.sheen&&v.enable(16),je.opaque&&v.enable(17),je.pointsUvs&&v.enable(18),je.decodeVideoTexture&&v.enable(19),je.decodeVideoTextureEmissive&&v.enable(20),je.alphaToCoverage&&v.enable(21),tt.push(v.mask)}(je,tt),je.push(c.outputColorSpace)),je.push(tt.customProgramCacheKey),je.join()},getUniforms:function Pe(tt){const je=se[tt.type];let Nt;return Nt=je?gv.clone(m[je].uniforms):tt.uniforms,Nt},acquireProgram:function Ct(tt,je){let Nt;for(let mn=0,ln=O.length;mn<ln;mn++){const yn=O[mn];if(yn.cacheKey===je){Nt=yn,++Nt.usedTimes;break}}return void 0===Nt&&(Nt=new o_(c,je,tt,u),O.push(Nt)),Nt},releaseProgram:function ft(tt){if(0==--tt.usedTimes){const je=O.indexOf(tt);O[je]=O[O.length-1],O.pop(),tt.destroy()}},releaseShaderCache:function bt(tt){b.remove(tt)},programs:O,dispose:function Et(){b.dispose()}}}function O1(){let c=new WeakMap;return{has:function e(p){return c.has(p)},get:function n(p){let v=c.get(p);return void 0===v&&(v={},c.set(p,v)),v},remove:function s(p){c.delete(p)},update:function a(p,v,b){c.get(p)[v]=b},dispose:function u(){c=new WeakMap}}}function F1(c,e){return c.groupOrder!==e.groupOrder?c.groupOrder-e.groupOrder:c.renderOrder!==e.renderOrder?c.renderOrder-e.renderOrder:c.material.id!==e.material.id?c.material.id-e.material.id:c.z!==e.z?c.z-e.z:c.id-e.id}function a_(c,e){return c.groupOrder!==e.groupOrder?c.groupOrder-e.groupOrder:c.renderOrder!==e.renderOrder?c.renderOrder-e.renderOrder:c.z!==e.z?e.z-c.z:c.id-e.id}function Km(){const c=[];let e=0;const n=[],s=[],a=[];function p(U,V,Q,se,ye,le){let J=c[e];return void 0===J?(J={id:U.id,object:U,geometry:V,material:Q,groupOrder:se,renderOrder:U.renderOrder,z:ye,group:le},c[e]=J):(J.id=U.id,J.object=U,J.geometry=V,J.material=Q,J.groupOrder=se,J.renderOrder=U.renderOrder,J.z=ye,J.group=le),e++,J}return{opaque:n,transmissive:s,transparent:a,init:function u(){e=0,n.length=0,s.length=0,a.length=0},push:function v(U,V,Q,se,ye,le){const J=p(U,V,Q,se,ye,le);Q.transmission>0?s.push(J):!0===Q.transparent?a.push(J):n.push(J)},unshift:function b(U,V,Q,se,ye,le){const J=p(U,V,Q,se,ye,le);Q.transmission>0?s.unshift(J):!0===Q.transparent?a.unshift(J):n.unshift(J)},finish:function O(){for(let U=e,V=c.length;U<V;U++){const Q=c[U];if(null===Q.id)break;Q.id=null,Q.object=null,Q.geometry=null,Q.material=null,Q.group=null}},sort:function E(U,V){n.length>1&&n.sort(U||F1),s.length>1&&s.sort(V||a_),a.length>1&&a.sort(V||a_)}}}function rE(){let c=new WeakMap;return{get:function e(s,a){const u=c.get(s);let p;return void 0===u?(p=new Km,c.set(s,[p])):a>=u.length?(p=new Km,u.push(p)):p=u[a],p},dispose:function n(){c=new WeakMap}}}function sE(){const c={};return{get:function(e){if(void 0!==c[e.id])return c[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new lt,color:new Oi};break;case"SpotLight":n={position:new lt,direction:new lt,color:new Oi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new lt,color:new Oi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new lt,skyColor:new Oi,groundColor:new Oi};break;case"RectAreaLight":n={color:new Oi,position:new lt,halfWidth:new lt,halfHeight:new lt}}return c[e.id]=n,n}}}let L1=0;function k1(c,e){return(e.castShadow?2:0)-(c.castShadow?2:0)+(e.map?1:0)-(c.map?1:0)}function B1(c){const e=new sE,n=function kf(){const c={};return{get:function(e){if(void 0!==c[e.id])return c[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mn};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mn,shadowCameraNear:1,shadowCameraFar:1e3}}return c[e.id]=n,n}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let E=0;E<9;E++)s.probe.push(new lt);const a=new lt,u=new xr,p=new xr;return{setup:function v(E){let O=0,U=0,V=0;for(let tt=0;tt<9;tt++)s.probe[tt].set(0,0,0);let Q=0,se=0,ye=0,le=0,J=0,He=0,Le=0,Pe=0,Ct=0,ft=0,bt=0;E.sort(k1);for(let tt=0,je=E.length;tt<je;tt++){const Nt=E[tt],mn=Nt.color,ln=Nt.intensity,yn=Nt.distance,Ln=Nt.shadow&&Nt.shadow.map?Nt.shadow.map.texture:null;if(Nt.isAmbientLight)O+=mn.r*ln,U+=mn.g*ln,V+=mn.b*ln;else if(Nt.isLightProbe){for(let sn=0;sn<9;sn++)s.probe[sn].addScaledVector(Nt.sh.coefficients[sn],ln);bt++}else if(Nt.isDirectionalLight){const sn=e.get(Nt);if(sn.color.copy(Nt.color).multiplyScalar(Nt.intensity),Nt.castShadow){const ri=Nt.shadow,xn=n.get(Nt);xn.shadowIntensity=ri.intensity,xn.shadowBias=ri.bias,xn.shadowNormalBias=ri.normalBias,xn.shadowRadius=ri.radius,xn.shadowMapSize=ri.mapSize,s.directionalShadow[Q]=xn,s.directionalShadowMap[Q]=Ln,s.directionalShadowMatrix[Q]=Nt.shadow.matrix,He++}s.directional[Q]=sn,Q++}else if(Nt.isSpotLight){const sn=e.get(Nt);sn.position.setFromMatrixPosition(Nt.matrixWorld),sn.color.copy(mn).multiplyScalar(ln),sn.distance=yn,sn.coneCos=Math.cos(Nt.angle),sn.penumbraCos=Math.cos(Nt.angle*(1-Nt.penumbra)),sn.decay=Nt.decay,s.spot[ye]=sn;const ri=Nt.shadow;if(Nt.map&&(s.spotLightMap[Ct]=Nt.map,Ct++,ri.updateMatrices(Nt),Nt.castShadow&&ft++),s.spotLightMatrix[ye]=ri.matrix,Nt.castShadow){const xn=n.get(Nt);xn.shadowIntensity=ri.intensity,xn.shadowBias=ri.bias,xn.shadowNormalBias=ri.normalBias,xn.shadowRadius=ri.radius,xn.shadowMapSize=ri.mapSize,s.spotShadow[ye]=xn,s.spotShadowMap[ye]=Ln,Pe++}ye++}else if(Nt.isRectAreaLight){const sn=e.get(Nt);sn.color.copy(mn).multiplyScalar(ln),sn.halfWidth.set(.5*Nt.width,0,0),sn.halfHeight.set(0,.5*Nt.height,0),s.rectArea[le]=sn,le++}else if(Nt.isPointLight){const sn=e.get(Nt);if(sn.color.copy(Nt.color).multiplyScalar(Nt.intensity),sn.distance=Nt.distance,sn.decay=Nt.decay,Nt.castShadow){const ri=Nt.shadow,xn=n.get(Nt);xn.shadowIntensity=ri.intensity,xn.shadowBias=ri.bias,xn.shadowNormalBias=ri.normalBias,xn.shadowRadius=ri.radius,xn.shadowMapSize=ri.mapSize,xn.shadowCameraNear=ri.camera.near,xn.shadowCameraFar=ri.camera.far,s.pointShadow[se]=xn,s.pointShadowMap[se]=Ln,s.pointShadowMatrix[se]=Nt.shadow.matrix,Le++}s.point[se]=sn,se++}else if(Nt.isHemisphereLight){const sn=e.get(Nt);sn.skyColor.copy(Nt.color).multiplyScalar(ln),sn.groundColor.copy(Nt.groundColor).multiplyScalar(ln),s.hemi[J]=sn,J++}}le>0&&(!0===c.has("OES_texture_float_linear")?(s.rectAreaLTC1=Ci.LTC_FLOAT_1,s.rectAreaLTC2=Ci.LTC_FLOAT_2):(s.rectAreaLTC1=Ci.LTC_HALF_1,s.rectAreaLTC2=Ci.LTC_HALF_2)),s.ambient[0]=O,s.ambient[1]=U,s.ambient[2]=V;const Et=s.hash;(Et.directionalLength!==Q||Et.pointLength!==se||Et.spotLength!==ye||Et.rectAreaLength!==le||Et.hemiLength!==J||Et.numDirectionalShadows!==He||Et.numPointShadows!==Le||Et.numSpotShadows!==Pe||Et.numSpotMaps!==Ct||Et.numLightProbes!==bt)&&(s.directional.length=Q,s.spot.length=ye,s.rectArea.length=le,s.point.length=se,s.hemi.length=J,s.directionalShadow.length=He,s.directionalShadowMap.length=He,s.pointShadow.length=Le,s.pointShadowMap.length=Le,s.spotShadow.length=Pe,s.spotShadowMap.length=Pe,s.directionalShadowMatrix.length=He,s.pointShadowMatrix.length=Le,s.spotLightMatrix.length=Pe+Ct-ft,s.spotLightMap.length=Ct,s.numSpotLightShadowsWithMaps=ft,s.numLightProbes=bt,Et.directionalLength=Q,Et.pointLength=se,Et.spotLength=ye,Et.rectAreaLength=le,Et.hemiLength=J,Et.numDirectionalShadows=He,Et.numPointShadows=Le,Et.numSpotShadows=Pe,Et.numSpotMaps=Ct,Et.numLightProbes=bt,s.version=L1++)},setupView:function b(E,O){let U=0,V=0,Q=0,se=0,ye=0;const le=O.matrixWorldInverse;for(let J=0,He=E.length;J<He;J++){const Le=E[J];if(Le.isDirectionalLight){const Pe=s.directional[U];Pe.direction.setFromMatrixPosition(Le.matrixWorld),a.setFromMatrixPosition(Le.target.matrixWorld),Pe.direction.sub(a),Pe.direction.transformDirection(le),U++}else if(Le.isSpotLight){const Pe=s.spot[Q];Pe.position.setFromMatrixPosition(Le.matrixWorld),Pe.position.applyMatrix4(le),Pe.direction.setFromMatrixPosition(Le.matrixWorld),a.setFromMatrixPosition(Le.target.matrixWorld),Pe.direction.sub(a),Pe.direction.transformDirection(le),Q++}else if(Le.isRectAreaLight){const Pe=s.rectArea[se];Pe.position.setFromMatrixPosition(Le.matrixWorld),Pe.position.applyMatrix4(le),p.identity(),u.copy(Le.matrixWorld),u.premultiply(le),p.extractRotation(u),Pe.halfWidth.set(.5*Le.width,0,0),Pe.halfHeight.set(0,.5*Le.height,0),Pe.halfWidth.applyMatrix4(p),Pe.halfHeight.applyMatrix4(p),se++}else if(Le.isPointLight){const Pe=s.point[V];Pe.position.setFromMatrixPosition(Le.matrixWorld),Pe.position.applyMatrix4(le),V++}else if(Le.isHemisphereLight){const Pe=s.hemi[ye];Pe.direction.setFromMatrixPosition(Le.matrixWorld),Pe.direction.transformDirection(le),ye++}}},state:s}}function Qm(c){const e=new B1(c),n=[],s=[],E={lightsArray:n,shadowsArray:s,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function a(O){E.camera=O,n.length=0,s.length=0},state:E,setupLights:function v(){e.setup(n)},setupLightsView:function b(O){e.setupView(n,O)},pushLight:function u(O){n.push(O)},pushShadow:function p(O){s.push(O)}}}function U1(c){let e=new WeakMap;return{get:function n(a,u=0){const p=e.get(a);let v;return void 0===p?(v=new Qm(c),e.set(a,[v])):u>=p.length?(v=new Qm(c),p.push(v)):v=p[u],v},dispose:function s(){e=new WeakMap}}}class l_ extends il{static get type(){return"MeshDepthMaterial"}constructor(e){super(),this.isMeshDepthMaterial=!0,this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class c_ extends il{static get type(){return"MeshDistanceMaterial"}constructor(e){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function z1(c,e,n){let s=new ph;const a=new Mn,u=new Mn,p=new Wt,v=new l_({depthPacking:3201}),b=new c_,E={},O=n.maxTextureSize,U={0:1,1:0,2:2},V=new Lo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Mn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),Q=V.clone();Q.defines.HORIZONTAL_PASS=1;const se=new Ms;se.setAttribute("position",new ms(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ye=new no(se,V),le=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ae;let J=this.type;function He(ft,bt){const Et=e.update(ye);V.defines.VSM_SAMPLES!==ft.blurSamples&&(V.defines.VSM_SAMPLES=ft.blurSamples,Q.defines.VSM_SAMPLES=ft.blurSamples,V.needsUpdate=!0,Q.needsUpdate=!0),null===ft.mapPass&&(ft.mapPass=new dr(a.x,a.y)),V.uniforms.shadow_pass.value=ft.map.texture,V.uniforms.resolution.value=ft.mapSize,V.uniforms.radius.value=ft.radius,c.setRenderTarget(ft.mapPass),c.clear(),c.renderBufferDirect(bt,null,Et,V,ye,null),Q.uniforms.shadow_pass.value=ft.mapPass.texture,Q.uniforms.resolution.value=ft.mapSize,Q.uniforms.radius.value=ft.radius,c.setRenderTarget(ft.map),c.clear(),c.renderBufferDirect(bt,null,Et,Q,ye,null)}function Le(ft,bt,Et,tt){let je=null;const Nt=!0===Et.isPointLight?ft.customDistanceMaterial:ft.customDepthMaterial;if(void 0!==Nt)je=Nt;else if(je=!0===Et.isPointLight?b:v,c.localClippingEnabled&&!0===bt.clipShadows&&Array.isArray(bt.clippingPlanes)&&0!==bt.clippingPlanes.length||bt.displacementMap&&0!==bt.displacementScale||bt.alphaMap&&bt.alphaTest>0||bt.map&&bt.alphaTest>0){const mn=je.uuid,ln=bt.uuid;let yn=E[mn];void 0===yn&&(yn={},E[mn]=yn);let Ln=yn[ln];void 0===Ln&&(Ln=je.clone(),yn[ln]=Ln,bt.addEventListener("dispose",Ct)),je=Ln}return je.visible=bt.visible,je.wireframe=bt.wireframe,je.side=tt===T?null!==bt.shadowSide?bt.shadowSide:bt.side:null!==bt.shadowSide?bt.shadowSide:U[bt.side],je.alphaMap=bt.alphaMap,je.alphaTest=bt.alphaTest,je.map=bt.map,je.clipShadows=bt.clipShadows,je.clippingPlanes=bt.clippingPlanes,je.clipIntersection=bt.clipIntersection,je.displacementMap=bt.displacementMap,je.displacementScale=bt.displacementScale,je.displacementBias=bt.displacementBias,je.wireframeLinewidth=bt.wireframeLinewidth,je.linewidth=bt.linewidth,!0===Et.isPointLight&&!0===je.isMeshDistanceMaterial&&(c.properties.get(je).light=Et),je}function Pe(ft,bt,Et,tt,je){if(!1===ft.visible)return;if(ft.layers.test(bt.layers)&&(ft.isMesh||ft.isLine||ft.isPoints)&&(ft.castShadow||ft.receiveShadow&&je===T)&&(!ft.frustumCulled||s.intersectsObject(ft))){ft.modelViewMatrix.multiplyMatrices(Et.matrixWorldInverse,ft.matrixWorld);const ln=e.update(ft),yn=ft.material;if(Array.isArray(yn)){const Ln=ln.groups;for(let sn=0,ri=Ln.length;sn<ri;sn++){const xn=Ln[sn],Qn=yn[xn.materialIndex];if(Qn&&Qn.visible){const Ii=Le(ft,Qn,tt,je);ft.onBeforeShadow(c,ft,bt,Et,ln,Ii,xn),c.renderBufferDirect(Et,null,ln,Ii,ft,xn),ft.onAfterShadow(c,ft,bt,Et,ln,Ii,xn)}}}else if(yn.visible){const Ln=Le(ft,yn,tt,je);ft.onBeforeShadow(c,ft,bt,Et,ln,Ln,null),c.renderBufferDirect(Et,null,ln,Ln,ft,null),ft.onAfterShadow(c,ft,bt,Et,ln,Ln,null)}}const mn=ft.children;for(let ln=0,yn=mn.length;ln<yn;ln++)Pe(mn[ln],bt,Et,tt,je)}function Ct(ft){ft.target.removeEventListener("dispose",Ct);for(const Et in E){const tt=E[Et],je=ft.target.uuid;je in tt&&(tt[je].dispose(),delete tt[je])}}this.render=function(ft,bt,Et){if(!1===le.enabled||!1===le.autoUpdate&&!1===le.needsUpdate||0===ft.length)return;const tt=c.getRenderTarget(),je=c.getActiveCubeFace(),Nt=c.getActiveMipmapLevel(),mn=c.state;mn.setBlending(0),mn.buffers.color.setClear(1,1,1,1),mn.buffers.depth.setTest(!0),mn.setScissorTest(!1);const ln=J!==T&&this.type===T,yn=J===T&&this.type!==T;for(let Ln=0,sn=ft.length;Ln<sn;Ln++){const ri=ft[Ln],xn=ri.shadow;if(void 0===xn){console.warn("THREE.WebGLShadowMap:",ri,"has no shadow.");continue}if(!1===xn.autoUpdate&&!1===xn.needsUpdate)continue;a.copy(xn.mapSize);const Qn=xn.getFrameExtents();if(a.multiply(Qn),u.copy(xn.mapSize),(a.x>O||a.y>O)&&(a.x>O&&(u.x=Math.floor(O/Qn.x),a.x=u.x*Qn.x,xn.mapSize.x=u.x),a.y>O&&(u.y=Math.floor(O/Qn.y),a.y=u.y*Qn.y,xn.mapSize.y=u.y)),null===xn.map||!0===ln||!0===yn){const Vi=this.type!==T?{minFilter:Nr,magFilter:Nr}:{};null!==xn.map&&xn.map.dispose(),xn.map=new dr(a.x,a.y,Vi),xn.map.texture.name=ri.name+".shadowMap",xn.camera.updateProjectionMatrix()}c.setRenderTarget(xn.map),c.clear();const Ii=xn.getViewportCount();for(let Vi=0;Vi<Ii;Vi++){const os=xn.getViewport(Vi);p.set(u.x*os.x,u.y*os.y,u.x*os.z,u.y*os.w),mn.viewport(p),xn.updateMatrices(ri,Vi),s=xn.getFrustum(),Pe(bt,Et,xn.camera,ri,this.type)}!0!==xn.isPointLightShadow&&this.type===T&&He(xn,Et),xn.needsUpdate=!1}J=this.type,le.needsUpdate=!1,c.setRenderTarget(tt,je,Nt)}}const Ym={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3};function oE(c,e){const u=new function n(){let $t=!1;const Ri=new Wt;let En=null;const On=new Wt(0,0,0,0);return{setMask:function(Li){En!==Li&&!$t&&(c.colorMask(Li,Li,Li,Li),En=Li)},setLocked:function(Li){$t=Li},setClear:function(Li,ki,Ds,wa,ol){!0===ol&&(Li*=wa,ki*=wa,Ds*=wa),Ri.set(Li,ki,Ds,wa),!1===On.equals(Ri)&&(c.clearColor(Li,ki,Ds,wa),On.copy(Ri))},reset:function(){$t=!1,En=null,On.set(-1,0,0,0)}}},p=new function s(){let $t=!1,Ri=!1,En=null,On=null,Li=null;return{setReversed:function(ki){if(Ri!==ki){const Ds=e.get("EXT_clip_control");Ds.clipControlEXT(Ds.LOWER_LEFT_EXT,Ri?Ds.ZERO_TO_ONE_EXT:Ds.NEGATIVE_ONE_TO_ONE_EXT);const wa=Li;Li=null,this.setClear(wa)}Ri=ki},getReversed:function(){return Ri},setTest:function(ki){ki?_i(c.DEPTH_TEST):Cr(c.DEPTH_TEST)},setMask:function(ki){En!==ki&&!$t&&(c.depthMask(ki),En=ki)},setFunc:function(ki){if(Ri&&(ki=Ym[ki]),On!==ki){switch(ki){case 0:c.depthFunc(c.NEVER);break;case 1:c.depthFunc(c.ALWAYS);break;case 2:c.depthFunc(c.LESS);break;case 3:default:c.depthFunc(c.LEQUAL);break;case 4:c.depthFunc(c.EQUAL);break;case 5:c.depthFunc(c.GEQUAL);break;case 6:c.depthFunc(c.GREATER);break;case 7:c.depthFunc(c.NOTEQUAL)}On=ki}},setLocked:function(ki){$t=ki},setClear:function(ki){Li!==ki&&(Ri&&(ki=1-ki),c.clearDepth(ki),Li=ki)},reset:function(){$t=!1,En=null,On=null,Li=null,Ri=!1}}},v=new function a(){let $t=!1,Ri=null,En=null,On=null,Li=null,ki=null,Ds=null,wa=null,ol=null;return{setTest:function(_o){$t||(_o?_i(c.STENCIL_TEST):Cr(c.STENCIL_TEST))},setMask:function(_o){Ri!==_o&&!$t&&(c.stencilMask(_o),Ri=_o)},setFunc:function(_o,zc,_u){(En!==_o||On!==zc||Li!==_u)&&(c.stencilFunc(_o,zc,_u),En=_o,On=zc,Li=_u)},setOp:function(_o,zc,_u){(ki!==_o||Ds!==zc||wa!==_u)&&(c.stencilOp(_o,zc,_u),ki=_o,Ds=zc,wa=_u)},setLocked:function(_o){$t=_o},setClear:function(_o){ol!==_o&&(c.clearStencil(_o),ol=_o)},reset:function(){$t=!1,Ri=null,En=null,On=null,Li=null,ki=null,Ds=null,wa=null,ol=null}}},b=new WeakMap,E=new WeakMap;let O={},U={},V=new WeakMap,Q=[],se=null,ye=!1,le=null,J=null,He=null,Le=null,Pe=null,Ct=null,ft=null,bt=new Oi(0,0,0),Et=0,tt=!1,je=null,Nt=null,mn=null,ln=null,yn=null;const Ln=c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let sn=!1,ri=0;const xn=c.getParameter(c.VERSION);-1!==xn.indexOf("WebGL")?(ri=parseFloat(/^WebGL (\d)/.exec(xn)[1]),sn=ri>=1):-1!==xn.indexOf("OpenGL ES")&&(ri=parseFloat(/^OpenGL ES (\d)/.exec(xn)[1]),sn=ri>=2);let Qn=null,Ii={};const Vi=c.getParameter(c.SCISSOR_BOX),os=c.getParameter(c.VIEWPORT),Zs=(new Wt).fromArray(Vi),An=(new Wt).fromArray(os);function mi($t,Ri,En,On){const Li=new Uint8Array(4),ki=c.createTexture();c.bindTexture($t,ki),c.texParameteri($t,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri($t,c.TEXTURE_MAG_FILTER,c.NEAREST);for(let Ds=0;Ds<En;Ds++)$t===c.TEXTURE_3D||$t===c.TEXTURE_2D_ARRAY?c.texImage3D(Ri,0,c.RGBA,1,1,On,0,c.RGBA,c.UNSIGNED_BYTE,Li):c.texImage2D(Ri+Ds,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,Li);return ki}const er={};function _i($t){!0!==O[$t]&&(c.enable($t),O[$t]=!0)}function Cr($t){!1!==O[$t]&&(c.disable($t),O[$t]=!1)}er[c.TEXTURE_2D]=mi(c.TEXTURE_2D,c.TEXTURE_2D,1),er[c.TEXTURE_CUBE_MAP]=mi(c.TEXTURE_CUBE_MAP,c.TEXTURE_CUBE_MAP_POSITIVE_X,6),er[c.TEXTURE_2D_ARRAY]=mi(c.TEXTURE_2D_ARRAY,c.TEXTURE_2D_ARRAY,1,1),er[c.TEXTURE_3D]=mi(c.TEXTURE_3D,c.TEXTURE_3D,1,1),u.setClear(0,0,0,1),p.setClear(1),v.setClear(0),_i(c.DEPTH_TEST),p.setFunc(3),qn(!1),Hi(1),_i(c.CULL_FACE),xt(0);const Rn={100:c.FUNC_ADD,101:c.FUNC_SUBTRACT,102:c.FUNC_REVERSE_SUBTRACT};Rn[103]=c.MIN,Rn[104]=c.MAX;const di={200:c.ZERO,201:c.ONE,202:c.SRC_COLOR,204:c.SRC_ALPHA,210:c.SRC_ALPHA_SATURATE,208:c.DST_COLOR,206:c.DST_ALPHA,203:c.ONE_MINUS_SRC_COLOR,205:c.ONE_MINUS_SRC_ALPHA,209:c.ONE_MINUS_DST_COLOR,207:c.ONE_MINUS_DST_ALPHA,211:c.CONSTANT_COLOR,212:c.ONE_MINUS_CONSTANT_COLOR,213:c.CONSTANT_ALPHA,214:c.ONE_MINUS_CONSTANT_ALPHA};function xt($t,Ri,En,On,Li,ki,Ds,wa,ol,_o){if(0!==$t){if(!1===ye&&(_i(c.BLEND),ye=!0),5===$t)Li=Li||Ri,ki=ki||En,Ds=Ds||On,(Ri!==J||Li!==Pe)&&(c.blendEquationSeparate(Rn[Ri],Rn[Li]),J=Ri,Pe=Li),(En!==He||On!==Le||ki!==Ct||Ds!==ft)&&(c.blendFuncSeparate(di[En],di[On],di[ki],di[Ds]),He=En,Le=On,Ct=ki,ft=Ds),(!1===wa.equals(bt)||ol!==Et)&&(c.blendColor(wa.r,wa.g,wa.b,ol),bt.copy(wa),Et=ol),le=$t,tt=!1;else if($t!==le||_o!==tt){if((100!==J||100!==Pe)&&(c.blendEquation(c.FUNC_ADD),J=100,Pe=100),_o)switch($t){case 1:c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case 2:c.blendFunc(c.ONE,c.ONE);break;case 3:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case 4:c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ZERO,c.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",$t)}else switch($t){case 1:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case 2:c.blendFunc(c.SRC_ALPHA,c.ONE);break;case 3:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case 4:c.blendFunc(c.ZERO,c.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",$t)}He=null,Le=null,Ct=null,ft=null,bt.set(0,0,0),Et=0,le=$t,tt=_o}}else!0===ye&&(Cr(c.BLEND),ye=!1)}function qn($t){je!==$t&&(c.frontFace($t?c.CW:c.CCW),je=$t)}function Hi($t){0!==$t?(_i(c.CULL_FACE),$t!==Nt&&c.cullFace(1===$t?c.BACK:2===$t?c.FRONT:c.FRONT_AND_BACK)):Cr(c.CULL_FACE),Nt=$t}function Br($t,Ri,En){$t?(_i(c.POLYGON_OFFSET_FILL),(ln!==Ri||yn!==En)&&(c.polygonOffset(Ri,En),ln=Ri,yn=En)):Cr(c.POLYGON_OFFSET_FILL)}return{buffers:{color:u,depth:p,stencil:v},enable:_i,disable:Cr,bindFramebuffer:function $r($t,Ri){return U[$t]!==Ri&&(c.bindFramebuffer($t,Ri),U[$t]=Ri,$t===c.DRAW_FRAMEBUFFER&&(U[c.FRAMEBUFFER]=Ri),$t===c.FRAMEBUFFER&&(U[c.DRAW_FRAMEBUFFER]=Ri),!0)},drawBuffers:function jr($t,Ri){let En=Q,On=!1;if($t){En=V.get(Ri),void 0===En&&(En=[],V.set(Ri,En));const Li=$t.textures;if(En.length!==Li.length||En[0]!==c.COLOR_ATTACHMENT0){for(let ki=0,Ds=Li.length;ki<Ds;ki++)En[ki]=c.COLOR_ATTACHMENT0+ki;En.length=Li.length,On=!0}}else En[0]!==c.BACK&&(En[0]=c.BACK,On=!0);On&&c.drawBuffers(En)},useProgram:function zs($t){return se!==$t&&(c.useProgram($t),se=$t,!0)},setBlending:xt,setMaterial:function Er($t,Ri){2===$t.side?Cr(c.CULL_FACE):_i(c.CULL_FACE);let En=1===$t.side;Ri&&(En=!En),qn(En),1===$t.blending&&!1===$t.transparent?xt(0):xt($t.blending,$t.blendEquation,$t.blendSrc,$t.blendDst,$t.blendEquationAlpha,$t.blendSrcAlpha,$t.blendDstAlpha,$t.blendColor,$t.blendAlpha,$t.premultipliedAlpha),p.setFunc($t.depthFunc),p.setTest($t.depthTest),p.setMask($t.depthWrite),u.setMask($t.colorWrite);const On=$t.stencilWrite;v.setTest(On),On&&(v.setMask($t.stencilWriteMask),v.setFunc($t.stencilFunc,$t.stencilRef,$t.stencilFuncMask),v.setOp($t.stencilFail,$t.stencilZFail,$t.stencilZPass)),Br($t.polygonOffset,$t.polygonOffsetFactor,$t.polygonOffsetUnits),!0===$t.alphaToCoverage?_i(c.SAMPLE_ALPHA_TO_COVERAGE):Cr(c.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:qn,setCullFace:Hi,setLineWidth:function bi($t){$t!==mn&&(sn&&c.lineWidth($t),mn=$t)},setPolygonOffset:Br,setScissorTest:function Wi($t){$t?_i(c.SCISSOR_TEST):Cr(c.SCISSOR_TEST)},activeTexture:function gt($t){void 0===$t&&($t=c.TEXTURE0+Ln-1),Qn!==$t&&(c.activeTexture($t),Qn=$t)},bindTexture:function Ke($t,Ri,En){void 0===En&&(En=null===Qn?c.TEXTURE0+Ln-1:Qn);let On=Ii[En];void 0===On&&(On={type:void 0,texture:void 0},Ii[En]=On),(On.type!==$t||On.texture!==Ri)&&(Qn!==En&&(c.activeTexture(En),Qn=En),c.bindTexture($t,Ri||er[$t]),On.type=$t,On.texture=Ri)},unbindTexture:function nn(){const $t=Ii[Qn];void 0!==$t&&void 0!==$t.type&&(c.bindTexture($t.type,null),$t.type=void 0,$t.texture=void 0)},compressedTexImage2D:function Tn(){try{c.compressedTexImage2D.apply(c,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},compressedTexImage3D:function Bn(){try{c.compressedTexImage3D.apply(c,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},texImage2D:function Ki(){try{c.texImage2D.apply(c,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},texImage3D:function Ur(){try{c.texImage3D.apply(c,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},updateUBOMapping:function Js($t,Ri){let En=E.get(Ri);void 0===En&&(En=new WeakMap,E.set(Ri,En));let On=En.get($t);void 0===On&&(On=c.getUniformBlockIndex(Ri,$t.name),En.set($t,On))},uniformBlockBinding:function as($t,Ri){const On=E.get(Ri).get($t);b.get(Ri)!==On&&(c.uniformBlockBinding(Ri,On,$t.__bindingPointIndex),b.set(Ri,On))},texStorage2D:function Os(){try{c.texStorage2D.apply(c,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},texStorage3D:function ei(){try{c.texStorage3D.apply(c,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},texSubImage2D:function Cn(){try{c.texSubImage2D.apply(c,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},texSubImage3D:function lr(){try{c.texSubImage3D.apply(c,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},compressedTexSubImage2D:function Ai(){try{c.compressedTexSubImage2D.apply(c,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},compressedTexSubImage3D:function Fi(){try{c.compressedTexSubImage3D.apply(c,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},scissor:function ts($t){!1===Zs.equals($t)&&(c.scissor($t.x,$t.y,$t.z,$t.w),Zs.copy($t))},viewport:function tr($t){!1===An.equals($t)&&(c.viewport($t.x,$t.y,$t.z,$t.w),An.copy($t))},reset:function Uo(){c.disable(c.BLEND),c.disable(c.CULL_FACE),c.disable(c.DEPTH_TEST),c.disable(c.POLYGON_OFFSET_FILL),c.disable(c.SCISSOR_TEST),c.disable(c.STENCIL_TEST),c.disable(c.SAMPLE_ALPHA_TO_COVERAGE),c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ZERO),c.blendFuncSeparate(c.ONE,c.ZERO,c.ONE,c.ZERO),c.blendColor(0,0,0,0),c.colorMask(!0,!0,!0,!0),c.clearColor(0,0,0,0),c.depthMask(!0),c.depthFunc(c.LESS),p.setReversed(!1),c.clearDepth(1),c.stencilMask(4294967295),c.stencilFunc(c.ALWAYS,0,4294967295),c.stencilOp(c.KEEP,c.KEEP,c.KEEP),c.clearStencil(0),c.cullFace(c.BACK),c.frontFace(c.CCW),c.polygonOffset(0,0),c.activeTexture(c.TEXTURE0),c.bindFramebuffer(c.FRAMEBUFFER,null),c.bindFramebuffer(c.DRAW_FRAMEBUFFER,null),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.useProgram(null),c.lineWidth(1),c.scissor(0,0,c.canvas.width,c.canvas.height),c.viewport(0,0,c.canvas.width,c.canvas.height),O={},Qn=null,Ii={},U={},V=new WeakMap,Q=[],se=null,ye=!1,le=null,J=null,He=null,Le=null,Pe=null,Ct=null,ft=null,bt=new Oi(0,0,0),Et=0,tt=!1,je=null,Nt=null,mn=null,ln=null,yn=null,Zs.set(0,0,c.canvas.width,c.canvas.height),An.set(0,0,c.canvas.width,c.canvas.height),u.reset(),p.reset(),v.reset()}}}function u_(c,e,n,s){const a=function cE(c){switch(c){case Fs:case hs:return{byteLength:1,components:1};case Ks:case ir:case vs:return{byteLength:2,components:1};case ho:case Qe:return{byteLength:2,components:4};case As:case Mo:case Us:return{byteLength:4,components:1};case $:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${c}.`)}(s);switch(n){case ue:case en:return c*e;case pn:return c*e*2;case ur:case Ei:return c*e/a.components*a.byteLength;case Yi:case ns:return c*e*2/a.components*a.byteLength;case Ze:return c*e*3/a.components*a.byteLength;case pt:case fs:return c*e*4/a.components*a.byteLength;case Pr:case Tr:return Math.floor((c+3)/4)*Math.floor((e+3)/4)*8;case Is:case eo:return Math.floor((c+3)/4)*Math.floor((e+3)/4)*16;case ro:case ea:return Math.max(c,16)*Math.max(e,8)/4;case ws:case Vo:return Math.max(c,8)*Math.max(e,8)/2;case Gi:case vr:return Math.floor((c+3)/4)*Math.floor((e+3)/4)*8;case Cl:case To:return Math.floor((c+3)/4)*Math.floor((e+3)/4)*16;case so:return Math.floor((c+4)/5)*Math.floor((e+3)/4)*16;case Zl:return Math.floor((c+4)/5)*Math.floor((e+4)/5)*16;case Ss:return Math.floor((c+5)/6)*Math.floor((e+4)/5)*16;case ja:return Math.floor((c+5)/6)*Math.floor((e+5)/6)*16;case _r:return Math.floor((c+7)/8)*Math.floor((e+4)/5)*16;case ka:return Math.floor((c+7)/8)*Math.floor((e+5)/6)*16;case ma:return Math.floor((c+7)/8)*Math.floor((e+7)/8)*16;case yo:return Math.floor((c+9)/10)*Math.floor((e+4)/5)*16;case Qo:return Math.floor((c+9)/10)*Math.floor((e+5)/6)*16;case Ba:return Math.floor((c+9)/10)*Math.floor((e+7)/8)*16;case ga:return Math.floor((c+9)/10)*Math.floor((e+9)/10)*16;case ca:return Math.floor((c+11)/12)*Math.floor((e+9)/10)*16;case oo:return Math.floor((c+11)/12)*Math.floor((e+11)/12)*16;case Ro:case Ta:case Ua:return Math.ceil(c/4)*Math.ceil(e/4)*16;case ll:case va:return Math.ceil(c/4)*Math.ceil(e/4)*8;case No:case Va:return Math.ceil(c/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function uE(c,e,n,s,a,u,p){const v=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,b=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),E=new Mn,O=new WeakMap;let U;const V=new WeakMap;let Q=!1;try{Q=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function se(gt,Ke){return Q?new OffscreenCanvas(gt,Ke):gl("canvas")}function ye(gt,Ke,nn){let Tn=1;const Bn=Wi(gt);if((Bn.width>nn||Bn.height>nn)&&(Tn=nn/Math.max(Bn.width,Bn.height)),Tn<1){if(typeof HTMLImageElement<"u"&&gt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&gt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&gt instanceof ImageBitmap||typeof VideoFrame<"u"&&gt instanceof VideoFrame){const Cn=Math.floor(Tn*Bn.width),lr=Math.floor(Tn*Bn.height);void 0===U&&(U=se(Cn,lr));const Ai=Ke?se(Cn,lr):U;return Ai.width=Cn,Ai.height=lr,Ai.getContext("2d").drawImage(gt,0,0,Cn,lr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Bn.width+"x"+Bn.height+") to ("+Cn+"x"+lr+")."),Ai}return"data"in gt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Bn.width+"x"+Bn.height+")."),gt}return gt}function le(gt){return gt.generateMipmaps}function J(gt){c.generateMipmap(gt)}function He(gt){return gt.isWebGLCubeRenderTarget?c.TEXTURE_CUBE_MAP:gt.isWebGL3DRenderTarget?c.TEXTURE_3D:gt.isWebGLArrayRenderTarget||gt.isCompressedArrayTexture?c.TEXTURE_2D_ARRAY:c.TEXTURE_2D}function Le(gt,Ke,nn,Tn,Bn=!1){if(null!==gt){if(void 0!==c[gt])return c[gt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+gt+"'")}let Cn=Ke;if(Ke===c.RED&&(nn===c.FLOAT&&(Cn=c.R32F),nn===c.HALF_FLOAT&&(Cn=c.R16F),nn===c.UNSIGNED_BYTE&&(Cn=c.R8)),Ke===c.RED_INTEGER&&(nn===c.UNSIGNED_BYTE&&(Cn=c.R8UI),nn===c.UNSIGNED_SHORT&&(Cn=c.R16UI),nn===c.UNSIGNED_INT&&(Cn=c.R32UI),nn===c.BYTE&&(Cn=c.R8I),nn===c.SHORT&&(Cn=c.R16I),nn===c.INT&&(Cn=c.R32I)),Ke===c.RG&&(nn===c.FLOAT&&(Cn=c.RG32F),nn===c.HALF_FLOAT&&(Cn=c.RG16F),nn===c.UNSIGNED_BYTE&&(Cn=c.RG8)),Ke===c.RG_INTEGER&&(nn===c.UNSIGNED_BYTE&&(Cn=c.RG8UI),nn===c.UNSIGNED_SHORT&&(Cn=c.RG16UI),nn===c.UNSIGNED_INT&&(Cn=c.RG32UI),nn===c.BYTE&&(Cn=c.RG8I),nn===c.SHORT&&(Cn=c.RG16I),nn===c.INT&&(Cn=c.RG32I)),Ke===c.RGB_INTEGER&&(nn===c.UNSIGNED_BYTE&&(Cn=c.RGB8UI),nn===c.UNSIGNED_SHORT&&(Cn=c.RGB16UI),nn===c.UNSIGNED_INT&&(Cn=c.RGB32UI),nn===c.BYTE&&(Cn=c.RGB8I),nn===c.SHORT&&(Cn=c.RGB16I),nn===c.INT&&(Cn=c.RGB32I)),Ke===c.RGBA_INTEGER&&(nn===c.UNSIGNED_BYTE&&(Cn=c.RGBA8UI),nn===c.UNSIGNED_SHORT&&(Cn=c.RGBA16UI),nn===c.UNSIGNED_INT&&(Cn=c.RGBA32UI),nn===c.BYTE&&(Cn=c.RGBA8I),nn===c.SHORT&&(Cn=c.RGBA16I),nn===c.INT&&(Cn=c.RGBA32I)),Ke===c.RGB&&nn===c.UNSIGNED_INT_5_9_9_9_REV&&(Cn=c.RGB9_E5),Ke===c.RGBA){const lr=Bn?Tl:F.getTransfer(Tn);nn===c.FLOAT&&(Cn=c.RGBA32F),nn===c.HALF_FLOAT&&(Cn=c.RGBA16F),nn===c.UNSIGNED_BYTE&&(Cn=lr===_s?c.SRGB8_ALPHA8:c.RGBA8),nn===c.UNSIGNED_SHORT_4_4_4_4&&(Cn=c.RGBA4),nn===c.UNSIGNED_SHORT_5_5_5_1&&(Cn=c.RGB5_A1)}return(Cn===c.R16F||Cn===c.R32F||Cn===c.RG16F||Cn===c.RG32F||Cn===c.RGBA16F||Cn===c.RGBA32F)&&e.get("EXT_color_buffer_float"),Cn}function Pe(gt,Ke){let nn;return gt?null===Ke||Ke===As||Ke===L?nn=c.DEPTH24_STENCIL8:Ke===Us?nn=c.DEPTH32F_STENCIL8:Ke===Ks&&(nn=c.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===Ke||Ke===As||Ke===L?nn=c.DEPTH_COMPONENT24:Ke===Us?nn=c.DEPTH_COMPONENT32F:Ke===Ks&&(nn=c.DEPTH_COMPONENT16),nn}function Ct(gt,Ke){return!0===le(gt)||gt.isFramebufferTexture&&gt.minFilter!==Nr&&gt.minFilter!==zn?Math.log2(Math.max(Ke.width,Ke.height))+1:void 0!==gt.mipmaps&&gt.mipmaps.length>0?gt.mipmaps.length:gt.isCompressedTexture&&Array.isArray(gt.image)?Ke.mipmaps.length:1}function ft(gt){const Ke=gt.target;Ke.removeEventListener("dispose",ft),function Et(gt){const Ke=s.get(gt);if(void 0===Ke.__webglInit)return;const nn=gt.source,Tn=V.get(nn);if(Tn){const Bn=Tn[Ke.__cacheKey];Bn.usedTimes--,0===Bn.usedTimes&&tt(gt),0===Object.keys(Tn).length&&V.delete(nn)}s.remove(gt)}(Ke),Ke.isVideoTexture&&O.delete(Ke)}function bt(gt){const Ke=gt.target;Ke.removeEventListener("dispose",bt),function je(gt){const Ke=s.get(gt);if(gt.depthTexture&&(gt.depthTexture.dispose(),s.remove(gt.depthTexture)),gt.isWebGLCubeRenderTarget)for(let Tn=0;Tn<6;Tn++){if(Array.isArray(Ke.__webglFramebuffer[Tn]))for(let Bn=0;Bn<Ke.__webglFramebuffer[Tn].length;Bn++)c.deleteFramebuffer(Ke.__webglFramebuffer[Tn][Bn]);else c.deleteFramebuffer(Ke.__webglFramebuffer[Tn]);Ke.__webglDepthbuffer&&c.deleteRenderbuffer(Ke.__webglDepthbuffer[Tn])}else{if(Array.isArray(Ke.__webglFramebuffer))for(let Tn=0;Tn<Ke.__webglFramebuffer.length;Tn++)c.deleteFramebuffer(Ke.__webglFramebuffer[Tn]);else c.deleteFramebuffer(Ke.__webglFramebuffer);if(Ke.__webglDepthbuffer&&c.deleteRenderbuffer(Ke.__webglDepthbuffer),Ke.__webglMultisampledFramebuffer&&c.deleteFramebuffer(Ke.__webglMultisampledFramebuffer),Ke.__webglColorRenderbuffer)for(let Tn=0;Tn<Ke.__webglColorRenderbuffer.length;Tn++)Ke.__webglColorRenderbuffer[Tn]&&c.deleteRenderbuffer(Ke.__webglColorRenderbuffer[Tn]);Ke.__webglDepthRenderbuffer&&c.deleteRenderbuffer(Ke.__webglDepthRenderbuffer)}const nn=gt.textures;for(let Tn=0,Bn=nn.length;Tn<Bn;Tn++){const Cn=s.get(nn[Tn]);Cn.__webglTexture&&(c.deleteTexture(Cn.__webglTexture),p.memory.textures--),s.remove(nn[Tn])}s.remove(gt)}(Ke)}function tt(gt){const Ke=s.get(gt);c.deleteTexture(Ke.__webglTexture),delete V.get(gt.source)[Ke.__cacheKey],p.memory.textures--}let Nt=0;function Ln(gt,Ke){const nn=s.get(gt);if(gt.isVideoTexture&&function bi(gt){const Ke=p.render.frame;O.get(gt)!==Ke&&(O.set(gt,Ke),gt.update())}(gt),!1===gt.isRenderTargetTexture&&gt.version>0&&nn.__version!==gt.version){const Tn=gt.image;if(null===Tn)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Tn.complete)return void An(nn,gt,Ke);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(c.TEXTURE_2D,nn.__webglTexture,c.TEXTURE0+Ke)}const Qn={1e3:c.REPEAT,[oi]:c.CLAMP_TO_EDGE,1002:c.MIRRORED_REPEAT},Ii={[Nr]:c.NEAREST,1004:c.NEAREST_MIPMAP_NEAREST,1005:c.NEAREST_MIPMAP_LINEAR,[zn]:c.LINEAR,1007:c.LINEAR_MIPMAP_NEAREST,[Sr]:c.LINEAR_MIPMAP_LINEAR},Vi={512:c.NEVER,519:c.ALWAYS,513:c.LESS,515:c.LEQUAL,514:c.EQUAL,518:c.GEQUAL,516:c.GREATER,517:c.NOTEQUAL};function os(gt,Ke){if(Ke.type===Us&&!1===e.has("OES_texture_float_linear")&&(Ke.magFilter===zn||1007===Ke.magFilter||1005===Ke.magFilter||Ke.magFilter===Sr||Ke.minFilter===zn||1007===Ke.minFilter||1005===Ke.minFilter||Ke.minFilter===Sr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),c.texParameteri(gt,c.TEXTURE_WRAP_S,Qn[Ke.wrapS]),c.texParameteri(gt,c.TEXTURE_WRAP_T,Qn[Ke.wrapT]),(gt===c.TEXTURE_3D||gt===c.TEXTURE_2D_ARRAY)&&c.texParameteri(gt,c.TEXTURE_WRAP_R,Qn[Ke.wrapR]),c.texParameteri(gt,c.TEXTURE_MAG_FILTER,Ii[Ke.magFilter]),c.texParameteri(gt,c.TEXTURE_MIN_FILTER,Ii[Ke.minFilter]),Ke.compareFunction&&(c.texParameteri(gt,c.TEXTURE_COMPARE_MODE,c.COMPARE_REF_TO_TEXTURE),c.texParameteri(gt,c.TEXTURE_COMPARE_FUNC,Vi[Ke.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(Ke.magFilter===Nr||1005!==Ke.minFilter&&Ke.minFilter!==Sr||Ke.type===Us&&!1===e.has("OES_texture_float_linear"))return;if(Ke.anisotropy>1||s.get(Ke).__currentAnisotropy){const nn=e.get("EXT_texture_filter_anisotropic");c.texParameterf(gt,nn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Ke.anisotropy,a.getMaxAnisotropy())),s.get(Ke).__currentAnisotropy=Ke.anisotropy}}}function Zs(gt,Ke){let nn=!1;void 0===gt.__webglInit&&(gt.__webglInit=!0,Ke.addEventListener("dispose",ft));const Tn=Ke.source;let Bn=V.get(Tn);void 0===Bn&&(Bn={},V.set(Tn,Bn));const Cn=function yn(gt){const Ke=[];return Ke.push(gt.wrapS),Ke.push(gt.wrapT),Ke.push(gt.wrapR||0),Ke.push(gt.magFilter),Ke.push(gt.minFilter),Ke.push(gt.anisotropy),Ke.push(gt.internalFormat),Ke.push(gt.format),Ke.push(gt.type),Ke.push(gt.generateMipmaps),Ke.push(gt.premultiplyAlpha),Ke.push(gt.flipY),Ke.push(gt.unpackAlignment),Ke.push(gt.colorSpace),Ke.join()}(Ke);if(Cn!==gt.__cacheKey){void 0===Bn[Cn]&&(Bn[Cn]={texture:c.createTexture(),usedTimes:0},p.memory.textures++,nn=!0),Bn[Cn].usedTimes++;const lr=Bn[gt.__cacheKey];void 0!==lr&&(Bn[gt.__cacheKey].usedTimes--,0===lr.usedTimes&&tt(Ke)),gt.__cacheKey=Cn,gt.__webglTexture=Bn[Cn].texture}return nn}function An(gt,Ke,nn){let Tn=c.TEXTURE_2D;(Ke.isDataArrayTexture||Ke.isCompressedArrayTexture)&&(Tn=c.TEXTURE_2D_ARRAY),Ke.isData3DTexture&&(Tn=c.TEXTURE_3D);const Bn=Zs(gt,Ke),Cn=Ke.source;n.bindTexture(Tn,gt.__webglTexture,c.TEXTURE0+nn);const lr=s.get(Cn);if(Cn.version!==lr.__version||!0===Bn){n.activeTexture(c.TEXTURE0+nn);const Ai=F.getPrimaries(F.workingColorSpace),Fi=""===Ke.colorSpace?null:F.getPrimaries(Ke.colorSpace),Os=""===Ke.colorSpace||Ai===Fi?c.NONE:c.BROWSER_DEFAULT_WEBGL;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,Ke.flipY),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ke.premultiplyAlpha),c.pixelStorei(c.UNPACK_ALIGNMENT,Ke.unpackAlignment),c.pixelStorei(c.UNPACK_COLORSPACE_CONVERSION_WEBGL,Os);let ei=ye(Ke.image,!1,a.maxTextureSize);ei=Br(Ke,ei);const Ki=u.convert(Ke.format,Ke.colorSpace),Ur=u.convert(Ke.type);let tr,ts=Le(Ke.internalFormat,Ki,Ur,Ke.colorSpace,Ke.isVideoTexture);os(Tn,Ke);const Js=Ke.mipmaps,as=!0!==Ke.isVideoTexture,Uo=void 0===lr.__version||!0===Bn,$t=Cn.dataReady,Ri=Ct(Ke,ei);if(Ke.isDepthTexture)ts=Pe(Ke.format===ai,Ke.type),Uo&&(as?n.texStorage2D(c.TEXTURE_2D,1,ts,ei.width,ei.height):n.texImage2D(c.TEXTURE_2D,0,ts,ei.width,ei.height,0,Ki,Ur,null));else if(Ke.isDataTexture)if(Js.length>0){as&&Uo&&n.texStorage2D(c.TEXTURE_2D,Ri,ts,Js[0].width,Js[0].height);for(let En=0,On=Js.length;En<On;En++)tr=Js[En],as?$t&&n.texSubImage2D(c.TEXTURE_2D,En,0,0,tr.width,tr.height,Ki,Ur,tr.data):n.texImage2D(c.TEXTURE_2D,En,ts,tr.width,tr.height,0,Ki,Ur,tr.data);Ke.generateMipmaps=!1}else as?(Uo&&n.texStorage2D(c.TEXTURE_2D,Ri,ts,ei.width,ei.height),$t&&n.texSubImage2D(c.TEXTURE_2D,0,0,0,ei.width,ei.height,Ki,Ur,ei.data)):n.texImage2D(c.TEXTURE_2D,0,ts,ei.width,ei.height,0,Ki,Ur,ei.data);else if(Ke.isCompressedTexture)if(Ke.isCompressedArrayTexture){as&&Uo&&n.texStorage3D(c.TEXTURE_2D_ARRAY,Ri,ts,Js[0].width,Js[0].height,ei.depth);for(let En=0,On=Js.length;En<On;En++)if(tr=Js[En],Ke.format!==pt)if(null!==Ki)if(as){if($t)if(Ke.layerUpdates.size>0){const Li=u_(tr.width,tr.height,Ke.format,Ke.type);for(const ki of Ke.layerUpdates){const Ds=tr.data.subarray(ki*Li/tr.data.BYTES_PER_ELEMENT,(ki+1)*Li/tr.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(c.TEXTURE_2D_ARRAY,En,0,0,ki,tr.width,tr.height,1,Ki,Ds)}Ke.clearLayerUpdates()}else n.compressedTexSubImage3D(c.TEXTURE_2D_ARRAY,En,0,0,0,tr.width,tr.height,ei.depth,Ki,tr.data)}else n.compressedTexImage3D(c.TEXTURE_2D_ARRAY,En,ts,tr.width,tr.height,ei.depth,0,tr.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else as?$t&&n.texSubImage3D(c.TEXTURE_2D_ARRAY,En,0,0,0,tr.width,tr.height,ei.depth,Ki,Ur,tr.data):n.texImage3D(c.TEXTURE_2D_ARRAY,En,ts,tr.width,tr.height,ei.depth,0,Ki,Ur,tr.data)}else{as&&Uo&&n.texStorage2D(c.TEXTURE_2D,Ri,ts,Js[0].width,Js[0].height);for(let En=0,On=Js.length;En<On;En++)tr=Js[En],Ke.format!==pt?null!==Ki?as?$t&&n.compressedTexSubImage2D(c.TEXTURE_2D,En,0,0,tr.width,tr.height,Ki,tr.data):n.compressedTexImage2D(c.TEXTURE_2D,En,ts,tr.width,tr.height,0,tr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):as?$t&&n.texSubImage2D(c.TEXTURE_2D,En,0,0,tr.width,tr.height,Ki,Ur,tr.data):n.texImage2D(c.TEXTURE_2D,En,ts,tr.width,tr.height,0,Ki,Ur,tr.data)}else if(Ke.isDataArrayTexture)if(as){if(Uo&&n.texStorage3D(c.TEXTURE_2D_ARRAY,Ri,ts,ei.width,ei.height,ei.depth),$t)if(Ke.layerUpdates.size>0){const En=u_(ei.width,ei.height,Ke.format,Ke.type);for(const On of Ke.layerUpdates){const Li=ei.data.subarray(On*En/ei.data.BYTES_PER_ELEMENT,(On+1)*En/ei.data.BYTES_PER_ELEMENT);n.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,On,ei.width,ei.height,1,Ki,Ur,Li)}Ke.clearLayerUpdates()}else n.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,0,ei.width,ei.height,ei.depth,Ki,Ur,ei.data)}else n.texImage3D(c.TEXTURE_2D_ARRAY,0,ts,ei.width,ei.height,ei.depth,0,Ki,Ur,ei.data);else if(Ke.isData3DTexture)as?(Uo&&n.texStorage3D(c.TEXTURE_3D,Ri,ts,ei.width,ei.height,ei.depth),$t&&n.texSubImage3D(c.TEXTURE_3D,0,0,0,0,ei.width,ei.height,ei.depth,Ki,Ur,ei.data)):n.texImage3D(c.TEXTURE_3D,0,ts,ei.width,ei.height,ei.depth,0,Ki,Ur,ei.data);else if(Ke.isFramebufferTexture){if(Uo)if(as)n.texStorage2D(c.TEXTURE_2D,Ri,ts,ei.width,ei.height);else{let En=ei.width,On=ei.height;for(let Li=0;Li<Ri;Li++)n.texImage2D(c.TEXTURE_2D,Li,ts,En,On,0,Ki,Ur,null),En>>=1,On>>=1}}else if(Js.length>0){if(as&&Uo){const En=Wi(Js[0]);n.texStorage2D(c.TEXTURE_2D,Ri,ts,En.width,En.height)}for(let En=0,On=Js.length;En<On;En++)tr=Js[En],as?$t&&n.texSubImage2D(c.TEXTURE_2D,En,0,0,Ki,Ur,tr):n.texImage2D(c.TEXTURE_2D,En,ts,Ki,Ur,tr);Ke.generateMipmaps=!1}else if(as){if(Uo){const En=Wi(ei);n.texStorage2D(c.TEXTURE_2D,Ri,ts,En.width,En.height)}$t&&n.texSubImage2D(c.TEXTURE_2D,0,0,0,Ki,Ur,ei)}else n.texImage2D(c.TEXTURE_2D,0,ts,Ki,Ur,ei);le(Ke)&&J(Tn),lr.__version=Cn.version,Ke.onUpdate&&Ke.onUpdate(Ke)}gt.__version=Ke.version}function er(gt,Ke,nn,Tn,Bn,Cn){const lr=u.convert(nn.format,nn.colorSpace),Ai=u.convert(nn.type),Fi=Le(nn.internalFormat,lr,Ai,nn.colorSpace),Os=s.get(Ke),ei=s.get(nn);if(ei.__renderTarget=Ke,!Os.__hasExternalTextures){const Ki=Math.max(1,Ke.width>>Cn),Ur=Math.max(1,Ke.height>>Cn);Bn===c.TEXTURE_3D||Bn===c.TEXTURE_2D_ARRAY?n.texImage3D(Bn,Cn,Fi,Ki,Ur,Ke.depth,0,lr,Ai,null):n.texImage2D(Bn,Cn,Fi,Ki,Ur,0,lr,Ai,null)}n.bindFramebuffer(c.FRAMEBUFFER,gt),Hi(Ke)?v.framebufferTexture2DMultisampleEXT(c.FRAMEBUFFER,Tn,Bn,ei.__webglTexture,0,qn(Ke)):(Bn===c.TEXTURE_2D||Bn>=c.TEXTURE_CUBE_MAP_POSITIVE_X&&Bn<=c.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&c.framebufferTexture2D(c.FRAMEBUFFER,Tn,Bn,ei.__webglTexture,Cn),n.bindFramebuffer(c.FRAMEBUFFER,null)}function _i(gt,Ke,nn){if(c.bindRenderbuffer(c.RENDERBUFFER,gt),Ke.depthBuffer){const Tn=Ke.depthTexture,Cn=Pe(Ke.stencilBuffer,Tn&&Tn.isDepthTexture?Tn.type:null),lr=Ke.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT,Ai=qn(Ke);Hi(Ke)?v.renderbufferStorageMultisampleEXT(c.RENDERBUFFER,Ai,Cn,Ke.width,Ke.height):nn?c.renderbufferStorageMultisample(c.RENDERBUFFER,Ai,Cn,Ke.width,Ke.height):c.renderbufferStorage(c.RENDERBUFFER,Cn,Ke.width,Ke.height),c.framebufferRenderbuffer(c.FRAMEBUFFER,lr,c.RENDERBUFFER,gt)}else{const Tn=Ke.textures;for(let Bn=0;Bn<Tn.length;Bn++){const Cn=Tn[Bn],lr=u.convert(Cn.format,Cn.colorSpace),Ai=u.convert(Cn.type),Fi=Le(Cn.internalFormat,lr,Ai,Cn.colorSpace),Os=qn(Ke);nn&&!1===Hi(Ke)?c.renderbufferStorageMultisample(c.RENDERBUFFER,Os,Fi,Ke.width,Ke.height):Hi(Ke)?v.renderbufferStorageMultisampleEXT(c.RENDERBUFFER,Os,Fi,Ke.width,Ke.height):c.renderbufferStorage(c.RENDERBUFFER,Fi,Ke.width,Ke.height)}}c.bindRenderbuffer(c.RENDERBUFFER,null)}function $r(gt){const Ke=s.get(gt),nn=!0===gt.isWebGLCubeRenderTarget;if(Ke.__boundDepthTexture!==gt.depthTexture){const Tn=gt.depthTexture;if(Ke.__depthDisposeCallback&&Ke.__depthDisposeCallback(),Tn){const Bn=()=>{delete Ke.__boundDepthTexture,delete Ke.__depthDisposeCallback,Tn.removeEventListener("dispose",Bn)};Tn.addEventListener("dispose",Bn),Ke.__depthDisposeCallback=Bn}Ke.__boundDepthTexture=Tn}if(gt.depthTexture&&!Ke.__autoAllocateDepthBuffer){if(nn)throw new Error("target.depthTexture not supported in Cube render targets");!function Cr(gt,Ke){if(Ke&&Ke.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(c.FRAMEBUFFER,gt),!Ke.depthTexture||!Ke.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Tn=s.get(Ke.depthTexture);Tn.__renderTarget=Ke,(!Tn.__webglTexture||Ke.depthTexture.image.width!==Ke.width||Ke.depthTexture.image.height!==Ke.height)&&(Ke.depthTexture.image.width=Ke.width,Ke.depthTexture.image.height=Ke.height,Ke.depthTexture.needsUpdate=!0),Ln(Ke.depthTexture,0);const Bn=Tn.__webglTexture,Cn=qn(Ke);if(Ke.depthTexture.format===Vn)Hi(Ke)?v.framebufferTexture2DMultisampleEXT(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.TEXTURE_2D,Bn,0,Cn):c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.TEXTURE_2D,Bn,0);else{if(Ke.depthTexture.format!==ai)throw new Error("Unknown depthTexture format");Hi(Ke)?v.framebufferTexture2DMultisampleEXT(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,Bn,0,Cn):c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,Bn,0)}}(Ke.__webglFramebuffer,gt)}else if(nn){Ke.__webglDepthbuffer=[];for(let Tn=0;Tn<6;Tn++)if(n.bindFramebuffer(c.FRAMEBUFFER,Ke.__webglFramebuffer[Tn]),void 0===Ke.__webglDepthbuffer[Tn])Ke.__webglDepthbuffer[Tn]=c.createRenderbuffer(),_i(Ke.__webglDepthbuffer[Tn],gt,!1);else{const Bn=gt.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT,Cn=Ke.__webglDepthbuffer[Tn];c.bindRenderbuffer(c.RENDERBUFFER,Cn),c.framebufferRenderbuffer(c.FRAMEBUFFER,Bn,c.RENDERBUFFER,Cn)}}else if(n.bindFramebuffer(c.FRAMEBUFFER,Ke.__webglFramebuffer),void 0===Ke.__webglDepthbuffer)Ke.__webglDepthbuffer=c.createRenderbuffer(),_i(Ke.__webglDepthbuffer,gt,!1);else{const Tn=gt.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT,Bn=Ke.__webglDepthbuffer;c.bindRenderbuffer(c.RENDERBUFFER,Bn),c.framebufferRenderbuffer(c.FRAMEBUFFER,Tn,c.RENDERBUFFER,Bn)}n.bindFramebuffer(c.FRAMEBUFFER,null)}const di=[],xt=[];function qn(gt){return Math.min(a.maxSamples,gt.samples)}function Hi(gt){const Ke=s.get(gt);return gt.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==Ke.__useRenderToTexture}function Br(gt,Ke){const nn=gt.colorSpace,Tn=gt.format,Bn=gt.type;return!0===gt.isCompressedTexture||!0===gt.isVideoTexture||nn!==Ho&&""!==nn&&(F.getTransfer(nn)===_s?(Tn!==pt||Bn!==Fs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",nn)),Ke}function Wi(gt){return typeof HTMLImageElement<"u"&&gt instanceof HTMLImageElement?(E.width=gt.naturalWidth||gt.width,E.height=gt.naturalHeight||gt.height):typeof VideoFrame<"u"&&gt instanceof VideoFrame?(E.width=gt.displayWidth,E.height=gt.displayHeight):(E.width=gt.width,E.height=gt.height),E}this.allocateTextureUnit=function ln(){const gt=Nt;return gt>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+gt+" texture units while this GPU supports only "+a.maxTextures),Nt+=1,gt},this.resetTextureUnits=function mn(){Nt=0},this.setTexture2D=Ln,this.setTexture2DArray=function sn(gt,Ke){const nn=s.get(gt);gt.version>0&&nn.__version!==gt.version?An(nn,gt,Ke):n.bindTexture(c.TEXTURE_2D_ARRAY,nn.__webglTexture,c.TEXTURE0+Ke)},this.setTexture3D=function ri(gt,Ke){const nn=s.get(gt);gt.version>0&&nn.__version!==gt.version?An(nn,gt,Ke):n.bindTexture(c.TEXTURE_3D,nn.__webglTexture,c.TEXTURE0+Ke)},this.setTextureCube=function xn(gt,Ke){const nn=s.get(gt);gt.version>0&&nn.__version!==gt.version?function mi(gt,Ke,nn){if(6!==Ke.image.length)return;const Tn=Zs(gt,Ke),Bn=Ke.source;n.bindTexture(c.TEXTURE_CUBE_MAP,gt.__webglTexture,c.TEXTURE0+nn);const Cn=s.get(Bn);if(Bn.version!==Cn.__version||!0===Tn){n.activeTexture(c.TEXTURE0+nn);const lr=F.getPrimaries(F.workingColorSpace),Ai=""===Ke.colorSpace?null:F.getPrimaries(Ke.colorSpace),Fi=""===Ke.colorSpace||lr===Ai?c.NONE:c.BROWSER_DEFAULT_WEBGL;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,Ke.flipY),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ke.premultiplyAlpha),c.pixelStorei(c.UNPACK_ALIGNMENT,Ke.unpackAlignment),c.pixelStorei(c.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fi);const Os=Ke.isCompressedTexture||Ke.image[0].isCompressedTexture,ei=Ke.image[0]&&Ke.image[0].isDataTexture,Ki=[];for(let On=0;On<6;On++)Ki[On]=Os||ei?ei?Ke.image[On].image:Ke.image[On]:ye(Ke.image[On],!0,a.maxCubemapSize),Ki[On]=Br(Ke,Ki[On]);const Ur=Ki[0],ts=u.convert(Ke.format,Ke.colorSpace),tr=u.convert(Ke.type),Js=Le(Ke.internalFormat,ts,tr,Ke.colorSpace),as=!0!==Ke.isVideoTexture,Uo=void 0===Cn.__version||!0===Tn,$t=Bn.dataReady;let En,Ri=Ct(Ke,Ur);if(os(c.TEXTURE_CUBE_MAP,Ke),Os){as&&Uo&&n.texStorage2D(c.TEXTURE_CUBE_MAP,Ri,Js,Ur.width,Ur.height);for(let On=0;On<6;On++){En=Ki[On].mipmaps;for(let Li=0;Li<En.length;Li++){const ki=En[Li];Ke.format!==pt?null!==ts?as?$t&&n.compressedTexSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+On,Li,0,0,ki.width,ki.height,ts,ki.data):n.compressedTexImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+On,Li,Js,ki.width,ki.height,0,ki.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):as?$t&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+On,Li,0,0,ki.width,ki.height,ts,tr,ki.data):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+On,Li,Js,ki.width,ki.height,0,ts,tr,ki.data)}}}else{if(En=Ke.mipmaps,as&&Uo){En.length>0&&Ri++;const On=Wi(Ki[0]);n.texStorage2D(c.TEXTURE_CUBE_MAP,Ri,Js,On.width,On.height)}for(let On=0;On<6;On++)if(ei){as?$t&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+On,0,0,0,Ki[On].width,Ki[On].height,ts,tr,Ki[On].data):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+On,0,Js,Ki[On].width,Ki[On].height,0,ts,tr,Ki[On].data);for(let Li=0;Li<En.length;Li++){const Ds=En[Li].image[On].image;as?$t&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+On,Li+1,0,0,Ds.width,Ds.height,ts,tr,Ds.data):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+On,Li+1,Js,Ds.width,Ds.height,0,ts,tr,Ds.data)}}else{as?$t&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+On,0,0,0,ts,tr,Ki[On]):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+On,0,Js,ts,tr,Ki[On]);for(let Li=0;Li<En.length;Li++){const ki=En[Li];as?$t&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+On,Li+1,0,0,ts,tr,ki.image[On]):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+On,Li+1,Js,ts,tr,ki.image[On])}}}le(Ke)&&J(c.TEXTURE_CUBE_MAP),Cn.__version=Bn.version,Ke.onUpdate&&Ke.onUpdate(Ke)}gt.__version=Ke.version}(nn,gt,Ke):n.bindTexture(c.TEXTURE_CUBE_MAP,nn.__webglTexture,c.TEXTURE0+Ke)},this.rebindTextures=function jr(gt,Ke,nn){const Tn=s.get(gt);void 0!==Ke&&er(Tn.__webglFramebuffer,gt,gt.texture,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,0),void 0!==nn&&$r(gt)},this.setupRenderTarget=function zs(gt){const Ke=gt.texture,nn=s.get(gt),Tn=s.get(Ke);gt.addEventListener("dispose",bt);const Bn=gt.textures,Cn=!0===gt.isWebGLCubeRenderTarget,lr=Bn.length>1;if(lr||(void 0===Tn.__webglTexture&&(Tn.__webglTexture=c.createTexture()),Tn.__version=Ke.version,p.memory.textures++),Cn){nn.__webglFramebuffer=[];for(let Ai=0;Ai<6;Ai++)if(Ke.mipmaps&&Ke.mipmaps.length>0){nn.__webglFramebuffer[Ai]=[];for(let Fi=0;Fi<Ke.mipmaps.length;Fi++)nn.__webglFramebuffer[Ai][Fi]=c.createFramebuffer()}else nn.__webglFramebuffer[Ai]=c.createFramebuffer()}else{if(Ke.mipmaps&&Ke.mipmaps.length>0){nn.__webglFramebuffer=[];for(let Ai=0;Ai<Ke.mipmaps.length;Ai++)nn.__webglFramebuffer[Ai]=c.createFramebuffer()}else nn.__webglFramebuffer=c.createFramebuffer();if(lr)for(let Ai=0,Fi=Bn.length;Ai<Fi;Ai++){const Os=s.get(Bn[Ai]);void 0===Os.__webglTexture&&(Os.__webglTexture=c.createTexture(),p.memory.textures++)}if(gt.samples>0&&!1===Hi(gt)){nn.__webglMultisampledFramebuffer=c.createFramebuffer(),nn.__webglColorRenderbuffer=[],n.bindFramebuffer(c.FRAMEBUFFER,nn.__webglMultisampledFramebuffer);for(let Ai=0;Ai<Bn.length;Ai++){const Fi=Bn[Ai];nn.__webglColorRenderbuffer[Ai]=c.createRenderbuffer(),c.bindRenderbuffer(c.RENDERBUFFER,nn.__webglColorRenderbuffer[Ai]);const Os=u.convert(Fi.format,Fi.colorSpace),ei=u.convert(Fi.type),Ki=Le(Fi.internalFormat,Os,ei,Fi.colorSpace,!0===gt.isXRRenderTarget),Ur=qn(gt);c.renderbufferStorageMultisample(c.RENDERBUFFER,Ur,Ki,gt.width,gt.height),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0+Ai,c.RENDERBUFFER,nn.__webglColorRenderbuffer[Ai])}c.bindRenderbuffer(c.RENDERBUFFER,null),gt.depthBuffer&&(nn.__webglDepthRenderbuffer=c.createRenderbuffer(),_i(nn.__webglDepthRenderbuffer,gt,!0)),n.bindFramebuffer(c.FRAMEBUFFER,null)}}if(Cn){n.bindTexture(c.TEXTURE_CUBE_MAP,Tn.__webglTexture),os(c.TEXTURE_CUBE_MAP,Ke);for(let Ai=0;Ai<6;Ai++)if(Ke.mipmaps&&Ke.mipmaps.length>0)for(let Fi=0;Fi<Ke.mipmaps.length;Fi++)er(nn.__webglFramebuffer[Ai][Fi],gt,Ke,c.COLOR_ATTACHMENT0,c.TEXTURE_CUBE_MAP_POSITIVE_X+Ai,Fi);else er(nn.__webglFramebuffer[Ai],gt,Ke,c.COLOR_ATTACHMENT0,c.TEXTURE_CUBE_MAP_POSITIVE_X+Ai,0);le(Ke)&&J(c.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(lr){for(let Ai=0,Fi=Bn.length;Ai<Fi;Ai++){const Os=Bn[Ai],ei=s.get(Os);n.bindTexture(c.TEXTURE_2D,ei.__webglTexture),os(c.TEXTURE_2D,Os),er(nn.__webglFramebuffer,gt,Os,c.COLOR_ATTACHMENT0+Ai,c.TEXTURE_2D,0),le(Os)&&J(c.TEXTURE_2D)}n.unbindTexture()}else{let Ai=c.TEXTURE_2D;if((gt.isWebGL3DRenderTarget||gt.isWebGLArrayRenderTarget)&&(Ai=gt.isWebGL3DRenderTarget?c.TEXTURE_3D:c.TEXTURE_2D_ARRAY),n.bindTexture(Ai,Tn.__webglTexture),os(Ai,Ke),Ke.mipmaps&&Ke.mipmaps.length>0)for(let Fi=0;Fi<Ke.mipmaps.length;Fi++)er(nn.__webglFramebuffer[Fi],gt,Ke,c.COLOR_ATTACHMENT0,Ai,Fi);else er(nn.__webglFramebuffer,gt,Ke,c.COLOR_ATTACHMENT0,Ai,0);le(Ke)&&J(Ai),n.unbindTexture()}gt.depthBuffer&&$r(gt)},this.updateRenderTargetMipmap=function Rn(gt){const Ke=gt.textures;for(let nn=0,Tn=Ke.length;nn<Tn;nn++){const Bn=Ke[nn];if(le(Bn)){const Cn=He(gt),lr=s.get(Bn).__webglTexture;n.bindTexture(Cn,lr),J(Cn),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function Er(gt){if(gt.samples>0)if(!1===Hi(gt)){const Ke=gt.textures,nn=gt.width,Tn=gt.height;let Bn=c.COLOR_BUFFER_BIT;const Cn=gt.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT,lr=s.get(gt),Ai=Ke.length>1;if(Ai)for(let Fi=0;Fi<Ke.length;Fi++)n.bindFramebuffer(c.FRAMEBUFFER,lr.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0+Fi,c.RENDERBUFFER,null),n.bindFramebuffer(c.FRAMEBUFFER,lr.__webglFramebuffer),c.framebufferTexture2D(c.DRAW_FRAMEBUFFER,c.COLOR_ATTACHMENT0+Fi,c.TEXTURE_2D,null,0);n.bindFramebuffer(c.READ_FRAMEBUFFER,lr.__webglMultisampledFramebuffer),n.bindFramebuffer(c.DRAW_FRAMEBUFFER,lr.__webglFramebuffer);for(let Fi=0;Fi<Ke.length;Fi++){if(gt.resolveDepthBuffer&&(gt.depthBuffer&&(Bn|=c.DEPTH_BUFFER_BIT),gt.stencilBuffer&&gt.resolveStencilBuffer&&(Bn|=c.STENCIL_BUFFER_BIT)),Ai){c.framebufferRenderbuffer(c.READ_FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,lr.__webglColorRenderbuffer[Fi]);const Os=s.get(Ke[Fi]).__webglTexture;c.framebufferTexture2D(c.DRAW_FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,Os,0)}c.blitFramebuffer(0,0,nn,Tn,0,0,nn,Tn,Bn,c.NEAREST),!0===b&&(di.length=0,xt.length=0,di.push(c.COLOR_ATTACHMENT0+Fi),gt.depthBuffer&&!1===gt.resolveDepthBuffer&&(di.push(Cn),xt.push(Cn),c.invalidateFramebuffer(c.DRAW_FRAMEBUFFER,xt)),c.invalidateFramebuffer(c.READ_FRAMEBUFFER,di))}if(n.bindFramebuffer(c.READ_FRAMEBUFFER,null),n.bindFramebuffer(c.DRAW_FRAMEBUFFER,null),Ai)for(let Fi=0;Fi<Ke.length;Fi++){n.bindFramebuffer(c.FRAMEBUFFER,lr.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0+Fi,c.RENDERBUFFER,lr.__webglColorRenderbuffer[Fi]);const Os=s.get(Ke[Fi]).__webglTexture;n.bindFramebuffer(c.FRAMEBUFFER,lr.__webglFramebuffer),c.framebufferTexture2D(c.DRAW_FRAMEBUFFER,c.COLOR_ATTACHMENT0+Fi,c.TEXTURE_2D,Os,0)}n.bindFramebuffer(c.DRAW_FRAMEBUFFER,lr.__webglMultisampledFramebuffer)}else gt.depthBuffer&&!1===gt.resolveDepthBuffer&&b&&c.invalidateFramebuffer(c.DRAW_FRAMEBUFFER,[gt.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=$r,this.setupFrameBufferTexture=er,this.useMultisampledRTT=Hi}function G1(c,e){return{convert:function n(s,a=""){let u;const p=F.getTransfer(a);if(s===Fs)return c.UNSIGNED_BYTE;if(s===ho)return c.UNSIGNED_SHORT_4_4_4_4;if(s===Qe)return c.UNSIGNED_SHORT_5_5_5_1;if(s===$)return c.UNSIGNED_INT_5_9_9_9_REV;if(s===hs)return c.BYTE;if(s===ir)return c.SHORT;if(s===Ks)return c.UNSIGNED_SHORT;if(s===Mo)return c.INT;if(s===As)return c.UNSIGNED_INT;if(s===Us)return c.FLOAT;if(s===vs)return c.HALF_FLOAT;if(s===ue)return c.ALPHA;if(s===Ze)return c.RGB;if(s===pt)return c.RGBA;if(s===en)return c.LUMINANCE;if(s===pn)return c.LUMINANCE_ALPHA;if(s===Vn)return c.DEPTH_COMPONENT;if(s===ai)return c.DEPTH_STENCIL;if(s===ur)return c.RED;if(s===Ei)return c.RED_INTEGER;if(s===Yi)return c.RG;if(s===ns)return c.RG_INTEGER;if(s===fs)return c.RGBA_INTEGER;if(s===Pr||s===Tr||s===Is||s===eo)if(p===_s){if(u=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===u)return null;if(s===Pr)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Tr)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Is)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===eo)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(u=e.get("WEBGL_compressed_texture_s3tc"),null===u)return null;if(s===Pr)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Tr)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Is)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===eo)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(s===ws||s===ro||s===Vo||s===ea){if(u=e.get("WEBGL_compressed_texture_pvrtc"),null===u)return null;if(s===ws)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===ro)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Vo)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===ea)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===Gi||s===vr||s===Cl){if(u=e.get("WEBGL_compressed_texture_etc"),null===u)return null;if(s===Gi||s===vr)return p===_s?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(s===Cl)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}if(s===To||s===so||s===Zl||s===Ss||s===ja||s===_r||s===ka||s===ma||s===yo||s===Qo||s===Ba||s===ga||s===ca||s===oo){if(u=e.get("WEBGL_compressed_texture_astc"),null===u)return null;if(s===To)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===so)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===Zl)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Ss)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===ja)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===_r)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===ka)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===ma)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===yo)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Qo)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Ba)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===ga)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===ca)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===oo)return p===_s?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}if(s===Ro||s===Ta||s===Ua){if(u=e.get("EXT_texture_compression_bptc"),null===u)return null;if(s===Ro)return p===_s?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===Ta)return u.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Ua)return u.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(s===ll||s===va||s===No||s===Va){if(u=e.get("EXT_texture_compression_rgtc"),null===u)return null;if(s===Ro)return u.COMPRESSED_RED_RGTC1_EXT;if(s===va)return u.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===No)return u.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Va)return u.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===L?c.UNSIGNED_INT_24_8:void 0!==c[s]?c[s]:null}}}class t0 extends aa{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Iu extends ht{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Zm={type:"move"};class n0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Iu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Iu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new lt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new lt),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Iu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new lt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new lt),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const s of e.hand.values())this._getHandJoint(n,s)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,n,s){let a=null,u=null,p=null;const v=this._targetRay,b=this._grip,E=this._hand;if(e&&"visible-blurred"!==n.session.visibilityState){if(E&&e.hand){p=!0;for(const ye of e.hand.values()){const le=n.getJointPose(ye,s),J=this._getHandJoint(E,ye);null!==le&&(J.matrix.fromArray(le.transform.matrix),J.matrix.decompose(J.position,J.rotation,J.scale),J.matrixWorldNeedsUpdate=!0,J.jointRadius=le.radius),J.visible=null!==le}const V=E.joints["index-finger-tip"].position.distanceTo(E.joints["thumb-tip"].position),Q=.02,se=.005;E.inputState.pinching&&V>Q+se?(E.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!E.inputState.pinching&&V<=Q-se&&(E.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==b&&e.gripSpace&&(u=n.getPose(e.gripSpace,s),null!==u&&(b.matrix.fromArray(u.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,u.linearVelocity?(b.hasLinearVelocity=!0,b.linearVelocity.copy(u.linearVelocity)):b.hasLinearVelocity=!1,u.angularVelocity?(b.hasAngularVelocity=!0,b.angularVelocity.copy(u.angularVelocity)):b.hasAngularVelocity=!1));null!==v&&(a=n.getPose(e.targetRaySpace,s),null===a&&null!==u&&(a=u),null!==a&&(v.matrix.fromArray(a.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,a.linearVelocity?(v.hasLinearVelocity=!0,v.linearVelocity.copy(a.linearVelocity)):v.hasLinearVelocity=!1,a.angularVelocity?(v.hasAngularVelocity=!0,v.angularVelocity.copy(a.angularVelocity)):v.hasAngularVelocity=!1,this.dispatchEvent(Zm)))}return null!==v&&(v.visible=null!==a),null!==b&&(b.visible=null!==u),null!==E&&(E.visible=null!==p),this}_getHandJoint(e,n){if(void 0===e.joints[n.jointName]){const s=new Iu;s.matrixAutoUpdate=!1,s.visible=!1,e.joints[n.jointName]=s,e.add(s)}return e.joints[n.jointName]}}class W1{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,s){if(null===this.texture){const a=new Ht;e.properties.get(a).__webglTexture=n.texture,(n.depthNear!=s.depthNear||n.depthFar!=s.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=a}}getMesh(e){if(null!==this.texture&&null===this.mesh){const n=e.cameras[0].viewport,s=new Lo({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new no(new Qu(20,20),s)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class f_ extends pl{constructor(e,n){super();const s=this;let a=null,u=1,p=null,v="local-floor",b=1,E=null,O=null,U=null,V=null,Q=null,se=null;const ye=new W1,le=n.getContextAttributes();let J=null,He=null;const Le=[],Pe=[],Ct=new Mn;let ft=null;const bt=new aa;bt.viewport=new Wt;const Et=new aa;Et.viewport=new Wt;const tt=[bt,Et],je=new t0;let Nt=null,mn=null;function ln(An){const mi=Pe.indexOf(An.inputSource);if(-1===mi)return;const er=Le[mi];void 0!==er&&(er.update(An.inputSource,An.frame,E||p),er.dispatchEvent({type:An.type,data:An.inputSource}))}function yn(){a.removeEventListener("select",ln),a.removeEventListener("selectstart",ln),a.removeEventListener("selectend",ln),a.removeEventListener("squeeze",ln),a.removeEventListener("squeezestart",ln),a.removeEventListener("squeezeend",ln),a.removeEventListener("end",yn),a.removeEventListener("inputsourceschange",Ln);for(let An=0;An<Le.length;An++){const mi=Pe[An];null!==mi&&(Pe[An]=null,Le[An].disconnect(mi))}Nt=null,mn=null,ye.reset(),e.setRenderTarget(J),Q=null,V=null,U=null,a=null,He=null,Zs.stop(),s.isPresenting=!1,e.setPixelRatio(ft),e.setSize(Ct.width,Ct.height,!1),s.dispatchEvent({type:"sessionend"})}function Ln(An){for(let mi=0;mi<An.removed.length;mi++){const er=An.removed[mi],_i=Pe.indexOf(er);_i>=0&&(Pe[_i]=null,Le[_i].disconnect(er))}for(let mi=0;mi<An.added.length;mi++){const er=An.added[mi];let _i=Pe.indexOf(er);if(-1===_i){for(let $r=0;$r<Le.length;$r++){if($r>=Pe.length){Pe.push(er),_i=$r;break}if(null===Pe[$r]){Pe[$r]=er,_i=$r;break}}if(-1===_i)break}const Cr=Le[_i];Cr&&Cr.connect(er)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(An){let mi=Le[An];return void 0===mi&&(mi=new n0,Le[An]=mi),mi.getTargetRaySpace()},this.getControllerGrip=function(An){let mi=Le[An];return void 0===mi&&(mi=new n0,Le[An]=mi),mi.getGripSpace()},this.getHand=function(An){let mi=Le[An];return void 0===mi&&(mi=new n0,Le[An]=mi),mi.getHandSpace()},this.setFramebufferScaleFactor=function(An){u=An,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(An){v=An,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return E||p},this.setReferenceSpace=function(An){E=An},this.getBaseLayer=function(){return null!==V?V:Q},this.getBinding=function(){return U},this.getFrame=function(){return se},this.getSession=function(){return a},this.setSession=function(){var An=(0,W.A)(function*(mi){if(a=mi,null!==a){if(J=e.getRenderTarget(),a.addEventListener("select",ln),a.addEventListener("selectstart",ln),a.addEventListener("selectend",ln),a.addEventListener("squeeze",ln),a.addEventListener("squeezestart",ln),a.addEventListener("squeezeend",ln),a.addEventListener("end",yn),a.addEventListener("inputsourceschange",Ln),!0!==le.xrCompatible&&(yield n.makeXRCompatible()),ft=e.getPixelRatio(),e.getSize(Ct),void 0===a.renderState.layers)Q=new XRWebGLLayer(a,n,{antialias:le.antialias,alpha:!0,depth:le.depth,stencil:le.stencil,framebufferScaleFactor:u}),a.updateRenderState({baseLayer:Q}),e.setPixelRatio(1),e.setSize(Q.framebufferWidth,Q.framebufferHeight,!1),He=new dr(Q.framebufferWidth,Q.framebufferHeight,{format:pt,type:Fs,colorSpace:e.outputColorSpace,stencilBuffer:le.stencil});else{let er=null,_i=null,Cr=null;le.depth&&(Cr=le.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,er=le.stencil?ai:Vn,_i=le.stencil?L:As);const $r={colorFormat:n.RGBA8,depthFormat:Cr,scaleFactor:u};U=new XRWebGLBinding(a,n),V=U.createProjectionLayer($r),a.updateRenderState({layers:[V]}),e.setPixelRatio(1),e.setSize(V.textureWidth,V.textureHeight,!1),He=new dr(V.textureWidth,V.textureHeight,{format:pt,type:Fs,depthTexture:new Sc(V.textureWidth,V.textureHeight,_i,void 0,void 0,void 0,void 0,void 0,void 0,er),stencilBuffer:le.stencil,colorSpace:e.outputColorSpace,samples:le.antialias?4:0,resolveDepthBuffer:!1===V.ignoreDepthValues})}He.isXRRenderTarget=!0,this.setFoveation(b),E=null,p=yield a.requestReferenceSpace(v),Zs.setContext(a),Zs.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}});return function(mi){return An.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==a)return a.environmentBlendMode},this.getDepthTexture=function(){return ye.getDepthTexture()};const sn=new lt,ri=new lt;function Qn(An,mi){null===mi?An.matrixWorld.copy(An.matrix):An.matrixWorld.multiplyMatrices(mi.matrixWorld,An.matrix),An.matrixWorldInverse.copy(An.matrixWorld).invert()}this.updateCamera=function(An){if(null===a)return;let mi=An.near,er=An.far;null!==ye.texture&&(ye.depthNear>0&&(mi=ye.depthNear),ye.depthFar>0&&(er=ye.depthFar)),je.near=Et.near=bt.near=mi,je.far=Et.far=bt.far=er,(Nt!==je.near||mn!==je.far)&&(a.updateRenderState({depthNear:je.near,depthFar:je.far}),Nt=je.near,mn=je.far),bt.layers.mask=2|An.layers.mask,Et.layers.mask=4|An.layers.mask,je.layers.mask=bt.layers.mask|Et.layers.mask;const _i=An.parent,Cr=je.cameras;Qn(je,_i);for(let $r=0;$r<Cr.length;$r++)Qn(Cr[$r],_i);2===Cr.length?function xn(An,mi,er){sn.setFromMatrixPosition(mi.matrixWorld),ri.setFromMatrixPosition(er.matrixWorld);const _i=sn.distanceTo(ri),Cr=mi.projectionMatrix.elements,$r=er.projectionMatrix.elements,jr=Cr[14]/(Cr[10]-1),zs=Cr[14]/(Cr[10]+1),Rn=(Cr[9]+1)/Cr[5],di=(Cr[9]-1)/Cr[5],xt=(Cr[8]-1)/Cr[0],Er=($r[8]+1)/$r[0],qn=jr*xt,Hi=jr*Er,bi=_i/(-xt+Er),Br=bi*-xt;if(mi.matrixWorld.decompose(An.position,An.quaternion,An.scale),An.translateX(Br),An.translateZ(bi),An.matrixWorld.compose(An.position,An.quaternion,An.scale),An.matrixWorldInverse.copy(An.matrixWorld).invert(),-1===Cr[10])An.projectionMatrix.copy(mi.projectionMatrix),An.projectionMatrixInverse.copy(mi.projectionMatrixInverse);else{const Wi=jr+bi,gt=zs+bi;An.projectionMatrix.makePerspective(qn-Br,Hi+(_i-Br),Rn*zs/gt*Wi,di*zs/gt*Wi,Wi,gt),An.projectionMatrixInverse.copy(An.projectionMatrix).invert()}}(je,bt,Et):je.projectionMatrix.copy(bt.projectionMatrix),function Ii(An,mi,er){null===er?An.matrix.copy(mi.matrixWorld):(An.matrix.copy(er.matrixWorld),An.matrix.invert(),An.matrix.multiply(mi.matrixWorld)),An.matrix.decompose(An.position,An.quaternion,An.scale),An.updateMatrixWorld(!0),An.projectionMatrix.copy(mi.projectionMatrix),An.projectionMatrixInverse.copy(mi.projectionMatrixInverse),An.isPerspectiveCamera&&(An.fov=2*Ea*Math.atan(1/An.projectionMatrix.elements[5]),An.zoom=1)}(An,je,_i)},this.getCamera=function(){return je},this.getFoveation=function(){if(null!==V||null!==Q)return b},this.setFoveation=function(An){b=An,null!==V&&(V.fixedFoveation=An),null!==Q&&void 0!==Q.fixedFoveation&&(Q.fixedFoveation=An)},this.hasDepthSensing=function(){return null!==ye.texture},this.getDepthSensingMesh=function(){return ye.getMesh(je)};let Vi=null;const Zs=new _p;Zs.setAnimationLoop(function os(An,mi){if(O=mi.getViewerPose(E||p),se=mi,null!==O){const er=O.views;null!==Q&&(e.setRenderTargetFramebuffer(He,Q.framebuffer),e.setRenderTarget(He));let _i=!1;er.length!==je.cameras.length&&(je.cameras.length=0,_i=!0);for(let $r=0;$r<er.length;$r++){const jr=er[$r];let zs=null;if(null!==Q)zs=Q.getViewport(jr);else{const di=U.getViewSubImage(V,jr);zs=di.viewport,0===$r&&(e.setRenderTargetTextures(He,di.colorTexture,V.ignoreDepthValues?void 0:di.depthStencilTexture),e.setRenderTarget(He))}let Rn=tt[$r];void 0===Rn&&(Rn=new aa,Rn.layers.enable($r),Rn.viewport=new Wt,tt[$r]=Rn),Rn.matrix.fromArray(jr.transform.matrix),Rn.matrix.decompose(Rn.position,Rn.quaternion,Rn.scale),Rn.projectionMatrix.fromArray(jr.projectionMatrix),Rn.projectionMatrixInverse.copy(Rn.projectionMatrix).invert(),Rn.viewport.set(zs.x,zs.y,zs.width,zs.height),0===$r&&(je.matrix.copy(Rn.matrix),je.matrix.decompose(je.position,je.quaternion,je.scale)),!0===_i&&je.cameras.push(Rn)}const Cr=a.enabledFeatures;if(Cr&&Cr.includes("depth-sensing")){const $r=U.getDepthInformation(er[0]);$r&&$r.isValid&&$r.texture&&ye.init(e,$r,a.renderState)}}for(let er=0;er<Le.length;er++){const _i=Pe[er],Cr=Le[er];null!==_i&&void 0!==Cr&&Cr.update(_i,mi,E||p)}Vi&&Vi(An,mi),mi.detectedPlanes&&s.dispatchEvent({type:"planesdetected",data:mi}),se=null}),this.setAnimationLoop=function(An){Vi=An},this.dispose=function(){}}}const Uc=new oa,Mc=new xr;function Jc(c,e){function n(le,J){!0===le.matrixAutoUpdate&&le.updateMatrix(),J.value.copy(le.matrix)}function u(le,J){le.opacity.value=J.opacity,J.color&&le.diffuse.value.copy(J.color),J.emissive&&le.emissive.value.copy(J.emissive).multiplyScalar(J.emissiveIntensity),J.map&&(le.map.value=J.map,n(J.map,le.mapTransform)),J.alphaMap&&(le.alphaMap.value=J.alphaMap,n(J.alphaMap,le.alphaMapTransform)),J.bumpMap&&(le.bumpMap.value=J.bumpMap,n(J.bumpMap,le.bumpMapTransform),le.bumpScale.value=J.bumpScale,1===J.side&&(le.bumpScale.value*=-1)),J.normalMap&&(le.normalMap.value=J.normalMap,n(J.normalMap,le.normalMapTransform),le.normalScale.value.copy(J.normalScale),1===J.side&&le.normalScale.value.negate()),J.displacementMap&&(le.displacementMap.value=J.displacementMap,n(J.displacementMap,le.displacementMapTransform),le.displacementScale.value=J.displacementScale,le.displacementBias.value=J.displacementBias),J.emissiveMap&&(le.emissiveMap.value=J.emissiveMap,n(J.emissiveMap,le.emissiveMapTransform)),J.specularMap&&(le.specularMap.value=J.specularMap,n(J.specularMap,le.specularMapTransform)),J.alphaTest>0&&(le.alphaTest.value=J.alphaTest);const He=e.get(J),Le=He.envMap,Pe=He.envMapRotation;Le&&(le.envMap.value=Le,Uc.copy(Pe),Uc.x*=-1,Uc.y*=-1,Uc.z*=-1,Le.isCubeTexture&&!1===Le.isRenderTargetTexture&&(Uc.y*=-1,Uc.z*=-1),le.envMapRotation.value.setFromMatrix4(Mc.makeRotationFromEuler(Uc)),le.flipEnvMap.value=Le.isCubeTexture&&!1===Le.isRenderTargetTexture?-1:1,le.reflectivity.value=J.reflectivity,le.ior.value=J.ior,le.refractionRatio.value=J.refractionRatio),J.lightMap&&(le.lightMap.value=J.lightMap,le.lightMapIntensity.value=J.lightMapIntensity,n(J.lightMap,le.lightMapTransform)),J.aoMap&&(le.aoMap.value=J.aoMap,le.aoMapIntensity.value=J.aoMapIntensity,n(J.aoMap,le.aoMapTransform))}return{refreshFogUniforms:function s(le,J){J.color.getRGB(le.fogColor.value,Xu(c)),J.isFog?(le.fogNear.value=J.near,le.fogFar.value=J.far):J.isFogExp2&&(le.fogDensity.value=J.density)},refreshMaterialUniforms:function a(le,J,He,Le,Pe){J.isMeshBasicMaterial||J.isMeshLambertMaterial?u(le,J):J.isMeshToonMaterial?(u(le,J),function U(le,J){J.gradientMap&&(le.gradientMap.value=J.gradientMap)}(le,J)):J.isMeshPhongMaterial?(u(le,J),function O(le,J){le.specular.value.copy(J.specular),le.shininess.value=Math.max(J.shininess,1e-4)}(le,J)):J.isMeshStandardMaterial?(u(le,J),function V(le,J){le.metalness.value=J.metalness,J.metalnessMap&&(le.metalnessMap.value=J.metalnessMap,n(J.metalnessMap,le.metalnessMapTransform)),le.roughness.value=J.roughness,J.roughnessMap&&(le.roughnessMap.value=J.roughnessMap,n(J.roughnessMap,le.roughnessMapTransform)),J.envMap&&(le.envMapIntensity.value=J.envMapIntensity)}(le,J),J.isMeshPhysicalMaterial&&function Q(le,J,He){le.ior.value=J.ior,J.sheen>0&&(le.sheenColor.value.copy(J.sheenColor).multiplyScalar(J.sheen),le.sheenRoughness.value=J.sheenRoughness,J.sheenColorMap&&(le.sheenColorMap.value=J.sheenColorMap,n(J.sheenColorMap,le.sheenColorMapTransform)),J.sheenRoughnessMap&&(le.sheenRoughnessMap.value=J.sheenRoughnessMap,n(J.sheenRoughnessMap,le.sheenRoughnessMapTransform))),J.clearcoat>0&&(le.clearcoat.value=J.clearcoat,le.clearcoatRoughness.value=J.clearcoatRoughness,J.clearcoatMap&&(le.clearcoatMap.value=J.clearcoatMap,n(J.clearcoatMap,le.clearcoatMapTransform)),J.clearcoatRoughnessMap&&(le.clearcoatRoughnessMap.value=J.clearcoatRoughnessMap,n(J.clearcoatRoughnessMap,le.clearcoatRoughnessMapTransform)),J.clearcoatNormalMap&&(le.clearcoatNormalMap.value=J.clearcoatNormalMap,n(J.clearcoatNormalMap,le.clearcoatNormalMapTransform),le.clearcoatNormalScale.value.copy(J.clearcoatNormalScale),1===J.side&&le.clearcoatNormalScale.value.negate())),J.dispersion>0&&(le.dispersion.value=J.dispersion),J.iridescence>0&&(le.iridescence.value=J.iridescence,le.iridescenceIOR.value=J.iridescenceIOR,le.iridescenceThicknessMinimum.value=J.iridescenceThicknessRange[0],le.iridescenceThicknessMaximum.value=J.iridescenceThicknessRange[1],J.iridescenceMap&&(le.iridescenceMap.value=J.iridescenceMap,n(J.iridescenceMap,le.iridescenceMapTransform)),J.iridescenceThicknessMap&&(le.iridescenceThicknessMap.value=J.iridescenceThicknessMap,n(J.iridescenceThicknessMap,le.iridescenceThicknessMapTransform))),J.transmission>0&&(le.transmission.value=J.transmission,le.transmissionSamplerMap.value=He.texture,le.transmissionSamplerSize.value.set(He.width,He.height),J.transmissionMap&&(le.transmissionMap.value=J.transmissionMap,n(J.transmissionMap,le.transmissionMapTransform)),le.thickness.value=J.thickness,J.thicknessMap&&(le.thicknessMap.value=J.thicknessMap,n(J.thicknessMap,le.thicknessMapTransform)),le.attenuationDistance.value=J.attenuationDistance,le.attenuationColor.value.copy(J.attenuationColor)),J.anisotropy>0&&(le.anisotropyVector.value.set(J.anisotropy*Math.cos(J.anisotropyRotation),J.anisotropy*Math.sin(J.anisotropyRotation)),J.anisotropyMap&&(le.anisotropyMap.value=J.anisotropyMap,n(J.anisotropyMap,le.anisotropyMapTransform))),le.specularIntensity.value=J.specularIntensity,le.specularColor.value.copy(J.specularColor),J.specularColorMap&&(le.specularColorMap.value=J.specularColorMap,n(J.specularColorMap,le.specularColorMapTransform)),J.specularIntensityMap&&(le.specularIntensityMap.value=J.specularIntensityMap,n(J.specularIntensityMap,le.specularIntensityMapTransform))}(le,J,Pe)):J.isMeshMatcapMaterial?(u(le,J),function se(le,J){J.matcap&&(le.matcap.value=J.matcap)}(le,J)):J.isMeshDepthMaterial?u(le,J):J.isMeshDistanceMaterial?(u(le,J),function ye(le,J){const He=e.get(J).light;le.referencePosition.value.setFromMatrixPosition(He.matrixWorld),le.nearDistance.value=He.shadow.camera.near,le.farDistance.value=He.shadow.camera.far}(le,J)):J.isMeshNormalMaterial?u(le,J):J.isLineBasicMaterial?(function p(le,J){le.diffuse.value.copy(J.color),le.opacity.value=J.opacity,J.map&&(le.map.value=J.map,n(J.map,le.mapTransform))}(le,J),J.isLineDashedMaterial&&function v(le,J){le.dashSize.value=J.dashSize,le.totalSize.value=J.dashSize+J.gapSize,le.scale.value=J.scale}(le,J)):J.isPointsMaterial?function b(le,J,He,Le){le.diffuse.value.copy(J.color),le.opacity.value=J.opacity,le.size.value=J.size*He,le.scale.value=.5*Le,J.map&&(le.map.value=J.map,n(J.map,le.uvTransform)),J.alphaMap&&(le.alphaMap.value=J.alphaMap,n(J.alphaMap,le.alphaMapTransform)),J.alphaTest>0&&(le.alphaTest.value=J.alphaTest)}(le,J,He,Le):J.isSpriteMaterial?function E(le,J){le.diffuse.value.copy(J.color),le.opacity.value=J.opacity,le.rotation.value=J.rotation,J.map&&(le.map.value=J.map,n(J.map,le.mapTransform)),J.alphaMap&&(le.alphaMap.value=J.alphaMap,n(J.alphaMap,le.alphaMapTransform)),J.alphaTest>0&&(le.alphaTest.value=J.alphaTest)}(le,J):J.isShadowMaterial?(le.color.value.copy(J.color),le.opacity.value=J.opacity):J.isShaderMaterial&&(J.uniformsNeedUpdate=!1)}}}function p_(c,e,n,s){let a={},u={},p=[];const v=c.getParameter(c.MAX_UNIFORM_BUFFER_BINDINGS);function Q(He,Le,Pe,Ct){const ft=He.value,bt=Le+"_"+Pe;if(void 0===Ct[bt])return Ct[bt]="number"==typeof ft||"boolean"==typeof ft?ft:ft.clone(),!0;{const Et=Ct[bt];if("number"==typeof ft||"boolean"==typeof ft){if(Et!==ft)return Ct[bt]=ft,!0}else if(!1===Et.equals(ft))return Et.copy(ft),!0}return!1}function ye(He){const Le={boundary:0,storage:0};return"number"==typeof He||"boolean"==typeof He?(Le.boundary=4,Le.storage=4):He.isVector2?(Le.boundary=8,Le.storage=8):He.isVector3||He.isColor?(Le.boundary=16,Le.storage=12):He.isVector4?(Le.boundary=16,Le.storage=16):He.isMatrix3?(Le.boundary=48,Le.storage=48):He.isMatrix4?(Le.boundary=64,Le.storage=64):He.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",He),Le}function le(He){const Le=He.target;Le.removeEventListener("dispose",le);const Pe=p.indexOf(Le.__bindingPointIndex);p.splice(Pe,1),c.deleteBuffer(a[Le.id]),delete a[Le.id],delete u[Le.id]}return{bind:function b(He,Le){s.uniformBlockBinding(He,Le.program)},update:function E(He,Le){let Pe=a[He.id];void 0===Pe&&(function se(He){const Le=He.uniforms;let Pe=0;for(let bt=0,Et=Le.length;bt<Et;bt++){const tt=Array.isArray(Le[bt])?Le[bt]:[Le[bt]];for(let je=0,Nt=tt.length;je<Nt;je++){const mn=tt[je],ln=Array.isArray(mn.value)?mn.value:[mn.value];for(let yn=0,Ln=ln.length;yn<Ln;yn++){const ri=ye(ln[yn]),xn=Pe%16,Qn=xn%ri.boundary,Ii=xn+Qn;Pe+=Qn,0!==Ii&&16-Ii<ri.storage&&(Pe+=16-Ii),mn.__data=new Float32Array(ri.storage/Float32Array.BYTES_PER_ELEMENT),mn.__offset=Pe,Pe+=ri.storage}}}const ft=Pe%16;ft>0&&(Pe+=16-ft),He.__size=Pe,He.__cache={}}(He),Pe=function O(He){const Le=function U(){for(let He=0;He<v;He++)if(-1===p.indexOf(He))return p.push(He),He;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();He.__bindingPointIndex=Le;const Pe=c.createBuffer(),Ct=He.__size,ft=He.usage;return c.bindBuffer(c.UNIFORM_BUFFER,Pe),c.bufferData(c.UNIFORM_BUFFER,Ct,ft),c.bindBuffer(c.UNIFORM_BUFFER,null),c.bindBufferBase(c.UNIFORM_BUFFER,Le,Pe),Pe}(He),a[He.id]=Pe,He.addEventListener("dispose",le)),s.updateUBOMapping(He,Le.program);const ft=e.render.frame;u[He.id]!==ft&&(function V(He){const Pe=He.uniforms,Ct=He.__cache;c.bindBuffer(c.UNIFORM_BUFFER,a[He.id]);for(let ft=0,bt=Pe.length;ft<bt;ft++){const Et=Array.isArray(Pe[ft])?Pe[ft]:[Pe[ft]];for(let tt=0,je=Et.length;tt<je;tt++){const Nt=Et[tt];if(!0===Q(Nt,ft,tt,Ct)){const mn=Nt.__offset,ln=Array.isArray(Nt.value)?Nt.value:[Nt.value];let yn=0;for(let Ln=0;Ln<ln.length;Ln++){const sn=ln[Ln],ri=ye(sn);"number"==typeof sn||"boolean"==typeof sn?(Nt.__data[0]=sn,c.bufferSubData(c.UNIFORM_BUFFER,mn+yn,Nt.__data)):sn.isMatrix3?(Nt.__data[0]=sn.elements[0],Nt.__data[1]=sn.elements[1],Nt.__data[2]=sn.elements[2],Nt.__data[3]=0,Nt.__data[4]=sn.elements[3],Nt.__data[5]=sn.elements[4],Nt.__data[6]=sn.elements[5],Nt.__data[7]=0,Nt.__data[8]=sn.elements[6],Nt.__data[9]=sn.elements[7],Nt.__data[10]=sn.elements[8],Nt.__data[11]=0):(sn.toArray(Nt.__data,yn),yn+=ri.storage/Float32Array.BYTES_PER_ELEMENT)}c.bufferSubData(c.UNIFORM_BUFFER,mn,Nt.__data)}}}c.bindBuffer(c.UNIFORM_BUFFER,null)}(He),u[He.id]=ft)},dispose:function J(){for(const He in a)c.deleteBuffer(a[He]);p=[],a={},u={}}}}class dE{constructor(e={}){const{canvas:n=Xl(),context:s=null,depth:a=!0,stencil:u=!1,alpha:p=!1,antialias:v=!1,premultipliedAlpha:b=!0,preserveDrawingBuffer:E=!1,powerPreference:O="default",failIfMajorPerformanceCaveat:U=!1,reverseDepthBuffer:V=!1}=e;let Q;if(this.isWebGLRenderer=!0,null!==s){if(typeof WebGLRenderingContext<"u"&&s instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");Q=s.getContextAttributes().alpha}else Q=p;const se=new Uint32Array(4),ye=new Int32Array(4);let le=null,J=null;const He=[],Le=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Po,this.toneMapping=cr,this.toneMappingExposure=1;const Pe=this;let Ct=!1,ft=0,bt=0,Et=null,tt=-1,je=null;const Nt=new Wt,mn=new Wt;let ln=null;const yn=new Oi(0);let Ln=0,sn=n.width,ri=n.height,xn=1,Qn=null,Ii=null;const Vi=new Wt(0,0,sn,ri),os=new Wt(0,0,sn,ri);let Zs=!1;const An=new ph;let mi=!1,er=!1;const _i=new xr,Cr=new xr,$r=new lt,jr=new Wt,zs={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Rn=!1;function di(){return null===Et?xn:1}let qn,Hi,bi,Br,Wi,gt,Ke,nn,Tn,Bn,Cn,lr,Ai,Fi,Os,ei,Ki,Ur,ts,tr,Js,as,Uo,$t,xt=s;function Er(rt,jt){return n.getContext(rt,jt)}try{const rt={alpha:!0,depth:a,stencil:u,antialias:v,premultipliedAlpha:b,preserveDrawingBuffer:E,powerPreference:O,failIfMajorPerformanceCaveat:U};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r170"),n.addEventListener("webglcontextlost",On,!1),n.addEventListener("webglcontextrestored",Li,!1),n.addEventListener("webglcontextcreationerror",ki,!1),null===xt){const jt="webgl2";if(xt=Er(jt,rt),null===xt)throw Er(jt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(rt){throw console.error("THREE.WebGLRenderer: "+rt.message),rt}function Ri(){qn=new bl(xt),qn.init(),as=new G1(xt,qn),Hi=new Tt(xt,qn,e,as),bi=new oE(xt,qn),Hi.reverseDepthBuffer&&V&&bi.buffers.depth.setReversed(!0),Br=new Yc(xt),Wi=new O1,gt=new uE(xt,qn,bi,Wi,Hi,as,Br),Ke=new tn(Pe),nn=new Qc(Pe),Tn=new um(xt),Uo=new _e(xt,Tn),Bn=new sl(xt,Tn,Br,Uo),Cn=new rd(xt,Bn,Tn,Br),ts=new mu(xt,Hi,gt),ei=new Ut(Wi),lr=new P1(Pe,Ke,nn,qn,Hi,Uo,ei),Ai=new Jc(Pe,Wi),Fi=new rE,Os=new U1(qn),Ur=new w(Pe,Ke,nn,bi,Cn,Q,b),Ki=new z1(Pe,Cn,Hi),$t=new p_(xt,Br,Hi,bi),tr=new Ue(xt,qn,Br),Js=new id(xt,qn,Br),Br.programs=lr.programs,Pe.capabilities=Hi,Pe.extensions=qn,Pe.properties=Wi,Pe.renderLists=Fi,Pe.shadowMap=Ki,Pe.state=bi,Pe.info=Br}Ri();const En=new f_(Pe,xt);function On(rt){rt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Ct=!0}function Li(){console.log("THREE.WebGLRenderer: Context Restored."),Ct=!1;const rt=Br.autoReset,jt=Ki.enabled,on=Ki.autoUpdate,dn=Ki.needsUpdate,qt=Ki.type;Ri(),Br.autoReset=rt,Ki.enabled=jt,Ki.autoUpdate=on,Ki.needsUpdate=dn,Ki.type=qt}function ki(rt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",rt.statusMessage)}function Ds(rt){const jt=rt.target;jt.removeEventListener("dispose",Ds),function wa(rt){(function ol(rt){const jt=Wi.get(rt).programs;void 0!==jt&&(jt.forEach(function(on){lr.releaseProgram(on)}),rt.isShaderMaterial&&lr.releaseShaderCache(rt))})(rt),Wi.remove(rt)}(jt)}function _o(rt,jt,on){!0===rt.transparent&&2===rt.side&&!1===rt.forceSinglePass?(rt.side=1,rt.needsUpdate=!0,J0(rt,jt,on),rt.side=0,rt.needsUpdate=!0,J0(rt,jt,on),rt.side=2):J0(rt,jt,on)}this.xr=En,this.getContext=function(){return xt},this.getContextAttributes=function(){return xt.getContextAttributes()},this.forceContextLoss=function(){const rt=qn.get("WEBGL_lose_context");rt&&rt.loseContext()},this.forceContextRestore=function(){const rt=qn.get("WEBGL_lose_context");rt&&rt.restoreContext()},this.getPixelRatio=function(){return xn},this.setPixelRatio=function(rt){void 0!==rt&&(xn=rt,this.setSize(sn,ri,!1))},this.getSize=function(rt){return rt.set(sn,ri)},this.setSize=function(rt,jt,on=!0){En.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(sn=rt,ri=jt,n.width=Math.floor(rt*xn),n.height=Math.floor(jt*xn),!0===on&&(n.style.width=rt+"px",n.style.height=jt+"px"),this.setViewport(0,0,rt,jt))},this.getDrawingBufferSize=function(rt){return rt.set(sn*xn,ri*xn).floor()},this.setDrawingBufferSize=function(rt,jt,on){sn=rt,ri=jt,xn=on,n.width=Math.floor(rt*on),n.height=Math.floor(jt*on),this.setViewport(0,0,rt,jt)},this.getCurrentViewport=function(rt){return rt.copy(Nt)},this.getViewport=function(rt){return rt.copy(Vi)},this.setViewport=function(rt,jt,on,dn){rt.isVector4?Vi.set(rt.x,rt.y,rt.z,rt.w):Vi.set(rt,jt,on,dn),bi.viewport(Nt.copy(Vi).multiplyScalar(xn).round())},this.getScissor=function(rt){return rt.copy(os)},this.setScissor=function(rt,jt,on,dn){rt.isVector4?os.set(rt.x,rt.y,rt.z,rt.w):os.set(rt,jt,on,dn),bi.scissor(mn.copy(os).multiplyScalar(xn).round())},this.getScissorTest=function(){return Zs},this.setScissorTest=function(rt){bi.setScissorTest(Zs=rt)},this.setOpaqueSort=function(rt){Qn=rt},this.setTransparentSort=function(rt){Ii=rt},this.getClearColor=function(rt){return rt.copy(Ur.getClearColor())},this.setClearColor=function(){Ur.setClearColor.apply(Ur,arguments)},this.getClearAlpha=function(){return Ur.getClearAlpha()},this.setClearAlpha=function(){Ur.setClearAlpha.apply(Ur,arguments)},this.clear=function(rt=!0,jt=!0,on=!0){let dn=0;if(rt){let qt=!1;if(null!==Et){const hi=Et.texture.format;qt=hi===fs||hi===ns||hi===Ei}if(qt){const hi=Et.texture.type,Ni=hi===Fs||hi===As||hi===Ks||hi===L||hi===ho||hi===Qe,pr=Ur.getClearColor(),sr=Ur.getClearAlpha(),Xr=pr.r,gs=pr.g,nr=pr.b;Ni?(se[0]=Xr,se[1]=gs,se[2]=nr,se[3]=sr,xt.clearBufferuiv(xt.COLOR,0,se)):(ye[0]=Xr,ye[1]=gs,ye[2]=nr,ye[3]=sr,xt.clearBufferiv(xt.COLOR,0,ye))}else dn|=xt.COLOR_BUFFER_BIT}jt&&(dn|=xt.DEPTH_BUFFER_BIT),on&&(dn|=xt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),xt.clear(dn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",On,!1),n.removeEventListener("webglcontextrestored",Li,!1),n.removeEventListener("webglcontextcreationerror",ki,!1),Fi.dispose(),Os.dispose(),Wi.dispose(),Ke.dispose(),nn.dispose(),Cn.dispose(),Uo.dispose(),$t.dispose(),lr.dispose(),En.dispose(),En.removeEventListener("sessionstart",wy),En.removeEventListener("sessionend",Ty),sh.stop()},this.renderBufferDirect=function(rt,jt,on,dn,qt,hi){null===jt&&(jt=zs);const Ni=qt.isMesh&&qt.matrixWorld.determinant()<0,pr=function nx(rt,jt,on,dn,qt){!0!==jt.isScene&&(jt=zs),gt.resetTextureUnits();const hi=jt.fog,pr=null===Et?Pe.outputColorSpace:!0===Et.isXRRenderTarget?Et.texture.colorSpace:Ho,sr=(dn.isMeshStandardMaterial?nn:Ke).get(dn.envMap||(dn.isMeshStandardMaterial?jt.environment:null)),Xr=!0===dn.vertexColors&&!!on.attributes.color&&4===on.attributes.color.itemSize,gs=!!on.attributes.tangent&&(!!dn.normalMap||dn.anisotropy>0),nr=!!on.morphAttributes.position,$s=!!on.morphAttributes.normal,Eo=!!on.morphAttributes.color;let So=cr;dn.toneMapped&&(null===Et||!0===Et.isXRRenderTarget)&&(So=Pe.toneMapping);const Za=on.morphAttributes.position||on.morphAttributes.normal||on.morphAttributes.color,js=void 0!==Za?Za.length:0,or=Wi.get(dn),pc=J.state.lights;!0!==mi||!0!==er&&rt===je||ei.setState(dn,rt,rt===je&&dn.id===tt);let Xs=!1;dn.version===or.__version?(or.needsLights&&or.lightsStateVersion!==pc.state.version||or.outputColorSpace!==pr||qt.isBatchedMesh&&!1===or.batching||!qt.isBatchedMesh&&!0===or.batching||qt.isBatchedMesh&&!0===or.batchingColor&&null===qt.colorTexture||qt.isBatchedMesh&&!1===or.batchingColor&&null!==qt.colorTexture||qt.isInstancedMesh&&!1===or.instancing||!qt.isInstancedMesh&&!0===or.instancing||qt.isSkinnedMesh&&!1===or.skinning||!qt.isSkinnedMesh&&!0===or.skinning||qt.isInstancedMesh&&!0===or.instancingColor&&null===qt.instanceColor||qt.isInstancedMesh&&!1===or.instancingColor&&null!==qt.instanceColor||qt.isInstancedMesh&&!0===or.instancingMorph&&null===qt.morphTexture||qt.isInstancedMesh&&!1===or.instancingMorph&&null!==qt.morphTexture||or.envMap!==sr||!0===dn.fog&&or.fog!==hi||void 0!==or.numClippingPlanes&&(or.numClippingPlanes!==ei.numPlanes||or.numIntersection!==ei.numIntersection)||or.vertexAlphas!==Xr||or.vertexTangents!==gs||or.morphTargets!==nr||or.morphNormals!==$s||or.morphColors!==Eo||or.toneMapping!==So||or.morphTargetsCount!==js)&&(Xs=!0):(Xs=!0,or.__version=dn.version);let Hl=or.currentProgram;!0===Xs&&(Hl=J0(dn,jt,qt));let ru=!1,al=!1,yu=!1;const Xo=Hl.getUniforms(),su=or.uniforms;if(bi.useProgram(Hl.program)&&(ru=!0,al=!0,yu=!0),dn.id!==tt&&(tt=dn.id,al=!0),ru||je!==rt){bi.buffers.depth.getReversed()?(_i.copy(rt.projectionMatrix),function De(c){const e=c.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}(_i),function I(c){const e=c.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}(_i),Xo.setValue(xt,"projectionMatrix",_i)):Xo.setValue(xt,"projectionMatrix",rt.projectionMatrix),Xo.setValue(xt,"viewMatrix",rt.matrixWorldInverse);const Uu=Xo.map.cameraPosition;void 0!==Uu&&Uu.setValue(xt,$r.setFromMatrixPosition(rt.matrixWorld)),Hi.logarithmicDepthBuffer&&Xo.setValue(xt,"logDepthBufFC",2/(Math.log(rt.far+1)/Math.LN2)),(dn.isMeshPhongMaterial||dn.isMeshToonMaterial||dn.isMeshLambertMaterial||dn.isMeshBasicMaterial||dn.isMeshStandardMaterial||dn.isShaderMaterial)&&Xo.setValue(xt,"isOrthographic",!0===rt.isOrthographicCamera),je!==rt&&(je=rt,al=!0,yu=!0)}if(qt.isSkinnedMesh){Xo.setOptional(xt,qt,"bindMatrix"),Xo.setOptional(xt,qt,"bindMatrixInverse");const Cc=qt.skeleton;Cc&&(null===Cc.boneTexture&&Cc.computeBoneTexture(),Xo.setValue(xt,"boneTexture",Cc.boneTexture,gt))}qt.isBatchedMesh&&(Xo.setOptional(xt,qt,"batchingTexture"),Xo.setValue(xt,"batchingTexture",qt._matricesTexture,gt),Xo.setOptional(xt,qt,"batchingIdTexture"),Xo.setValue(xt,"batchingIdTexture",qt._indirectTexture,gt),Xo.setOptional(xt,qt,"batchingColorTexture"),null!==qt._colorsTexture&&Xo.setValue(xt,"batchingColorTexture",qt._colorsTexture,gt));const tf=on.morphAttributes;if((void 0!==tf.position||void 0!==tf.normal||void 0!==tf.color)&&ts.update(qt,on,Hl),(al||or.receiveShadow!==qt.receiveShadow)&&(or.receiveShadow=qt.receiveShadow,Xo.setValue(xt,"receiveShadow",qt.receiveShadow)),dn.isMeshGouraudMaterial&&null!==dn.envMap&&(su.envMap.value=sr,su.flipEnvMap.value=sr.isCubeTexture&&!1===sr.isRenderTargetTexture?-1:1),dn.isMeshStandardMaterial&&null===dn.envMap&&null!==jt.environment&&(su.envMapIntensity.value=jt.environmentIntensity),al&&(Xo.setValue(xt,"toneMappingExposure",Pe.toneMappingExposure),or.needsLights&&function Py(rt,jt){rt.ambientLightColor.needsUpdate=jt,rt.lightProbe.needsUpdate=jt,rt.directionalLights.needsUpdate=jt,rt.directionalLightShadows.needsUpdate=jt,rt.pointLights.needsUpdate=jt,rt.pointLightShadows.needsUpdate=jt,rt.spotLights.needsUpdate=jt,rt.spotLightShadows.needsUpdate=jt,rt.rectAreaLights.needsUpdate=jt,rt.hemisphereLights.needsUpdate=jt}(su,yu),hi&&!0===dn.fog&&Ai.refreshFogUniforms(su,hi),Ai.refreshMaterialUniforms(su,dn,xn,ri,J.state.transmissionRenderTarget[rt.id]),Zp.upload(xt,Ry(or),su,gt)),dn.isShaderMaterial&&!0===dn.uniformsNeedUpdate&&(Zp.upload(xt,Ry(or),su,gt),dn.uniformsNeedUpdate=!1),dn.isSpriteMaterial&&Xo.setValue(xt,"center",qt.center),Xo.setValue(xt,"modelViewMatrix",qt.modelViewMatrix),Xo.setValue(xt,"normalMatrix",qt.normalMatrix),Xo.setValue(xt,"modelMatrix",qt.matrixWorld),dn.isShaderMaterial||dn.isRawShaderMaterial){const Cc=dn.uniformsGroups;for(let Uu=0,Vu=Cc.length;Uu<Vu;Uu++){const Zg=Cc[Uu];$t.update(Zg,Hl),$t.bind(Zg,Hl)}}return Hl}(rt,jt,on,dn,qt);bi.setMaterial(dn,Ni);let sr=on.index,Xr=1;if(!0===dn.wireframe){if(sr=Bn.getWireframeAttribute(on),void 0===sr)return;Xr=2}const gs=on.drawRange,nr=on.attributes.position;let $s=gs.start*Xr,Eo=(gs.start+gs.count)*Xr;null!==hi&&($s=Math.max($s,hi.start*Xr),Eo=Math.min(Eo,(hi.start+hi.count)*Xr)),null!==sr?($s=Math.max($s,0),Eo=Math.min(Eo,sr.count)):null!=nr&&($s=Math.max($s,0),Eo=Math.min(Eo,nr.count));const So=Eo-$s;if(So<0||So===1/0)return;Uo.setup(qt,dn,pr,on,sr);let Za,js=tr;if(null!==sr&&(Za=Tn.get(sr),js=Js,js.setIndex(Za)),qt.isMesh)!0===dn.wireframe?(bi.setLineWidth(dn.wireframeLinewidth*di()),js.setMode(xt.LINES)):js.setMode(xt.TRIANGLES);else if(qt.isLine){let or=dn.linewidth;void 0===or&&(or=1),bi.setLineWidth(or*di()),js.setMode(qt.isLineSegments?xt.LINES:qt.isLineLoop?xt.LINE_LOOP:xt.LINE_STRIP)}else qt.isPoints?js.setMode(xt.POINTS):qt.isSprite&&js.setMode(xt.TRIANGLES);if(qt.isBatchedMesh)if(null!==qt._multiDrawInstances)js.renderMultiDrawInstances(qt._multiDrawStarts,qt._multiDrawCounts,qt._multiDrawCount,qt._multiDrawInstances);else if(qn.get("WEBGL_multi_draw"))js.renderMultiDraw(qt._multiDrawStarts,qt._multiDrawCounts,qt._multiDrawCount);else{const or=qt._multiDrawStarts,pc=qt._multiDrawCounts,Xs=qt._multiDrawCount,Hl=sr?Tn.get(sr).bytesPerElement:1,ru=Wi.get(dn).currentProgram.getUniforms();for(let al=0;al<Xs;al++)ru.setValue(xt,"_gl_DrawID",al),js.render(or[al]/Hl,pc[al])}else if(qt.isInstancedMesh)js.renderInstances($s,So,qt.count);else if(on.isInstancedBufferGeometry){const pc=Math.min(on.instanceCount,void 0!==on._maxInstanceCount?on._maxInstanceCount:1/0);js.renderInstances($s,So,pc)}else js.render($s,So)},this.compile=function(rt,jt,on=null){null===on&&(on=rt),J=Os.get(on),J.init(jt),Le.push(J),on.traverseVisible(function(qt){qt.isLight&&qt.layers.test(jt.layers)&&(J.pushLight(qt),qt.castShadow&&J.pushShadow(qt))}),rt!==on&&rt.traverseVisible(function(qt){qt.isLight&&qt.layers.test(jt.layers)&&(J.pushLight(qt),qt.castShadow&&J.pushShadow(qt))}),J.setupLights();const dn=new Set;return rt.traverse(function(qt){if(!(qt.isMesh||qt.isPoints||qt.isLine||qt.isSprite))return;const hi=qt.material;if(hi)if(Array.isArray(hi))for(let Ni=0;Ni<hi.length;Ni++){const pr=hi[Ni];_o(pr,on,qt),dn.add(pr)}else _o(hi,on,qt),dn.add(hi)}),Le.pop(),J=null,dn},this.compileAsync=function(rt,jt,on=null){const dn=this.compile(rt,jt,on);return new Promise(qt=>{function hi(){dn.forEach(function(Ni){Wi.get(Ni).currentProgram.isReady()&&dn.delete(Ni)}),0!==dn.size?setTimeout(hi,10):qt(rt)}null!==qn.get("KHR_parallel_shader_compile")?hi():setTimeout(hi,10)})};let zc=null;function wy(){sh.stop()}function Ty(){sh.start()}const sh=new _p;function qg(rt,jt,on,dn){if(!1===rt.visible)return;if(rt.layers.test(jt.layers))if(rt.isGroup)on=rt.renderOrder;else if(rt.isLOD)!0===rt.autoUpdate&&rt.update(jt);else if(rt.isLight)J.pushLight(rt),rt.castShadow&&J.pushShadow(rt);else if(rt.isSprite){if(!rt.frustumCulled||An.intersectsSprite(rt)){dn&&jr.setFromMatrixPosition(rt.matrixWorld).applyMatrix4(Cr);const Ni=Cn.update(rt),pr=rt.material;pr.visible&&le.push(rt,Ni,pr,on,jr.z,null)}}else if((rt.isMesh||rt.isLine||rt.isPoints)&&(!rt.frustumCulled||An.intersectsObject(rt))){const Ni=Cn.update(rt),pr=rt.material;if(dn&&(void 0!==rt.boundingSphere?(null===rt.boundingSphere&&rt.computeBoundingSphere(),jr.copy(rt.boundingSphere.center)):(null===Ni.boundingSphere&&Ni.computeBoundingSphere(),jr.copy(Ni.boundingSphere.center)),jr.applyMatrix4(rt.matrixWorld).applyMatrix4(Cr)),Array.isArray(pr)){const sr=Ni.groups;for(let Xr=0,gs=sr.length;Xr<gs;Xr++){const nr=sr[Xr],$s=pr[nr.materialIndex];$s&&$s.visible&&le.push(rt,Ni,$s,on,jr.z,nr)}}else pr.visible&&le.push(rt,Ni,pr,on,jr.z,null)}const hi=rt.children;for(let Ni=0,pr=hi.length;Ni<pr;Ni++)qg(hi[Ni],jt,on,dn)}function Dy(rt,jt,on,dn){const qt=rt.opaque,hi=rt.transmissive,Ni=rt.transparent;J.setupLightsView(on),!0===mi&&ei.setGlobalState(Pe.clippingPlanes,on),dn&&bi.viewport(Nt.copy(dn)),qt.length>0&&Z0(qt,jt,on),hi.length>0&&Z0(hi,jt,on),Ni.length>0&&Z0(Ni,jt,on),bi.buffers.depth.setTest(!0),bi.buffers.depth.setMask(!0),bi.buffers.color.setMask(!0),bi.setPolygonOffset(!1)}function Ay(rt,jt,on,dn){if(null!==(!0===on.isScene?on.overrideMaterial:null))return;void 0===J.state.transmissionRenderTarget[dn.id]&&(J.state.transmissionRenderTarget[dn.id]=new dr(1,1,{generateMipmaps:!0,type:qn.has("EXT_color_buffer_half_float")||qn.has("EXT_color_buffer_float")?vs:Fs,minFilter:Sr,samples:4,stencilBuffer:u,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:F.workingColorSpace}));const hi=J.state.transmissionRenderTarget[dn.id],Ni=dn.viewport||Nt;hi.setSize(Ni.z,Ni.w);const pr=Pe.getRenderTarget();Pe.setRenderTarget(hi),Pe.getClearColor(yn),Ln=Pe.getClearAlpha(),Ln<1&&Pe.setClearColor(16777215,.5),Pe.clear(),Rn&&Ur.render(on);const sr=Pe.toneMapping;Pe.toneMapping=cr;const Xr=dn.viewport;if(void 0!==dn.viewport&&(dn.viewport=void 0),J.setupLightsView(dn),!0===mi&&ei.setGlobalState(Pe.clippingPlanes,dn),Z0(rt,on,dn),gt.updateMultisampleRenderTarget(hi),gt.updateRenderTargetMipmap(hi),!1===qn.has("WEBGL_multisampled_render_to_texture")){let gs=!1;for(let nr=0,$s=jt.length;nr<$s;nr++){const Eo=jt[nr],So=Eo.object,Za=Eo.geometry,js=Eo.material,or=Eo.group;if(2===js.side&&So.layers.test(dn.layers)){const pc=js.side;js.side=1,js.needsUpdate=!0,Iy(So,on,dn,Za,js,or),js.side=pc,js.needsUpdate=!0,gs=!0}}!0===gs&&(gt.updateMultisampleRenderTarget(hi),gt.updateRenderTargetMipmap(hi))}Pe.setRenderTarget(pr),Pe.setClearColor(yn,Ln),void 0!==Xr&&(dn.viewport=Xr),Pe.toneMapping=sr}function Z0(rt,jt,on){const dn=!0===jt.isScene?jt.overrideMaterial:null;for(let qt=0,hi=rt.length;qt<hi;qt++){const Ni=rt[qt],pr=Ni.object,sr=Ni.geometry,Xr=null===dn?Ni.material:dn,gs=Ni.group;pr.layers.test(on.layers)&&Iy(pr,jt,on,sr,Xr,gs)}}function Iy(rt,jt,on,dn,qt,hi){rt.onBeforeRender(Pe,jt,on,dn,qt,hi),rt.modelViewMatrix.multiplyMatrices(on.matrixWorldInverse,rt.matrixWorld),rt.normalMatrix.getNormalMatrix(rt.modelViewMatrix),qt.onBeforeRender(Pe,jt,on,dn,rt,hi),!0===qt.transparent&&2===qt.side&&!1===qt.forceSinglePass?(qt.side=1,qt.needsUpdate=!0,Pe.renderBufferDirect(on,jt,dn,qt,rt,hi),qt.side=0,qt.needsUpdate=!0,Pe.renderBufferDirect(on,jt,dn,qt,rt,hi),qt.side=2):Pe.renderBufferDirect(on,jt,dn,qt,rt,hi),rt.onAfterRender(Pe,jt,on,dn,qt,hi)}function J0(rt,jt,on){!0!==jt.isScene&&(jt=zs);const dn=Wi.get(rt),qt=J.state.lights,Ni=qt.state.version,pr=lr.getParameters(rt,qt.state,J.state.shadowsArray,jt,on),sr=lr.getProgramCacheKey(pr);let Xr=dn.programs;dn.environment=rt.isMeshStandardMaterial?jt.environment:null,dn.fog=jt.fog,dn.envMap=(rt.isMeshStandardMaterial?nn:Ke).get(rt.envMap||dn.environment),dn.envMapRotation=null!==dn.environment&&null===rt.envMap?jt.environmentRotation:rt.envMapRotation,void 0===Xr&&(rt.addEventListener("dispose",Ds),Xr=new Map,dn.programs=Xr);let gs=Xr.get(sr);if(void 0!==gs){if(dn.currentProgram===gs&&dn.lightsStateVersion===Ni)return Ny(rt,pr),gs}else pr.uniforms=lr.getUniforms(rt),rt.onBeforeCompile(pr,Pe),gs=lr.acquireProgram(pr,sr),Xr.set(sr,gs),dn.uniforms=pr.uniforms;const nr=dn.uniforms;return(!rt.isShaderMaterial&&!rt.isRawShaderMaterial||!0===rt.clipping)&&(nr.clippingPlanes=ei.uniform),Ny(rt,pr),dn.needsLights=function ix(rt){return rt.isMeshLambertMaterial||rt.isMeshToonMaterial||rt.isMeshPhongMaterial||rt.isMeshStandardMaterial||rt.isShadowMaterial||rt.isShaderMaterial&&!0===rt.lights}(rt),dn.lightsStateVersion=Ni,dn.needsLights&&(nr.ambientLightColor.value=qt.state.ambient,nr.lightProbe.value=qt.state.probe,nr.directionalLights.value=qt.state.directional,nr.directionalLightShadows.value=qt.state.directionalShadow,nr.spotLights.value=qt.state.spot,nr.spotLightShadows.value=qt.state.spotShadow,nr.rectAreaLights.value=qt.state.rectArea,nr.ltc_1.value=qt.state.rectAreaLTC1,nr.ltc_2.value=qt.state.rectAreaLTC2,nr.pointLights.value=qt.state.point,nr.pointLightShadows.value=qt.state.pointShadow,nr.hemisphereLights.value=qt.state.hemi,nr.directionalShadowMap.value=qt.state.directionalShadowMap,nr.directionalShadowMatrix.value=qt.state.directionalShadowMatrix,nr.spotShadowMap.value=qt.state.spotShadowMap,nr.spotLightMatrix.value=qt.state.spotLightMatrix,nr.spotLightMap.value=qt.state.spotLightMap,nr.pointShadowMap.value=qt.state.pointShadowMap,nr.pointShadowMatrix.value=qt.state.pointShadowMatrix),dn.currentProgram=gs,dn.uniformsList=null,gs}function Ry(rt){if(null===rt.uniformsList){const jt=rt.currentProgram.getUniforms();rt.uniformsList=Zp.seqWithValue(jt.seq,rt.uniforms)}return rt.uniformsList}function Ny(rt,jt){const on=Wi.get(rt);on.outputColorSpace=jt.outputColorSpace,on.batching=jt.batching,on.batchingColor=jt.batchingColor,on.instancing=jt.instancing,on.instancingColor=jt.instancingColor,on.instancingMorph=jt.instancingMorph,on.skinning=jt.skinning,on.morphTargets=jt.morphTargets,on.morphNormals=jt.morphNormals,on.morphColors=jt.morphColors,on.morphTargetsCount=jt.morphTargetsCount,on.numClippingPlanes=jt.numClippingPlanes,on.numIntersection=jt.numClipIntersection,on.vertexAlphas=jt.vertexAlphas,on.vertexTangents=jt.vertexTangents,on.toneMapping=jt.toneMapping}sh.setAnimationLoop(function _u(rt){zc&&zc(rt)}),typeof self<"u"&&sh.setContext(self),this.setAnimationLoop=function(rt){zc=rt,En.setAnimationLoop(rt),null===rt?sh.stop():sh.start()},En.addEventListener("sessionstart",wy),En.addEventListener("sessionend",Ty),this.render=function(rt,jt){if(void 0!==jt&&!0!==jt.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===Ct)return;if(!0===rt.matrixWorldAutoUpdate&&rt.updateMatrixWorld(),null===jt.parent&&!0===jt.matrixWorldAutoUpdate&&jt.updateMatrixWorld(),!0===En.enabled&&!0===En.isPresenting&&(!0===En.cameraAutoUpdate&&En.updateCamera(jt),jt=En.getCamera()),!0===rt.isScene&&rt.onBeforeRender(Pe,rt,jt,Et),J=Os.get(rt,Le.length),J.init(jt),Le.push(J),Cr.multiplyMatrices(jt.projectionMatrix,jt.matrixWorldInverse),An.setFromProjectionMatrix(Cr),er=this.localClippingEnabled,mi=ei.init(this.clippingPlanes,er),le=Fi.get(rt,He.length),le.init(),He.push(le),!0===En.enabled&&!0===En.isPresenting){const hi=Pe.xr.getDepthSensingMesh();null!==hi&&qg(hi,jt,-1/0,Pe.sortObjects)}qg(rt,jt,0,Pe.sortObjects),le.finish(),!0===Pe.sortObjects&&le.sort(Qn,Ii),Rn=!1===En.enabled||!1===En.isPresenting||!1===En.hasDepthSensing(),Rn&&Ur.addToRenderList(le,rt),this.info.render.frame++,!0===mi&&ei.beginShadows(),Ki.render(J.state.shadowsArray,rt,jt),!0===mi&&ei.endShadows(),!0===this.info.autoReset&&this.info.reset();const dn=le.opaque,qt=le.transmissive;if(J.setupLights(),jt.isArrayCamera){const hi=jt.cameras;if(qt.length>0)for(let Ni=0,pr=hi.length;Ni<pr;Ni++)Ay(dn,qt,rt,hi[Ni]);Rn&&Ur.render(rt);for(let Ni=0,pr=hi.length;Ni<pr;Ni++){const sr=hi[Ni];Dy(le,rt,sr,sr.viewport)}}else qt.length>0&&Ay(dn,qt,rt,jt),Rn&&Ur.render(rt),Dy(le,rt,jt);null!==Et&&(gt.updateMultisampleRenderTarget(Et),gt.updateRenderTargetMipmap(Et)),!0===rt.isScene&&rt.onAfterRender(Pe,rt,jt),Uo.resetDefaultState(),tt=-1,je=null,Le.pop(),Le.length>0?(J=Le[Le.length-1],!0===mi&&ei.setGlobalState(Pe.clippingPlanes,J.state.camera)):J=null,He.pop(),le=He.length>0?He[He.length-1]:null},this.getActiveCubeFace=function(){return ft},this.getActiveMipmapLevel=function(){return bt},this.getRenderTarget=function(){return Et},this.setRenderTargetTextures=function(rt,jt,on){Wi.get(rt.texture).__webglTexture=jt,Wi.get(rt.depthTexture).__webglTexture=on;const dn=Wi.get(rt);dn.__hasExternalTextures=!0,dn.__autoAllocateDepthBuffer=void 0===on,dn.__autoAllocateDepthBuffer||!0===qn.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),dn.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(rt,jt){const on=Wi.get(rt);on.__webglFramebuffer=jt,on.__useDefaultFramebuffer=void 0===jt},this.setRenderTarget=function(rt,jt=0,on=0){Et=rt,ft=jt,bt=on;let dn=!0,qt=null,hi=!1,Ni=!1;if(rt){const sr=Wi.get(rt);if(void 0!==sr.__useDefaultFramebuffer)bi.bindFramebuffer(xt.FRAMEBUFFER,null),dn=!1;else if(void 0===sr.__webglFramebuffer)gt.setupRenderTarget(rt);else if(sr.__hasExternalTextures)gt.rebindTextures(rt,Wi.get(rt.texture).__webglTexture,Wi.get(rt.depthTexture).__webglTexture);else if(rt.depthBuffer){const nr=rt.depthTexture;if(sr.__boundDepthTexture!==nr){if(null!==nr&&Wi.has(nr)&&(rt.width!==nr.image.width||rt.height!==nr.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");gt.setupDepthRenderbuffer(rt)}}const Xr=rt.texture;(Xr.isData3DTexture||Xr.isDataArrayTexture||Xr.isCompressedArrayTexture)&&(Ni=!0);const gs=Wi.get(rt).__webglFramebuffer;rt.isWebGLCubeRenderTarget?(qt=Array.isArray(gs[jt])?gs[jt][on]:gs[jt],hi=!0):qt=rt.samples>0&&!1===gt.useMultisampledRTT(rt)?Wi.get(rt).__webglMultisampledFramebuffer:Array.isArray(gs)?gs[on]:gs,Nt.copy(rt.viewport),mn.copy(rt.scissor),ln=rt.scissorTest}else Nt.copy(Vi).multiplyScalar(xn).floor(),mn.copy(os).multiplyScalar(xn).floor(),ln=Zs;if(bi.bindFramebuffer(xt.FRAMEBUFFER,qt)&&dn&&bi.drawBuffers(rt,qt),bi.viewport(Nt),bi.scissor(mn),bi.setScissorTest(ln),hi){const sr=Wi.get(rt.texture);xt.framebufferTexture2D(xt.FRAMEBUFFER,xt.COLOR_ATTACHMENT0,xt.TEXTURE_CUBE_MAP_POSITIVE_X+jt,sr.__webglTexture,on)}else if(Ni){const sr=Wi.get(rt.texture);xt.framebufferTextureLayer(xt.FRAMEBUFFER,xt.COLOR_ATTACHMENT0,sr.__webglTexture,on||0,jt||0)}tt=-1},this.readRenderTargetPixels=function(rt,jt,on,dn,qt,hi,Ni){if(!rt||!rt.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let pr=Wi.get(rt).__webglFramebuffer;if(rt.isWebGLCubeRenderTarget&&void 0!==Ni&&(pr=pr[Ni]),pr){bi.bindFramebuffer(xt.FRAMEBUFFER,pr);try{const sr=rt.texture,Xr=sr.format,gs=sr.type;if(!Hi.textureFormatReadable(Xr))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Hi.textureTypeReadable(gs))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");jt>=0&&jt<=rt.width-dn&&on>=0&&on<=rt.height-qt&&xt.readPixels(jt,on,dn,qt,as.convert(Xr),as.convert(gs),hi)}finally{const sr=null!==Et?Wi.get(Et).__webglFramebuffer:null;bi.bindFramebuffer(xt.FRAMEBUFFER,sr)}}},this.readRenderTargetPixelsAsync=function(){var rt=(0,W.A)(function*(jt,on,dn,qt,hi,Ni,pr){if(!jt||!jt.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let sr=Wi.get(jt).__webglFramebuffer;if(jt.isWebGLCubeRenderTarget&&void 0!==pr&&(sr=sr[pr]),sr){const Xr=jt.texture,gs=Xr.format,nr=Xr.type;if(!Hi.textureFormatReadable(gs))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Hi.textureTypeReadable(nr))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(on>=0&&on<=jt.width-qt&&dn>=0&&dn<=jt.height-hi){bi.bindFramebuffer(xt.FRAMEBUFFER,sr);const $s=xt.createBuffer();xt.bindBuffer(xt.PIXEL_PACK_BUFFER,$s),xt.bufferData(xt.PIXEL_PACK_BUFFER,Ni.byteLength,xt.STREAM_READ),xt.readPixels(on,dn,qt,hi,as.convert(gs),as.convert(nr),0);const Eo=null!==Et?Wi.get(Et).__webglFramebuffer:null;bi.bindFramebuffer(xt.FRAMEBUFFER,Eo);const So=xt.fenceSync(xt.SYNC_GPU_COMMANDS_COMPLETE,0);return xt.flush(),yield function mc(c,e,n){return new Promise(function(s,a){setTimeout(function u(){switch(c.clientWaitSync(e,c.SYNC_FLUSH_COMMANDS_BIT,0)){case c.WAIT_FAILED:a();break;case c.TIMEOUT_EXPIRED:setTimeout(u,n);break;default:s()}},n)})}(xt,So,4),xt.bindBuffer(xt.PIXEL_PACK_BUFFER,$s),xt.getBufferSubData(xt.PIXEL_PACK_BUFFER,0,Ni),xt.deleteBuffer($s),xt.deleteSync(So),Ni}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function(jt,on,dn,qt,hi,Ni,pr){return rt.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(rt,jt=null,on=0){!0!==rt.isTexture&&(Aa("WebGLRenderer: copyFramebufferToTexture function signature has changed."),jt=arguments[0]||null,rt=arguments[1]);const dn=Math.pow(2,-on),qt=Math.floor(rt.image.width*dn),hi=Math.floor(rt.image.height*dn),Ni=null!==jt?jt.x:0,pr=null!==jt?jt.y:0;gt.setTexture2D(rt,0),xt.copyTexSubImage2D(xt.TEXTURE_2D,on,0,0,Ni,pr,qt,hi),bi.unbindTexture()},this.copyTextureToTexture=function(rt,jt,on=null,dn=null,qt=0){let hi,Ni,pr,sr,Xr,gs,nr,$s,Eo;!0!==rt.isTexture&&(Aa("WebGLRenderer: copyTextureToTexture function signature has changed."),dn=arguments[0]||null,rt=arguments[1],jt=arguments[2],qt=arguments[3]||0,on=null);const So=rt.isCompressedTexture?rt.mipmaps[qt]:rt.image;null!==on?(hi=on.max.x-on.min.x,Ni=on.max.y-on.min.y,pr=on.isBox3?on.max.z-on.min.z:1,sr=on.min.x,Xr=on.min.y,gs=on.isBox3?on.min.z:0):(hi=So.width,Ni=So.height,pr=So.depth||1,sr=0,Xr=0,gs=0),null!==dn?(nr=dn.x,$s=dn.y,Eo=dn.z):(nr=0,$s=0,Eo=0);const Za=as.convert(jt.format),js=as.convert(jt.type);let or;jt.isData3DTexture?(gt.setTexture3D(jt,0),or=xt.TEXTURE_3D):jt.isDataArrayTexture||jt.isCompressedArrayTexture?(gt.setTexture2DArray(jt,0),or=xt.TEXTURE_2D_ARRAY):(gt.setTexture2D(jt,0),or=xt.TEXTURE_2D),xt.pixelStorei(xt.UNPACK_FLIP_Y_WEBGL,jt.flipY),xt.pixelStorei(xt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,jt.premultiplyAlpha),xt.pixelStorei(xt.UNPACK_ALIGNMENT,jt.unpackAlignment);const pc=xt.getParameter(xt.UNPACK_ROW_LENGTH),Xs=xt.getParameter(xt.UNPACK_IMAGE_HEIGHT),Hl=xt.getParameter(xt.UNPACK_SKIP_PIXELS),ru=xt.getParameter(xt.UNPACK_SKIP_ROWS),al=xt.getParameter(xt.UNPACK_SKIP_IMAGES);xt.pixelStorei(xt.UNPACK_ROW_LENGTH,So.width),xt.pixelStorei(xt.UNPACK_IMAGE_HEIGHT,So.height),xt.pixelStorei(xt.UNPACK_SKIP_PIXELS,sr),xt.pixelStorei(xt.UNPACK_SKIP_ROWS,Xr),xt.pixelStorei(xt.UNPACK_SKIP_IMAGES,gs);const yu=rt.isDataArrayTexture||rt.isData3DTexture,Xo=jt.isDataArrayTexture||jt.isData3DTexture;if(rt.isRenderTargetTexture||rt.isDepthTexture){const su=Wi.get(rt),tf=Wi.get(jt),Cc=Wi.get(su.__renderTarget),Uu=Wi.get(tf.__renderTarget);bi.bindFramebuffer(xt.READ_FRAMEBUFFER,Cc.__webglFramebuffer),bi.bindFramebuffer(xt.DRAW_FRAMEBUFFER,Uu.__webglFramebuffer);for(let Vu=0;Vu<pr;Vu++)yu&&xt.framebufferTextureLayer(xt.READ_FRAMEBUFFER,xt.COLOR_ATTACHMENT0,Wi.get(rt).__webglTexture,qt,gs+Vu),rt.isDepthTexture?(Xo&&xt.framebufferTextureLayer(xt.DRAW_FRAMEBUFFER,xt.COLOR_ATTACHMENT0,Wi.get(jt).__webglTexture,qt,Eo+Vu),xt.blitFramebuffer(sr,Xr,hi,Ni,nr,$s,hi,Ni,xt.DEPTH_BUFFER_BIT,xt.NEAREST)):Xo?xt.copyTexSubImage3D(or,qt,nr,$s,Eo+Vu,sr,Xr,hi,Ni):xt.copyTexSubImage2D(or,qt,nr,$s,Eo+Vu,sr,Xr,hi,Ni);bi.bindFramebuffer(xt.READ_FRAMEBUFFER,null),bi.bindFramebuffer(xt.DRAW_FRAMEBUFFER,null)}else Xo?rt.isDataTexture||rt.isData3DTexture?xt.texSubImage3D(or,qt,nr,$s,Eo,hi,Ni,pr,Za,js,So.data):jt.isCompressedArrayTexture?xt.compressedTexSubImage3D(or,qt,nr,$s,Eo,hi,Ni,pr,Za,So.data):xt.texSubImage3D(or,qt,nr,$s,Eo,hi,Ni,pr,Za,js,So):rt.isDataTexture?xt.texSubImage2D(xt.TEXTURE_2D,qt,nr,$s,hi,Ni,Za,js,So.data):rt.isCompressedTexture?xt.compressedTexSubImage2D(xt.TEXTURE_2D,qt,nr,$s,So.width,So.height,Za,So.data):xt.texSubImage2D(xt.TEXTURE_2D,qt,nr,$s,hi,Ni,Za,js,So);xt.pixelStorei(xt.UNPACK_ROW_LENGTH,pc),xt.pixelStorei(xt.UNPACK_IMAGE_HEIGHT,Xs),xt.pixelStorei(xt.UNPACK_SKIP_PIXELS,Hl),xt.pixelStorei(xt.UNPACK_SKIP_ROWS,ru),xt.pixelStorei(xt.UNPACK_SKIP_IMAGES,al),0===qt&&jt.generateMipmaps&&xt.generateMipmap(or),bi.unbindTexture()},this.copyTextureToTexture3D=function(rt,jt,on=null,dn=null,qt=0){return!0!==rt.isTexture&&(Aa("WebGLRenderer: copyTextureToTexture3D function signature has changed."),on=arguments[0]||null,dn=arguments[1]||null,rt=arguments[2],jt=arguments[3],qt=arguments[4]||0),Aa('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(rt,jt,on,dn,qt)},this.initRenderTarget=function(rt){void 0===Wi.get(rt).__webglFramebuffer&&gt.setupRenderTarget(rt)},this.initTexture=function(rt){rt.isCubeTexture?gt.setTextureCube(rt,0):rt.isData3DTexture?gt.setTexture3D(rt,0):rt.isDataArrayTexture||rt.isCompressedArrayTexture?gt.setTexture2DArray(rt,0):gt.setTexture2D(rt,0),bi.unbindTexture()},this.resetState=function(){ft=0,bt=0,Et=null,bi.reset(),Uo.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return fl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorspace=F._getDrawingBufferColorSpace(e),n.unpackColorSpace=F._getUnpackColorSpace()}}class $1 extends ht{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new oa,this.environmentIntensity=1,this.environmentRotation=new oa,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return null!==this.fog&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class r0{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=void 0!==e?e.length/n:0,this.usage=35044,this.updateRanges=[],this.version=0,this.uuid=Go()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,s){e*=this.stride,s*=n.stride;for(let a=0,u=this.stride;a<u;a++)this.array[e+a]=n.array[s+a];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Go()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(n,this.stride);return s.setUsage(this.usage),s}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Go()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ul=new lt;class Bf{constructor(e,n,s,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=s,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,s=this.data.count;n<s;n++)Ul.fromBufferAttribute(this,n),Ul.applyMatrix4(e),this.setXYZ(n,Ul.x,Ul.y,Ul.z);return this}applyNormalMatrix(e){for(let n=0,s=this.count;n<s;n++)Ul.fromBufferAttribute(this,n),Ul.applyNormalMatrix(e),this.setXYZ(n,Ul.x,Ul.y,Ul.z);return this}transformDirection(e){for(let n=0,s=this.count;n<s;n++)Ul.fromBufferAttribute(this,n),Ul.transformDirection(e),this.setXYZ(n,Ul.x,Ul.y,Ul.z);return this}getComponent(e,n){let s=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(s=Ws(s,this.array)),s}setComponent(e,n,s){return this.normalized&&(s=yr(s,this.array)),this.data.array[e*this.data.stride+this.offset+n]=s,this}setX(e,n){return this.normalized&&(n=yr(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=yr(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=yr(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=yr(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Ws(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Ws(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Ws(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Ws(n,this.array)),n}setXY(e,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=yr(n,this.array),s=yr(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=s,this}setXYZ(e,n,s,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=yr(n,this.array),s=yr(s,this.array),a=yr(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=s,this.data.array[e+2]=a,this}setXYZW(e,n,s,a,u){return e=e*this.data.stride+this.offset,this.normalized&&(n=yr(n,this.array),s=yr(s,this.array),a=yr(a,this.array),u=yr(u,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=s,this.data.array[e+2]=a,this.data.array[e+3]=u,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let s=0;s<this.count;s++){const a=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)n.push(this.data.array[a+u])}return new ms(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Bf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let s=0;s<this.count;s++){const a=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)n.push(this.data.array[a+u])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Oh extends il{static get type(){return"SpriteMaterial"}constructor(e){super(),this.isSpriteMaterial=!0,this.color=new Oi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let ad;const Ud=new lt,Fh=new lt,eu=new lt,ld=new Mn,Lh=new Mn,s0=new xr,Vd=new lt,Uf=new lt,o0=new lt,eg=new Mn,tg=new Mn,g_=new Mn;class v_ extends ht{constructor(e=new Oh){if(super(),this.isSprite=!0,this.type="Sprite",void 0===ad){ad=new Ms;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),s=new r0(n,5);ad.setIndex([0,1,2,0,2,3]),ad.setAttribute("position",new Bf(s,3,0,!1)),ad.setAttribute("uv",new Bf(s,2,3,!1))}this.geometry=ad,this.material=e,this.center=new Mn(.5,.5)}raycast(e,n){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fh.setFromMatrixScale(this.matrixWorld),s0.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),eu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Fh.multiplyScalar(-eu.z);const s=this.material.rotation;let a,u;0!==s&&(u=Math.cos(s),a=Math.sin(s));const p=this.center;Vf(Vd.set(-.5,-.5,0),eu,p,Fh,a,u),Vf(Uf.set(.5,-.5,0),eu,p,Fh,a,u),Vf(o0.set(.5,.5,0),eu,p,Fh,a,u),eg.set(0,0),tg.set(1,0),g_.set(1,1);let v=e.ray.intersectTriangle(Vd,Uf,o0,!1,Ud);if(null===v&&(Vf(Uf.set(-.5,.5,0),eu,p,Fh,a,u),tg.set(0,1),v=e.ray.intersectTriangle(Vd,o0,Uf,!1,Ud),null===v))return;const b=e.ray.origin.distanceTo(Ud);b<e.near||b>e.far||n.push({distance:b,point:Ud.clone(),uv:Fl.getInterpolation(Ud,Vd,Uf,o0,eg,tg,g_,new Mn),face:null,object:this})}copy(e,n){return super.copy(e,n),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Vf(c,e,n,s,a,u){ld.subVectors(c,n).addScalar(.5).multiply(s),void 0!==a?(Lh.x=u*ld.x-a*ld.y,Lh.y=a*ld.x+u*ld.y):Lh.copy(ld),c.copy(e),c.x+=Lh.x,c.y+=Lh.y,c.applyMatrix4(s0)}class Y1 extends Ht{constructor(e,n,s,a,u,p,v,b,E){super(e,n,s,a,u,p,v,b,E),this.isCanvasTexture=!0,this.needsUpdate=!0}}function gd(c,e,n){return!c||!n&&c.constructor===e?c:"number"==typeof e.BYTES_PER_ELEMENT?new e(c):Array.prototype.slice.call(c)}class np{constructor(e,n,s,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new n.constructor(s),this.sampleValues=n,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let s=this._cachedIndex,a=n[s],u=n[s-1];e:{t:{let p;n:{i:if(!(e<a)){for(let v=s+2;;){if(void 0===a){if(e<u)break i;return s=n.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===v)break;if(u=a,a=n[++s],e<a)break t}p=n.length;break n}if(e>=u)break e;{const v=n[1];e<v&&(s=2,u=v);for(let b=s-2;;){if(void 0===u)return this._cachedIndex=0,this.copySampleValue_(0);if(s===b)break;if(a=u,u=n[--s-1],e>=u)break t}p=s,s=0}}for(;s<p;){const v=s+p>>>1;e<n[v]?p=v:s=v+1}if(a=n[s],u=n[s-1],void 0===u)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===a)return s=n.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,u,a)}return this.interpolate_(s,u,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=e*a;for(let p=0;p!==a;++p)n[p]=s[u+p];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class gE extends np{constructor(e,n,s,a){super(e,n,s,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,n,s){const a=this.parameterPositions;let u=e-2,p=e+1,v=a[u],b=a[p];if(void 0===v)switch(this.getSettings_().endingStart){case 2401:u=e,v=2*n-s;break;case 2402:u=a.length-2,v=n+a[u]-a[u+1];break;default:u=e,v=s}if(void 0===b)switch(this.getSettings_().endingEnd){case 2401:p=e,b=2*s-n;break;case 2402:p=1,b=s+a[1]-a[0];break;default:p=e-1,b=n}const E=.5*(s-n),O=this.valueSize;this._weightPrev=E/(n-v),this._weightNext=E/(b-s),this._offsetPrev=u*O,this._offsetNext=p*O}interpolate_(e,n,s,a){const u=this.resultBuffer,p=this.sampleValues,v=this.valueSize,b=e*v,E=b-v,O=this._offsetPrev,U=this._offsetNext,V=this._weightPrev,Q=this._weightNext,se=(s-n)/(a-n),ye=se*se,le=ye*se,J=-V*le+2*V*ye-V*se,He=(1+V)*le+(-1.5-2*V)*ye+(-.5+V)*se+1,Le=(-1-Q)*le+(1.5+Q)*ye+.5*se,Pe=Q*le-Q*ye;for(let Ct=0;Ct!==v;++Ct)u[Ct]=J*p[O+Ct]+He*p[E+Ct]+Le*p[b+Ct]+Pe*p[U+Ct];return u}}class Q_ extends np{constructor(e,n,s,a){super(e,n,s,a)}interpolate_(e,n,s,a){const u=this.resultBuffer,p=this.sampleValues,v=this.valueSize,b=e*v,E=b-v,O=(s-n)/(a-n),U=1-O;for(let V=0;V!==v;++V)u[V]=p[E+V]*U+p[b+V]*O;return u}}class ip extends np{constructor(e,n,s,a){super(e,n,s,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class iu{constructor(e,n,s,a){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gd(n,this.TimeBufferType),this.values=gd(s,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let s;if(n.toJSON!==this.toJSON)s=n.toJSON(e);else{s={name:e.name,times:gd(e.times,Array),values:gd(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(s.interpolation=a)}return s.type=e.ValueTypeName,s}InterpolantFactoryMethodDiscrete(e){return new ip(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Q_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new gE(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case 2300:n=this.InterpolantFactoryMethodDiscrete;break;case 2301:n=this.InterpolantFactoryMethodLinear;break;case 2302:n=this.InterpolantFactoryMethodSmooth}if(void 0===n){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(s);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const n=this.times;for(let s=0,a=n.length;s!==a;++s)n[s]+=e}return this}scale(e){if(1!==e){const n=this.times;for(let s=0,a=n.length;s!==a;++s)n[s]*=e}return this}trim(e,n){const s=this.times,a=s.length;let u=0,p=a-1;for(;u!==a&&s[u]<e;)++u;for(;-1!==p&&s[p]>n;)--p;if(++p,0!==u||p!==a){u>=p&&(p=Math.max(p,1),u=p-1);const v=this.getValueSize();this.times=s.slice(u,p),this.values=this.values.slice(u*v,p*v)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const s=this.times,a=this.values,u=s.length;0===u&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let p=null;for(let v=0;v!==u;v++){const b=s[v];if("number"==typeof b&&isNaN(b)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,v,b),e=!1;break}if(null!==p&&p>b){console.error("THREE.KeyframeTrack: Out of order keys.",this,v,b,p),e=!1;break}p=b}if(void 0!==a&&function j_(c){return ArrayBuffer.isView(c)&&!(c instanceof DataView)}(a))for(let v=0,b=a.length;v!==b;++v){const E=a[v];if(isNaN(E)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,v,E),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),s=this.getValueSize(),a=2302===this.getInterpolation(),u=e.length-1;let p=1;for(let v=1;v<u;++v){let b=!1;const E=e[v];if(E!==e[v+1]&&(1!==v||E!==e[0]))if(a)b=!0;else{const U=v*s,V=U-s,Q=U+s;for(let se=0;se!==s;++se){const ye=n[U+se];if(ye!==n[V+se]||ye!==n[Q+se]){b=!0;break}}}if(b){if(v!==p){e[p]=e[v];const U=v*s,V=p*s;for(let Q=0;Q!==s;++Q)n[V+Q]=n[U+Q]}++p}}if(u>0){e[p]=e[u];for(let v=u*s,b=p*s,E=0;E!==s;++E)n[b+E]=n[v+E];++p}return p!==e.length?(this.times=e.slice(0,p),this.values=n.slice(0,p*s)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),a=new(0,this.constructor)(this.name,e,n);return a.createInterpolant=this.createInterpolant,a}}iu.prototype.TimeBufferType=Float32Array,iu.prototype.ValueBufferType=Float32Array,iu.prototype.DefaultInterpolation=2301;class Zh extends iu{constructor(e,n,s){super(e,n,s)}}Zh.prototype.ValueTypeName="bool",Zh.prototype.ValueBufferType=Array,Zh.prototype.DefaultInterpolation=2300,Zh.prototype.InterpolantFactoryMethodLinear=void 0,Zh.prototype.InterpolantFactoryMethodSmooth=void 0;(class Y_ extends iu{}).prototype.ValueTypeName="color";(class O0 extends iu{}).prototype.ValueTypeName="number";class Rg extends np{constructor(e,n,s,a){super(e,n,s,a)}interpolate_(e,n,s,a){const u=this.resultBuffer,p=this.sampleValues,v=this.valueSize,b=(s-n)/(a-n);let E=e*v;for(let O=E+v;E!==O;E+=4)vi.slerpFlat(u,0,p,E-v,p,E,b);return u}}class F0 extends iu{InterpolantFactoryMethodLinear(e){return new Rg(this.times,this.values,this.getValueSize(),e)}}F0.prototype.ValueTypeName="quaternion",F0.prototype.InterpolantFactoryMethodSmooth=void 0;class qd extends iu{constructor(e,n,s){super(e,n,s)}}qd.prototype.ValueTypeName="string",qd.prototype.ValueBufferType=Array,qd.prototype.DefaultInterpolation=2300,qd.prototype.InterpolantFactoryMethodLinear=void 0,qd.prototype.InterpolantFactoryMethodSmooth=void 0;(class fc extends iu{}).prototype.ValueTypeName="vector",Error;const lp="\\[\\]\\.:\\/",Hg=new RegExp("["+lp+"]","g"),zg="[^"+lp+"]",Ib="[^"+lp.replace("\\.","")+"]",Wg=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",zg)+/(WCOD+)?/.source.replace("WCOD",Ib)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",zg)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",zg)+"$"),dy=["material","materials","bones","map"];class hy{constructor(e,n,s){const a=s||jo.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,a)}getValue(e,n){this.bind();const a=this._bindings[this._targetGroup.nCachedObjects_];void 0!==a&&a.getValue(e,n)}setValue(e,n){const s=this._bindings;for(let a=this._targetGroup.nCachedObjects_,u=s.length;a!==u;++a)s[a].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=e.length;n!==s;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=e.length;n!==s;++n)e[n].unbind()}}let jo=(()=>{class c{constructor(n,s,a){this.path=s,this.parsedPath=a||c.parseTrackName(s),this.node=c.findNode(n,this.parsedPath.nodeName),this.rootNode=n,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(n,s,a){return n&&n.isAnimationObjectGroup?new c.Composite(n,s,a):new c(n,s,a)}static sanitizeNodeName(n){return n.replace(/\s/g,"_").replace(Hg,"")}static parseTrackName(n){const s=Wg.exec(n);if(null===s)throw new Error("PropertyBinding: Cannot parse trackName: "+n);const a={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},u=a.nodeName&&a.nodeName.lastIndexOf(".");if(void 0!==u&&-1!==u){const p=a.nodeName.substring(u+1);-1!==dy.indexOf(p)&&(a.nodeName=a.nodeName.substring(0,u),a.objectName=p)}if(null===a.propertyName||0===a.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return a}static findNode(n,s){if(void 0===s||""===s||"."===s||-1===s||s===n.name||s===n.uuid)return n;if(n.skeleton){const a=n.skeleton.getBoneByName(s);if(void 0!==a)return a}if(n.children){const a=function(p){for(let v=0;v<p.length;v++){const b=p[v];if(b.name===s||b.uuid===s)return b;const E=a(b.children);if(E)return E}return null},u=a(n.children);if(u)return u}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(n,s){n[s]=this.targetObject[this.propertyName]}_getValue_array(n,s){const a=this.resolvedProperty;for(let u=0,p=a.length;u!==p;++u)n[s++]=a[u]}_getValue_arrayElement(n,s){n[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(n,s){this.resolvedProperty.toArray(n,s)}_setValue_direct(n,s){this.targetObject[this.propertyName]=n[s]}_setValue_direct_setNeedsUpdate(n,s){this.targetObject[this.propertyName]=n[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(n,s){this.targetObject[this.propertyName]=n[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(n,s){const a=this.resolvedProperty;for(let u=0,p=a.length;u!==p;++u)a[u]=n[s++]}_setValue_array_setNeedsUpdate(n,s){const a=this.resolvedProperty;for(let u=0,p=a.length;u!==p;++u)a[u]=n[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(n,s){const a=this.resolvedProperty;for(let u=0,p=a.length;u!==p;++u)a[u]=n[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(n,s){this.resolvedProperty[this.propertyIndex]=n[s]}_setValue_arrayElement_setNeedsUpdate(n,s){this.resolvedProperty[this.propertyIndex]=n[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(n,s){this.resolvedProperty[this.propertyIndex]=n[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(n,s){this.resolvedProperty.fromArray(n,s)}_setValue_fromArray_setNeedsUpdate(n,s){this.resolvedProperty.fromArray(n,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(n,s){this.resolvedProperty.fromArray(n,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(n,s){this.bind(),this.getValue(n,s)}_setValue_unbound(n,s){this.bind(),this.setValue(n,s)}bind(){let n=this.node;const s=this.parsedPath,a=s.objectName,u=s.propertyName;let p=s.propertyIndex;if(n||(n=c.findNode(this.rootNode,s.nodeName),this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(a){let O=s.objectIndex;switch(a){case"materials":if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);n=n.material.materials;break;case"bones":if(!n.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);n=n.skeleton.bones;for(let U=0;U<n.length;U++)if(n[U].name===O){O=U;break}break;case"map":if("map"in n){n=n.map;break}if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);n=n.material.map;break;default:if(void 0===n[a])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);n=n[a]}if(void 0!==O){if(void 0===n[O])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);n=n[O]}}const v=n[u];if(void 0===v)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s.nodeName+"."+u+" but it wasn't found.",n);let b=this.Versioning.None;this.targetObject=n,void 0!==n.needsUpdate?b=this.Versioning.NeedsUpdate:void 0!==n.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate);let E=this.BindingType.Direct;if(void 0!==p){if("morphTargetInfluences"===u){if(!n.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!n.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==n.morphTargetDictionary[p]&&(p=n.morphTargetDictionary[p])}E=this.BindingType.ArrayElement,this.resolvedProperty=v,this.propertyIndex=p}else void 0!==v.fromArray&&void 0!==v.toArray?(E=this.BindingType.HasFromToArray,this.resolvedProperty=v):Array.isArray(v)?(E=this.BindingType.EntireArray,this.resolvedProperty=v):this.propertyName=u;this.getValue=this.GetterByBindingType[E],this.setValue=this.SetterByBindingTypeAndVersioning[E][b]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return c.Composite=hy,c})();jo.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},jo.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},jo.prototype.GetterByBindingType=[jo.prototype._getValue_direct,jo.prototype._getValue_array,jo.prototype._getValue_arrayElement,jo.prototype._getValue_toArray],jo.prototype.SetterByBindingTypeAndVersioning=[[jo.prototype._setValue_direct,jo.prototype._setValue_direct_setNeedsUpdate,jo.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[jo.prototype._setValue_array,jo.prototype._setValue_array_setNeedsUpdate,jo.prototype._setValue_array_setMatrixWorldNeedsUpdate],[jo.prototype._setValue_arrayElement,jo.prototype._setValue_arrayElement_setNeedsUpdate,jo.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[jo.prototype._setValue_fromArray,jo.prototype._setValue_fromArray_setNeedsUpdate,jo.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"170"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="170");let _y=(()=>{class c{constructor(n){this.el=n,this.mouse={x:0,y:0},this.speed=.045,this.charChangeSpeed=.005,this.textures=[],this.charIndices=[],this.handleResize=()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},this.handleMouseMove=s=>{this.mouse.x=.1*(s.clientX/window.innerWidth*2-1),this.mouse.y=.1*-(s.clientY/window.innerHeight*2-1)}}ngOnInit(){this.initThree(),this.createTextures(),this.createParticles(),this.animate(),this.setupEventListeners()}initThree(){this.scene=new $1,this.camera=new aa(75,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.z=5,this.renderer=new dE({alpha:!0,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.el.nativeElement.appendChild(this.renderer.domElement)}createTextures(){"\u30a2\u30a1\u30ab\u30b5\u30bf\u30ca\u30cf\u30de\u30e4\u30e3\u30e9\u30ef\u30ac\u30b6\u30c0\u30d0\u30d1\u30a4\u30a3\u30ad\u30b7\u30c1\u30cb\u30d2\u30df\u30ea\u30f0\u30ae\u30b8\u30c2\u30d3\u30d4\u30a6\u30a5\u30af\u30b9\u30c4\u30cc\u30d5\u30e0\u30e6\u30e5\u30eb\u30b0\u30ba\u30d6\u30c5\u30d7\u30a8\u30a7\u30b1\u30bb\u30c6\u30cd\u30d8\u30e1\u30ec\u30f1\u30b2\u30bc\u30c7\u30d9\u30da\u30aa\u30a9\u30b3\u30bd\u30c8\u30ce\u30db\u30e2\u30e8\u30e7\u30ed\u30f2\u30b4\u30be\u30c9\u30dc\u30dd\u30f4\u30c3\u30f30123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\u2605\u2606\u2600\u2601\u2602\u2603\u2660\u2663\u2665\u2666\u266b\u20ac\xa5\xa3$\xa2%&*+-/<=>@#\xa7\u221e\u0430\u0431\u0432\u0433\u0434\u0435\u0451\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e\u044f\u0391\u0392\u0393\u0394\u0395\u0396\u0397\u0398\u0399\u039a\u039b\u039c\u039d\u039e\u039f\u03a0\u03a1\u03a3\u03a4\u03a5\u03a6\u03a7\u03a8\u03a9\u05d0\u05d1\u05d2\u05d3\u05d4\u05d5\u05d6\u05d7\u05d8\u05d9\u05db\u05da\u05dc\u05de\u05dd\u05e0\u05df\u05e1\u05e2\u05e4\u05e3\u05e6\u05e5\u05e7\u05e8\u05e9\u05ea".split("").forEach(s=>{const a=document.createElement("canvas");a.width=16,a.height=16;const u=a.getContext("2d");u.fillStyle="#00ff00",u.font="14px monospace",u.fillText(s,4,12),this.textures.push(new Y1(a))})}createParticles(){this.particleGroup=new Iu;for(let s=0;s<5e3;s++){const a=Math.random()*Math.PI*2,u=10+20*Math.random(),p=Math.cos(a)*u,v=Math.sin(a)*u,b=200*-Math.random(),E=new v_(new Oh({map:this.textures[Math.floor(Math.random()*this.textures.length)],transparent:!0,opacity:.8,blending:2,color:65280}));E.position.set(p,v,b),E.scale.set(.5,.5,1),this.particleGroup.add(E),this.charIndices.push(Math.floor(Math.random()*this.textures.length))}this.scene.add(this.particleGroup)}animate(){this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.particleGroup.children.forEach((s,a)=>{if(s.position.z+=this.speed,s.position.z>5){s.position.z=-200;const u=Math.random()*Math.PI*2,p=10+20*Math.random();s.position.x=Math.cos(u)*p,s.position.y=Math.sin(u)*p}if(Math.random()<this.charChangeSpeed){const u=Math.floor(Math.random()*this.textures.length);this.charIndices[a]=u,s.material.map=this.textures[u]}});const n=Math.sqrt(this.mouse.x*this.mouse.x+this.mouse.y*this.mouse.y);this.particleGroup.children.forEach(s=>{s.material.opacity=.5+2*n}),this.camera.position.x=2*this.mouse.x,this.camera.position.y=2*this.mouse.y,this.renderer.render(this.scene,this.camera)}setupEventListeners(){window.addEventListener("resize",this.handleResize),document.addEventListener("mousemove",this.handleMouseMove)}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),window.removeEventListener("resize",this.handleResize),document.removeEventListener("mousemove",this.handleMouseMove),this.scene.traverse(s=>{s instanceof no&&(s.geometry.dispose(),s.material instanceof il&&s.material.dispose())}),this.renderer.dispose();const n=this.renderer.domElement;n.parentNode?.removeChild(n)}static{this.\u0275fac=function(s){return new(s||c)(h.rXU(h.aKT))}}static{this.\u0275dir=h.FsC({type:c,selectors:[["","appMatrixField",""]],standalone:!0})}}return c})();var dp=S(1774),yy=S(6101),Y0=S(4843),q0=S(7120),Kb=S(3841);function Qb(c,e){if(1&c){const n=h.RV6();h.j41(0,"app-birth-date-modal",5),h.bIt("birthdateUpdated",function(){h.eBV(n);const a=h.XpG();return h.Njj(a.handleBirthDateUpdate())}),h.k0s()}}function Yb(c,e){1&c&&h.nrm(0,"div",1)}function qb(c,e){1&c&&(h.j41(0,"div",4),h.nrm(1,"app-loader-dots"),h.k0s())}function Zb(c,e){if(1&c){const n=h.RV6();h.j41(0,"div",6)(1,"div",7),h.EFF(2),h.k0s(),h.j41(3,"button",8),h.bIt("click",function(){h.eBV(n);const a=h.XpG();return h.Njj(a.fetchData())}),h.nrm(4,"i",9),h.EFF(5),h.nI1(6,"translate"),h.k0s()()}if(2&c){const n=h.XpG();h.R7$(2),h.SpI(" ",n.dataError()," "),h.R7$(3),h.SpI(" ",h.bMT(6,2,"COMMON.RETRY")," ")}}function Jb(c,e){1&c&&(h.j41(0,"div",10),h.nrm(1,"router-outlet"),h.k0s())}function by(c,e){if(1&c){const n=h.RV6();h.j41(0,"div",6),h.nrm(1,"app-loader-dots",11),h.j41(2,"button",8),h.bIt("click",function(){h.eBV(n);const a=h.XpG(2);return h.Njj(a.retryConnection())}),h.nrm(3,"i",9),h.EFF(4),h.nI1(5,"translate"),h.k0s()()}2&c&&(h.R7$(4),h.SpI(" ",h.bMT(5,1,"COMMON.RETRY")," "))}function xy(c,e){1&c&&(h.j41(0,"div",4),h.nrm(1,"app-loader-dots"),h.k0s())}function Ey(c,e){1&c&&(h.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"span",15),h.EFF(4,"Loading..."),h.k0s()(),h.j41(5,"p"),h.EFF(6),h.nI1(7,"translate"),h.k0s()()()),2&c&&(h.R7$(6),h.SpI(" ",h.bMT(7,1,"COMMON.STARTING")," "))}function ex(c,e){if(1&c&&h.DNE(0,Jb,2,0)(1,by,6,3)(2,xy,2,0)(3,Ey,8,3),2&c){let n;const s=h.XpG();h.vxM(0,"success"===(n=s.requestState())?0:"error"===n?1:"loading"===n?2:3)}}function AE(c,e){1&c&&h.nrm(0,"app-footer")}let Sy=(()=>{class c{constructor(n,s,a,u,p,v,b,E,O){this.authService=n,this.router=s,this.socketService=a,this.chatStateService=u,this.userService=p,this.recaptchaManagerService=v,this.encryptionService=b,this.keyManagerService=E,this.kwhStore=O,this.socketSubscription=null,this.connectionAttempted=!1,this.enableChatFeatures=!1,this.requestState=(0,h.vPA)("starting"),this.isConnected=(0,h.vPA)(!1),this.isSidebarOpen=(0,h.vPA)(!1),this.needsFetch=this.chatStateService?.getNeedsFetch()??(0,h.vPA)(!1),this.chatBotRoles=(0,h.vPA)([]),this.conversations=(0,h.vPA)([]),this.userName=(0,h.vPA)(""),this.userIsPro=(0,h.vPA)(!1),this.dataError=(0,h.vPA)(""),this.isDataLoading=(0,h.vPA)(!1),this.showBirthDateModal=(0,h.vPA)(!1),this.enableChatFeatures&&(this.chatDataManager=new yy.CN)}ngOnInit(){this.initializeAuth()}initializeAuth(){var n=this;return(0,W.A)(function*(){(yield n.authService.isAuthenticated())?(n.initializeWebSocket(),yield n.checkUserAge()):n.router.navigate([dp.S.HOME])})()}checkUserAge(){var n=this;return(0,W.A)(function*(){n.isDataLoading.set(!0);const s=n.authService.getUserId();if(s)try{const a=yield(0,Y0._)(n.userService.getUserInfo(s)),u=new Date("1832-01-18 00:00:00+00");if(a.birthdate&&new Date(a.birthdate).getTime()===u.getTime())return void n.showBirthDateModal.set(!0);yield n.fetchData(a)}catch(a){console.error("Error checking user age:",a),n.handleFetchError(a)}else n.router.navigate([dp.S.HOME])})()}fetchData(n){var s=this;return(0,W.A)(function*(){s.isDataLoading.set(!0),s.dataError.set("");const a=`akashicRecords-v2-${s.authService.getUserId()}`;try{const u=sessionStorage.getItem(a);if(u&&(!s.enableChatFeatures||!1===s.needsFetch()))try{const O=s.encryptionService.decryptFromStorage(u),U=yield(0,Y0._)(s.userService.getUserInfo(s.authService.getUserId()));return O.userInfo=U,s.updateStateWithData(O),void s.isDataLoading.set(!1)}catch(O){console.warn("Cache decryption failed, fetching fresh data:",O),sessionStorage.removeItem(a)}yield s.keyManagerService.ensureKey();let v={};if(s.enableChatFeatures&&s.chatDataManager){const[O,U]=yield Promise.all([s.chatDataManager.fetchChatData(),(0,Y0._)(s.userService.getUserInfo(s.authService.getUserId()))]);v={roles:O.roles,conversations:O.conversations,userInfo:U}}else v={roles:[],conversations:[],userInfo:yield(0,Y0._)(s.userService.getUserInfo(s.authService.getUserId()))};const b={...v,userInfo:{...v.userInfo,isPro:void 0}},E=s.encryptionService.encryptForStorage(b);sessionStorage.setItem(a,E),s.updateStateWithData(v)}catch(u){console.error("Fetch error:",u),s.handleFetchError(u)}finally{s.isDataLoading.set(!1)}})()}updateStateWithData(n){this.enableChatFeatures&&(this.chatBotRoles.set(n.roles),this.conversations.set(n.conversations)),this.userName.set(n.userInfo.fullName.split(" ")[0]),this.userIsPro.set(n.userInfo.isPro),this.kwhStore.setUserIsPro(n.userInfo.isPro),this.recaptchaManagerService.hideBadge()}handleBirthDateUpdate(){this.showBirthDateModal.set(!1),this.fetchData()}handleFetchError(n){this.dataError.set(n instanceof Error?n.message:"An unexpected error occurred"),this.enableChatFeatures&&(this.chatBotRoles.set([]),this.conversations.set([])),this.userName.set(""),this.userIsPro.set(!1)}initializeWebSocket(){this.connectionAttempted?console.log("Connection already attempted, remaining in current state"):(this.connectionAttempted=!0,this.requestState.set("loading"),console.log("Initializing WebSocket connection..."),this.socketSubscription=this.socketService.isConnected().subscribe({next:n=>this.handleConnectionStatus(n),error:n=>this.handleConnectionError(n)}),this.connectSocket())}handleConnectionStatus(n){console.log("WebSocket connection status:",n),this.isConnected.set(n??!1),n?(console.log("Socket connection successful"),this.requestState.set("success")):"error"!==this.requestState()&&(console.error("Socket connection failed or lost"),this.requestState.set("error"))}handleConnectionError(n){console.error("WebSocket subscription error:",n),this.isConnected.set(!1),this.requestState.set("error")}connectSocket(){try{this.socketService.connect(),console.log("WebSocket connection initiated")}catch(n){console.error("Failed to initiate WebSocket connection:",n),this.handleConnectionError(n)}}retryConnection(){console.log("Retrying WebSocket connection..."),this.connectionAttempted=!1,this.initializeWebSocket()}toggleSidebar(){this.isSidebarOpen.update(n=>!n)}isOnChatRoute(){return this.router.url.includes("/chat/")}handleLogout(){const n=`akashicRecords-v2-${this.authService.getUserId()}`;sessionStorage.removeItem(n),this.authService.logout(),console.log("Logout executed"),this.router.navigate([dp.S.HOME])}toggleChatFeatures(n){this.enableChatFeatures=n,n&&!this.chatDataManager&&(this.chatDataManager=new yy.CN,this.fetchData())}isOnPreviewRoute(){return this.router.url.includes("/preview/")}ngOnDestroy(){this.socketSubscription?.unsubscribe(),this.socketService.disconnect(),console.log("Component destroyed, socket disconnected")}static{this.\u0275fac=function(s){return new(s||c)(h.rXU(G.uR),h.rXU(M.Ix),h.rXU(G.Cs),h.rXU(q0.l),h.rXU(G.DL),h.rXU(G.gZ),h.rXU(G.LC),h.rXU(G.o2),h.rXU(Kb.P))}}static{this.\u0275cmp=h.VBU({type:c,selectors:[["app-private-layout"]],standalone:!0,features:[h.aNF],decls:9,vars:6,consts:[[1,"min-vh-100","d-flex","flex-column"],["appMatrixField","",1,"position-fixed","w-100","h-100","matrix-char",2,"z-index","-1"],[1,"mb-3",3,"logout","toggleSidebar","userName","userIsPro"],[1,"hue-rotating",2,"padding-top","60px"],[1,"flex-grow-1","d-flex","justify-content-center","align-items-center"],[3,"birthdateUpdated"],[1,"flex-grow-1","d-flex","flex-column","justify-content-center","align-items-center","p-4"],[1,"alert","alert-danger","text-center","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-sync-alt","me-2"],[1,"flex-grow-1","container-fluid","px-4"],[1,"mb-4"],[1,"flex-grow-1","d-flex","justify-content-center","align-items-center","text-muted"],[1,"text-center"],["role","status",1,"spinner-border","mb-3"],[1,"visually-hidden"]],template:function(s,a){1&s&&(h.DNE(0,Qb,1,0,"app-birth-date-modal"),h.j41(1,"div",0),h.DNE(2,Yb,1,0,"div",1),h.j41(3,"app-private-navbar",2),h.bIt("logout",function(){return a.handleLogout()})("toggleSidebar",function(){return a.toggleSidebar()}),h.k0s(),h.j41(4,"main",3),h.DNE(5,qb,2,0,"div",4)(6,Zb,7,4)(7,ex,4,1),h.k0s(),h.DNE(8,AE,1,0,"app-footer"),h.k0s()),2&s&&(h.vxM(0,a.showBirthDateModal()?0:-1),h.R7$(2),h.vxM(2,a.isOnPreviewRoute()?-1:2),h.R7$(),h.Y8G("userName",a.userName())("userIsPro",a.userIsPro()),h.R7$(2),h.vxM(5,a.isDataLoading()?5:a.dataError()?6:7),h.R7$(3),h.vxM(8,a.isOnChatRoute()?-1:8))},dependencies:[l.Nu,l.n5,M.n3,X,we,de.h,de.D9,_y],styles:["main[_ngcontent-%COMP%]{transition:margin-left .3s ease;margin-left:0}main.with-sidebar[_ngcontent-%COMP%]{margin-left:30%;padding-left:5rem}@media (max-width: 768px){main.with-sidebar[_ngcontent-%COMP%]{margin-left:0}}.layout-container[_ngcontent-%COMP%]{position:relative;min-height:100vh}.three-background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1}"]})}}return c})();var My=S(1339);function rh(c,e){1&c&&(h.j41(0,"div",1)(1,"div",2)(2,"span",3),h.EFF(3,"Loading..."),h.k0s()()())}function Cy(c,e){1&c&&(h.j41(0,"main",4),h.nrm(1,"router-outlet"),h.k0s())}let tx=(()=>{class c{constructor(n,s){this.authService=n,this.router=s,this.isLoading=(0,h.vPA)(!0)}ngOnInit(){this.isLoading.set(!1)}static{this.\u0275fac=function(s){return new(s||c)(h.rXU(My.u),h.rXU(M.Ix))}}static{this.\u0275cmp=h.VBU({type:c,selectors:[["app-efo-layout"]],standalone:!0,features:[h.aNF],decls:3,vars:1,consts:[[1,"min-vh-100","d-flex","flex-column"],[1,"flex-grow-1","d-flex","justify-content-center","align-items-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"flex-grow-1","container-fluid","px-4","py-4"]],template:function(s,a){1&s&&(h.j41(0,"div",0),h.DNE(1,rh,4,0,"div",1)(2,Cy,2,0),h.k0s()),2&s&&(h.R7$(),h.vxM(1,a.isLoading()?1:2))},dependencies:[M.n3,oe.MD]})}}return c})()},4680:(Dt,qe,S)=>{"use strict";S.d(qe,{C:()=>W});var l=S(5312),M=S(1946),h=S(4438),ge=S(1626);let W=(()=>{class X{constructor(H){this.http=H,this.apiUrl=l.c.apiUrl}create(H){return this.http.post(`${this.apiUrl}${M.F.SUBMISSIONS}`,H)}getAll(){return this.http.get(`${this.apiUrl}${M.F.SUBMISSIONS}`)}getOne(H){return this.http.get(`${this.apiUrl}${M.F.SUBMISSIONS}/${H}`)}getBySlug(H){return this.http.get(`${this.apiUrl}${M.F.SUBMISSIONS}/slug/${H}`)}getByFilm(H){return this.http.get(`${this.apiUrl}${M.F.SUBMISSIONS}/film/${H}`)}getByProgram(H){return this.http.get(`${this.apiUrl}${M.F.SUBMISSIONS}/program/${H}`)}update(H,G){return this.http.patch(`${this.apiUrl}${M.F.SUBMISSIONS}/${H}`,G)}delete(H){return this.http.delete(`${this.apiUrl}${M.F.SUBMISSIONS}/${H}`)}markAsPaid(H,G){return this.http.post(`${this.apiUrl}${M.F.SUBMISSIONS}/${H}/mark-paid`,{transactionId:G})}static{this.\u0275fac=function(G){return new(G||X)(h.KVO(ge.Qq))}}static{this.\u0275prov=h.jDH({token:X,factory:X.\u0275fac,providedIn:"root"})}}return X})()},6447:(Dt,qe,S)=>{"use strict";S.d(qe,{H:()=>l});var l=function(h){return h.DIGIITALART="digitalart",h.PAINTING="painting",h.SCULPTURE="sculpture",h.INSTALLATION="installation",h.MIXEDMEDIA="mixedmedia",h.DRAWING="drawing",h.PHOTOGRAPH="photograph",h.PERFORMANCE="performance",h.COLLAGE="collage",h.VIDEOART="videoart",h.CREATIVECODE="creativecode",h.POETRY="poetry",h.VIDEODANCE="videodance",h}(l||{})},3841:(Dt,qe,S)=>{"use strict";S.d(qe,{P:()=>h});var l=S(4438);S(6447);let h=(()=>{class ge{constructor(){this.validationTrigger=(0,l.vPA)(null),this.userIsPro=(0,l.vPA)(!1),this.artistProfileForm=(0,l.vPA)(null),this.artistProfile=(0,l.vPA)(null),this.artworkForms=(0,l.vPA)([]),this.artworks=(0,l.vPA)([]),this.galleryForm=(0,l.vPA)(null),this.gallery=(0,l.vPA)(null),this.seriesForms=(0,l.vPA)([]),this.series=(0,l.vPA)([]),this.curatedSelectionForm=(0,l.vPA)(null),this.curatedSelections=(0,l.vPA)([]),this.artworkFiles=(0,l.vPA)(new Map),this.vrConfigs=(0,l.vPA)([]),this.textures=(0,l.vPA)([]),this.hydraScripts=(0,l.vPA)([]),this.threeDObjects=(0,l.vPA)([]),this.roomGeometries=(0,l.vPA)([])}setUserIsPro(X){console.log("KWH Store - setUserIsPro called with:",X),this.userIsPro.set(X)}setArtistProfileForm(X){this.artistProfileForm.set(X)}getArtistProfileForm(){return this.artistProfileForm()}setArtistProfile(X){this.artistProfile.set(X)}addArtworkForm(X,oe){const H=crypto.randomUUID(),G={...X,_tempId:H};this.artworkForms.update(k=>[...k,G]),this.artworkFiles.update(k=>{const P=new Map(k);return P.set(H,oe),P})}getArtworkForms(){return this.artworkForms()}getArtworkFile(X){return this.artworkFiles()?.get(X)}addArtwork(X){this.artworks.update(oe=>[...oe,X])}setGalleryForm(X){this.galleryForm.set(X)}getGalleryForm(){return this.galleryForm()}setGallery(X){this.gallery.set(X)}addSeriesForm(X){this.seriesForms.set([X])}getSeriesForms(){return this.seriesForms()}addSeries(X){this.series.update(oe=>[...oe,X])}reset(){console.log("KWH Store - reset() called - setting userIsPro to false"),this.userIsPro.set(!1),this.artistProfileForm.set(null),this.artistProfile.set(null),this.artworkForms.set([]),this.artworks.set([]),this.galleryForm.set(null),this.gallery.set(null),this.seriesForms.set([]),this.series.set([]),this.curatedSelectionForm.set(null),this.curatedSelections.set([]),this.artworkFiles.set(new Map)}removeArtwork(X){this.artworks.update(oe=>oe.filter(H=>H.id!==X))}removeSeries(X){this.series.update(oe=>oe.filter(H=>H.id!==X)),this.artworks.update(oe=>oe.map(H=>H.seriesId===X?{...H,seriesId:void 0,series:void 0}:H))}updateArtwork(X){this.artworks.update(oe=>oe.map(H=>H.id===X.id?X:H))}removeArtworkForm(X){this.artworkForms.update(oe=>oe.filter(H=>H._tempId!==X)),this.artworkFiles.update(oe=>{const H=new Map(oe);return H.delete(X),H})}updateArtworkForm(X,oe){this.artworkForms.update(H=>H.map(G=>G._tempId===X?{...oe,_tempId:G._tempId}:G))}updateArtworkFile(X,oe){this.artworkFiles.update(H=>{const G=new Map(H);return G.set(X,oe),G})}addVrConfig(X){this.vrConfigs.update(oe=>[...oe,X])}updateVrConfig(X){this.vrConfigs.update(oe=>oe.map(H=>H.id===X.id?X:H))}removeVrConfig(X){this.vrConfigs.update(oe=>oe.filter(H=>H.id!==X))}addTexture(X){this.textures.update(oe=>[...oe,X])}updateTexture(X){this.textures.update(oe=>oe.map(H=>H.id===X.id?X:H))}removeTexture(X){this.textures.update(oe=>oe.filter(H=>H.id!==X))}addHydraScript(X){this.hydraScripts.update(oe=>[...oe,X])}updateHydraScript(X){this.hydraScripts.update(oe=>oe.map(H=>H.id===X.id?X:H))}removeHydraScript(X){this.hydraScripts.update(oe=>oe.filter(H=>H.id!==X))}addThreeDObject(X){this.threeDObjects.update(oe=>[...oe,X])}updateThreeDObject(X){this.threeDObjects.update(oe=>oe.map(H=>H.id===X.id?X:H))}removeThreeDObject(X){this.threeDObjects.update(oe=>oe.filter(H=>H.id!==X))}addRoomGeometry(X){this.roomGeometries.update(oe=>[...oe,X])}updateRoomGeometry(X){this.roomGeometries.update(oe=>oe.map(H=>H.id===X.id?X:H))}removeRoomGeometry(X){this.roomGeometries.update(oe=>oe.filter(H=>H.id!==X))}static{this.\u0275fac=function(oe){return new(oe||ge)}}static{this.\u0275prov=l.jDH({token:ge,factory:ge.\u0275fac,providedIn:"root"})}}return ge})()},1339:(Dt,qe,S)=>{"use strict";S.d(qe,{u:()=>ce});var l=S(467),M=S(1626),h=S(4412),ge=S(6648),W=S(8810),X=S(5558),oe=S(9437),H=S(1774),G=S(5312),k=S(1946),P=S(4438),q=S(33),ne=S(7036);let ce=(()=>{class he{constructor(we,de,Re){this.http=we,this.router=de,this.clientSocketAuthService=Re,this.TOKEN_KEY="jwt",this.authState$=new h.t(!1),this.recaptchaToken=null,this.serverPublicKeyPromise=this.initializeEncryption(),this.updateAuthState()}initializeEncryption(){var we=this;return(0,l.A)(function*(){try{const de=yield we.http.get(G.c.apiUrl+k.F.PUBLIC_KEY).toPromise();localStorage.setItem("serverPublicKey",de.publicKey)}catch(de){throw console.error("Failed to fetch server public key:",de),de}})()}sendRequest(we,de,Re){return(0,ge.H)(this.serverPublicKeyPromise).pipe((0,X.n)(()=>"GET"===de?this.http.get(we):this.http.request(de,we,{body:Re})))}register(we){return this.sendRequest(G.c.apiUrl+k.F.REGISTER,"POST",we)}confirmEmail(we){return this.sendRequest(G.c.apiUrl+k.F.CONFIRM,"POST",{token:we})}setRecaptchaToken(we){this.recaptchaToken=we}login(we){const de=new M.Lr({"Content-Type":"application/json","X-Recaptcha-Token":we.recaptchaToken||""});return(0,ge.H)(this.serverPublicKeyPromise).pipe((0,X.n)(()=>this.http.post(G.c.apiUrl+k.F.LOGIN,we,{headers:de})),(0,oe.W)(Re=>(console.error("Login error:",Re),(0,W.$)(()=>Re))))}logout(){localStorage.removeItem(this.TOKEN_KEY),this.updateAuthState(),this.router.navigate([H.S.HOME]),console.log("bye bye, desconectao")}isAuthenticated(){return this.authState$.asObservable()}updateAuthState(){var we=this;return(0,l.A)(function*(){const de=localStorage.getItem(we.TOKEN_KEY),Re=!!de&&!we.isTokenExpired(de);return de&&we.isTokenExpired(de)&&(localStorage.removeItem(we.TOKEN_KEY),console.log("Expired token removed")),console.log("Auth state updated:",Re),we.authState$.next(Re),Re})()}isTokenExpired(we){try{const{exp:de}=JSON.parse(atob(we.split(".")[1]));return Date.now()>=1e3*de}catch{return console.log("bye bye, desconectao"),!0}}getUserId(){try{const we=localStorage.getItem("jwt");return we?this.decodeJwtToken(we).sub:null}catch(we){return console.error("Error decoding token:",we),null}}getUserEmail(){try{const we=localStorage.getItem(this.TOKEN_KEY);return we?this.decodeJwtToken(we).email:null}catch(we){return console.error("Error decoding token:",we),null}}forgotPassword(we){return this.sendRequest(G.c.apiUrl+k.F.FORGOT_PASSWORD,"POST",{email:we})}resetPassword(we,de){return this.sendRequest(G.c.apiUrl+k.F.RESET_PASSWORD,"POST",{token:we,newPassword:de})}decodeJwtToken(we){try{const[,de]=we.split(".");return JSON.parse(this.base64UrlDecode(de))}catch(de){throw console.error("Error decoding JWT token:",de),new Error("Invalid token format")}}base64UrlDecode(we){const de=we.replace(/-/g,"+").replace(/_/g,"/"),Re="=".repeat((4-de.length%4)%4);return decodeURIComponent(atob(de+Re).split("").map(ze=>"%"+("00"+ze.charCodeAt(0).toString(16)).slice(-2)).join(""))}static{this.\u0275fac=function(de){return new(de||he)(P.KVO(M.Qq),P.KVO(q.Ix),P.KVO(ne.C))}}static{this.\u0275prov=P.jDH({token:he,factory:he.\u0275fac,providedIn:"root"})}}return he})()},7036:(Dt,qe,S)=>{"use strict";S.d(qe,{C:()=>ho});var l={};S.r(l),S.d(l,{Decoder:()=>Qr,Encoder:()=>hr,PacketType:()=>$n,protocol:()=>Nr});const M=Object.create(null);M.open="0",M.close="1",M.ping="2",M.pong="3",M.message="4",M.upgrade="5",M.noop="6";const h=Object.create(null);Object.keys(M).forEach(Qe=>{h[M[Qe]]=Qe});const ge={type:"error",data:"parser error"},W="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),X="function"==typeof ArrayBuffer,oe=Qe=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(Qe):Qe&&Qe.buffer instanceof ArrayBuffer,H=({type:Qe,data:L},$,ue)=>W&&L instanceof Blob?$?ue(L):G(L,ue):X&&(L instanceof ArrayBuffer||oe(L))?$?ue(L):G(new Blob([L]),ue):ue(M[Qe]+(L||"")),G=(Qe,L)=>{const $=new FileReader;return $.onload=function(){const ue=$.result.split(",")[1];L("b"+(ue||""))},$.readAsDataURL(Qe)};function k(Qe){return Qe instanceof Uint8Array?Qe:Qe instanceof ArrayBuffer?new Uint8Array(Qe):new Uint8Array(Qe.buffer,Qe.byteOffset,Qe.byteLength)}let P;const ce=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let Qe=0;Qe<64;Qe++)ce["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Qe)]=Qe;const we="function"==typeof ArrayBuffer,de=(Qe,L)=>{if("string"!=typeof Qe)return{type:"message",data:ze(Qe,L)};const $=Qe.charAt(0);return"b"===$?{type:"message",data:Re(Qe.substring(1),L)}:h[$]?Qe.length>1?{type:h[$],data:Qe.substring(1)}:{type:h[$]}:ge},Re=(Qe,L)=>{if(we){const $=(Qe=>{let ue,pt,en,pn,Vn,L=.75*Qe.length,$=Qe.length,Ze=0;"="===Qe[Qe.length-1]&&(L--,"="===Qe[Qe.length-2]&&L--);const ai=new ArrayBuffer(L),ur=new Uint8Array(ai);for(ue=0;ue<$;ue+=4)pt=ce[Qe.charCodeAt(ue)],en=ce[Qe.charCodeAt(ue+1)],pn=ce[Qe.charCodeAt(ue+2)],Vn=ce[Qe.charCodeAt(ue+3)],ur[Ze++]=pt<<2|en>>4,ur[Ze++]=(15&en)<<4|pn>>2,ur[Ze++]=(3&pn)<<6|63&Vn;return ai})(Qe);return ze($,L)}return{base64:!0,data:Qe}},ze=(Qe,L)=>"blob"===L?Qe instanceof Blob?Qe:new Blob([Qe]):Qe instanceof ArrayBuffer?Qe:Qe.buffer;let _t;function ut(Qe){return Qe.reduce((L,$)=>L+$.length,0)}function ae(Qe,L){if(Qe[0].length===L)return Qe.shift();const $=new Uint8Array(L);let ue=0;for(let Ze=0;Ze<L;Ze++)$[Ze]=Qe[0][ue++],ue===Qe[0].length&&(Qe.shift(),ue=0);return Qe.length&&ue<Qe[0].length&&(Qe[0]=Qe[0].slice(ue)),$}function K(Qe){if(Qe)return function te(Qe){for(var L in K.prototype)Qe[L]=K.prototype[L];return Qe}(Qe)}K.prototype.on=K.prototype.addEventListener=function(Qe,L){return this._callbacks=this._callbacks||{},(this._callbacks["$"+Qe]=this._callbacks["$"+Qe]||[]).push(L),this},K.prototype.once=function(Qe,L){function $(){this.off(Qe,$),L.apply(this,arguments)}return $.fn=L,this.on(Qe,$),this},K.prototype.off=K.prototype.removeListener=K.prototype.removeAllListeners=K.prototype.removeEventListener=function(Qe,L){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var $=this._callbacks["$"+Qe];if(!$)return this;if(1==arguments.length)return delete this._callbacks["$"+Qe],this;for(var ue,Ze=0;Ze<$.length;Ze++)if((ue=$[Ze])===L||ue.fn===L){$.splice(Ze,1);break}return 0===$.length&&delete this._callbacks["$"+Qe],this},K.prototype.emitReserved=K.prototype.emit=function(Qe){this._callbacks=this._callbacks||{};for(var L=new Array(arguments.length-1),$=this._callbacks["$"+Qe],ue=1;ue<arguments.length;ue++)L[ue-1]=arguments[ue];if($){ue=0;for(var Ze=($=$.slice(0)).length;ue<Ze;++ue)$[ue].apply(this,L)}return this},K.prototype.listeners=function(Qe){return this._callbacks=this._callbacks||{},this._callbacks["$"+Qe]||[]},K.prototype.hasListeners=function(Qe){return!!this.listeners(Qe).length};const ve="function"==typeof Promise&&"function"==typeof Promise.resolve?L=>Promise.resolve().then(L):(L,$)=>$(L,0),Ce=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function z(Qe,...L){return L.reduce(($,ue)=>(Qe.hasOwnProperty(ue)&&($[ue]=Qe[ue]),$),{})}const Fe=Ce.setTimeout,Pt=Ce.clearTimeout;function ot(Qe,L){L.useNativeTimers?(Qe.setTimeoutFn=Fe.bind(Ce),Qe.clearTimeoutFn=Pt.bind(Ce)):(Qe.setTimeoutFn=Ce.setTimeout.bind(Ce),Qe.clearTimeoutFn=Ce.clearTimeout.bind(Ce))}function vt(Qe){return"string"==typeof Qe?function st(Qe){let L=0,$=0;for(let ue=0,Ze=Qe.length;ue<Ze;ue++)L=Qe.charCodeAt(ue),L<128?$+=1:L<2048?$+=2:L<55296||L>=57344?$+=3:(ue++,$+=4);return $}(Qe):Math.ceil(1.33*(Qe.byteLength||Qe.size))}function Ft(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class kt extends Error{constructor(L,$,ue){super(L),this.description=$,this.context=ue,this.type="TransportError"}}class cn extends K{constructor(L){super(),this.writable=!1,ot(this,L),this.opts=L,this.query=L.query,this.socket=L.socket,this.supportsBinary=!L.forceBase64}onError(L,$,ue){return super.emitReserved("error",new kt(L,$,ue)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(L){"open"===this.readyState&&this.write(L)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(L){const $=de(L,this.socket.binaryType);this.onPacket($)}onPacket(L){super.emitReserved("packet",L)}onClose(L){this.readyState="closed",super.emitReserved("close",L)}pause(L){}createUri(L,$={}){return L+"://"+this._hostname()+this._port()+this.opts.path+this._query($)}_hostname(){const L=this.opts.hostname;return-1===L.indexOf(":")?L:"["+L+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(L){const $=function $e(Qe){let L="";for(let $ in Qe)Qe.hasOwnProperty($)&&(L.length&&(L+="&"),L+=encodeURIComponent($)+"="+encodeURIComponent(Qe[$]));return L}(L);return $.length?"?"+$:""}}class rn extends cn{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(L){this.readyState="pausing";const $=()=>{this.readyState="paused",L()};if(this._polling||!this.writable){let ue=0;this._polling&&(ue++,this.once("pollComplete",function(){--ue||$()})),this.writable||(ue++,this.once("drain",function(){--ue||$()}))}else $()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(L){((Qe,L)=>{const $=Qe.split("\x1e"),ue=[];for(let Ze=0;Ze<$.length;Ze++){const pt=de($[Ze],L);if(ue.push(pt),"error"===pt.type)break}return ue})(L,this.socket.binaryType).forEach(ue=>{if("opening"===this.readyState&&"open"===ue.type&&this.onOpen(),"close"===ue.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(ue)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const L=()=>{this.write([{type:"close"}])};"open"===this.readyState?L():this.once("open",L)}write(L){this.writable=!1,((Qe,L)=>{const $=Qe.length,ue=new Array($);let Ze=0;Qe.forEach((pt,en)=>{H(pt,!1,pn=>{ue[en]=pn,++Ze===$&&L(ue.join("\x1e"))})})})(L,$=>{this.doWrite($,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const L=this.opts.secure?"https":"http",$=this.query||{};return!1!==this.opts.timestampRequests&&($[this.opts.timestampParam]=Ft()),!this.supportsBinary&&!$.sid&&($.b64=1),this.createUri(L,$)}}let gn=!1;try{gn=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Xt=gn;function hn(){}class ct extends rn{constructor(L){if(super(L),typeof location<"u"){const $="https:"===location.protocol;let ue=location.port;ue||(ue=$?"443":"80"),this.xd=typeof location<"u"&&L.hostname!==location.hostname||ue!==L.port}}doWrite(L,$){const ue=this.request({method:"POST",data:L});ue.on("success",$),ue.on("error",(Ze,pt)=>{this.onError("xhr post error",Ze,pt)})}doPoll(){const L=this.request();L.on("data",this.onData.bind(this)),L.on("error",($,ue)=>{this.onError("xhr poll error",$,ue)}),this.pollXhr=L}}let Ot=(()=>{class Qe extends K{constructor($,ue,Ze){super(),this.createRequest=$,ot(this,Ze),this._opts=Ze,this._method=Ze.method||"GET",this._uri=ue,this._data=void 0!==Ze.data?Ze.data:null,this._create()}_create(){var $;const ue=z(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");ue.xdomain=!!this._opts.xd;const Ze=this._xhr=this.createRequest(ue);try{Ze.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){Ze.setDisableHeaderCheck&&Ze.setDisableHeaderCheck(!0);for(let pt in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(pt)&&Ze.setRequestHeader(pt,this._opts.extraHeaders[pt])}}catch{}if("POST"===this._method)try{Ze.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{Ze.setRequestHeader("Accept","*/*")}catch{}null===($=this._opts.cookieJar)||void 0===$||$.addCookies(Ze),"withCredentials"in Ze&&(Ze.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(Ze.timeout=this._opts.requestTimeout),Ze.onreadystatechange=()=>{var pt;3===Ze.readyState&&(null===(pt=this._opts.cookieJar)||void 0===pt||pt.parseCookies(Ze.getResponseHeader("set-cookie"))),4===Ze.readyState&&(200===Ze.status||1223===Ze.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof Ze.status?Ze.status:0)},0))},Ze.send(this._data)}catch(pt){return void this.setTimeoutFn(()=>{this._onError(pt)},0)}typeof document<"u"&&(this._index=Qe.requestsCount++,Qe.requests[this._index]=this)}_onError($){this.emitReserved("error",$,this._xhr),this._cleanup(!0)}_cleanup($){if(!(typeof this._xhr>"u"||null===this._xhr)){if(this._xhr.onreadystatechange=hn,$)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Qe.requests[this._index],this._xhr=null}}_onLoad(){const $=this._xhr.responseText;null!==$&&(this.emitReserved("data",$),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return Qe.requestsCount=0,Qe.requests={},Qe})();function It(){for(let Qe in Ot.requests)Ot.requests.hasOwnProperty(Qe)&&Ot.requests[Qe].abort()}typeof document<"u"&&("function"==typeof attachEvent?attachEvent("onunload",It):"function"==typeof addEventListener&&addEventListener("onpagehide"in Ce?"pagehide":"unload",It,!1));const an=function(){const Qe=Xn({xdomain:!1});return Qe&&null!==Qe.responseType}();function Xn(Qe){const L=Qe.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!L||Xt))return new XMLHttpRequest}catch{}if(!L)try{return new(Ce[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch{}}const Zn=typeof navigator<"u"&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class Hr extends cn{get name(){return"websocket"}doOpen(){const L=this.uri(),$=this.opts.protocols,ue=Zn?{}:z(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(ue.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(L,$,ue)}catch(Ze){return this.emitReserved("error",Ze)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=L=>this.onClose({description:"websocket connection closed",context:L}),this.ws.onmessage=L=>this.onData(L.data),this.ws.onerror=L=>this.onError("websocket error",L)}write(L){this.writable=!1;for(let $=0;$<L.length;$++){const ue=L[$],Ze=$===L.length-1;H(ue,this.supportsBinary,pt=>{try{this.doWrite(ue,pt)}catch{}Ze&&ve(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const L=this.opts.secure?"wss":"ws",$=this.query||{};return this.opts.timestampRequests&&($[this.opts.timestampParam]=Ft()),this.supportsBinary||($.b64=1),this.createUri(L,$)}}const Hn=Ce.WebSocket||Ce.MozWebSocket,Pi={websocket:class Dn extends Hr{createSocket(L,$,ue){return Zn?new Hn(L,$,ue):$?new Hn(L,$):new Hn(L)}doWrite(L,$){this.ws.send($)}},webtransport:class Un extends cn{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(L){return this.emitReserved("error",L)}this._transport.closed.then(()=>{this.onClose()}).catch(L=>{this.onError("webtransport error",L)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(L=>{const $=function x(Qe,L){_t||(_t=new TextDecoder);const $=[];let ue=0,Ze=-1,pt=!1;return new TransformStream({transform(en,pn){for($.push(en);;){if(0===ue){if(ut($)<1)break;const Vn=ae($,1);pt=!(128&~Vn[0]),Ze=127&Vn[0],ue=Ze<126?3:126===Ze?1:2}else if(1===ue){if(ut($)<2)break;const Vn=ae($,2);Ze=new DataView(Vn.buffer,Vn.byteOffset,Vn.length).getUint16(0),ue=3}else if(2===ue){if(ut($)<8)break;const Vn=ae($,8),ai=new DataView(Vn.buffer,Vn.byteOffset,Vn.length),ur=ai.getUint32(0);if(ur>Math.pow(2,21)-1){pn.enqueue(ge);break}Ze=ur*Math.pow(2,32)+ai.getUint32(4),ue=3}else{if(ut($)<Ze)break;const Vn=ae($,Ze);pn.enqueue(de(pt?Vn:_t.decode(Vn),L)),ue=0}if(0===Ze||Ze>Qe){pn.enqueue(ge);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),ue=L.readable.pipeThrough($).getReader(),Ze=function yt(){return new TransformStream({transform(Qe,L){!function q(Qe,L){W&&Qe.data instanceof Blob?Qe.data.arrayBuffer().then(k).then(L):X&&(Qe.data instanceof ArrayBuffer||oe(Qe.data))?L(k(Qe.data)):H(Qe,!1,$=>{P||(P=new TextEncoder),L(P.encode($))})}(Qe,$=>{const ue=$.length;let Ze;if(ue<126)Ze=new Uint8Array(1),new DataView(Ze.buffer).setUint8(0,ue);else if(ue<65536){Ze=new Uint8Array(3);const pt=new DataView(Ze.buffer);pt.setUint8(0,126),pt.setUint16(1,ue)}else{Ze=new Uint8Array(9);const pt=new DataView(Ze.buffer);pt.setUint8(0,127),pt.setBigUint64(1,BigInt(ue))}Qe.data&&"string"!=typeof Qe.data&&(Ze[0]|=128),L.enqueue(Ze),L.enqueue($)})}})}();Ze.readable.pipeTo(L.writable),this._writer=Ze.writable.getWriter();const pt=()=>{ue.read().then(({done:pn,value:Vn})=>{pn||(this.onPacket(Vn),pt())}).catch(pn=>{})};pt();const en={type:"open"};this.query.sid&&(en.data=`{"sid":"${this.query.sid}"}`),this._writer.write(en).then(()=>this.onOpen())})})}write(L){this.writable=!1;for(let $=0;$<L.length;$++){const Ze=$===L.length-1;this._writer.write(L[$]).then(()=>{Ze&&ve(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var L;null===(L=this._transport)||void 0===L||L.close()}},polling:class Fn extends ct{constructor(L){super(L),this.supportsBinary=an&&!(L&&L.forceBase64)}request(L={}){return Object.assign(L,{xd:this.xd},this.opts),new Ot(Xn,this.uri(),L)}}},Qi=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Rr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ii(Qe){if(Qe.length>8e3)throw"URI too long";const L=Qe,$=Qe.indexOf("["),ue=Qe.indexOf("]");-1!=$&&-1!=ue&&(Qe=Qe.substring(0,$)+Qe.substring($,ue).replace(/:/g,";")+Qe.substring(ue,Qe.length));let Ze=Qi.exec(Qe||""),pt={},en=14;for(;en--;)pt[Rr[en]]=Ze[en]||"";return-1!=$&&-1!=ue&&(pt.source=L,pt.host=pt.host.substring(1,pt.host.length-1).replace(/;/g,":"),pt.authority=pt.authority.replace("[","").replace("]","").replace(/;/g,":"),pt.ipv6uri=!0),pt.pathNames=function yi(Qe,L){const ue=L.replace(/\/{2,9}/g,"/").split("/");return("/"==L.slice(0,1)||0===L.length)&&ue.splice(0,1),"/"==L.slice(-1)&&ue.splice(ue.length-1,1),ue}(0,pt.path),pt.queryKey=function uo(Qe,L){const $={};return L.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(ue,Ze,pt){Ze&&($[Ze]=pt)}),$}(0,pt.query),pt}const Yn="function"==typeof addEventListener&&"function"==typeof removeEventListener,cr=[];Yn&&addEventListener("offline",()=>{cr.forEach(Qe=>Qe())},!1);let mr=(()=>{class Qe extends K{constructor($,ue){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,$&&"object"==typeof $&&(ue=$,$=null),$){const Ze=ii($);ue.hostname=Ze.host,ue.secure="https"===Ze.protocol||"wss"===Ze.protocol,ue.port=Ze.port,Ze.query&&(ue.query=Ze.query)}else ue.host&&(ue.hostname=ii(ue.host).host);ot(this,ue),this.secure=null!=ue.secure?ue.secure:typeof location<"u"&&"https:"===location.protocol,ue.hostname&&!ue.port&&(ue.port=this.secure?"443":"80"),this.hostname=ue.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=ue.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},ue.transports.forEach(Ze=>{const pt=Ze.prototype.name;this.transports.push(pt),this._transportsByName[pt]=Ze}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},ue),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function Xe(Qe){let L={},$=Qe.split("&");for(let ue=0,Ze=$.length;ue<Ze;ue++){let pt=$[ue].split("=");L[decodeURIComponent(pt[0])]=decodeURIComponent(pt[1])}return L}(this.opts.query)),Yn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},cr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport($){const ue=Object.assign({},this.opts.query);ue.EIO=4,ue.transport=$,this.id&&(ue.sid=this.id);const Ze=Object.assign({},this.opts,{query:ue,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[$]);return new this._transportsByName[$](Ze)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const $=this.opts.rememberUpgrade&&Qe.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const ue=this.createTransport($);ue.open(),this.setTransport(ue)}setTransport($){this.transport&&this.transport.removeAllListeners(),this.transport=$,$.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",ue=>this._onClose("transport close",ue))}onOpen(){this.readyState="open",Qe.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket($){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",$),this.emitReserved("heartbeat"),$.type){case"open":this.onHandshake(JSON.parse($.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const ue=new Error("server error");ue.code=$.data,this._onError(ue);break;case"message":this.emitReserved("data",$.data),this.emitReserved("message",$.data)}}onHandshake($){this.emitReserved("handshake",$),this.id=$.sid,this.transport.query.sid=$.sid,this._pingInterval=$.pingInterval,this._pingTimeout=$.pingTimeout,this._maxPayload=$.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const $=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+$,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},$),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const $=this._getWritablePackets();this.transport.send($),this._prevBufferLen=$.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let ue=1;for(let Ze=0;Ze<this.writeBuffer.length;Ze++){const pt=this.writeBuffer[Ze].data;if(pt&&(ue+=vt(pt)),Ze>0&&ue>this._maxPayload)return this.writeBuffer.slice(0,Ze);ue+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const $=Date.now()>this._pingTimeoutTime;return $&&(this._pingTimeoutTime=0,ve(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),$}write($,ue,Ze){return this._sendPacket("message",$,ue,Ze),this}send($,ue,Ze){return this._sendPacket("message",$,ue,Ze),this}_sendPacket($,ue,Ze,pt){if("function"==typeof ue&&(pt=ue,ue=void 0),"function"==typeof Ze&&(pt=Ze,Ze=null),"closing"===this.readyState||"closed"===this.readyState)return;(Ze=Ze||{}).compress=!1!==Ze.compress;const en={type:$,data:ue,options:Ze};this.emitReserved("packetCreate",en),this.writeBuffer.push(en),pt&&this.once("flush",pt),this.flush()}close(){const $=()=>{this._onClose("forced close"),this.transport.close()},ue=()=>{this.off("upgrade",ue),this.off("upgradeError",ue),$()},Ze=()=>{this.once("upgrade",ue),this.once("upgradeError",ue)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?Ze():$()}):this.upgrading?Ze():$()),this}_onError($){if(Qe.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",$),this._onClose("transport error",$)}_onClose($,ue){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Yn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const Ze=cr.indexOf(this._offlineEventListener);-1!==Ze&&cr.splice(Ze,1)}this.readyState="closed",this.id=null,this.emitReserved("close",$,ue),this.writeBuffer=[],this._prevBufferLen=0}}}return Qe.protocol=4,Qe})();class Si extends mr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let L=0;L<this._upgrades.length;L++)this._probe(this._upgrades[L])}_probe(L){let $=this.createTransport(L),ue=!1;mr.priorWebsocketSuccess=!1;const Ze=()=>{ue||($.send([{type:"ping",data:"probe"}]),$.once("packet",Ei=>{if(!ue)if("pong"===Ei.type&&"probe"===Ei.data){if(this.upgrading=!0,this.emitReserved("upgrading",$),!$)return;mr.priorWebsocketSuccess="websocket"===$.name,this.transport.pause(()=>{ue||"closed"!==this.readyState&&(ur(),this.setTransport($),$.send([{type:"upgrade"}]),this.emitReserved("upgrade",$),$=null,this.upgrading=!1,this.flush())})}else{const Yi=new Error("probe error");Yi.transport=$.name,this.emitReserved("upgradeError",Yi)}}))};function pt(){ue||(ue=!0,ur(),$.close(),$=null)}const en=Ei=>{const Yi=new Error("probe error: "+Ei);Yi.transport=$.name,pt(),this.emitReserved("upgradeError",Yi)};function pn(){en("transport closed")}function Vn(){en("socket closed")}function ai(Ei){$&&Ei.name!==$.name&&pt()}const ur=()=>{$.removeListener("open",Ze),$.removeListener("error",en),$.removeListener("close",pn),this.off("close",Vn),this.off("upgrading",ai)};$.once("open",Ze),$.once("error",en),$.once("close",pn),this.once("close",Vn),this.once("upgrading",ai),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==L?this.setTimeoutFn(()=>{ue||$.open()},200):$.open()}onHandshake(L){this._upgrades=this._filterUpgrades(L.upgrades),super.onHandshake(L)}_filterUpgrades(L){const $=[];for(let ue=0;ue<L.length;ue++)~this.transports.indexOf(L[ue])&&$.push(L[ue]);return $}}class Ir extends Si{constructor(L,$={}){const ue="object"==typeof L?L:$;(!ue.transports||ue.transports&&"string"==typeof ue.transports[0])&&(ue.transports=(ue.transports||["polling","websocket","webtransport"]).map(Ze=>Pi[Ze]).filter(Ze=>!!Ze)),super(L,ue)}}const ls="function"==typeof ArrayBuffer,ar=Qe=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(Qe):Qe.buffer instanceof ArrayBuffer,Rt=Object.prototype.toString,zt="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===Rt.call(Blob),at="function"==typeof File||typeof File<"u"&&"[object FileConstructor]"===Rt.call(File);function St(Qe){return ls&&(Qe instanceof ArrayBuffer||ar(Qe))||zt&&Qe instanceof Blob||at&&Qe instanceof File}function fn(Qe,L){if(!Qe||"object"!=typeof Qe)return!1;if(Array.isArray(Qe)){for(let $=0,ue=Qe.length;$<ue;$++)if(fn(Qe[$]))return!0;return!1}if(St(Qe))return!0;if(Qe.toJSON&&"function"==typeof Qe.toJSON&&1===arguments.length)return fn(Qe.toJSON(),!0);for(const $ in Qe)if(Object.prototype.hasOwnProperty.call(Qe,$)&&fn(Qe[$]))return!0;return!1}function vn(Qe){const L=[],ue=Qe;return ue.data=kn(Qe.data,L),ue.attachments=L.length,{packet:ue,buffers:L}}function kn(Qe,L){if(!Qe)return Qe;if(St(Qe)){const $={_placeholder:!0,num:L.length};return L.push(Qe),$}if(Array.isArray(Qe)){const $=new Array(Qe.length);for(let ue=0;ue<Qe.length;ue++)$[ue]=kn(Qe[ue],L);return $}if("object"==typeof Qe&&!(Qe instanceof Date)){const $={};for(const ue in Qe)Object.prototype.hasOwnProperty.call(Qe,ue)&&($[ue]=kn(Qe[ue],L));return $}return Qe}function zi(Qe,L){return Qe.data=oi(Qe.data,L),delete Qe.attachments,Qe}function oi(Qe,L){if(!Qe)return Qe;if(Qe&&!0===Qe._placeholder){if("number"==typeof Qe.num&&Qe.num>=0&&Qe.num<L.length)return L[Qe.num];throw new Error("illegal attachments")}if(Array.isArray(Qe))for(let $=0;$<Qe.length;$++)Qe[$]=oi(Qe[$],L);else if("object"==typeof Qe)for(const $ in Qe)Object.prototype.hasOwnProperty.call(Qe,$)&&(Qe[$]=oi(Qe[$],L));return Qe}const gi=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Nr=5;var $n=function(Qe){return Qe[Qe.CONNECT=0]="CONNECT",Qe[Qe.DISCONNECT=1]="DISCONNECT",Qe[Qe.EVENT=2]="EVENT",Qe[Qe.ACK=3]="ACK",Qe[Qe.CONNECT_ERROR=4]="CONNECT_ERROR",Qe[Qe.BINARY_EVENT=5]="BINARY_EVENT",Qe[Qe.BINARY_ACK=6]="BINARY_ACK",Qe}($n||{});class hr{constructor(L){this.replacer=L}encode(L){return L.type!==$n.EVENT&&L.type!==$n.ACK||!fn(L)?[this.encodeAsString(L)]:this.encodeAsBinary({type:L.type===$n.EVENT?$n.BINARY_EVENT:$n.BINARY_ACK,nsp:L.nsp,data:L.data,id:L.id})}encodeAsString(L){let $=""+L.type;return(L.type===$n.BINARY_EVENT||L.type===$n.BINARY_ACK)&&($+=L.attachments+"-"),L.nsp&&"/"!==L.nsp&&($+=L.nsp+","),null!=L.id&&($+=L.id),null!=L.data&&($+=JSON.stringify(L.data,this.replacer)),$}encodeAsBinary(L){const $=vn(L),ue=this.encodeAsString($.packet),Ze=$.buffers;return Ze.unshift(ue),Ze}}function cs(Qe){return"[object Object]"===Object.prototype.toString.call(Qe)}class Qr extends K{constructor(L){super(),this.reviver=L}add(L){let $;if("string"==typeof L){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");$=this.decodeString(L);const ue=$.type===$n.BINARY_EVENT;ue||$.type===$n.BINARY_ACK?($.type=ue?$n.EVENT:$n.ACK,this.reconstructor=new zn($),0===$.attachments&&super.emitReserved("decoded",$)):super.emitReserved("decoded",$)}else{if(!St(L)&&!L.base64)throw new Error("Unknown type: "+L);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");$=this.reconstructor.takeBinaryData(L),$&&(this.reconstructor=null,super.emitReserved("decoded",$))}}decodeString(L){let $=0;const ue={type:Number(L.charAt(0))};if(void 0===$n[ue.type])throw new Error("unknown packet type "+ue.type);if(ue.type===$n.BINARY_EVENT||ue.type===$n.BINARY_ACK){const pt=$+1;for(;"-"!==L.charAt(++$)&&$!=L.length;);const en=L.substring(pt,$);if(en!=Number(en)||"-"!==L.charAt($))throw new Error("Illegal attachments");ue.attachments=Number(en)}if("/"===L.charAt($+1)){const pt=$+1;for(;++$&&","!==L.charAt($)&&$!==L.length;);ue.nsp=L.substring(pt,$)}else ue.nsp="/";const Ze=L.charAt($+1);if(""!==Ze&&Number(Ze)==Ze){const pt=$+1;for(;++$;){const en=L.charAt($);if(null==en||Number(en)!=en){--$;break}if($===L.length)break}ue.id=Number(L.substring(pt,$+1))}if(L.charAt(++$)){const pt=this.tryParse(L.substr($));if(!Qr.isPayloadValid(ue.type,pt))throw new Error("invalid payload");ue.data=pt}return ue}tryParse(L){try{return JSON.parse(L,this.reviver)}catch{return!1}}static isPayloadValid(L,$){switch(L){case $n.CONNECT:return cs($);case $n.DISCONNECT:return void 0===$;case $n.CONNECT_ERROR:return"string"==typeof $||cs($);case $n.EVENT:case $n.BINARY_EVENT:return Array.isArray($)&&("number"==typeof $[0]||"string"==typeof $[0]&&-1===gi.indexOf($[0]));case $n.ACK:case $n.BINARY_ACK:return Array.isArray($)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class zn{constructor(L){this.packet=L,this.buffers=[],this.reconPack=L}takeBinaryData(L){if(this.buffers.push(L),this.buffers.length===this.reconPack.attachments){const $=zi(this.reconPack,this.buffers);return this.finishedReconstruction(),$}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Kn(Qe,L,$){return Qe.on(L,$),function(){Qe.off(L,$)}}const xi=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Sr extends K{constructor(L,$,ue){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=L,this.nsp=$,ue&&ue.auth&&(this.auth=ue.auth),this._opts=Object.assign({},ue),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const L=this.io;this.subs=[Kn(L,"open",this.onopen.bind(this)),Kn(L,"packet",this.onpacket.bind(this)),Kn(L,"error",this.onerror.bind(this)),Kn(L,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...L){return L.unshift("message"),this.emit.apply(this,L),this}emit(L,...$){var ue,Ze,pt;if(xi.hasOwnProperty(L))throw new Error('"'+L.toString()+'" is a reserved event name');if($.unshift(L),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue($),this;const en={type:$n.EVENT,data:$,options:{}};if(en.options.compress=!1!==this.flags.compress,"function"==typeof $[$.length-1]){const ur=this.ids++,Ei=$.pop();this._registerAckCallback(ur,Ei),en.id=ur}const pn=null===(Ze=null===(ue=this.io.engine)||void 0===ue?void 0:ue.transport)||void 0===Ze?void 0:Ze.writable,Vn=this.connected&&!(null!==(pt=this.io.engine)&&void 0!==pt&&pt._hasPingExpired());return this.flags.volatile&&!pn||(Vn?(this.notifyOutgoingListeners(en),this.packet(en)):this.sendBuffer.push(en)),this.flags={},this}_registerAckCallback(L,$){var ue;const Ze=null!==(ue=this.flags.timeout)&&void 0!==ue?ue:this._opts.ackTimeout;if(void 0===Ze)return void(this.acks[L]=$);const pt=this.io.setTimeoutFn(()=>{delete this.acks[L];for(let pn=0;pn<this.sendBuffer.length;pn++)this.sendBuffer[pn].id===L&&this.sendBuffer.splice(pn,1);$.call(this,new Error("operation has timed out"))},Ze),en=(...pn)=>{this.io.clearTimeoutFn(pt),$.apply(this,pn)};en.withError=!0,this.acks[L]=en}emitWithAck(L,...$){return new Promise((ue,Ze)=>{const pt=(en,pn)=>en?Ze(en):ue(pn);pt.withError=!0,$.push(pt),this.emit(L,...$)})}_addToQueue(L){let $;"function"==typeof L[L.length-1]&&($=L.pop());const ue={id:this._queueSeq++,tryCount:0,pending:!1,args:L,flags:Object.assign({fromQueue:!0},this.flags)};L.push((Ze,...pt)=>ue!==this._queue[0]?void 0:(null!==Ze?ue.tryCount>this._opts.retries&&(this._queue.shift(),$&&$(Ze)):(this._queue.shift(),$&&$(null,...pt)),ue.pending=!1,this._drainQueue())),this._queue.push(ue),this._drainQueue()}_drainQueue(L=!1){if(!this.connected||0===this._queue.length)return;const $=this._queue[0];$.pending&&!L||($.pending=!0,$.tryCount++,this.flags=$.flags,this.emit.apply(this,$.args))}packet(L){L.nsp=this.nsp,this.io._packet(L)}onopen(){"function"==typeof this.auth?this.auth(L=>{this._sendConnectPacket(L)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(L){this.packet({type:$n.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},L):L})}onerror(L){this.connected||this.emitReserved("connect_error",L)}onclose(L,$){this.connected=!1,delete this.id,this.emitReserved("disconnect",L,$),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(L=>{if(!this.sendBuffer.some(ue=>String(ue.id)===L)){const ue=this.acks[L];delete this.acks[L],ue.withError&&ue.call(this,new Error("socket has been disconnected"))}})}onpacket(L){if(L.nsp===this.nsp)switch(L.type){case $n.CONNECT:L.data&&L.data.sid?this.onconnect(L.data.sid,L.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case $n.EVENT:case $n.BINARY_EVENT:this.onevent(L);break;case $n.ACK:case $n.BINARY_ACK:this.onack(L);break;case $n.DISCONNECT:this.ondisconnect();break;case $n.CONNECT_ERROR:this.destroy();const ue=new Error(L.data.message);ue.data=L.data.data,this.emitReserved("connect_error",ue)}}onevent(L){const $=L.data||[];null!=L.id&&$.push(this.ack(L.id)),this.connected?this.emitEvent($):this.receiveBuffer.push(Object.freeze($))}emitEvent(L){if(this._anyListeners&&this._anyListeners.length){const $=this._anyListeners.slice();for(const ue of $)ue.apply(this,L)}super.emit.apply(this,L),this._pid&&L.length&&"string"==typeof L[L.length-1]&&(this._lastOffset=L[L.length-1])}ack(L){const $=this;let ue=!1;return function(...Ze){ue||(ue=!0,$.packet({type:$n.ACK,id:L,data:Ze}))}}onack(L){const $=this.acks[L.id];"function"==typeof $&&(delete this.acks[L.id],$.withError&&L.data.unshift(null),$.apply(this,L.data))}onconnect(L,$){this.id=L,this.recovered=$&&this._pid===$,this._pid=$,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(L=>this.emitEvent(L)),this.receiveBuffer=[],this.sendBuffer.forEach(L=>{this.notifyOutgoingListeners(L),this.packet(L)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(L=>L()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:$n.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(L){return this.flags.compress=L,this}get volatile(){return this.flags.volatile=!0,this}timeout(L){return this.flags.timeout=L,this}onAny(L){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(L),this}prependAny(L){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(L),this}offAny(L){if(!this._anyListeners)return this;if(L){const $=this._anyListeners;for(let ue=0;ue<$.length;ue++)if(L===$[ue])return $.splice(ue,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(L){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(L),this}prependAnyOutgoing(L){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(L),this}offAnyOutgoing(L){if(!this._anyOutgoingListeners)return this;if(L){const $=this._anyOutgoingListeners;for(let ue=0;ue<$.length;ue++)if(L===$[ue])return $.splice(ue,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(L){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const $=this._anyOutgoingListeners.slice();for(const ue of $)ue.apply(this,L.data)}}}function us(Qe){this.ms=(Qe=Qe||{}).min||100,this.max=Qe.max||1e4,this.factor=Qe.factor||2,this.jitter=Qe.jitter>0&&Qe.jitter<=1?Qe.jitter:0,this.attempts=0}us.prototype.duration=function(){var Qe=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var L=Math.random(),$=Math.floor(L*this.jitter*Qe);Qe=1&Math.floor(10*L)?Qe+$:Qe-$}return 0|Math.min(Qe,this.max)},us.prototype.reset=function(){this.attempts=0},us.prototype.setMin=function(Qe){this.ms=Qe},us.prototype.setMax=function(Qe){this.max=Qe},us.prototype.setJitter=function(Qe){this.jitter=Qe};class Fs extends K{constructor(L,$){var ue;super(),this.nsps={},this.subs=[],L&&"object"==typeof L&&($=L,L=void 0),($=$||{}).path=$.path||"/socket.io",this.opts=$,ot(this,$),this.reconnection(!1!==$.reconnection),this.reconnectionAttempts($.reconnectionAttempts||1/0),this.reconnectionDelay($.reconnectionDelay||1e3),this.reconnectionDelayMax($.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(ue=$.randomizationFactor)&&void 0!==ue?ue:.5),this.backoff=new us({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==$.timeout?2e4:$.timeout),this._readyState="closed",this.uri=L;const Ze=$.parser||l;this.encoder=new Ze.Encoder,this.decoder=new Ze.Decoder,this._autoConnect=!1!==$.autoConnect,this._autoConnect&&this.open()}reconnection(L){return arguments.length?(this._reconnection=!!L,L||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(L){return void 0===L?this._reconnectionAttempts:(this._reconnectionAttempts=L,this)}reconnectionDelay(L){var $;return void 0===L?this._reconnectionDelay:(this._reconnectionDelay=L,null===($=this.backoff)||void 0===$||$.setMin(L),this)}randomizationFactor(L){var $;return void 0===L?this._randomizationFactor:(this._randomizationFactor=L,null===($=this.backoff)||void 0===$||$.setJitter(L),this)}reconnectionDelayMax(L){var $;return void 0===L?this._reconnectionDelayMax:(this._reconnectionDelayMax=L,null===($=this.backoff)||void 0===$||$.setMax(L),this)}timeout(L){return arguments.length?(this._timeout=L,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(L){if(~this._readyState.indexOf("open"))return this;this.engine=new Ir(this.uri,this.opts);const $=this.engine,ue=this;this._readyState="opening",this.skipReconnect=!1;const Ze=Kn($,"open",function(){ue.onopen(),L&&L()}),pt=pn=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",pn),L?L(pn):this.maybeReconnectOnOpen()},en=Kn($,"error",pt);if(!1!==this._timeout){const Vn=this.setTimeoutFn(()=>{Ze(),pt(new Error("timeout")),$.close()},this._timeout);this.opts.autoUnref&&Vn.unref(),this.subs.push(()=>{this.clearTimeoutFn(Vn)})}return this.subs.push(Ze),this.subs.push(en),this}connect(L){return this.open(L)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const L=this.engine;this.subs.push(Kn(L,"ping",this.onping.bind(this)),Kn(L,"data",this.ondata.bind(this)),Kn(L,"error",this.onerror.bind(this)),Kn(L,"close",this.onclose.bind(this)),Kn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(L){try{this.decoder.add(L)}catch($){this.onclose("parse error",$)}}ondecoded(L){ve(()=>{this.emitReserved("packet",L)},this.setTimeoutFn)}onerror(L){this.emitReserved("error",L)}socket(L,$){let ue=this.nsps[L];return ue?this._autoConnect&&!ue.active&&ue.connect():(ue=new Sr(this,L,$),this.nsps[L]=ue),ue}_destroy(L){const $=Object.keys(this.nsps);for(const ue of $)if(this.nsps[ue].active)return;this._close()}_packet(L){const $=this.encoder.encode(L);for(let ue=0;ue<$.length;ue++)this.engine.write($[ue],L.options)}cleanup(){this.subs.forEach(L=>L()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(L,$){var ue;this.cleanup(),null===(ue=this.engine)||void 0===ue||ue.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",L,$),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const L=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const $=this.backoff.duration();this._reconnecting=!0;const ue=this.setTimeoutFn(()=>{L.skipReconnect||(this.emitReserved("reconnect_attempt",L.backoff.attempts),!L.skipReconnect&&L.open(Ze=>{Ze?(L._reconnecting=!1,L.reconnect(),this.emitReserved("reconnect_error",Ze)):L.onreconnect()}))},$);this.opts.autoUnref&&ue.unref(),this.subs.push(()=>{this.clearTimeoutFn(ue)})}}onreconnect(){const L=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",L)}}const hs={};function ir(Qe,L){"object"==typeof Qe&&(L=Qe,Qe=void 0);const $=function Zr(Qe,L="",$){let ue=Qe;$=$||typeof location<"u"&&location,null==Qe&&(Qe=$.protocol+"//"+$.host),"string"==typeof Qe&&("/"===Qe.charAt(0)&&(Qe="/"===Qe.charAt(1)?$.protocol+Qe:$.host+Qe),/^(https?|wss?):\/\//.test(Qe)||(Qe=typeof $<"u"?$.protocol+"//"+Qe:"https://"+Qe),ue=ii(Qe)),ue.port||(/^(http|ws)$/.test(ue.protocol)?ue.port="80":/^(http|ws)s$/.test(ue.protocol)&&(ue.port="443")),ue.path=ue.path||"/";const pt=-1!==ue.host.indexOf(":")?"["+ue.host+"]":ue.host;return ue.id=ue.protocol+"://"+pt+":"+ue.port+L,ue.href=ue.protocol+"://"+pt+($&&$.port===ue.port?"":":"+ue.port),ue}(Qe,(L=L||{}).path||"/socket.io"),ue=$.source,Ze=$.id;let Vn;return L.forceNew||L["force new connection"]||!1===L.multiplex||hs[Ze]&&$.path in hs[Ze].nsps?Vn=new Fs(ue,L):(hs[Ze]||(hs[Ze]=new Fs(ue,L)),Vn=hs[Ze]),$.query&&!L.query&&(L.query=$.queryKey),Vn.socket($.path,L)}Object.assign(ir,{Manager:Fs,Socket:Sr,io:ir,connect:ir});var Ks=S(4412),Mo=S(1774),As=S(5312),Us=S(4438),vs=S(33);let ho=(()=>{class Qe{constructor($){this.router=$,this.socket=null,this.connectionStatus=new Ks.t(null),this.reconnectAttempts=0,this.MAX_RETRIES=3,this.RECONNECT_DELAY=2e3,this.connectionStatus.subscribe(ue=>{console.log("Connection status changed:",ue)})}connect(){if(this.socket?.connected)return;const $=localStorage.getItem("jwt");$?(this.socket=ir(As.c.wsUrl,{auth:{token:$},transports:["websocket"],reconnection:!1}),this.setupSocketListeners()):this.connectionStatus.next(!1)}setupSocketListeners(){this.socket&&(this.socket.on("connect",()=>{this.connectionStatus.next(!0),this.reconnectAttempts=0,clearTimeout(this.reconnectTimer)}),this.socket.on("disconnect",$=>{this.connectionStatus.next(!1),"io server disconnect"===$||"io client disconnect"===$?this.handleForcedDisconnect():this.tryReconnect()}),this.socket.on("invalidSession",()=>{this.handleInvalidSession()}),this.socket.on("connect_error",()=>{this.connectionStatus.next(!1),this.tryReconnect()}))}tryReconnect(){this.reconnectAttempts<this.MAX_RETRIES?(this.reconnectAttempts++,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>this.connect(),this.RECONNECT_DELAY)):this.connectionStatus.next(!1)}handleForcedDisconnect(){this.disconnect(),this.connectionStatus.next(!1)}handleInvalidSession(){this.disconnect(),localStorage.removeItem("jwt"),this.router.navigate([Mo.S.HOME])}disconnect(){clearTimeout(this.reconnectTimer),this.socket&&(this.socket.disconnect(),this.socket=null),this.connectionStatus.next(!1)}isConnected(){return this.connectionStatus.asObservable()}ngOnDestroy(){this.disconnect()}static{this.\u0275fac=function(ue){return new(ue||Qe)(Us.KVO(vs.Ix))}}static{this.\u0275prov=Us.jDH({token:Qe,factory:Qe.\u0275fac,providedIn:"root"})}}return Qe})()},65:(Dt,qe,S)=>{"use strict";S.d(qe,{L:()=>X});var l=S(1471),h=S(518),W=S(4438);let X=(()=>{class oe{constructor(){this.ec=new h.ec("secp256k1"),this.clientKeyPair=this.ec.genKeyPair(),this.storageKey=this.getOrCreateStorageKey()}getOrCreateStorageKey(){let G=sessionStorage.getItem("encryption_storage_key");return G||(G=l.lib.WordArray.random(32).toString(),sessionStorage.setItem("encryption_storage_key",G)),G}getClientPublicKey(){return this.clientKeyPair.getPublic("hex")}packFnord(G,k,P,q){return`${G}:${k}:${P}:${q}`}unpackFnord(G){const[k,P,q,ne]=G.split(":");return{iv:k,ephemPublicKey:P,ciphertext:q,mac:ne}}encrypt(G,k){const P=this.ec.keyFromPublic(k,"hex"),q=this.ec.genKeyPair(),ne=q.derive(P.getPublic()),ce=l.SHA256(l.enc.Hex.parse(ne.toString("hex"))),he=l.lib.WordArray.random(16),we=l.AES.encrypt(G,ce,{iv:he,mode:l.mode.CBC,padding:l.pad.Pkcs7}).ciphertext.toString(l.enc.Hex),de=q.getPublic("hex"),Re=he.toString(l.enc.Hex)+de+we,ze=l.HmacSHA256(Re,ce).toString(l.enc.Hex);return{fnord:this.packFnord(he.toString(l.enc.Hex),de,we,ze)}}encryptForStorage(G){const k=JSON.stringify(G);return l.AES.encrypt(k,this.storageKey).toString()}decryptFromStorage(G){try{const k=l.AES.decrypt(G,this.storageKey);return JSON.parse(k.toString(l.enc.Utf8))}catch(k){throw console.error("Decryption error:",k),new Error("Failed to decrypt storage data")}}decrypt(G){const{iv:k,ephemPublicKey:P,ciphertext:q,mac:ne}=this.unpackFnord(G.fnord),ce=this.ec.keyFromPublic(P,"hex"),he=this.clientKeyPair.derive(ce.getPublic()),Ae=l.SHA256(l.enc.Hex.parse(he.toString("hex")));if(l.HmacSHA256(k+P+q,Ae).toString(l.enc.Hex)!==ne)throw new Error("Invalid MAC");const Re=l.enc.Hex.parse(k),ze=l.enc.Hex.parse(q),Ge=l.AES.decrypt(l.lib.CipherParams.create({ciphertext:ze}),Ae,{iv:Re,mode:l.mode.CBC,padding:l.pad.Pkcs7});return JSON.parse(Ge.toString(l.enc.Utf8))}static{this.\u0275fac=function(k){return new(k||oe)}}static{this.\u0275prov=W.jDH({token:oe,factory:oe.\u0275fac,providedIn:"root"})}}return oe})()},7120:(Dt,qe,S)=>{"use strict";S.d(qe,{l:()=>M});var l=S(4438);let M=(()=>{class h{constructor(){this.conversations=(0,l.vPA)([]),this.chatBotRoles=(0,l.vPA)([]),this.needsFetch=(0,l.vPA)("true"===sessionStorage.getItem("newData")),this.conversationCount=(0,l.EWP)(()=>this.conversations().length)}setNeedsFetch(W){sessionStorage.setItem("newData",W.toString()),this.needsFetch.set(W)}getNeedsFetch(){return this.needsFetch}updateConversations(W){this.conversations.set(W)}addConversation(W){this.conversations.update(X=>[W,...X])}updateChatBotRoles(W){this.chatBotRoles.set(W)}getConversations(){return this.conversations}getChatBotRoles(){return this.chatBotRoles}static{this.\u0275fac=function(X){return new(X||h)}}static{this.\u0275prov=l.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},8800:(Dt,qe,S)=>{"use strict";S.d(qe,{Yf:()=>Vt,uR:()=>l.u,vc:()=>G,Cs:()=>h.C,rP:()=>K,LC:()=>M.L,ni:()=>z,vh:()=>H,o2:()=>Pt,ov:()=>vt,WG:()=>ne,gZ:()=>te,aT:()=>he,Fs:()=>ce,DL:()=>we});var l=S(1339),M=S(65),h=S(7036),ge=S(5312),W=S(1946),X=S(4438),oe=S(1626);let H=(()=>{class st{constructor($e){this.http=$e,this.baseUrl=ge.c.apiUrl}createChatbotRole($e){return this.http.post(this.baseUrl+W.F.CHATBOT_ROLES,$e)}getChatBotRoles(){return this.http.post(this.baseUrl+W.F.ALL,{})}chat($e){return this.http.post(this.baseUrl+W.F.CHAT,$e)}getConversations(){return this.http.post(this.baseUrl+W.F.CONVERSATIONS,{})}getConversation($e){return this.http.post(this.baseUrl+W.F.CONVERSATIONS+"/"+$e,{})}deleteConversation($e){return this.http.delete(this.baseUrl+W.F.CONVERSATIONS+"/"+$e)}static{this.\u0275fac=function(Xe){return new(Xe||st)(X.KVO(oe.Qq))}}static{this.\u0275prov=X.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})(),G=(()=>{class st{constructor(){this.http=(0,X.WQX)(oe.Qq)}createChatbotRole($e){return this.http.post(ge.c.apiUrl+W.F.CHATBOT_ROLES,$e)}static{this.\u0275fac=function(Xe){return new(Xe||st)}}static{this.\u0275prov=X.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})();var k=S(8810),P=S(9437);let q=(()=>{class st{getToken(){return localStorage.getItem("jwt")}static{this.\u0275fac=function(Xe){return new(Xe||st)}}static{this.\u0275prov=X.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})(),ne=(()=>{class st{constructor($e,Xe){this.http=$e,this.jwtService=Xe}createCheckoutSession($e){const Xe=this.jwtService.getToken();if(!Xe)return(0,k.$)(()=>new Error("No authentication token found"));const kt=new oe.Lr({Authorization:`Bearer ${Xe}`});return this.http.post(ge.c.apiUrl+W.F.CREATE_CHECKOUT,{planType:"month"===$e?"MONTHLY":"ANNUAL"},{headers:kt}).pipe((0,P.W)(cn=>(console.error("Error creating checkout session:",cn),(0,k.$)(()=>new Error("An error occurred while processing your request. Please try again.")))))}static{this.\u0275fac=function(Xe){return new(Xe||st)(X.KVO(oe.Qq),X.KVO(q))}}static{this.\u0275prov=X.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})(),ce=(()=>{class st{constructor(){this.THEME_KEY="preferred-theme",this.isDarkTheme=(0,X.vPA)(this.getInitialTheme()),(0,X.QZP)(()=>{this.updateDocumentTheme(this.isDarkTheme())})}getInitialTheme(){const $e=localStorage.getItem(this.THEME_KEY);return $e?"dark"===$e:window.matchMedia("(prefers-color-scheme: dark)").matches}updateDocumentTheme($e){document.body.classList.toggle("dark-theme",$e),document.documentElement.style.colorScheme=$e?"dark":"light",document.documentElement.setAttribute("data-bs-theme",$e?"dark":"light");const Xe=document.documentElement;$e?(Xe.style.setProperty("--bs-body-color","var(--dark-text)"),Xe.style.setProperty("--bs-body-bg","var(--dark-background)"),Xe.style.setProperty("--bs-secondary-color","var(--dark-text-secondary)")):(Xe.style.setProperty("--bs-body-color","var(--light-text)"),Xe.style.setProperty("--bs-body-bg","var(--light-background)"),Xe.style.setProperty("--bs-secondary-color","var(--light-text-secondary)"))}toggleTheme(){this.isDarkTheme.update($e=>{const Xe=!$e;return localStorage.setItem(this.THEME_KEY,Xe?"dark":"light"),Xe})}initializeTheme(){this.updateDocumentTheme(this.isDarkTheme())}static{this.\u0275fac=function(Xe){return new(Xe||st)}}static{this.\u0275prov=X.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})(),he=(()=>{class st{constructor(){this.http=(0,X.WQX)(oe.Qq),this.jwtService=(0,X.WQX)(q),this.baseUrl=ge.c.apiUrl}getSubscriptionStatus(){return this.http.get(`${this.baseUrl}${W.F.SUBSCRIPTION_STATUS}`).pipe((0,P.W)(this.handleError))}getUserInvoices(){return this.http.get(`${this.baseUrl}${W.F.GET_INVOICES}`).pipe((0,P.W)(this.handleError))}cancelSubscription(){return this.http.post(`${this.baseUrl}${W.F.CANCEL_SUBSCRIPTION}`,{}).pipe((0,P.W)(this.handleError))}handleError($e){return console.error("An error occurred:",$e),(0,k.$)(()=>new Error($e.error?.message||"An unexpected error occurred"))}static{this.\u0275fac=function(Xe){return new(Xe||st)}}static{this.\u0275prov=X.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})();var Ae=S(6354);let we=(()=>{class st{constructor($e){this.http=$e}createUrl($e,Xe={}){let kt=ge.c.apiUrl+$e;return Object.entries(Xe).forEach(([cn,rn])=>{kt=kt.replace(`:${cn}`,rn.toString())}),kt}getFullName($e){const Xe=this.createUrl(W.F.USER_NAME,{id:$e});return this.http.get(Xe).pipe((0,Ae.T)(kt=>kt.fullName),(0,P.W)(this.handleError))}getUserInfo($e){const Xe=this.createUrl(W.F.USER_NAME,{id:$e});return this.http.get(Xe)}handleError($e){let Xe="An error occurred";if($e.error instanceof ErrorEvent)Xe=`Error: ${$e.error.message}`;else switch($e.status){case 404:Xe="User not found";break;case 401:Xe="Unauthorized access";break;default:Xe=`Error Code: ${$e.status}\nMessage: ${$e.message}`}return console.error(Xe),(0,k.$)(()=>new Error(Xe))}updateBirthDate($e){return this.http.patch(ge.c.apiUrl+W.F.UPDATE_BIRTHDATE,{birthdate:$e})}static{this.\u0275fac=function(Xe){return new(Xe||st)(X.KVO(oe.Qq))}}static{this.\u0275prov=X.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})();var de,Re=new Uint8Array(16);function ze(){if(!de&&!(de=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return de(Re)}const Ge=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var yt=[],_t=0;_t<256;++_t)yt.push((_t+256).toString(16).substr(1));const ae=function ut(st){var Ft=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,$e=(yt[st[Ft+0]]+yt[st[Ft+1]]+yt[st[Ft+2]]+yt[st[Ft+3]]+"-"+yt[st[Ft+4]]+yt[st[Ft+5]]+"-"+yt[st[Ft+6]]+yt[st[Ft+7]]+"-"+yt[st[Ft+8]]+yt[st[Ft+9]]+"-"+yt[st[Ft+10]]+yt[st[Ft+11]]+yt[st[Ft+12]]+yt[st[Ft+13]]+yt[st[Ft+14]]+yt[st[Ft+15]]).toLowerCase();if(!function Oe(st){return"string"==typeof st&&Ge.test(st)}($e))throw TypeError("Stringified UUID is invalid");return $e},T=function x(st,Ft,$e){var Xe=(st=st||{}).random||(st.rng||ze)();if(Xe[6]=15&Xe[6]|64,Xe[8]=63&Xe[8]|128,Ft){$e=$e||0;for(var kt=0;kt<16;++kt)Ft[$e+kt]=Xe[kt];return Ft}return ae(Xe)};let K=(()=>{class st{generateConversationId(){return T()}static{this.\u0275fac=function(Xe){return new(Xe||st)}}static{this.\u0275prov=X.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})(),te=(()=>{class st{constructor(){this.showBadge=(0,X.vPA)(!0)}hideBadge(){this.showBadge.set(!1);const $e=document.querySelector(".grecaptcha-badge");$e&&$e.remove()}showBadgeAgain(){this.showBadge.set(!0)}static{this.\u0275fac=function(Xe){return new(Xe||st)}}static{this.\u0275prov=X.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})();var ve=S(467),Ce=S(6648),Be=S(33),Ne=S(5794);let z=(()=>{class st{constructor($e,Xe,kt,cn,rn,gn){this.router=$e,this.http=Xe,this.toastr=kt,this.authService=cn,this.recaptchaManager=rn,this.clientSocketAuthService=gn,this.isScriptLoaded=(0,X.vPA)(!1),this.loading=(0,X.vPA)(!1)}ensureInitialized(){return new Promise($e=>{if(window.google)return void $e();const Xe=setInterval(()=>{window.google&&(clearInterval(Xe),$e())},100)})}loadGoogleScript(){if(!this.isScriptLoaded()){const $e=document.createElement("script");$e.src="https://accounts.google.com/gsi/client",$e.async=!0,$e.defer=!0,$e.onload=()=>{this.isScriptLoaded.set(!0),this.initializeGoogleAuth()},$e.onerror=()=>{console.error("Failed to load Google Sign-In script"),this.isScriptLoaded.set(!1)},document.head.appendChild($e)}return(0,Ce.H)([this.isScriptLoaded()])}renderGoogleButton($e,Xe=!0){const kt=setInterval(()=>{const cn=document.getElementById($e);if(cn&&window.google?.accounts){clearInterval(kt);try{window.google.accounts.id.renderButton(cn,{theme:"outline",size:"large",width:240,locale:"en",disabled:!Xe})}catch(rn){console.error("Error rendering Google button:",rn)}}},100);setTimeout(()=>clearInterval(kt),1e4)}initializeGoogleAuth(){try{window.google.accounts.id.initialize({client_id:ge.c.googleClientId,callback:this.handleCredentialResponse.bind(this),auto_select:!1,cancel_on_tap_outside:!0})}catch($e){console.error("Error initializing Google Auth:",$e)}}handleCredentialResponse($e){var Xe=this;return(0,ve.A)(function*(){if(!$e.credential)return;const kt=Xe.decodeJwtToken($e.credential);if(!kt)return;const cn={email:kt.email,firstName:kt.given_name,lastName:kt.family_name,photoUrl:kt.picture,provider:"GOOGLE",idToken:$e.credential};yield Xe.authenticateWithBackend(cn)})()}authenticateWithBackend($e){var kt,Xe=this;this.loading.set(!0),this.http.post(ge.c.apiUrl+W.F.GOOGLE_AUTH,{googleUser:$e}).subscribe({next:(kt=(0,ve.A)(function*(cn){cn?.accessToken?(localStorage.setItem("jwt",cn.accessToken),(yield Xe.authService.updateAuthState())?(Xe.clientSocketAuthService.connect(),Xe.recaptchaManager.hideBadge(),Xe.router.navigate([W.S.DASH]).then(()=>Xe.toastr.success("Successfully logged in with Google")).catch(gn=>{console.error("Navigation error:",gn),Xe.toastr.error("Failed to navigate to dashboard")})):Xe.toastr.error("Authentication failed")):Xe.toastr.error("Invalid server response")}),function(rn){return kt.apply(this,arguments)}),error:kt=>{console.error("Google authentication error:",kt),this.toastr.error(kt.error?.message||"Failed to authenticate with Google"),localStorage.removeItem("jwt"),this.authService.updateAuthState()},complete:()=>{this.loading.set(!1)}})}decodeJwtToken($e){try{const kt=$e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),cn=decodeURIComponent(atob(kt).split("").map(rn=>"%"+("00"+rn.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(cn)}catch(Xe){return console.error("Error decoding token:",Xe),null}}handleCustomGoogleLogin(){var $e=this;return(0,ve.A)(function*(){try{yield $e.ensureInitialized(),window.google?.accounts.id.prompt(Xe=>{Xe.isNotDisplayed()?console.error("Google sign-in prompt not displayed:",Xe.getNotDisplayedReason()):Xe.isSkippedMoment()&&console.log("Google sign-in prompt skipped:",Xe.getSkippedReason())})}catch(Xe){console.error("Google authentication initialization failed:",Xe)}})()}isLoading(){return this.loading()}static{this.\u0275fac=function(Xe){return new(Xe||st)(X.KVO(Be.Ix),X.KVO(oe.Qq),X.KVO(Ne.tw),X.KVO(l.u),X.KVO(te),X.KVO(h.C))}}static{this.\u0275prov=X.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})();var Fe=S(4843);let Pt=(()=>{class st{constructor($e){this.http=$e,this.keyPromise=null,this.currentKey=null}ensureKey(){var $e=this;return(0,ve.A)(function*(){return $e.currentKey?$e.currentKey:($e.keyPromise||($e.keyPromise=(0,Fe._)($e.http.get(ge.c.apiUrl+W.F.PUBLIC_KEY)).then(Xe=>($e.currentKey=Xe.publicKey,Xe.publicKey)).finally(()=>{$e.keyPromise=null})),$e.keyPromise)})()}clearKey(){this.currentKey=null,this.keyPromise=null}static{this.\u0275fac=function(Xe){return new(Xe||st)(X.KVO(oe.Qq))}}static{this.\u0275prov=X.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})();var ot=S(4909);let Vt=(()=>{class st{constructor($e){this.translate=$e,this.LANGUAGE_KEY="preferred-language",this.currentLanguage=(0,X.vPA)(this.getStoredLanguage()),this.initializeLanguage()}initializeLanguage(){const $e=this.getStoredLanguage();this.translate.setDefaultLang("en"),this.translate.use($e)}getStoredLanguage(){return localStorage.getItem(this.LANGUAGE_KEY)||this.getBrowserLanguage()}getBrowserLanguage(){const $e=navigator.language.split("-")[0];return["en","es"].includes($e)?$e:"en"}updateLanguage($e){localStorage.setItem(this.LANGUAGE_KEY,$e),this.currentLanguage.set($e),this.translate.use($e)}static{this.\u0275fac=function(Xe){return new(Xe||st)(X.KVO(ot.c$))}}static{this.\u0275prov=X.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})(),vt=(()=>{class st{constructor($e){this.translate=$e}initializeLanguage(){const $e=localStorage.getItem("preferred-language"),Xe=navigator.language.split("-")[0],kt=$e||(["en","es"].includes(Xe)?Xe:"en");this.translate.setDefaultLang("en"),this.translate.use(kt),$e||localStorage.setItem("preferred-language",kt)}static{this.\u0275fac=function(Xe){return new(Xe||st)(X.KVO(ot.c$))}}static{this.\u0275prov=X.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})()},9373:(Dt,qe,S)=>{"use strict";S.d(qe,{S:()=>l});var l=function(M){return M.HOME="",M.LOGIN="login",M.CONFIRM="confirm-email",M.DASH="dashboard",M.CREATE="create",M.CONVERSATIONS="conversations",M.ABOUT="about",M.CHAT="chat",M.UPGRADE="upgrade",M.UPLOAD="upload",M.ERROR="error",M.KWH="x",M.VR_GALLERY="vrGallery",M.SUBMIT_FILM="submit-film",M.SUBMITTED_FILMS="submitted",M.FILM_SUBMISSION="submission",M.FILMMAKER_PROFILE="film-profile",M.ARTE="arte",M.GALLERY="glry",M.VR="vr",M.ARTISTAS="artistas",M.TALLERES="talleres",M.CINE="cine",M.VIRTUAL="virtual",M}(l||{})},1946:(Dt,qe,S)=>{"use strict";S.d(qe,{F:()=>M,S:()=>l.S});var l=S(9373),M=function(h){return h.LOGIN="/auth/login",h.REGISTER="/auth/register",h.CONFIRM="/auth/confirm",h.FORGOT_PASSWORD="/auth/forgot-password",h.RESET_PASSWORD="/auth/reset-password",h.GOOGLE_AUTH="/auth/google",h.UPDATE_BIRTHDATE="/auth/update-birthdate",h.USER_NAME="/users/:id/full-name",h.ACCOUNT_CONFIG="/users/language",h.UPLOAD_DOCUMENT="/documents/upload",h.GET_DOCUMENTS="/documents",h.CHATBOT_ROLES="/chatbot-roles",h.ALL="/chatbot-roles/all",h.CHAT="/llm-groq/chat",h.CONVERSATIONS="/llm-groq/conversations",h.CREATE_CHECKOUT="/stripe/create-checkout-session",h.SUBSCRIPTION_STATUS="/stripe/subscription-status",h.CANCEL_SUBSCRIPTION="/stripe/cancel-subscription",h.STRIPE_WEBHOOKS="/stripe/webhook",h.GET_INVOICES="/stripe/invoices",h.PUBLIC_KEY="/public-key",h.GALLERIES="GALLERIES",h.MY_ARTIST_PROFILE="/artist-profiles/my-profile",h.FILMS="/films",h.FILMMAKERS="/filmmakers",h.FILMMAKERS_ME="/filmmakers/me",h.SUBMISSIONS="/submissions",h}(M||{})},1774:(Dt,qe,S)=>{"use strict";S.d(qe,{S:()=>l.S});var l=S(9373)},6101:(Dt,qe,S)=>{"use strict";function l(k){return P=>{if(!P.value)return null;const q="upper"===k?P.value.toUpperCase():P.value.toLowerCase();return P.value!==q&&P.setValue(q,{emitEvent:!1}),null}}function M(){return k=>{if(!k.value)return null;const P=k.value.toLowerCase();return k.value!==P&&k.setValue(P,{emitEvent:!1}),/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(P)?null:{email:!0}}}S.d(qe,{CN:()=>H,X1:()=>l,R7:()=>M,R3:()=>G});var h=S(467),ge=S(4438),W=S(8800),X=S(7120),oe=S(4843);class H{constructor(){this.groqChatService=(0,ge.WQX)(W.vh),this.chatStateService=(0,ge.WQX)(X.l)}fetchChatData(){var P=this;return(0,h.A)(function*(){const[q,ne]=yield Promise.all([(0,oe._)(P.groqChatService.getChatBotRoles()),(0,oe._)(P.groqChatService.getConversations())]),ce=P.transformRoles(q),he=Array.isArray(ne)?ne:ne.data;return P.chatStateService.updateChatBotRoles(ce),P.chatStateService.updateConversations(he),P.chatStateService.setNeedsFetch(!1),{roles:ce,conversations:he}})()}transformRoles(P){return(Array.isArray(P)?P:P.data)?.map(ne=>({value:ne.id,label:ne.name,avatarUrl:ne.avatarPic,fullRole:ne}))||[]}}function G(k){const P=[...k];for(let q=P.length-1;q>0;q--){const ne=Math.floor(Math.random()*(q+1));[P[q],P[ne]]=[P[ne],P[q]]}return P}},5312:(Dt,qe,S)=>{"use strict";S.d(qe,{c:()=>l});const l={apiUrl:"https://brains.zenia.cc",wsUrl:"https://brains.zenia.cc",jinaApiUrl:"https://api.jina.ai/v1/embeddings",jinaModel:"jina-embeddings-v3",googleClientId:"384183585746-omqh7fmidk92do1t3lbfjd1ka7hkhl17.apps.googleusercontent.com",appVersion:"v0.0.2",production:!0,recaptchaSiteKey:"6LcG7yYrAAAAALuRjSToUOkN2N3PRS2hl5prVVwu"}},8802:(Dt,qe,S)=>{"use strict";var l=S(345),M=S(4438),h=S(33),ge=S(5312),W=S(6852),X=S(9373),oe=S(8141),H=S(8800);let G=(()=>{class De{constructor(F,re){this.authService=F,this.router=re}canActivate(F,re){return this.authService.isAuthenticated().pipe((0,oe.M)(Te=>{Te||this.router.navigate([X.S.HOME],{queryParams:{returnUrl:re.url}})}))}static{this.\u0275fac=function(re){return new(re||De)(M.KVO(H.uR),M.KVO(h.Ix))}}static{this.\u0275prov=M.jDH({token:De,factory:De.\u0275fac,providedIn:"root"})}}return De})();var k=S(467);let P=(()=>{class De{constructor(F,re){this.keyManager=F,this.router=re}canActivate(){var F=this;return(0,k.A)(function*(){try{return yield F.keyManager.ensureKey(),!0}catch(re){return console.error("Failed to ensure key:",re),F.router.navigate([X.S.ERROR],{queryParams:{message:"Failed to establish secure connection"}}),!1}})()}static{this.\u0275fac=function(re){return new(re||De)(M.KVO(H.o2),M.KVO(h.Ix))}}static{this.\u0275prov=M.jDH({token:De,factory:De.\u0275fac,providedIn:"root"})}}return De})();var q=S(1339),ne=S(4680),ce=S(4843);const Ae=[{path:X.S.HOME,loadComponent:()=>Promise.all([S.e(76),S.e(351)]).then(S.bind(S,5347)),data:{title:"Home"}},{path:X.S.ARTISTAS,loadComponent:()=>Promise.all([S.e(76),S.e(351)]).then(S.bind(S,5347)),data:{title:"Artistas"}},{path:X.S.TALLERES,loadComponent:()=>Promise.all([S.e(76),S.e(351)]).then(S.bind(S,5347)),data:{title:"Talleres"}},{path:X.S.CINE,loadComponent:()=>Promise.all([S.e(76),S.e(351)]).then(S.bind(S,5347)),data:{title:"Cine"}},{path:X.S.VIRTUAL,loadComponent:()=>Promise.all([S.e(76),S.e(351)]).then(S.bind(S,5347)),data:{title:"Virtual"}},{path:"",redirectTo:X.S.HOME,pathMatch:"full"},{path:"",component:W.vl,canActivate:[P],children:[{path:X.S.LOGIN,loadComponent:()=>S.e(47).then(S.bind(S,5047)),data:{title:"Login"}},{path:X.S.CONFIRM,loadComponent:()=>Promise.all([S.e(76),S.e(538)]).then(S.bind(S,1538)),data:{title:"Confirm Email"}}]},{path:"arte",canActivate:[P],children:[{path:":artistName",loadComponent:()=>Promise.all([S.e(76),S.e(538)]).then(S.bind(S,1538)),data:{title:"arte"}},{path:":artistName/"+X.S.GALLERY,loadComponent:()=>Promise.all([S.e(76),S.e(538)]).then(S.bind(S,1538)),data:{title:"glry"}},{path:":artistName/"+X.S.GALLERY+"/:seriesId",loadComponent:()=>Promise.all([S.e(76),S.e(538)]).then(S.bind(S,1538)),data:{title:"glry"}},{path:":artistName/"+X.S.GALLERY+"/:seriesId/:artworkId",loadComponent:()=>Promise.all([S.e(76),S.e(538)]).then(S.bind(S,1538)),data:{title:"glry"}},{path:":artistName/"+X.S.VR,loadComponent:()=>Promise.all([S.e(76),S.e(538)]).then(S.bind(S,1538)),data:{title:"vr"}},{path:":artistName/"+X.S.VR+"/:configId/:hash",loadComponent:()=>Promise.all([S.e(76),S.e(538)]).then(S.bind(S,1538)),data:{title:"vr"}},{path:":artistName/"+X.S.VR+"/:configId",loadComponent:()=>Promise.all([S.e(76),S.e(538)]).then(S.bind(S,1538)),data:{title:"vr"}}]},{path:"",component:W.v1,canActivate:[G,P],children:[{path:X.S.DASH,loadComponent:()=>S.e(273).then(S.bind(S,5273)),data:{title:"Dashboard"}},{path:X.S.KWH,children:[{path:"new/profileConfig",loadComponent:()=>Promise.all([S.e(876),S.e(337)]).then(S.bind(S,8337)),data:{step:0,isNew:!0}},{path:"new/seriesConfig",loadComponent:()=>Promise.all([S.e(876),S.e(337)]).then(S.bind(S,8337)),data:{step:1,isNew:!0}},{path:"new/artworksConfig",loadComponent:()=>Promise.all([S.e(876),S.e(337)]).then(S.bind(S,8337)),data:{step:2,isNew:!0}},{path:"new/galleryConfig",loadComponent:()=>Promise.all([S.e(876),S.e(337)]).then(S.bind(S,8337)),data:{step:3,isNew:!0}},{path:"new/submit",loadComponent:()=>Promise.all([S.e(876),S.e(337)]).then(S.bind(S,8337)),data:{step:4,isNew:!0}},{path:":artistName/profileConfig",loadComponent:()=>Promise.all([S.e(876),S.e(337)]).then(S.bind(S,8337)),data:{step:0,isNew:!1}},{path:":artistName/seriesConfig",loadComponent:()=>Promise.all([S.e(876),S.e(337)]).then(S.bind(S,8337)),data:{step:1,isNew:!1}},{path:":artistName/artworksConfig",loadComponent:()=>Promise.all([S.e(876),S.e(337)]).then(S.bind(S,8337)),data:{step:2,isNew:!1}},{path:":artistName/galleryConfig",loadComponent:()=>Promise.all([S.e(876),S.e(337)]).then(S.bind(S,8337)),data:{step:3,isNew:!1}},{path:":artistName/submit",loadComponent:()=>Promise.all([S.e(876),S.e(337)]).then(S.bind(S,8337)),data:{step:4,isNew:!1}},{path:":artistName/vrGallery",loadComponent:()=>Promise.all([S.e(876),S.e(76),S.e(206)]).then(S.bind(S,2206)),data:{title:"VR Gallery Management"}},{path:":artistName/vrGallery/preview/:configId/:hash",loadComponent:()=>Promise.all([S.e(76),S.e(553)]).then(S.bind(S,4553)),data:{title:"VR Gallery Preview"}},{path:"",redirectTo:X.S.DASH,pathMatch:"full"}]},{path:"",component:W.aK,children:[{path:X.S.SUBMIT_FILM,loadComponent:()=>Promise.all([S.e(76),S.e(115)]).then(S.bind(S,115)),data:{title:"submit"}},{path:`${X.S.FILM_SUBMISSION}/:slug`,loadComponent:()=>Promise.all([S.e(76),S.e(94)]).then(S.bind(S,4094)),canActivate:[(()=>{class De{constructor(){this.authService=(0,M.WQX)(q.u),this.filmSubmissionService=(0,M.WQX)(ne.C),this.router=(0,M.WQX)(h.Ix)}canActivate(F,re){var Te=this;return(0,k.A)(function*(){try{const et=F.paramMap.get("slug");if(!et)return Te.router.navigate([X.S.ERROR]),!1;const mt=Te.authService.getUserId();if(!mt)return Te.router.navigate([X.S.HOME],{queryParams:{returnUrl:re.url}}),!1;if(1===mt)return!0;try{return!!((yield(0,ce._)(Te.filmSubmissionService.getBySlug(et))).film.filmMakers||[]).some(A=>A.user?.id===mt||A.userId===mt.toString())||(Te.router.navigate([X.S.ERROR]),!1)}catch(Mt){return console.error("Error checking film submission access:",Mt),Te.router.navigate([X.S.ERROR]),!1}}catch(et){return console.error("Error in FilmSubmissionGuard:",et),Te.router.navigate([X.S.ERROR]),!1}})()}static{this.\u0275fac=function(re){return new(re||De)}}static{this.\u0275prov=M.jDH({token:De,factory:De.\u0275fac,providedIn:"root"})}}return De})()],data:{title:"Film Submission"}},{path:X.S.SUBMITTED_FILMS,loadComponent:()=>Promise.all([S.e(76),S.e(976)]).then(S.bind(S,7976)),data:{title:"my films"}}]},{path:`${X.S.CHAT}:roleId`,loadComponent:()=>S.e(78).then(S.bind(S,9078)),data:{title:"Chat"}},{path:`${X.S.CHAT}:roleId:id`,loadComponent:()=>S.e(78).then(S.bind(S,9078)),data:{title:"Chat"}},{path:X.S.CREATE,loadComponent:()=>S.e(464).then(S.bind(S,464)),data:{title:"Create Chatbot"}},{path:X.S.UPGRADE,loadComponent:()=>S.e(579).then(S.bind(S,5579)),data:{title:"Create Chatbot"}},{path:X.S.CONVERSATIONS,loadComponent:()=>S.e(338).then(S.bind(S,4338)),data:{title:"Create Chatbot"}},...ge.c.production?[]:[{path:X.S.UPLOAD,loadComponent:()=>Promise.resolve().then(S.bind(S,2308)),data:{title:"Upload Documents"}}]]},{path:X.S.ERROR,loadComponent:()=>S.e(939).then(S.bind(S,8939)),data:{title:"Error"}},{path:"**",redirectTo:"/"}];var we=S(1626),de=S(9969);function ze(De){return new M.wOt(3e3,!1)}function Xn(De){switch(De.length){case 0:return new de.sf;case 1:return De[0];default:return new de.ui(De)}}function Zn(De,I,F=new Map,re=new Map){const Te=[],et=[];let mt=-1,Mt=null;if(I.forEach(Kt=>{const Yt=Kt.get("offset"),Nn=Yt==mt,A=Nn&&Mt||new Map;Kt.forEach((Se,ee)=>{let fe=ee,it=Se;if("offset"!==ee)switch(fe=De.normalizePropertyName(fe,Te),it){case de.FX:it=F.get(ee);break;case de.kp:it=re.get(ee);break;default:it=De.normalizeStyleValue(ee,fe,it,Te)}A.set(fe,it)}),Nn||et.push(A),Mt=A,mt=Yt}),Te.length)throw function $e(De){return new M.wOt(3502,!1)}();return et}function Hr(De,I,F,re){switch(I){case"start":De.onStart(()=>re(F&&Hn(F,"start",De)));break;case"done":De.onDone(()=>re(F&&Hn(F,"done",De)));break;case"destroy":De.onDestroy(()=>re(F&&Hn(F,"destroy",De)))}}function Hn(De,I,F){const et=Dn(De.element,De.triggerName,De.fromState,De.toState,I||De.phaseName,F.totalTime??De.totalTime,!!F.disabled),mt=De._data;return null!=mt&&(et._data=mt),et}function Dn(De,I,F,re,Te="",et=0,mt){return{element:De,triggerName:I,fromState:F,toState:re,phaseName:Te,totalTime:et,disabled:!!mt}}function Un(De,I,F){let re=De.get(I);return re||De.set(I,re=F),re}function Pi(De){const I=De.indexOf(":");return[De.substring(1,I),De.slice(I+1)]}const Qi=typeof document>"u"?null:document.documentElement;function Rr(De){const I=De.parentNode||De.host||null;return I===Qi?null:I}let yi=null,uo=!1;function Si(De,I){for(;I;){if(I===De)return!0;I=Rr(I)}return!1}function Ir(De,I,F){if(F)return Array.from(De.querySelectorAll(I));const re=De.querySelector(I);return re?[re]:[]}let gr=(()=>{class De{validateStyleProperty(F){return function Yn(De){yi||(yi=function mr(){return typeof document<"u"?document.body:null}()||{},uo=!!yi.style&&"WebkitAppearance"in yi.style);let I=!0;return yi.style&&!function ii(De){return"ebkit"==De.substring(1,6)}(De)&&(I=De in yi.style,!I&&uo&&(I="Webkit"+De.charAt(0).toUpperCase()+De.slice(1)in yi.style)),I}(F)}matchesElement(F,re){return!1}containsElement(F,re){return Si(F,re)}getParentElement(F){return Rr(F)}query(F,re,Te){return Ir(F,re,Te)}computeStyle(F,re,Te){return Te||""}animate(F,re,Te,et,mt,Mt=[],Kt){return new de.sf(Te,et)}static{this.\u0275fac=function(re){return new(re||De)}}static{this.\u0275prov=M.jDH({token:De,factory:De.\u0275fac})}}return De})();class Zr{static{this.NOOP=new gr}}class ls{}const Rt=1e3,St="ng-enter",fn="ng-leave",vn="ng-trigger",kn=".ng-trigger",zi="ng-animating",oi=".ng-animating";function gi(De){if("number"==typeof De)return De;const I=De.match(/^(-?[\.\d]+)(m?s)/);return!I||I.length<2?0:Nr(parseFloat(I[1]),I[2])}function Nr(De,I){return"s"===I?De*Rt:De}function $n(De,I,F){return De.hasOwnProperty("duration")?De:function hr(De,I,F){let Te,et=0,mt="";if("string"==typeof De){const Mt=De.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Mt)return I.push(ze()),{duration:0,delay:0,easing:""};Te=Nr(parseFloat(Mt[1]),Mt[2]);const Kt=Mt[3];null!=Kt&&(et=Nr(parseFloat(Kt),Mt[4]));const Yt=Mt[5];Yt&&(mt=Yt)}else Te=De;if(!F){let Mt=!1,Kt=I.length;Te<0&&(I.push(function Ge(){return new M.wOt(3100,!1)}()),Mt=!0),et<0&&(I.push(function Oe(){return new M.wOt(3101,!1)}()),Mt=!0),Mt&&I.splice(Kt,0,ze())}return{duration:Te,delay:et,easing:mt}}(De,I,F)}function zn(De,I,F){I.forEach((re,Te)=>{const et=Ks(Te);F&&!F.has(Te)&&F.set(Te,De.style[et]),De.style[et]=re})}function Kn(De,I){I.forEach((F,re)=>{const Te=Ks(re);De.style[Te]=""})}function xi(De){return Array.isArray(De)?1==De.length?De[0]:(0,de.K2)(De):De}const us=new RegExp("{{\\s*(.+?)\\s*}}","g");function Fs(De){let I=[];if("string"==typeof De){let F;for(;F=us.exec(De);)I.push(F[1]);us.lastIndex=0}return I}function hs(De,I,F){const re=`${De}`,Te=re.replace(us,(et,mt)=>{let Mt=I[mt];return null==Mt&&(F.push(function yt(De){return new M.wOt(3003,!1)}()),Mt=""),Mt.toString()});return Te==re?De:Te}const ir=/-+([a-z0-9])/g;function Ks(De){return De.replace(ir,(...I)=>I[1].toUpperCase())}function vs(De,I,F){switch(I.type){case de.If.Trigger:return De.visitTrigger(I,F);case de.If.State:return De.visitState(I,F);case de.If.Transition:return De.visitTransition(I,F);case de.If.Sequence:return De.visitSequence(I,F);case de.If.Group:return De.visitGroup(I,F);case de.If.Animate:return De.visitAnimate(I,F);case de.If.Keyframes:return De.visitKeyframes(I,F);case de.If.Style:return De.visitStyle(I,F);case de.If.Reference:return De.visitReference(I,F);case de.If.AnimateChild:return De.visitAnimateChild(I,F);case de.If.AnimateRef:return De.visitAnimateRef(I,F);case de.If.Query:return De.visitQuery(I,F);case de.If.Stagger:return De.visitStagger(I,F);default:throw function _t(De){return new M.wOt(3004,!1)}()}}function ho(De,I){return window.getComputedStyle(De)[I]}const Qe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class L extends ls{normalizePropertyName(I,F){return Ks(I)}normalizeStyleValue(I,F,re,Te){let et="";const mt=re.toString().trim();if(Qe.has(F)&&0!==re&&"0"!==re)if("number"==typeof re)et="px";else{const Mt=re.match(/^[+-]?[\d\.]+([a-z]*)$/);Mt&&0==Mt[1].length&&Te.push(function ut(De,I){return new M.wOt(3005,!1)}())}return mt+et}}const Vn="*";const Yi=new Set(["true","1"]),ns=new Set(["false","0"]);function Ls(De,I){const F=Yi.has(De)||ns.has(De),re=Yi.has(I)||ns.has(I);return(Te,et)=>{let mt=De==Vn||De==Te,Mt=I==Vn||I==et;return!mt&&F&&"boolean"==typeof Te&&(mt=Te?Yi.has(De):ns.has(De)),!Mt&&re&&"boolean"==typeof et&&(Mt=et?Yi.has(I):ns.has(I)),mt&&Mt}}const Pr=new RegExp("s*:selfs*,?","g");function Tr(De,I,F,re){return new eo(De).build(I,F,re)}class eo{constructor(I){this._driver=I}build(I,F,re){const Te=new Vo(F);return this._resetContextStyleTimingState(Te),vs(this,xi(I),Te)}_resetContextStyleTimingState(I){I.currentQuerySelector="",I.collectedStyles=new Map,I.collectedStyles.set("",new Map),I.currentTime=0}visitTrigger(I,F){let re=F.queryCount=0,Te=F.depCount=0;const et=[],mt=[];return"@"==I.name.charAt(0)&&F.errors.push(function ae(){return new M.wOt(3006,!1)}()),I.definitions.forEach(Mt=>{if(this._resetContextStyleTimingState(F),Mt.type==de.If.State){const Kt=Mt,Yt=Kt.name;Yt.toString().split(/\s*,\s*/).forEach(Nn=>{Kt.name=Nn,et.push(this.visitState(Kt,F))}),Kt.name=Yt}else if(Mt.type==de.If.Transition){const Kt=this.visitTransition(Mt,F);re+=Kt.queryCount,Te+=Kt.depCount,mt.push(Kt)}else F.errors.push(function x(){return new M.wOt(3007,!1)}())}),{type:de.If.Trigger,name:I.name,states:et,transitions:mt,queryCount:re,depCount:Te,options:null}}visitState(I,F){const re=this.visitStyle(I.styles,F),Te=I.options&&I.options.params||null;if(re.containsDynamicStyles){const et=new Set,mt=Te||{};re.styles.forEach(Mt=>{Mt instanceof Map&&Mt.forEach(Kt=>{Fs(Kt).forEach(Yt=>{mt.hasOwnProperty(Yt)||et.add(Yt)})})}),et.size&&F.errors.push(function T(De,I){return new M.wOt(3008,!1)}(0,et.values()))}return{type:de.If.State,name:I.name,style:re,options:Te?{params:Te}:null}}visitTransition(I,F){F.queryCount=0,F.depCount=0;const re=vs(this,xi(I.animation),F),Te=function ai(De,I){const F=[];return"string"==typeof De?De.split(/\s*,\s*/).forEach(re=>function ur(De,I,F){if(":"==De[0]){const Kt=function Ei(De,I){switch(De){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(F,re)=>parseFloat(re)>parseFloat(F);case":decrement":return(F,re)=>parseFloat(re)<parseFloat(F);default:return I.push(function Vt(De){return new M.wOt(3016,!1)}()),"* => *"}}(De,F);if("function"==typeof Kt)return void I.push(Kt);De=Kt}const re=De.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==re||re.length<4)return F.push(function ot(De){return new M.wOt(3015,!1)}()),I;const Te=re[1],et=re[2],mt=re[3];I.push(Ls(Te,mt)),"<"==et[0]&&(Te!=Vn||mt!=Vn)&&I.push(Ls(mt,Te))}(re,F,I)):F.push(De),F}(I.expr,F.errors);return{type:de.If.Transition,matchers:Te,animation:re,queryCount:F.queryCount,depCount:F.depCount,options:vr(I.options)}}visitSequence(I,F){return{type:de.If.Sequence,steps:I.steps.map(re=>vs(this,re,F)),options:vr(I.options)}}visitGroup(I,F){const re=F.currentTime;let Te=0;const et=I.steps.map(mt=>{F.currentTime=re;const Mt=vs(this,mt,F);return Te=Math.max(Te,F.currentTime),Mt});return F.currentTime=Te,{type:de.If.Group,steps:et,options:vr(I.options)}}visitAnimate(I,F){const re=function Gi(De,I){if(De.hasOwnProperty("duration"))return De;if("number"==typeof De)return Cl($n(De,I).duration,0,"");const F=De;if(F.split(/\s+/).some(et=>"{"==et.charAt(0)&&"{"==et.charAt(1))){const et=Cl(0,0,"");return et.dynamic=!0,et.strValue=F,et}const Te=$n(F,I);return Cl(Te.duration,Te.delay,Te.easing)}(I.timings,F.errors);F.currentAnimateTimings=re;let Te,et=I.styles?I.styles:(0,de.iF)({});if(et.type==de.If.Keyframes)Te=this.visitKeyframes(et,F);else{let mt=I.styles,Mt=!1;if(!mt){Mt=!0;const Yt={};re.easing&&(Yt.easing=re.easing),mt=(0,de.iF)(Yt)}F.currentTime+=re.duration+re.delay;const Kt=this.visitStyle(mt,F);Kt.isEmptyStep=Mt,Te=Kt}return F.currentAnimateTimings=null,{type:de.If.Animate,timings:re,style:Te,options:null}}visitStyle(I,F){const re=this._makeStyleAst(I,F);return this._validateStyleAst(re,F),re}_makeStyleAst(I,F){const re=[],Te=Array.isArray(I.styles)?I.styles:[I.styles];for(let Mt of Te)"string"==typeof Mt?Mt===de.kp?re.push(Mt):F.errors.push(new M.wOt(3002,!1)):re.push(new Map(Object.entries(Mt)));let et=!1,mt=null;return re.forEach(Mt=>{if(Mt instanceof Map&&(Mt.has("easing")&&(mt=Mt.get("easing"),Mt.delete("easing")),!et))for(let Kt of Mt.values())if(Kt.toString().indexOf("{{")>=0){et=!0;break}}),{type:de.If.Style,styles:re,easing:mt,offset:I.offset,containsDynamicStyles:et,options:null}}_validateStyleAst(I,F){const re=F.currentAnimateTimings;let Te=F.currentTime,et=F.currentTime;re&&et>0&&(et-=re.duration+re.delay),I.styles.forEach(mt=>{"string"!=typeof mt&&mt.forEach((Mt,Kt)=>{const Yt=F.collectedStyles.get(F.currentQuerySelector),Nn=Yt.get(Kt);let A=!0;Nn&&(et!=Te&&et>=Nn.startTime&&Te<=Nn.endTime&&(F.errors.push(function ve(De,I,F,re,Te){return new M.wOt(3010,!1)}()),A=!1),et=Nn.startTime),A&&Yt.set(Kt,{startTime:et,endTime:Te}),F.options&&function Sr(De,I,F){const re=I.params||{},Te=Fs(De);Te.length&&Te.forEach(et=>{re.hasOwnProperty(et)||F.push(function Ye(De){return new M.wOt(3001,!1)}())})}(Mt,F.options,F.errors)})})}visitKeyframes(I,F){const re={type:de.If.Keyframes,styles:[],options:null};if(!F.currentAnimateTimings)return F.errors.push(function Ce(){return new M.wOt(3011,!1)}()),re;let et=0;const mt=[];let Mt=!1,Kt=!1,Yt=0;const Nn=I.steps.map(Wt=>{const Wn=this._makeStyleAst(Wt,F);let dr=null!=Wn.offset?Wn.offset:function ea(De){if("string"==typeof De)return null;let I=null;if(Array.isArray(De))De.forEach(F=>{if(F instanceof Map&&F.has("offset")){const re=F;I=parseFloat(re.get("offset")),re.delete("offset")}});else if(De instanceof Map&&De.has("offset")){const F=De;I=parseFloat(F.get("offset")),F.delete("offset")}return I}(Wn.styles),qi=0;return null!=dr&&(et++,qi=Wn.offset=dr),Kt=Kt||qi<0||qi>1,Mt=Mt||qi<Yt,Yt=qi,mt.push(qi),Wn});Kt&&F.errors.push(function Be(){return new M.wOt(3012,!1)}()),Mt&&F.errors.push(function Ne(){return new M.wOt(3200,!1)}());const A=I.steps.length;let Se=0;et>0&&et<A?F.errors.push(function z(){return new M.wOt(3202,!1)}()):0==et&&(Se=1/(A-1));const ee=A-1,fe=F.currentTime,it=F.currentAnimateTimings,Ht=it.duration;return Nn.forEach((Wt,Wn)=>{const dr=Se>0?Wn==ee?1:Se*Wn:mt[Wn],qi=dr*Ht;F.currentTime=fe+it.delay+qi,it.duration=qi,this._validateStyleAst(Wt,F),Wt.offset=dr,re.styles.push(Wt)}),re}visitReference(I,F){return{type:de.If.Reference,animation:vs(this,xi(I.animation),F),options:vr(I.options)}}visitAnimateChild(I,F){return F.depCount++,{type:de.If.AnimateChild,options:vr(I.options)}}visitAnimateRef(I,F){return{type:de.If.AnimateRef,animation:this.visitReference(I.animation,F),options:vr(I.options)}}visitQuery(I,F){const re=F.currentQuerySelector,Te=I.options||{};F.queryCount++,F.currentQuery=I;const[et,mt]=function ws(De){const I=!!De.split(/\s*,\s*/).find(F=>":self"==F);return I&&(De=De.replace(Pr,"")),De=De.replace(/@\*/g,kn).replace(/@\w+/g,F=>kn+"-"+F.slice(1)).replace(/:animating/g,oi),[De,I]}(I.selector);F.currentQuerySelector=re.length?re+" "+et:et,Un(F.collectedStyles,F.currentQuerySelector,new Map);const Mt=vs(this,xi(I.animation),F);return F.currentQuery=null,F.currentQuerySelector=re,{type:de.If.Query,selector:et,limit:Te.limit||0,optional:!!Te.optional,includeSelf:mt,animation:Mt,originalSelector:I.selector,options:vr(I.options)}}visitStagger(I,F){F.currentQuery||F.errors.push(function Fe(){return new M.wOt(3013,!1)}());const re="full"===I.timings?{duration:0,delay:0,easing:"full"}:$n(I.timings,F.errors,!0);return{type:de.If.Stagger,animation:vs(this,xi(I.animation),F),timings:re,options:null}}}class Vo{constructor(I){this.errors=I,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vr(De){return De?(De={...De}).params&&(De.params=function ro(De){return De?{...De}:null}(De.params)):De={},De}function Cl(De,I,F){return{duration:De,delay:I,easing:F}}function To(De,I,F,re,Te,et,mt=null,Mt=!1){return{type:1,element:De,keyframes:I,preStyleProps:F,postStyleProps:re,duration:Te,delay:et,totalTime:Te+et,easing:mt,subTimeline:Mt}}class so{constructor(){this._map=new Map}get(I){return this._map.get(I)||[]}append(I,F){let re=this._map.get(I);re||this._map.set(I,re=[]),re.push(...F)}has(I){return this._map.has(I)}clear(){this._map.clear()}}const ja=new RegExp(":enter","g"),ka=new RegExp(":leave","g");function ma(De,I,F,re,Te,et=new Map,mt=new Map,Mt,Kt,Yt=[]){return(new yo).buildKeyframes(De,I,F,re,Te,et,mt,Mt,Kt,Yt)}class yo{buildKeyframes(I,F,re,Te,et,mt,Mt,Kt,Yt,Nn=[]){Yt=Yt||new so;const A=new Ba(I,F,Yt,Te,et,Nn,[]);A.options=Kt;const Se=Kt.delay?gi(Kt.delay):0;A.currentTimeline.delayNextStep(Se),A.currentTimeline.setStyles([mt],null,A.errors,Kt),vs(this,re,A);const ee=A.timelines.filter(fe=>fe.containsAnimation());if(ee.length&&Mt.size){let fe;for(let it=ee.length-1;it>=0;it--){const Ht=ee[it];if(Ht.element===F){fe=Ht;break}}fe&&!fe.allowOnlyTimelineStyles()&&fe.setStyles([Mt],null,A.errors,Kt)}return ee.length?ee.map(fe=>fe.buildKeyframes()):[To(F,[],[],[],0,Se,"",!1)]}visitTrigger(I,F){}visitState(I,F){}visitTransition(I,F){}visitAnimateChild(I,F){const re=F.subInstructions.get(F.element);if(re){const Te=F.createSubContext(I.options),et=F.currentTimeline.currentTime,mt=this._visitSubInstructions(re,Te,Te.options);et!=mt&&F.transformIntoNewTimeline(mt)}F.previousNode=I}visitAnimateRef(I,F){const re=F.createSubContext(I.options);re.transformIntoNewTimeline(),this._applyAnimationRefDelays([I.options,I.animation.options],F,re),this.visitReference(I.animation,re),F.transformIntoNewTimeline(re.currentTimeline.currentTime),F.previousNode=I}_applyAnimationRefDelays(I,F,re){for(const Te of I){const et=Te?.delay;if(et){const mt="number"==typeof et?et:gi(hs(et,Te?.params??{},F.errors));re.delayNextStep(mt)}}}_visitSubInstructions(I,F,re){let et=F.currentTimeline.currentTime;const mt=null!=re.duration?gi(re.duration):null,Mt=null!=re.delay?gi(re.delay):null;return 0!==mt&&I.forEach(Kt=>{const Yt=F.appendInstructionToTimeline(Kt,mt,Mt);et=Math.max(et,Yt.duration+Yt.delay)}),et}visitReference(I,F){F.updateOptions(I.options,!0),vs(this,I.animation,F),F.previousNode=I}visitSequence(I,F){const re=F.subContextCount;let Te=F;const et=I.options;if(et&&(et.params||et.delay)&&(Te=F.createSubContext(et),Te.transformIntoNewTimeline(),null!=et.delay)){Te.previousNode.type==de.If.Style&&(Te.currentTimeline.snapshotCurrentStyles(),Te.previousNode=Qo);const mt=gi(et.delay);Te.delayNextStep(mt)}I.steps.length&&(I.steps.forEach(mt=>vs(this,mt,Te)),Te.currentTimeline.applyStylesToKeyframe(),Te.subContextCount>re&&Te.transformIntoNewTimeline()),F.previousNode=I}visitGroup(I,F){const re=[];let Te=F.currentTimeline.currentTime;const et=I.options&&I.options.delay?gi(I.options.delay):0;I.steps.forEach(mt=>{const Mt=F.createSubContext(I.options);et&&Mt.delayNextStep(et),vs(this,mt,Mt),Te=Math.max(Te,Mt.currentTimeline.currentTime),re.push(Mt.currentTimeline)}),re.forEach(mt=>F.currentTimeline.mergeTimelineCollectedStyles(mt)),F.transformIntoNewTimeline(Te),F.previousNode=I}_visitTiming(I,F){if(I.dynamic){const re=I.strValue;return $n(F.params?hs(re,F.params,F.errors):re,F.errors)}return{duration:I.duration,delay:I.delay,easing:I.easing}}visitAnimate(I,F){const re=F.currentAnimateTimings=this._visitTiming(I.timings,F),Te=F.currentTimeline;re.delay&&(F.incrementTime(re.delay),Te.snapshotCurrentStyles());const et=I.style;et.type==de.If.Keyframes?this.visitKeyframes(et,F):(F.incrementTime(re.duration),this.visitStyle(et,F),Te.applyStylesToKeyframe()),F.currentAnimateTimings=null,F.previousNode=I}visitStyle(I,F){const re=F.currentTimeline,Te=F.currentAnimateTimings;!Te&&re.hasCurrentStyleProperties()&&re.forwardFrame();const et=Te&&Te.easing||I.easing;I.isEmptyStep?re.applyEmptyStep(et):re.setStyles(I.styles,et,F.errors,F.options),F.previousNode=I}visitKeyframes(I,F){const re=F.currentAnimateTimings,Te=F.currentTimeline.duration,et=re.duration,Mt=F.createSubContext().currentTimeline;Mt.easing=re.easing,I.styles.forEach(Kt=>{Mt.forwardTime((Kt.offset||0)*et),Mt.setStyles(Kt.styles,Kt.easing,F.errors,F.options),Mt.applyStylesToKeyframe()}),F.currentTimeline.mergeTimelineCollectedStyles(Mt),F.transformIntoNewTimeline(Te+et),F.previousNode=I}visitQuery(I,F){const re=F.currentTimeline.currentTime,Te=I.options||{},et=Te.delay?gi(Te.delay):0;et&&(F.previousNode.type===de.If.Style||0==re&&F.currentTimeline.hasCurrentStyleProperties())&&(F.currentTimeline.snapshotCurrentStyles(),F.previousNode=Qo);let mt=re;const Mt=F.invokeQuery(I.selector,I.originalSelector,I.limit,I.includeSelf,!!Te.optional,F.errors);F.currentQueryTotal=Mt.length;let Kt=null;Mt.forEach((Yt,Nn)=>{F.currentQueryIndex=Nn;const A=F.createSubContext(I.options,Yt);et&&A.delayNextStep(et),Yt===F.element&&(Kt=A.currentTimeline),vs(this,I.animation,A),A.currentTimeline.applyStylesToKeyframe(),mt=Math.max(mt,A.currentTimeline.currentTime)}),F.currentQueryIndex=0,F.currentQueryTotal=0,F.transformIntoNewTimeline(mt),Kt&&(F.currentTimeline.mergeTimelineCollectedStyles(Kt),F.currentTimeline.snapshotCurrentStyles()),F.previousNode=I}visitStagger(I,F){const re=F.parentContext,Te=F.currentTimeline,et=I.timings,mt=Math.abs(et.duration),Mt=mt*(F.currentQueryTotal-1);let Kt=mt*F.currentQueryIndex;switch(et.duration<0?"reverse":et.easing){case"reverse":Kt=Mt-Kt;break;case"full":Kt=re.currentStaggerTime}const Nn=F.currentTimeline;Kt&&Nn.delayNextStep(Kt);const A=Nn.currentTime;vs(this,I.animation,F),F.previousNode=I,re.currentStaggerTime=Te.currentTime-A+(Te.startTime-re.currentTimeline.startTime)}}const Qo={};class Ba{constructor(I,F,re,Te,et,mt,Mt,Kt){this._driver=I,this.element=F,this.subInstructions=re,this._enterClassName=Te,this._leaveClassName=et,this.errors=mt,this.timelines=Mt,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Qo,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Kt||new ga(this._driver,F,0),Mt.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(I,F){if(!I)return;const re=I;let Te=this.options;null!=re.duration&&(Te.duration=gi(re.duration)),null!=re.delay&&(Te.delay=gi(re.delay));const et=re.params;if(et){let mt=Te.params;mt||(mt=this.options.params={}),Object.keys(et).forEach(Mt=>{(!F||!mt.hasOwnProperty(Mt))&&(mt[Mt]=hs(et[Mt],mt,this.errors))})}}_copyOptions(){const I={};if(this.options){const F=this.options.params;if(F){const re=I.params={};Object.keys(F).forEach(Te=>{re[Te]=F[Te]})}}return I}createSubContext(I=null,F,re){const Te=F||this.element,et=new Ba(this._driver,Te,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Te,re||0));return et.previousNode=this.previousNode,et.currentAnimateTimings=this.currentAnimateTimings,et.options=this._copyOptions(),et.updateOptions(I),et.currentQueryIndex=this.currentQueryIndex,et.currentQueryTotal=this.currentQueryTotal,et.parentContext=this,this.subContextCount++,et}transformIntoNewTimeline(I){return this.previousNode=Qo,this.currentTimeline=this.currentTimeline.fork(this.element,I),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(I,F,re){const Te={duration:F??I.duration,delay:this.currentTimeline.currentTime+(re??0)+I.delay,easing:""},et=new ca(this._driver,I.element,I.keyframes,I.preStyleProps,I.postStyleProps,Te,I.stretchStartingKeyframe);return this.timelines.push(et),Te}incrementTime(I){this.currentTimeline.forwardTime(this.currentTimeline.duration+I)}delayNextStep(I){I>0&&this.currentTimeline.delayNextStep(I)}invokeQuery(I,F,re,Te,et,mt){let Mt=[];if(Te&&Mt.push(this.element),I.length>0){I=(I=I.replace(ja,"."+this._enterClassName)).replace(ka,"."+this._leaveClassName);let Yt=this._driver.query(this.element,I,1!=re);0!==re&&(Yt=re<0?Yt.slice(Yt.length+re,Yt.length):Yt.slice(0,re)),Mt.push(...Yt)}return!et&&0==Mt.length&&mt.push(function Pt(De){return new M.wOt(3014,!1)}()),Mt}}class ga{constructor(I,F,re,Te){this._driver=I,this.element=F,this.startTime=re,this._elementTimelineStylesLookup=Te,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(F),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(F,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(I){const F=1===this._keyframes.size&&this._pendingStyles.size;this.duration||F?(this.forwardTime(this.currentTime+I),F&&this.snapshotCurrentStyles()):this.startTime+=I}fork(I,F){return this.applyStylesToKeyframe(),new ga(this._driver,I,F||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(I){this.applyStylesToKeyframe(),this.duration=I,this._loadKeyframe()}_updateStyle(I,F){this._localTimelineStyles.set(I,F),this._globalTimelineStyles.set(I,F),this._styleSummary.set(I,{time:this.currentTime,value:F})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(I){I&&this._previousKeyframe.set("easing",I);for(let[F,re]of this._globalTimelineStyles)this._backFill.set(F,re||de.kp),this._currentKeyframe.set(F,de.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(I,F,re,Te){F&&this._previousKeyframe.set("easing",F);const et=Te&&Te.params||{},mt=function Ro(De,I){const F=new Map;let re;return De.forEach(Te=>{if("*"===Te){re??=I.keys();for(let et of re)F.set(et,de.kp)}else for(let[et,mt]of Te)F.set(et,mt)}),F}(I,this._globalTimelineStyles);for(let[Mt,Kt]of mt){const Yt=hs(Kt,et,re);this._pendingStyles.set(Mt,Yt),this._localTimelineStyles.has(Mt)||this._backFill.set(Mt,this._globalTimelineStyles.get(Mt)??de.kp),this._updateStyle(Mt,Yt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((I,F)=>{this._currentKeyframe.set(F,I)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((I,F)=>{this._currentKeyframe.has(F)||this._currentKeyframe.set(F,I)}))}snapshotCurrentStyles(){for(let[I,F]of this._localTimelineStyles)this._pendingStyles.set(I,F),this._updateStyle(I,F)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const I=[];for(let F in this._currentKeyframe)I.push(F);return I}mergeTimelineCollectedStyles(I){I._styleSummary.forEach((F,re)=>{const Te=this._styleSummary.get(re);(!Te||F.time>Te.time)&&this._updateStyle(re,F.value)})}buildKeyframes(){this.applyStylesToKeyframe();const I=new Set,F=new Set,re=1===this._keyframes.size&&0===this.duration;let Te=[];this._keyframes.forEach((Mt,Kt)=>{const Yt=new Map([...this._backFill,...Mt]);Yt.forEach((Nn,A)=>{Nn===de.FX?I.add(A):Nn===de.kp&&F.add(A)}),re||Yt.set("offset",Kt/this.duration),Te.push(Yt)});const et=[...I.values()],mt=[...F.values()];if(re){const Mt=Te[0],Kt=new Map(Mt);Mt.set("offset",0),Kt.set("offset",1),Te=[Mt,Kt]}return To(this.element,Te,et,mt,this.duration,this.startTime,this.easing,!1)}}class ca extends ga{constructor(I,F,re,Te,et,mt,Mt=!1){super(I,F,mt.delay),this.keyframes=re,this.preStyleProps=Te,this.postStyleProps=et,this._stretchStartingKeyframe=Mt,this.timings={duration:mt.duration,delay:mt.delay,easing:mt.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let I=this.keyframes,{delay:F,duration:re,easing:Te}=this.timings;if(this._stretchStartingKeyframe&&F){const et=[],mt=re+F,Mt=F/mt,Kt=new Map(I[0]);Kt.set("offset",0),et.push(Kt);const Yt=new Map(I[0]);Yt.set("offset",oo(Mt)),et.push(Yt);const Nn=I.length-1;for(let A=1;A<=Nn;A++){let Se=new Map(I[A]);const ee=Se.get("offset");Se.set("offset",oo((F+ee*re)/mt)),et.push(Se)}re=mt,F=0,Te="",I=et}return To(this.element,I,this.preStyleProps,this.postStyleProps,re,F,Te,!0)}}function oo(De,I=3){const F=Math.pow(10,I-1);return Math.round(De*F)/F}function Ta(De,I,F,re,Te,et,mt,Mt,Kt,Yt,Nn,A,Se){return{type:0,element:De,triggerName:I,isRemovalTransition:Te,fromState:F,fromStyles:et,toState:re,toStyles:mt,timelines:Mt,queriedElements:Kt,preStyleProps:Yt,postStyleProps:Nn,totalTime:A,errors:Se}}const Ua={};class ll{constructor(I,F,re){this._triggerName=I,this.ast=F,this._stateStyles=re}match(I,F,re,Te){return function No(De,I,F,re,Te){return De.some(et=>et(I,F,re,Te))}(this.ast.matchers,I,F,re,Te)}buildStyles(I,F,re){let Te=this._stateStyles.get("*");return void 0!==I&&(Te=this._stateStyles.get(I?.toString())||Te),Te?Te.buildStyles(F,re):new Map}build(I,F,re,Te,et,mt,Mt,Kt,Yt,Nn){const A=[],Se=this.ast.options&&this.ast.options.params||Ua,fe=this.buildStyles(re,Mt&&Mt.params||Ua,A),it=Kt&&Kt.params||Ua,Ht=this.buildStyles(Te,it,A),Wt=new Set,Wn=new Map,dr=new Map,qi="void"===Te,ps={params:Va(it,Se),delay:this.ast.options?.delay},ji=Nn?[]:ma(I,F,this.ast.animation,et,mt,fe,Ht,ps,Yt,A);let wr=0;return ji.forEach(vi=>{wr=Math.max(vi.duration+vi.delay,wr)}),A.length?Ta(F,this._triggerName,re,Te,qi,fe,Ht,[],[],Wn,dr,wr,A):(ji.forEach(vi=>{const lt=vi.element,kr=Un(Wn,lt,new Set);vi.preStyleProps.forEach(ti=>kr.add(ti));const Sn=Un(dr,lt,new Set);vi.postStyleProps.forEach(ti=>Sn.add(ti)),lt!==F&&Wt.add(lt)}),Ta(F,this._triggerName,re,Te,qi,fe,Ht,ji,[...Wt.values()],Wn,dr,wr))}}function Va(De,I){const F={...I};return Object.entries(De).forEach(([re,Te])=>{null!=Te&&(F[re]=Te)}),F}class ta{constructor(I,F,re){this.styles=I,this.defaultParams=F,this.normalizer=re}buildStyles(I,F){const re=new Map,Te=Va(I,this.defaultParams);return this.styles.styles.forEach(et=>{"string"!=typeof et&&et.forEach((mt,Mt)=>{mt&&(mt=hs(mt,Te,F));const Kt=this.normalizer.normalizePropertyName(Mt,F);mt=this.normalizer.normalizeStyleValue(Mt,Kt,mt,F),re.set(Mt,mt)})}),re}}class ao{constructor(I,F,re){this.name=I,this.ast=F,this._normalizer=re,this.transitionFactories=[],this.states=new Map,F.states.forEach(Te=>{this.states.set(Te.name,new ta(Te.style,Te.options&&Te.options.params||{},re))}),$i(this.states,"true","1"),$i(this.states,"false","0"),F.transitions.forEach(Te=>{this.transitionFactories.push(new ll(I,Te,this.states))}),this.fallbackTransition=function Yo(De,I,F){return new ll(De,{type:de.If.Transition,animation:{type:de.If.Sequence,steps:[],options:null},matchers:[(mt,Mt)=>!0],options:null,queryCount:0,depCount:0},I)}(I,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(I,F,re,Te){return this.transitionFactories.find(mt=>mt.match(I,F,re,Te))||null}matchStyles(I,F,re){return this.fallbackTransition.buildStyles(I,F,re)}}function $i(De,I,F){De.has(I)?De.has(F)||De.set(F,De.get(I)):De.has(F)&&De.set(I,De.get(F))}const Xa=new so;class _a{constructor(I,F,re){this.bodyNode=I,this._driver=F,this._normalizer=re,this._animations=new Map,this._playersById=new Map,this.players=[]}register(I,F){const re=[],et=Tr(this._driver,F,re,[]);if(re.length)throw function Xe(De){return new M.wOt(3503,!1)}();this._animations.set(I,et)}_buildPlayer(I,F,re){const Te=I.element,et=Zn(this._normalizer,I.keyframes,F,re);return this._driver.animate(Te,et,I.duration,I.delay,I.easing,[],!0)}create(I,F,re={}){const Te=[],et=this._animations.get(I);let mt;const Mt=new Map;if(et?(mt=ma(this._driver,F,et,St,fn,new Map,new Map,re,Xa,Te),mt.forEach(Nn=>{const A=Un(Mt,Nn.element,new Map);Nn.postStyleProps.forEach(Se=>A.set(Se,null))})):(Te.push(function kt(){return new M.wOt(3300,!1)}()),mt=[]),Te.length)throw function cn(De){return new M.wOt(3504,!1)}();Mt.forEach((Nn,A)=>{Nn.forEach((Se,ee)=>{Nn.set(ee,this._driver.computeStyle(A,ee,de.kp))})});const Yt=Xn(mt.map(Nn=>{const A=Mt.get(Nn.element);return this._buildPlayer(Nn,new Map,A)}));return this._playersById.set(I,Yt),Yt.onDestroy(()=>this.destroy(I)),this.players.push(Yt),Yt}destroy(I){const F=this._getPlayer(I);F.destroy(),this._playersById.delete(I);const re=this.players.indexOf(F);re>=0&&this.players.splice(re,1)}_getPlayer(I){const F=this._playersById.get(I);if(!F)throw function rn(De){return new M.wOt(3301,!1)}();return F}listen(I,F,re,Te){const et=Dn(F,"","","");return Hr(this._getPlayer(I),re,et,Te),()=>{}}command(I,F,re,Te){if("register"==re)return void this.register(I,Te[0]);if("create"==re)return void this.create(I,F,Te[0]||{});const et=this._getPlayer(I);switch(re){case"play":et.play();break;case"pause":et.pause();break;case"reset":et.reset();break;case"restart":et.restart();break;case"finish":et.finish();break;case"init":et.init();break;case"setPosition":et.setPosition(parseFloat(Te[0]));break;case"destroy":this.destroy(I)}}}const ua="ng-animate-queued",Ha="ng-animate-disabled",Tc=[],Ka={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Dc={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Qs="__ng_removed";class Jl{get params(){return this.options.params}constructor(I,F=""){this.namespaceId=F;const re=I&&I.hasOwnProperty("value");if(this.value=function _s(De){return De??null}(re?I.value:I),re){const{value:et,...mt}=I;this.options=mt}else this.options={};this.options.params||(this.options.params={})}absorbOptions(I){const F=I.params;if(F){const re=this.options.params;Object.keys(F).forEach(Te=>{null==re[Te]&&(re[Te]=F[Te])})}}}const ks="void",da=new Jl(ks);class ba{constructor(I,F,re){this.id=I,this.hostElement=F,this._engine=re,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+I,fo(F,this._hostClassName)}listen(I,F,re,Te){if(!this._triggers.has(F))throw function gn(De,I){return new M.wOt(3302,!1)}();if(null==re||0==re.length)throw function Xt(De){return new M.wOt(3303,!1)}();if(!function xa(De){return"start"==De||"done"==De}(re))throw function hn(De,I){return new M.wOt(3400,!1)}();const et=Un(this._elementListeners,I,[]),mt={name:F,phase:re,callback:Te};et.push(mt);const Mt=Un(this._engine.statesByElement,I,new Map);return Mt.has(F)||(fo(I,vn),fo(I,vn+"-"+F),Mt.set(F,da)),()=>{this._engine.afterFlush(()=>{const Kt=et.indexOf(mt);Kt>=0&&et.splice(Kt,1),this._triggers.has(F)||Mt.delete(F)})}}register(I,F){return!this._triggers.has(I)&&(this._triggers.set(I,F),!0)}_getTrigger(I){const F=this._triggers.get(I);if(!F)throw function ct(De){return new M.wOt(3401,!1)}();return F}trigger(I,F,re,Te=!0){const et=this._getTrigger(F),mt=new Ho(this.id,F,I);let Mt=this._engine.statesByElement.get(I);Mt||(fo(I,vn),fo(I,vn+"-"+F),this._engine.statesByElement.set(I,Mt=new Map));let Kt=Mt.get(F);const Yt=new Jl(re,this.id);if(!(re&&re.hasOwnProperty("value"))&&Kt&&Yt.absorbOptions(Kt.options),Mt.set(F,Yt),Kt||(Kt=da),Yt.value!==ks&&Kt.value===Yt.value){if(!function ec(De,I){const F=Object.keys(De),re=Object.keys(I);if(F.length!=re.length)return!1;for(let Te=0;Te<F.length;Te++){const et=F[Te];if(!I.hasOwnProperty(et)||De[et]!==I[et])return!1}return!0}(Kt.params,Yt.params)){const it=[],Ht=et.matchStyles(Kt.value,Kt.params,it),Wt=et.matchStyles(Yt.value,Yt.params,it);it.length?this._engine.reportError(it):this._engine.afterFlush(()=>{Kn(I,Ht),zn(I,Wt)})}return}const Se=Un(this._engine.playersByElement,I,[]);Se.forEach(it=>{it.namespaceId==this.id&&it.triggerName==F&&it.queued&&it.destroy()});let ee=et.matchTransition(Kt.value,Yt.value,I,Yt.params),fe=!1;if(!ee){if(!Te)return;ee=et.fallbackTransition,fe=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:I,triggerName:F,transition:ee,fromState:Kt,toState:Yt,player:mt,isFallbackTransition:fe}),fe||(fo(I,ua),mt.onStart(()=>{Ja(I,ua)})),mt.onDone(()=>{let it=this.players.indexOf(mt);it>=0&&this.players.splice(it,1);const Ht=this._engine.playersByElement.get(I);if(Ht){let Wt=Ht.indexOf(mt);Wt>=0&&Ht.splice(Wt,1)}}),this.players.push(mt),Se.push(mt),mt}deregister(I){this._triggers.delete(I),this._engine.statesByElement.forEach(F=>F.delete(I)),this._elementListeners.forEach((F,re)=>{this._elementListeners.set(re,F.filter(Te=>Te.name!=I))})}clearElementCache(I){this._engine.statesByElement.delete(I),this._elementListeners.delete(I);const F=this._engine.playersByElement.get(I);F&&(F.forEach(re=>re.destroy()),this._engine.playersByElement.delete(I))}_signalRemovalForInnerTriggers(I,F){const re=this._engine.driver.query(I,kn,!0);re.forEach(Te=>{if(Te[Qs])return;const et=this._engine.fetchNamespacesByElement(Te);et.size?et.forEach(mt=>mt.triggerLeaveAnimation(Te,F,!1,!0)):this.clearElementCache(Te)}),this._engine.afterFlushAnimationsDone(()=>re.forEach(Te=>this.clearElementCache(Te)))}triggerLeaveAnimation(I,F,re,Te){const et=this._engine.statesByElement.get(I),mt=new Map;if(et){const Mt=[];if(et.forEach((Kt,Yt)=>{if(mt.set(Yt,Kt.value),this._triggers.has(Yt)){const Nn=this.trigger(I,Yt,ks,Te);Nn&&Mt.push(Nn)}}),Mt.length)return this._engine.markElementAsRemoved(this.id,I,!0,F,mt),re&&Xn(Mt).onDone(()=>this._engine.processLeaveNode(I)),!0}return!1}prepareLeaveAnimationListeners(I){const F=this._elementListeners.get(I),re=this._engine.statesByElement.get(I);if(F&&re){const Te=new Set;F.forEach(et=>{const mt=et.name;if(Te.has(mt))return;Te.add(mt);const Kt=this._triggers.get(mt).fallbackTransition,Yt=re.get(mt)||da,Nn=new Jl(ks),A=new Ho(this.id,mt,I);this._engine.totalQueuedPlayers++,this._queue.push({element:I,triggerName:mt,transition:Kt,fromState:Yt,toState:Nn,player:A,isFallbackTransition:!0})})}}removeNode(I,F){const re=this._engine;if(I.childElementCount&&this._signalRemovalForInnerTriggers(I,F),this.triggerLeaveAnimation(I,F,!0))return;let Te=!1;if(re.totalAnimations){const et=re.players.length?re.playersByQueriedElement.get(I):[];if(et&&et.length)Te=!0;else{let mt=I;for(;mt=mt.parentNode;)if(re.statesByElement.get(mt)){Te=!0;break}}}if(this.prepareLeaveAnimationListeners(I),Te)re.markElementAsRemoved(this.id,I,!1,F);else{const et=I[Qs];(!et||et===Ka)&&(re.afterFlush(()=>this.clearElementCache(I)),re.destroyInnerAnimations(I),re._onRemovalComplete(I,F))}}insertNode(I,F){fo(I,this._hostClassName)}drainQueuedTransitions(I){const F=[];return this._queue.forEach(re=>{const Te=re.player;if(Te.destroyed)return;const et=re.element,mt=this._elementListeners.get(et);mt&&mt.forEach(Mt=>{if(Mt.name==re.triggerName){const Kt=Dn(et,re.triggerName,re.fromState.value,re.toState.value);Kt._data=I,Hr(re.player,Mt.phase,Kt,Mt.callback)}}),Te.markedForDestroy?this._engine.afterFlush(()=>{Te.destroy()}):F.push(re)}),this._queue=[],F.sort((re,Te)=>{const et=re.transition.ast.depCount,mt=Te.transition.ast.depCount;return 0==et||0==mt?et-mt:this._engine.driver.containsElement(re.element,Te.element)?1:-1})}destroy(I){this.players.forEach(F=>F.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,I)}}class Po{_onRemovalComplete(I,F){this.onRemovalComplete(I,F)}constructor(I,F,re,Te){this.bodyNode=I,this.driver=F,this._normalizer=re,this.scheduler=Te,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(et,mt)=>{}}get queuedPlayers(){const I=[];return this._namespaceList.forEach(F=>{F.players.forEach(re=>{re.queued&&I.push(re)})}),I}createNamespace(I,F){const re=new ba(I,F,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,F)?this._balanceNamespaceList(re,F):(this.newHostElements.set(F,re),this.collectEnterElement(F)),this._namespaceLookup[I]=re}_balanceNamespaceList(I,F){const re=this._namespaceList,Te=this.namespacesByHostElement;if(re.length-1>=0){let mt=!1,Mt=this.driver.getParentElement(F);for(;Mt;){const Kt=Te.get(Mt);if(Kt){const Yt=re.indexOf(Kt);re.splice(Yt+1,0,I),mt=!0;break}Mt=this.driver.getParentElement(Mt)}mt||re.unshift(I)}else re.push(I);return Te.set(F,I),I}register(I,F){let re=this._namespaceLookup[I];return re||(re=this.createNamespace(I,F)),re}registerTrigger(I,F,re){let Te=this._namespaceLookup[I];Te&&Te.register(F,re)&&this.totalAnimations++}destroy(I,F){I&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const re=this._fetchNamespace(I);this.namespacesByHostElement.delete(re.hostElement);const Te=this._namespaceList.indexOf(re);Te>=0&&this._namespaceList.splice(Te,1),re.destroy(F),delete this._namespaceLookup[I]}))}_fetchNamespace(I){return this._namespaceLookup[I]}fetchNamespacesByElement(I){const F=new Set,re=this.statesByElement.get(I);if(re)for(let Te of re.values())if(Te.namespaceId){const et=this._fetchNamespace(Te.namespaceId);et&&F.add(et)}return F}trigger(I,F,re,Te){if(Gl(F)){const et=this._fetchNamespace(I);if(et)return et.trigger(F,re,Te),!0}return!1}insertNode(I,F,re,Te){if(!Gl(F))return;const et=F[Qs];if(et&&et.setForRemoval){et.setForRemoval=!1,et.setForMove=!0;const mt=this.collectedLeaveElements.indexOf(F);mt>=0&&this.collectedLeaveElements.splice(mt,1)}if(I){const mt=this._fetchNamespace(I);mt&&mt.insertNode(F,re)}Te&&this.collectEnterElement(F)}collectEnterElement(I){this.collectedEnterElements.push(I)}markElementAsDisabled(I,F){F?this.disabledNodes.has(I)||(this.disabledNodes.add(I),fo(I,Ha)):this.disabledNodes.has(I)&&(this.disabledNodes.delete(I),Ja(I,Ha))}removeNode(I,F,re){if(Gl(F)){this.scheduler?.notify();const Te=I?this._fetchNamespace(I):null;Te?Te.removeNode(F,re):this.markElementAsRemoved(I,F,!1,re);const et=this.namespacesByHostElement.get(F);et&&et.id!==I&&et.removeNode(F,re)}else this._onRemovalComplete(F,re)}markElementAsRemoved(I,F,re,Te,et){this.collectedLeaveElements.push(F),F[Qs]={namespaceId:I,setForRemoval:Te,hasAnimation:re,removedBeforeQueried:!1,previousTriggersValues:et}}listen(I,F,re,Te,et){return Gl(F)?this._fetchNamespace(I).listen(F,re,Te,et):()=>{}}_buildInstruction(I,F,re,Te,et){return I.transition.build(this.driver,I.element,I.fromState.value,I.toState.value,re,Te,I.fromState.options,I.toState.options,F,et)}destroyInnerAnimations(I){let F=this.driver.query(I,kn,!0);F.forEach(re=>this.destroyActiveAnimationsForElement(re)),0!=this.playersByQueriedElement.size&&(F=this.driver.query(I,oi,!0),F.forEach(re=>this.finishActiveQueriedAnimationOnElement(re)))}destroyActiveAnimationsForElement(I){const F=this.playersByElement.get(I);F&&F.forEach(re=>{re.queued?re.markedForDestroy=!0:re.destroy()})}finishActiveQueriedAnimationOnElement(I){const F=this.playersByQueriedElement.get(I);F&&F.forEach(re=>re.finish())}whenRenderingDone(){return new Promise(I=>{if(this.players.length)return Xn(this.players).onDone(()=>I());I()})}processLeaveNode(I){const F=I[Qs];if(F&&F.setForRemoval){if(I[Qs]=Ka,F.namespaceId){this.destroyInnerAnimations(I);const re=this._fetchNamespace(F.namespaceId);re&&re.clearElementCache(I)}this._onRemovalComplete(I,F.setForRemoval)}I.classList?.contains(Ha)&&this.markElementAsDisabled(I,!1),this.driver.query(I,".ng-animate-disabled",!0).forEach(re=>{this.markElementAsDisabled(re,!1)})}flush(I=-1){let F=[];if(this.newHostElements.size&&(this.newHostElements.forEach((re,Te)=>this._balanceNamespaceList(re,Te)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let re=0;re<this.collectedEnterElements.length;re++)fo(this.collectedEnterElements[re],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const re=[];try{F=this._flushAnimations(re,I)}finally{for(let Te=0;Te<re.length;Te++)re[Te]()}}else for(let re=0;re<this.collectedLeaveElements.length;re++)this.processLeaveNode(this.collectedLeaveElements[re]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(re=>re()),this._flushFns=[],this._whenQuietFns.length){const re=this._whenQuietFns;this._whenQuietFns=[],F.length?Xn(F).onDone(()=>{re.forEach(Te=>Te())}):re.forEach(Te=>Te())}}reportError(I){throw function Ot(De){return new M.wOt(3402,!1)}()}_flushAnimations(I,F){const re=new so,Te=[],et=new Map,mt=[],Mt=new Map,Kt=new Map,Yt=new Map,Nn=new Set;this.disabledNodes.forEach(Gn=>{Nn.add(Gn);const Mi=this.driver.query(Gn,".ng-animate-queued",!0);for(let ci=0;ci<Mi.length;ci++)Nn.add(Mi[ci])});const A=this.bodyNode,Se=Array.from(this.statesByElement.keys()),ee=ia(Se,this.collectedEnterElements),fe=new Map;let it=0;ee.forEach((Gn,Mi)=>{const ci=St+it++;fe.set(Mi,ci),Gn.forEach(Ui=>fo(Ui,ci))});const Ht=[],Wt=new Set,Wn=new Set;for(let Gn=0;Gn<this.collectedLeaveElements.length;Gn++){const Mi=this.collectedLeaveElements[Gn],ci=Mi[Qs];ci&&ci.setForRemoval&&(Ht.push(Mi),Wt.add(Mi),ci.hasAnimation?this.driver.query(Mi,".ng-star-inserted",!0).forEach(Ui=>Wt.add(Ui)):Wn.add(Mi))}const dr=new Map,qi=ia(Se,Array.from(Wt));qi.forEach((Gn,Mi)=>{const ci=fn+it++;dr.set(Mi,ci),Gn.forEach(Ui=>fo(Ui,ci))}),I.push(()=>{ee.forEach((Gn,Mi)=>{const ci=fe.get(Mi);Gn.forEach(Ui=>Ja(Ui,ci))}),qi.forEach((Gn,Mi)=>{const ci=dr.get(Mi);Gn.forEach(Ui=>Ja(Ui,ci))}),Ht.forEach(Gn=>{this.processLeaveNode(Gn)})});const ps=[],ji=[];for(let Gn=this._namespaceList.length-1;Gn>=0;Gn--)this._namespaceList[Gn].drainQueuedTransitions(F).forEach(ci=>{const Ui=ci.player,Fr=ci.element;if(ps.push(Ui),this.collectedEnterElements.length){const po=Fr[Qs];if(po&&po.setForMove){if(po.previousTriggersValues&&po.previousTriggersValues.has(ci.triggerName)){const Jo=po.previousTriggersValues.get(ci.triggerName),xo=this.statesByElement.get(ci.element);if(xo&&xo.has(ci.triggerName)){const Co=xo.get(ci.triggerName);Co.value=Jo,xo.set(ci.triggerName,Co)}}return void Ui.destroy()}}const Di=!A||!this.driver.containsElement(A,Fr),lo=dr.get(Fr),sa=fe.get(Fr),Yr=this._buildInstruction(ci,re,sa,lo,Di);if(Yr.errors&&Yr.errors.length)return void ji.push(Yr);if(Di)return Ui.onStart(()=>Kn(Fr,Yr.fromStyles)),Ui.onDestroy(()=>zn(Fr,Yr.toStyles)),void Te.push(Ui);if(ci.isFallbackTransition)return Ui.onStart(()=>Kn(Fr,Yr.fromStyles)),Ui.onDestroy(()=>zn(Fr,Yr.toStyles)),void Te.push(Ui);const Lr=[];Yr.timelines.forEach(po=>{po.stretchStartingKeyframe=!0,this.disabledNodes.has(po.element)||Lr.push(po)}),Yr.timelines=Lr,re.append(Fr,Yr.timelines),mt.push({instruction:Yr,player:Ui,element:Fr}),Yr.queriedElements.forEach(po=>Un(Mt,po,[]).push(Ui)),Yr.preStyleProps.forEach((po,Jo)=>{if(po.size){let xo=Kt.get(Jo);xo||Kt.set(Jo,xo=new Set),po.forEach((Co,mo)=>xo.add(mo))}}),Yr.postStyleProps.forEach((po,Jo)=>{let xo=Yt.get(Jo);xo||Yt.set(Jo,xo=new Set),po.forEach((Co,mo)=>xo.add(mo))})});if(ji.length){const Gn=[];ji.forEach(Mi=>{Gn.push(function an(De,I){return new M.wOt(3505,!1)}())}),ps.forEach(Mi=>Mi.destroy()),this.reportError(Gn)}const wr=new Map,vi=new Map;mt.forEach(Gn=>{const Mi=Gn.element;re.has(Mi)&&(vi.set(Mi,Mi),this._beforeAnimationBuild(Gn.player.namespaceId,Gn.instruction,wr))}),Te.forEach(Gn=>{const Mi=Gn.element;this._getPreviousPlayers(Mi,!1,Gn.namespaceId,Gn.triggerName,null).forEach(Ui=>{Un(wr,Mi,[]).push(Ui),Ui.destroy()})});const lt=Ht.filter(Gn=>Da(Gn,Kt,Yt)),kr=new Map;ul(kr,this.driver,Wn,Yt,de.kp).forEach(Gn=>{Da(Gn,Kt,Yt)&&lt.push(Gn)});const ti=new Map;ee.forEach((Gn,Mi)=>{ul(ti,this.driver,new Set(Gn),Kt,de.FX)}),lt.forEach(Gn=>{const Mi=kr.get(Gn),ci=ti.get(Gn);kr.set(Gn,new Map([...Mi?.entries()??[],...ci?.entries()??[]]))});const Or=[],is=[],ys={};mt.forEach(Gn=>{const{element:Mi,player:ci,instruction:Ui}=Gn;if(re.has(Mi)){if(Nn.has(Mi))return ci.onDestroy(()=>zn(Mi,Ui.toStyles)),ci.disabled=!0,ci.overrideTotalTime(Ui.totalTime),void Te.push(ci);let Fr=ys;if(vi.size>1){let lo=Mi;const sa=[];for(;lo=lo.parentNode;){const Yr=vi.get(lo);if(Yr){Fr=Yr;break}sa.push(lo)}sa.forEach(Yr=>vi.set(Yr,Fr))}const Di=this._buildAnimation(ci.namespaceId,Ui,wr,et,ti,kr);if(ci.setRealPlayer(Di),Fr===ys)Or.push(ci);else{const lo=this.playersByElement.get(Fr);lo&&lo.length&&(ci.parentPlayer=Xn(lo)),Te.push(ci)}}else Kn(Mi,Ui.fromStyles),ci.onDestroy(()=>zn(Mi,Ui.toStyles)),is.push(ci),Nn.has(Mi)&&Te.push(ci)}),is.forEach(Gn=>{const Mi=et.get(Gn.element);if(Mi&&Mi.length){const ci=Xn(Mi);Gn.setRealPlayer(ci)}}),Te.forEach(Gn=>{Gn.parentPlayer?Gn.syncPlayerEvents(Gn.parentPlayer):Gn.destroy()});for(let Gn=0;Gn<Ht.length;Gn++){const Mi=Ht[Gn],ci=Mi[Qs];if(Ja(Mi,fn),ci&&ci.hasAnimation)continue;let Ui=[];if(Mt.size){let Di=Mt.get(Mi);Di&&Di.length&&Ui.push(...Di);let lo=this.driver.query(Mi,oi,!0);for(let sa=0;sa<lo.length;sa++){let Yr=Mt.get(lo[sa]);Yr&&Yr.length&&Ui.push(...Yr)}}const Fr=Ui.filter(Di=>!Di.destroyed);Fr.length?zo(this,Mi,Fr):this.processLeaveNode(Mi)}return Ht.length=0,Or.forEach(Gn=>{this.players.push(Gn),Gn.onDone(()=>{Gn.destroy();const Mi=this.players.indexOf(Gn);this.players.splice(Mi,1)}),Gn.play()}),Or}afterFlush(I){this._flushFns.push(I)}afterFlushAnimationsDone(I){this._whenQuietFns.push(I)}_getPreviousPlayers(I,F,re,Te,et){let mt=[];if(F){const Mt=this.playersByQueriedElement.get(I);Mt&&(mt=Mt)}else{const Mt=this.playersByElement.get(I);if(Mt){const Kt=!et||et==ks;Mt.forEach(Yt=>{Yt.queued||!Kt&&Yt.triggerName!=Te||mt.push(Yt)})}}return(re||Te)&&(mt=mt.filter(Mt=>!(re&&re!=Mt.namespaceId||Te&&Te!=Mt.triggerName))),mt}_beforeAnimationBuild(I,F,re){const et=F.element,mt=F.isRemovalTransition?void 0:I,Mt=F.isRemovalTransition?void 0:F.triggerName;for(const Kt of F.timelines){const Yt=Kt.element,Nn=Yt!==et,A=Un(re,Yt,[]);this._getPreviousPlayers(Yt,Nn,mt,Mt,F.toState).forEach(ee=>{const fe=ee.getRealPlayer();fe.beforeDestroy&&fe.beforeDestroy(),ee.destroy(),A.push(ee)})}Kn(et,F.fromStyles)}_buildAnimation(I,F,re,Te,et,mt){const Mt=F.triggerName,Kt=F.element,Yt=[],Nn=new Set,A=new Set,Se=F.timelines.map(fe=>{const it=fe.element;Nn.add(it);const Ht=it[Qs];if(Ht&&Ht.removedBeforeQueried)return new de.sf(fe.duration,fe.delay);const Wt=it!==Kt,Wn=function Jr(De){const I=[];return dl(De,I),I}((re.get(it)||Tc).map(wr=>wr.getRealPlayer())).filter(wr=>!!wr.element&&wr.element===it),dr=et.get(it),qi=mt.get(it),ps=Zn(this._normalizer,fe.keyframes,dr,qi),ji=this._buildPlayer(fe,ps,Wn);if(fe.subTimeline&&Te&&A.add(it),Wt){const wr=new Ho(I,Mt,it);wr.setRealPlayer(ji),Yt.push(wr)}return ji});Yt.forEach(fe=>{Un(this.playersByQueriedElement,fe.element,[]).push(fe),fe.onDone(()=>function Tl(De,I,F){let re=De.get(I);if(re){if(re.length){const Te=re.indexOf(F);re.splice(Te,1)}0==re.length&&De.delete(I)}return re}(this.playersByQueriedElement,fe.element,fe))}),Nn.forEach(fe=>fo(fe,zi));const ee=Xn(Se);return ee.onDestroy(()=>{Nn.forEach(fe=>Ja(fe,zi)),zn(Kt,F.toStyles)}),A.forEach(fe=>{Un(Te,fe,[]).push(ee)}),ee}_buildPlayer(I,F,re){return F.length>0?this.driver.animate(I.element,F,I.duration,I.delay,I.easing,re):new de.sf(I.duration,I.delay)}}class Ho{constructor(I,F,re){this.namespaceId=I,this.triggerName=F,this.element=re,this._player=new de.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(I){this._containsRealPlayer||(this._player=I,this._queuedCallbacks.forEach((F,re)=>{F.forEach(Te=>Hr(I,re,void 0,Te))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(I.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(I){this.totalTime=I}syncPlayerEvents(I){const F=this._player;F.triggerCallback&&I.onStart(()=>F.triggerCallback("start")),I.onDone(()=>this.finish()),I.onDestroy(()=>this.destroy())}_queueEvent(I,F){Un(this._queuedCallbacks,I,[]).push(F)}onDone(I){this.queued&&this._queueEvent("done",I),this._player.onDone(I)}onStart(I){this.queued&&this._queueEvent("start",I),this._player.onStart(I)}onDestroy(I){this.queued&&this._queueEvent("destroy",I),this._player.onDestroy(I)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(I){this.queued||this._player.setPosition(I)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(I){const F=this._player;F.triggerCallback&&F.triggerCallback(I)}}function Gl(De){return De&&1===De.nodeType}function qo(De,I){const F=De.style.display;return De.style.display=I??"none",F}function ul(De,I,F,re,Te){const et=[];F.forEach(Kt=>et.push(qo(Kt)));const mt=[];re.forEach((Kt,Yt)=>{const Nn=new Map;Kt.forEach(A=>{const Se=I.computeStyle(Yt,A,Te);Nn.set(A,Se),(!Se||0==Se.length)&&(Yt[Qs]=Dc,mt.push(Yt))}),De.set(Yt,Nn)});let Mt=0;return F.forEach(Kt=>qo(Kt,et[Mt++])),mt}function ia(De,I){const F=new Map;if(De.forEach(Mt=>F.set(Mt,[])),0==I.length)return F;const Te=new Set(I),et=new Map;function mt(Mt){if(!Mt)return 1;let Kt=et.get(Mt);if(Kt)return Kt;const Yt=Mt.parentNode;return Kt=F.has(Yt)?Yt:Te.has(Yt)?1:mt(Yt),et.set(Mt,Kt),Kt}return I.forEach(Mt=>{const Kt=mt(Mt);1!==Kt&&F.get(Kt).push(Mt)}),F}function fo(De,I){De.classList?.add(I)}function Ja(De,I){De.classList?.remove(I)}function zo(De,I,F){Xn(F).onDone(()=>De.processLeaveNode(I))}function dl(De,I){for(let F=0;F<De.length;F++){const re=De[F];re instanceof de.ui?dl(re.players,I):I.push(re)}}function Da(De,I,F){const re=F.get(De);if(!re)return!1;let Te=I.get(De);return Te?re.forEach(et=>Te.add(et)):I.set(De,re),F.delete(De),!0}class Ys{constructor(I,F,re,Te){this._driver=F,this._normalizer=re,this._triggerCache={},this.onRemovalComplete=(et,mt)=>{},this._transitionEngine=new Po(I.body,F,re,Te),this._timelineEngine=new _a(I.body,F,re),this._transitionEngine.onRemovalComplete=(et,mt)=>this.onRemovalComplete(et,mt)}registerTrigger(I,F,re,Te,et){const mt=I+"-"+Te;let Mt=this._triggerCache[mt];if(!Mt){const Kt=[],Nn=Tr(this._driver,et,Kt,[]);if(Kt.length)throw function Ft(De,I){return new M.wOt(3404,!1)}();Mt=function zl(De,I,F){return new ao(De,I,F)}(Te,Nn,this._normalizer),this._triggerCache[mt]=Mt}this._transitionEngine.registerTrigger(F,Te,Mt)}register(I,F){this._transitionEngine.register(I,F)}destroy(I,F){this._transitionEngine.destroy(I,F)}onInsert(I,F,re,Te){this._transitionEngine.insertNode(I,F,re,Te)}onRemove(I,F,re){this._transitionEngine.removeNode(I,F,re)}disableAnimations(I,F){this._transitionEngine.markElementAsDisabled(I,F)}process(I,F,re,Te){if("@"==re.charAt(0)){const[et,mt]=Pi(re);this._timelineEngine.command(et,F,mt,Te)}else this._transitionEngine.trigger(I,F,re,Te)}listen(I,F,re,Te,et){if("@"==re.charAt(0)){const[mt,Mt]=Pi(re);return this._timelineEngine.listen(mt,F,Mt,et)}return this._transitionEngine.listen(I,F,re,Te,et)}flush(I=-1){this._transitionEngine.flush(I)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(I){this._transitionEngine.afterFlushAnimationsDone(I)}}class ha{static{this.initialStylesByElement=new WeakMap}constructor(I,F,re){this._element=I,this._startStyles=F,this._endStyles=re,this._state=0;let Te=ha.initialStylesByElement.get(I);Te||ha.initialStylesByElement.set(I,Te=new Map),this._initialStyles=Te}start(){this._state<1&&(this._startStyles&&zn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(zn(this._element,this._initialStyles),this._endStyles&&(zn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ha.initialStylesByElement.delete(this._element),this._startStyles&&(Kn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Kn(this._element,this._endStyles),this._endStyles=null),zn(this._element,this._initialStyles),this._state=3)}}function Bs(De){let I=null;return De.forEach((F,re)=>{(function za(De){return"display"===De||"position"===De})(re)&&(I=I||new Map,I.set(re,F))}),I}class Dl{constructor(I,F,re,Te){this.element=I,this.keyframes=F,this.options=re,this._specialStyles=Te,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=re.duration,this._delay=re.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(I=>I()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const I=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,I,this.options),this._finalKeyframe=I.length?I[I.length-1]:new Map;const F=()=>this._onFinish();this.domPlayer.addEventListener("finish",F),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",F)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(I){const F=[];return I.forEach(re=>{F.push(Object.fromEntries(re))}),F}_triggerWebAnimation(I,F,re){return I.animate(this._convertKeyframesToObject(F),re)}onStart(I){this._originalOnStartFns.push(I),this._onStartFns.push(I)}onDone(I){this._originalOnDoneFns.push(I),this._onDoneFns.push(I)}onDestroy(I){this._onDestroyFns.push(I)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(I=>I()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(I=>I()),this._onDestroyFns=[])}setPosition(I){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=I*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const I=new Map;this.hasStarted()&&this._finalKeyframe.forEach((re,Te)=>{"offset"!==Te&&I.set(Te,this._finished?re:ho(this.element,Te))}),this.currentSnapshot=I}triggerCallback(I){const F="start"===I?this._onStartFns:this._onDoneFns;F.forEach(re=>re()),F.length=0}}class xe{validateStyleProperty(I){return!0}validateAnimatableStyleProperty(I){return!0}matchesElement(I,F){return!1}containsElement(I,F){return Si(I,F)}getParentElement(I){return Rr(I)}query(I,F,re){return Ir(I,F,re)}computeStyle(I,F,re){return ho(I,F)}animate(I,F,re,Te,et,mt=[]){const Kt={duration:re,delay:Te,fill:0==Te?"both":"forwards"};et&&(Kt.easing=et);const Yt=new Map,Nn=mt.filter(ee=>ee instanceof Dl);(function As(De,I){return 0===De||0===I})(re,Te)&&Nn.forEach(ee=>{ee.currentSnapshot.forEach((fe,it)=>Yt.set(it,fe))});let A=function cs(De){return De.length?De[0]instanceof Map?De:De.map(I=>new Map(Object.entries(I))):[]}(F).map(ee=>new Map(ee));A=function Us(De,I,F){if(F.size&&I.length){let re=I[0],Te=[];if(F.forEach((et,mt)=>{re.has(mt)||Te.push(mt),re.set(mt,et)}),Te.length)for(let et=1;et<I.length;et++){let mt=I[et];Te.forEach(Mt=>mt.set(Mt,ho(De,Mt)))}}return I}(I,A,Yt);const Se=function hl(De,I){let F=null,re=null;return Array.isArray(I)&&I.length?(F=Bs(I[0]),I.length>1&&(re=Bs(I[I.length-1]))):I instanceof Map&&(F=Bs(I)),F||re?new ha(De,F,re):null}(I,A);return new Dl(I,A,Kt,Se)}}const wt="@.disabled";class wi{constructor(I,F,re,Te){this.namespaceId=I,this.delegate=F,this.engine=re,this._onDestroy=Te,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(I){this.delegate.destroyNode?.(I)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(I,F){return this.delegate.createElement(I,F)}createComment(I){return this.delegate.createComment(I)}createText(I){return this.delegate.createText(I)}appendChild(I,F){this.delegate.appendChild(I,F),this.engine.onInsert(this.namespaceId,F,I,!1)}insertBefore(I,F,re,Te=!0){this.delegate.insertBefore(I,F,re),this.engine.onInsert(this.namespaceId,F,I,Te)}removeChild(I,F,re){this.engine.onRemove(this.namespaceId,F,this.delegate)}selectRootElement(I,F){return this.delegate.selectRootElement(I,F)}parentNode(I){return this.delegate.parentNode(I)}nextSibling(I){return this.delegate.nextSibling(I)}setAttribute(I,F,re,Te){this.delegate.setAttribute(I,F,re,Te)}removeAttribute(I,F,re){this.delegate.removeAttribute(I,F,re)}addClass(I,F){this.delegate.addClass(I,F)}removeClass(I,F){this.delegate.removeClass(I,F)}setStyle(I,F,re,Te){this.delegate.setStyle(I,F,re,Te)}removeStyle(I,F,re){this.delegate.removeStyle(I,F,re)}setProperty(I,F,re){"@"==F.charAt(0)&&F==wt?this.disableAnimations(I,!!re):this.delegate.setProperty(I,F,re)}setValue(I,F){this.delegate.setValue(I,F)}listen(I,F,re){return this.delegate.listen(I,F,re)}disableAnimations(I,F){this.engine.disableAnimations(I,F)}}class Dr extends wi{constructor(I,F,re,Te,et){super(F,re,Te,et),this.factory=I,this.namespaceId=F}setProperty(I,F,re){"@"==F.charAt(0)?"."==F.charAt(1)&&F==wt?this.disableAnimations(I,re=void 0===re||!!re):this.engine.process(this.namespaceId,I,F.slice(1),re):this.delegate.setProperty(I,F,re)}listen(I,F,re){if("@"==F.charAt(0)){const Te=function el(De){switch(De){case"body":return document.body;case"document":return document;case"window":return window;default:return De}}(I);let et=F.slice(1),mt="";return"@"!=et.charAt(0)&&([et,mt]=function tc(De){const I=De.indexOf(".");return[De.substring(0,I),De.slice(I+1)]}(et)),this.engine.listen(this.namespaceId,Te,et,mt,Mt=>{this.factory.scheduleListenerCallback(Mt._data||-1,re,Mt)})}return this.delegate.listen(I,F,re)}}class ra{constructor(I,F,re){this.delegate=I,this.engine=F,this._zone=re,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,F.onRemovalComplete=(Te,et)=>{const mt=et?.parentNode(Te);mt&&et.removeChild(mt,Te)}}createRenderer(I,F){const Te=this.delegate.createRenderer(I,F);if(!I||!F?.data?.animation){const Yt=this._rendererCache;let Nn=Yt.get(Te);return Nn||(Nn=new wi("",Te,this.engine,()=>Yt.delete(Te)),Yt.set(Te,Nn)),Nn}const et=F.id,mt=F.id+"-"+this._currentId;this._currentId++,this.engine.register(mt,I);const Mt=Yt=>{Array.isArray(Yt)?Yt.forEach(Mt):this.engine.registerTrigger(et,mt,I,Yt.name,Yt)};return F.data.animation.forEach(Mt),new Dr(this,mt,Te,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(I,F,re){if(I>=0&&I<this._microtaskId)return void this._zone.run(()=>F(re));const Te=this._animationCallbacksBuffer;0==Te.length&&queueMicrotask(()=>{this._zone.run(()=>{Te.forEach(et=>{const[mt,Mt]=et;mt(Mt)}),this._animationCallbacksBuffer=[]})}),Te.push([F,re])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}var Al=S(177);const Vs=[{provide:ls,useFactory:function $c(){return new L}},{provide:Ys,useClass:(()=>{class De extends Ys{constructor(F,re,Te){super(F,re,Te,(0,M.WQX)(M.An2,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(re){return new(re||De)(M.KVO(Al.qQ),M.KVO(Zr),M.KVO(ls))}}static{this.\u0275prov=M.jDH({token:De,factory:De.\u0275fac})}}return De})()},{provide:M._9s,useFactory:function ou(De,I,F){return new ra(De,I,F)},deps:[l.B7,Ys,M.SKi]}],bu=[{provide:Zr,useFactory:()=>new xe},{provide:M.bc$,useValue:"BrowserAnimations"},...Vs];function nc(){return(0,M.ngT)("NgEagerAnimations"),[...bu]}var Ic=S(65),Ea=S(1946),Go=S(6648),Rs=S(8810),$l=S(5558),zr=S(6354),nt=S(9437),Me=S(9974),Z=S(4360),me=S(3669),ke=S(1584),dt=S(8750);function Bi(De,I,F){const re=I.encrypt(JSON.stringify(De.body),F);return De.clone({body:{encryptedData:re},headers:De.headers.set("X-Client-Public-Key",I.getClientPublicKey())})}var Ts=S(5794);const Ws=[Ea.F.MY_ARTIST_PROFILE];var tl=S(9242),Ga=S(4909);let Qa=(()=>{class De{http;prefix;suffix;constructor(F,re="/assets/i18n/",Te=".json"){this.http=F,this.prefix=re,this.suffix=Te}getTranslation(F){return this.http.get(`${this.prefix}${F}${this.suffix}`)}static \u0275fac=function(re){return new(re||De)(M.KVO(we.Qq),M.KVO(String),M.KVO(String))};static \u0275prov=M.jDH({token:De,factory:De.\u0275fac})}return De})();const gl={providers:[nc(),(0,h.lh)(Ae,(0,h.qQ)({skipInitialTransition:!0,onViewTransitionCreated(De){document.documentElement.style.setProperty("--view-transition-old-opacity","0"),document.documentElement.style.setProperty("--view-transition-new-opacity","1")}})),(0,we.$R)((0,we.ZZ)(),(0,we.b$)([(De,I)=>{const re=(0,M.WQX)(Al.qQ).defaultView,Te=(0,M.WQX)(Ic.L);if(re){const et=re.localStorage.getItem("jwt");let mt=De.headers;return et&&(mt=mt.set("Authorization",`Bearer ${et}`)),"POST"===De.method&&(mt=mt.set("X-Client-Public-Key",Te.getClientPublicKey())),I(De.clone({headers:mt}))}return I(De)},(De,I)=>{if(!ge.c.production){console.group(`API Call: ${De.method} ${De.url}`),console.log("Request Payload:",De.body);const F=Date.now();return I(De).pipe((0,oe.M)({next:re=>{if(re instanceof we.cS){const Te=Date.now();console.log("Response:",re.body),console.log(`Duration: ${Te-F}ms`),console.groupEnd()}},error:re=>{console.error("Error:",re),console.groupEnd()}}))}return I(De)},(De,I)=>{const F=(0,M.WQX)(H.LC),re=(0,M.WQX)(H.o2);return function li(De){return De.url.includes(Ea.F.UPLOAD_DOCUMENT)||De.url.includes(Ea.F.STRIPE_WEBHOOKS)||De.url.includes("/kwalhia-art")||De.url.includes("/artist-profiles")||De.url.includes("/vr-base-configs")||De.url.includes("/textures")||De.url.includes("/room-geometries")||De.url.includes("/three-d-objects")||De.url.includes("/film-uploads")||"GET"===De.method}(De)?I(De):(0,Go.H)(re.ensureKey()).pipe((0,$l.n)(Te=>{const et=Bi(De,F,Te);return I(et).pipe((0,zr.T)(mt=>function fi(De,I){if(!(De instanceof we.cS))return De;const F=De.body;if(!function Gs(De){return De&&"object"==typeof De&&void 0!==De.encryptedData&&(void 0===De.accessToken||"string"==typeof De.accessToken)}(F))return De;try{const re=I.decrypt(F.encryptedData),Te="string"==typeof re?JSON.parse(re):re,et=F.accessToken?{...Te,accessToken:F.accessToken}:Te;return De.clone({body:et})}catch(re){throw console.error("Decryption error:",re),re}}(mt,F)),(0,nt.W)(mt=>function fr(De,I,F,re,Te){return De instanceof we.yz&&(function Ns(De){return De.error?.message?.includes("MAC")||"Invalid MAC"===De.error?.error}(De)||De.message?.includes("Decryption error"))?(console.log("Encryption error detected, refreshing keys and retrying..."),re.clearKey(),(0,Go.H)(re.ensureKey()).pipe((0,$l.n)(et=>{const mt=Bi(I,Te,et);return F(mt)}))):(0,Rs.$)(()=>De)}(mt,De,I,re,F)),function Lt(De=1/0){let I;I=De&&"object"==typeof De?De:{count:De};const{count:F=1/0,delay:re,resetOnSuccess:Te=!1}=I;return F<=0?me.D:(0,Me.N)((et,mt)=>{let Kt,Mt=0;const Yt=()=>{let Nn=!1;Kt=et.subscribe((0,Z._)(mt,A=>{Te&&(Mt=0),mt.next(A)},void 0,A=>{if(Mt++<F){const Se=()=>{Kt?(Kt.unsubscribe(),Kt=null,Yt()):Nn=!0};if(null!=re){const ee="number"==typeof re?(0,ke.O)(re):(0,dt.Tg)(re(A,Mt)),fe=(0,Z._)(mt,()=>{fe.unsubscribe(),Se()},()=>{mt.complete()});ee.subscribe(fe)}else Se()}else mt.error(A)})),Nn&&(Kt.unsubscribe(),Kt=null,Yt())};Yt()})}({count:1,delay:500}))}))},(De,I)=>{const F=(0,M.WQX)(h.Ix),re=(0,M.WQX)(Ts.tw);return I(De).pipe((0,nt.W)(Te=>{if(401===Te.status){localStorage.removeItem("jwt");const mt=function yr(){try{const De=localStorage.getItem("jwt");if(!De)return null;const[,I]=De.split(".");return JSON.parse(atob(I)).sub}catch{return null}}();mt&&sessionStorage.removeItem(`akashicRecords-v2-${mt}`),F.navigate([Ea.S.HOME])}return 404===Te.status&&Ws.some(mt=>De.url.includes(mt))||re.error(function Mn(De){switch(De.status){case 401:return"Please login again.";case 403:return"Access denied.";case 0:return"Network error. Please check your connection.";default:return"An unexpected error occurred."}}(Te)),(0,Rs.$)(()=>Te)}))}])),(0,M.oKB)(tl.tA),{provide:tl.gq,useValue:ge.c.recaptchaSiteKey},(0,M.oKB)(we.q1,Ga.h.forRoot({defaultLanguage:"en",useDefaultLang:!0,loader:{provide:Ga.Wr,useFactory:function jl(De){return new Qa(De,"./assets/i18n/",".json")},deps:[we.Qq]}}))]};var Xl=S(4221);let bo=(()=>{class De{constructor(F,re){this.authService=F,this.themeService=re,this.title="Kwalhia",this.recaptchaManager=(0,M.WQX)(H.gZ),this.languageInit=(0,M.WQX)(H.ov),this.keyManagerService=(0,M.WQX)(H.o2),this.showRecaptchaBadge=(0,M.EWP)(()=>this.recaptchaManager.showBadge()),this.recaptchaManager.showBadge()||this.recaptchaManager.hideBadge()}ngOnInit(){this.themeService.initializeTheme(),this.languageInit.initializeLanguage(),this.authService.updateAuthState().then(F=>{console.log("Auth state initialized:",F)}),this.keyManagerService.ensureKey().then(()=>{console.log("Encryption key ready")}),ge.c.production&&(window.productionLog("%cStop!","color: red; font-size: 40px; font-weight: bold; background-color: black; border-radius:30px; padding: 9px;"),window.productionLog("%c\n      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n      @@@@@@@@@@@@*             .@@@@@@@@@@@@@@\n      &@@@@@@@@@@@                  @@@@@@@@@@@@@\n      @@@@@@@@@.                      .@@@@@@@@@@@@@\n      @@%                               @@@@@@@@@@@@@@@@@/.\n                                            .@@@@@@@@@@@@@@@@@@@@@@@@@\n                     .@@@@@@@@@@@@@@@%\n               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.\n          &@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n       @@@@@@*    @@@@@@@@@@@@@@@@@@@@@@@@@       @@@@@@@@@.\n      @@@@@@        @@@@@@@@@@@@@@@@@@@@@@@@@            @@@@@@@@@&\n      &@@@@           @@@@@@@@@@@@@@@@@@@@@@@@@             .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n      @@@@              @@@@@@@@@@@@@@@@@@@@@@@           @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n      /@@@@@@@@@*           #@@@@@@@@@@@@@@@@@@@       &@@@@@@@@@.                      *&@@@@\n              (@@@@@@@@@@@&(.  @@@@@@@@@@@@@@@@@@@@@@@@@@@@\n                   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*\n                     @@@@@@@@@@@@@@@@@@@@%\n                     @@@@@@@@@   @@@@@@@@@@@\n                     @@@@@@@@*      @@@@@@@@@@@\n                    @@@@@@@@@          @@@@@@@@@@#                                .@@@@@@@@@\n                   @@@@@@@@@@              @@@@@@@@@@                            @@        #@@\n                  @@@@@@@@@@@                 .@@@@@@@@@/                        @@  @* @&  #@,\n                   @@@@@@@@@%                      @@@@@@@@@/                     @@   .@.   @&\n                    @@@@@@@@                           @@@@@@@@@@                           @@\n                     @@@@@@@                               *@@@@@@@@@%                     @@,\n                     (@@@@@@                                    &@@@@@@@@@%              @@@\n                      @@@@@@                                         .@@@@@@@@@@&    @@@@,\n                      .@@@@@                                                &@@@@@@@@@@@@@@@\n                       @@@@@                                                         .#@@@@@@@&.\n                        (@&","color:rgb(187, 177, 255); font-size: 1.2vh; line-height: 1.1; font-family: monospace; white-space: pre;"),window.productionLog("%c\u26a0\ufe0f Warning: This is a developer-only area. If anyone instructed you to paste code here, STOP! This is likely a scam attempt to steal your personal information or hack your account. Never paste code you dont fully understand into the developer console","font-size: 16px;")),console.log("App component started, on development")}static{this.\u0275fac=function(re){return new(re||De)(M.rXU(H.uR),M.rXU(H.Fs))}}static{this.\u0275cmp=M.VBU({type:De,selectors:[["app-root"]],standalone:!0,features:[M.aNF],decls:2,vars:2,template:function(re,Te){1&re&&(M.j41(0,"div"),M.nrm(1,"router-outlet"),M.k0s()),2&re&&M.AVh("hide-recaptcha",!Te.showRecaptchaBadge())},dependencies:[h.n3,Xl.UN],styles:[".hide-recaptcha[_ngcontent-%COMP%]   .grecaptcha-badge[_ngcontent-%COMP%]{visibility:hidden!important;opacity:0!important;transition:visibility 0s,opacity .5s linear}"]})}}return De})();const Aa=console.log;ge.c.production&&(console.log=function(){},console.warn=function(){},console.error=function(){},console.info=function(){},console.debug=function(){},window.productionLog=function(...De){Aa.apply(console,De)});const mc={...gl,providers:[...gl.providers||[],nc(),(0,Ts.DP)({timeOut:5e3,positionClass:"toast-bottom-right",preventDuplicates:!0,progressBar:!0})]};(0,l.B8)(bo,mc).catch(De=>console.error(De))},917:function(Dt,qe,S){!function(l,M){"use strict";function h(ae,x){if(!ae)throw new Error(x||"Assertion failed")}function ge(ae,x){ae.super_=x;var T=function(){};T.prototype=x.prototype,ae.prototype=new T,ae.prototype.constructor=ae}function W(ae,x,T){if(W.isBN(ae))return ae;this.negative=0,this.words=null,this.length=0,this.red=null,null!==ae&&(("le"===x||"be"===x)&&(T=x,x=10),this._init(ae||0,x||10,T||"be"))}var X;"object"==typeof l?l.exports=W:M.BN=W,W.BN=W,W.wordSize=26;try{X=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:S(7790).Buffer}catch{}function oe(ae,x){var T=ae.charCodeAt(x);return T>=65&&T<=70?T-55:T>=97&&T<=102?T-87:T-48&15}function H(ae,x,T){var K=oe(ae,T);return T-1>=x&&(K|=oe(ae,T-1)<<4),K}function G(ae,x,T,K){for(var te=0,ve=Math.min(ae.length,T),Ce=x;Ce<ve;Ce++){var Be=ae.charCodeAt(Ce)-48;te*=K,te+=Be>=49?Be-49+10:Be>=17?Be-17+10:Be}return te}W.isBN=function(x){return x instanceof W||null!==x&&"object"==typeof x&&x.constructor.wordSize===W.wordSize&&Array.isArray(x.words)},W.max=function(x,T){return x.cmp(T)>0?x:T},W.min=function(x,T){return x.cmp(T)<0?x:T},W.prototype._init=function(x,T,K){if("number"==typeof x)return this._initNumber(x,T,K);if("object"==typeof x)return this._initArray(x,T,K);"hex"===T&&(T=16),h(T===(0|T)&&T>=2&&T<=36);var te=0;"-"===(x=x.toString().replace(/\s+/g,""))[0]&&(te++,this.negative=1),te<x.length&&(16===T?this._parseHex(x,te,K):(this._parseBase(x,T,te),"le"===K&&this._initArray(this.toArray(),T,K)))},W.prototype._initNumber=function(x,T,K){x<0&&(this.negative=1,x=-x),x<67108864?(this.words=[67108863&x],this.length=1):x<4503599627370496?(this.words=[67108863&x,x/67108864&67108863],this.length=2):(h(x<9007199254740992),this.words=[67108863&x,x/67108864&67108863,1],this.length=3),"le"===K&&this._initArray(this.toArray(),T,K)},W.prototype._initArray=function(x,T,K){if(h("number"==typeof x.length),x.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(x.length/3),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var ve,Ce,Be=0;if("be"===K)for(te=x.length-1,ve=0;te>=0;te-=3)this.words[ve]|=(Ce=x[te]|x[te-1]<<8|x[te-2]<<16)<<Be&67108863,this.words[ve+1]=Ce>>>26-Be&67108863,(Be+=24)>=26&&(Be-=26,ve++);else if("le"===K)for(te=0,ve=0;te<x.length;te+=3)this.words[ve]|=(Ce=x[te]|x[te+1]<<8|x[te+2]<<16)<<Be&67108863,this.words[ve+1]=Ce>>>26-Be&67108863,(Be+=24)>=26&&(Be-=26,ve++);return this.strip()},W.prototype._parseHex=function(x,T,K){this.length=Math.ceil((x.length-T)/6),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var Be,ve=0,Ce=0;if("be"===K)for(te=x.length-1;te>=T;te-=2)Be=H(x,T,te)<<ve,this.words[Ce]|=67108863&Be,ve>=18?(ve-=18,this.words[Ce+=1]|=Be>>>26):ve+=8;else for(te=(x.length-T)%2==0?T+1:T;te<x.length;te+=2)Be=H(x,T,te)<<ve,this.words[Ce]|=67108863&Be,ve>=18?(ve-=18,this.words[Ce+=1]|=Be>>>26):ve+=8;this.strip()},W.prototype._parseBase=function(x,T,K){this.words=[0],this.length=1;for(var te=0,ve=1;ve<=67108863;ve*=T)te++;te--,ve=ve/T|0;for(var Ce=x.length-K,Be=Ce%te,Ne=Math.min(Ce,Ce-Be)+K,z=0,Fe=K;Fe<Ne;Fe+=te)z=G(x,Fe,Fe+te,T),this.imuln(ve),this.words[0]+z<67108864?this.words[0]+=z:this._iaddn(z);if(0!==Be){var Pt=1;for(z=G(x,Fe,x.length,T),Fe=0;Fe<Be;Fe++)Pt*=T;this.imuln(Pt),this.words[0]+z<67108864?this.words[0]+=z:this._iaddn(z)}this.strip()},W.prototype.copy=function(x){x.words=new Array(this.length);for(var T=0;T<this.length;T++)x.words[T]=this.words[T];x.length=this.length,x.negative=this.negative,x.red=this.red},W.prototype.clone=function(){var x=new W(null);return this.copy(x),x},W.prototype._expand=function(x){for(;this.length<x;)this.words[this.length++]=0;return this},W.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},W.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},W.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],P=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],q=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function ce(ae,x,T){T.negative=x.negative^ae.negative;var K=ae.length+x.length|0;T.length=K,K=K-1|0;var te=0|ae.words[0],ve=0|x.words[0],Ce=te*ve,Ne=Ce/67108864|0;T.words[0]=67108863&Ce;for(var z=1;z<K;z++){for(var Fe=Ne>>>26,Pt=67108863&Ne,ot=Math.min(z,x.length-1),Vt=Math.max(0,z-ae.length+1);Vt<=ot;Vt++)Fe+=(Ce=(te=0|ae.words[z-Vt|0])*(ve=0|x.words[Vt])+Pt)/67108864|0,Pt=67108863&Ce;T.words[z]=0|Pt,Ne=0|Fe}return 0!==Ne?T.words[z]=0|Ne:T.length--,T.strip()}W.prototype.toString=function(x,T){var K;if(T=0|T||1,16===(x=x||10)||"hex"===x){K="";for(var te=0,ve=0,Ce=0;Ce<this.length;Ce++){var Be=this.words[Ce],Ne=(16777215&(Be<<te|ve)).toString(16);ve=Be>>>24-te&16777215,(te+=2)>=26&&(te-=26,Ce--),K=0!==ve||Ce!==this.length-1?k[6-Ne.length]+Ne+K:Ne+K}for(0!==ve&&(K=ve.toString(16)+K);K.length%T!=0;)K="0"+K;return 0!==this.negative&&(K="-"+K),K}if(x===(0|x)&&x>=2&&x<=36){var z=P[x],Fe=q[x];K="";var Pt=this.clone();for(Pt.negative=0;!Pt.isZero();){var ot=Pt.modn(Fe).toString(x);K=(Pt=Pt.idivn(Fe)).isZero()?ot+K:k[z-ot.length]+ot+K}for(this.isZero()&&(K="0"+K);K.length%T!=0;)K="0"+K;return 0!==this.negative&&(K="-"+K),K}h(!1,"Base should be between 2 and 36")},W.prototype.toNumber=function(){var x=this.words[0];return 2===this.length?x+=67108864*this.words[1]:3===this.length&&1===this.words[2]?x+=4503599627370496+67108864*this.words[1]:this.length>2&&h(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-x:x},W.prototype.toJSON=function(){return this.toString(16)},W.prototype.toBuffer=function(x,T){return h(typeof X<"u"),this.toArrayLike(X,x,T)},W.prototype.toArray=function(x,T){return this.toArrayLike(Array,x,T)},W.prototype.toArrayLike=function(x,T,K){var te=this.byteLength(),ve=K||Math.max(1,te);h(te<=ve,"byte array longer than desired length"),h(ve>0,"Requested array length <= 0"),this.strip();var Ne,z,Ce="le"===T,Be=new x(ve),Fe=this.clone();if(Ce){for(z=0;!Fe.isZero();z++)Ne=Fe.andln(255),Fe.iushrn(8),Be[z]=Ne;for(;z<ve;z++)Be[z]=0}else{for(z=0;z<ve-te;z++)Be[z]=0;for(z=0;!Fe.isZero();z++)Ne=Fe.andln(255),Fe.iushrn(8),Be[ve-z-1]=Ne}return Be},W.prototype._countBits=Math.clz32?function(x){return 32-Math.clz32(x)}:function(x){var T=x,K=0;return T>=4096&&(K+=13,T>>>=13),T>=64&&(K+=7,T>>>=7),T>=8&&(K+=4,T>>>=4),T>=2&&(K+=2,T>>>=2),K+T},W.prototype._zeroBits=function(x){if(0===x)return 26;var T=x,K=0;return 8191&T||(K+=13,T>>>=13),127&T||(K+=7,T>>>=7),15&T||(K+=4,T>>>=4),3&T||(K+=2,T>>>=2),1&T||K++,K},W.prototype.bitLength=function(){var T=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+T},W.prototype.zeroBits=function(){if(this.isZero())return 0;for(var x=0,T=0;T<this.length;T++){var K=this._zeroBits(this.words[T]);if(x+=K,26!==K)break}return x},W.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},W.prototype.toTwos=function(x){return 0!==this.negative?this.abs().inotn(x).iaddn(1):this.clone()},W.prototype.fromTwos=function(x){return this.testn(x-1)?this.notn(x).iaddn(1).ineg():this.clone()},W.prototype.isNeg=function(){return 0!==this.negative},W.prototype.neg=function(){return this.clone().ineg()},W.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},W.prototype.iuor=function(x){for(;this.length<x.length;)this.words[this.length++]=0;for(var T=0;T<x.length;T++)this.words[T]=this.words[T]|x.words[T];return this.strip()},W.prototype.ior=function(x){return h(!(this.negative|x.negative)),this.iuor(x)},W.prototype.or=function(x){return this.length>x.length?this.clone().ior(x):x.clone().ior(this)},W.prototype.uor=function(x){return this.length>x.length?this.clone().iuor(x):x.clone().iuor(this)},W.prototype.iuand=function(x){var T;T=this.length>x.length?x:this;for(var K=0;K<T.length;K++)this.words[K]=this.words[K]&x.words[K];return this.length=T.length,this.strip()},W.prototype.iand=function(x){return h(!(this.negative|x.negative)),this.iuand(x)},W.prototype.and=function(x){return this.length>x.length?this.clone().iand(x):x.clone().iand(this)},W.prototype.uand=function(x){return this.length>x.length?this.clone().iuand(x):x.clone().iuand(this)},W.prototype.iuxor=function(x){var T,K;this.length>x.length?(T=this,K=x):(T=x,K=this);for(var te=0;te<K.length;te++)this.words[te]=T.words[te]^K.words[te];if(this!==T)for(;te<T.length;te++)this.words[te]=T.words[te];return this.length=T.length,this.strip()},W.prototype.ixor=function(x){return h(!(this.negative|x.negative)),this.iuxor(x)},W.prototype.xor=function(x){return this.length>x.length?this.clone().ixor(x):x.clone().ixor(this)},W.prototype.uxor=function(x){return this.length>x.length?this.clone().iuxor(x):x.clone().iuxor(this)},W.prototype.inotn=function(x){h("number"==typeof x&&x>=0);var T=0|Math.ceil(x/26),K=x%26;this._expand(T),K>0&&T--;for(var te=0;te<T;te++)this.words[te]=67108863&~this.words[te];return K>0&&(this.words[te]=~this.words[te]&67108863>>26-K),this.strip()},W.prototype.notn=function(x){return this.clone().inotn(x)},W.prototype.setn=function(x,T){h("number"==typeof x&&x>=0);var K=x/26|0,te=x%26;return this._expand(K+1),this.words[K]=T?this.words[K]|1<<te:this.words[K]&~(1<<te),this.strip()},W.prototype.iadd=function(x){var T,K,te;if(0!==this.negative&&0===x.negative)return this.negative=0,T=this.isub(x),this.negative^=1,this._normSign();if(0===this.negative&&0!==x.negative)return x.negative=0,T=this.isub(x),x.negative=1,T._normSign();this.length>x.length?(K=this,te=x):(K=x,te=this);for(var ve=0,Ce=0;Ce<te.length;Ce++)this.words[Ce]=67108863&(T=(0|K.words[Ce])+(0|te.words[Ce])+ve),ve=T>>>26;for(;0!==ve&&Ce<K.length;Ce++)this.words[Ce]=67108863&(T=(0|K.words[Ce])+ve),ve=T>>>26;if(this.length=K.length,0!==ve)this.words[this.length]=ve,this.length++;else if(K!==this)for(;Ce<K.length;Ce++)this.words[Ce]=K.words[Ce];return this},W.prototype.add=function(x){var T;return 0!==x.negative&&0===this.negative?(x.negative=0,T=this.sub(x),x.negative^=1,T):0===x.negative&&0!==this.negative?(this.negative=0,T=x.sub(this),this.negative=1,T):this.length>x.length?this.clone().iadd(x):x.clone().iadd(this)},W.prototype.isub=function(x){if(0!==x.negative){x.negative=0;var T=this.iadd(x);return x.negative=1,T._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(x),this.negative=1,this._normSign();var te,ve,K=this.cmp(x);if(0===K)return this.negative=0,this.length=1,this.words[0]=0,this;K>0?(te=this,ve=x):(te=x,ve=this);for(var Ce=0,Be=0;Be<ve.length;Be++)Ce=(T=(0|te.words[Be])-(0|ve.words[Be])+Ce)>>26,this.words[Be]=67108863&T;for(;0!==Ce&&Be<te.length;Be++)Ce=(T=(0|te.words[Be])+Ce)>>26,this.words[Be]=67108863&T;if(0===Ce&&Be<te.length&&te!==this)for(;Be<te.length;Be++)this.words[Be]=te.words[Be];return this.length=Math.max(this.length,Be),te!==this&&(this.negative=1),this.strip()},W.prototype.sub=function(x){return this.clone().isub(x)};var he=function(x,T,K){var Ne,z,Fe,te=x.words,ve=T.words,Ce=K.words,Be=0,Pt=0|te[0],ot=8191&Pt,Vt=Pt>>>13,vt=0|te[1],st=8191&vt,Ft=vt>>>13,$e=0|te[2],Xe=8191&$e,kt=$e>>>13,cn=0|te[3],rn=8191&cn,gn=cn>>>13,Xt=0|te[4],hn=8191&Xt,ct=Xt>>>13,Ot=0|te[5],It=8191&Ot,an=Ot>>>13,Fn=0|te[6],Xn=8191&Fn,Zn=Fn>>>13,Hr=0|te[7],Hn=8191&Hr,Dn=Hr>>>13,Un=0|te[8],Pi=8191&Un,Qi=Un>>>13,Rr=0|te[9],ii=8191&Rr,yi=Rr>>>13,uo=0|ve[0],Yn=8191&uo,cr=uo>>>13,mr=0|ve[1],Si=8191&mr,Ir=mr>>>13,Kr=0|ve[2],gr=8191&Kr,Zr=Kr>>>13,ls=0|ve[3],ar=8191&ls,Rt=ls>>>13,zt=0|ve[4],at=8191&zt,St=zt>>>13,fn=0|ve[5],vn=8191&fn,kn=fn>>>13,zi=0|ve[6],oi=8191&zi,gi=zi>>>13,Nr=0|ve[7],$n=8191&Nr,hr=Nr>>>13,cs=0|ve[8],Qr=8191&cs,zn=cs>>>13,Kn=0|ve[9],xi=8191&Kn,Sr=Kn>>>13;K.negative=x.negative^T.negative,K.length=19;var us=(Be+(Ne=Math.imul(ot,Yn))|0)+((8191&(z=(z=Math.imul(ot,cr))+Math.imul(Vt,Yn)|0))<<13)|0;Be=((Fe=Math.imul(Vt,cr))+(z>>>13)|0)+(us>>>26)|0,us&=67108863,Ne=Math.imul(st,Yn),z=(z=Math.imul(st,cr))+Math.imul(Ft,Yn)|0,Fe=Math.imul(Ft,cr);var Fs=(Be+(Ne=Ne+Math.imul(ot,Si)|0)|0)+((8191&(z=(z=z+Math.imul(ot,Ir)|0)+Math.imul(Vt,Si)|0))<<13)|0;Be=((Fe=Fe+Math.imul(Vt,Ir)|0)+(z>>>13)|0)+(Fs>>>26)|0,Fs&=67108863,Ne=Math.imul(Xe,Yn),z=(z=Math.imul(Xe,cr))+Math.imul(kt,Yn)|0,Fe=Math.imul(kt,cr),Ne=Ne+Math.imul(st,Si)|0,z=(z=z+Math.imul(st,Ir)|0)+Math.imul(Ft,Si)|0,Fe=Fe+Math.imul(Ft,Ir)|0;var hs=(Be+(Ne=Ne+Math.imul(ot,gr)|0)|0)+((8191&(z=(z=z+Math.imul(ot,Zr)|0)+Math.imul(Vt,gr)|0))<<13)|0;Be=((Fe=Fe+Math.imul(Vt,Zr)|0)+(z>>>13)|0)+(hs>>>26)|0,hs&=67108863,Ne=Math.imul(rn,Yn),z=(z=Math.imul(rn,cr))+Math.imul(gn,Yn)|0,Fe=Math.imul(gn,cr),Ne=Ne+Math.imul(Xe,Si)|0,z=(z=z+Math.imul(Xe,Ir)|0)+Math.imul(kt,Si)|0,Fe=Fe+Math.imul(kt,Ir)|0,Ne=Ne+Math.imul(st,gr)|0,z=(z=z+Math.imul(st,Zr)|0)+Math.imul(Ft,gr)|0,Fe=Fe+Math.imul(Ft,Zr)|0;var ir=(Be+(Ne=Ne+Math.imul(ot,ar)|0)|0)+((8191&(z=(z=z+Math.imul(ot,Rt)|0)+Math.imul(Vt,ar)|0))<<13)|0;Be=((Fe=Fe+Math.imul(Vt,Rt)|0)+(z>>>13)|0)+(ir>>>26)|0,ir&=67108863,Ne=Math.imul(hn,Yn),z=(z=Math.imul(hn,cr))+Math.imul(ct,Yn)|0,Fe=Math.imul(ct,cr),Ne=Ne+Math.imul(rn,Si)|0,z=(z=z+Math.imul(rn,Ir)|0)+Math.imul(gn,Si)|0,Fe=Fe+Math.imul(gn,Ir)|0,Ne=Ne+Math.imul(Xe,gr)|0,z=(z=z+Math.imul(Xe,Zr)|0)+Math.imul(kt,gr)|0,Fe=Fe+Math.imul(kt,Zr)|0,Ne=Ne+Math.imul(st,ar)|0,z=(z=z+Math.imul(st,Rt)|0)+Math.imul(Ft,ar)|0,Fe=Fe+Math.imul(Ft,Rt)|0;var Ks=(Be+(Ne=Ne+Math.imul(ot,at)|0)|0)+((8191&(z=(z=z+Math.imul(ot,St)|0)+Math.imul(Vt,at)|0))<<13)|0;Be=((Fe=Fe+Math.imul(Vt,St)|0)+(z>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,Ne=Math.imul(It,Yn),z=(z=Math.imul(It,cr))+Math.imul(an,Yn)|0,Fe=Math.imul(an,cr),Ne=Ne+Math.imul(hn,Si)|0,z=(z=z+Math.imul(hn,Ir)|0)+Math.imul(ct,Si)|0,Fe=Fe+Math.imul(ct,Ir)|0,Ne=Ne+Math.imul(rn,gr)|0,z=(z=z+Math.imul(rn,Zr)|0)+Math.imul(gn,gr)|0,Fe=Fe+Math.imul(gn,Zr)|0,Ne=Ne+Math.imul(Xe,ar)|0,z=(z=z+Math.imul(Xe,Rt)|0)+Math.imul(kt,ar)|0,Fe=Fe+Math.imul(kt,Rt)|0,Ne=Ne+Math.imul(st,at)|0,z=(z=z+Math.imul(st,St)|0)+Math.imul(Ft,at)|0,Fe=Fe+Math.imul(Ft,St)|0;var Mo=(Be+(Ne=Ne+Math.imul(ot,vn)|0)|0)+((8191&(z=(z=z+Math.imul(ot,kn)|0)+Math.imul(Vt,vn)|0))<<13)|0;Be=((Fe=Fe+Math.imul(Vt,kn)|0)+(z>>>13)|0)+(Mo>>>26)|0,Mo&=67108863,Ne=Math.imul(Xn,Yn),z=(z=Math.imul(Xn,cr))+Math.imul(Zn,Yn)|0,Fe=Math.imul(Zn,cr),Ne=Ne+Math.imul(It,Si)|0,z=(z=z+Math.imul(It,Ir)|0)+Math.imul(an,Si)|0,Fe=Fe+Math.imul(an,Ir)|0,Ne=Ne+Math.imul(hn,gr)|0,z=(z=z+Math.imul(hn,Zr)|0)+Math.imul(ct,gr)|0,Fe=Fe+Math.imul(ct,Zr)|0,Ne=Ne+Math.imul(rn,ar)|0,z=(z=z+Math.imul(rn,Rt)|0)+Math.imul(gn,ar)|0,Fe=Fe+Math.imul(gn,Rt)|0,Ne=Ne+Math.imul(Xe,at)|0,z=(z=z+Math.imul(Xe,St)|0)+Math.imul(kt,at)|0,Fe=Fe+Math.imul(kt,St)|0,Ne=Ne+Math.imul(st,vn)|0,z=(z=z+Math.imul(st,kn)|0)+Math.imul(Ft,vn)|0,Fe=Fe+Math.imul(Ft,kn)|0;var As=(Be+(Ne=Ne+Math.imul(ot,oi)|0)|0)+((8191&(z=(z=z+Math.imul(ot,gi)|0)+Math.imul(Vt,oi)|0))<<13)|0;Be=((Fe=Fe+Math.imul(Vt,gi)|0)+(z>>>13)|0)+(As>>>26)|0,As&=67108863,Ne=Math.imul(Hn,Yn),z=(z=Math.imul(Hn,cr))+Math.imul(Dn,Yn)|0,Fe=Math.imul(Dn,cr),Ne=Ne+Math.imul(Xn,Si)|0,z=(z=z+Math.imul(Xn,Ir)|0)+Math.imul(Zn,Si)|0,Fe=Fe+Math.imul(Zn,Ir)|0,Ne=Ne+Math.imul(It,gr)|0,z=(z=z+Math.imul(It,Zr)|0)+Math.imul(an,gr)|0,Fe=Fe+Math.imul(an,Zr)|0,Ne=Ne+Math.imul(hn,ar)|0,z=(z=z+Math.imul(hn,Rt)|0)+Math.imul(ct,ar)|0,Fe=Fe+Math.imul(ct,Rt)|0,Ne=Ne+Math.imul(rn,at)|0,z=(z=z+Math.imul(rn,St)|0)+Math.imul(gn,at)|0,Fe=Fe+Math.imul(gn,St)|0,Ne=Ne+Math.imul(Xe,vn)|0,z=(z=z+Math.imul(Xe,kn)|0)+Math.imul(kt,vn)|0,Fe=Fe+Math.imul(kt,kn)|0,Ne=Ne+Math.imul(st,oi)|0,z=(z=z+Math.imul(st,gi)|0)+Math.imul(Ft,oi)|0,Fe=Fe+Math.imul(Ft,gi)|0;var Us=(Be+(Ne=Ne+Math.imul(ot,$n)|0)|0)+((8191&(z=(z=z+Math.imul(ot,hr)|0)+Math.imul(Vt,$n)|0))<<13)|0;Be=((Fe=Fe+Math.imul(Vt,hr)|0)+(z>>>13)|0)+(Us>>>26)|0,Us&=67108863,Ne=Math.imul(Pi,Yn),z=(z=Math.imul(Pi,cr))+Math.imul(Qi,Yn)|0,Fe=Math.imul(Qi,cr),Ne=Ne+Math.imul(Hn,Si)|0,z=(z=z+Math.imul(Hn,Ir)|0)+Math.imul(Dn,Si)|0,Fe=Fe+Math.imul(Dn,Ir)|0,Ne=Ne+Math.imul(Xn,gr)|0,z=(z=z+Math.imul(Xn,Zr)|0)+Math.imul(Zn,gr)|0,Fe=Fe+Math.imul(Zn,Zr)|0,Ne=Ne+Math.imul(It,ar)|0,z=(z=z+Math.imul(It,Rt)|0)+Math.imul(an,ar)|0,Fe=Fe+Math.imul(an,Rt)|0,Ne=Ne+Math.imul(hn,at)|0,z=(z=z+Math.imul(hn,St)|0)+Math.imul(ct,at)|0,Fe=Fe+Math.imul(ct,St)|0,Ne=Ne+Math.imul(rn,vn)|0,z=(z=z+Math.imul(rn,kn)|0)+Math.imul(gn,vn)|0,Fe=Fe+Math.imul(gn,kn)|0,Ne=Ne+Math.imul(Xe,oi)|0,z=(z=z+Math.imul(Xe,gi)|0)+Math.imul(kt,oi)|0,Fe=Fe+Math.imul(kt,gi)|0,Ne=Ne+Math.imul(st,$n)|0,z=(z=z+Math.imul(st,hr)|0)+Math.imul(Ft,$n)|0,Fe=Fe+Math.imul(Ft,hr)|0;var vs=(Be+(Ne=Ne+Math.imul(ot,Qr)|0)|0)+((8191&(z=(z=z+Math.imul(ot,zn)|0)+Math.imul(Vt,Qr)|0))<<13)|0;Be=((Fe=Fe+Math.imul(Vt,zn)|0)+(z>>>13)|0)+(vs>>>26)|0,vs&=67108863,Ne=Math.imul(ii,Yn),z=(z=Math.imul(ii,cr))+Math.imul(yi,Yn)|0,Fe=Math.imul(yi,cr),Ne=Ne+Math.imul(Pi,Si)|0,z=(z=z+Math.imul(Pi,Ir)|0)+Math.imul(Qi,Si)|0,Fe=Fe+Math.imul(Qi,Ir)|0,Ne=Ne+Math.imul(Hn,gr)|0,z=(z=z+Math.imul(Hn,Zr)|0)+Math.imul(Dn,gr)|0,Fe=Fe+Math.imul(Dn,Zr)|0,Ne=Ne+Math.imul(Xn,ar)|0,z=(z=z+Math.imul(Xn,Rt)|0)+Math.imul(Zn,ar)|0,Fe=Fe+Math.imul(Zn,Rt)|0,Ne=Ne+Math.imul(It,at)|0,z=(z=z+Math.imul(It,St)|0)+Math.imul(an,at)|0,Fe=Fe+Math.imul(an,St)|0,Ne=Ne+Math.imul(hn,vn)|0,z=(z=z+Math.imul(hn,kn)|0)+Math.imul(ct,vn)|0,Fe=Fe+Math.imul(ct,kn)|0,Ne=Ne+Math.imul(rn,oi)|0,z=(z=z+Math.imul(rn,gi)|0)+Math.imul(gn,oi)|0,Fe=Fe+Math.imul(gn,gi)|0,Ne=Ne+Math.imul(Xe,$n)|0,z=(z=z+Math.imul(Xe,hr)|0)+Math.imul(kt,$n)|0,Fe=Fe+Math.imul(kt,hr)|0,Ne=Ne+Math.imul(st,Qr)|0,z=(z=z+Math.imul(st,zn)|0)+Math.imul(Ft,Qr)|0,Fe=Fe+Math.imul(Ft,zn)|0;var ho=(Be+(Ne=Ne+Math.imul(ot,xi)|0)|0)+((8191&(z=(z=z+Math.imul(ot,Sr)|0)+Math.imul(Vt,xi)|0))<<13)|0;Be=((Fe=Fe+Math.imul(Vt,Sr)|0)+(z>>>13)|0)+(ho>>>26)|0,ho&=67108863,Ne=Math.imul(ii,Si),z=(z=Math.imul(ii,Ir))+Math.imul(yi,Si)|0,Fe=Math.imul(yi,Ir),Ne=Ne+Math.imul(Pi,gr)|0,z=(z=z+Math.imul(Pi,Zr)|0)+Math.imul(Qi,gr)|0,Fe=Fe+Math.imul(Qi,Zr)|0,Ne=Ne+Math.imul(Hn,ar)|0,z=(z=z+Math.imul(Hn,Rt)|0)+Math.imul(Dn,ar)|0,Fe=Fe+Math.imul(Dn,Rt)|0,Ne=Ne+Math.imul(Xn,at)|0,z=(z=z+Math.imul(Xn,St)|0)+Math.imul(Zn,at)|0,Fe=Fe+Math.imul(Zn,St)|0,Ne=Ne+Math.imul(It,vn)|0,z=(z=z+Math.imul(It,kn)|0)+Math.imul(an,vn)|0,Fe=Fe+Math.imul(an,kn)|0,Ne=Ne+Math.imul(hn,oi)|0,z=(z=z+Math.imul(hn,gi)|0)+Math.imul(ct,oi)|0,Fe=Fe+Math.imul(ct,gi)|0,Ne=Ne+Math.imul(rn,$n)|0,z=(z=z+Math.imul(rn,hr)|0)+Math.imul(gn,$n)|0,Fe=Fe+Math.imul(gn,hr)|0,Ne=Ne+Math.imul(Xe,Qr)|0,z=(z=z+Math.imul(Xe,zn)|0)+Math.imul(kt,Qr)|0,Fe=Fe+Math.imul(kt,zn)|0;var Qe=(Be+(Ne=Ne+Math.imul(st,xi)|0)|0)+((8191&(z=(z=z+Math.imul(st,Sr)|0)+Math.imul(Ft,xi)|0))<<13)|0;Be=((Fe=Fe+Math.imul(Ft,Sr)|0)+(z>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,Ne=Math.imul(ii,gr),z=(z=Math.imul(ii,Zr))+Math.imul(yi,gr)|0,Fe=Math.imul(yi,Zr),Ne=Ne+Math.imul(Pi,ar)|0,z=(z=z+Math.imul(Pi,Rt)|0)+Math.imul(Qi,ar)|0,Fe=Fe+Math.imul(Qi,Rt)|0,Ne=Ne+Math.imul(Hn,at)|0,z=(z=z+Math.imul(Hn,St)|0)+Math.imul(Dn,at)|0,Fe=Fe+Math.imul(Dn,St)|0,Ne=Ne+Math.imul(Xn,vn)|0,z=(z=z+Math.imul(Xn,kn)|0)+Math.imul(Zn,vn)|0,Fe=Fe+Math.imul(Zn,kn)|0,Ne=Ne+Math.imul(It,oi)|0,z=(z=z+Math.imul(It,gi)|0)+Math.imul(an,oi)|0,Fe=Fe+Math.imul(an,gi)|0,Ne=Ne+Math.imul(hn,$n)|0,z=(z=z+Math.imul(hn,hr)|0)+Math.imul(ct,$n)|0,Fe=Fe+Math.imul(ct,hr)|0,Ne=Ne+Math.imul(rn,Qr)|0,z=(z=z+Math.imul(rn,zn)|0)+Math.imul(gn,Qr)|0,Fe=Fe+Math.imul(gn,zn)|0;var L=(Be+(Ne=Ne+Math.imul(Xe,xi)|0)|0)+((8191&(z=(z=z+Math.imul(Xe,Sr)|0)+Math.imul(kt,xi)|0))<<13)|0;Be=((Fe=Fe+Math.imul(kt,Sr)|0)+(z>>>13)|0)+(L>>>26)|0,L&=67108863,Ne=Math.imul(ii,ar),z=(z=Math.imul(ii,Rt))+Math.imul(yi,ar)|0,Fe=Math.imul(yi,Rt),Ne=Ne+Math.imul(Pi,at)|0,z=(z=z+Math.imul(Pi,St)|0)+Math.imul(Qi,at)|0,Fe=Fe+Math.imul(Qi,St)|0,Ne=Ne+Math.imul(Hn,vn)|0,z=(z=z+Math.imul(Hn,kn)|0)+Math.imul(Dn,vn)|0,Fe=Fe+Math.imul(Dn,kn)|0,Ne=Ne+Math.imul(Xn,oi)|0,z=(z=z+Math.imul(Xn,gi)|0)+Math.imul(Zn,oi)|0,Fe=Fe+Math.imul(Zn,gi)|0,Ne=Ne+Math.imul(It,$n)|0,z=(z=z+Math.imul(It,hr)|0)+Math.imul(an,$n)|0,Fe=Fe+Math.imul(an,hr)|0,Ne=Ne+Math.imul(hn,Qr)|0,z=(z=z+Math.imul(hn,zn)|0)+Math.imul(ct,Qr)|0,Fe=Fe+Math.imul(ct,zn)|0;var $=(Be+(Ne=Ne+Math.imul(rn,xi)|0)|0)+((8191&(z=(z=z+Math.imul(rn,Sr)|0)+Math.imul(gn,xi)|0))<<13)|0;Be=((Fe=Fe+Math.imul(gn,Sr)|0)+(z>>>13)|0)+($>>>26)|0,$&=67108863,Ne=Math.imul(ii,at),z=(z=Math.imul(ii,St))+Math.imul(yi,at)|0,Fe=Math.imul(yi,St),Ne=Ne+Math.imul(Pi,vn)|0,z=(z=z+Math.imul(Pi,kn)|0)+Math.imul(Qi,vn)|0,Fe=Fe+Math.imul(Qi,kn)|0,Ne=Ne+Math.imul(Hn,oi)|0,z=(z=z+Math.imul(Hn,gi)|0)+Math.imul(Dn,oi)|0,Fe=Fe+Math.imul(Dn,gi)|0,Ne=Ne+Math.imul(Xn,$n)|0,z=(z=z+Math.imul(Xn,hr)|0)+Math.imul(Zn,$n)|0,Fe=Fe+Math.imul(Zn,hr)|0,Ne=Ne+Math.imul(It,Qr)|0,z=(z=z+Math.imul(It,zn)|0)+Math.imul(an,Qr)|0,Fe=Fe+Math.imul(an,zn)|0;var ue=(Be+(Ne=Ne+Math.imul(hn,xi)|0)|0)+((8191&(z=(z=z+Math.imul(hn,Sr)|0)+Math.imul(ct,xi)|0))<<13)|0;Be=((Fe=Fe+Math.imul(ct,Sr)|0)+(z>>>13)|0)+(ue>>>26)|0,ue&=67108863,Ne=Math.imul(ii,vn),z=(z=Math.imul(ii,kn))+Math.imul(yi,vn)|0,Fe=Math.imul(yi,kn),Ne=Ne+Math.imul(Pi,oi)|0,z=(z=z+Math.imul(Pi,gi)|0)+Math.imul(Qi,oi)|0,Fe=Fe+Math.imul(Qi,gi)|0,Ne=Ne+Math.imul(Hn,$n)|0,z=(z=z+Math.imul(Hn,hr)|0)+Math.imul(Dn,$n)|0,Fe=Fe+Math.imul(Dn,hr)|0,Ne=Ne+Math.imul(Xn,Qr)|0,z=(z=z+Math.imul(Xn,zn)|0)+Math.imul(Zn,Qr)|0,Fe=Fe+Math.imul(Zn,zn)|0;var Ze=(Be+(Ne=Ne+Math.imul(It,xi)|0)|0)+((8191&(z=(z=z+Math.imul(It,Sr)|0)+Math.imul(an,xi)|0))<<13)|0;Be=((Fe=Fe+Math.imul(an,Sr)|0)+(z>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,Ne=Math.imul(ii,oi),z=(z=Math.imul(ii,gi))+Math.imul(yi,oi)|0,Fe=Math.imul(yi,gi),Ne=Ne+Math.imul(Pi,$n)|0,z=(z=z+Math.imul(Pi,hr)|0)+Math.imul(Qi,$n)|0,Fe=Fe+Math.imul(Qi,hr)|0,Ne=Ne+Math.imul(Hn,Qr)|0,z=(z=z+Math.imul(Hn,zn)|0)+Math.imul(Dn,Qr)|0,Fe=Fe+Math.imul(Dn,zn)|0;var pt=(Be+(Ne=Ne+Math.imul(Xn,xi)|0)|0)+((8191&(z=(z=z+Math.imul(Xn,Sr)|0)+Math.imul(Zn,xi)|0))<<13)|0;Be=((Fe=Fe+Math.imul(Zn,Sr)|0)+(z>>>13)|0)+(pt>>>26)|0,pt&=67108863,Ne=Math.imul(ii,$n),z=(z=Math.imul(ii,hr))+Math.imul(yi,$n)|0,Fe=Math.imul(yi,hr),Ne=Ne+Math.imul(Pi,Qr)|0,z=(z=z+Math.imul(Pi,zn)|0)+Math.imul(Qi,Qr)|0,Fe=Fe+Math.imul(Qi,zn)|0;var en=(Be+(Ne=Ne+Math.imul(Hn,xi)|0)|0)+((8191&(z=(z=z+Math.imul(Hn,Sr)|0)+Math.imul(Dn,xi)|0))<<13)|0;Be=((Fe=Fe+Math.imul(Dn,Sr)|0)+(z>>>13)|0)+(en>>>26)|0,en&=67108863,Ne=Math.imul(ii,Qr),z=(z=Math.imul(ii,zn))+Math.imul(yi,Qr)|0,Fe=Math.imul(yi,zn);var pn=(Be+(Ne=Ne+Math.imul(Pi,xi)|0)|0)+((8191&(z=(z=z+Math.imul(Pi,Sr)|0)+Math.imul(Qi,xi)|0))<<13)|0;Be=((Fe=Fe+Math.imul(Qi,Sr)|0)+(z>>>13)|0)+(pn>>>26)|0,pn&=67108863;var Vn=(Be+(Ne=Math.imul(ii,xi))|0)+((8191&(z=(z=Math.imul(ii,Sr))+Math.imul(yi,xi)|0))<<13)|0;return Be=((Fe=Math.imul(yi,Sr))+(z>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,Ce[0]=us,Ce[1]=Fs,Ce[2]=hs,Ce[3]=ir,Ce[4]=Ks,Ce[5]=Mo,Ce[6]=As,Ce[7]=Us,Ce[8]=vs,Ce[9]=ho,Ce[10]=Qe,Ce[11]=L,Ce[12]=$,Ce[13]=ue,Ce[14]=Ze,Ce[15]=pt,Ce[16]=en,Ce[17]=pn,Ce[18]=Vn,0!==Be&&(Ce[19]=Be,K.length++),K};function we(ae,x,T){return(new de).mulp(ae,x,T)}function de(ae,x){this.x=ae,this.y=x}Math.imul||(he=ce),W.prototype.mulTo=function(x,T){var K,te=this.length+x.length;return K=10===this.length&&10===x.length?he(this,x,T):te<63?ce(this,x,T):te<1024?function Ae(ae,x,T){T.negative=x.negative^ae.negative,T.length=ae.length+x.length;for(var K=0,te=0,ve=0;ve<T.length-1;ve++){var Ce=te;te=0;for(var Be=67108863&K,Ne=Math.min(ve,x.length-1),z=Math.max(0,ve-ae.length+1);z<=Ne;z++){var Vt=(0|ae.words[ve-z])*(0|x.words[z]),vt=67108863&Vt;Be=67108863&(vt=vt+Be|0),te+=(Ce=(Ce=Ce+(Vt/67108864|0)|0)+(vt>>>26)|0)>>>26,Ce&=67108863}T.words[ve]=Be,K=Ce,Ce=te}return 0!==K?T.words[ve]=K:T.length--,T.strip()}(this,x,T):we(this,x,T),K},de.prototype.makeRBT=function(x){for(var T=new Array(x),K=W.prototype._countBits(x)-1,te=0;te<x;te++)T[te]=this.revBin(te,K,x);return T},de.prototype.revBin=function(x,T,K){if(0===x||x===K-1)return x;for(var te=0,ve=0;ve<T;ve++)te|=(1&x)<<T-ve-1,x>>=1;return te},de.prototype.permute=function(x,T,K,te,ve,Ce){for(var Be=0;Be<Ce;Be++)te[Be]=T[x[Be]],ve[Be]=K[x[Be]]},de.prototype.transform=function(x,T,K,te,ve,Ce){this.permute(Ce,x,T,K,te,ve);for(var Be=1;Be<ve;Be<<=1)for(var Ne=Be<<1,z=Math.cos(2*Math.PI/Ne),Fe=Math.sin(2*Math.PI/Ne),Pt=0;Pt<ve;Pt+=Ne)for(var ot=z,Vt=Fe,vt=0;vt<Be;vt++){var st=K[Pt+vt],Ft=te[Pt+vt],$e=K[Pt+vt+Be],Xe=te[Pt+vt+Be],kt=ot*$e-Vt*Xe;Xe=ot*Xe+Vt*$e,K[Pt+vt]=st+($e=kt),te[Pt+vt]=Ft+Xe,K[Pt+vt+Be]=st-$e,te[Pt+vt+Be]=Ft-Xe,vt!==Ne&&(kt=z*ot-Fe*Vt,Vt=z*Vt+Fe*ot,ot=kt)}},de.prototype.guessLen13b=function(x,T){var K=1|Math.max(T,x),te=1&K,ve=0;for(K=K/2|0;K;K>>>=1)ve++;return 1<<ve+1+te},de.prototype.conjugate=function(x,T,K){if(!(K<=1))for(var te=0;te<K/2;te++){var ve=x[te];x[te]=x[K-te-1],x[K-te-1]=ve,ve=T[te],T[te]=-T[K-te-1],T[K-te-1]=-ve}},de.prototype.normalize13b=function(x,T){for(var K=0,te=0;te<T/2;te++){var ve=8192*Math.round(x[2*te+1]/T)+Math.round(x[2*te]/T)+K;x[te]=67108863&ve,K=ve<67108864?0:ve/67108864|0}return x},de.prototype.convert13b=function(x,T,K,te){for(var ve=0,Ce=0;Ce<T;Ce++)K[2*Ce]=8191&(ve+=0|x[Ce]),K[2*Ce+1]=8191&(ve>>>=13),ve>>>=13;for(Ce=2*T;Ce<te;++Ce)K[Ce]=0;h(0===ve),h(!(-8192&ve))},de.prototype.stub=function(x){for(var T=new Array(x),K=0;K<x;K++)T[K]=0;return T},de.prototype.mulp=function(x,T,K){var te=2*this.guessLen13b(x.length,T.length),ve=this.makeRBT(te),Ce=this.stub(te),Be=new Array(te),Ne=new Array(te),z=new Array(te),Fe=new Array(te),Pt=new Array(te),ot=new Array(te),Vt=K.words;Vt.length=te,this.convert13b(x.words,x.length,Be,te),this.convert13b(T.words,T.length,Fe,te),this.transform(Be,Ce,Ne,z,te,ve),this.transform(Fe,Ce,Pt,ot,te,ve);for(var vt=0;vt<te;vt++){var st=Ne[vt]*Pt[vt]-z[vt]*ot[vt];z[vt]=Ne[vt]*ot[vt]+z[vt]*Pt[vt],Ne[vt]=st}return this.conjugate(Ne,z,te),this.transform(Ne,z,Vt,Ce,te,ve),this.conjugate(Vt,Ce,te),this.normalize13b(Vt,te),K.negative=x.negative^T.negative,K.length=x.length+T.length,K.strip()},W.prototype.mul=function(x){var T=new W(null);return T.words=new Array(this.length+x.length),this.mulTo(x,T)},W.prototype.mulf=function(x){var T=new W(null);return T.words=new Array(this.length+x.length),we(this,x,T)},W.prototype.imul=function(x){return this.clone().mulTo(x,this)},W.prototype.imuln=function(x){h("number"==typeof x),h(x<67108864);for(var T=0,K=0;K<this.length;K++){var te=(0|this.words[K])*x,ve=(67108863&te)+(67108863&T);T>>=26,T+=te/67108864|0,T+=ve>>>26,this.words[K]=67108863&ve}return 0!==T&&(this.words[K]=T,this.length++),this},W.prototype.muln=function(x){return this.clone().imuln(x)},W.prototype.sqr=function(){return this.mul(this)},W.prototype.isqr=function(){return this.imul(this.clone())},W.prototype.pow=function(x){var T=function ne(ae){for(var x=new Array(ae.bitLength()),T=0;T<x.length;T++){var te=T%26;x[T]=(ae.words[T/26|0]&1<<te)>>>te}return x}(x);if(0===T.length)return new W(1);for(var K=this,te=0;te<T.length&&0===T[te];te++,K=K.sqr());if(++te<T.length)for(var ve=K.sqr();te<T.length;te++,ve=ve.sqr())0!==T[te]&&(K=K.mul(ve));return K},W.prototype.iushln=function(x){h("number"==typeof x&&x>=0);var ve,T=x%26,K=(x-T)/26,te=67108863>>>26-T<<26-T;if(0!==T){var Ce=0;for(ve=0;ve<this.length;ve++){var Be=this.words[ve]&te;this.words[ve]=(0|this.words[ve])-Be<<T|Ce,Ce=Be>>>26-T}Ce&&(this.words[ve]=Ce,this.length++)}if(0!==K){for(ve=this.length-1;ve>=0;ve--)this.words[ve+K]=this.words[ve];for(ve=0;ve<K;ve++)this.words[ve]=0;this.length+=K}return this.strip()},W.prototype.ishln=function(x){return h(0===this.negative),this.iushln(x)},W.prototype.iushrn=function(x,T,K){var te;h("number"==typeof x&&x>=0),te=T?(T-T%26)/26:0;var ve=x%26,Ce=Math.min((x-ve)/26,this.length),Be=67108863^67108863>>>ve<<ve,Ne=K;if(te-=Ce,te=Math.max(0,te),Ne){for(var z=0;z<Ce;z++)Ne.words[z]=this.words[z];Ne.length=Ce}if(0!==Ce)if(this.length>Ce)for(this.length-=Ce,z=0;z<this.length;z++)this.words[z]=this.words[z+Ce];else this.words[0]=0,this.length=1;var Fe=0;for(z=this.length-1;z>=0&&(0!==Fe||z>=te);z--){var Pt=0|this.words[z];this.words[z]=Fe<<26-ve|Pt>>>ve,Fe=Pt&Be}return Ne&&0!==Fe&&(Ne.words[Ne.length++]=Fe),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},W.prototype.ishrn=function(x,T,K){return h(0===this.negative),this.iushrn(x,T,K)},W.prototype.shln=function(x){return this.clone().ishln(x)},W.prototype.ushln=function(x){return this.clone().iushln(x)},W.prototype.shrn=function(x){return this.clone().ishrn(x)},W.prototype.ushrn=function(x){return this.clone().iushrn(x)},W.prototype.testn=function(x){h("number"==typeof x&&x>=0);var T=x%26,K=(x-T)/26;return!(this.length<=K||!(this.words[K]&1<<T))},W.prototype.imaskn=function(x){h("number"==typeof x&&x>=0);var T=x%26,K=(x-T)/26;return h(0===this.negative,"imaskn works only with positive numbers"),this.length<=K?this:(0!==T&&K++,this.length=Math.min(K,this.length),0!==T&&(this.words[this.length-1]&=67108863^67108863>>>T<<T),this.strip())},W.prototype.maskn=function(x){return this.clone().imaskn(x)},W.prototype.iaddn=function(x){return h("number"==typeof x),h(x<67108864),x<0?this.isubn(-x):0!==this.negative?1===this.length&&(0|this.words[0])<x?(this.words[0]=x-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(x),this.negative=1,this):this._iaddn(x)},W.prototype._iaddn=function(x){this.words[0]+=x;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)this.words[T]-=67108864,T===this.length-1?this.words[T+1]=1:this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},W.prototype.isubn=function(x){if(h("number"==typeof x),h(x<67108864),x<0)return this.iaddn(-x);if(0!==this.negative)return this.negative=0,this.iaddn(x),this.negative=1,this;if(this.words[0]-=x,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this.strip()},W.prototype.addn=function(x){return this.clone().iaddn(x)},W.prototype.subn=function(x){return this.clone().isubn(x)},W.prototype.iabs=function(){return this.negative=0,this},W.prototype.abs=function(){return this.clone().iabs()},W.prototype._ishlnsubmul=function(x,T,K){var ve;this._expand(x.length+K);var Ce,Be=0;for(ve=0;ve<x.length;ve++){Ce=(0|this.words[ve+K])+Be;var Ne=(0|x.words[ve])*T;Be=((Ce-=67108863&Ne)>>26)-(Ne/67108864|0),this.words[ve+K]=67108863&Ce}for(;ve<this.length-K;ve++)Be=(Ce=(0|this.words[ve+K])+Be)>>26,this.words[ve+K]=67108863&Ce;if(0===Be)return this.strip();for(h(-1===Be),Be=0,ve=0;ve<this.length;ve++)Be=(Ce=-(0|this.words[ve])+Be)>>26,this.words[ve]=67108863&Ce;return this.negative=1,this.strip()},W.prototype._wordDiv=function(x,T){var K,te=this.clone(),ve=x,Ce=0|ve.words[ve.length-1];0!=(K=26-this._countBits(Ce))&&(ve=ve.ushln(K),te.iushln(K),Ce=0|ve.words[ve.length-1]);var z,Ne=te.length-ve.length;if("mod"!==T){(z=new W(null)).length=Ne+1,z.words=new Array(z.length);for(var Fe=0;Fe<z.length;Fe++)z.words[Fe]=0}var Pt=te.clone()._ishlnsubmul(ve,1,Ne);0===Pt.negative&&(te=Pt,z&&(z.words[Ne]=1));for(var ot=Ne-1;ot>=0;ot--){var Vt=67108864*(0|te.words[ve.length+ot])+(0|te.words[ve.length+ot-1]);for(Vt=Math.min(Vt/Ce|0,67108863),te._ishlnsubmul(ve,Vt,ot);0!==te.negative;)Vt--,te.negative=0,te._ishlnsubmul(ve,1,ot),te.isZero()||(te.negative^=1);z&&(z.words[ot]=Vt)}return z&&z.strip(),te.strip(),"div"!==T&&0!==K&&te.iushrn(K),{div:z||null,mod:te}},W.prototype.divmod=function(x,T,K){return h(!x.isZero()),this.isZero()?{div:new W(0),mod:new W(0)}:0!==this.negative&&0===x.negative?(Ce=this.neg().divmod(x,T),"mod"!==T&&(te=Ce.div.neg()),"div"!==T&&(ve=Ce.mod.neg(),K&&0!==ve.negative&&ve.iadd(x)),{div:te,mod:ve}):0===this.negative&&0!==x.negative?(Ce=this.divmod(x.neg(),T),"mod"!==T&&(te=Ce.div.neg()),{div:te,mod:Ce.mod}):this.negative&x.negative?(Ce=this.neg().divmod(x.neg(),T),"div"!==T&&(ve=Ce.mod.neg(),K&&0!==ve.negative&&ve.isub(x)),{div:Ce.div,mod:ve}):x.length>this.length||this.cmp(x)<0?{div:new W(0),mod:this}:1===x.length?"div"===T?{div:this.divn(x.words[0]),mod:null}:"mod"===T?{div:null,mod:new W(this.modn(x.words[0]))}:{div:this.divn(x.words[0]),mod:new W(this.modn(x.words[0]))}:this._wordDiv(x,T);var te,ve,Ce},W.prototype.div=function(x){return this.divmod(x,"div",!1).div},W.prototype.mod=function(x){return this.divmod(x,"mod",!1).mod},W.prototype.umod=function(x){return this.divmod(x,"mod",!0).mod},W.prototype.divRound=function(x){var T=this.divmod(x);if(T.mod.isZero())return T.div;var K=0!==T.div.negative?T.mod.isub(x):T.mod,te=x.ushrn(1),ve=x.andln(1),Ce=K.cmp(te);return Ce<0||1===ve&&0===Ce?T.div:0!==T.div.negative?T.div.isubn(1):T.div.iaddn(1)},W.prototype.modn=function(x){h(x<=67108863);for(var T=(1<<26)%x,K=0,te=this.length-1;te>=0;te--)K=(T*K+(0|this.words[te]))%x;return K},W.prototype.idivn=function(x){h(x<=67108863);for(var T=0,K=this.length-1;K>=0;K--){var te=(0|this.words[K])+67108864*T;this.words[K]=te/x|0,T=te%x}return this.strip()},W.prototype.divn=function(x){return this.clone().idivn(x)},W.prototype.egcd=function(x){h(0===x.negative),h(!x.isZero());var T=this,K=x.clone();T=0!==T.negative?T.umod(x):T.clone();for(var te=new W(1),ve=new W(0),Ce=new W(0),Be=new W(1),Ne=0;T.isEven()&&K.isEven();)T.iushrn(1),K.iushrn(1),++Ne;for(var z=K.clone(),Fe=T.clone();!T.isZero();){for(var Pt=0,ot=1;!(T.words[0]&ot)&&Pt<26;++Pt,ot<<=1);if(Pt>0)for(T.iushrn(Pt);Pt-- >0;)(te.isOdd()||ve.isOdd())&&(te.iadd(z),ve.isub(Fe)),te.iushrn(1),ve.iushrn(1);for(var Vt=0,vt=1;!(K.words[0]&vt)&&Vt<26;++Vt,vt<<=1);if(Vt>0)for(K.iushrn(Vt);Vt-- >0;)(Ce.isOdd()||Be.isOdd())&&(Ce.iadd(z),Be.isub(Fe)),Ce.iushrn(1),Be.iushrn(1);T.cmp(K)>=0?(T.isub(K),te.isub(Ce),ve.isub(Be)):(K.isub(T),Ce.isub(te),Be.isub(ve))}return{a:Ce,b:Be,gcd:K.iushln(Ne)}},W.prototype._invmp=function(x){h(0===x.negative),h(!x.isZero());var Pt,T=this,K=x.clone();T=0!==T.negative?T.umod(x):T.clone();for(var te=new W(1),ve=new W(0),Ce=K.clone();T.cmpn(1)>0&&K.cmpn(1)>0;){for(var Be=0,Ne=1;!(T.words[0]&Ne)&&Be<26;++Be,Ne<<=1);if(Be>0)for(T.iushrn(Be);Be-- >0;)te.isOdd()&&te.iadd(Ce),te.iushrn(1);for(var z=0,Fe=1;!(K.words[0]&Fe)&&z<26;++z,Fe<<=1);if(z>0)for(K.iushrn(z);z-- >0;)ve.isOdd()&&ve.iadd(Ce),ve.iushrn(1);T.cmp(K)>=0?(T.isub(K),te.isub(ve)):(K.isub(T),ve.isub(te))}return(Pt=0===T.cmpn(1)?te:ve).cmpn(0)<0&&Pt.iadd(x),Pt},W.prototype.gcd=function(x){if(this.isZero())return x.abs();if(x.isZero())return this.abs();var T=this.clone(),K=x.clone();T.negative=0,K.negative=0;for(var te=0;T.isEven()&&K.isEven();te++)T.iushrn(1),K.iushrn(1);for(;;){for(;T.isEven();)T.iushrn(1);for(;K.isEven();)K.iushrn(1);var ve=T.cmp(K);if(ve<0){var Ce=T;T=K,K=Ce}else if(0===ve||0===K.cmpn(1))break;T.isub(K)}return K.iushln(te)},W.prototype.invm=function(x){return this.egcd(x).a.umod(x)},W.prototype.isEven=function(){return!(1&this.words[0])},W.prototype.isOdd=function(){return!(1&~this.words[0])},W.prototype.andln=function(x){return this.words[0]&x},W.prototype.bincn=function(x){h("number"==typeof x);var T=x%26,K=(x-T)/26,te=1<<T;if(this.length<=K)return this._expand(K+1),this.words[K]|=te,this;for(var ve=te,Ce=K;0!==ve&&Ce<this.length;Ce++){var Be=0|this.words[Ce];ve=(Be+=ve)>>>26,this.words[Ce]=Be&=67108863}return 0!==ve&&(this.words[Ce]=ve,this.length++),this},W.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},W.prototype.cmpn=function(x){var K,T=x<0;if(0!==this.negative&&!T)return-1;if(0===this.negative&&T)return 1;if(this.strip(),this.length>1)K=1;else{T&&(x=-x),h(x<=67108863,"Number is too big");var te=0|this.words[0];K=te===x?0:te<x?-1:1}return 0!==this.negative?0|-K:K},W.prototype.cmp=function(x){if(0!==this.negative&&0===x.negative)return-1;if(0===this.negative&&0!==x.negative)return 1;var T=this.ucmp(x);return 0!==this.negative?0|-T:T},W.prototype.ucmp=function(x){if(this.length>x.length)return 1;if(this.length<x.length)return-1;for(var T=0,K=this.length-1;K>=0;K--){var te=0|this.words[K],ve=0|x.words[K];if(te!==ve){te<ve?T=-1:te>ve&&(T=1);break}}return T},W.prototype.gtn=function(x){return 1===this.cmpn(x)},W.prototype.gt=function(x){return 1===this.cmp(x)},W.prototype.gten=function(x){return this.cmpn(x)>=0},W.prototype.gte=function(x){return this.cmp(x)>=0},W.prototype.ltn=function(x){return-1===this.cmpn(x)},W.prototype.lt=function(x){return-1===this.cmp(x)},W.prototype.lten=function(x){return this.cmpn(x)<=0},W.prototype.lte=function(x){return this.cmp(x)<=0},W.prototype.eqn=function(x){return 0===this.cmpn(x)},W.prototype.eq=function(x){return 0===this.cmp(x)},W.red=function(x){return new _t(x)},W.prototype.toRed=function(x){return h(!this.red,"Already a number in reduction context"),h(0===this.negative,"red works only with positives"),x.convertTo(this)._forceRed(x)},W.prototype.fromRed=function(){return h(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},W.prototype._forceRed=function(x){return this.red=x,this},W.prototype.forceRed=function(x){return h(!this.red,"Already a number in reduction context"),this._forceRed(x)},W.prototype.redAdd=function(x){return h(this.red,"redAdd works only with red numbers"),this.red.add(this,x)},W.prototype.redIAdd=function(x){return h(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,x)},W.prototype.redSub=function(x){return h(this.red,"redSub works only with red numbers"),this.red.sub(this,x)},W.prototype.redISub=function(x){return h(this.red,"redISub works only with red numbers"),this.red.isub(this,x)},W.prototype.redShl=function(x){return h(this.red,"redShl works only with red numbers"),this.red.shl(this,x)},W.prototype.redMul=function(x){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.mul(this,x)},W.prototype.redIMul=function(x){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.imul(this,x)},W.prototype.redSqr=function(){return h(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},W.prototype.redISqr=function(){return h(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},W.prototype.redSqrt=function(){return h(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},W.prototype.redInvm=function(){return h(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},W.prototype.redNeg=function(){return h(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},W.prototype.redPow=function(x){return h(this.red&&!x.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,x)};var Re={k256:null,p224:null,p192:null,p25519:null};function ze(ae,x){this.name=ae,this.p=new W(x,16),this.n=this.p.bitLength(),this.k=new W(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function Ge(){ze.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function Oe(){ze.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Ye(){ze.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function yt(){ze.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _t(ae){if("string"==typeof ae){var x=W._prime(ae);this.m=x.p,this.prime=x}else h(ae.gtn(1),"modulus must be greater than 1"),this.m=ae,this.prime=null}function ut(ae){_t.call(this,ae),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new W(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ze.prototype._tmp=function(){var x=new W(null);return x.words=new Array(Math.ceil(this.n/13)),x},ze.prototype.ireduce=function(x){var K,T=x;do{this.split(T,this.tmp),K=(T=(T=this.imulK(T)).iadd(this.tmp)).bitLength()}while(K>this.n);var te=K<this.n?-1:T.ucmp(this.p);return 0===te?(T.words[0]=0,T.length=1):te>0?T.isub(this.p):void 0!==T.strip?T.strip():T._strip(),T},ze.prototype.split=function(x,T){x.iushrn(this.n,0,T)},ze.prototype.imulK=function(x){return x.imul(this.k)},ge(Ge,ze),Ge.prototype.split=function(x,T){for(var K=4194303,te=Math.min(x.length,9),ve=0;ve<te;ve++)T.words[ve]=x.words[ve];if(T.length=te,x.length<=9)return x.words[0]=0,void(x.length=1);var Ce=x.words[9];for(T.words[T.length++]=Ce&K,ve=10;ve<x.length;ve++){var Be=0|x.words[ve];x.words[ve-10]=(Be&K)<<4|Ce>>>22,Ce=Be}x.words[ve-10]=Ce>>>=22,x.length-=0===Ce&&x.length>10?10:9},Ge.prototype.imulK=function(x){x.words[x.length]=0,x.words[x.length+1]=0,x.length+=2;for(var T=0,K=0;K<x.length;K++){var te=0|x.words[K];x.words[K]=67108863&(T+=977*te),T=64*te+(T/67108864|0)}return 0===x.words[x.length-1]&&(x.length--,0===x.words[x.length-1]&&x.length--),x},ge(Oe,ze),ge(Ye,ze),ge(yt,ze),yt.prototype.imulK=function(x){for(var T=0,K=0;K<x.length;K++){var te=19*(0|x.words[K])+T,ve=67108863&te;te>>>=26,x.words[K]=ve,T=te}return 0!==T&&(x.words[x.length++]=T),x},W._prime=function(x){if(Re[x])return Re[x];var T;if("k256"===x)T=new Ge;else if("p224"===x)T=new Oe;else if("p192"===x)T=new Ye;else{if("p25519"!==x)throw new Error("Unknown prime "+x);T=new yt}return Re[x]=T,T},_t.prototype._verify1=function(x){h(0===x.negative,"red works only with positives"),h(x.red,"red works only with red numbers")},_t.prototype._verify2=function(x,T){h(!(x.negative|T.negative),"red works only with positives"),h(x.red&&x.red===T.red,"red works only with red numbers")},_t.prototype.imod=function(x){return this.prime?this.prime.ireduce(x)._forceRed(this):x.umod(this.m)._forceRed(this)},_t.prototype.neg=function(x){return x.isZero()?x.clone():this.m.sub(x)._forceRed(this)},_t.prototype.add=function(x,T){this._verify2(x,T);var K=x.add(T);return K.cmp(this.m)>=0&&K.isub(this.m),K._forceRed(this)},_t.prototype.iadd=function(x,T){this._verify2(x,T);var K=x.iadd(T);return K.cmp(this.m)>=0&&K.isub(this.m),K},_t.prototype.sub=function(x,T){this._verify2(x,T);var K=x.sub(T);return K.cmpn(0)<0&&K.iadd(this.m),K._forceRed(this)},_t.prototype.isub=function(x,T){this._verify2(x,T);var K=x.isub(T);return K.cmpn(0)<0&&K.iadd(this.m),K},_t.prototype.shl=function(x,T){return this._verify1(x),this.imod(x.ushln(T))},_t.prototype.imul=function(x,T){return this._verify2(x,T),this.imod(x.imul(T))},_t.prototype.mul=function(x,T){return this._verify2(x,T),this.imod(x.mul(T))},_t.prototype.isqr=function(x){return this.imul(x,x.clone())},_t.prototype.sqr=function(x){return this.mul(x,x)},_t.prototype.sqrt=function(x){if(x.isZero())return x.clone();var T=this.m.andln(3);if(h(T%2==1),3===T){var K=this.m.add(new W(1)).iushrn(2);return this.pow(x,K)}for(var te=this.m.subn(1),ve=0;!te.isZero()&&0===te.andln(1);)ve++,te.iushrn(1);h(!te.isZero());var Ce=new W(1).toRed(this),Be=Ce.redNeg(),Ne=this.m.subn(1).iushrn(1),z=this.m.bitLength();for(z=new W(2*z*z).toRed(this);0!==this.pow(z,Ne).cmp(Be);)z.redIAdd(Be);for(var Fe=this.pow(z,te),Pt=this.pow(x,te.addn(1).iushrn(1)),ot=this.pow(x,te),Vt=ve;0!==ot.cmp(Ce);){for(var vt=ot,st=0;0!==vt.cmp(Ce);st++)vt=vt.redSqr();h(st<Vt);var Ft=this.pow(Fe,new W(1).iushln(Vt-st-1));Pt=Pt.redMul(Ft),Fe=Ft.redSqr(),ot=ot.redMul(Fe),Vt=st}return Pt},_t.prototype.invm=function(x){var T=x._invmp(this.m);return 0!==T.negative?(T.negative=0,this.imod(T).redNeg()):this.imod(T)},_t.prototype.pow=function(x,T){if(T.isZero())return new W(1).toRed(this);if(0===T.cmpn(1))return x.clone();var te=new Array(16);te[0]=new W(1).toRed(this),te[1]=x;for(var ve=2;ve<te.length;ve++)te[ve]=this.mul(te[ve-1],x);var Ce=te[0],Be=0,Ne=0,z=T.bitLength()%26;for(0===z&&(z=26),ve=T.length-1;ve>=0;ve--){for(var Fe=T.words[ve],Pt=z-1;Pt>=0;Pt--){var ot=Fe>>Pt&1;Ce!==te[0]&&(Ce=this.sqr(Ce)),0!==ot||0!==Be?(Be<<=1,Be|=ot,(4==++Ne||0===ve&&0===Pt)&&(Ce=this.mul(Ce,te[Be]),Ne=0,Be=0)):Ne=0}z=26}return Ce},_t.prototype.convertTo=function(x){var T=x.umod(this.m);return T===x?T.clone():T},_t.prototype.convertFrom=function(x){var T=x.clone();return T.red=null,T},W.mont=function(x){return new ut(x)},ge(ut,_t),ut.prototype.convertTo=function(x){return this.imod(x.ushln(this.shift))},ut.prototype.convertFrom=function(x){var T=this.imod(x.mul(this.rinv));return T.red=null,T},ut.prototype.imul=function(x,T){if(x.isZero()||T.isZero())return x.words[0]=0,x.length=1,x;var K=x.imul(T),te=K.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ve=K.isub(te).iushrn(this.shift),Ce=ve;return ve.cmp(this.m)>=0?Ce=ve.isub(this.m):ve.cmpn(0)<0&&(Ce=ve.iadd(this.m)),Ce._forceRed(this)},ut.prototype.mul=function(x,T){if(x.isZero()||T.isZero())return new W(0)._forceRed(this);var K=x.mul(T),te=K.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ve=K.isub(te).iushrn(this.shift),Ce=ve;return ve.cmp(this.m)>=0?Ce=ve.isub(this.m):ve.cmpn(0)<0&&(Ce=ve.iadd(this.m)),Ce._forceRed(this)},ut.prototype.invm=function(x){return this.imod(x._invmp(this.m).mul(this.r2))._forceRed(this)}}(Dt=S.nmd(Dt),this)},5294:(Dt,qe,S)=>{var l;function M(ge){this.rand=ge}if(Dt.exports=function(W){return l||(l=new M(null)),l.generate(W)},Dt.exports.Rand=M,M.prototype.generate=function(W){return this._rand(W)},M.prototype._rand=function(W){if(this.rand.getBytes)return this.rand.getBytes(W);for(var X=new Uint8Array(W),oe=0;oe<X.length;oe++)X[oe]=this.rand.getByte();return X},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?M.prototype._rand=function(W){var X=new Uint8Array(W);return self.crypto.getRandomValues(X),X}:self.msCrypto&&self.msCrypto.getRandomValues?M.prototype._rand=function(W){var X=new Uint8Array(W);return self.msCrypto.getRandomValues(X),X}:"object"==typeof window&&(M.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var h=S(3776);if("function"!=typeof h.randomBytes)throw new Error("Not supported");M.prototype._rand=function(W){return h.randomBytes(W)}}catch{}},3188:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(8891),S(8855),S(4147),S(2414),function(){var M=l,ge=M.lib.BlockCipher,W=M.algo,X=[],oe=[],H=[],G=[],k=[],P=[],q=[],ne=[],ce=[],he=[];!function(){for(var de=[],Re=0;Re<256;Re++)de[Re]=Re<128?Re<<1:Re<<1^283;var ze=0,Ge=0;for(Re=0;Re<256;Re++){var Oe=Ge^Ge<<1^Ge<<2^Ge<<3^Ge<<4;X[ze]=Oe=Oe>>>8^255&Oe^99,oe[Oe]=ze;var ut,Ye=de[ze],yt=de[Ye],_t=de[yt];H[ze]=(ut=257*de[Oe]^16843008*Oe)<<24|ut>>>8,G[ze]=ut<<16|ut>>>16,k[ze]=ut<<8|ut>>>24,P[ze]=ut,q[Oe]=(ut=16843009*_t^65537*yt^257*Ye^16843008*ze)<<24|ut>>>8,ne[Oe]=ut<<16|ut>>>16,ce[Oe]=ut<<8|ut>>>24,he[Oe]=ut,ze?(ze=Ye^de[de[de[_t^Ye]]],Ge^=de[de[Ge]]):ze=Ge=1}}();var Ae=[0,1,2,4,8,16,32,64,128,27,54],we=W.AES=ge.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var Re=this._keyPriorReset=this._key,ze=Re.words,Ge=Re.sigBytes/4,Ye=4*((this._nRounds=Ge+6)+1),yt=this._keySchedule=[],_t=0;_t<Ye;_t++)_t<Ge?yt[_t]=ze[_t]:(de=yt[_t-1],_t%Ge?Ge>6&&_t%Ge==4&&(de=X[de>>>24]<<24|X[de>>>16&255]<<16|X[de>>>8&255]<<8|X[255&de]):(de=X[(de=de<<8|de>>>24)>>>24]<<24|X[de>>>16&255]<<16|X[de>>>8&255]<<8|X[255&de],de^=Ae[_t/Ge|0]<<24),yt[_t]=yt[_t-Ge]^de);for(var ut=this._invKeySchedule=[],ae=0;ae<Ye;ae++){if(_t=Ye-ae,ae%4)var de=yt[_t];else de=yt[_t-4];ut[ae]=ae<4||_t<=4?de:q[X[de>>>24]]^ne[X[de>>>16&255]]^ce[X[de>>>8&255]]^he[X[255&de]]}}},encryptBlock:function(de,Re){this._doCryptBlock(de,Re,this._keySchedule,H,G,k,P,X)},decryptBlock:function(de,Re){var ze=de[Re+1];de[Re+1]=de[Re+3],de[Re+3]=ze,this._doCryptBlock(de,Re,this._invKeySchedule,q,ne,ce,he,oe),ze=de[Re+1],de[Re+1]=de[Re+3],de[Re+3]=ze},_doCryptBlock:function(de,Re,ze,Ge,Oe,Ye,yt,_t){for(var ut=this._nRounds,ae=de[Re]^ze[0],x=de[Re+1]^ze[1],T=de[Re+2]^ze[2],K=de[Re+3]^ze[3],te=4,ve=1;ve<ut;ve++){var Ce=Ge[ae>>>24]^Oe[x>>>16&255]^Ye[T>>>8&255]^yt[255&K]^ze[te++],Be=Ge[x>>>24]^Oe[T>>>16&255]^Ye[K>>>8&255]^yt[255&ae]^ze[te++],Ne=Ge[T>>>24]^Oe[K>>>16&255]^Ye[ae>>>8&255]^yt[255&x]^ze[te++],z=Ge[K>>>24]^Oe[ae>>>16&255]^Ye[x>>>8&255]^yt[255&T]^ze[te++];ae=Ce,x=Be,T=Ne,K=z}Ce=(_t[ae>>>24]<<24|_t[x>>>16&255]<<16|_t[T>>>8&255]<<8|_t[255&K])^ze[te++],Be=(_t[x>>>24]<<24|_t[T>>>16&255]<<16|_t[K>>>8&255]<<8|_t[255&ae])^ze[te++],Ne=(_t[T>>>24]<<24|_t[K>>>16&255]<<16|_t[ae>>>8&255]<<8|_t[255&x])^ze[te++],z=(_t[K>>>24]<<24|_t[ae>>>16&255]<<16|_t[x>>>8&255]<<8|_t[255&T])^ze[te++],de[Re]=Ce,de[Re+1]=Be,de[Re+2]=Ne,de[Re+3]=z},keySize:8});M.AES=ge._createHelper(we)}(),l.AES)},5269:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(8891),S(8855),S(4147),S(2414),function(){var M=l,ge=M.lib.BlockCipher;const X=16,oe=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],H=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var G={pbox:[],sbox:[]};function k(he,Ae){let Ge=he.sbox[0][Ae>>24&255]+he.sbox[1][Ae>>16&255];return Ge^=he.sbox[2][Ae>>8&255],Ge+=he.sbox[3][255&Ae],Ge}function P(he,Ae,we){let ze,de=Ae,Re=we;for(let Ge=0;Ge<X;++Ge)de^=he.pbox[Ge],Re=k(he,de)^Re,ze=de,de=Re,Re=ze;return ze=de,de=Re,Re=ze,Re^=he.pbox[X],de^=he.pbox[X+1],{left:de,right:Re}}var ce=M.algo.Blowfish=ge.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var he=this._keyPriorReset=this._key;!function ne(he,Ae,we){for(let Oe=0;Oe<4;Oe++){he.sbox[Oe]=[];for(let Ye=0;Ye<256;Ye++)he.sbox[Oe][Ye]=H[Oe][Ye]}let de=0;for(let Oe=0;Oe<X+2;Oe++)he.pbox[Oe]=oe[Oe]^Ae[de],de++,de>=we&&(de=0);let Re=0,ze=0,Ge=0;for(let Oe=0;Oe<X+2;Oe+=2)Ge=P(he,Re,ze),Re=Ge.left,ze=Ge.right,he.pbox[Oe]=Re,he.pbox[Oe+1]=ze;for(let Oe=0;Oe<4;Oe++)for(let Ye=0;Ye<256;Ye+=2)Ge=P(he,Re,ze),Re=Ge.left,ze=Ge.right,he.sbox[Oe][Ye]=Re,he.sbox[Oe][Ye+1]=ze;return!0}(G,he.words,he.sigBytes/4)}},encryptBlock:function(he,Ae){var we=P(G,he[Ae],he[Ae+1]);he[Ae]=we.left,he[Ae+1]=we.right},decryptBlock:function(he,Ae){var we=function q(he,Ae,we){let ze,de=Ae,Re=we;for(let Ge=X+1;Ge>1;--Ge)de^=he.pbox[Ge],Re=k(he,de)^Re,ze=de,de=Re,Re=ze;return ze=de,de=Re,Re=ze,Re^=he.pbox[1],de^=he.pbox[0],{left:de,right:Re}}(G,he[Ae],he[Ae+1]);he[Ae]=we.left,he[Ae+1]=we.right},blockSize:2,keySize:4,ivSize:2});M.Blowfish=ge._createHelper(ce)}(),l.Blowfish)},2414:function(Dt,qe,S){var h,ge,W,X,oe,H,k,q,ne,he,Ae,we,Re,Ge,Ye,yt,ut,ae,l;Dt.exports=(l=S(7656),S(4147),void(l.lib.Cipher||(h=l,ge=h.lib,W=ge.Base,X=ge.WordArray,oe=ge.BufferedBlockAlgorithm,H=h.enc,k=H.Base64,q=h.algo.EvpKDF,ne=ge.Cipher=oe.extend({cfg:W.extend(),createEncryptor:function(x,T){return this.create(this._ENC_XFORM_MODE,x,T)},createDecryptor:function(x,T){return this.create(this._DEC_XFORM_MODE,x,T)},init:function(x,T,K){this.cfg=this.cfg.extend(K),this._xformMode=x,this._key=T,this.reset()},reset:function(){oe.reset.call(this),this._doReset()},process:function(x){return this._append(x),this._process()},finalize:function(x){return x&&this._append(x),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function x(T){return"string"==typeof T?ae:yt}return function(T){return{encrypt:function(K,te,ve){return x(te).encrypt(T,K,te,ve)},decrypt:function(K,te,ve){return x(te).decrypt(T,K,te,ve)}}}}()}),ge.StreamCipher=ne.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),he=h.mode={},Ae=ge.BlockCipherMode=W.extend({createEncryptor:function(x,T){return this.Encryptor.create(x,T)},createDecryptor:function(x,T){return this.Decryptor.create(x,T)},init:function(x,T){this._cipher=x,this._iv=T}}),we=he.CBC=function(){var x=Ae.extend();function T(K,te,ve){var Ce,Be=this._iv;Be?(Ce=Be,this._iv=undefined):Ce=this._prevBlock;for(var Ne=0;Ne<ve;Ne++)K[te+Ne]^=Ce[Ne]}return x.Encryptor=x.extend({processBlock:function(K,te){var ve=this._cipher,Ce=ve.blockSize;T.call(this,K,te,Ce),ve.encryptBlock(K,te),this._prevBlock=K.slice(te,te+Ce)}}),x.Decryptor=x.extend({processBlock:function(K,te){var ve=this._cipher,Ce=ve.blockSize,Be=K.slice(te,te+Ce);ve.decryptBlock(K,te),T.call(this,K,te,Ce),this._prevBlock=Be}}),x}(),Re=(h.pad={}).Pkcs7={pad:function(x,T){for(var K=4*T,te=K-x.sigBytes%K,ve=te<<24|te<<16|te<<8|te,Ce=[],Be=0;Be<te;Be+=4)Ce.push(ve);var Ne=X.create(Ce,te);x.concat(Ne)},unpad:function(x){x.sigBytes-=255&x.words[x.sigBytes-1>>>2]}},ge.BlockCipher=ne.extend({cfg:ne.cfg.extend({mode:we,padding:Re}),reset:function(){var x;ne.reset.call(this);var T=this.cfg,K=T.iv,te=T.mode;this._xformMode==this._ENC_XFORM_MODE?x=te.createEncryptor:(x=te.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==x?this._mode.init(this,K&&K.words):(this._mode=x.call(te,this,K&&K.words),this._mode.__creator=x)},_doProcessBlock:function(x,T){this._mode.processBlock(x,T)},_doFinalize:function(){var x,T=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(T.pad(this._data,this.blockSize),x=this._process(!0)):(x=this._process(!0),T.unpad(x)),x},blockSize:4}),Ge=ge.CipherParams=W.extend({init:function(x){this.mixIn(x)},toString:function(x){return(x||this.formatter).stringify(this)}}),Ye=(h.format={}).OpenSSL={stringify:function(x){var K=x.ciphertext,te=x.salt;return(te?X.create([1398893684,1701076831]).concat(te).concat(K):K).toString(k)},parse:function(x){var T,K=k.parse(x),te=K.words;return 1398893684==te[0]&&1701076831==te[1]&&(T=X.create(te.slice(2,4)),te.splice(0,4),K.sigBytes-=16),Ge.create({ciphertext:K,salt:T})}},yt=ge.SerializableCipher=W.extend({cfg:W.extend({format:Ye}),encrypt:function(x,T,K,te){te=this.cfg.extend(te);var ve=x.createEncryptor(K,te),Ce=ve.finalize(T),Be=ve.cfg;return Ge.create({ciphertext:Ce,key:K,iv:Be.iv,algorithm:x,mode:Be.mode,padding:Be.padding,blockSize:x.blockSize,formatter:te.format})},decrypt:function(x,T,K,te){return te=this.cfg.extend(te),T=this._parse(T,te.format),x.createDecryptor(K,te).finalize(T.ciphertext)},_parse:function(x,T){return"string"==typeof x?T.parse(x,this):x}}),ut=(h.kdf={}).OpenSSL={execute:function(x,T,K,te,ve){if(te||(te=X.random(8)),ve)var Ce=q.create({keySize:T+K,hasher:ve}).compute(x,te);else Ce=q.create({keySize:T+K}).compute(x,te);var Be=X.create(Ce.words.slice(T),4*K);return Ce.sigBytes=4*T,Ge.create({key:Ce,iv:Be,salt:te})}},ae=ge.PasswordBasedCipher=yt.extend({cfg:yt.cfg.extend({kdf:ut}),encrypt:function(x,T,K,te){var ve=(te=this.cfg.extend(te)).kdf.execute(K,x.keySize,x.ivSize,te.salt,te.hasher);te.iv=ve.iv;var Ce=yt.encrypt.call(this,x,T,ve.key,te);return Ce.mixIn(ve),Ce},decrypt:function(x,T,K,te){te=this.cfg.extend(te),T=this._parse(T,te.format);var ve=te.kdf.execute(K,x.keySize,x.ivSize,T.salt,te.hasher);return te.iv=ve.iv,yt.decrypt.call(this,x,T,ve.key,te)}}))))},7656:function(Dt,qe,S){var l;Dt.exports=(l=l||function(M,h){var ge;if(typeof window<"u"&&window.crypto&&(ge=window.crypto),typeof self<"u"&&self.crypto&&(ge=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(ge=globalThis.crypto),!ge&&typeof window<"u"&&window.msCrypto&&(ge=window.msCrypto),!ge&&typeof global<"u"&&global.crypto&&(ge=global.crypto),!ge)try{ge=S(477)}catch{}var W=function(){if(ge){if("function"==typeof ge.getRandomValues)try{return ge.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof ge.randomBytes)try{return ge.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},X=Object.create||function(){function de(){}return function(Re){var ze;return de.prototype=Re,ze=new de,de.prototype=null,ze}}(),oe={},H=oe.lib={},G=H.Base=function(){return{extend:function(de){var Re=X(this);return de&&Re.mixIn(de),(!Re.hasOwnProperty("init")||this.init===Re.init)&&(Re.init=function(){Re.$super.init.apply(this,arguments)}),Re.init.prototype=Re,Re.$super=this,Re},create:function(){var de=this.extend();return de.init.apply(de,arguments),de},init:function(){},mixIn:function(de){for(var Re in de)de.hasOwnProperty(Re)&&(this[Re]=de[Re]);de.hasOwnProperty("toString")&&(this.toString=de.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),k=H.WordArray=G.extend({init:function(de,Re){de=this.words=de||[],this.sigBytes=null!=Re?Re:4*de.length},toString:function(de){return(de||q).stringify(this)},concat:function(de){var Re=this.words,ze=de.words,Ge=this.sigBytes,Oe=de.sigBytes;if(this.clamp(),Ge%4)for(var Ye=0;Ye<Oe;Ye++)Re[Ge+Ye>>>2]|=(ze[Ye>>>2]>>>24-Ye%4*8&255)<<24-(Ge+Ye)%4*8;else for(var _t=0;_t<Oe;_t+=4)Re[Ge+_t>>>2]=ze[_t>>>2];return this.sigBytes+=Oe,this},clamp:function(){var de=this.words,Re=this.sigBytes;de[Re>>>2]&=4294967295<<32-Re%4*8,de.length=M.ceil(Re/4)},clone:function(){var de=G.clone.call(this);return de.words=this.words.slice(0),de},random:function(de){for(var Re=[],ze=0;ze<de;ze+=4)Re.push(W());return new k.init(Re,de)}}),P=oe.enc={},q=P.Hex={stringify:function(de){for(var Re=de.words,ze=de.sigBytes,Ge=[],Oe=0;Oe<ze;Oe++){var Ye=Re[Oe>>>2]>>>24-Oe%4*8&255;Ge.push((Ye>>>4).toString(16)),Ge.push((15&Ye).toString(16))}return Ge.join("")},parse:function(de){for(var Re=de.length,ze=[],Ge=0;Ge<Re;Ge+=2)ze[Ge>>>3]|=parseInt(de.substr(Ge,2),16)<<24-Ge%8*4;return new k.init(ze,Re/2)}},ne=P.Latin1={stringify:function(de){for(var Re=de.words,ze=de.sigBytes,Ge=[],Oe=0;Oe<ze;Oe++)Ge.push(String.fromCharCode(Re[Oe>>>2]>>>24-Oe%4*8&255));return Ge.join("")},parse:function(de){for(var Re=de.length,ze=[],Ge=0;Ge<Re;Ge++)ze[Ge>>>2]|=(255&de.charCodeAt(Ge))<<24-Ge%4*8;return new k.init(ze,Re)}},ce=P.Utf8={stringify:function(de){try{return decodeURIComponent(escape(ne.stringify(de)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(de){return ne.parse(unescape(encodeURIComponent(de)))}},he=H.BufferedBlockAlgorithm=G.extend({reset:function(){this._data=new k.init,this._nDataBytes=0},_append:function(de){"string"==typeof de&&(de=ce.parse(de)),this._data.concat(de),this._nDataBytes+=de.sigBytes},_process:function(de){var Re,ze=this._data,Ge=ze.words,Oe=ze.sigBytes,Ye=this.blockSize,_t=Oe/(4*Ye),ut=(_t=de?M.ceil(_t):M.max((0|_t)-this._minBufferSize,0))*Ye,ae=M.min(4*ut,Oe);if(ut){for(var x=0;x<ut;x+=Ye)this._doProcessBlock(Ge,x);Re=Ge.splice(0,ut),ze.sigBytes-=ae}return new k.init(Re,ae)},clone:function(){var de=G.clone.call(this);return de._data=this._data.clone(),de},_minBufferSize:0}),we=(H.Hasher=he.extend({cfg:G.extend(),init:function(de){this.cfg=this.cfg.extend(de),this.reset()},reset:function(){he.reset.call(this),this._doReset()},update:function(de){return this._append(de),this._process(),this},finalize:function(de){return de&&this._append(de),this._doFinalize()},blockSize:16,_createHelper:function(de){return function(Re,ze){return new de.init(ze).finalize(Re)}},_createHmacHelper:function(de){return function(Re,ze){return new we.HMAC.init(de,ze).finalize(Re)}}}),oe.algo={});return oe}(Math),l)},8891:function(Dt,qe,S){var l,ge;Dt.exports=(l=S(7656),ge=l.lib.WordArray,l.enc.Base64={stringify:function(H){var G=H.words,k=H.sigBytes,P=this._map;H.clamp();for(var q=[],ne=0;ne<k;ne+=3)for(var we=(G[ne>>>2]>>>24-ne%4*8&255)<<16|(G[ne+1>>>2]>>>24-(ne+1)%4*8&255)<<8|G[ne+2>>>2]>>>24-(ne+2)%4*8&255,de=0;de<4&&ne+.75*de<k;de++)q.push(P.charAt(we>>>6*(3-de)&63));var Re=P.charAt(64);if(Re)for(;q.length%4;)q.push(Re);return q.join("")},parse:function(H){var G=H.length,k=this._map,P=this._reverseMap;if(!P){P=this._reverseMap=[];for(var q=0;q<k.length;q++)P[k.charCodeAt(q)]=q}var ne=k.charAt(64);if(ne){var ce=H.indexOf(ne);-1!==ce&&(G=ce)}return function oe(H,G,k){for(var P=[],q=0,ne=0;ne<G;ne++)if(ne%4){var ce=k[H.charCodeAt(ne-1)]<<ne%4*2,he=k[H.charCodeAt(ne)]>>>6-ne%4*2;P[q>>>2]|=(ce|he)<<24-q%4*8,q++}return ge.create(P,q)}(H,G,P)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},l.enc.Base64)},6598:function(Dt,qe,S){var l,ge;Dt.exports=(l=S(7656),ge=l.lib.WordArray,l.enc.Base64url={stringify:function(H,G){void 0===G&&(G=!0);var k=H.words,P=H.sigBytes,q=G?this._safe_map:this._map;H.clamp();for(var ne=[],ce=0;ce<P;ce+=3)for(var de=(k[ce>>>2]>>>24-ce%4*8&255)<<16|(k[ce+1>>>2]>>>24-(ce+1)%4*8&255)<<8|k[ce+2>>>2]>>>24-(ce+2)%4*8&255,Re=0;Re<4&&ce+.75*Re<P;Re++)ne.push(q.charAt(de>>>6*(3-Re)&63));var ze=q.charAt(64);if(ze)for(;ne.length%4;)ne.push(ze);return ne.join("")},parse:function(H,G){void 0===G&&(G=!0);var k=H.length,P=G?this._safe_map:this._map,q=this._reverseMap;if(!q){q=this._reverseMap=[];for(var ne=0;ne<P.length;ne++)q[P.charCodeAt(ne)]=ne}var ce=P.charAt(64);if(ce){var he=H.indexOf(ce);-1!==he&&(k=he)}return function oe(H,G,k){for(var P=[],q=0,ne=0;ne<G;ne++)if(ne%4){var ce=k[H.charCodeAt(ne-1)]<<ne%4*2,he=k[H.charCodeAt(ne)]>>>6-ne%4*2;P[q>>>2]|=(ce|he)<<24-q%4*8,q++}return ge.create(P,q)}(H,k,q)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},l.enc.Base64url)},5304:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),function(){var ge=l.lib.WordArray,W=l.enc;function oe(H){return H<<8&4278255360|H>>>8&16711935}W.Utf16=W.Utf16BE={stringify:function(H){for(var G=H.words,k=H.sigBytes,P=[],q=0;q<k;q+=2)P.push(String.fromCharCode(G[q>>>2]>>>16-q%4*8&65535));return P.join("")},parse:function(H){for(var G=H.length,k=[],P=0;P<G;P++)k[P>>>1]|=H.charCodeAt(P)<<16-P%2*16;return ge.create(k,2*G)}},W.Utf16LE={stringify:function(H){for(var G=H.words,k=H.sigBytes,P=[],q=0;q<k;q+=2){var ne=oe(G[q>>>2]>>>16-q%4*8&65535);P.push(String.fromCharCode(ne))}return P.join("")},parse:function(H){for(var G=H.length,k=[],P=0;P<G;P++)k[P>>>1]|=oe(H.charCodeAt(P)<<16-P%2*16);return ge.create(k,2*G)}}}(),l.enc.Utf16)},4147:function(Dt,qe,S){var M,h,ge,W,X,H,l;Dt.exports=(l=S(7656),S(9986),S(7868),W=(h=(M=l).lib).WordArray,H=(X=M.algo).EvpKDF=(ge=h.Base).extend({cfg:ge.extend({keySize:4,hasher:X.MD5,iterations:1}),init:function(G){this.cfg=this.cfg.extend(G)},compute:function(G,k){for(var P,q=this.cfg,ne=q.hasher.create(),ce=W.create(),he=ce.words,Ae=q.keySize,we=q.iterations;he.length<Ae;){P&&ne.update(P),P=ne.update(G).finalize(k),ne.reset();for(var de=1;de<we;de++)P=ne.finalize(P),ne.reset();ce.concat(P)}return ce.sigBytes=4*Ae,ce}}),M.EvpKDF=function(G,k,P){return H.create(P).compute(G,k)},l.EvpKDF)},4564:function(Dt,qe,S){var l,W,oe;Dt.exports=(l=S(7656),S(2414),W=l.lib.CipherParams,oe=l.enc.Hex,l.format.Hex={stringify:function(k){return k.ciphertext.toString(oe)},parse:function(k){var P=oe.parse(k);return W.create({ciphertext:P})}},l.format.Hex)},7868:function(Dt,qe,S){var l,X;Dt.exports=(l=S(7656),X=l.enc.Utf8,void(l.algo.HMAC=l.lib.Base.extend({init:function(G,k){G=this._hasher=new G.init,"string"==typeof k&&(k=X.parse(k));var P=G.blockSize,q=4*P;k.sigBytes>q&&(k=G.finalize(k)),k.clamp();for(var ne=this._oKey=k.clone(),ce=this._iKey=k.clone(),he=ne.words,Ae=ce.words,we=0;we<P;we++)he[we]^=1549556828,Ae[we]^=909522486;ne.sigBytes=ce.sigBytes=q,this.reset()},reset:function(){var G=this._hasher;G.reset(),G.update(this._iKey)},update:function(G){return this._hasher.update(G),this},finalize:function(G){var k=this._hasher,P=k.finalize(G);return k.reset(),k.finalize(this._oKey.clone().concat(P))}})))},1471:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(4501),S(8823),S(5304),S(8891),S(6598),S(8855),S(9986),S(5168),S(9225),S(885),S(4068),S(3752),S(447),S(7868),S(7738),S(4147),S(2414),S(4152),S(9098),S(1057),S(6700),S(6115),S(332),S(7516),S(9047),S(6964),S(2599),S(4564),S(3188),S(2515),S(5350),S(2795),S(2923),S(5269),l)},8823:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),function(){if("function"==typeof ArrayBuffer){var ge=l.lib.WordArray,W=ge.init,X=ge.init=function(oe){if(oe instanceof ArrayBuffer&&(oe=new Uint8Array(oe)),(oe instanceof Int8Array||typeof Uint8ClampedArray<"u"&&oe instanceof Uint8ClampedArray||oe instanceof Int16Array||oe instanceof Uint16Array||oe instanceof Int32Array||oe instanceof Uint32Array||oe instanceof Float32Array||oe instanceof Float64Array)&&(oe=new Uint8Array(oe.buffer,oe.byteOffset,oe.byteLength)),oe instanceof Uint8Array){for(var H=oe.byteLength,G=[],k=0;k<H;k++)G[k>>>2]|=oe[k]<<24-k%4*8;W.call(this,G,H)}else W.apply(this,arguments)};X.prototype=ge}}(),l.lib.WordArray)},8855:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),function(M){var h=l,ge=h.lib,W=ge.WordArray,X=ge.Hasher,oe=h.algo,H=[];!function(){for(var ce=0;ce<64;ce++)H[ce]=4294967296*M.abs(M.sin(ce+1))|0}();var G=oe.MD5=X.extend({_doReset:function(){this._hash=new W.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(ce,he){for(var Ae=0;Ae<16;Ae++){var we=he+Ae,de=ce[we];ce[we]=16711935&(de<<8|de>>>24)|4278255360&(de<<24|de>>>8)}var Re=this._hash.words,ze=ce[he+0],Ge=ce[he+1],Oe=ce[he+2],Ye=ce[he+3],yt=ce[he+4],_t=ce[he+5],ut=ce[he+6],ae=ce[he+7],x=ce[he+8],T=ce[he+9],K=ce[he+10],te=ce[he+11],ve=ce[he+12],Ce=ce[he+13],Be=ce[he+14],Ne=ce[he+15],z=Re[0],Fe=Re[1],Pt=Re[2],ot=Re[3];z=k(z,Fe,Pt,ot,ze,7,H[0]),ot=k(ot,z,Fe,Pt,Ge,12,H[1]),Pt=k(Pt,ot,z,Fe,Oe,17,H[2]),Fe=k(Fe,Pt,ot,z,Ye,22,H[3]),z=k(z,Fe,Pt,ot,yt,7,H[4]),ot=k(ot,z,Fe,Pt,_t,12,H[5]),Pt=k(Pt,ot,z,Fe,ut,17,H[6]),Fe=k(Fe,Pt,ot,z,ae,22,H[7]),z=k(z,Fe,Pt,ot,x,7,H[8]),ot=k(ot,z,Fe,Pt,T,12,H[9]),Pt=k(Pt,ot,z,Fe,K,17,H[10]),Fe=k(Fe,Pt,ot,z,te,22,H[11]),z=k(z,Fe,Pt,ot,ve,7,H[12]),ot=k(ot,z,Fe,Pt,Ce,12,H[13]),Pt=k(Pt,ot,z,Fe,Be,17,H[14]),z=P(z,Fe=k(Fe,Pt,ot,z,Ne,22,H[15]),Pt,ot,Ge,5,H[16]),ot=P(ot,z,Fe,Pt,ut,9,H[17]),Pt=P(Pt,ot,z,Fe,te,14,H[18]),Fe=P(Fe,Pt,ot,z,ze,20,H[19]),z=P(z,Fe,Pt,ot,_t,5,H[20]),ot=P(ot,z,Fe,Pt,K,9,H[21]),Pt=P(Pt,ot,z,Fe,Ne,14,H[22]),Fe=P(Fe,Pt,ot,z,yt,20,H[23]),z=P(z,Fe,Pt,ot,T,5,H[24]),ot=P(ot,z,Fe,Pt,Be,9,H[25]),Pt=P(Pt,ot,z,Fe,Ye,14,H[26]),Fe=P(Fe,Pt,ot,z,x,20,H[27]),z=P(z,Fe,Pt,ot,Ce,5,H[28]),ot=P(ot,z,Fe,Pt,Oe,9,H[29]),Pt=P(Pt,ot,z,Fe,ae,14,H[30]),z=q(z,Fe=P(Fe,Pt,ot,z,ve,20,H[31]),Pt,ot,_t,4,H[32]),ot=q(ot,z,Fe,Pt,x,11,H[33]),Pt=q(Pt,ot,z,Fe,te,16,H[34]),Fe=q(Fe,Pt,ot,z,Be,23,H[35]),z=q(z,Fe,Pt,ot,Ge,4,H[36]),ot=q(ot,z,Fe,Pt,yt,11,H[37]),Pt=q(Pt,ot,z,Fe,ae,16,H[38]),Fe=q(Fe,Pt,ot,z,K,23,H[39]),z=q(z,Fe,Pt,ot,Ce,4,H[40]),ot=q(ot,z,Fe,Pt,ze,11,H[41]),Pt=q(Pt,ot,z,Fe,Ye,16,H[42]),Fe=q(Fe,Pt,ot,z,ut,23,H[43]),z=q(z,Fe,Pt,ot,T,4,H[44]),ot=q(ot,z,Fe,Pt,ve,11,H[45]),Pt=q(Pt,ot,z,Fe,Ne,16,H[46]),z=ne(z,Fe=q(Fe,Pt,ot,z,Oe,23,H[47]),Pt,ot,ze,6,H[48]),ot=ne(ot,z,Fe,Pt,ae,10,H[49]),Pt=ne(Pt,ot,z,Fe,Be,15,H[50]),Fe=ne(Fe,Pt,ot,z,_t,21,H[51]),z=ne(z,Fe,Pt,ot,ve,6,H[52]),ot=ne(ot,z,Fe,Pt,Ye,10,H[53]),Pt=ne(Pt,ot,z,Fe,K,15,H[54]),Fe=ne(Fe,Pt,ot,z,Ge,21,H[55]),z=ne(z,Fe,Pt,ot,x,6,H[56]),ot=ne(ot,z,Fe,Pt,Ne,10,H[57]),Pt=ne(Pt,ot,z,Fe,ut,15,H[58]),Fe=ne(Fe,Pt,ot,z,Ce,21,H[59]),z=ne(z,Fe,Pt,ot,yt,6,H[60]),ot=ne(ot,z,Fe,Pt,te,10,H[61]),Pt=ne(Pt,ot,z,Fe,Oe,15,H[62]),Fe=ne(Fe,Pt,ot,z,T,21,H[63]),Re[0]=Re[0]+z|0,Re[1]=Re[1]+Fe|0,Re[2]=Re[2]+Pt|0,Re[3]=Re[3]+ot|0},_doFinalize:function(){var ce=this._data,he=ce.words,Ae=8*this._nDataBytes,we=8*ce.sigBytes;he[we>>>5]|=128<<24-we%32;var de=M.floor(Ae/4294967296),Re=Ae;he[15+(we+64>>>9<<4)]=16711935&(de<<8|de>>>24)|4278255360&(de<<24|de>>>8),he[14+(we+64>>>9<<4)]=16711935&(Re<<8|Re>>>24)|4278255360&(Re<<24|Re>>>8),ce.sigBytes=4*(he.length+1),this._process();for(var ze=this._hash,Ge=ze.words,Oe=0;Oe<4;Oe++){var Ye=Ge[Oe];Ge[Oe]=16711935&(Ye<<8|Ye>>>24)|4278255360&(Ye<<24|Ye>>>8)}return ze},clone:function(){var ce=X.clone.call(this);return ce._hash=this._hash.clone(),ce}});function k(ce,he,Ae,we,de,Re,ze){var Ge=ce+(he&Ae|~he&we)+de+ze;return(Ge<<Re|Ge>>>32-Re)+he}function P(ce,he,Ae,we,de,Re,ze){var Ge=ce+(he&we|Ae&~we)+de+ze;return(Ge<<Re|Ge>>>32-Re)+he}function q(ce,he,Ae,we,de,Re,ze){var Ge=ce+(he^Ae^we)+de+ze;return(Ge<<Re|Ge>>>32-Re)+he}function ne(ce,he,Ae,we,de,Re,ze){var Ge=ce+(Ae^(he|~we))+de+ze;return(Ge<<Re|Ge>>>32-Re)+he}h.MD5=X._createHelper(G),h.HmacMD5=X._createHmacHelper(G)}(Math),l.MD5)},4152:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(2414),l.mode.CFB=function(){var M=l.lib.BlockCipherMode.extend();function h(ge,W,X,oe){var H,G=this._iv;G?(H=G.slice(0),this._iv=void 0):H=this._prevBlock,oe.encryptBlock(H,0);for(var k=0;k<X;k++)ge[W+k]^=H[k]}return M.Encryptor=M.extend({processBlock:function(ge,W){var X=this._cipher,oe=X.blockSize;h.call(this,ge,W,oe,X),this._prevBlock=ge.slice(W,W+oe)}}),M.Decryptor=M.extend({processBlock:function(ge,W){var X=this._cipher,oe=X.blockSize,H=ge.slice(W,W+oe);h.call(this,ge,W,oe,X),this._prevBlock=H}}),M}(),l.mode.CFB)},1057:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(2414),l.mode.CTRGladman=function(){var M=l.lib.BlockCipherMode.extend();function h(X){if(255&~(X>>24))X+=1<<24;else{var oe=X>>16&255,H=X>>8&255,G=255&X;255===oe?(oe=0,255===H?(H=0,255===G?G=0:++G):++H):++oe,X=0,X+=oe<<16,X+=H<<8,X+=G}return X}var W=M.Encryptor=M.extend({processBlock:function(X,oe){var H=this._cipher,G=H.blockSize,k=this._iv,P=this._counter;k&&(P=this._counter=k.slice(0),this._iv=void 0),function ge(X){return 0===(X[0]=h(X[0]))&&(X[1]=h(X[1])),X}(P);var q=P.slice(0);H.encryptBlock(q,0);for(var ne=0;ne<G;ne++)X[oe+ne]^=q[ne]}});return M.Decryptor=W,M}(),l.mode.CTRGladman)},9098:function(Dt,qe,S){var M,h,l;Dt.exports=(l=S(7656),S(2414),l.mode.CTR=(h=(M=l.lib.BlockCipherMode.extend()).Encryptor=M.extend({processBlock:function(ge,W){var X=this._cipher,oe=X.blockSize,H=this._iv,G=this._counter;H&&(G=this._counter=H.slice(0),this._iv=void 0);var k=G.slice(0);X.encryptBlock(k,0),G[oe-1]=G[oe-1]+1|0;for(var P=0;P<oe;P++)ge[W+P]^=k[P]}}),M.Decryptor=h,M),l.mode.CTR)},6115:function(Dt,qe,S){var M,l;Dt.exports=(l=S(7656),S(2414),l.mode.ECB=((M=l.lib.BlockCipherMode.extend()).Encryptor=M.extend({processBlock:function(h,ge){this._cipher.encryptBlock(h,ge)}}),M.Decryptor=M.extend({processBlock:function(h,ge){this._cipher.decryptBlock(h,ge)}}),M),l.mode.ECB)},6700:function(Dt,qe,S){var M,h,l;Dt.exports=(l=S(7656),S(2414),l.mode.OFB=(h=(M=l.lib.BlockCipherMode.extend()).Encryptor=M.extend({processBlock:function(ge,W){var X=this._cipher,oe=X.blockSize,H=this._iv,G=this._keystream;H&&(G=this._keystream=H.slice(0),this._iv=void 0),X.encryptBlock(G,0);for(var k=0;k<oe;k++)ge[W+k]^=G[k]}}),M.Decryptor=h,M),l.mode.OFB)},332:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(2414),l.pad.AnsiX923={pad:function(M,h){var ge=M.sigBytes,W=4*h,X=W-ge%W,oe=ge+X-1;M.clamp(),M.words[oe>>>2]|=X<<24-oe%4*8,M.sigBytes+=X},unpad:function(M){M.sigBytes-=255&M.words[M.sigBytes-1>>>2]}},l.pad.Ansix923)},7516:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(2414),l.pad.Iso10126={pad:function(M,h){var ge=4*h,W=ge-M.sigBytes%ge;M.concat(l.lib.WordArray.random(W-1)).concat(l.lib.WordArray.create([W<<24],1))},unpad:function(M){M.sigBytes-=255&M.words[M.sigBytes-1>>>2]}},l.pad.Iso10126)},9047:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(2414),l.pad.Iso97971={pad:function(M,h){M.concat(l.lib.WordArray.create([2147483648],1)),l.pad.ZeroPadding.pad(M,h)},unpad:function(M){l.pad.ZeroPadding.unpad(M),M.sigBytes--}},l.pad.Iso97971)},2599:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(2414),l.pad.NoPadding={pad:function(){},unpad:function(){}},l.pad.NoPadding)},6964:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(2414),l.pad.ZeroPadding={pad:function(M,h){var ge=4*h;M.clamp(),M.sigBytes+=ge-(M.sigBytes%ge||ge)},unpad:function(M){var h=M.words,ge=M.sigBytes-1;for(ge=M.sigBytes-1;ge>=0;ge--)if(h[ge>>>2]>>>24-ge%4*8&255){M.sigBytes=ge+1;break}}},l.pad.ZeroPadding)},7738:function(Dt,qe,S){var M,h,ge,W,X,H,G,l;Dt.exports=(l=S(7656),S(5168),S(7868),W=(h=(M=l).lib).WordArray,H=(X=M.algo).HMAC,G=X.PBKDF2=(ge=h.Base).extend({cfg:ge.extend({keySize:4,hasher:X.SHA256,iterations:25e4}),init:function(k){this.cfg=this.cfg.extend(k)},compute:function(k,P){for(var q=this.cfg,ne=H.create(q.hasher,k),ce=W.create(),he=W.create([1]),Ae=ce.words,we=he.words,de=q.keySize,Re=q.iterations;Ae.length<de;){var ze=ne.update(P).finalize(he);ne.reset();for(var Ge=ze.words,Oe=Ge.length,Ye=ze,yt=1;yt<Re;yt++){Ye=ne.finalize(Ye),ne.reset();for(var _t=Ye.words,ut=0;ut<Oe;ut++)Ge[ut]^=_t[ut]}ce.concat(ze),we[0]++}return ce.sigBytes=4*de,ce}}),M.PBKDF2=function(k,P,q){return G.create(q).compute(k,P)},l.PBKDF2)},2923:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(8891),S(8855),S(4147),S(2414),function(){var M=l,ge=M.lib.StreamCipher,X=[],oe=[],H=[],G=M.algo.RabbitLegacy=ge.extend({_doReset:function(){var P=this._key.words,q=this.cfg.iv,ne=this._X=[P[0],P[3]<<16|P[2]>>>16,P[1],P[0]<<16|P[3]>>>16,P[2],P[1]<<16|P[0]>>>16,P[3],P[2]<<16|P[1]>>>16],ce=this._C=[P[2]<<16|P[2]>>>16,4294901760&P[0]|65535&P[1],P[3]<<16|P[3]>>>16,4294901760&P[1]|65535&P[2],P[0]<<16|P[0]>>>16,4294901760&P[2]|65535&P[3],P[1]<<16|P[1]>>>16,4294901760&P[3]|65535&P[0]];this._b=0;for(var he=0;he<4;he++)k.call(this);for(he=0;he<8;he++)ce[he]^=ne[he+4&7];if(q){var Ae=q.words,we=Ae[0],de=Ae[1],Re=16711935&(we<<8|we>>>24)|4278255360&(we<<24|we>>>8),ze=16711935&(de<<8|de>>>24)|4278255360&(de<<24|de>>>8),Ge=Re>>>16|4294901760&ze,Oe=ze<<16|65535&Re;for(ce[0]^=Re,ce[1]^=Ge,ce[2]^=ze,ce[3]^=Oe,ce[4]^=Re,ce[5]^=Ge,ce[6]^=ze,ce[7]^=Oe,he=0;he<4;he++)k.call(this)}},_doProcessBlock:function(P,q){var ne=this._X;k.call(this),X[0]=ne[0]^ne[5]>>>16^ne[3]<<16,X[1]=ne[2]^ne[7]>>>16^ne[5]<<16,X[2]=ne[4]^ne[1]>>>16^ne[7]<<16,X[3]=ne[6]^ne[3]>>>16^ne[1]<<16;for(var ce=0;ce<4;ce++)X[ce]=16711935&(X[ce]<<8|X[ce]>>>24)|4278255360&(X[ce]<<24|X[ce]>>>8),P[q+ce]^=X[ce]},blockSize:4,ivSize:2});function k(){for(var P=this._X,q=this._C,ne=0;ne<8;ne++)oe[ne]=q[ne];for(q[0]=q[0]+1295307597+this._b|0,q[1]=q[1]+3545052371+(q[0]>>>0<oe[0]>>>0?1:0)|0,q[2]=q[2]+886263092+(q[1]>>>0<oe[1]>>>0?1:0)|0,q[3]=q[3]+1295307597+(q[2]>>>0<oe[2]>>>0?1:0)|0,q[4]=q[4]+3545052371+(q[3]>>>0<oe[3]>>>0?1:0)|0,q[5]=q[5]+886263092+(q[4]>>>0<oe[4]>>>0?1:0)|0,q[6]=q[6]+1295307597+(q[5]>>>0<oe[5]>>>0?1:0)|0,q[7]=q[7]+3545052371+(q[6]>>>0<oe[6]>>>0?1:0)|0,this._b=q[7]>>>0<oe[7]>>>0?1:0,ne=0;ne<8;ne++){var ce=P[ne]+q[ne],he=65535&ce,Ae=ce>>>16;H[ne]=((he*he>>>17)+he*Ae>>>15)+Ae*Ae^((4294901760&ce)*ce|0)+((65535&ce)*ce|0)}P[0]=H[0]+(H[7]<<16|H[7]>>>16)+(H[6]<<16|H[6]>>>16)|0,P[1]=H[1]+(H[0]<<8|H[0]>>>24)+H[7]|0,P[2]=H[2]+(H[1]<<16|H[1]>>>16)+(H[0]<<16|H[0]>>>16)|0,P[3]=H[3]+(H[2]<<8|H[2]>>>24)+H[1]|0,P[4]=H[4]+(H[3]<<16|H[3]>>>16)+(H[2]<<16|H[2]>>>16)|0,P[5]=H[5]+(H[4]<<8|H[4]>>>24)+H[3]|0,P[6]=H[6]+(H[5]<<16|H[5]>>>16)+(H[4]<<16|H[4]>>>16)|0,P[7]=H[7]+(H[6]<<8|H[6]>>>24)+H[5]|0}M.RabbitLegacy=ge._createHelper(G)}(),l.RabbitLegacy)},2795:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(8891),S(8855),S(4147),S(2414),function(){var M=l,ge=M.lib.StreamCipher,X=[],oe=[],H=[],G=M.algo.Rabbit=ge.extend({_doReset:function(){for(var P=this._key.words,q=this.cfg.iv,ne=0;ne<4;ne++)P[ne]=16711935&(P[ne]<<8|P[ne]>>>24)|4278255360&(P[ne]<<24|P[ne]>>>8);var ce=this._X=[P[0],P[3]<<16|P[2]>>>16,P[1],P[0]<<16|P[3]>>>16,P[2],P[1]<<16|P[0]>>>16,P[3],P[2]<<16|P[1]>>>16],he=this._C=[P[2]<<16|P[2]>>>16,4294901760&P[0]|65535&P[1],P[3]<<16|P[3]>>>16,4294901760&P[1]|65535&P[2],P[0]<<16|P[0]>>>16,4294901760&P[2]|65535&P[3],P[1]<<16|P[1]>>>16,4294901760&P[3]|65535&P[0]];for(this._b=0,ne=0;ne<4;ne++)k.call(this);for(ne=0;ne<8;ne++)he[ne]^=ce[ne+4&7];if(q){var Ae=q.words,we=Ae[0],de=Ae[1],Re=16711935&(we<<8|we>>>24)|4278255360&(we<<24|we>>>8),ze=16711935&(de<<8|de>>>24)|4278255360&(de<<24|de>>>8),Ge=Re>>>16|4294901760&ze,Oe=ze<<16|65535&Re;for(he[0]^=Re,he[1]^=Ge,he[2]^=ze,he[3]^=Oe,he[4]^=Re,he[5]^=Ge,he[6]^=ze,he[7]^=Oe,ne=0;ne<4;ne++)k.call(this)}},_doProcessBlock:function(P,q){var ne=this._X;k.call(this),X[0]=ne[0]^ne[5]>>>16^ne[3]<<16,X[1]=ne[2]^ne[7]>>>16^ne[5]<<16,X[2]=ne[4]^ne[1]>>>16^ne[7]<<16,X[3]=ne[6]^ne[3]>>>16^ne[1]<<16;for(var ce=0;ce<4;ce++)X[ce]=16711935&(X[ce]<<8|X[ce]>>>24)|4278255360&(X[ce]<<24|X[ce]>>>8),P[q+ce]^=X[ce]},blockSize:4,ivSize:2});function k(){for(var P=this._X,q=this._C,ne=0;ne<8;ne++)oe[ne]=q[ne];for(q[0]=q[0]+1295307597+this._b|0,q[1]=q[1]+3545052371+(q[0]>>>0<oe[0]>>>0?1:0)|0,q[2]=q[2]+886263092+(q[1]>>>0<oe[1]>>>0?1:0)|0,q[3]=q[3]+1295307597+(q[2]>>>0<oe[2]>>>0?1:0)|0,q[4]=q[4]+3545052371+(q[3]>>>0<oe[3]>>>0?1:0)|0,q[5]=q[5]+886263092+(q[4]>>>0<oe[4]>>>0?1:0)|0,q[6]=q[6]+1295307597+(q[5]>>>0<oe[5]>>>0?1:0)|0,q[7]=q[7]+3545052371+(q[6]>>>0<oe[6]>>>0?1:0)|0,this._b=q[7]>>>0<oe[7]>>>0?1:0,ne=0;ne<8;ne++){var ce=P[ne]+q[ne],he=65535&ce,Ae=ce>>>16;H[ne]=((he*he>>>17)+he*Ae>>>15)+Ae*Ae^((4294901760&ce)*ce|0)+((65535&ce)*ce|0)}P[0]=H[0]+(H[7]<<16|H[7]>>>16)+(H[6]<<16|H[6]>>>16)|0,P[1]=H[1]+(H[0]<<8|H[0]>>>24)+H[7]|0,P[2]=H[2]+(H[1]<<16|H[1]>>>16)+(H[0]<<16|H[0]>>>16)|0,P[3]=H[3]+(H[2]<<8|H[2]>>>24)+H[1]|0,P[4]=H[4]+(H[3]<<16|H[3]>>>16)+(H[2]<<16|H[2]>>>16)|0,P[5]=H[5]+(H[4]<<8|H[4]>>>24)+H[3]|0,P[6]=H[6]+(H[5]<<16|H[5]>>>16)+(H[4]<<16|H[4]>>>16)|0,P[7]=H[7]+(H[6]<<8|H[6]>>>24)+H[5]|0}M.Rabbit=ge._createHelper(G)}(),l.Rabbit)},5350:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(8891),S(8855),S(4147),S(2414),function(){var M=l,ge=M.lib.StreamCipher,W=M.algo,X=W.RC4=ge.extend({_doReset:function(){for(var G=this._key,k=G.words,P=G.sigBytes,q=this._S=[],ne=0;ne<256;ne++)q[ne]=ne;ne=0;for(var ce=0;ne<256;ne++){var he=ne%P,we=q[ne];q[ne]=q[ce=(ce+q[ne]+(k[he>>>2]>>>24-he%4*8&255))%256],q[ce]=we}this._i=this._j=0},_doProcessBlock:function(G,k){G[k]^=oe.call(this)},keySize:8,ivSize:0});function oe(){for(var G=this._S,k=this._i,P=this._j,q=0,ne=0;ne<4;ne++){var ce=G[k=(k+1)%256];G[k]=G[P=(P+G[k])%256],G[P]=ce,q|=G[(G[k]+G[P])%256]<<24-8*ne}return this._i=k,this._j=P,q}M.RC4=ge._createHelper(X);var H=W.RC4Drop=X.extend({cfg:X.cfg.extend({drop:192}),_doReset:function(){X._doReset.call(this);for(var G=this.cfg.drop;G>0;G--)oe.call(this)}});M.RC4Drop=ge._createHelper(H)}(),l.RC4)},447:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),function(M){var h=l,ge=h.lib,W=ge.WordArray,X=ge.Hasher,oe=h.algo,H=W.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),G=W.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),k=W.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),P=W.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),q=W.create([0,1518500249,1859775393,2400959708,2840853838]),ne=W.create([1352829926,1548603684,1836072691,2053994217,0]),ce=oe.RIPEMD160=X.extend({_doReset:function(){this._hash=W.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(Ge,Oe){for(var Ye=0;Ye<16;Ye++){var yt=Oe+Ye,_t=Ge[yt];Ge[yt]=16711935&(_t<<8|_t>>>24)|4278255360&(_t<<24|_t>>>8)}var Ce,Be,Ne,z,Fe,Pt,ot,Vt,vt,st,Ft,ut=this._hash.words,ae=q.words,x=ne.words,T=H.words,K=G.words,te=k.words,ve=P.words;for(Pt=Ce=ut[0],ot=Be=ut[1],Vt=Ne=ut[2],vt=z=ut[3],st=Fe=ut[4],Ye=0;Ye<80;Ye+=1)Ft=Ce+Ge[Oe+T[Ye]]|0,Ft+=Ye<16?he(Be,Ne,z)+ae[0]:Ye<32?Ae(Be,Ne,z)+ae[1]:Ye<48?we(Be,Ne,z)+ae[2]:Ye<64?de(Be,Ne,z)+ae[3]:Re(Be,Ne,z)+ae[4],Ft=(Ft=ze(Ft|=0,te[Ye]))+Fe|0,Ce=Fe,Fe=z,z=ze(Ne,10),Ne=Be,Be=Ft,Ft=Pt+Ge[Oe+K[Ye]]|0,Ft+=Ye<16?Re(ot,Vt,vt)+x[0]:Ye<32?de(ot,Vt,vt)+x[1]:Ye<48?we(ot,Vt,vt)+x[2]:Ye<64?Ae(ot,Vt,vt)+x[3]:he(ot,Vt,vt)+x[4],Ft=(Ft=ze(Ft|=0,ve[Ye]))+st|0,Pt=st,st=vt,vt=ze(Vt,10),Vt=ot,ot=Ft;Ft=ut[1]+Ne+vt|0,ut[1]=ut[2]+z+st|0,ut[2]=ut[3]+Fe+Pt|0,ut[3]=ut[4]+Ce+ot|0,ut[4]=ut[0]+Be+Vt|0,ut[0]=Ft},_doFinalize:function(){var Ge=this._data,Oe=Ge.words,Ye=8*this._nDataBytes,yt=8*Ge.sigBytes;Oe[yt>>>5]|=128<<24-yt%32,Oe[14+(yt+64>>>9<<4)]=16711935&(Ye<<8|Ye>>>24)|4278255360&(Ye<<24|Ye>>>8),Ge.sigBytes=4*(Oe.length+1),this._process();for(var _t=this._hash,ut=_t.words,ae=0;ae<5;ae++){var x=ut[ae];ut[ae]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8)}return _t},clone:function(){var Ge=X.clone.call(this);return Ge._hash=this._hash.clone(),Ge}});function he(Ge,Oe,Ye){return Ge^Oe^Ye}function Ae(Ge,Oe,Ye){return Ge&Oe|~Ge&Ye}function we(Ge,Oe,Ye){return(Ge|~Oe)^Ye}function de(Ge,Oe,Ye){return Ge&Ye|Oe&~Ye}function Re(Ge,Oe,Ye){return Ge^(Oe|~Ye)}function ze(Ge,Oe){return Ge<<Oe|Ge>>>32-Oe}h.RIPEMD160=X._createHelper(ce),h.HmacRIPEMD160=X._createHmacHelper(ce)}(Math),l.RIPEMD160)},9986:function(Dt,qe,S){var M,h,ge,W,oe,H,l;Dt.exports=(l=S(7656),ge=(h=(M=l).lib).WordArray,oe=[],H=M.algo.SHA1=(W=h.Hasher).extend({_doReset:function(){this._hash=new ge.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(G,k){for(var P=this._hash.words,q=P[0],ne=P[1],ce=P[2],he=P[3],Ae=P[4],we=0;we<80;we++){if(we<16)oe[we]=0|G[k+we];else{var de=oe[we-3]^oe[we-8]^oe[we-14]^oe[we-16];oe[we]=de<<1|de>>>31}var Re=(q<<5|q>>>27)+Ae+oe[we];Re+=we<20?1518500249+(ne&ce|~ne&he):we<40?1859775393+(ne^ce^he):we<60?(ne&ce|ne&he|ce&he)-1894007588:(ne^ce^he)-899497514,Ae=he,he=ce,ce=ne<<30|ne>>>2,ne=q,q=Re}P[0]=P[0]+q|0,P[1]=P[1]+ne|0,P[2]=P[2]+ce|0,P[3]=P[3]+he|0,P[4]=P[4]+Ae|0},_doFinalize:function(){var G=this._data,k=G.words,P=8*this._nDataBytes,q=8*G.sigBytes;return k[q>>>5]|=128<<24-q%32,k[14+(q+64>>>9<<4)]=Math.floor(P/4294967296),k[15+(q+64>>>9<<4)]=P,G.sigBytes=4*k.length,this._process(),this._hash},clone:function(){var G=W.clone.call(this);return G._hash=this._hash.clone(),G}}),M.SHA1=W._createHelper(H),M.HmacSHA1=W._createHmacHelper(H),l.SHA1)},9225:function(Dt,qe,S){var M,ge,W,X,oe,l;Dt.exports=(l=S(7656),S(5168),ge=(M=l).lib.WordArray,oe=(W=M.algo).SHA224=(X=W.SHA256).extend({_doReset:function(){this._hash=new ge.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var H=X._doFinalize.call(this);return H.sigBytes-=4,H}}),M.SHA224=X._createHelper(oe),M.HmacSHA224=X._createHmacHelper(oe),l.SHA224)},5168:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),function(M){var h=l,ge=h.lib,W=ge.WordArray,X=ge.Hasher,oe=h.algo,H=[],G=[];!function(){function q(Ae){for(var we=M.sqrt(Ae),de=2;de<=we;de++)if(!(Ae%de))return!1;return!0}function ne(Ae){return 4294967296*(Ae-(0|Ae))|0}for(var ce=2,he=0;he<64;)q(ce)&&(he<8&&(H[he]=ne(M.pow(ce,.5))),G[he]=ne(M.pow(ce,1/3)),he++),ce++}();var k=[],P=oe.SHA256=X.extend({_doReset:function(){this._hash=new W.init(H.slice(0))},_doProcessBlock:function(q,ne){for(var ce=this._hash.words,he=ce[0],Ae=ce[1],we=ce[2],de=ce[3],Re=ce[4],ze=ce[5],Ge=ce[6],Oe=ce[7],Ye=0;Ye<64;Ye++){if(Ye<16)k[Ye]=0|q[ne+Ye];else{var yt=k[Ye-15],ut=k[Ye-2];k[Ye]=((yt<<25|yt>>>7)^(yt<<14|yt>>>18)^yt>>>3)+k[Ye-7]+((ut<<15|ut>>>17)^(ut<<13|ut>>>19)^ut>>>10)+k[Ye-16]}var T=he&Ae^he&we^Ae&we,ve=Oe+((Re<<26|Re>>>6)^(Re<<21|Re>>>11)^(Re<<7|Re>>>25))+(Re&ze^~Re&Ge)+G[Ye]+k[Ye];Oe=Ge,Ge=ze,ze=Re,Re=de+ve|0,de=we,we=Ae,Ae=he,he=ve+(((he<<30|he>>>2)^(he<<19|he>>>13)^(he<<10|he>>>22))+T)|0}ce[0]=ce[0]+he|0,ce[1]=ce[1]+Ae|0,ce[2]=ce[2]+we|0,ce[3]=ce[3]+de|0,ce[4]=ce[4]+Re|0,ce[5]=ce[5]+ze|0,ce[6]=ce[6]+Ge|0,ce[7]=ce[7]+Oe|0},_doFinalize:function(){var q=this._data,ne=q.words,ce=8*this._nDataBytes,he=8*q.sigBytes;return ne[he>>>5]|=128<<24-he%32,ne[14+(he+64>>>9<<4)]=M.floor(ce/4294967296),ne[15+(he+64>>>9<<4)]=ce,q.sigBytes=4*ne.length,this._process(),this._hash},clone:function(){var q=X.clone.call(this);return q._hash=this._hash.clone(),q}});h.SHA256=X._createHelper(P),h.HmacSHA256=X._createHmacHelper(P)}(Math),l.SHA256)},3752:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(4501),function(M){var h=l,ge=h.lib,W=ge.WordArray,X=ge.Hasher,H=h.x64.Word,G=h.algo,k=[],P=[],q=[];!function(){for(var he=1,Ae=0,we=0;we<24;we++){k[he+5*Ae]=(we+1)*(we+2)/2%64;var Re=(2*he+3*Ae)%5;he=Ae%5,Ae=Re}for(he=0;he<5;he++)for(Ae=0;Ae<5;Ae++)P[he+5*Ae]=Ae+(2*he+3*Ae)%5*5;for(var ze=1,Ge=0;Ge<24;Ge++){for(var Oe=0,Ye=0,yt=0;yt<7;yt++){if(1&ze){var _t=(1<<yt)-1;_t<32?Ye^=1<<_t:Oe^=1<<_t-32}128&ze?ze=ze<<1^113:ze<<=1}q[Ge]=H.create(Oe,Ye)}}();var ne=[];!function(){for(var he=0;he<25;he++)ne[he]=H.create()}();var ce=G.SHA3=X.extend({cfg:X.cfg.extend({outputLength:512}),_doReset:function(){for(var he=this._state=[],Ae=0;Ae<25;Ae++)he[Ae]=new H.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(he,Ae){for(var we=this._state,de=this.blockSize/2,Re=0;Re<de;Re++){var ze=he[Ae+2*Re],Ge=he[Ae+2*Re+1];ze=16711935&(ze<<8|ze>>>24)|4278255360&(ze<<24|ze>>>8),(Oe=we[Re]).high^=Ge=16711935&(Ge<<8|Ge>>>24)|4278255360&(Ge<<24|Ge>>>8),Oe.low^=ze}for(var Ye=0;Ye<24;Ye++){for(var yt=0;yt<5;yt++){for(var _t=0,ut=0,ae=0;ae<5;ae++)_t^=(Oe=we[yt+5*ae]).high,ut^=Oe.low;var x=ne[yt];x.high=_t,x.low=ut}for(yt=0;yt<5;yt++){var T=ne[(yt+4)%5],K=ne[(yt+1)%5],te=K.high,ve=K.low;for(_t=T.high^(te<<1|ve>>>31),ut=T.low^(ve<<1|te>>>31),ae=0;ae<5;ae++)(Oe=we[yt+5*ae]).high^=_t,Oe.low^=ut}for(var Ce=1;Ce<25;Ce++){var Be=(Oe=we[Ce]).high,Ne=Oe.low,z=k[Ce];z<32?(_t=Be<<z|Ne>>>32-z,ut=Ne<<z|Be>>>32-z):(_t=Ne<<z-32|Be>>>64-z,ut=Be<<z-32|Ne>>>64-z);var Fe=ne[P[Ce]];Fe.high=_t,Fe.low=ut}var Pt=ne[0],ot=we[0];for(Pt.high=ot.high,Pt.low=ot.low,yt=0;yt<5;yt++)for(ae=0;ae<5;ae++){var Vt=ne[Ce=yt+5*ae],vt=ne[(yt+1)%5+5*ae],st=ne[(yt+2)%5+5*ae];(Oe=we[Ce]).high=Vt.high^~vt.high&st.high,Oe.low=Vt.low^~vt.low&st.low}var Oe,Ft=q[Ye];(Oe=we[0]).high^=Ft.high,Oe.low^=Ft.low}},_doFinalize:function(){var he=this._data,Ae=he.words,de=8*he.sigBytes,Re=32*this.blockSize;Ae[de>>>5]|=1<<24-de%32,Ae[(M.ceil((de+1)/Re)*Re>>>5)-1]|=128,he.sigBytes=4*Ae.length,this._process();for(var ze=this._state,Ge=this.cfg.outputLength/8,Oe=Ge/8,Ye=[],yt=0;yt<Oe;yt++){var _t=ze[yt],ut=_t.high,ae=_t.low;ut=16711935&(ut<<8|ut>>>24)|4278255360&(ut<<24|ut>>>8),Ye.push(ae=16711935&(ae<<8|ae>>>24)|4278255360&(ae<<24|ae>>>8)),Ye.push(ut)}return new W.init(Ye,Ge)},clone:function(){for(var he=X.clone.call(this),Ae=he._state=this._state.slice(0),we=0;we<25;we++)Ae[we]=Ae[we].clone();return he}});h.SHA3=X._createHelper(ce),h.HmacSHA3=X._createHmacHelper(ce)}(Math),l.SHA3)},4068:function(Dt,qe,S){var M,h,ge,W,X,oe,H,l;Dt.exports=(l=S(7656),S(4501),S(885),ge=(h=(M=l).x64).Word,W=h.WordArray,H=(X=M.algo).SHA384=(oe=X.SHA512).extend({_doReset:function(){this._hash=new W.init([new ge.init(3418070365,3238371032),new ge.init(1654270250,914150663),new ge.init(2438529370,812702999),new ge.init(355462360,4144912697),new ge.init(1731405415,4290775857),new ge.init(2394180231,1750603025),new ge.init(3675008525,1694076839),new ge.init(1203062813,3204075428)])},_doFinalize:function(){var G=oe._doFinalize.call(this);return G.sigBytes-=16,G}}),M.SHA384=oe._createHelper(H),M.HmacSHA384=oe._createHmacHelper(H),l.SHA384)},885:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(4501),function(){var M=l,ge=M.lib.Hasher,W=M.x64,X=W.Word,oe=W.WordArray,H=M.algo;function G(){return X.create.apply(X,arguments)}var k=[G(1116352408,3609767458),G(1899447441,602891725),G(3049323471,3964484399),G(3921009573,2173295548),G(961987163,4081628472),G(1508970993,3053834265),G(2453635748,2937671579),G(2870763221,3664609560),G(3624381080,2734883394),G(310598401,1164996542),G(607225278,1323610764),G(1426881987,3590304994),G(1925078388,4068182383),G(2162078206,991336113),G(2614888103,633803317),G(3248222580,3479774868),G(3835390401,2666613458),G(4022224774,944711139),G(264347078,2341262773),G(604807628,2007800933),G(770255983,1495990901),G(1249150122,1856431235),G(1555081692,3175218132),G(1996064986,2198950837),G(2554220882,3999719339),G(2821834349,766784016),G(2952996808,2566594879),G(3210313671,3203337956),G(3336571891,1034457026),G(3584528711,2466948901),G(113926993,3758326383),G(338241895,168717936),G(666307205,1188179964),G(773529912,1546045734),G(1294757372,1522805485),G(1396182291,2643833823),G(1695183700,2343527390),G(1986661051,1014477480),G(2177026350,1206759142),G(2456956037,344077627),G(2730485921,1290863460),G(2820302411,3158454273),G(3259730800,3505952657),G(3345764771,106217008),G(3516065817,3606008344),G(3600352804,1432725776),G(4094571909,1467031594),G(275423344,851169720),G(430227734,3100823752),G(506948616,1363258195),G(659060556,3750685593),G(883997877,3785050280),G(958139571,3318307427),G(1322822218,3812723403),G(1537002063,2003034995),G(1747873779,3602036899),G(1955562222,1575990012),G(2024104815,1125592928),G(2227730452,2716904306),G(2361852424,442776044),G(2428436474,593698344),G(2756734187,3733110249),G(3204031479,2999351573),G(3329325298,3815920427),G(3391569614,3928383900),G(3515267271,566280711),G(3940187606,3454069534),G(4118630271,4000239992),G(116418474,1914138554),G(174292421,2731055270),G(289380356,3203993006),G(460393269,320620315),G(685471733,587496836),G(852142971,1086792851),G(1017036298,365543100),G(1126000580,2618297676),G(1288033470,3409855158),G(1501505948,4234509866),G(1607167915,987167468),G(1816402316,1246189591)],P=[];!function(){for(var ne=0;ne<80;ne++)P[ne]=G()}();var q=H.SHA512=ge.extend({_doReset:function(){this._hash=new oe.init([new X.init(1779033703,4089235720),new X.init(3144134277,2227873595),new X.init(1013904242,4271175723),new X.init(2773480762,1595750129),new X.init(1359893119,2917565137),new X.init(2600822924,725511199),new X.init(528734635,4215389547),new X.init(1541459225,327033209)])},_doProcessBlock:function(ne,ce){for(var he=this._hash.words,Ae=he[0],we=he[1],de=he[2],Re=he[3],ze=he[4],Ge=he[5],Oe=he[6],Ye=he[7],yt=Ae.high,_t=Ae.low,ut=we.high,ae=we.low,x=de.high,T=de.low,K=Re.high,te=Re.low,ve=ze.high,Ce=ze.low,Be=Ge.high,Ne=Ge.low,z=Oe.high,Fe=Oe.low,Pt=Ye.high,ot=Ye.low,Vt=yt,vt=_t,st=ut,Ft=ae,$e=x,Xe=T,kt=K,cn=te,rn=ve,gn=Ce,Xt=Be,hn=Ne,ct=z,Ot=Fe,It=Pt,an=ot,Fn=0;Fn<80;Fn++){var Xn,Zn,Hr=P[Fn];if(Fn<16)Zn=Hr.high=0|ne[ce+2*Fn],Xn=Hr.low=0|ne[ce+2*Fn+1];else{var Hn=P[Fn-15],Dn=Hn.high,Un=Hn.low,Qi=(Un>>>1|Dn<<31)^(Un>>>8|Dn<<24)^(Un>>>7|Dn<<25),Rr=P[Fn-2],ii=Rr.high,yi=Rr.low,Yn=(yi>>>19|ii<<13)^(yi<<3|ii>>>29)^(yi>>>6|ii<<26),cr=P[Fn-7],Ir=P[Fn-16],gr=Ir.low;Hr.high=Zn=(Zn=(Zn=((Dn>>>1|Un<<31)^(Dn>>>8|Un<<24)^Dn>>>7)+cr.high+((Xn=Qi+cr.low)>>>0<Qi>>>0?1:0))+((ii>>>19|yi<<13)^(ii<<3|yi>>>29)^ii>>>6)+((Xn+=Yn)>>>0<Yn>>>0?1:0))+Ir.high+((Xn+=gr)>>>0<gr>>>0?1:0),Hr.low=Xn}var oi,Zr=rn&Xt^~rn&ct,ls=gn&hn^~gn&Ot,ar=Vt&st^Vt&$e^st&$e,at=(vt>>>28|Vt<<4)^(vt<<30|Vt>>>2)^(vt<<25|Vt>>>7),vn=k[Fn],zi=vn.low,gi=It+((rn>>>14|gn<<18)^(rn>>>18|gn<<14)^(rn<<23|gn>>>9))+((oi=an+((gn>>>14|rn<<18)^(gn>>>18|rn<<14)^(gn<<23|rn>>>9)))>>>0<an>>>0?1:0),Nr=at+(vt&Ft^vt&Xe^Ft&Xe);It=ct,an=Ot,ct=Xt,Ot=hn,Xt=rn,hn=gn,rn=kt+(gi=(gi=(gi=gi+Zr+((oi+=ls)>>>0<ls>>>0?1:0))+vn.high+((oi+=zi)>>>0<zi>>>0?1:0))+Zn+((oi+=Xn)>>>0<Xn>>>0?1:0))+((gn=cn+oi|0)>>>0<cn>>>0?1:0)|0,kt=$e,cn=Xe,$e=st,Xe=Ft,st=Vt,Ft=vt,Vt=gi+(((Vt>>>28|vt<<4)^(Vt<<30|vt>>>2)^(Vt<<25|vt>>>7))+ar+(Nr>>>0<at>>>0?1:0))+((vt=oi+Nr|0)>>>0<oi>>>0?1:0)|0}_t=Ae.low=_t+vt,Ae.high=yt+Vt+(_t>>>0<vt>>>0?1:0),ae=we.low=ae+Ft,we.high=ut+st+(ae>>>0<Ft>>>0?1:0),T=de.low=T+Xe,de.high=x+$e+(T>>>0<Xe>>>0?1:0),te=Re.low=te+cn,Re.high=K+kt+(te>>>0<cn>>>0?1:0),Ce=ze.low=Ce+gn,ze.high=ve+rn+(Ce>>>0<gn>>>0?1:0),Ne=Ge.low=Ne+hn,Ge.high=Be+Xt+(Ne>>>0<hn>>>0?1:0),Fe=Oe.low=Fe+Ot,Oe.high=z+ct+(Fe>>>0<Ot>>>0?1:0),ot=Ye.low=ot+an,Ye.high=Pt+It+(ot>>>0<an>>>0?1:0)},_doFinalize:function(){var ne=this._data,ce=ne.words,he=8*this._nDataBytes,Ae=8*ne.sigBytes;return ce[Ae>>>5]|=128<<24-Ae%32,ce[30+(Ae+128>>>10<<5)]=Math.floor(he/4294967296),ce[31+(Ae+128>>>10<<5)]=he,ne.sigBytes=4*ce.length,this._process(),this._hash.toX32()},clone:function(){var ne=ge.clone.call(this);return ne._hash=this._hash.clone(),ne},blockSize:32});M.SHA512=ge._createHelper(q),M.HmacSHA512=ge._createHmacHelper(q)}(),l.SHA512)},2515:function(Dt,qe,S){var l;Dt.exports=(l=S(7656),S(8891),S(8855),S(4147),S(2414),function(){var M=l,h=M.lib,ge=h.WordArray,W=h.BlockCipher,X=M.algo,oe=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],H=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],G=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],k=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],P=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],q=X.DES=W.extend({_doReset:function(){for(var we=this._key.words,de=[],Re=0;Re<56;Re++){var ze=oe[Re]-1;de[Re]=we[ze>>>5]>>>31-ze%32&1}for(var Ge=this._subKeys=[],Oe=0;Oe<16;Oe++){var Ye=Ge[Oe]=[],yt=G[Oe];for(Re=0;Re<24;Re++)Ye[Re/6|0]|=de[(H[Re]-1+yt)%28]<<31-Re%6,Ye[4+(Re/6|0)]|=de[28+(H[Re+24]-1+yt)%28]<<31-Re%6;for(Ye[0]=Ye[0]<<1|Ye[0]>>>31,Re=1;Re<7;Re++)Ye[Re]=Ye[Re]>>>4*(Re-1)+3;Ye[7]=Ye[7]<<5|Ye[7]>>>27}var _t=this._invSubKeys=[];for(Re=0;Re<16;Re++)_t[Re]=Ge[15-Re]},encryptBlock:function(Ae,we){this._doCryptBlock(Ae,we,this._subKeys)},decryptBlock:function(Ae,we){this._doCryptBlock(Ae,we,this._invSubKeys)},_doCryptBlock:function(Ae,we,de){this._lBlock=Ae[we],this._rBlock=Ae[we+1],ne.call(this,4,252645135),ne.call(this,16,65535),ce.call(this,2,858993459),ce.call(this,8,16711935),ne.call(this,1,1431655765);for(var Re=0;Re<16;Re++){for(var ze=de[Re],Ge=this._lBlock,Oe=this._rBlock,Ye=0,yt=0;yt<8;yt++)Ye|=k[yt][((Oe^ze[yt])&P[yt])>>>0];this._lBlock=Oe,this._rBlock=Ge^Ye}var _t=this._lBlock;this._lBlock=this._rBlock,this._rBlock=_t,ne.call(this,1,1431655765),ce.call(this,8,16711935),ce.call(this,2,858993459),ne.call(this,16,65535),ne.call(this,4,252645135),Ae[we]=this._lBlock,Ae[we+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function ne(Ae,we){var de=(this._lBlock>>>Ae^this._rBlock)&we;this._rBlock^=de,this._lBlock^=de<<Ae}function ce(Ae,we){var de=(this._rBlock>>>Ae^this._lBlock)&we;this._lBlock^=de,this._rBlock^=de<<Ae}M.DES=W._createHelper(q);var he=X.TripleDES=W.extend({_doReset:function(){var we=this._key.words;if(2!==we.length&&4!==we.length&&we.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var de=we.slice(0,2),Re=we.length<4?we.slice(0,2):we.slice(2,4),ze=we.length<6?we.slice(0,2):we.slice(4,6);this._des1=q.createEncryptor(ge.create(de)),this._des2=q.createEncryptor(ge.create(Re)),this._des3=q.createEncryptor(ge.create(ze))},encryptBlock:function(Ae,we){this._des1.encryptBlock(Ae,we),this._des2.decryptBlock(Ae,we),this._des3.encryptBlock(Ae,we)},decryptBlock:function(Ae,we){this._des3.decryptBlock(Ae,we),this._des2.encryptBlock(Ae,we),this._des1.decryptBlock(Ae,we)},keySize:6,ivSize:2,blockSize:2});M.TripleDES=W._createHelper(he)}(),l.TripleDES)},4501:function(Dt,qe,S){var ge,W,X,oe,l;Dt.exports=(l=S(7656),W=(ge=l.lib).Base,X=ge.WordArray,(oe=l.x64={}).Word=W.extend({init:function(k,P){this.high=k,this.low=P}}),oe.WordArray=W.extend({init:function(k,P){k=this.words=k||[],this.sigBytes=null!=P?P:8*k.length},toX32:function(){for(var k=this.words,P=k.length,q=[],ne=0;ne<P;ne++){var ce=k[ne];q.push(ce.high),q.push(ce.low)}return X.create(q,this.sigBytes)},clone:function(){for(var k=W.clone.call(this),P=k.words=this.words.slice(0),q=P.length,ne=0;ne<q;ne++)P[ne]=P[ne].clone();return k}}),l)},518:(Dt,qe,S)=>{"use strict";var l=qe;l.version=S(1636).rE,l.utils=S(3136),l.rand=S(5294),l.curve=S(8729),l.curves=S(3401),l.ec=S(9042),l.eddsa=S(3045)},8828:(Dt,qe,S)=>{"use strict";var l=S(917),M=S(3136),h=M.getNAF,ge=M.getJSF,W=M.assert;function X(H,G){this.type=H,this.p=new l(G.p,16),this.red=G.prime?l.red(G.prime):l.mont(this.p),this.zero=new l(0).toRed(this.red),this.one=new l(1).toRed(this.red),this.two=new l(2).toRed(this.red),this.n=G.n&&new l(G.n,16),this.g=G.g&&this.pointFromJSON(G.g,G.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var k=this.n&&this.p.div(this.n);!k||k.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function oe(H,G){this.curve=H,this.type=G,this.precomputed=null}Dt.exports=X,X.prototype.point=function(){throw new Error("Not implemented")},X.prototype.validate=function(){throw new Error("Not implemented")},X.prototype._fixedNafMul=function(G,k){W(G.precomputed);var P=G._getDoubles(),q=h(k,1,this._bitLength),ne=(1<<P.step+1)-(P.step%2==0?2:1);ne/=3;var he,Ae,ce=[];for(he=0;he<q.length;he+=P.step){Ae=0;for(var we=he+P.step-1;we>=he;we--)Ae=(Ae<<1)+q[we];ce.push(Ae)}for(var de=this.jpoint(null,null,null),Re=this.jpoint(null,null,null),ze=ne;ze>0;ze--){for(he=0;he<ce.length;he++)(Ae=ce[he])===ze?Re=Re.mixedAdd(P.points[he]):Ae===-ze&&(Re=Re.mixedAdd(P.points[he].neg()));de=de.add(Re)}return de.toP()},X.prototype._wnafMul=function(G,k){for(var P=4,q=G._getNAFPoints(P),ne=q.points,ce=h(k,P=q.wnd,this._bitLength),he=this.jpoint(null,null,null),Ae=ce.length-1;Ae>=0;Ae--){for(var we=0;Ae>=0&&0===ce[Ae];Ae--)we++;if(Ae>=0&&we++,he=he.dblp(we),Ae<0)break;var de=ce[Ae];W(0!==de),he="affine"===G.type?he.mixedAdd(de>0?ne[de-1>>1]:ne[-de-1>>1].neg()):he.add(de>0?ne[de-1>>1]:ne[-de-1>>1].neg())}return"affine"===G.type?he.toP():he},X.prototype._wnafMulAdd=function(G,k,P,q,ne){var de,Re,ze,ce=this._wnafT1,he=this._wnafT2,Ae=this._wnafT3,we=0;for(de=0;de<q;de++){var Ge=(ze=k[de])._getNAFPoints(G);ce[de]=Ge.wnd,he[de]=Ge.points}for(de=q-1;de>=1;de-=2){var Oe=de-1,Ye=de;if(1===ce[Oe]&&1===ce[Ye]){var yt=[k[Oe],null,null,k[Ye]];0===k[Oe].y.cmp(k[Ye].y)?(yt[1]=k[Oe].add(k[Ye]),yt[2]=k[Oe].toJ().mixedAdd(k[Ye].neg())):0===k[Oe].y.cmp(k[Ye].y.redNeg())?(yt[1]=k[Oe].toJ().mixedAdd(k[Ye]),yt[2]=k[Oe].add(k[Ye].neg())):(yt[1]=k[Oe].toJ().mixedAdd(k[Ye]),yt[2]=k[Oe].toJ().mixedAdd(k[Ye].neg()));var _t=[-3,-1,-5,-7,0,7,5,1,3],ut=ge(P[Oe],P[Ye]);for(we=Math.max(ut[0].length,we),Ae[Oe]=new Array(we),Ae[Ye]=new Array(we),Re=0;Re<we;Re++)Ae[Oe][Re]=_t[3*(1+(0|ut[0][Re]))+(1+(0|ut[1][Re]))],Ae[Ye][Re]=0,he[Oe]=yt}else Ae[Oe]=h(P[Oe],ce[Oe],this._bitLength),Ae[Ye]=h(P[Ye],ce[Ye],this._bitLength),we=Math.max(Ae[Oe].length,we),we=Math.max(Ae[Ye].length,we)}var T=this.jpoint(null,null,null),K=this._wnafT4;for(de=we;de>=0;de--){for(var te=0;de>=0;){var ve=!0;for(Re=0;Re<q;Re++)K[Re]=0|Ae[Re][de],0!==K[Re]&&(ve=!1);if(!ve)break;te++,de--}if(de>=0&&te++,T=T.dblp(te),de<0)break;for(Re=0;Re<q;Re++){var Ce=K[Re];0!==Ce&&(Ce>0?ze=he[Re][Ce-1>>1]:Ce<0&&(ze=he[Re][-Ce-1>>1].neg()),T="affine"===ze.type?T.mixedAdd(ze):T.add(ze))}}for(de=0;de<q;de++)he[de]=null;return ne?T:T.toP()},X.BasePoint=oe,oe.prototype.eq=function(){throw new Error("Not implemented")},oe.prototype.validate=function(){return this.curve.validate(this)},X.prototype.decodePoint=function(G,k){G=M.toArray(G,k);var P=this.p.byteLength();if((4===G[0]||6===G[0]||7===G[0])&&G.length-1==2*P)return 6===G[0]?W(G[G.length-1]%2==0):7===G[0]&&W(G[G.length-1]%2==1),this.point(G.slice(1,1+P),G.slice(1+P,1+2*P));if((2===G[0]||3===G[0])&&G.length-1===P)return this.pointFromX(G.slice(1,1+P),3===G[0]);throw new Error("Unknown point format")},oe.prototype.encodeCompressed=function(G){return this.encode(G,!0)},oe.prototype._encode=function(G){var k=this.curve.p.byteLength(),P=this.getX().toArray("be",k);return G?[this.getY().isEven()?2:3].concat(P):[4].concat(P,this.getY().toArray("be",k))},oe.prototype.encode=function(G,k){return M.encode(this._encode(k),G)},oe.prototype.precompute=function(G){if(this.precomputed)return this;var k={doubles:null,naf:null,beta:null};return k.naf=this._getNAFPoints(8),k.doubles=this._getDoubles(4,G),k.beta=this._getBeta(),this.precomputed=k,this},oe.prototype._hasDoubles=function(G){if(!this.precomputed)return!1;var k=this.precomputed.doubles;return!!k&&k.points.length>=Math.ceil((G.bitLength()+1)/k.step)},oe.prototype._getDoubles=function(G,k){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var P=[this],q=this,ne=0;ne<k;ne+=G){for(var ce=0;ce<G;ce++)q=q.dbl();P.push(q)}return{step:G,points:P}},oe.prototype._getNAFPoints=function(G){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var k=[this],P=(1<<G)-1,q=1===P?null:this.dbl(),ne=1;ne<P;ne++)k[ne]=k[ne-1].add(q);return{wnd:G,points:k}},oe.prototype._getBeta=function(){return null},oe.prototype.dblp=function(G){for(var k=this,P=0;P<G;P++)k=k.dbl();return k}},5537:(Dt,qe,S)=>{"use strict";var l=S(3136),M=S(917),h=S(1993),ge=S(8828),W=l.assert;function X(H){this.twisted=1!=(0|H.a),this.mOneA=this.twisted&&-1==(0|H.a),this.extended=this.mOneA,ge.call(this,"edwards",H),this.a=new M(H.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new M(H.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new M(H.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),W(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|H.c)}function oe(H,G,k,P,q){ge.BasePoint.call(this,H,"projective"),null===G&&null===k&&null===P?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new M(G,16),this.y=new M(k,16),this.z=P?new M(P,16):this.curve.one,this.t=q&&new M(q,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}h(X,ge),Dt.exports=X,X.prototype._mulA=function(G){return this.mOneA?G.redNeg():this.a.redMul(G)},X.prototype._mulC=function(G){return this.oneC?G:this.c.redMul(G)},X.prototype.jpoint=function(G,k,P,q){return this.point(G,k,P,q)},X.prototype.pointFromX=function(G,k){(G=new M(G,16)).red||(G=G.toRed(this.red));var P=G.redSqr(),q=this.c2.redSub(this.a.redMul(P)),ne=this.one.redSub(this.c2.redMul(this.d).redMul(P)),ce=q.redMul(ne.redInvm()),he=ce.redSqrt();if(0!==he.redSqr().redSub(ce).cmp(this.zero))throw new Error("invalid point");var Ae=he.fromRed().isOdd();return(k&&!Ae||!k&&Ae)&&(he=he.redNeg()),this.point(G,he)},X.prototype.pointFromY=function(G,k){(G=new M(G,16)).red||(G=G.toRed(this.red));var P=G.redSqr(),q=P.redSub(this.c2),ne=P.redMul(this.d).redMul(this.c2).redSub(this.a),ce=q.redMul(ne.redInvm());if(0===ce.cmp(this.zero)){if(k)throw new Error("invalid point");return this.point(this.zero,G)}var he=ce.redSqrt();if(0!==he.redSqr().redSub(ce).cmp(this.zero))throw new Error("invalid point");return he.fromRed().isOdd()!==k&&(he=he.redNeg()),this.point(he,G)},X.prototype.validate=function(G){if(G.isInfinity())return!0;G.normalize();var k=G.x.redSqr(),P=G.y.redSqr(),q=k.redMul(this.a).redAdd(P),ne=this.c2.redMul(this.one.redAdd(this.d.redMul(k).redMul(P)));return 0===q.cmp(ne)},h(oe,ge.BasePoint),X.prototype.pointFromJSON=function(G){return oe.fromJSON(this,G)},X.prototype.point=function(G,k,P,q){return new oe(this,G,k,P,q)},oe.fromJSON=function(G,k){return new oe(G,k[0],k[1],k[2])},oe.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},oe.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},oe.prototype._extDbl=function(){var G=this.x.redSqr(),k=this.y.redSqr(),P=this.z.redSqr();P=P.redIAdd(P);var q=this.curve._mulA(G),ne=this.x.redAdd(this.y).redSqr().redISub(G).redISub(k),ce=q.redAdd(k),he=ce.redSub(P),Ae=q.redSub(k),we=ne.redMul(he),de=ce.redMul(Ae),Re=ne.redMul(Ae),ze=he.redMul(ce);return this.curve.point(we,de,ze,Re)},oe.prototype._projDbl=function(){var q,ne,ce,he,Ae,we,G=this.x.redAdd(this.y).redSqr(),k=this.x.redSqr(),P=this.y.redSqr();if(this.curve.twisted){var de=(he=this.curve._mulA(k)).redAdd(P);this.zOne?(q=G.redSub(k).redSub(P).redMul(de.redSub(this.curve.two)),ne=de.redMul(he.redSub(P)),ce=de.redSqr().redSub(de).redSub(de)):(Ae=this.z.redSqr(),we=de.redSub(Ae).redISub(Ae),q=G.redSub(k).redISub(P).redMul(we),ne=de.redMul(he.redSub(P)),ce=de.redMul(we))}else he=k.redAdd(P),Ae=this.curve._mulC(this.z).redSqr(),we=he.redSub(Ae).redSub(Ae),q=this.curve._mulC(G.redISub(he)).redMul(we),ne=this.curve._mulC(he).redMul(k.redISub(P)),ce=he.redMul(we);return this.curve.point(q,ne,ce)},oe.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},oe.prototype._extAdd=function(G){var k=this.y.redSub(this.x).redMul(G.y.redSub(G.x)),P=this.y.redAdd(this.x).redMul(G.y.redAdd(G.x)),q=this.t.redMul(this.curve.dd).redMul(G.t),ne=this.z.redMul(G.z.redAdd(G.z)),ce=P.redSub(k),he=ne.redSub(q),Ae=ne.redAdd(q),we=P.redAdd(k),de=ce.redMul(he),Re=Ae.redMul(we),ze=ce.redMul(we),Ge=he.redMul(Ae);return this.curve.point(de,Re,Ge,ze)},oe.prototype._projAdd=function(G){var Re,ze,k=this.z.redMul(G.z),P=k.redSqr(),q=this.x.redMul(G.x),ne=this.y.redMul(G.y),ce=this.curve.d.redMul(q).redMul(ne),he=P.redSub(ce),Ae=P.redAdd(ce),we=this.x.redAdd(this.y).redMul(G.x.redAdd(G.y)).redISub(q).redISub(ne),de=k.redMul(he).redMul(we);return this.curve.twisted?(Re=k.redMul(Ae).redMul(ne.redSub(this.curve._mulA(q))),ze=he.redMul(Ae)):(Re=k.redMul(Ae).redMul(ne.redSub(q)),ze=this.curve._mulC(he).redMul(Ae)),this.curve.point(de,Re,ze)},oe.prototype.add=function(G){return this.isInfinity()?G:G.isInfinity()?this:this.curve.extended?this._extAdd(G):this._projAdd(G)},oe.prototype.mul=function(G){return this._hasDoubles(G)?this.curve._fixedNafMul(this,G):this.curve._wnafMul(this,G)},oe.prototype.mulAdd=function(G,k,P){return this.curve._wnafMulAdd(1,[this,k],[G,P],2,!1)},oe.prototype.jmulAdd=function(G,k,P){return this.curve._wnafMulAdd(1,[this,k],[G,P],2,!0)},oe.prototype.normalize=function(){if(this.zOne)return this;var G=this.z.redInvm();return this.x=this.x.redMul(G),this.y=this.y.redMul(G),this.t&&(this.t=this.t.redMul(G)),this.z=this.curve.one,this.zOne=!0,this},oe.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},oe.prototype.getX=function(){return this.normalize(),this.x.fromRed()},oe.prototype.getY=function(){return this.normalize(),this.y.fromRed()},oe.prototype.eq=function(G){return this===G||0===this.getX().cmp(G.getX())&&0===this.getY().cmp(G.getY())},oe.prototype.eqXToP=function(G){var k=G.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(k))return!0;for(var P=G.clone(),q=this.curve.redN.redMul(this.z);;){if(P.iadd(this.curve.n),P.cmp(this.curve.p)>=0)return!1;if(k.redIAdd(q),0===this.x.cmp(k))return!0}},oe.prototype.toP=oe.prototype.normalize,oe.prototype.mixedAdd=oe.prototype.add},8729:(Dt,qe,S)=>{"use strict";var l=qe;l.base=S(8828),l.short=S(8075),l.mont=S(4947),l.edwards=S(5537)},4947:(Dt,qe,S)=>{"use strict";var l=S(917),M=S(1993),h=S(8828),ge=S(3136);function W(oe){h.call(this,"mont",oe),this.a=new l(oe.a,16).toRed(this.red),this.b=new l(oe.b,16).toRed(this.red),this.i4=new l(4).toRed(this.red).redInvm(),this.two=new l(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function X(oe,H,G){h.BasePoint.call(this,oe,"projective"),null===H&&null===G?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new l(H,16),this.z=new l(G,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}M(W,h),Dt.exports=W,W.prototype.validate=function(H){var G=H.normalize().x,k=G.redSqr(),P=k.redMul(G).redAdd(k.redMul(this.a)).redAdd(G);return 0===P.redSqrt().redSqr().cmp(P)},M(X,h.BasePoint),W.prototype.decodePoint=function(H,G){return this.point(ge.toArray(H,G),1)},W.prototype.point=function(H,G){return new X(this,H,G)},W.prototype.pointFromJSON=function(H){return X.fromJSON(this,H)},X.prototype.precompute=function(){},X.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},X.fromJSON=function(H,G){return new X(H,G[0],G[1]||H.one)},X.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},X.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},X.prototype.dbl=function(){var G=this.x.redAdd(this.z).redSqr(),P=this.x.redSub(this.z).redSqr(),q=G.redSub(P),ne=G.redMul(P),ce=q.redMul(P.redAdd(this.curve.a24.redMul(q)));return this.curve.point(ne,ce)},X.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},X.prototype.diffAdd=function(H,G){var k=this.x.redAdd(this.z),P=this.x.redSub(this.z),q=H.x.redAdd(H.z),ce=H.x.redSub(H.z).redMul(k),he=q.redMul(P),Ae=G.z.redMul(ce.redAdd(he).redSqr()),we=G.x.redMul(ce.redISub(he).redSqr());return this.curve.point(Ae,we)},X.prototype.mul=function(H){for(var G=H.clone(),k=this,P=this.curve.point(null,null),ne=[];0!==G.cmpn(0);G.iushrn(1))ne.push(G.andln(1));for(var ce=ne.length-1;ce>=0;ce--)0===ne[ce]?(k=k.diffAdd(P,this),P=P.dbl()):(P=k.diffAdd(P,this),k=k.dbl());return P},X.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},X.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},X.prototype.eq=function(H){return 0===this.getX().cmp(H.getX())},X.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},X.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},8075:(Dt,qe,S)=>{"use strict";var l=S(3136),M=S(917),h=S(1993),ge=S(8828),W=l.assert;function X(G){ge.call(this,"short",G),this.a=new M(G.a,16).toRed(this.red),this.b=new M(G.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(G),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function oe(G,k,P,q){ge.BasePoint.call(this,G,"affine"),null===k&&null===P?(this.x=null,this.y=null,this.inf=!0):(this.x=new M(k,16),this.y=new M(P,16),q&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function H(G,k,P,q){ge.BasePoint.call(this,G,"jacobian"),null===k&&null===P&&null===q?(this.x=this.curve.one,this.y=this.curve.one,this.z=new M(0)):(this.x=new M(k,16),this.y=new M(P,16),this.z=new M(q,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}h(X,ge),Dt.exports=X,X.prototype._getEndomorphism=function(k){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var P,q;if(k.beta)P=new M(k.beta,16).toRed(this.red);else{var ne=this._getEndoRoots(this.p);P=(P=ne[0].cmp(ne[1])<0?ne[0]:ne[1]).toRed(this.red)}if(k.lambda)q=new M(k.lambda,16);else{var ce=this._getEndoRoots(this.n);0===this.g.mul(ce[0]).x.cmp(this.g.x.redMul(P))?q=ce[0]:W(0===this.g.mul(q=ce[1]).x.cmp(this.g.x.redMul(P)))}return{beta:P,lambda:q,basis:k.basis?k.basis.map(function(Ae){return{a:new M(Ae.a,16),b:new M(Ae.b,16)}}):this._getEndoBasis(q)}}},X.prototype._getEndoRoots=function(k){var P=k===this.p?this.red:M.mont(k),q=new M(2).toRed(P).redInvm(),ne=q.redNeg(),ce=new M(3).toRed(P).redNeg().redSqrt().redMul(q);return[ne.redAdd(ce).fromRed(),ne.redSub(ce).fromRed()]},X.prototype._getEndoBasis=function(k){for(var de,Re,ze,Ge,Oe,Ye,yt,ut,ae,P=this.n.ushrn(Math.floor(this.n.bitLength()/2)),q=k,ne=this.n.clone(),ce=new M(1),he=new M(0),Ae=new M(0),we=new M(1),_t=0;0!==q.cmpn(0);){var x=ne.div(q);ut=ne.sub(x.mul(q)),ae=Ae.sub(x.mul(ce));var T=we.sub(x.mul(he));if(!ze&&ut.cmp(P)<0)de=yt.neg(),Re=ce,ze=ut.neg(),Ge=ae;else if(ze&&2==++_t)break;yt=ut,ne=q,q=ut,Ae=ce,ce=ae,we=he,he=T}Oe=ut.neg(),Ye=ae;var K=ze.sqr().add(Ge.sqr());return Oe.sqr().add(Ye.sqr()).cmp(K)>=0&&(Oe=de,Ye=Re),ze.negative&&(ze=ze.neg(),Ge=Ge.neg()),Oe.negative&&(Oe=Oe.neg(),Ye=Ye.neg()),[{a:ze,b:Ge},{a:Oe,b:Ye}]},X.prototype._endoSplit=function(k){var P=this.endo.basis,q=P[0],ne=P[1],ce=ne.b.mul(k).divRound(this.n),he=q.b.neg().mul(k).divRound(this.n),Ae=ce.mul(q.a),we=he.mul(ne.a),de=ce.mul(q.b),Re=he.mul(ne.b);return{k1:k.sub(Ae).sub(we),k2:de.add(Re).neg()}},X.prototype.pointFromX=function(k,P){(k=new M(k,16)).red||(k=k.toRed(this.red));var q=k.redSqr().redMul(k).redIAdd(k.redMul(this.a)).redIAdd(this.b),ne=q.redSqrt();if(0!==ne.redSqr().redSub(q).cmp(this.zero))throw new Error("invalid point");var ce=ne.fromRed().isOdd();return(P&&!ce||!P&&ce)&&(ne=ne.redNeg()),this.point(k,ne)},X.prototype.validate=function(k){if(k.inf)return!0;var P=k.x,q=k.y,ne=this.a.redMul(P),ce=P.redSqr().redMul(P).redIAdd(ne).redIAdd(this.b);return 0===q.redSqr().redISub(ce).cmpn(0)},X.prototype._endoWnafMulAdd=function(k,P,q){for(var ne=this._endoWnafT1,ce=this._endoWnafT2,he=0;he<k.length;he++){var Ae=this._endoSplit(P[he]),we=k[he],de=we._getBeta();Ae.k1.negative&&(Ae.k1.ineg(),we=we.neg(!0)),Ae.k2.negative&&(Ae.k2.ineg(),de=de.neg(!0)),ne[2*he]=we,ne[2*he+1]=de,ce[2*he]=Ae.k1,ce[2*he+1]=Ae.k2}for(var Re=this._wnafMulAdd(1,ne,ce,2*he,q),ze=0;ze<2*he;ze++)ne[ze]=null,ce[ze]=null;return Re},h(oe,ge.BasePoint),X.prototype.point=function(k,P,q){return new oe(this,k,P,q)},X.prototype.pointFromJSON=function(k,P){return oe.fromJSON(this,k,P)},oe.prototype._getBeta=function(){if(this.curve.endo){var k=this.precomputed;if(k&&k.beta)return k.beta;var P=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(k){var q=this.curve,ne=function(ce){return q.point(ce.x.redMul(q.endo.beta),ce.y)};k.beta=P,P.precomputed={beta:null,naf:k.naf&&{wnd:k.naf.wnd,points:k.naf.points.map(ne)},doubles:k.doubles&&{step:k.doubles.step,points:k.doubles.points.map(ne)}}}return P}},oe.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},oe.fromJSON=function(k,P,q){"string"==typeof P&&(P=JSON.parse(P));var ne=k.point(P[0],P[1],q);if(!P[2])return ne;function ce(Ae){return k.point(Ae[0],Ae[1],q)}var he=P[2];return ne.precomputed={beta:null,doubles:he.doubles&&{step:he.doubles.step,points:[ne].concat(he.doubles.points.map(ce))},naf:he.naf&&{wnd:he.naf.wnd,points:[ne].concat(he.naf.points.map(ce))}},ne},oe.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},oe.prototype.isInfinity=function(){return this.inf},oe.prototype.add=function(k){if(this.inf)return k;if(k.inf)return this;if(this.eq(k))return this.dbl();if(this.neg().eq(k))return this.curve.point(null,null);if(0===this.x.cmp(k.x))return this.curve.point(null,null);var P=this.y.redSub(k.y);0!==P.cmpn(0)&&(P=P.redMul(this.x.redSub(k.x).redInvm()));var q=P.redSqr().redISub(this.x).redISub(k.x),ne=P.redMul(this.x.redSub(q)).redISub(this.y);return this.curve.point(q,ne)},oe.prototype.dbl=function(){if(this.inf)return this;var k=this.y.redAdd(this.y);if(0===k.cmpn(0))return this.curve.point(null,null);var P=this.curve.a,q=this.x.redSqr(),ne=k.redInvm(),ce=q.redAdd(q).redIAdd(q).redIAdd(P).redMul(ne),he=ce.redSqr().redISub(this.x.redAdd(this.x)),Ae=ce.redMul(this.x.redSub(he)).redISub(this.y);return this.curve.point(he,Ae)},oe.prototype.getX=function(){return this.x.fromRed()},oe.prototype.getY=function(){return this.y.fromRed()},oe.prototype.mul=function(k){return k=new M(k,16),this.isInfinity()?this:this._hasDoubles(k)?this.curve._fixedNafMul(this,k):this.curve.endo?this.curve._endoWnafMulAdd([this],[k]):this.curve._wnafMul(this,k)},oe.prototype.mulAdd=function(k,P,q){var ne=[this,P],ce=[k,q];return this.curve.endo?this.curve._endoWnafMulAdd(ne,ce):this.curve._wnafMulAdd(1,ne,ce,2)},oe.prototype.jmulAdd=function(k,P,q){var ne=[this,P],ce=[k,q];return this.curve.endo?this.curve._endoWnafMulAdd(ne,ce,!0):this.curve._wnafMulAdd(1,ne,ce,2,!0)},oe.prototype.eq=function(k){return this===k||this.inf===k.inf&&(this.inf||0===this.x.cmp(k.x)&&0===this.y.cmp(k.y))},oe.prototype.neg=function(k){if(this.inf)return this;var P=this.curve.point(this.x,this.y.redNeg());if(k&&this.precomputed){var q=this.precomputed,ne=function(ce){return ce.neg()};P.precomputed={naf:q.naf&&{wnd:q.naf.wnd,points:q.naf.points.map(ne)},doubles:q.doubles&&{step:q.doubles.step,points:q.doubles.points.map(ne)}}}return P},oe.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},h(H,ge.BasePoint),X.prototype.jpoint=function(k,P,q){return new H(this,k,P,q)},H.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var k=this.z.redInvm(),P=k.redSqr(),q=this.x.redMul(P),ne=this.y.redMul(P).redMul(k);return this.curve.point(q,ne)},H.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},H.prototype.add=function(k){if(this.isInfinity())return k;if(k.isInfinity())return this;var P=k.z.redSqr(),q=this.z.redSqr(),ne=this.x.redMul(P),ce=k.x.redMul(q),he=this.y.redMul(P.redMul(k.z)),Ae=k.y.redMul(q.redMul(this.z)),we=ne.redSub(ce),de=he.redSub(Ae);if(0===we.cmpn(0))return 0!==de.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var Re=we.redSqr(),ze=Re.redMul(we),Ge=ne.redMul(Re),Oe=de.redSqr().redIAdd(ze).redISub(Ge).redISub(Ge),Ye=de.redMul(Ge.redISub(Oe)).redISub(he.redMul(ze)),yt=this.z.redMul(k.z).redMul(we);return this.curve.jpoint(Oe,Ye,yt)},H.prototype.mixedAdd=function(k){if(this.isInfinity())return k.toJ();if(k.isInfinity())return this;var P=this.z.redSqr(),q=this.x,ne=k.x.redMul(P),ce=this.y,he=k.y.redMul(P).redMul(this.z),Ae=q.redSub(ne),we=ce.redSub(he);if(0===Ae.cmpn(0))return 0!==we.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var de=Ae.redSqr(),Re=de.redMul(Ae),ze=q.redMul(de),Ge=we.redSqr().redIAdd(Re).redISub(ze).redISub(ze),Oe=we.redMul(ze.redISub(Ge)).redISub(ce.redMul(Re)),Ye=this.z.redMul(Ae);return this.curve.jpoint(Ge,Oe,Ye)},H.prototype.dblp=function(k){if(0===k)return this;if(this.isInfinity())return this;if(!k)return this.dbl();var P;if(this.curve.zeroA||this.curve.threeA){var q=this;for(P=0;P<k;P++)q=q.dbl();return q}var ne=this.curve.a,ce=this.curve.tinv,he=this.x,Ae=this.y,we=this.z,de=we.redSqr().redSqr(),Re=Ae.redAdd(Ae);for(P=0;P<k;P++){var ze=he.redSqr(),Ge=Re.redSqr(),Oe=Ge.redSqr(),Ye=ze.redAdd(ze).redIAdd(ze).redIAdd(ne.redMul(de)),yt=he.redMul(Ge),_t=Ye.redSqr().redISub(yt.redAdd(yt)),ut=yt.redISub(_t),ae=Ye.redMul(ut);ae=ae.redIAdd(ae).redISub(Oe);var x=Re.redMul(we);P+1<k&&(de=de.redMul(Oe)),he=_t,we=x,Re=ae}return this.curve.jpoint(he,Re.redMul(ce),we)},H.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},H.prototype._zeroDbl=function(){var k,P,q;if(this.zOne){var ne=this.x.redSqr(),ce=this.y.redSqr(),he=ce.redSqr(),Ae=this.x.redAdd(ce).redSqr().redISub(ne).redISub(he);Ae=Ae.redIAdd(Ae);var we=ne.redAdd(ne).redIAdd(ne),de=we.redSqr().redISub(Ae).redISub(Ae),Re=he.redIAdd(he);Re=(Re=Re.redIAdd(Re)).redIAdd(Re),k=de,P=we.redMul(Ae.redISub(de)).redISub(Re),q=this.y.redAdd(this.y)}else{var ze=this.x.redSqr(),Ge=this.y.redSqr(),Oe=Ge.redSqr(),Ye=this.x.redAdd(Ge).redSqr().redISub(ze).redISub(Oe);Ye=Ye.redIAdd(Ye);var yt=ze.redAdd(ze).redIAdd(ze),_t=yt.redSqr(),ut=Oe.redIAdd(Oe);ut=(ut=ut.redIAdd(ut)).redIAdd(ut),k=_t.redISub(Ye).redISub(Ye),P=yt.redMul(Ye.redISub(k)).redISub(ut),q=(q=this.y.redMul(this.z)).redIAdd(q)}return this.curve.jpoint(k,P,q)},H.prototype._threeDbl=function(){var k,P,q;if(this.zOne){var ne=this.x.redSqr(),ce=this.y.redSqr(),he=ce.redSqr(),Ae=this.x.redAdd(ce).redSqr().redISub(ne).redISub(he);Ae=Ae.redIAdd(Ae);var we=ne.redAdd(ne).redIAdd(ne).redIAdd(this.curve.a),de=we.redSqr().redISub(Ae).redISub(Ae);k=de;var Re=he.redIAdd(he);Re=(Re=Re.redIAdd(Re)).redIAdd(Re),P=we.redMul(Ae.redISub(de)).redISub(Re),q=this.y.redAdd(this.y)}else{var ze=this.z.redSqr(),Ge=this.y.redSqr(),Oe=this.x.redMul(Ge),Ye=this.x.redSub(ze).redMul(this.x.redAdd(ze));Ye=Ye.redAdd(Ye).redIAdd(Ye);var yt=Oe.redIAdd(Oe),_t=(yt=yt.redIAdd(yt)).redAdd(yt);k=Ye.redSqr().redISub(_t),q=this.y.redAdd(this.z).redSqr().redISub(Ge).redISub(ze);var ut=Ge.redSqr();ut=(ut=(ut=ut.redIAdd(ut)).redIAdd(ut)).redIAdd(ut),P=Ye.redMul(yt.redISub(k)).redISub(ut)}return this.curve.jpoint(k,P,q)},H.prototype._dbl=function(){var k=this.curve.a,P=this.x,q=this.y,ne=this.z,ce=ne.redSqr().redSqr(),he=P.redSqr(),Ae=q.redSqr(),we=he.redAdd(he).redIAdd(he).redIAdd(k.redMul(ce)),de=P.redAdd(P),Re=(de=de.redIAdd(de)).redMul(Ae),ze=we.redSqr().redISub(Re.redAdd(Re)),Ge=Re.redISub(ze),Oe=Ae.redSqr();Oe=(Oe=(Oe=Oe.redIAdd(Oe)).redIAdd(Oe)).redIAdd(Oe);var Ye=we.redMul(Ge).redISub(Oe),yt=q.redAdd(q).redMul(ne);return this.curve.jpoint(ze,Ye,yt)},H.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var k=this.x.redSqr(),P=this.y.redSqr(),q=this.z.redSqr(),ne=P.redSqr(),ce=k.redAdd(k).redIAdd(k),he=ce.redSqr(),Ae=this.x.redAdd(P).redSqr().redISub(k).redISub(ne),we=(Ae=(Ae=(Ae=Ae.redIAdd(Ae)).redAdd(Ae).redIAdd(Ae)).redISub(he)).redSqr(),de=ne.redIAdd(ne);de=(de=(de=de.redIAdd(de)).redIAdd(de)).redIAdd(de);var Re=ce.redIAdd(Ae).redSqr().redISub(he).redISub(we).redISub(de),ze=P.redMul(Re);ze=(ze=ze.redIAdd(ze)).redIAdd(ze);var Ge=this.x.redMul(we).redISub(ze);Ge=(Ge=Ge.redIAdd(Ge)).redIAdd(Ge);var Oe=this.y.redMul(Re.redMul(de.redISub(Re)).redISub(Ae.redMul(we)));Oe=(Oe=(Oe=Oe.redIAdd(Oe)).redIAdd(Oe)).redIAdd(Oe);var Ye=this.z.redAdd(Ae).redSqr().redISub(q).redISub(we);return this.curve.jpoint(Ge,Oe,Ye)},H.prototype.mul=function(k,P){return k=new M(k,P),this.curve._wnafMul(this,k)},H.prototype.eq=function(k){if("affine"===k.type)return this.eq(k.toJ());if(this===k)return!0;var P=this.z.redSqr(),q=k.z.redSqr();if(0!==this.x.redMul(q).redISub(k.x.redMul(P)).cmpn(0))return!1;var ne=P.redMul(this.z),ce=q.redMul(k.z);return 0===this.y.redMul(ce).redISub(k.y.redMul(ne)).cmpn(0)},H.prototype.eqXToP=function(k){var P=this.z.redSqr(),q=k.toRed(this.curve.red).redMul(P);if(0===this.x.cmp(q))return!0;for(var ne=k.clone(),ce=this.curve.redN.redMul(P);;){if(ne.iadd(this.curve.n),ne.cmp(this.curve.p)>=0)return!1;if(q.redIAdd(ce),0===this.x.cmp(q))return!0}},H.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},H.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},3401:(Dt,qe,S)=>{"use strict";var H,l=qe,M=S(2529),h=S(8729),W=S(3136).assert;function X(G){this.curve="short"===G.type?new h.short(G):"edwards"===G.type?new h.edwards(G):new h.mont(G),this.g=this.curve.g,this.n=this.curve.n,this.hash=G.hash,W(this.g.validate(),"Invalid curve"),W(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function oe(G,k){Object.defineProperty(l,G,{configurable:!0,enumerable:!0,get:function(){var P=new X(k);return Object.defineProperty(l,G,{configurable:!0,enumerable:!0,value:P}),P}})}l.PresetCurve=X,oe("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:M.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),oe("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:M.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),oe("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:M.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),oe("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:M.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),oe("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:M.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),oe("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:M.sha256,gRed:!1,g:["9"]}),oe("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:M.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{H=S(1416)}catch{H=void 0}oe("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:M.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",H]})},9042:(Dt,qe,S)=>{"use strict";var l=S(917),M=S(3556),h=S(3136),ge=S(3401),W=S(5294),X=h.assert,oe=S(541),H=S(484);function G(k){if(!(this instanceof G))return new G(k);"string"==typeof k&&(X(Object.prototype.hasOwnProperty.call(ge,k),"Unknown curve "+k),k=ge[k]),k instanceof ge.PresetCurve&&(k={curve:k}),this.curve=k.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=k.curve.g,this.g.precompute(k.curve.n.bitLength()+1),this.hash=k.hash||k.curve.hash}Dt.exports=G,G.prototype.keyPair=function(P){return new oe(this,P)},G.prototype.keyFromPrivate=function(P,q){return oe.fromPrivate(this,P,q)},G.prototype.keyFromPublic=function(P,q){return oe.fromPublic(this,P,q)},G.prototype.genKeyPair=function(P){P||(P={});for(var q=new M({hash:this.hash,pers:P.pers,persEnc:P.persEnc||"utf8",entropy:P.entropy||W(this.hash.hmacStrength),entropyEnc:P.entropy&&P.entropyEnc||"utf8",nonce:this.n.toArray()}),ne=this.n.byteLength(),ce=this.n.sub(new l(2));;){var he=new l(q.generate(ne));if(!(he.cmp(ce)>0))return he.iaddn(1),this.keyFromPrivate(he)}},G.prototype._truncateToN=function(P,q){var ne=8*P.byteLength()-this.n.bitLength();return ne>0&&(P=P.ushrn(ne)),!q&&P.cmp(this.n)>=0?P.sub(this.n):P},G.prototype.sign=function(P,q,ne,ce){"object"==typeof ne&&(ce=ne,ne=null),ce||(ce={}),q=this.keyFromPrivate(q,ne),P=this._truncateToN(new l(P,16));for(var he=this.n.byteLength(),Ae=q.getPrivate().toArray("be",he),we=P.toArray("be",he),de=new M({hash:this.hash,entropy:Ae,nonce:we,pers:ce.pers,persEnc:ce.persEnc||"utf8"}),Re=this.n.sub(new l(1)),ze=0;;ze++){var Ge=ce.k?ce.k(ze):new l(de.generate(this.n.byteLength()));if(!((Ge=this._truncateToN(Ge,!0)).cmpn(1)<=0||Ge.cmp(Re)>=0)){var Oe=this.g.mul(Ge);if(!Oe.isInfinity()){var Ye=Oe.getX(),yt=Ye.umod(this.n);if(0!==yt.cmpn(0)){var _t=Ge.invm(this.n).mul(yt.mul(q.getPrivate()).iadd(P));if(0!==(_t=_t.umod(this.n)).cmpn(0)){var ut=(Oe.getY().isOdd()?1:0)|(0!==Ye.cmp(yt)?2:0);return ce.canonical&&_t.cmp(this.nh)>0&&(_t=this.n.sub(_t),ut^=1),new H({r:yt,s:_t,recoveryParam:ut})}}}}}},G.prototype.verify=function(P,q,ne,ce){P=this._truncateToN(new l(P,16)),ne=this.keyFromPublic(ne,ce);var he=(q=new H(q,"hex")).r,Ae=q.s;if(he.cmpn(1)<0||he.cmp(this.n)>=0||Ae.cmpn(1)<0||Ae.cmp(this.n)>=0)return!1;var ze,we=Ae.invm(this.n),de=we.mul(P).umod(this.n),Re=we.mul(he).umod(this.n);return this.curve._maxwellTrick?!(ze=this.g.jmulAdd(de,ne.getPublic(),Re)).isInfinity()&&ze.eqXToP(he):!(ze=this.g.mulAdd(de,ne.getPublic(),Re)).isInfinity()&&0===ze.getX().umod(this.n).cmp(he)},G.prototype.recoverPubKey=function(k,P,q,ne){X((3&q)===q,"The recovery param is more than two bits"),P=new H(P,ne);var ce=this.n,he=new l(k),Ae=P.r,we=P.s,de=1&q,Re=q>>1;if(Ae.cmp(this.curve.p.umod(this.curve.n))>=0&&Re)throw new Error("Unable to find sencond key candinate");Ae=this.curve.pointFromX(Re?Ae.add(this.curve.n):Ae,de);var ze=P.r.invm(ce),Ge=ce.sub(he).mul(ze).umod(ce),Oe=we.mul(ze).umod(ce);return this.g.mulAdd(Ge,Ae,Oe)},G.prototype.getKeyRecoveryParam=function(k,P,q,ne){if(null!==(P=new H(P,ne)).recoveryParam)return P.recoveryParam;for(var ce=0;ce<4;ce++){var he;try{he=this.recoverPubKey(k,P,ce)}catch{continue}if(he.eq(q))return ce}throw new Error("Unable to find valid recovery factor")}},541:(Dt,qe,S)=>{"use strict";var l=S(917),h=S(3136).assert;function ge(W,X){this.ec=W,this.priv=null,this.pub=null,X.priv&&this._importPrivate(X.priv,X.privEnc),X.pub&&this._importPublic(X.pub,X.pubEnc)}Dt.exports=ge,ge.fromPublic=function(X,oe,H){return oe instanceof ge?oe:new ge(X,{pub:oe,pubEnc:H})},ge.fromPrivate=function(X,oe,H){return oe instanceof ge?oe:new ge(X,{priv:oe,privEnc:H})},ge.prototype.validate=function(){var X=this.getPublic();return X.isInfinity()?{result:!1,reason:"Invalid public key"}:X.validate()?X.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},ge.prototype.getPublic=function(X,oe){return"string"==typeof X&&(oe=X,X=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),oe?this.pub.encode(oe,X):this.pub},ge.prototype.getPrivate=function(X){return"hex"===X?this.priv.toString(16,2):this.priv},ge.prototype._importPrivate=function(X,oe){this.priv=new l(X,oe||16),this.priv=this.priv.umod(this.ec.curve.n)},ge.prototype._importPublic=function(X,oe){if(X.x||X.y)return"mont"===this.ec.curve.type?h(X.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&h(X.x&&X.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(X.x,X.y));this.pub=this.ec.curve.decodePoint(X,oe)},ge.prototype.derive=function(X){return X.validate()||h(X.validate(),"public point not validated"),X.mul(this.priv).getX()},ge.prototype.sign=function(X,oe,H){return this.ec.sign(X,this,oe,H)},ge.prototype.verify=function(X,oe){return this.ec.verify(X,oe,this)},ge.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},484:(Dt,qe,S)=>{"use strict";var l=S(917),M=S(3136),h=M.assert;function ge(G,k){if(G instanceof ge)return G;this._importDER(G,k)||(h(G.r&&G.s,"Signature without r or s"),this.r=new l(G.r,16),this.s=new l(G.s,16),this.recoveryParam=void 0===G.recoveryParam?null:G.recoveryParam)}function W(){this.place=0}function X(G,k){var P=G[k.place++];if(!(128&P))return P;var q=15&P;if(0===q||q>4||0===G[k.place])return!1;for(var ne=0,ce=0,he=k.place;ce<q;ce++,he++)ne<<=8,ne|=G[he],ne>>>=0;return!(ne<=127)&&(k.place=he,ne)}function oe(G){for(var k=0,P=G.length-1;!G[k]&&!(128&G[k+1])&&k<P;)k++;return 0===k?G:G.slice(k)}function H(G,k){if(k<128)G.push(k);else{var P=1+(Math.log(k)/Math.LN2>>>3);for(G.push(128|P);--P;)G.push(k>>>(P<<3)&255);G.push(k)}}Dt.exports=ge,ge.prototype._importDER=function(k,P){k=M.toArray(k,P);var q=new W;if(48!==k[q.place++])return!1;var ne=X(k,q);if(!1===ne||ne+q.place!==k.length||2!==k[q.place++])return!1;var ce=X(k,q);if(!1===ce||128&k[q.place])return!1;var he=k.slice(q.place,ce+q.place);if(q.place+=ce,2!==k[q.place++])return!1;var Ae=X(k,q);if(!1===Ae||k.length!==Ae+q.place||128&k[q.place])return!1;var we=k.slice(q.place,Ae+q.place);if(0===he[0]){if(!(128&he[1]))return!1;he=he.slice(1)}if(0===we[0]){if(!(128&we[1]))return!1;we=we.slice(1)}return this.r=new l(he),this.s=new l(we),this.recoveryParam=null,!0},ge.prototype.toDER=function(k){var P=this.r.toArray(),q=this.s.toArray();for(128&P[0]&&(P=[0].concat(P)),128&q[0]&&(q=[0].concat(q)),P=oe(P),q=oe(q);!(q[0]||128&q[1]);)q=q.slice(1);var ne=[2];H(ne,P.length),(ne=ne.concat(P)).push(2),H(ne,q.length);var ce=ne.concat(q),he=[48];return H(he,ce.length),he=he.concat(ce),M.encode(he,k)}},3045:(Dt,qe,S)=>{"use strict";var l=S(2529),M=S(3401),h=S(3136),ge=h.assert,W=h.parseBytes,X=S(7222),oe=S(5451);function H(G){if(ge("ed25519"===G,"only tested with ed25519 so far"),!(this instanceof H))return new H(G);this.curve=G=M[G].curve,this.g=G.g,this.g.precompute(G.n.bitLength()+1),this.pointClass=G.point().constructor,this.encodingLength=Math.ceil(G.n.bitLength()/8),this.hash=l.sha512}Dt.exports=H,H.prototype.sign=function(k,P){k=W(k);var q=this.keyFromSecret(P),ne=this.hashInt(q.messagePrefix(),k),ce=this.g.mul(ne),he=this.encodePoint(ce),Ae=this.hashInt(he,q.pubBytes(),k).mul(q.priv()),we=ne.add(Ae).umod(this.curve.n);return this.makeSignature({R:ce,S:we,Rencoded:he})},H.prototype.verify=function(k,P,q){if(k=W(k),(P=this.makeSignature(P)).S().gte(P.eddsa.curve.n)||P.S().isNeg())return!1;var ne=this.keyFromPublic(q),ce=this.hashInt(P.Rencoded(),ne.pubBytes(),k),he=this.g.mul(P.S());return P.R().add(ne.pub().mul(ce)).eq(he)},H.prototype.hashInt=function(){for(var k=this.hash(),P=0;P<arguments.length;P++)k.update(arguments[P]);return h.intFromLE(k.digest()).umod(this.curve.n)},H.prototype.keyFromPublic=function(k){return X.fromPublic(this,k)},H.prototype.keyFromSecret=function(k){return X.fromSecret(this,k)},H.prototype.makeSignature=function(k){return k instanceof oe?k:new oe(this,k)},H.prototype.encodePoint=function(k){var P=k.getY().toArray("le",this.encodingLength);return P[this.encodingLength-1]|=k.getX().isOdd()?128:0,P},H.prototype.decodePoint=function(k){var P=(k=h.parseBytes(k)).length-1,q=k.slice(0,P).concat(-129&k[P]),ne=!!(128&k[P]),ce=h.intFromLE(q);return this.curve.pointFromY(ce,ne)},H.prototype.encodeInt=function(k){return k.toArray("le",this.encodingLength)},H.prototype.decodeInt=function(k){return h.intFromLE(k)},H.prototype.isPoint=function(k){return k instanceof this.pointClass}},7222:(Dt,qe,S)=>{"use strict";var l=S(3136),M=l.assert,h=l.parseBytes,ge=l.cachedProperty;function W(X,oe){this.eddsa=X,this._secret=h(oe.secret),X.isPoint(oe.pub)?this._pub=oe.pub:this._pubBytes=h(oe.pub)}W.fromPublic=function(oe,H){return H instanceof W?H:new W(oe,{pub:H})},W.fromSecret=function(oe,H){return H instanceof W?H:new W(oe,{secret:H})},W.prototype.secret=function(){return this._secret},ge(W,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),ge(W,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),ge(W,"privBytes",function(){var oe=this.eddsa,H=this.hash(),G=oe.encodingLength-1,k=H.slice(0,oe.encodingLength);return k[0]&=248,k[G]&=127,k[G]|=64,k}),ge(W,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),ge(W,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),ge(W,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),W.prototype.sign=function(oe){return M(this._secret,"KeyPair can only verify"),this.eddsa.sign(oe,this)},W.prototype.verify=function(oe,H){return this.eddsa.verify(oe,H,this)},W.prototype.getSecret=function(oe){return M(this._secret,"KeyPair is public only"),l.encode(this.secret(),oe)},W.prototype.getPublic=function(oe){return l.encode(this.pubBytes(),oe)},Dt.exports=W},5451:(Dt,qe,S)=>{"use strict";var l=S(917),M=S(3136),h=M.assert,ge=M.cachedProperty,W=M.parseBytes;function X(oe,H){this.eddsa=oe,"object"!=typeof H&&(H=W(H)),Array.isArray(H)&&(h(H.length===2*oe.encodingLength,"Signature has invalid size"),H={R:H.slice(0,oe.encodingLength),S:H.slice(oe.encodingLength)}),h(H.R&&H.S,"Signature without R or S"),oe.isPoint(H.R)&&(this._R=H.R),H.S instanceof l&&(this._S=H.S),this._Rencoded=Array.isArray(H.R)?H.R:H.Rencoded,this._Sencoded=Array.isArray(H.S)?H.S:H.Sencoded}ge(X,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),ge(X,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),ge(X,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),ge(X,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),X.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},X.prototype.toHex=function(){return M.encode(this.toBytes(),"hex").toUpperCase()},Dt.exports=X},1416:Dt=>{Dt.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},3136:(Dt,qe,S)=>{"use strict";var l=qe,M=S(917),h=S(9210),ge=S(1832);l.assert=h,l.toArray=ge.toArray,l.zero2=ge.zero2,l.toHex=ge.toHex,l.encode=ge.encode,l.getNAF=function W(k,P,q){var ce,ne=new Array(Math.max(k.bitLength(),q)+1);for(ce=0;ce<ne.length;ce+=1)ne[ce]=0;var he=1<<P+1,Ae=k.clone();for(ce=0;ce<ne.length;ce++){var we,de=Ae.andln(he-1);Ae.isOdd()?Ae.isubn(we=de>(he>>1)-1?(he>>1)-de:de):we=0,ne[ce]=we,Ae.iushrn(1)}return ne},l.getJSF=function X(k,P){var q=[[],[]];k=k.clone(),P=P.clone();for(var he,ne=0,ce=0;k.cmpn(-ne)>0||P.cmpn(-ce)>0;){var de,Re,Ae=k.andln(3)+ne&3,we=P.andln(3)+ce&3;3===Ae&&(Ae=-1),3===we&&(we=-1),de=1&Ae?3!=(he=k.andln(7)+ne&7)&&5!==he||2!==we?Ae:-Ae:0,q[0].push(de),Re=1&we?3!=(he=P.andln(7)+ce&7)&&5!==he||2!==Ae?we:-we:0,q[1].push(Re),2*ne===de+1&&(ne=1-ne),2*ce===Re+1&&(ce=1-ce),k.iushrn(1),P.iushrn(1)}return q},l.cachedProperty=function oe(k,P,q){var ne="_"+P;k.prototype[P]=function(){return void 0!==this[ne]?this[ne]:this[ne]=q.call(this)}},l.parseBytes=function H(k){return"string"==typeof k?l.toArray(k,"hex"):k},l.intFromLE=function G(k){return new M(k,"hex","le")}},2529:(Dt,qe,S)=>{var l=qe;l.utils=S(8283),l.common=S(2901),l.sha=S(8528),l.ripemd=S(5283),l.hmac=S(7163),l.sha1=l.sha.sha1,l.sha256=l.sha.sha256,l.sha224=l.sha.sha224,l.sha384=l.sha.sha384,l.sha512=l.sha.sha512,l.ripemd160=l.ripemd.ripemd160},2901:(Dt,qe,S)=>{"use strict";var l=S(8283),M=S(9210);function h(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}qe.BlockHash=h,h.prototype.update=function(W,X){if(W=l.toArray(W,X),this.pending=this.pending?this.pending.concat(W):W,this.pendingTotal+=W.length,this.pending.length>=this._delta8){var oe=(W=this.pending).length%this._delta8;this.pending=W.slice(W.length-oe,W.length),0===this.pending.length&&(this.pending=null),W=l.join32(W,0,W.length-oe,this.endian);for(var H=0;H<W.length;H+=this._delta32)this._update(W,H,H+this._delta32)}return this},h.prototype.digest=function(W){return this.update(this._pad()),M(null===this.pending),this._digest(W)},h.prototype._pad=function(){var W=this.pendingTotal,X=this._delta8,oe=X-(W+this.padLength)%X,H=new Array(oe+this.padLength);H[0]=128;for(var G=1;G<oe;G++)H[G]=0;if(W<<=3,"big"===this.endian){for(var k=8;k<this.padLength;k++)H[G++]=0;H[G++]=0,H[G++]=0,H[G++]=0,H[G++]=0,H[G++]=W>>>24&255,H[G++]=W>>>16&255,H[G++]=W>>>8&255,H[G++]=255&W}else for(H[G++]=255&W,H[G++]=W>>>8&255,H[G++]=W>>>16&255,H[G++]=W>>>24&255,H[G++]=0,H[G++]=0,H[G++]=0,H[G++]=0,k=8;k<this.padLength;k++)H[G++]=0;return H}},7163:(Dt,qe,S)=>{"use strict";var l=S(8283),M=S(9210);function h(ge,W,X){if(!(this instanceof h))return new h(ge,W,X);this.Hash=ge,this.blockSize=ge.blockSize/8,this.outSize=ge.outSize/8,this.inner=null,this.outer=null,this._init(l.toArray(W,X))}Dt.exports=h,h.prototype._init=function(W){W.length>this.blockSize&&(W=(new this.Hash).update(W).digest()),M(W.length<=this.blockSize);for(var X=W.length;X<this.blockSize;X++)W.push(0);for(X=0;X<W.length;X++)W[X]^=54;for(this.inner=(new this.Hash).update(W),X=0;X<W.length;X++)W[X]^=106;this.outer=(new this.Hash).update(W)},h.prototype.update=function(W,X){return this.inner.update(W,X),this},h.prototype.digest=function(W){return this.outer.update(this.inner.digest()),this.outer.digest(W)}},5283:(Dt,qe,S)=>{"use strict";var l=S(8283),M=S(2901),h=l.rotl32,ge=l.sum32,W=l.sum32_3,X=l.sum32_4,oe=M.BlockHash;function H(){if(!(this instanceof H))return new H;oe.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function G(Ae,we,de,Re){return Ae<=15?we^de^Re:Ae<=31?we&de|~we&Re:Ae<=47?(we|~de)^Re:Ae<=63?we&Re|de&~Re:we^(de|~Re)}function P(Ae){return Ae<=15?1352829926:Ae<=31?1548603684:Ae<=47?1836072691:Ae<=63?2053994217:0}l.inherits(H,oe),qe.ripemd160=H,H.blockSize=512,H.outSize=160,H.hmacStrength=192,H.padLength=64,H.prototype._update=function(we,de){for(var Re=this.h[0],ze=this.h[1],Ge=this.h[2],Oe=this.h[3],Ye=this.h[4],yt=Re,_t=ze,ut=Ge,ae=Oe,x=Ye,T=0;T<80;T++){var K=ge(h(X(Re,G(T,ze,Ge,Oe),we[q[T]+de],(Ae=T)<=15?0:Ae<=31?1518500249:Ae<=47?1859775393:Ae<=63?2400959708:2840853838),ce[T]),Ye);Re=Ye,Ye=Oe,Oe=h(Ge,10),Ge=ze,ze=K,K=ge(h(X(yt,G(79-T,_t,ut,ae),we[ne[T]+de],P(T)),he[T]),x),yt=x,x=ae,ae=h(ut,10),ut=_t,_t=K}var Ae;K=W(this.h[1],Ge,ae),this.h[1]=W(this.h[2],Oe,x),this.h[2]=W(this.h[3],Ye,yt),this.h[3]=W(this.h[4],Re,_t),this.h[4]=W(this.h[0],ze,ut),this.h[0]=K},H.prototype._digest=function(we){return"hex"===we?l.toHex32(this.h,"little"):l.split32(this.h,"little")};var q=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ne=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],ce=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],he=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},8528:(Dt,qe,S)=>{"use strict";qe.sha1=S(3468),qe.sha224=S(5563),qe.sha256=S(7138),qe.sha384=S(3898),qe.sha512=S(827)},3468:(Dt,qe,S)=>{"use strict";var l=S(8283),M=S(2901),h=S(5542),ge=l.rotl32,W=l.sum32,X=l.sum32_5,oe=h.ft_1,H=M.BlockHash,G=[1518500249,1859775393,2400959708,3395469782];function k(){if(!(this instanceof k))return new k;H.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}l.inherits(k,H),Dt.exports=k,k.blockSize=512,k.outSize=160,k.hmacStrength=80,k.padLength=64,k.prototype._update=function(q,ne){for(var ce=this.W,he=0;he<16;he++)ce[he]=q[ne+he];for(;he<ce.length;he++)ce[he]=ge(ce[he-3]^ce[he-8]^ce[he-14]^ce[he-16],1);var Ae=this.h[0],we=this.h[1],de=this.h[2],Re=this.h[3],ze=this.h[4];for(he=0;he<ce.length;he++){var Ge=~~(he/20),Oe=X(ge(Ae,5),oe(Ge,we,de,Re),ze,ce[he],G[Ge]);ze=Re,Re=de,de=ge(we,30),we=Ae,Ae=Oe}this.h[0]=W(this.h[0],Ae),this.h[1]=W(this.h[1],we),this.h[2]=W(this.h[2],de),this.h[3]=W(this.h[3],Re),this.h[4]=W(this.h[4],ze)},k.prototype._digest=function(q){return"hex"===q?l.toHex32(this.h,"big"):l.split32(this.h,"big")}},5563:(Dt,qe,S)=>{"use strict";var l=S(8283),M=S(7138);function h(){if(!(this instanceof h))return new h;M.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}l.inherits(h,M),Dt.exports=h,h.blockSize=512,h.outSize=224,h.hmacStrength=192,h.padLength=64,h.prototype._digest=function(W){return"hex"===W?l.toHex32(this.h.slice(0,7),"big"):l.split32(this.h.slice(0,7),"big")}},7138:(Dt,qe,S)=>{"use strict";var l=S(8283),M=S(2901),h=S(5542),ge=S(9210),W=l.sum32,X=l.sum32_4,oe=l.sum32_5,H=h.ch32,G=h.maj32,k=h.s0_256,P=h.s1_256,q=h.g0_256,ne=h.g1_256,ce=M.BlockHash,he=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ae(){if(!(this instanceof Ae))return new Ae;ce.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=he,this.W=new Array(64)}l.inherits(Ae,ce),Dt.exports=Ae,Ae.blockSize=512,Ae.outSize=256,Ae.hmacStrength=192,Ae.padLength=64,Ae.prototype._update=function(de,Re){for(var ze=this.W,Ge=0;Ge<16;Ge++)ze[Ge]=de[Re+Ge];for(;Ge<ze.length;Ge++)ze[Ge]=X(ne(ze[Ge-2]),ze[Ge-7],q(ze[Ge-15]),ze[Ge-16]);var Oe=this.h[0],Ye=this.h[1],yt=this.h[2],_t=this.h[3],ut=this.h[4],ae=this.h[5],x=this.h[6],T=this.h[7];for(ge(this.k.length===ze.length),Ge=0;Ge<ze.length;Ge++){var K=oe(T,P(ut),H(ut,ae,x),this.k[Ge],ze[Ge]),te=W(k(Oe),G(Oe,Ye,yt));T=x,x=ae,ae=ut,ut=W(_t,K),_t=yt,yt=Ye,Ye=Oe,Oe=W(K,te)}this.h[0]=W(this.h[0],Oe),this.h[1]=W(this.h[1],Ye),this.h[2]=W(this.h[2],yt),this.h[3]=W(this.h[3],_t),this.h[4]=W(this.h[4],ut),this.h[5]=W(this.h[5],ae),this.h[6]=W(this.h[6],x),this.h[7]=W(this.h[7],T)},Ae.prototype._digest=function(de){return"hex"===de?l.toHex32(this.h,"big"):l.split32(this.h,"big")}},3898:(Dt,qe,S)=>{"use strict";var l=S(8283),M=S(827);function h(){if(!(this instanceof h))return new h;M.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}l.inherits(h,M),Dt.exports=h,h.blockSize=1024,h.outSize=384,h.hmacStrength=192,h.padLength=128,h.prototype._digest=function(W){return"hex"===W?l.toHex32(this.h.slice(0,12),"big"):l.split32(this.h.slice(0,12),"big")}},827:(Dt,qe,S)=>{"use strict";var l=S(8283),M=S(2901),h=S(9210),ge=l.rotr64_hi,W=l.rotr64_lo,X=l.shr64_hi,oe=l.shr64_lo,H=l.sum64,G=l.sum64_hi,k=l.sum64_lo,P=l.sum64_4_hi,q=l.sum64_4_lo,ne=l.sum64_5_hi,ce=l.sum64_5_lo,he=M.BlockHash,Ae=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function we(){if(!(this instanceof we))return new we;he.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Ae,this.W=new Array(160)}function de(K,te,ve,Ce,Be){var Ne=K&ve^~K&Be;return Ne<0&&(Ne+=4294967296),Ne}function Re(K,te,ve,Ce,Be,Ne){var z=te&Ce^~te&Ne;return z<0&&(z+=4294967296),z}function ze(K,te,ve,Ce,Be){var Ne=K&ve^K&Be^ve&Be;return Ne<0&&(Ne+=4294967296),Ne}function Ge(K,te,ve,Ce,Be,Ne){var z=te&Ce^te&Ne^Ce&Ne;return z<0&&(z+=4294967296),z}function Oe(K,te){var Ne=ge(K,te,28)^ge(te,K,2)^ge(te,K,7);return Ne<0&&(Ne+=4294967296),Ne}function Ye(K,te){var Ne=W(K,te,28)^W(te,K,2)^W(te,K,7);return Ne<0&&(Ne+=4294967296),Ne}function yt(K,te){var Ne=ge(K,te,14)^ge(K,te,18)^ge(te,K,9);return Ne<0&&(Ne+=4294967296),Ne}function _t(K,te){var Ne=W(K,te,14)^W(K,te,18)^W(te,K,9);return Ne<0&&(Ne+=4294967296),Ne}function ut(K,te){var Ne=ge(K,te,1)^ge(K,te,8)^X(K,te,7);return Ne<0&&(Ne+=4294967296),Ne}function ae(K,te){var Ne=W(K,te,1)^W(K,te,8)^oe(K,te,7);return Ne<0&&(Ne+=4294967296),Ne}function x(K,te){var Ne=ge(K,te,19)^ge(te,K,29)^X(K,te,6);return Ne<0&&(Ne+=4294967296),Ne}function T(K,te){var Ne=W(K,te,19)^W(te,K,29)^oe(K,te,6);return Ne<0&&(Ne+=4294967296),Ne}l.inherits(we,he),Dt.exports=we,we.blockSize=1024,we.outSize=512,we.hmacStrength=192,we.padLength=128,we.prototype._prepareBlock=function(te,ve){for(var Ce=this.W,Be=0;Be<32;Be++)Ce[Be]=te[ve+Be];for(;Be<Ce.length;Be+=2){var Ne=x(Ce[Be-4],Ce[Be-3]),z=T(Ce[Be-4],Ce[Be-3]),Fe=Ce[Be-14],Pt=Ce[Be-13],ot=ut(Ce[Be-30],Ce[Be-29]),Vt=ae(Ce[Be-30],Ce[Be-29]),vt=Ce[Be-32],st=Ce[Be-31];Ce[Be]=P(Ne,z,Fe,Pt,ot,Vt,vt,st),Ce[Be+1]=q(Ne,z,Fe,Pt,ot,Vt,vt,st)}},we.prototype._update=function(te,ve){this._prepareBlock(te,ve);var Ce=this.W,Be=this.h[0],Ne=this.h[1],z=this.h[2],Fe=this.h[3],Pt=this.h[4],ot=this.h[5],Vt=this.h[6],vt=this.h[7],st=this.h[8],Ft=this.h[9],$e=this.h[10],Xe=this.h[11],kt=this.h[12],cn=this.h[13],rn=this.h[14],gn=this.h[15];h(this.k.length===Ce.length);for(var Xt=0;Xt<Ce.length;Xt+=2){var hn=rn,ct=gn,Ot=yt(st,Ft),It=_t(st,Ft),an=de(st,0,$e,0,kt),Fn=Re(0,Ft,0,Xe,0,cn),Xn=this.k[Xt],Zn=this.k[Xt+1],Hr=Ce[Xt],Hn=Ce[Xt+1],Dn=ne(hn,ct,Ot,It,an,Fn,Xn,Zn,Hr,Hn),Un=ce(hn,ct,Ot,It,an,Fn,Xn,Zn,Hr,Hn);hn=Oe(Be,Ne),ct=Ye(Be,Ne),Ot=ze(Be,0,z,0,Pt),It=Ge(0,Ne,0,Fe,0,ot);var Pi=G(hn,ct,Ot,It),Qi=k(hn,ct,Ot,It);rn=kt,gn=cn,kt=$e,cn=Xe,$e=st,Xe=Ft,st=G(Vt,vt,Dn,Un),Ft=k(vt,vt,Dn,Un),Vt=Pt,vt=ot,Pt=z,ot=Fe,z=Be,Fe=Ne,Be=G(Dn,Un,Pi,Qi),Ne=k(Dn,Un,Pi,Qi)}H(this.h,0,Be,Ne),H(this.h,2,z,Fe),H(this.h,4,Pt,ot),H(this.h,6,Vt,vt),H(this.h,8,st,Ft),H(this.h,10,$e,Xe),H(this.h,12,kt,cn),H(this.h,14,rn,gn)},we.prototype._digest=function(te){return"hex"===te?l.toHex32(this.h,"big"):l.split32(this.h,"big")}},5542:(Dt,qe,S)=>{"use strict";var M=S(8283).rotr32;function ge(P,q,ne){return P&q^~P&ne}function W(P,q,ne){return P&q^P&ne^q&ne}function X(P,q,ne){return P^q^ne}qe.ft_1=function h(P,q,ne,ce){return 0===P?ge(q,ne,ce):1===P||3===P?X(q,ne,ce):2===P?W(q,ne,ce):void 0},qe.ch32=ge,qe.maj32=W,qe.p32=X,qe.s0_256=function oe(P){return M(P,2)^M(P,13)^M(P,22)},qe.s1_256=function H(P){return M(P,6)^M(P,11)^M(P,25)},qe.g0_256=function G(P){return M(P,7)^M(P,18)^P>>>3},qe.g1_256=function k(P){return M(P,17)^M(P,19)^P>>>10}},8283:(Dt,qe,S)=>{"use strict";var l=S(9210),M=S(1993);function h(T,K){return!(55296!=(64512&T.charCodeAt(K))||K<0||K+1>=T.length)&&56320==(64512&T.charCodeAt(K+1))}function X(T){return(T>>>24|T>>>8&65280|T<<8&16711680|(255&T)<<24)>>>0}function H(T){return 1===T.length?"0"+T:T}function G(T){return 7===T.length?"0"+T:6===T.length?"00"+T:5===T.length?"000"+T:4===T.length?"0000"+T:3===T.length?"00000"+T:2===T.length?"000000"+T:1===T.length?"0000000"+T:T}qe.inherits=M,qe.toArray=function ge(T,K){if(Array.isArray(T))return T.slice();if(!T)return[];var te=[];if("string"==typeof T)if(K){if("hex"===K)for((T=T.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(T="0"+T),Ce=0;Ce<T.length;Ce+=2)te.push(parseInt(T[Ce]+T[Ce+1],16))}else for(var ve=0,Ce=0;Ce<T.length;Ce++){var Be=T.charCodeAt(Ce);Be<128?te[ve++]=Be:Be<2048?(te[ve++]=Be>>6|192,te[ve++]=63&Be|128):h(T,Ce)?(Be=65536+((1023&Be)<<10)+(1023&T.charCodeAt(++Ce)),te[ve++]=Be>>18|240,te[ve++]=Be>>12&63|128,te[ve++]=Be>>6&63|128,te[ve++]=63&Be|128):(te[ve++]=Be>>12|224,te[ve++]=Be>>6&63|128,te[ve++]=63&Be|128)}else for(Ce=0;Ce<T.length;Ce++)te[Ce]=0|T[Ce];return te},qe.toHex=function W(T){for(var K="",te=0;te<T.length;te++)K+=H(T[te].toString(16));return K},qe.htonl=X,qe.toHex32=function oe(T,K){for(var te="",ve=0;ve<T.length;ve++){var Ce=T[ve];"little"===K&&(Ce=X(Ce)),te+=G(Ce.toString(16))}return te},qe.zero2=H,qe.zero8=G,qe.join32=function k(T,K,te,ve){var Ce=te-K;l(Ce%4==0);for(var Be=new Array(Ce/4),Ne=0,z=K;Ne<Be.length;Ne++,z+=4)Be[Ne]=("big"===ve?T[z]<<24|T[z+1]<<16|T[z+2]<<8|T[z+3]:T[z+3]<<24|T[z+2]<<16|T[z+1]<<8|T[z])>>>0;return Be},qe.split32=function P(T,K){for(var te=new Array(4*T.length),ve=0,Ce=0;ve<T.length;ve++,Ce+=4){var Be=T[ve];"big"===K?(te[Ce]=Be>>>24,te[Ce+1]=Be>>>16&255,te[Ce+2]=Be>>>8&255,te[Ce+3]=255&Be):(te[Ce+3]=Be>>>24,te[Ce+2]=Be>>>16&255,te[Ce+1]=Be>>>8&255,te[Ce]=255&Be)}return te},qe.rotr32=function q(T,K){return T>>>K|T<<32-K},qe.rotl32=function ne(T,K){return T<<K|T>>>32-K},qe.sum32=function ce(T,K){return T+K>>>0},qe.sum32_3=function he(T,K,te){return T+K+te>>>0},qe.sum32_4=function Ae(T,K,te,ve){return T+K+te+ve>>>0},qe.sum32_5=function we(T,K,te,ve,Ce){return T+K+te+ve+Ce>>>0},qe.sum64=function de(T,K,te,ve){var Ne=ve+T[K+1]>>>0;T[K]=(Ne<ve?1:0)+te+T[K]>>>0,T[K+1]=Ne},qe.sum64_hi=function Re(T,K,te,ve){return(K+ve>>>0<K?1:0)+T+te>>>0},qe.sum64_lo=function ze(T,K,te,ve){return K+ve>>>0},qe.sum64_4_hi=function Ge(T,K,te,ve,Ce,Be,Ne,z){var Fe=0,Pt=K;return Fe+=(Pt=Pt+ve>>>0)<K?1:0,Fe+=(Pt=Pt+Be>>>0)<Be?1:0,T+te+Ce+Ne+(Fe+=(Pt=Pt+z>>>0)<z?1:0)>>>0},qe.sum64_4_lo=function Oe(T,K,te,ve,Ce,Be,Ne,z){return K+ve+Be+z>>>0},qe.sum64_5_hi=function Ye(T,K,te,ve,Ce,Be,Ne,z,Fe,Pt){var ot=0,Vt=K;return ot+=(Vt=Vt+ve>>>0)<K?1:0,ot+=(Vt=Vt+Be>>>0)<Be?1:0,ot+=(Vt=Vt+z>>>0)<z?1:0,T+te+Ce+Ne+Fe+(ot+=(Vt=Vt+Pt>>>0)<Pt?1:0)>>>0},qe.sum64_5_lo=function yt(T,K,te,ve,Ce,Be,Ne,z,Fe,Pt){return K+ve+Be+z+Pt>>>0},qe.rotr64_hi=function _t(T,K,te){return(K<<32-te|T>>>te)>>>0},qe.rotr64_lo=function ut(T,K,te){return(T<<32-te|K>>>te)>>>0},qe.shr64_hi=function ae(T,K,te){return T>>>te},qe.shr64_lo=function x(T,K,te){return(T<<32-te|K>>>te)>>>0}},3556:(Dt,qe,S)=>{"use strict";var l=S(2529),M=S(1832),h=S(9210);function ge(W){if(!(this instanceof ge))return new ge(W);this.hash=W.hash,this.predResist=!!W.predResist,this.outLen=this.hash.outSize,this.minEntropy=W.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var X=M.toArray(W.entropy,W.entropyEnc||"hex"),oe=M.toArray(W.nonce,W.nonceEnc||"hex"),H=M.toArray(W.pers,W.persEnc||"hex");h(X.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(X,oe,H)}Dt.exports=ge,ge.prototype._init=function(X,oe,H){var G=X.concat(oe).concat(H);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var k=0;k<this.V.length;k++)this.K[k]=0,this.V[k]=1;this._update(G),this._reseed=1,this.reseedInterval=281474976710656},ge.prototype._hmac=function(){return new l.hmac(this.hash,this.K)},ge.prototype._update=function(X){var oe=this._hmac().update(this.V).update([0]);X&&(oe=oe.update(X)),this.K=oe.digest(),this.V=this._hmac().update(this.V).digest(),X&&(this.K=this._hmac().update(this.V).update([1]).update(X).digest(),this.V=this._hmac().update(this.V).digest())},ge.prototype.reseed=function(X,oe,H,G){"string"!=typeof oe&&(G=H,H=oe,oe=null),X=M.toArray(X,oe),H=M.toArray(H,G),h(X.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(X.concat(H||[])),this._reseed=1},ge.prototype.generate=function(X,oe,H,G){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof oe&&(G=H,H=oe,oe=null),H&&(H=M.toArray(H,G||"hex"),this._update(H));for(var k=[];k.length<X;)this.V=this._hmac().update(this.V).digest(),k=k.concat(this.V);var P=k.slice(0,X);return this._update(H),this._reseed++,M.encode(P,oe)}},1993:Dt=>{Dt.exports="function"==typeof Object.create?function(S,l){l&&(S.super_=l,S.prototype=Object.create(l.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}))}:function(S,l){if(l){S.super_=l;var M=function(){};M.prototype=l.prototype,S.prototype=new M,S.prototype.constructor=S}}},9210:Dt=>{function qe(S,l){if(!S)throw new Error(l||"Assertion failed")}Dt.exports=qe,qe.equal=function(l,M,h){if(l!=M)throw new Error(h||"Assertion failed: "+l+" != "+M)}},1832:(Dt,qe)=>{"use strict";var S=qe;function M(ge){return 1===ge.length?"0"+ge:ge}function h(ge){for(var W="",X=0;X<ge.length;X++)W+=M(ge[X].toString(16));return W}S.toArray=function l(ge,W){if(Array.isArray(ge))return ge.slice();if(!ge)return[];var X=[];if("string"!=typeof ge){for(var oe=0;oe<ge.length;oe++)X[oe]=0|ge[oe];return X}if("hex"===W)for((ge=ge.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(ge="0"+ge),oe=0;oe<ge.length;oe+=2)X.push(parseInt(ge[oe]+ge[oe+1],16));else for(oe=0;oe<ge.length;oe++){var H=ge.charCodeAt(oe),G=H>>8,k=255&H;G?X.push(G,k):X.push(k)}return X},S.zero2=M,S.toHex=h,S.encode=function(W,X){return"hex"===X?h(W):W}},4412:(Dt,qe,S)=>{"use strict";S.d(qe,{t:()=>M});var l=S(1413);class M extends l.B{constructor(ge){super(),this._value=ge}get value(){return this.getValue()}_subscribe(ge){const W=super._subscribe(ge);return!W.closed&&ge.next(this._value),W}getValue(){const{hasError:ge,thrownError:W,_value:X}=this;if(ge)throw W;return this._throwIfClosed(),X}next(ge){super.next(this._value=ge)}}},1985:(Dt,qe,S)=>{"use strict";S.d(qe,{c:()=>H});var l=S(7707),M=S(8359),h=S(3494),ge=S(1203),W=S(1026),X=S(8071),oe=S(9786);let H=(()=>{class q{constructor(ce){ce&&(this._subscribe=ce)}lift(ce){const he=new q;return he.source=this,he.operator=ce,he}subscribe(ce,he,Ae){const we=function P(q){return q&&q instanceof l.vU||function k(q){return q&&(0,X.T)(q.next)&&(0,X.T)(q.error)&&(0,X.T)(q.complete)}(q)&&(0,M.Uv)(q)}(ce)?ce:new l.Ms(ce,he,Ae);return(0,oe.Y)(()=>{const{operator:de,source:Re}=this;we.add(de?de.call(we,Re):Re?this._subscribe(we):this._trySubscribe(we))}),we}_trySubscribe(ce){try{return this._subscribe(ce)}catch(he){ce.error(he)}}forEach(ce,he){return new(he=G(he))((Ae,we)=>{const de=new l.Ms({next:Re=>{try{ce(Re)}catch(ze){we(ze),de.unsubscribe()}},error:we,complete:Ae});this.subscribe(de)})}_subscribe(ce){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(ce)}[h.s](){return this}pipe(...ce){return(0,ge.m)(ce)(this)}toPromise(ce){return new(ce=G(ce))((he,Ae)=>{let we;this.subscribe(de=>we=de,de=>Ae(de),()=>he(we))})}}return q.create=ne=>new q(ne),q})();function G(q){var ne;return null!==(ne=q??W.$.Promise)&&void 0!==ne?ne:Promise}},1413:(Dt,qe,S)=>{"use strict";S.d(qe,{B:()=>oe});var l=S(1985),M=S(8359);const ge=(0,S(1853).L)(G=>function(){G(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var W=S(7908),X=S(9786);let oe=(()=>{class G extends l.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(P){const q=new H(this,this);return q.operator=P,q}_throwIfClosed(){if(this.closed)throw new ge}next(P){(0,X.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next(P)}})}error(P){(0,X.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=P;const{observers:q}=this;for(;q.length;)q.shift().error(P)}})}complete(){(0,X.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:P}=this;for(;P.length;)P.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var P;return(null===(P=this.observers)||void 0===P?void 0:P.length)>0}_trySubscribe(P){return this._throwIfClosed(),super._trySubscribe(P)}_subscribe(P){return this._throwIfClosed(),this._checkFinalizedStatuses(P),this._innerSubscribe(P)}_innerSubscribe(P){const{hasError:q,isStopped:ne,observers:ce}=this;return q||ne?M.Kn:(this.currentObservers=null,ce.push(P),new M.yU(()=>{this.currentObservers=null,(0,W.o)(ce,P)}))}_checkFinalizedStatuses(P){const{hasError:q,thrownError:ne,isStopped:ce}=this;q?P.error(ne):ce&&P.complete()}asObservable(){const P=new l.c;return P.source=this,P}}return G.create=(k,P)=>new H(k,P),G})();class H extends oe{constructor(k,P){super(),this.destination=k,this.source=P}next(k){var P,q;null===(q=null===(P=this.destination)||void 0===P?void 0:P.next)||void 0===q||q.call(P,k)}error(k){var P,q;null===(q=null===(P=this.destination)||void 0===P?void 0:P.error)||void 0===q||q.call(P,k)}complete(){var k,P;null===(P=null===(k=this.destination)||void 0===k?void 0:k.complete)||void 0===P||P.call(k)}_subscribe(k){var P,q;return null!==(q=null===(P=this.source)||void 0===P?void 0:P.subscribe(k))&&void 0!==q?q:M.Kn}}},7707:(Dt,qe,S)=>{"use strict";S.d(qe,{Ms:()=>Ae,vU:()=>q});var l=S(8071),M=S(8359),h=S(1026),ge=S(5334),W=S(5343);const X=G("C",void 0,void 0);function G(Ge,Oe,Ye){return{kind:Ge,value:Oe,error:Ye}}var k=S(9270),P=S(9786);class q extends M.yU{constructor(Oe){super(),this.isStopped=!1,Oe?(this.destination=Oe,(0,M.Uv)(Oe)&&Oe.add(this)):this.destination=ze}static create(Oe,Ye,yt){return new Ae(Oe,Ye,yt)}next(Oe){this.isStopped?Re(function H(Ge){return G("N",Ge,void 0)}(Oe),this):this._next(Oe)}error(Oe){this.isStopped?Re(function oe(Ge){return G("E",void 0,Ge)}(Oe),this):(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped?Re(X,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Oe){this.destination.next(Oe)}_error(Oe){try{this.destination.error(Oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ne=Function.prototype.bind;function ce(Ge,Oe){return ne.call(Ge,Oe)}class he{constructor(Oe){this.partialObserver=Oe}next(Oe){const{partialObserver:Ye}=this;if(Ye.next)try{Ye.next(Oe)}catch(yt){we(yt)}}error(Oe){const{partialObserver:Ye}=this;if(Ye.error)try{Ye.error(Oe)}catch(yt){we(yt)}else we(Oe)}complete(){const{partialObserver:Oe}=this;if(Oe.complete)try{Oe.complete()}catch(Ye){we(Ye)}}}class Ae extends q{constructor(Oe,Ye,yt){let _t;if(super(),(0,l.T)(Oe)||!Oe)_t={next:Oe??void 0,error:Ye??void 0,complete:yt??void 0};else{let ut;this&&h.$.useDeprecatedNextContext?(ut=Object.create(Oe),ut.unsubscribe=()=>this.unsubscribe(),_t={next:Oe.next&&ce(Oe.next,ut),error:Oe.error&&ce(Oe.error,ut),complete:Oe.complete&&ce(Oe.complete,ut)}):_t=Oe}this.destination=new he(_t)}}function we(Ge){h.$.useDeprecatedSynchronousErrorHandling?(0,P.l)(Ge):(0,ge.m)(Ge)}function Re(Ge,Oe){const{onStoppedNotification:Ye}=h.$;Ye&&k.f.setTimeout(()=>Ye(Ge,Oe))}const ze={closed:!0,next:W.l,error:function de(Ge){throw Ge},complete:W.l}},8359:(Dt,qe,S)=>{"use strict";S.d(qe,{Kn:()=>X,yU:()=>W,Uv:()=>oe});var l=S(8071);const h=(0,S(1853).L)(G=>function(P){G(this),this.message=P?`${P.length} errors occurred during unsubscription:\n${P.map((q,ne)=>`${ne+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=P});var ge=S(7908);class W{constructor(k){this.initialTeardown=k,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let k;if(!this.closed){this.closed=!0;const{_parentage:P}=this;if(P)if(this._parentage=null,Array.isArray(P))for(const ce of P)ce.remove(this);else P.remove(this);const{initialTeardown:q}=this;if((0,l.T)(q))try{q()}catch(ce){k=ce instanceof h?ce.errors:[ce]}const{_finalizers:ne}=this;if(ne){this._finalizers=null;for(const ce of ne)try{H(ce)}catch(he){k=k??[],he instanceof h?k=[...k,...he.errors]:k.push(he)}}if(k)throw new h(k)}}add(k){var P;if(k&&k!==this)if(this.closed)H(k);else{if(k instanceof W){if(k.closed||k._hasParent(this))return;k._addParent(this)}(this._finalizers=null!==(P=this._finalizers)&&void 0!==P?P:[]).push(k)}}_hasParent(k){const{_parentage:P}=this;return P===k||Array.isArray(P)&&P.includes(k)}_addParent(k){const{_parentage:P}=this;this._parentage=Array.isArray(P)?(P.push(k),P):P?[P,k]:k}_removeParent(k){const{_parentage:P}=this;P===k?this._parentage=null:Array.isArray(P)&&(0,ge.o)(P,k)}remove(k){const{_finalizers:P}=this;P&&(0,ge.o)(P,k),k instanceof W&&k._removeParent(this)}}W.EMPTY=(()=>{const G=new W;return G.closed=!0,G})();const X=W.EMPTY;function oe(G){return G instanceof W||G&&"closed"in G&&(0,l.T)(G.remove)&&(0,l.T)(G.add)&&(0,l.T)(G.unsubscribe)}function H(G){(0,l.T)(G)?G():G.unsubscribe()}},1026:(Dt,qe,S)=>{"use strict";S.d(qe,{$:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4843:(Dt,qe,S)=>{"use strict";S.d(qe,{_:()=>h});var l=S(9350),M=S(7707);function h(ge,W){const X="object"==typeof W;return new Promise((oe,H)=>{const G=new M.Ms({next:k=>{oe(k),G.unsubscribe()},error:H,complete:()=>{X?oe(W.defaultValue):H(new l.G)}});ge.subscribe(G)})}},4572:(Dt,qe,S)=>{"use strict";S.d(qe,{z:()=>k});var l=S(1985),M=S(3073),h=S(6648),ge=S(3669),W=S(6450),X=S(9326),oe=S(8496),H=S(4360),G=S(5225);function k(...ne){const ce=(0,X.lI)(ne),he=(0,X.ms)(ne),{args:Ae,keys:we}=(0,M.D)(ne);if(0===Ae.length)return(0,h.H)([],ce);const de=new l.c(function P(ne,ce,he=ge.D){return Ae=>{q(ce,()=>{const{length:we}=ne,de=new Array(we);let Re=we,ze=we;for(let Ge=0;Ge<we;Ge++)q(ce,()=>{const Oe=(0,h.H)(ne[Ge],ce);let Ye=!1;Oe.subscribe((0,H._)(Ae,yt=>{de[Ge]=yt,Ye||(Ye=!0,ze--),ze||Ae.next(he(de.slice()))},()=>{--Re||Ae.complete()}))},Ae)},Ae)}}(Ae,ce,we?Re=>(0,oe.e)(we,Re):ge.D));return he?de.pipe((0,W.I)(he)):de}function q(ne,ce,he){ne?(0,G.N)(he,ne,ce):ce()}},8793:(Dt,qe,S)=>{"use strict";S.d(qe,{x:()=>W});var l=S(6365),h=S(9326),ge=S(6648);function W(...X){return function M(){return(0,l.U)(1)}()((0,ge.H)(X,(0,h.lI)(X)))}},9030:(Dt,qe,S)=>{"use strict";S.d(qe,{v:()=>h});var l=S(1985),M=S(8750);function h(ge){return new l.c(W=>{(0,M.Tg)(ge()).subscribe(W)})}},983:(Dt,qe,S)=>{"use strict";S.d(qe,{w:()=>M});const M=new(S(1985).c)(W=>W.complete())},7468:(Dt,qe,S)=>{"use strict";S.d(qe,{p:()=>H});var l=S(1985),M=S(3073),h=S(8750),ge=S(9326),W=S(4360),X=S(6450),oe=S(8496);function H(...G){const k=(0,ge.ms)(G),{args:P,keys:q}=(0,M.D)(G),ne=new l.c(ce=>{const{length:he}=P;if(!he)return void ce.complete();const Ae=new Array(he);let we=he,de=he;for(let Re=0;Re<he;Re++){let ze=!1;(0,h.Tg)(P[Re]).subscribe((0,W._)(ce,Ge=>{ze||(ze=!0,de--),Ae[Re]=Ge},()=>we--,void 0,()=>{(!we||!ze)&&(de||ce.next(q?(0,oe.e)(q,Ae):Ae),ce.complete())}))}});return k?ne.pipe((0,X.I)(k)):ne}},6648:(Dt,qe,S)=>{"use strict";S.d(qe,{H:()=>yt});var l=S(8750),M=S(5225),h=S(9974),ge=S(4360);function W(_t,ut=0){return(0,h.N)((ae,x)=>{ae.subscribe((0,ge._)(x,T=>(0,M.N)(x,_t,()=>x.next(T),ut),()=>(0,M.N)(x,_t,()=>x.complete(),ut),T=>(0,M.N)(x,_t,()=>x.error(T),ut)))})}function X(_t,ut=0){return(0,h.N)((ae,x)=>{x.add(_t.schedule(()=>ae.subscribe(x),ut))})}var G=S(1985),P=S(4761),q=S(8071);function ce(_t,ut){if(!_t)throw new Error("Iterable cannot be null");return new G.c(ae=>{(0,M.N)(ae,ut,()=>{const x=_t[Symbol.asyncIterator]();(0,M.N)(ae,ut,()=>{x.next().then(T=>{T.done?ae.complete():ae.next(T.value)})},0,!0)})})}var he=S(5055),Ae=S(9858),we=S(7441),de=S(5397),Re=S(7953),ze=S(591),Ge=S(5196);function yt(_t,ut){return ut?function Ye(_t,ut){if(null!=_t){if((0,he.l)(_t))return function oe(_t,ut){return(0,l.Tg)(_t).pipe(X(ut),W(ut))}(_t,ut);if((0,we.X)(_t))return function k(_t,ut){return new G.c(ae=>{let x=0;return ut.schedule(function(){x===_t.length?ae.complete():(ae.next(_t[x++]),ae.closed||this.schedule())})})}(_t,ut);if((0,Ae.y)(_t))return function H(_t,ut){return(0,l.Tg)(_t).pipe(X(ut),W(ut))}(_t,ut);if((0,Re.T)(_t))return ce(_t,ut);if((0,de.x)(_t))return function ne(_t,ut){return new G.c(ae=>{let x;return(0,M.N)(ae,ut,()=>{x=_t[P.l](),(0,M.N)(ae,ut,()=>{let T,K;try{({value:T,done:K}=x.next())}catch(te){return void ae.error(te)}K?ae.complete():ae.next(T)},0,!0)}),()=>(0,q.T)(x?.return)&&x.return()})}(_t,ut);if((0,Ge.U)(_t))return function Oe(_t,ut){return ce((0,Ge.C)(_t),ut)}(_t,ut)}throw(0,ze.L)(_t)}(_t,ut):(0,l.Tg)(_t)}},8750:(Dt,qe,S)=>{"use strict";S.d(qe,{Tg:()=>ne});var l=S(5215),M=S(7441),h=S(9858),ge=S(1985),W=S(5055),X=S(7953),oe=S(591),H=S(5397),G=S(5196),k=S(8071),P=S(5334),q=S(3494);function ne(Ge){if(Ge instanceof ge.c)return Ge;if(null!=Ge){if((0,W.l)(Ge))return function ce(Ge){return new ge.c(Oe=>{const Ye=Ge[q.s]();if((0,k.T)(Ye.subscribe))return Ye.subscribe(Oe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ge);if((0,M.X)(Ge))return function he(Ge){return new ge.c(Oe=>{for(let Ye=0;Ye<Ge.length&&!Oe.closed;Ye++)Oe.next(Ge[Ye]);Oe.complete()})}(Ge);if((0,h.y)(Ge))return function Ae(Ge){return new ge.c(Oe=>{Ge.then(Ye=>{Oe.closed||(Oe.next(Ye),Oe.complete())},Ye=>Oe.error(Ye)).then(null,P.m)})}(Ge);if((0,X.T)(Ge))return de(Ge);if((0,H.x)(Ge))return function we(Ge){return new ge.c(Oe=>{for(const Ye of Ge)if(Oe.next(Ye),Oe.closed)return;Oe.complete()})}(Ge);if((0,G.U)(Ge))return function Re(Ge){return de((0,G.C)(Ge))}(Ge)}throw(0,oe.L)(Ge)}function de(Ge){return new ge.c(Oe=>{(function ze(Ge,Oe){var Ye,yt,_t,ut;return(0,l.sH)(this,void 0,void 0,function*(){try{for(Ye=(0,l.xN)(Ge);!(yt=yield Ye.next()).done;)if(Oe.next(yt.value),Oe.closed)return}catch(ae){_t={error:ae}}finally{try{yt&&!yt.done&&(ut=Ye.return)&&(yield ut.call(Ye))}finally{if(_t)throw _t.error}}Oe.complete()})})(Ge,Oe).catch(Ye=>Oe.error(Ye))})}},7673:(Dt,qe,S)=>{"use strict";S.d(qe,{of:()=>h});var l=S(9326),M=S(6648);function h(...ge){const W=(0,l.lI)(ge);return(0,M.H)(ge,W)}},8810:(Dt,qe,S)=>{"use strict";S.d(qe,{$:()=>h});var l=S(1985),M=S(8071);function h(ge,W){const X=(0,M.T)(ge)?ge:()=>ge,oe=H=>H.error(X());return new l.c(W?H=>W.schedule(oe,0,H):oe)}},1584:(Dt,qe,S)=>{"use strict";S.d(qe,{O:()=>W});var l=S(1985),M=S(8839),h=S(9470);function W(X=0,oe,H=M.b){let G=-1;return null!=oe&&((0,h.m)(oe)?H=oe:G=oe),new l.c(k=>{let P=function ge(X){return X instanceof Date&&!isNaN(X)}(X)?+X-H.now():X;P<0&&(P=0);let q=0;return H.schedule(function(){k.closed||(k.next(q++),0<=G?this.schedule(void 0,G):k.complete())},P)})}},4360:(Dt,qe,S)=>{"use strict";S.d(qe,{_:()=>M});var l=S(7707);function M(ge,W,X,oe,H){return new h(ge,W,X,oe,H)}class h extends l.vU{constructor(W,X,oe,H,G,k){super(W),this.onFinalize=G,this.shouldUnsubscribe=k,this._next=X?function(P){try{X(P)}catch(q){W.error(q)}}:super._next,this._error=H?function(P){try{H(P)}catch(q){W.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(P){W.error(P)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var W;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:X}=this;super.unsubscribe(),!X&&(null===(W=this.onFinalize)||void 0===W||W.call(this))}}}},9437:(Dt,qe,S)=>{"use strict";S.d(qe,{W:()=>ge});var l=S(8750),M=S(4360),h=S(9974);function ge(W){return(0,h.N)((X,oe)=>{let k,H=null,G=!1;H=X.subscribe((0,M._)(oe,void 0,void 0,P=>{k=(0,l.Tg)(W(P,ge(W)(X))),H?(H.unsubscribe(),H=null,k.subscribe(oe)):G=!0})),G&&(H.unsubscribe(),H=null,k.subscribe(oe))})}},274:(Dt,qe,S)=>{"use strict";S.d(qe,{H:()=>h});var l=S(1397),M=S(8071);function h(ge,W){return(0,M.T)(W)?(0,l.Z)(ge,W,1):(0,l.Z)(ge,1)}},5964:(Dt,qe,S)=>{"use strict";S.d(qe,{p:()=>h});var l=S(9974),M=S(4360);function h(ge,W){return(0,l.N)((X,oe)=>{let H=0;X.subscribe((0,M._)(oe,G=>ge.call(W,G,H++)&&oe.next(G)))})}},980:(Dt,qe,S)=>{"use strict";S.d(qe,{j:()=>M});var l=S(9974);function M(h){return(0,l.N)((ge,W)=>{try{ge.subscribe(W)}finally{W.add(h)}})}},6354:(Dt,qe,S)=>{"use strict";S.d(qe,{T:()=>h});var l=S(9974),M=S(4360);function h(ge,W){return(0,l.N)((X,oe)=>{let H=0;X.subscribe((0,M._)(oe,G=>{oe.next(ge.call(W,G,H++))}))})}},3703:(Dt,qe,S)=>{"use strict";S.d(qe,{u:()=>M});var l=S(6354);function M(h){return(0,l.T)(()=>h)}},6365:(Dt,qe,S)=>{"use strict";S.d(qe,{U:()=>h});var l=S(1397),M=S(3669);function h(ge=1/0){return(0,l.Z)(M.D,ge)}},1397:(Dt,qe,S)=>{"use strict";S.d(qe,{Z:()=>H});var l=S(6354),M=S(8750),h=S(9974),ge=S(5225),W=S(4360),oe=S(8071);function H(G,k,P=1/0){return(0,oe.T)(k)?H((q,ne)=>(0,l.T)((ce,he)=>k(q,ce,ne,he))((0,M.Tg)(G(q,ne))),P):("number"==typeof k&&(P=k),(0,h.N)((q,ne)=>function X(G,k,P,q,ne,ce,he,Ae){const we=[];let de=0,Re=0,ze=!1;const Ge=()=>{ze&&!we.length&&!de&&k.complete()},Oe=yt=>de<q?Ye(yt):we.push(yt),Ye=yt=>{ce&&k.next(yt),de++;let _t=!1;(0,M.Tg)(P(yt,Re++)).subscribe((0,W._)(k,ut=>{ne?.(ut),ce?Oe(ut):k.next(ut)},()=>{_t=!0},void 0,()=>{if(_t)try{for(de--;we.length&&de<q;){const ut=we.shift();he?(0,ge.N)(k,he,()=>Ye(ut)):Ye(ut)}Ge()}catch(ut){k.error(ut)}}))};return G.subscribe((0,W._)(k,Oe,()=>{ze=!0,Ge()})),()=>{Ae?.()}}(q,ne,G,P)))}},9172:(Dt,qe,S)=>{"use strict";S.d(qe,{Z:()=>ge});var l=S(8793),M=S(9326),h=S(9974);function ge(...W){const X=(0,M.lI)(W);return(0,h.N)((oe,H)=>{(X?(0,l.x)(W,oe,X):(0,l.x)(W,oe)).subscribe(H)})}},5558:(Dt,qe,S)=>{"use strict";S.d(qe,{n:()=>ge});var l=S(8750),M=S(9974),h=S(4360);function ge(W,X){return(0,M.N)((oe,H)=>{let G=null,k=0,P=!1;const q=()=>P&&!G&&H.complete();oe.subscribe((0,h._)(H,ne=>{G?.unsubscribe();let ce=0;const he=k++;(0,l.Tg)(W(ne,he)).subscribe(G=(0,h._)(H,Ae=>H.next(X?X(ne,Ae,he,ce++):Ae),()=>{G=null,q()}))},()=>{P=!0,q()}))})}},6697:(Dt,qe,S)=>{"use strict";S.d(qe,{s:()=>ge});var l=S(983),M=S(9974),h=S(4360);function ge(W){return W<=0?()=>l.w:(0,M.N)((X,oe)=>{let H=0;X.subscribe((0,h._)(oe,G=>{++H<=W&&(oe.next(G),W<=H&&oe.complete())}))})}},6977:(Dt,qe,S)=>{"use strict";S.d(qe,{Q:()=>W});var l=S(9974),M=S(4360),h=S(8750),ge=S(5343);function W(X){return(0,l.N)((oe,H)=>{(0,h.Tg)(X).subscribe((0,M._)(H,()=>H.complete(),ge.l)),!H.closed&&oe.subscribe(H)})}},8141:(Dt,qe,S)=>{"use strict";S.d(qe,{M:()=>W});var l=S(8071),M=S(9974),h=S(4360),ge=S(3669);function W(X,oe,H){const G=(0,l.T)(X)||oe||H?{next:X,error:oe,complete:H}:X;return G?(0,M.N)((k,P)=>{var q;null===(q=G.subscribe)||void 0===q||q.call(G);let ne=!0;k.subscribe((0,h._)(P,ce=>{var he;null===(he=G.next)||void 0===he||he.call(G,ce),P.next(ce)},()=>{var ce;ne=!1,null===(ce=G.complete)||void 0===ce||ce.call(G),P.complete()},ce=>{var he;ne=!1,null===(he=G.error)||void 0===he||he.call(G,ce),P.error(ce)},()=>{var ce,he;ne&&(null===(ce=G.unsubscribe)||void 0===ce||ce.call(G)),null===(he=G.finalize)||void 0===he||he.call(G)}))}):ge.D}},8839:(Dt,qe,S)=>{"use strict";S.d(qe,{b:()=>k,E:()=>G});var l=S(8359);class M extends l.yU{constructor(q,ne){super()}schedule(q,ne=0){return this}}const h={setInterval(P,q,...ne){const{delegate:ce}=h;return ce?.setInterval?ce.setInterval(P,q,...ne):setInterval(P,q,...ne)},clearInterval(P){const{delegate:q}=h;return(q?.clearInterval||clearInterval)(P)},delegate:void 0};var ge=S(7908),X=S(6129);class oe{constructor(q,ne=oe.now){this.schedulerActionCtor=q,this.now=ne}schedule(q,ne=0,ce){return new this.schedulerActionCtor(this,q).schedule(ce,ne)}}oe.now=X.U.now;const G=new class H extends oe{constructor(q,ne=oe.now){super(q,ne),this.actions=[],this._active=!1}flush(q){const{actions:ne}=this;if(this._active)return void ne.push(q);let ce;this._active=!0;do{if(ce=q.execute(q.state,q.delay))break}while(q=ne.shift());if(this._active=!1,ce){for(;q=ne.shift();)q.unsubscribe();throw ce}}}(class W extends M{constructor(q,ne){super(q,ne),this.scheduler=q,this.work=ne,this.pending=!1}schedule(q,ne=0){var ce;if(this.closed)return this;this.state=q;const he=this.id,Ae=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(Ae,he,ne)),this.pending=!0,this.delay=ne,this.id=null!==(ce=this.id)&&void 0!==ce?ce:this.requestAsyncId(Ae,this.id,ne),this}requestAsyncId(q,ne,ce=0){return h.setInterval(q.flush.bind(q,this),ce)}recycleAsyncId(q,ne,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return ne;null!=ne&&h.clearInterval(ne)}execute(q,ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(q,ne);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(q,ne){let he,ce=!1;try{this.work(q)}catch(Ae){ce=!0,he=Ae||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),he}unsubscribe(){if(!this.closed){const{id:q,scheduler:ne}=this,{actions:ce}=ne;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ge.o)(ce,this),null!=q&&(this.id=this.recycleAsyncId(ne,q,null)),this.delay=null,super.unsubscribe()}}}),k=G},6129:(Dt,qe,S)=>{"use strict";S.d(qe,{U:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},9270:(Dt,qe,S)=>{"use strict";S.d(qe,{f:()=>l});const l={setTimeout(M,h,...ge){const{delegate:W}=l;return W?.setTimeout?W.setTimeout(M,h,...ge):setTimeout(M,h,...ge)},clearTimeout(M){const{delegate:h}=l;return(h?.clearTimeout||clearTimeout)(M)},delegate:void 0}},4761:(Dt,qe,S)=>{"use strict";S.d(qe,{l:()=>M});const M=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Dt,qe,S)=>{"use strict";S.d(qe,{s:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(Dt,qe,S)=>{"use strict";S.d(qe,{G:()=>M});const M=(0,S(1853).L)(h=>function(){h(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(Dt,qe,S)=>{"use strict";S.d(qe,{R0:()=>X,lI:()=>W,ms:()=>ge});var l=S(8071),M=S(9470);function h(oe){return oe[oe.length-1]}function ge(oe){return(0,l.T)(h(oe))?oe.pop():void 0}function W(oe){return(0,M.m)(h(oe))?oe.pop():void 0}function X(oe,H){return"number"==typeof h(oe)?oe.pop():H}},3073:(Dt,qe,S)=>{"use strict";S.d(qe,{D:()=>W});const{isArray:l}=Array,{getPrototypeOf:M,prototype:h,keys:ge}=Object;function W(oe){if(1===oe.length){const H=oe[0];if(l(H))return{args:H,keys:null};if(function X(oe){return oe&&"object"==typeof oe&&M(oe)===h}(H)){const G=ge(H);return{args:G.map(k=>H[k]),keys:G}}}return{args:oe,keys:null}}},7908:(Dt,qe,S)=>{"use strict";function l(M,h){if(M){const ge=M.indexOf(h);0<=ge&&M.splice(ge,1)}}S.d(qe,{o:()=>l})},1853:(Dt,qe,S)=>{"use strict";function l(M){const ge=M(W=>{Error.call(W),W.stack=(new Error).stack});return ge.prototype=Object.create(Error.prototype),ge.prototype.constructor=ge,ge}S.d(qe,{L:()=>l})},8496:(Dt,qe,S)=>{"use strict";function l(M,h){return M.reduce((ge,W,X)=>(ge[W]=h[X],ge),{})}S.d(qe,{e:()=>l})},9786:(Dt,qe,S)=>{"use strict";S.d(qe,{Y:()=>h,l:()=>ge});var l=S(1026);let M=null;function h(W){if(l.$.useDeprecatedSynchronousErrorHandling){const X=!M;if(X&&(M={errorThrown:!1,error:null}),W(),X){const{errorThrown:oe,error:H}=M;if(M=null,oe)throw H}}else W()}function ge(W){l.$.useDeprecatedSynchronousErrorHandling&&M&&(M.errorThrown=!0,M.error=W)}},5225:(Dt,qe,S)=>{"use strict";function l(M,h,ge,W=0,X=!1){const oe=h.schedule(function(){ge(),X?M.add(this.schedule(null,W)):this.unsubscribe()},W);if(M.add(oe),!X)return oe}S.d(qe,{N:()=>l})},3669:(Dt,qe,S)=>{"use strict";function l(M){return M}S.d(qe,{D:()=>l})},7441:(Dt,qe,S)=>{"use strict";S.d(qe,{X:()=>l});const l=M=>M&&"number"==typeof M.length&&"function"!=typeof M},7953:(Dt,qe,S)=>{"use strict";S.d(qe,{T:()=>M});var l=S(8071);function M(h){return Symbol.asyncIterator&&(0,l.T)(h?.[Symbol.asyncIterator])}},8071:(Dt,qe,S)=>{"use strict";function l(M){return"function"==typeof M}S.d(qe,{T:()=>l})},5055:(Dt,qe,S)=>{"use strict";S.d(qe,{l:()=>h});var l=S(3494),M=S(8071);function h(ge){return(0,M.T)(ge[l.s])}},5397:(Dt,qe,S)=>{"use strict";S.d(qe,{x:()=>h});var l=S(4761),M=S(8071);function h(ge){return(0,M.T)(ge?.[l.l])}},4402:(Dt,qe,S)=>{"use strict";S.d(qe,{A:()=>h});var l=S(1985),M=S(8071);function h(ge){return!!ge&&(ge instanceof l.c||(0,M.T)(ge.lift)&&(0,M.T)(ge.subscribe))}},9858:(Dt,qe,S)=>{"use strict";S.d(qe,{y:()=>M});var l=S(8071);function M(h){return(0,l.T)(h?.then)}},5196:(Dt,qe,S)=>{"use strict";S.d(qe,{C:()=>h,U:()=>ge});var l=S(5215),M=S(8071);function h(W){return(0,l.AQ)(this,arguments,function*(){const oe=W.getReader();try{for(;;){const{value:H,done:G}=yield(0,l.N3)(oe.read());if(G)return yield(0,l.N3)(void 0);yield yield(0,l.N3)(H)}}finally{oe.releaseLock()}})}function ge(W){return(0,M.T)(W?.getReader)}},9470:(Dt,qe,S)=>{"use strict";S.d(qe,{m:()=>M});var l=S(8071);function M(h){return h&&(0,l.T)(h.schedule)}},9974:(Dt,qe,S)=>{"use strict";S.d(qe,{N:()=>h,S:()=>M});var l=S(8071);function M(ge){return(0,l.T)(ge?.lift)}function h(ge){return W=>{if(M(W))return W.lift(function(X){try{return ge(X,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(Dt,qe,S)=>{"use strict";S.d(qe,{I:()=>ge});var l=S(6354);const{isArray:M}=Array;function ge(W){return(0,l.T)(X=>function h(W,X){return M(X)?W(...X):W(X)}(W,X))}},5343:(Dt,qe,S)=>{"use strict";function l(){}S.d(qe,{l:()=>l})},1203:(Dt,qe,S)=>{"use strict";S.d(qe,{F:()=>M,m:()=>h});var l=S(3669);function M(...ge){return h(ge)}function h(ge){return 0===ge.length?l.D:1===ge.length?ge[0]:function(X){return ge.reduce((oe,H)=>H(oe),X)}}},5334:(Dt,qe,S)=>{"use strict";S.d(qe,{m:()=>h});var l=S(1026),M=S(9270);function h(ge){M.f.setTimeout(()=>{const{onUnhandledError:W}=l.$;if(!W)throw ge;W(ge)})}},591:(Dt,qe,S)=>{"use strict";function l(M){return new TypeError(`You provided ${null!==M&&"object"==typeof M?"an invalid object":`'${M}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}S.d(qe,{L:()=>l})},5215:(Dt,qe,S)=>{"use strict";function H(ae,x,T,K){return new(T||(T=Promise))(function(ve,Ce){function Be(Fe){try{z(K.next(Fe))}catch(Pt){Ce(Pt)}}function Ne(Fe){try{z(K.throw(Fe))}catch(Pt){Ce(Pt)}}function z(Fe){Fe.done?ve(Fe.value):function te(ve){return ve instanceof T?ve:new T(function(Ce){Ce(ve)})}(Fe.value).then(Be,Ne)}z((K=K.apply(ae,x||[])).next())})}function we(ae){return this instanceof we?(this.v=ae,this):new we(ae)}function de(ae,x,T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,K=T.apply(ae,x||[]),ve=[];return te={},Ce("next"),Ce("throw"),Ce("return"),te[Symbol.asyncIterator]=function(){return this},te;function Ce(ot){K[ot]&&(te[ot]=function(Vt){return new Promise(function(vt,st){ve.push([ot,Vt,vt,st])>1||Be(ot,Vt)})})}function Be(ot,Vt){try{!function Ne(ot){ot.value instanceof we?Promise.resolve(ot.value.v).then(z,Fe):Pt(ve[0][2],ot)}(K[ot](Vt))}catch(vt){Pt(ve[0][3],vt)}}function z(ot){Be("next",ot)}function Fe(ot){Be("throw",ot)}function Pt(ot,Vt){ot(Vt),ve.shift(),ve.length&&Be(ve[0][0],ve[0][1])}}function ze(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,x=ae[Symbol.asyncIterator];return x?x.call(ae):(ae=function q(ae){var x="function"==typeof Symbol&&Symbol.iterator,T=x&&ae[x],K=0;if(T)return T.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&K>=ae.length&&(ae=void 0),{value:ae&&ae[K++],done:!ae}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),T={},K("next"),K("throw"),K("return"),T[Symbol.asyncIterator]=function(){return this},T);function K(ve){T[ve]=ae[ve]&&function(Ce){return new Promise(function(Be,Ne){!function te(ve,Ce,Be,Ne){Promise.resolve(Ne).then(function(z){ve({value:z,done:Be})},Ce)}(Be,Ne,(Ce=ae[ve](Ce)).done,Ce.value)})}}}S.d(qe,{AQ:()=>de,N3:()=>we,sH:()=>H,xN:()=>ze})},7790:()=>{},3776:()=>{},477:()=>{},9969:(Dt,qe,S)=>{"use strict";S.d(qe,{FX:()=>ut,If:()=>l,K2:()=>X,hZ:()=>h,i0:()=>ge,iF:()=>oe,kY:()=>k,kp:()=>M,sf:()=>yt,ui:()=>_t,wk:()=>H});var l=function(ae){return ae[ae.State=0]="State",ae[ae.Transition=1]="Transition",ae[ae.Sequence=2]="Sequence",ae[ae.Group=3]="Group",ae[ae.Animate=4]="Animate",ae[ae.Keyframes=5]="Keyframes",ae[ae.Style=6]="Style",ae[ae.Trigger=7]="Trigger",ae[ae.Reference=8]="Reference",ae[ae.AnimateChild=9]="AnimateChild",ae[ae.AnimateRef=10]="AnimateRef",ae[ae.Query=11]="Query",ae[ae.Stagger=12]="Stagger",ae}(l||{});const M="*";function h(ae,x){return{type:l.Trigger,name:ae,definitions:x,options:{}}}function ge(ae,x=null){return{type:l.Animate,styles:x,timings:ae}}function X(ae,x=null){return{type:l.Sequence,steps:ae,options:x}}function oe(ae){return{type:l.Style,styles:ae,offset:null}}function H(ae,x,T){return{type:l.State,name:ae,styles:x,options:T}}function k(ae,x,T=null){return{type:l.Transition,expr:ae,animation:x,options:T}}class yt{constructor(x=0,T=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=x+T}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(x=>x()),this._onDoneFns=[])}onStart(x){this._originalOnStartFns.push(x),this._onStartFns.push(x)}onDone(x){this._originalOnDoneFns.push(x),this._onDoneFns.push(x)}onDestroy(x){this._onDestroyFns.push(x)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(x=>x()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(x=>x()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(x){this._position=this.totalTime?x*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(x){const T="start"==x?this._onStartFns:this._onDoneFns;T.forEach(K=>K()),T.length=0}}class _t{constructor(x){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=x;let T=0,K=0,te=0;const ve=this.players.length;0==ve?queueMicrotask(()=>this._onFinish()):this.players.forEach(Ce=>{Ce.onDone(()=>{++T==ve&&this._onFinish()}),Ce.onDestroy(()=>{++K==ve&&this._onDestroy()}),Ce.onStart(()=>{++te==ve&&this._onStart()})}),this.totalTime=this.players.reduce((Ce,Be)=>Math.max(Ce,Be.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(x=>x()),this._onDoneFns=[])}init(){this.players.forEach(x=>x.init())}onStart(x){this._onStartFns.push(x)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(x=>x()),this._onStartFns=[])}onDone(x){this._onDoneFns.push(x)}onDestroy(x){this._onDestroyFns.push(x)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(x=>x.play())}pause(){this.players.forEach(x=>x.pause())}restart(){this.players.forEach(x=>x.restart())}finish(){this._onFinish(),this.players.forEach(x=>x.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(x=>x.destroy()),this._onDestroyFns.forEach(x=>x()),this._onDestroyFns=[])}reset(){this.players.forEach(x=>x.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(x){const T=x*this.totalTime;this.players.forEach(K=>{const te=K.totalTime?Math.min(1,T/K.totalTime):1;K.setPosition(te)})}getPosition(){const x=this.players.reduce((T,K)=>null===T||K.totalTime>T.totalTime?K:T,null);return null!=x?x.getPosition():0}beforeDestroy(){this.players.forEach(x=>{x.beforeDestroy&&x.beforeDestroy()})}triggerCallback(x){const T="start"==x?this._onStartFns:this._onDoneFns;T.forEach(K=>K()),T.length=0}}const ut="!"},177:(Dt,qe,S)=>{"use strict";S.d(qe,{AJ:()=>na,B3:()=>Gi,MD:()=>ua,N0:()=>Po,QT:()=>h,Sm:()=>Ae,Sq:()=>ai,T3:()=>vr,UE:()=>ya,VF:()=>W,Vy:()=>Tc,XO:()=>Ce,Xr:()=>Jl,YU:()=>pt,Yq:()=>Pi,ZD:()=>ge,_b:()=>$,aZ:()=>de,bT:()=>Yi,cH:()=>ae,fw:()=>we,hb:()=>ce,hj:()=>G,lG:()=>No,oV:()=>ut,qQ:()=>oe,tL:()=>Be,vh:()=>oo});var l=S(4438);let M=null;function h(){return M}function ge(A){M??=A}class W{}const oe=new l.nKC("");let H=(()=>{class A{historyGo(ee){throw new Error("")}static{this.\u0275fac=function(fe){return new(fe||A)}}static{this.\u0275prov=l.jDH({token:A,factory:()=>(0,l.WQX)(k),providedIn:"platform"})}}return A})();const G=new l.nKC("");let k=(()=>{class A extends H{constructor(){super(),this._doc=(0,l.WQX)(oe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return h().getBaseHref(this._doc)}onPopState(ee){const fe=h().getGlobalEventTarget(this._doc,"window");return fe.addEventListener("popstate",ee,!1),()=>fe.removeEventListener("popstate",ee)}onHashChange(ee){const fe=h().getGlobalEventTarget(this._doc,"window");return fe.addEventListener("hashchange",ee,!1),()=>fe.removeEventListener("hashchange",ee)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(ee){this._location.pathname=ee}pushState(ee,fe,it){this._history.pushState(ee,fe,it)}replaceState(ee,fe,it){this._history.replaceState(ee,fe,it)}forward(){this._history.forward()}back(){this._history.back()}historyGo(ee=0){this._history.go(ee)}getState(){return this._history.state}static{this.\u0275fac=function(fe){return new(fe||A)}}static{this.\u0275prov=l.jDH({token:A,factory:()=>new A,providedIn:"platform"})}}return A})();function P(A,Se){if(0==A.length)return Se;if(0==Se.length)return A;let ee=0;return A.endsWith("/")&&ee++,Se.startsWith("/")&&ee++,2==ee?A+Se.substring(1):1==ee?A+Se:A+"/"+Se}function q(A){const Se=A.match(/#|\?|$/),ee=Se&&Se.index||A.length;return A.slice(0,ee-("/"===A[ee-1]?1:0))+A.slice(ee)}function ne(A){return A&&"?"!==A[0]?"?"+A:A}let ce=(()=>{class A{historyGo(ee){throw new Error("")}static{this.\u0275fac=function(fe){return new(fe||A)}}static{this.\u0275prov=l.jDH({token:A,factory:()=>(0,l.WQX)(Ae),providedIn:"root"})}}return A})();const he=new l.nKC("");let Ae=(()=>{class A extends ce{constructor(ee,fe){super(),this._platformLocation=ee,this._removeListenerFns=[],this._baseHref=fe??this._platformLocation.getBaseHrefFromDOM()??(0,l.WQX)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(ee){this._removeListenerFns.push(this._platformLocation.onPopState(ee),this._platformLocation.onHashChange(ee))}getBaseHref(){return this._baseHref}prepareExternalUrl(ee){return P(this._baseHref,ee)}path(ee=!1){const fe=this._platformLocation.pathname+ne(this._platformLocation.search),it=this._platformLocation.hash;return it&&ee?`${fe}${it}`:fe}pushState(ee,fe,it,Ht){const Wt=this.prepareExternalUrl(it+ne(Ht));this._platformLocation.pushState(ee,fe,Wt)}replaceState(ee,fe,it,Ht){const Wt=this.prepareExternalUrl(it+ne(Ht));this._platformLocation.replaceState(ee,fe,Wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(ee=0){this._platformLocation.historyGo?.(ee)}static{this.\u0275fac=function(fe){return new(fe||A)(l.KVO(H),l.KVO(he,8))}}static{this.\u0275prov=l.jDH({token:A,factory:A.\u0275fac,providedIn:"root"})}}return A})(),we=(()=>{class A extends ce{constructor(ee,fe){super(),this._platformLocation=ee,this._baseHref="",this._removeListenerFns=[],null!=fe&&(this._baseHref=fe)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(ee){this._removeListenerFns.push(this._platformLocation.onPopState(ee),this._platformLocation.onHashChange(ee))}getBaseHref(){return this._baseHref}path(ee=!1){const fe=this._platformLocation.hash??"#";return fe.length>0?fe.substring(1):fe}prepareExternalUrl(ee){const fe=P(this._baseHref,ee);return fe.length>0?"#"+fe:fe}pushState(ee,fe,it,Ht){let Wt=this.prepareExternalUrl(it+ne(Ht));0==Wt.length&&(Wt=this._platformLocation.pathname),this._platformLocation.pushState(ee,fe,Wt)}replaceState(ee,fe,it,Ht){let Wt=this.prepareExternalUrl(it+ne(Ht));0==Wt.length&&(Wt=this._platformLocation.pathname),this._platformLocation.replaceState(ee,fe,Wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(ee=0){this._platformLocation.historyGo?.(ee)}static{this.\u0275fac=function(fe){return new(fe||A)(l.KVO(H),l.KVO(he,8))}}static{this.\u0275prov=l.jDH({token:A,factory:A.\u0275fac})}}return A})(),de=(()=>{class A{constructor(ee){this._subject=new l.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=ee;const fe=this._locationStrategy.getBaseHref();this._basePath=function Oe(A){if(new RegExp("^(https?:)?//").test(A)){const[,ee]=A.split(/\/\/[^\/]+/);return ee}return A}(q(Ge(fe))),this._locationStrategy.onPopState(it=>{this._subject.emit({url:this.path(!0),pop:!0,state:it.state,type:it.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(ee=!1){return this.normalize(this._locationStrategy.path(ee))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(ee,fe=""){return this.path()==this.normalize(ee+ne(fe))}normalize(ee){return A.stripTrailingSlash(function ze(A,Se){if(!A||!Se.startsWith(A))return Se;const ee=Se.substring(A.length);return""===ee||["/",";","?","#"].includes(ee[0])?ee:Se}(this._basePath,Ge(ee)))}prepareExternalUrl(ee){return ee&&"/"!==ee[0]&&(ee="/"+ee),this._locationStrategy.prepareExternalUrl(ee)}go(ee,fe="",it=null){this._locationStrategy.pushState(it,"",ee,fe),this._notifyUrlChangeListeners(this.prepareExternalUrl(ee+ne(fe)),it)}replaceState(ee,fe="",it=null){this._locationStrategy.replaceState(it,"",ee,fe),this._notifyUrlChangeListeners(this.prepareExternalUrl(ee+ne(fe)),it)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(ee=0){this._locationStrategy.historyGo?.(ee)}onUrlChange(ee){return this._urlChangeListeners.push(ee),this._urlChangeSubscription??=this.subscribe(fe=>{this._notifyUrlChangeListeners(fe.url,fe.state)}),()=>{const fe=this._urlChangeListeners.indexOf(ee);this._urlChangeListeners.splice(fe,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(ee="",fe){this._urlChangeListeners.forEach(it=>it(ee,fe))}subscribe(ee,fe,it){return this._subject.subscribe({next:ee,error:fe,complete:it})}static{this.normalizeQueryParams=ne}static{this.joinWithSlash=P}static{this.stripTrailingSlash=q}static{this.\u0275fac=function(fe){return new(fe||A)(l.KVO(ce))}}static{this.\u0275prov=l.jDH({token:A,factory:()=>function Re(){return new de((0,l.KVO)(ce))}(),providedIn:"root"})}}return A})();function Ge(A){return A.replace(/\/index.html$/,"")}var ut=function(A){return A[A.Format=0]="Format",A[A.Standalone=1]="Standalone",A}(ut||{}),ae=function(A){return A[A.Narrow=0]="Narrow",A[A.Abbreviated=1]="Abbreviated",A[A.Wide=2]="Wide",A[A.Short=3]="Short",A}(ae||{}),x=function(A){return A[A.Short=0]="Short",A[A.Medium=1]="Medium",A[A.Long=2]="Long",A[A.Full=3]="Full",A}(x||{});const T={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ce(A,Se,ee){const fe=(0,l.H5H)(A),Ht=ct([fe[l.KH2.DaysFormat],fe[l.KH2.DaysStandalone]],Se);return ct(Ht,ee)}function Be(A,Se,ee){const fe=(0,l.H5H)(A),Ht=ct([fe[l.KH2.MonthsFormat],fe[l.KH2.MonthsStandalone]],Se);return ct(Ht,ee)}function Pt(A,Se){return ct((0,l.H5H)(A)[l.KH2.DateFormat],Se)}function ot(A,Se){return ct((0,l.H5H)(A)[l.KH2.TimeFormat],Se)}function Vt(A,Se){return ct((0,l.H5H)(A)[l.KH2.DateTimeFormat],Se)}function vt(A,Se){const ee=(0,l.H5H)(A),fe=ee[l.KH2.NumberSymbols][Se];if(typeof fe>"u"){if(Se===T.CurrencyDecimal)return ee[l.KH2.NumberSymbols][T.Decimal];if(Se===T.CurrencyGroup)return ee[l.KH2.NumberSymbols][T.Group]}return fe}function rn(A){if(!A[l.KH2.ExtraData])throw new Error(`Missing extra locale data for the locale "${A[l.KH2.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ct(A,Se){for(let ee=Se;ee>-1;ee--)if(typeof A[ee]<"u")return A[ee];throw new Error("Locale data API: locale data undefined")}function Ot(A){const[Se,ee]=A.split(":");return{hours:+Se,minutes:+ee}}const Xn=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Zn={},Hr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Hn=function(A){return A[A.Short=0]="Short",A[A.ShortGMT=1]="ShortGMT",A[A.Long=2]="Long",A[A.Extended=3]="Extended",A}(Hn||{}),Dn=function(A){return A[A.FullYear=0]="FullYear",A[A.Month=1]="Month",A[A.Date=2]="Date",A[A.Hours=3]="Hours",A[A.Minutes=4]="Minutes",A[A.Seconds=5]="Seconds",A[A.FractionalSeconds=6]="FractionalSeconds",A[A.Day=7]="Day",A}(Dn||{}),Un=function(A){return A[A.DayPeriods=0]="DayPeriods",A[A.Days=1]="Days",A[A.Months=2]="Months",A[A.Eras=3]="Eras",A}(Un||{});function Pi(A,Se,ee,fe){let it=function kn(A){if(oi(A))return A;if("number"==typeof A&&!isNaN(A))return new Date(A);if("string"==typeof A){if(A=A.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(A)){const[it,Ht=1,Wt=1]=A.split("-").map(Wn=>+Wn);return Qi(it,Ht-1,Wt)}const ee=parseFloat(A);if(!isNaN(A-ee))return new Date(ee);let fe;if(fe=A.match(Xn))return function zi(A){const Se=new Date(0);let ee=0,fe=0;const it=A[8]?Se.setUTCFullYear:Se.setFullYear,Ht=A[8]?Se.setUTCHours:Se.setHours;A[9]&&(ee=Number(A[9]+A[10]),fe=Number(A[9]+A[11])),it.call(Se,Number(A[1]),Number(A[2])-1,Number(A[3]));const Wt=Number(A[4]||0)-ee,Wn=Number(A[5]||0)-fe,dr=Number(A[6]||0),qi=Math.floor(1e3*parseFloat("0."+(A[7]||0)));return Ht.call(Se,Wt,Wn,dr,qi),Se}(fe)}const Se=new Date(A);if(!oi(Se))throw new Error(`Unable to convert "${A}" into a date`);return Se}(A);Se=Rr(ee,Se)||Se;let Wn,Wt=[];for(;Se;){if(Wn=Hr.exec(Se),!Wn){Wt.push(Se);break}{Wt=Wt.concat(Wn.slice(1));const ps=Wt.pop();if(!ps)break;Se=ps}}let dr=it.getTimezoneOffset();fe&&(dr=St(fe,dr),it=function vn(A,Se,ee){const fe=ee?-1:1,it=A.getTimezoneOffset();return function fn(A,Se){return(A=new Date(A.getTime())).setMinutes(A.getMinutes()+Se),A}(A,fe*(St(Se,it)-it))}(it,fe,!0));let qi="";return Wt.forEach(ps=>{const ji=function at(A){if(zt[A])return zt[A];let Se;switch(A){case"G":case"GG":case"GGG":Se=mr(Un.Eras,ae.Abbreviated);break;case"GGGG":Se=mr(Un.Eras,ae.Wide);break;case"GGGGG":Se=mr(Un.Eras,ae.Narrow);break;case"y":Se=Yn(Dn.FullYear,1,0,!1,!0);break;case"yy":Se=Yn(Dn.FullYear,2,0,!0,!0);break;case"yyy":Se=Yn(Dn.FullYear,3,0,!1,!0);break;case"yyyy":Se=Yn(Dn.FullYear,4,0,!1,!0);break;case"Y":Se=Rt(1);break;case"YY":Se=Rt(2,!0);break;case"YYY":Se=Rt(3);break;case"YYYY":Se=Rt(4);break;case"M":case"L":Se=Yn(Dn.Month,1,1);break;case"MM":case"LL":Se=Yn(Dn.Month,2,1);break;case"MMM":Se=mr(Un.Months,ae.Abbreviated);break;case"MMMM":Se=mr(Un.Months,ae.Wide);break;case"MMMMM":Se=mr(Un.Months,ae.Narrow);break;case"LLL":Se=mr(Un.Months,ae.Abbreviated,ut.Standalone);break;case"LLLL":Se=mr(Un.Months,ae.Wide,ut.Standalone);break;case"LLLLL":Se=mr(Un.Months,ae.Narrow,ut.Standalone);break;case"w":Se=ar(1);break;case"ww":Se=ar(2);break;case"W":Se=ar(1,!0);break;case"d":Se=Yn(Dn.Date,1);break;case"dd":Se=Yn(Dn.Date,2);break;case"c":case"cc":Se=Yn(Dn.Day,1);break;case"ccc":Se=mr(Un.Days,ae.Abbreviated,ut.Standalone);break;case"cccc":Se=mr(Un.Days,ae.Wide,ut.Standalone);break;case"ccccc":Se=mr(Un.Days,ae.Narrow,ut.Standalone);break;case"cccccc":Se=mr(Un.Days,ae.Short,ut.Standalone);break;case"E":case"EE":case"EEE":Se=mr(Un.Days,ae.Abbreviated);break;case"EEEE":Se=mr(Un.Days,ae.Wide);break;case"EEEEE":Se=mr(Un.Days,ae.Narrow);break;case"EEEEEE":Se=mr(Un.Days,ae.Short);break;case"a":case"aa":case"aaa":Se=mr(Un.DayPeriods,ae.Abbreviated);break;case"aaaa":Se=mr(Un.DayPeriods,ae.Wide);break;case"aaaaa":Se=mr(Un.DayPeriods,ae.Narrow);break;case"b":case"bb":case"bbb":Se=mr(Un.DayPeriods,ae.Abbreviated,ut.Standalone,!0);break;case"bbbb":Se=mr(Un.DayPeriods,ae.Wide,ut.Standalone,!0);break;case"bbbbb":Se=mr(Un.DayPeriods,ae.Narrow,ut.Standalone,!0);break;case"B":case"BB":case"BBB":Se=mr(Un.DayPeriods,ae.Abbreviated,ut.Format,!0);break;case"BBBB":Se=mr(Un.DayPeriods,ae.Wide,ut.Format,!0);break;case"BBBBB":Se=mr(Un.DayPeriods,ae.Narrow,ut.Format,!0);break;case"h":Se=Yn(Dn.Hours,1,-12);break;case"hh":Se=Yn(Dn.Hours,2,-12);break;case"H":Se=Yn(Dn.Hours,1);break;case"HH":Se=Yn(Dn.Hours,2);break;case"m":Se=Yn(Dn.Minutes,1);break;case"mm":Se=Yn(Dn.Minutes,2);break;case"s":Se=Yn(Dn.Seconds,1);break;case"ss":Se=Yn(Dn.Seconds,2);break;case"S":Se=Yn(Dn.FractionalSeconds,1);break;case"SS":Se=Yn(Dn.FractionalSeconds,2);break;case"SSS":Se=Yn(Dn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":Se=Ir(Hn.Short);break;case"ZZZZZ":Se=Ir(Hn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":Se=Ir(Hn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":Se=Ir(Hn.Long);break;default:return null}return zt[A]=Se,Se}(ps);qi+=ji?ji(it,ee,dr):"''"===ps?"'":ps.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),qi}function Qi(A,Se,ee){const fe=new Date(0);return fe.setFullYear(A,Se,ee),fe.setHours(0,0,0),fe}function Rr(A,Se){const ee=function te(A){return(0,l.H5H)(A)[l.KH2.LocaleId]}(A);if(Zn[ee]??={},Zn[ee][Se])return Zn[ee][Se];let fe="";switch(Se){case"shortDate":fe=Pt(A,x.Short);break;case"mediumDate":fe=Pt(A,x.Medium);break;case"longDate":fe=Pt(A,x.Long);break;case"fullDate":fe=Pt(A,x.Full);break;case"shortTime":fe=ot(A,x.Short);break;case"mediumTime":fe=ot(A,x.Medium);break;case"longTime":fe=ot(A,x.Long);break;case"fullTime":fe=ot(A,x.Full);break;case"short":const it=Rr(A,"shortTime"),Ht=Rr(A,"shortDate");fe=ii(Vt(A,x.Short),[it,Ht]);break;case"medium":const Wt=Rr(A,"mediumTime"),Wn=Rr(A,"mediumDate");fe=ii(Vt(A,x.Medium),[Wt,Wn]);break;case"long":const dr=Rr(A,"longTime"),qi=Rr(A,"longDate");fe=ii(Vt(A,x.Long),[dr,qi]);break;case"full":const ps=Rr(A,"fullTime"),ji=Rr(A,"fullDate");fe=ii(Vt(A,x.Full),[ps,ji])}return fe&&(Zn[ee][Se]=fe),fe}function ii(A,Se){return Se&&(A=A.replace(/\{([^}]+)}/g,function(ee,fe){return null!=Se&&fe in Se?Se[fe]:ee})),A}function yi(A,Se,ee="-",fe,it){let Ht="";(A<0||it&&A<=0)&&(it?A=1-A:(A=-A,Ht=ee));let Wt=String(A);for(;Wt.length<Se;)Wt="0"+Wt;return fe&&(Wt=Wt.slice(Wt.length-Se)),Ht+Wt}function Yn(A,Se,ee=0,fe=!1,it=!1){return function(Ht,Wt){let Wn=function cr(A,Se){switch(A){case Dn.FullYear:return Se.getFullYear();case Dn.Month:return Se.getMonth();case Dn.Date:return Se.getDate();case Dn.Hours:return Se.getHours();case Dn.Minutes:return Se.getMinutes();case Dn.Seconds:return Se.getSeconds();case Dn.FractionalSeconds:return Se.getMilliseconds();case Dn.Day:return Se.getDay();default:throw new Error(`Unknown DateType value "${A}".`)}}(A,Ht);if((ee>0||Wn>-ee)&&(Wn+=ee),A===Dn.Hours)0===Wn&&-12===ee&&(Wn=12);else if(A===Dn.FractionalSeconds)return function uo(A,Se){return yi(A,3).substring(0,Se)}(Wn,Se);const dr=vt(Wt,T.MinusSign);return yi(Wn,Se,dr,fe,it)}}function mr(A,Se,ee=ut.Format,fe=!1){return function(it,Ht){return function Si(A,Se,ee,fe,it,Ht){switch(ee){case Un.Months:return Be(Se,it,fe)[A.getMonth()];case Un.Days:return Ce(Se,it,fe)[A.getDay()];case Un.DayPeriods:const Wt=A.getHours(),Wn=A.getMinutes();if(Ht){const qi=function gn(A){const Se=(0,l.H5H)(A);return rn(Se),(Se[l.KH2.ExtraData][2]||[]).map(fe=>"string"==typeof fe?Ot(fe):[Ot(fe[0]),Ot(fe[1])])}(Se),ps=function Xt(A,Se,ee){const fe=(0,l.H5H)(A);rn(fe);const Ht=ct([fe[l.KH2.ExtraData][0],fe[l.KH2.ExtraData][1]],Se)||[];return ct(Ht,ee)||[]}(Se,it,fe),ji=qi.findIndex(wr=>{if(Array.isArray(wr)){const[vi,lt]=wr,kr=Wt>=vi.hours&&Wn>=vi.minutes,Sn=Wt<lt.hours||Wt===lt.hours&&Wn<lt.minutes;if(vi.hours<lt.hours){if(kr&&Sn)return!0}else if(kr||Sn)return!0}else if(wr.hours===Wt&&wr.minutes===Wn)return!0;return!1});if(-1!==ji)return ps[ji]}return function ve(A,Se,ee){const fe=(0,l.H5H)(A),Ht=ct([fe[l.KH2.DayPeriodsFormat],fe[l.KH2.DayPeriodsStandalone]],Se);return ct(Ht,ee)}(Se,it,fe)[Wt<12?0:1];case Un.Eras:return function Ne(A,Se){return ct((0,l.H5H)(A)[l.KH2.Eras],Se)}(Se,fe)[A.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${ee}`)}}(it,Ht,A,Se,ee,fe)}}function Ir(A){return function(Se,ee,fe){const it=-1*fe,Ht=vt(ee,T.MinusSign),Wt=it>0?Math.floor(it/60):Math.ceil(it/60);switch(A){case Hn.Short:return(it>=0?"+":"")+yi(Wt,2,Ht)+yi(Math.abs(it%60),2,Ht);case Hn.ShortGMT:return"GMT"+(it>=0?"+":"")+yi(Wt,1,Ht);case Hn.Long:return"GMT"+(it>=0?"+":"")+yi(Wt,2,Ht)+":"+yi(Math.abs(it%60),2,Ht);case Hn.Extended:return 0===fe?"Z":(it>=0?"+":"")+yi(Wt,2,Ht)+":"+yi(Math.abs(it%60),2,Ht);default:throw new Error(`Unknown zone width "${A}"`)}}}const Kr=0,gr=4;function ls(A){const Se=A.getDay(),ee=0===Se?-3:gr-Se;return Qi(A.getFullYear(),A.getMonth(),A.getDate()+ee)}function ar(A,Se=!1){return function(ee,fe){let it;if(Se){const Ht=new Date(ee.getFullYear(),ee.getMonth(),1).getDay()-1,Wt=ee.getDate();it=1+Math.floor((Wt+Ht)/7)}else{const Ht=ls(ee),Wt=function Zr(A){const Se=Qi(A,Kr,1).getDay();return Qi(A,0,1+(Se<=gr?gr:gr+7)-Se)}(Ht.getFullYear()),Wn=Ht.getTime()-Wt.getTime();it=1+Math.round(Wn/6048e5)}return yi(it,A,vt(fe,T.MinusSign))}}function Rt(A,Se=!1){return function(ee,fe){return yi(ls(ee).getFullYear(),A,vt(fe,T.MinusSign),Se)}}const zt={};function St(A,Se){A=A.replace(/:/g,"");const ee=Date.parse("Jan 01, 1970 00:00:00 "+A)/6e4;return isNaN(ee)?Se:ee}function oi(A){return A instanceof Date&&!isNaN(A.valueOf())}function $(A,Se){Se=encodeURIComponent(Se);for(const ee of A.split(";")){const fe=ee.indexOf("="),[it,Ht]=-1==fe?[ee,""]:[ee.slice(0,fe),ee.slice(fe+1)];if(it.trim()===Se)return decodeURIComponent(Ht)}return null}const ue=/\s+/,Ze=[];let pt=(()=>{class A{constructor(ee,fe){this._ngEl=ee,this._renderer=fe,this.initialClasses=Ze,this.stateMap=new Map}set klass(ee){this.initialClasses=null!=ee?ee.trim().split(ue):Ze}set ngClass(ee){this.rawClass="string"==typeof ee?ee.trim().split(ue):ee}ngDoCheck(){for(const fe of this.initialClasses)this._updateState(fe,!0);const ee=this.rawClass;if(Array.isArray(ee)||ee instanceof Set)for(const fe of ee)this._updateState(fe,!0);else if(null!=ee)for(const fe of Object.keys(ee))this._updateState(fe,!!ee[fe]);this._applyStateDiff()}_updateState(ee,fe){const it=this.stateMap.get(ee);void 0!==it?(it.enabled!==fe&&(it.changed=!0,it.enabled=fe),it.touched=!0):this.stateMap.set(ee,{enabled:fe,changed:!0,touched:!0})}_applyStateDiff(){for(const ee of this.stateMap){const fe=ee[0],it=ee[1];it.changed?(this._toggleClass(fe,it.enabled),it.changed=!1):it.touched||(it.enabled&&this._toggleClass(fe,!1),this.stateMap.delete(fe)),it.touched=!1}}_toggleClass(ee,fe){(ee=ee.trim()).length>0&&ee.split(ue).forEach(it=>{fe?this._renderer.addClass(this._ngEl.nativeElement,it):this._renderer.removeClass(this._ngEl.nativeElement,it)})}static{this.\u0275fac=function(fe){return new(fe||A)(l.rXU(l.aKT),l.rXU(l.sFG))}}static{this.\u0275dir=l.FsC({type:A,selectors:[["","ngClass",""]],inputs:{klass:[l.Mj6.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return A})();class Vn{constructor(Se,ee,fe,it){this.$implicit=Se,this.ngForOf=ee,this.index=fe,this.count=it}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ai=(()=>{class A{set ngForOf(ee){this._ngForOf=ee,this._ngForOfDirty=!0}set ngForTrackBy(ee){this._trackByFn=ee}get ngForTrackBy(){return this._trackByFn}constructor(ee,fe,it){this._viewContainer=ee,this._template=fe,this._differs=it,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(ee){ee&&(this._template=ee)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const ee=this._ngForOf;!this._differ&&ee&&(this._differ=this._differs.find(ee).create(this.ngForTrackBy))}if(this._differ){const ee=this._differ.diff(this._ngForOf);ee&&this._applyChanges(ee)}}_applyChanges(ee){const fe=this._viewContainer;ee.forEachOperation((it,Ht,Wt)=>{if(null==it.previousIndex)fe.createEmbeddedView(this._template,new Vn(it.item,this._ngForOf,-1,-1),null===Wt?void 0:Wt);else if(null==Wt)fe.remove(null===Ht?void 0:Ht);else if(null!==Ht){const Wn=fe.get(Ht);fe.move(Wn,Wt),ur(Wn,it)}});for(let it=0,Ht=fe.length;it<Ht;it++){const Wn=fe.get(it).context;Wn.index=it,Wn.count=Ht,Wn.ngForOf=this._ngForOf}ee.forEachIdentityChange(it=>{ur(fe.get(it.currentIndex),it)})}static ngTemplateContextGuard(ee,fe){return!0}static{this.\u0275fac=function(fe){return new(fe||A)(l.rXU(l.c1b),l.rXU(l.C4Q),l.rXU(l._q3))}}static{this.\u0275dir=l.FsC({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return A})();function ur(A,Se){A.context.$implicit=Se.item}let Yi=(()=>{class A{constructor(ee,fe){this._viewContainer=ee,this._context=new ns,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=fe}set ngIf(ee){this._context.$implicit=this._context.ngIf=ee,this._updateView()}set ngIfThen(ee){Ls("ngIfThen",ee),this._thenTemplateRef=ee,this._thenViewRef=null,this._updateView()}set ngIfElse(ee){Ls("ngIfElse",ee),this._elseTemplateRef=ee,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(ee,fe){return!0}static{this.\u0275fac=function(fe){return new(fe||A)(l.rXU(l.c1b),l.rXU(l.C4Q))}}static{this.\u0275dir=l.FsC({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return A})();class ns{constructor(){this.$implicit=null,this.ngIf=null}}function Ls(A,Se){if(Se&&!Se.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,l.Tbb)(Se)}'.`)}let Gi=(()=>{class A{constructor(ee,fe,it){this._ngEl=ee,this._differs=fe,this._renderer=it,this._ngStyle=null,this._differ=null}set ngStyle(ee){this._ngStyle=ee,!this._differ&&ee&&(this._differ=this._differs.find(ee).create())}ngDoCheck(){if(this._differ){const ee=this._differ.diff(this._ngStyle);ee&&this._applyChanges(ee)}}_setStyle(ee,fe){const[it,Ht]=ee.split("."),Wt=-1===it.indexOf("-")?void 0:l.czy.DashCase;null!=fe?this._renderer.setStyle(this._ngEl.nativeElement,it,Ht?`${fe}${Ht}`:fe,Wt):this._renderer.removeStyle(this._ngEl.nativeElement,it,Wt)}_applyChanges(ee){ee.forEachRemovedItem(fe=>this._setStyle(fe.key,null)),ee.forEachAddedItem(fe=>this._setStyle(fe.key,fe.currentValue)),ee.forEachChangedItem(fe=>this._setStyle(fe.key,fe.currentValue))}static{this.\u0275fac=function(fe){return new(fe||A)(l.rXU(l.aKT),l.rXU(l.MKu),l.rXU(l.sFG))}}static{this.\u0275dir=l.FsC({type:A,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return A})(),vr=(()=>{class A{constructor(ee){this._viewContainerRef=ee,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(ee){if(this._shouldRecreateView(ee)){const fe=this._viewContainerRef;if(this._viewRef&&fe.remove(fe.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const it=this._createContextForwardProxy();this._viewRef=fe.createEmbeddedView(this.ngTemplateOutlet,it,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(ee){return!!ee.ngTemplateOutlet||!!ee.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(ee,fe,it)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,fe,it),get:(ee,fe,it)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,fe,it)}})}static{this.\u0275fac=function(fe){return new(fe||A)(l.rXU(l.c1b))}}static{this.\u0275dir=l.FsC({type:A,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[l.OA$]})}}return A})();const ga=new l.nKC(""),ca=new l.nKC("");let oo=(()=>{class A{constructor(ee,fe,it){this.locale=ee,this.defaultTimezone=fe,this.defaultOptions=it}transform(ee,fe,it,Ht){if(null==ee||""===ee||ee!=ee)return null;try{return Pi(ee,fe??this.defaultOptions?.dateFormat??"mediumDate",Ht||this.locale,it??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(Wt){throw function To(A,Se){return new l.wOt(2100,!1)}()}}static{this.\u0275fac=function(fe){return new(fe||A)(l.rXU(l.xe9,16),l.rXU(ga,24),l.rXU(ca,24))}}static{this.\u0275pipe=l.EJ8({name:"date",type:A,pure:!0,standalone:!0})}}return A})(),No=(()=>{class A{constructor(ee){this.differs=ee,this.keyValues=[],this.compareFn=Va}transform(ee,fe=Va){if(!ee||!(ee instanceof Map)&&"object"!=typeof ee)return null;this.differ??=this.differs.find(ee).create();const it=this.differ.diff(ee),Ht=fe!==this.compareFn;return it&&(this.keyValues=[],it.forEachItem(Wt=>{this.keyValues.push(function va(A,Se){return{key:A,value:Se}}(Wt.key,Wt.currentValue))})),(it||Ht)&&(this.keyValues.sort(fe),this.compareFn=fe),this.keyValues}static{this.\u0275fac=function(fe){return new(fe||A)(l.rXU(l.MKu,16))}}static{this.\u0275pipe=l.EJ8({name:"keyvalue",type:A,pure:!1,standalone:!0})}}return A})();function Va(A,Se){const ee=A.key,fe=Se.key;if(ee===fe)return 0;if(void 0===ee)return 1;if(void 0===fe)return-1;if(null===ee)return 1;if(null===fe)return-1;if("string"==typeof ee&&"string"==typeof fe)return ee<fe?-1:1;if("number"==typeof ee&&"number"==typeof fe)return ee-fe;if("boolean"==typeof ee&&"boolean"==typeof fe)return ee<fe?-1:1;const it=String(ee),Ht=String(fe);return it==Ht?0:it<Ht?-1:1}let ua=(()=>{class A{static{this.\u0275fac=function(fe){return new(fe||A)}}static{this.\u0275mod=l.$C({type:A})}static{this.\u0275inj=l.G2t({})}}return A})();const na="browser",Ha="server";function ya(A){return A===na}function Tc(A){return A===Ha}let Jl=(()=>{class A{static{this.\u0275prov=(0,l.jDH)({token:A,providedIn:"root",factory:()=>ya((0,l.WQX)(l.Agw))?new ks((0,l.WQX)(oe),window):new ba})}}return A})();class ks{constructor(Se,ee){this.document=Se,this.window=ee,this.offset=()=>[0,0]}setOffset(Se){this.offset=Array.isArray(Se)?()=>Se:Se}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(Se){this.window.scrollTo(Se[0],Se[1])}scrollToAnchor(Se){const ee=function da(A,Se){const ee=A.getElementById(Se)||A.getElementsByName(Se)[0];if(ee)return ee;if("function"==typeof A.createTreeWalker&&A.body&&"function"==typeof A.body.attachShadow){const fe=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let it=fe.currentNode;for(;it;){const Ht=it.shadowRoot;if(Ht){const Wt=Ht.getElementById(Se)||Ht.querySelector(`[name="${Se}"]`);if(Wt)return Wt}it=fe.nextNode()}}return null}(this.document,Se);ee&&(this.scrollToElement(ee),ee.focus())}setHistoryScrollRestoration(Se){this.window.history.scrollRestoration=Se}scrollToElement(Se){const ee=Se.getBoundingClientRect(),fe=ee.left+this.window.pageXOffset,it=ee.top+this.window.pageYOffset,Ht=this.offset();this.window.scrollTo(fe-Ht[0],it-Ht[1])}}class ba{setOffset(Se){}getScrollPosition(){return[0,0]}scrollToPosition(Se){}scrollToAnchor(Se){}setHistoryScrollRestoration(Se){}}class Po{}},1626:(Dt,qe,S)=>{"use strict";S.d(qe,{$R:()=>St,Lr:()=>ce,Qq:()=>Pt,ZZ:()=>$n,b$:()=>fn,cS:()=>Be,hv:()=>te,q1:()=>cs,yz:()=>Ne});var l=S(467),M=S(4438),h=S(7673),ge=S(1985),W=S(6648),X=S(274),oe=S(5964),H=S(6354),G=S(980),k=S(5558),P=S(177);class q{}class ne{}class ce{constructor($){this.normalizedNames=new Map,this.lazyUpdate=null,$?"string"==typeof $?this.lazyInit=()=>{this.headers=new Map,$.split("\n").forEach(ue=>{const Ze=ue.indexOf(":");if(Ze>0){const pt=ue.slice(0,Ze),en=pt.toLowerCase(),pn=ue.slice(Ze+1).trim();this.maybeSetNormalizedName(pt,en),this.headers.has(en)?this.headers.get(en).push(pn):this.headers.set(en,[pn])}})}:typeof Headers<"u"&&$ instanceof Headers?(this.headers=new Map,$.forEach((ue,Ze)=>{this.setHeaderEntries(Ze,ue)})):this.lazyInit=()=>{this.headers=new Map,Object.entries($).forEach(([ue,Ze])=>{this.setHeaderEntries(ue,Ze)})}:this.headers=new Map}has($){return this.init(),this.headers.has($.toLowerCase())}get($){this.init();const ue=this.headers.get($.toLowerCase());return ue&&ue.length>0?ue[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll($){return this.init(),this.headers.get($.toLowerCase())||null}append($,ue){return this.clone({name:$,value:ue,op:"a"})}set($,ue){return this.clone({name:$,value:ue,op:"s"})}delete($,ue){return this.clone({name:$,value:ue,op:"d"})}maybeSetNormalizedName($,ue){this.normalizedNames.has(ue)||this.normalizedNames.set(ue,$)}init(){this.lazyInit&&(this.lazyInit instanceof ce?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach($=>this.applyUpdate($)),this.lazyUpdate=null))}copyFrom($){$.init(),Array.from($.headers.keys()).forEach(ue=>{this.headers.set(ue,$.headers.get(ue)),this.normalizedNames.set(ue,$.normalizedNames.get(ue))})}clone($){const ue=new ce;return ue.lazyInit=this.lazyInit&&this.lazyInit instanceof ce?this.lazyInit:this,ue.lazyUpdate=(this.lazyUpdate||[]).concat([$]),ue}applyUpdate($){const ue=$.name.toLowerCase();switch($.op){case"a":case"s":let Ze=$.value;if("string"==typeof Ze&&(Ze=[Ze]),0===Ze.length)return;this.maybeSetNormalizedName($.name,ue);const pt=("a"===$.op?this.headers.get(ue):void 0)||[];pt.push(...Ze),this.headers.set(ue,pt);break;case"d":const en=$.value;if(en){let pn=this.headers.get(ue);if(!pn)return;pn=pn.filter(Vn=>-1===en.indexOf(Vn)),0===pn.length?(this.headers.delete(ue),this.normalizedNames.delete(ue)):this.headers.set(ue,pn)}else this.headers.delete(ue),this.normalizedNames.delete(ue)}}setHeaderEntries($,ue){const Ze=(Array.isArray(ue)?ue:[ue]).map(en=>en.toString()),pt=$.toLowerCase();this.headers.set(pt,Ze),this.maybeSetNormalizedName($,pt)}forEach($){this.init(),Array.from(this.normalizedNames.keys()).forEach(ue=>$(this.normalizedNames.get(ue),this.headers.get(ue)))}}class Ae{encodeKey($){return ze($)}encodeValue($){return ze($)}decodeKey($){return decodeURIComponent($)}decodeValue($){return decodeURIComponent($)}}const de=/%(\d[a-f0-9])/gi,Re={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ze(L){return encodeURIComponent(L).replace(de,($,ue)=>Re[ue]??$)}function Ge(L){return`${L}`}class Oe{constructor($={}){if(this.updates=null,this.cloneFrom=null,this.encoder=$.encoder||new Ae,$.fromString){if($.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function we(L,$){const ue=new Map;return L.length>0&&L.replace(/^\?/,"").split("&").forEach(pt=>{const en=pt.indexOf("="),[pn,Vn]=-1==en?[$.decodeKey(pt),""]:[$.decodeKey(pt.slice(0,en)),$.decodeValue(pt.slice(en+1))],ai=ue.get(pn)||[];ai.push(Vn),ue.set(pn,ai)}),ue}($.fromString,this.encoder)}else $.fromObject?(this.map=new Map,Object.keys($.fromObject).forEach(ue=>{const Ze=$.fromObject[ue],pt=Array.isArray(Ze)?Ze.map(Ge):[Ge(Ze)];this.map.set(ue,pt)})):this.map=null}has($){return this.init(),this.map.has($)}get($){this.init();const ue=this.map.get($);return ue?ue[0]:null}getAll($){return this.init(),this.map.get($)||null}keys(){return this.init(),Array.from(this.map.keys())}append($,ue){return this.clone({param:$,value:ue,op:"a"})}appendAll($){const ue=[];return Object.keys($).forEach(Ze=>{const pt=$[Ze];Array.isArray(pt)?pt.forEach(en=>{ue.push({param:Ze,value:en,op:"a"})}):ue.push({param:Ze,value:pt,op:"a"})}),this.clone(ue)}set($,ue){return this.clone({param:$,value:ue,op:"s"})}delete($,ue){return this.clone({param:$,value:ue,op:"d"})}toString(){return this.init(),this.keys().map($=>{const ue=this.encoder.encodeKey($);return this.map.get($).map(Ze=>ue+"="+this.encoder.encodeValue(Ze)).join("&")}).filter($=>""!==$).join("&")}clone($){const ue=new Oe({encoder:this.encoder});return ue.cloneFrom=this.cloneFrom||this,ue.updates=(this.updates||[]).concat($),ue}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach($=>this.map.set($,this.cloneFrom.map.get($))),this.updates.forEach($=>{switch($.op){case"a":case"s":const ue=("a"===$.op?this.map.get($.param):void 0)||[];ue.push(Ge($.value)),this.map.set($.param,ue);break;case"d":if(void 0===$.value){this.map.delete($.param);break}{let Ze=this.map.get($.param)||[];const pt=Ze.indexOf(Ge($.value));-1!==pt&&Ze.splice(pt,1),Ze.length>0?this.map.set($.param,Ze):this.map.delete($.param)}}}),this.cloneFrom=this.updates=null)}}class yt{constructor(){this.map=new Map}set($,ue){return this.map.set($,ue),this}get($){return this.map.has($)||this.map.set($,$.defaultValue()),this.map.get($)}delete($){return this.map.delete($),this}has($){return this.map.has($)}keys(){return this.map.keys()}}function ut(L){return typeof ArrayBuffer<"u"&&L instanceof ArrayBuffer}function ae(L){return typeof Blob<"u"&&L instanceof Blob}function x(L){return typeof FormData<"u"&&L instanceof FormData}class K{constructor($,ue,Ze,pt){let en;if(this.url=ue,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=$.toUpperCase(),function _t(L){switch(L){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||pt?(this.body=void 0!==Ze?Ze:null,en=pt):en=Ze,en&&(this.reportProgress=!!en.reportProgress,this.withCredentials=!!en.withCredentials,en.responseType&&(this.responseType=en.responseType),en.headers&&(this.headers=en.headers),en.context&&(this.context=en.context),en.params&&(this.params=en.params),this.transferCache=en.transferCache),this.headers??=new ce,this.context??=new yt,this.params){const pn=this.params.toString();if(0===pn.length)this.urlWithParams=ue;else{const Vn=ue.indexOf("?");this.urlWithParams=ue+(-1===Vn?"?":Vn<ue.length-1?"&":"")+pn}}else this.params=new Oe,this.urlWithParams=ue}serializeBody(){return null===this.body?null:"string"==typeof this.body||ut(this.body)||ae(this.body)||x(this.body)||function T(L){return typeof URLSearchParams<"u"&&L instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Oe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||x(this.body)?null:ae(this.body)?this.body.type||null:ut(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Oe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone($={}){const ue=$.method||this.method,Ze=$.url||this.url,pt=$.responseType||this.responseType,en=$.transferCache??this.transferCache,pn=void 0!==$.body?$.body:this.body,Vn=$.withCredentials??this.withCredentials,ai=$.reportProgress??this.reportProgress;let ur=$.headers||this.headers,Ei=$.params||this.params;const Yi=$.context??this.context;return void 0!==$.setHeaders&&(ur=Object.keys($.setHeaders).reduce((ns,Ls)=>ns.set(Ls,$.setHeaders[Ls]),ur)),$.setParams&&(Ei=Object.keys($.setParams).reduce((ns,Ls)=>ns.set(Ls,$.setParams[Ls]),Ei)),new K(ue,Ze,pn,{params:Ei,headers:ur,context:Yi,reportProgress:ai,responseType:pt,withCredentials:Vn,transferCache:en})}}var te=function(L){return L[L.Sent=0]="Sent",L[L.UploadProgress=1]="UploadProgress",L[L.ResponseHeader=2]="ResponseHeader",L[L.DownloadProgress=3]="DownloadProgress",L[L.Response=4]="Response",L[L.User=5]="User",L}(te||{});class ve{constructor($,ue=z.Ok,Ze="OK"){this.headers=$.headers||new ce,this.status=void 0!==$.status?$.status:ue,this.statusText=$.statusText||Ze,this.url=$.url||null,this.ok=this.status>=200&&this.status<300}}class Ce extends ve{constructor($={}){super($),this.type=te.ResponseHeader}clone($={}){return new Ce({headers:$.headers||this.headers,status:void 0!==$.status?$.status:this.status,statusText:$.statusText||this.statusText,url:$.url||this.url||void 0})}}class Be extends ve{constructor($={}){super($),this.type=te.Response,this.body=void 0!==$.body?$.body:null}clone($={}){return new Be({body:void 0!==$.body?$.body:this.body,headers:$.headers||this.headers,status:void 0!==$.status?$.status:this.status,statusText:$.statusText||this.statusText,url:$.url||this.url||void 0})}}class Ne extends ve{constructor($){super($,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${$.url||"(unknown url)"}`:`Http failure response for ${$.url||"(unknown url)"}: ${$.status} ${$.statusText}`,this.error=$.error||null}}var z=function(L){return L[L.Continue=100]="Continue",L[L.SwitchingProtocols=101]="SwitchingProtocols",L[L.Processing=102]="Processing",L[L.EarlyHints=103]="EarlyHints",L[L.Ok=200]="Ok",L[L.Created=201]="Created",L[L.Accepted=202]="Accepted",L[L.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",L[L.NoContent=204]="NoContent",L[L.ResetContent=205]="ResetContent",L[L.PartialContent=206]="PartialContent",L[L.MultiStatus=207]="MultiStatus",L[L.AlreadyReported=208]="AlreadyReported",L[L.ImUsed=226]="ImUsed",L[L.MultipleChoices=300]="MultipleChoices",L[L.MovedPermanently=301]="MovedPermanently",L[L.Found=302]="Found",L[L.SeeOther=303]="SeeOther",L[L.NotModified=304]="NotModified",L[L.UseProxy=305]="UseProxy",L[L.Unused=306]="Unused",L[L.TemporaryRedirect=307]="TemporaryRedirect",L[L.PermanentRedirect=308]="PermanentRedirect",L[L.BadRequest=400]="BadRequest",L[L.Unauthorized=401]="Unauthorized",L[L.PaymentRequired=402]="PaymentRequired",L[L.Forbidden=403]="Forbidden",L[L.NotFound=404]="NotFound",L[L.MethodNotAllowed=405]="MethodNotAllowed",L[L.NotAcceptable=406]="NotAcceptable",L[L.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",L[L.RequestTimeout=408]="RequestTimeout",L[L.Conflict=409]="Conflict",L[L.Gone=410]="Gone",L[L.LengthRequired=411]="LengthRequired",L[L.PreconditionFailed=412]="PreconditionFailed",L[L.PayloadTooLarge=413]="PayloadTooLarge",L[L.UriTooLong=414]="UriTooLong",L[L.UnsupportedMediaType=415]="UnsupportedMediaType",L[L.RangeNotSatisfiable=416]="RangeNotSatisfiable",L[L.ExpectationFailed=417]="ExpectationFailed",L[L.ImATeapot=418]="ImATeapot",L[L.MisdirectedRequest=421]="MisdirectedRequest",L[L.UnprocessableEntity=422]="UnprocessableEntity",L[L.Locked=423]="Locked",L[L.FailedDependency=424]="FailedDependency",L[L.TooEarly=425]="TooEarly",L[L.UpgradeRequired=426]="UpgradeRequired",L[L.PreconditionRequired=428]="PreconditionRequired",L[L.TooManyRequests=429]="TooManyRequests",L[L.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",L[L.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",L[L.InternalServerError=500]="InternalServerError",L[L.NotImplemented=501]="NotImplemented",L[L.BadGateway=502]="BadGateway",L[L.ServiceUnavailable=503]="ServiceUnavailable",L[L.GatewayTimeout=504]="GatewayTimeout",L[L.HttpVersionNotSupported=505]="HttpVersionNotSupported",L[L.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",L[L.InsufficientStorage=507]="InsufficientStorage",L[L.LoopDetected=508]="LoopDetected",L[L.NotExtended=510]="NotExtended",L[L.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",L}(z||{});function Fe(L,$){return{body:$,headers:L.headers,context:L.context,observe:L.observe,params:L.params,reportProgress:L.reportProgress,responseType:L.responseType,withCredentials:L.withCredentials,transferCache:L.transferCache}}let Pt=(()=>{class L{constructor(ue){this.handler=ue}request(ue,Ze,pt={}){let en;if(ue instanceof K)en=ue;else{let ai,ur;ai=pt.headers instanceof ce?pt.headers:new ce(pt.headers),pt.params&&(ur=pt.params instanceof Oe?pt.params:new Oe({fromObject:pt.params})),en=new K(ue,Ze,void 0!==pt.body?pt.body:null,{headers:ai,context:pt.context,params:ur,reportProgress:pt.reportProgress,responseType:pt.responseType||"json",withCredentials:pt.withCredentials,transferCache:pt.transferCache})}const pn=(0,h.of)(en).pipe((0,X.H)(ai=>this.handler.handle(ai)));if(ue instanceof K||"events"===pt.observe)return pn;const Vn=pn.pipe((0,oe.p)(ai=>ai instanceof Be));switch(pt.observe||"body"){case"body":switch(en.responseType){case"arraybuffer":return Vn.pipe((0,H.T)(ai=>{if(null!==ai.body&&!(ai.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ai.body}));case"blob":return Vn.pipe((0,H.T)(ai=>{if(null!==ai.body&&!(ai.body instanceof Blob))throw new Error("Response is not a Blob.");return ai.body}));case"text":return Vn.pipe((0,H.T)(ai=>{if(null!==ai.body&&"string"!=typeof ai.body)throw new Error("Response is not a string.");return ai.body}));default:return Vn.pipe((0,H.T)(ai=>ai.body))}case"response":return Vn;default:throw new Error(`Unreachable: unhandled observe type ${pt.observe}}`)}}delete(ue,Ze={}){return this.request("DELETE",ue,Ze)}get(ue,Ze={}){return this.request("GET",ue,Ze)}head(ue,Ze={}){return this.request("HEAD",ue,Ze)}jsonp(ue,Ze){return this.request("JSONP",ue,{params:(new Oe).append(Ze,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ue,Ze={}){return this.request("OPTIONS",ue,Ze)}patch(ue,Ze,pt={}){return this.request("PATCH",ue,Fe(pt,Ze))}post(ue,Ze,pt={}){return this.request("POST",ue,Fe(pt,Ze))}put(ue,Ze,pt={}){return this.request("PUT",ue,Fe(pt,Ze))}static{this.\u0275fac=function(Ze){return new(Ze||L)(M.KVO(q))}}static{this.\u0275prov=M.jDH({token:L,factory:L.\u0275fac})}}return L})();const ot=/^\)\]\}',?\n/;function vt(L){if(L.url)return L.url;const $="X-Request-URL".toLocaleLowerCase();return L.headers.get($)}let st=(()=>{class L{constructor(){this.fetchImpl=(0,M.WQX)(Ft,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=(0,M.WQX)(M.SKi)}handle(ue){return new ge.c(Ze=>{const pt=new AbortController;return this.doRequest(ue,pt.signal,Ze).then($e,en=>Ze.error(new Ne({error:en}))),()=>pt.abort()})}doRequest(ue,Ze,pt){var en=this;return(0,l.A)(function*(){const pn=en.createRequestInit(ue);let Vn;try{const fs=en.fetchImpl(ue.urlWithParams,{signal:Ze,...pn});(function Xe(L){L.then($e,$e)})(fs),pt.next({type:te.Sent}),Vn=yield fs}catch(fs){return void pt.error(new Ne({error:fs,status:fs.status??0,statusText:fs.statusText,url:ue.urlWithParams,headers:fs.headers}))}const ai=new ce(Vn.headers),ur=Vn.statusText,Ei=vt(Vn)??ue.urlWithParams;let Yi=Vn.status,ns=null;if(ue.reportProgress&&pt.next(new Ce({headers:ai,status:Yi,statusText:ur,url:Ei})),Vn.body){const fs=Vn.headers.get("content-length"),Pr=[],Tr=Vn.body.getReader();let eo,ws,Is=0;const ro=typeof Zone<"u"&&Zone.current;yield en.ngZone.runOutsideAngular((0,l.A)(function*(){for(;;){const{done:ea,value:Gi}=yield Tr.read();if(ea)break;if(Pr.push(Gi),Is+=Gi.length,ue.reportProgress){ws="text"===ue.responseType?(ws??"")+(eo??=new TextDecoder).decode(Gi,{stream:!0}):void 0;const vr=()=>pt.next({type:te.DownloadProgress,total:fs?+fs:void 0,loaded:Is,partialText:ws});ro?ro.run(vr):vr()}}}));const Vo=en.concatChunks(Pr,Is);try{const ea=Vn.headers.get("Content-Type")??"";ns=en.parseBody(ue,Vo,ea)}catch(ea){return void pt.error(new Ne({error:ea,headers:new ce(Vn.headers),status:Vn.status,statusText:Vn.statusText,url:vt(Vn)??ue.urlWithParams}))}}0===Yi&&(Yi=ns?z.Ok:0),Yi>=200&&Yi<300?(pt.next(new Be({body:ns,headers:ai,status:Yi,statusText:ur,url:Ei})),pt.complete()):pt.error(new Ne({error:ns,headers:ai,status:Yi,statusText:ur,url:Ei}))})()}parseBody(ue,Ze,pt){switch(ue.responseType){case"json":const en=(new TextDecoder).decode(Ze).replace(ot,"");return""===en?null:JSON.parse(en);case"text":return(new TextDecoder).decode(Ze);case"blob":return new Blob([Ze],{type:pt});case"arraybuffer":return Ze.buffer}}createRequestInit(ue){const Ze={},pt=ue.withCredentials?"include":void 0;if(ue.headers.forEach((en,pn)=>Ze[en]=pn.join(",")),Ze.Accept??="application/json, text/plain, */*",!Ze["Content-Type"]){const en=ue.detectContentTypeHeader();null!==en&&(Ze["Content-Type"]=en)}return{body:ue.serializeBody(),method:ue.method,headers:Ze,credentials:pt}}concatChunks(ue,Ze){const pt=new Uint8Array(Ze);let en=0;for(const pn of ue)pt.set(pn,en),en+=pn.length;return pt}static{this.\u0275fac=function(Ze){return new(Ze||L)}}static{this.\u0275prov=M.jDH({token:L,factory:L.\u0275fac})}}return L})();class Ft{}function $e(){}function kt(L,$){return $(L)}function cn(L,$){return(ue,Ze)=>$.intercept(ue,{handle:pt=>L(pt,Ze)})}const gn=new M.nKC(""),Xt=new M.nKC(""),hn=new M.nKC(""),ct=new M.nKC("");function Ot(){let L=null;return($,ue)=>{null===L&&(L=((0,M.WQX)(gn,{optional:!0})??[]).reduceRight(cn,kt));const Ze=(0,M.WQX)(M.TgB),pt=Ze.add();return L($,ue).pipe((0,G.j)(()=>Ze.remove(pt)))}}let Fn=(()=>{class L extends q{constructor(ue,Ze){super(),this.backend=ue,this.injector=Ze,this.chain=null,this.pendingTasks=(0,M.WQX)(M.TgB);const pt=(0,M.WQX)(ct,{optional:!0});this.backend=pt??ue}handle(ue){if(null===this.chain){const pt=Array.from(new Set([...this.injector.get(Xt),...this.injector.get(hn,[])]));this.chain=pt.reduceRight((en,pn)=>function rn(L,$,ue){return(Ze,pt)=>(0,M.N4e)(ue,()=>$(Ze,en=>L(en,pt)))}(en,pn,this.injector),kt)}const Ze=this.pendingTasks.add();return this.chain(ue,pt=>this.backend.handle(pt)).pipe((0,G.j)(()=>this.pendingTasks.remove(Ze)))}static{this.\u0275fac=function(Ze){return new(Ze||L)(M.KVO(ne),M.KVO(M.uvJ))}}static{this.\u0275prov=M.jDH({token:L,factory:L.\u0275fac})}}return L})();const uo=/^\)\]\}',?\n/;let cr=(()=>{class L{constructor(ue){this.xhrFactory=ue}handle(ue){if("JSONP"===ue.method)throw new M.wOt(-2800,!1);const Ze=this.xhrFactory;return(Ze.\u0275loadImpl?(0,W.H)(Ze.\u0275loadImpl()):(0,h.of)(null)).pipe((0,k.n)(()=>new ge.c(en=>{const pn=Ze.build();if(pn.open(ue.method,ue.urlWithParams),ue.withCredentials&&(pn.withCredentials=!0),ue.headers.forEach((Pr,Tr)=>pn.setRequestHeader(Pr,Tr.join(","))),ue.headers.has("Accept")||pn.setRequestHeader("Accept","application/json, text/plain, */*"),!ue.headers.has("Content-Type")){const Pr=ue.detectContentTypeHeader();null!==Pr&&pn.setRequestHeader("Content-Type",Pr)}if(ue.responseType){const Pr=ue.responseType.toLowerCase();pn.responseType="json"!==Pr?Pr:"text"}const Vn=ue.serializeBody();let ai=null;const ur=()=>{if(null!==ai)return ai;const Pr=pn.statusText||"OK",Tr=new ce(pn.getAllResponseHeaders()),Is=function Yn(L){return"responseURL"in L&&L.responseURL?L.responseURL:/^X-Request-URL:/m.test(L.getAllResponseHeaders())?L.getResponseHeader("X-Request-URL"):null}(pn)||ue.url;return ai=new Ce({headers:Tr,status:pn.status,statusText:Pr,url:Is}),ai},Ei=()=>{let{headers:Pr,status:Tr,statusText:Is,url:eo}=ur(),ws=null;Tr!==z.NoContent&&(ws=typeof pn.response>"u"?pn.responseText:pn.response),0===Tr&&(Tr=ws?z.Ok:0);let ro=Tr>=200&&Tr<300;if("json"===ue.responseType&&"string"==typeof ws){const Vo=ws;ws=ws.replace(uo,"");try{ws=""!==ws?JSON.parse(ws):null}catch(ea){ws=Vo,ro&&(ro=!1,ws={error:ea,text:ws})}}ro?(en.next(new Be({body:ws,headers:Pr,status:Tr,statusText:Is,url:eo||void 0})),en.complete()):en.error(new Ne({error:ws,headers:Pr,status:Tr,statusText:Is,url:eo||void 0}))},Yi=Pr=>{const{url:Tr}=ur(),Is=new Ne({error:Pr,status:pn.status||0,statusText:pn.statusText||"Unknown Error",url:Tr||void 0});en.error(Is)};let ns=!1;const Ls=Pr=>{ns||(en.next(ur()),ns=!0);let Tr={type:te.DownloadProgress,loaded:Pr.loaded};Pr.lengthComputable&&(Tr.total=Pr.total),"text"===ue.responseType&&pn.responseText&&(Tr.partialText=pn.responseText),en.next(Tr)},fs=Pr=>{let Tr={type:te.UploadProgress,loaded:Pr.loaded};Pr.lengthComputable&&(Tr.total=Pr.total),en.next(Tr)};return pn.addEventListener("load",Ei),pn.addEventListener("error",Yi),pn.addEventListener("timeout",Yi),pn.addEventListener("abort",Yi),ue.reportProgress&&(pn.addEventListener("progress",Ls),null!==Vn&&pn.upload&&pn.upload.addEventListener("progress",fs)),pn.send(Vn),en.next({type:te.Sent}),()=>{pn.removeEventListener("error",Yi),pn.removeEventListener("abort",Yi),pn.removeEventListener("load",Ei),pn.removeEventListener("timeout",Yi),ue.reportProgress&&(pn.removeEventListener("progress",Ls),null!==Vn&&pn.upload&&pn.upload.removeEventListener("progress",fs)),pn.readyState!==pn.DONE&&pn.abort()}})))}static{this.\u0275fac=function(Ze){return new(Ze||L)(M.KVO(P.N0))}}static{this.\u0275prov=M.jDH({token:L,factory:L.\u0275fac})}}return L})();const mr=new M.nKC(""),Ir=new M.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),gr=new M.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Zr{}let ls=(()=>{class L{constructor(ue,Ze,pt){this.doc=ue,this.platform=Ze,this.cookieName=pt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ue=this.doc.cookie||"";return ue!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,P._b)(ue,this.cookieName),this.lastCookieString=ue),this.lastToken}static{this.\u0275fac=function(Ze){return new(Ze||L)(M.KVO(P.qQ),M.KVO(M.Agw),M.KVO(Ir))}}static{this.\u0275prov=M.jDH({token:L,factory:L.\u0275fac})}}return L})();function ar(L,$){const ue=L.url.toLowerCase();if(!(0,M.WQX)(mr)||"GET"===L.method||"HEAD"===L.method||ue.startsWith("http://")||ue.startsWith("https://"))return $(L);const Ze=(0,M.WQX)(Zr).getToken(),pt=(0,M.WQX)(gr);return null!=Ze&&!L.headers.has(pt)&&(L=L.clone({headers:L.headers.set(pt,Ze)})),$(L)}var zt=function(L){return L[L.Interceptors=0]="Interceptors",L[L.LegacyInterceptors=1]="LegacyInterceptors",L[L.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",L[L.NoXsrfProtection=3]="NoXsrfProtection",L[L.JsonpSupport=4]="JsonpSupport",L[L.RequestsMadeViaParent=5]="RequestsMadeViaParent",L[L.Fetch=6]="Fetch",L}(zt||{});function at(L,$){return{\u0275kind:L,\u0275providers:$}}function St(...L){const $=[Pt,cr,Fn,{provide:q,useExisting:Fn},{provide:ne,useExisting:cr},{provide:Xt,useValue:ar,multi:!0},{provide:mr,useValue:!0},{provide:Zr,useClass:ls}];for(const ue of L)$.push(...ue.\u0275providers);return(0,M.EmA)($)}function fn(L){return at(zt.Interceptors,L.map($=>({provide:Xt,useValue:$,multi:!0})))}const vn=new M.nKC("");function $n(){return at(zt.Fetch,[st,{provide:ne,useExisting:st},{provide:ct,useExisting:st}])}let cs=(()=>{class L{static{this.\u0275fac=function(Ze){return new(Ze||L)}}static{this.\u0275mod=M.$C({type:L})}static{this.\u0275inj=M.G2t({providers:[St(at(zt.LegacyInterceptors,[{provide:vn,useFactory:Ot},{provide:Xt,useExisting:vn,multi:!0}]))]})}}return L})()},4438:(Dt,qe,S)=>{"use strict";function M(t,i){return Object.is(t,i)}S.d(qe,{bc$:()=>Ao,iLQ:()=>Hx,sZ2:()=>xs,hnV:()=>cC,o8S:()=>rf,BIS:()=>Io,gRc:()=>xC,Ql9:()=>DA,OM3:()=>ip,Ocv:()=>LA,abz:()=>nd,Z63:()=>dl,aKT:()=>wh,uvJ:()=>bo,zcH:()=>Bc,bkB:()=>Xc,$GK:()=>_r,nKC:()=>pt,zZn:()=>cc,_q3:()=>Qx,MKu:()=>Yx,xe9:()=>qy,Co$:()=>Cy,Vns:()=>rh,SKi:()=>Bo,Xx1:()=>ya,Agw:()=>Es,PLl:()=>Wr,sFG:()=>Zh,_9s:()=>iu,czy:()=>Oh,WPN:()=>Bd,kdw:()=>Ka,C4Q:()=>ep,NYb:()=>xA,giA:()=>aC,RxE:()=>JM,c1b:()=>ap,gXe:()=>ha,mal:()=>k0,Af3:()=>Nn,tdH:()=>F0,L39:()=>A2,EWP:()=>R2,a0P:()=>k2,Ol2:()=>u,w6W:()=>tx,QZP:()=>ZC,Rfq:()=>ar,oKB:()=>fi,WQX:()=>$i,hFB:()=>Iv,QuC:()=>Z,EmA:()=>Bi,CGW:()=>Dv,HJs:()=>B2,N4e:()=>Kt,vPA:()=>Ob,O8t:()=>N2,ebz:()=>$0,An2:()=>qh,H3F:()=>eC,H8p:()=>Ga,KH2:()=>nm,TgB:()=>V,wOt:()=>It,WHO:()=>sC,e01:()=>oC,lNU:()=>Ot,h9k:()=>s_,$MX:()=>Jp,ZF7:()=>Nh,Kcf:()=>E1,e5t:()=>w1,UyX:()=>M1,cWb:()=>S1,osQ:()=>C1,H5H:()=>yx,Zy3:()=>an,mq5:()=>sS,JZv:()=>Yn,TL3:()=>p2,LfX:()=>Us,plB:()=>_d,jNT:()=>Ux,zjR:()=>lC,ngT:()=>fc,TL$:()=>ds,Tbb:()=>Kr,rcV:()=>Du,nM4:()=>by,Vt3:()=>dp,Mj6:()=>Bs,GFd:()=>My,OA$:()=>rc,Jv_:()=>xM,aNF:()=>EM,R7$:()=>dd,BMQ:()=>So,HbH:()=>UE,ZvI:()=>jE,AVh:()=>ux,vxM:()=>YE,wni:()=>KS,nv$:()=>_u,T$4:()=>zc,qhs:()=>Py,VBU:()=>Zo,FsC:()=>Rs,jDH:()=>ir,G2t:()=>Mo,$C:()=>Ea,EJ8:()=>$l,rXU:()=>zd,nrm:()=>gx,bVm:()=>Uy,qex:()=>By,k0s:()=>ky,j41:()=>Ly,RV6:()=>rS,xGo:()=>xh,Mr5:()=>vx,pXf:()=>NS,KVO:()=>ao,kS0:()=>Mh,QTQ:()=>T_,bIt:()=>Ex,lsd:()=>qS,XpG:()=>kS,nI1:()=>OM,bMT:()=>FM,i5U:()=>LM,SdG:()=>US,NAR:()=>BS,Y8G:()=>ax,FS9:()=>Mx,Mz_:()=>Wy,lJ4:()=>MM,eq3:()=>CM,l_i:()=>wM,sMw:()=>TM,ziG:()=>DM,NyB:()=>JS,mGM:()=>YS,sdS:()=>eM,Dyx:()=>eS,Z7z:()=>JE,fX1:()=>ZE,Vm6:()=>qE,Njj:()=>Fo,tSv:()=>h_,eBV:()=>no,npT:()=>o_,f$h:()=>Xm,B4B:()=>jm,n$t:()=>Km,xc7:()=>cx,zvX:()=>_x,DNE:()=>Nt,C5r:()=>kM,EFF:()=>uM,JRh:()=>Cx,SpI:()=>$y,Lme:()=>wx,DH7:()=>yM,mxI:()=>Dx,R50:()=>Tx,GBs:()=>QS,wEZ:()=>ZS}),S(467);let h=null,ge=!1,W=1;const X=Symbol("SIGNAL");function oe(t){const i=h;return h=t,i}const P={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function q(t){if(ge)throw new Error("");if(null===h)return;h.consumerOnSignalRead(t);const i=h.nextProducerIndex++;_t(h),i<h.producerNode.length&&h.producerNode[i]!==t&&yt(h)&&Ye(h.producerNode[i],h.producerIndexOfThis[i]),h.producerNode[i]!==t&&(h.producerNode[i]=t,h.producerIndexOfThis[i]=yt(h)?Oe(t,h,i):0),h.producerLastReadVersion[i]=t.version}function ce(t){if((!yt(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==W)){if(!t.producerMustRecompute(t)&&!ze(t))return t.dirty=!1,void(t.lastCleanEpoch=W);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=W}}function he(t){if(void 0===t.liveConsumerNode)return;const i=ge;ge=!0;try{for(const r of t.liveConsumerNode)r.dirty||we(r)}finally{ge=i}}function Ae(){return!1!==h?.consumerAllowSignalWrites}function we(t){t.dirty=!0,he(t),t.consumerMarkedDirty?.(t)}function de(t){return t&&(t.nextProducerIndex=0),oe(t)}function Re(t,i){if(oe(i),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(yt(t))for(let r=t.nextProducerIndex;r<t.producerNode.length;r++)Ye(t.producerNode[r],t.producerIndexOfThis[r]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ze(t){_t(t);for(let i=0;i<t.producerNode.length;i++){const r=t.producerNode[i],o=t.producerLastReadVersion[i];if(o!==r.version||(ce(r),o!==r.version))return!0}return!1}function Ge(t){if(_t(t),yt(t))for(let i=0;i<t.producerNode.length;i++)Ye(t.producerNode[i],t.producerIndexOfThis[i]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Oe(t,i,r){if(ut(t),_t(t),0===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)t.producerIndexOfThis[o]=Oe(t.producerNode[o],t,o);return t.liveConsumerIndexOfThis.push(r),t.liveConsumerNode.push(i)-1}function Ye(t,i){if(ut(t),_t(t),1===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)Ye(t.producerNode[o],t.producerIndexOfThis[o]);const r=t.liveConsumerNode.length-1;if(t.liveConsumerNode[i]=t.liveConsumerNode[r],t.liveConsumerIndexOfThis[i]=t.liveConsumerIndexOfThis[r],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,i<t.liveConsumerNode.length){const o=t.liveConsumerIndexOfThis[i],d=t.liveConsumerNode[i];_t(d),d.producerIndexOfThis[o]=i}}function yt(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function _t(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function ut(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function ae(t){const i=Object.create(te);i.computation=t;const r=()=>{if(ce(i),q(i),i.value===K)throw i.error;return i.value};return r[X]=i,r}const x=Symbol("UNSET"),T=Symbol("COMPUTING"),K=Symbol("ERRORED"),te={...P,value:x,dirty:!0,error:null,equal:M,producerMustRecompute:t=>t.value===x||t.value===T,producerRecomputeValue(t){if(t.value===T)throw new Error("Detected cycle in computations.");const i=t.value;t.value=T;const r=de(t);let o;try{o=t.computation()}catch(d){o=K,t.error=d}finally{Re(t,r)}i!==x&&i!==K&&o!==K&&t.equal(i,o)?t.value=i:(t.value=o,t.version++)}};let Ce=function ve(){throw new Error};function Be(){Ce()}let z=null;function Vt(t,i){Ae()||Be(),t.equal(t.value,i)||(t.value=i,function Ft(t){t.version++,function ne(){W++}(),he(t),z?.()}(t))}const st={...P,equal:M,value:void 0};const Xe=()=>{},kt={...P,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{null!==t.schedule&&t.schedule(t.ref)},hasRun:!1,cleanupFn:Xe};var rn=S(1413),gn=S(8359),Xt=S(4412),hn=S(6354);const Ot="https://g.co/ng/security#xss";class It extends Error{constructor(i,r){super(an(i,r)),this.code=i}}function an(t,i){return`NG0${Math.abs(t)}${i?": "+i:""}`}const Fn=Symbol("InputSignalNode#UNSET"),Xn={...st,transformFn:void 0,applyValueToInputSignal(t,i){Vt(t,i)}};function Hn(t,i){const r=Object.create(Xn);function o(){if(q(r),r.value===Fn)throw new It(-950,!1);return r.value}return r.value=t,r.transformFn=i?.transform,o[X]=r,o}function Dn(t){return{toString:t}.toString()}const Pi="__parameters__";function yi(t,i,r){return Dn(()=>{const o=function ii(t){return function(...r){if(t){const o=t(...r);for(const d in o)this[d]=o[d]}}}(i);function d(...g){if(this instanceof d)return o.apply(this,g),this;const y=new d(...g);return C.annotation=y,C;function C(B,pe,Ie){const Je=B.hasOwnProperty(Pi)?B[Pi]:Object.defineProperty(B,Pi,{value:[]})[Pi];for(;Je.length<=Ie;)Je.push(null);return(Je[Ie]=Je[Ie]||[]).push(y),B}}return r&&(d.prototype=Object.create(r.prototype)),d.prototype.ngMetadataName=t,d.annotationCls=d,d})}const Yn=globalThis;function Si(t){for(let i in t)if(t[i]===Si)return i;throw Error("Could not find renamed property on target object.")}function Ir(t,i){for(const r in i)i.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=i[r])}function Kr(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Kr).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const i=t.toString();if(null==i)return""+i;const r=i.indexOf("\n");return-1===r?i:i.substring(0,r)}function gr(t,i){return null==t||""===t?null===i?"":i:null==i||""===i?t:t+" "+i}const ls=Si({__forward_ref__:Si});function ar(t){return t.__forward_ref__=ar,t.toString=function(){return Kr(this())},t}function Rt(t){return zt(t)?t():t}function zt(t){return"function"==typeof t&&t.hasOwnProperty(ls)&&t.__forward_ref__===ar}function Kn(t,i,r,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${r} ${o} ${i} <=Actual]`))}function ir(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Mo(t){return{providers:t.providers||[],imports:t.imports||[]}}function As(t){return vs(t,L)||vs(t,ue)}function Us(t){return null!==As(t)}function vs(t,i){return t.hasOwnProperty(i)?t[i]:null}function Qe(t){return t&&(t.hasOwnProperty($)||t.hasOwnProperty(Ze))?t[$]:null}const L=Si({\u0275prov:Si}),$=Si({\u0275inj:Si}),ue=Si({ngInjectableDef:Si}),Ze=Si({ngInjectorDef:Si});class pt{constructor(i,r){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=ir({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Pr(t){return t&&!!t.\u0275providers}const Tr=Si({\u0275cmp:Si}),Is=Si({\u0275dir:Si}),eo=Si({\u0275pipe:Si}),ws=Si({\u0275mod:Si}),ro=Si({\u0275fac:Si}),Vo=Si({__NG_ELEMENT_ID__:Si}),ea=Si({__NG_ENV_ID__:Si});function Gi(t){return"string"==typeof t?t:null==t?"":String(t)}function ja(t,i){throw new It(-201,!1)}var _r=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(_r||{});let ka;function ma(){return ka}function yo(t){const i=ka;return ka=t,i}function Qo(t,i,r){const o=As(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:r&_r.Optional?null:void 0!==i?i:void ja()}const ca={},oo="__NG_DI_FLAG__",Ro="ngTempTokenPath",Ua=/\n/gm,va="__source";let No;function ta(t){const i=No;return No=t,i}function zl(t,i=_r.Default){if(void 0===No)throw new It(-203,!1);return null===No?Qo(t,void 0,i):No.get(t,i&_r.Optional?null:void 0,i)}function ao(t,i=_r.Default){return(ma()||zl)(Rt(t),i)}function $i(t,i=_r.Default){return ao(t,Xa(i))}function Xa(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function _a(t){const i=[];for(let r=0;r<t.length;r++){const o=Rt(t[r]);if(Array.isArray(o)){if(0===o.length)throw new It(900,!1);let d,g=_r.Default;for(let y=0;y<o.length;y++){const C=o[y],B=na(C);"number"==typeof B?-1===B?d=C.token:g|=B:d=C}i.push(ao(d,g))}else i.push(ao(o))}return i}function ua(t,i){return t[oo]=i,t.prototype[oo]=i,t}function na(t){return t[oo]}const ya=ua(yi("Optional"),8),Ka=ua(yi("SkipSelf"),4);function Qs(t,i){return t.hasOwnProperty(ro)?t[ro]:null}function da(t,i){t.forEach(r=>Array.isArray(r)?da(r,i):i(r))}function ba(t,i,r){i>=t.length?t.push(r):t.splice(i,0,r)}function Po(t,i){return i>=t.length-1?t.pop():t.splice(i,1)[0]}function Tl(t,i,r){const o=t.length-r;for(;i<o;)t[i]=t[i+r],i++;for(;r--;)t.pop()}function Gl(t,i,r,o){let d=t.length;if(d==i)t.push(r,o);else if(1===d)t.push(o,t[0]),t[0]=r;else{for(d--,t.push(t[d-1],t[d]);d>i;)t[d]=t[d-2],d--;t[i]=r,t[i+1]=o}}function qo(t,i,r){let o=ia(t,i);return o>=0?t[1|o]=r:(o=~o,Gl(t,o,i,r)),o}function ul(t,i){const r=ia(t,i);if(r>=0)return t[1|r]}function ia(t,i){return function Ja(t,i,r){let o=0,d=t.length>>r;for(;d!==o;){const g=o+(d-o>>1),y=t[g<<r];if(i===y)return g<<r;y>i?d=g:o=g+1}return~(d<<r)}(t,i,1)}const zo={},Jr=[],dl=new pt(""),ec=new pt("",-1),Da=new pt("");class Ys{get(i,r=ca){if(r===ca){const o=new Error(`NullInjectorError: No provider for ${Kr(i)}!`);throw o.name="NullInjectorError",o}return r}}var hl=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(hl||{}),ha=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ha||{}),Bs=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Bs||{});function za(t,i,r){let o=t.length;for(;;){const d=t.indexOf(i,r);if(-1===d)return d;if(0===d||t.charCodeAt(d-1)<=32){const g=i.length;if(d+g===o||t.charCodeAt(d+g)<=32)return d}r=d+1}}function Dl(t,i,r){let o=0;for(;o<r.length;){const d=r[o];if("number"==typeof d){if(0!==d)break;o++;const g=r[o++],y=r[o++],C=r[o++];t.setAttribute(i,y,C,g)}else{const g=d,y=r[++o];Ee(g)?t.setProperty(i,g,y):t.setAttribute(i,g,y),o++}}return o}function xe(t){return 3===t||4===t||6===t}function Ee(t){return 64===t.charCodeAt(0)}function ie(t,i){if(null!==i&&0!==i.length)if(null===t||0===t.length)t=i.slice();else{let r=-1;for(let o=0;o<i.length;o++){const d=i[o];"number"==typeof d?r=d:0===r||We(t,r,d,null,-1===r||2===r?i[++o]:null)}}return t}function We(t,i,r,o,d){let g=0,y=t.length;if(-1===i)y=-1;else for(;g<t.length;){const C=t[g++];if("number"==typeof C){if(C===i){y=-1;break}if(C>i){y=g-1;break}}}for(;g<t.length;){const C=t[g];if("number"==typeof C)break;if(C===r){if(null===o)return void(null!==d&&(t[g+1]=d));if(o===t[g+1])return void(t[g+2]=d)}g++,null!==o&&g++,null!==d&&g++}-1!==y&&(t.splice(y,0,i),g=y+1),t.splice(g++,0,r),null!==o&&t.splice(g++,0,o),null!==d&&t.splice(g++,0,d)}const wt="ng-template";function wi(t,i,r,o){let d=0;if(o){for(;d<i.length&&"string"==typeof i[d];d+=2)if("class"===i[d]&&-1!==za(i[d+1].toLowerCase(),r,0))return!0}else if(Dr(t))return!1;if(d=i.indexOf(1,d),d>-1){let g;for(;++d<i.length&&"string"==typeof(g=i[d]);)if(g.toLowerCase()===r)return!0}return!1}function Dr(t){return 4===t.type&&t.value!==wt}function el(t,i,r){return i===(4!==t.type||r?t.value:wt)}function tc(t,i,r){let o=4;const d=t.attrs,g=null!==d?function ou(t){for(let i=0;i<t.length;i++)if(xe(t[i]))return i;return t.length}(d):0;let y=!1;for(let C=0;C<i.length;C++){const B=i[C];if("number"!=typeof B){if(!y)if(4&o){if(o=2|1&o,""!==B&&!el(t,B,r)||""===B&&1===i.length){if(ra(o))return!1;y=!0}}else if(8&o){if(null===d||!wi(t,d,B,r)){if(ra(o))return!1;y=!0}}else{const pe=i[++C],Ie=Al(B,d,Dr(t),r);if(-1===Ie){if(ra(o))return!1;y=!0;continue}if(""!==pe){let Je;if(Je=Ie>g?"":d[Ie+1].toLowerCase(),2&o&&pe!==Je){if(ra(o))return!1;y=!0}}}}else{if(!y&&!ra(o)&&!ra(B))return!1;if(y&&ra(B))continue;y=!1,o=B|1&o}}return ra(o)||y}function ra(t){return!(1&t)}function Al(t,i,r,o){if(null===i)return-1;let d=0;if(o||!r){let g=!1;for(;d<i.length;){const y=i[d];if(y===t)return d;if(3===y||6===y)g=!0;else{if(1===y||2===y){let C=i[++d];for(;"string"==typeof C;)C=i[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=g?1:2}return-1}return function Vs(t,i){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){const o=t[r];if("number"==typeof o)return-1;if(o===i)return r;r++}return-1}(i,t)}function Wl(t,i,r=!1){for(let o=0;o<i.length;o++)if(tc(t,i[o],r))return!0;return!1}function bu(t,i){e:for(let r=0;r<i.length;r++){const o=i[r];if(t.length===o.length){for(let d=0;d<t.length;d++)if(t[d]!==o[d])continue e;return!0}}return!1}function Ac(t,i){return t?":not("+i.trim()+")":i}function fl(t){let i=t[0],r=1,o=2,d="",g=!1;for(;r<t.length;){let y=t[r];if("string"==typeof y)if(2&o){const C=t[++r];d+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&o?d+="."+y:4&o&&(d+=" "+y);else""!==d&&!ra(y)&&(i+=Ac(g,d),d=""),o=y,g=g||!ra(o);r++}return""!==d&&(i+=Ac(g,d)),i}function Zo(t){return Dn(()=>{const i=ke(t),r={...i,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===hl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ha.Emulated,styles:t.styles||Jr,_:null,schemas:t.schemas||null,tView:null,id:""};dt(r);const o=t.dependencies;return r.directiveDefs=Lt(o,!1),r.pipeDefs=Lt(o,!0),r.id=function li(t){let i=0;const r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const d of r)i=Math.imul(31,i)+d.charCodeAt(0)|0;return i+=2147483648,"c"+i}(r),r})}function Ic(t){return zr(t)||nt(t)}function ml(t){return null!==t}function Ea(t){return Dn(()=>({type:t.type,bootstrap:t.bootstrap||Jr,declarations:t.declarations||Jr,imports:t.imports||Jr,exports:t.exports||Jr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Go(t,i){if(null==t)return zo;const r={};for(const o in t)if(t.hasOwnProperty(o)){const d=t[o];let g,y,C=Bs.None;Array.isArray(d)?(C=d[0],g=d[1],y=d[2]??g):(g=d,y=d),i?(r[g]=C!==Bs.None?[o,C]:o,i[g]=y):r[g]=o}return r}function Rs(t){return Dn(()=>{const i=ke(t);return dt(i),i})}function $l(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function zr(t){return t[Tr]||null}function nt(t){return t[Is]||null}function Me(t){return t[eo]||null}function Z(t){const i=zr(t)||nt(t)||Me(t);return null!==i&&i.standalone}function me(t,i){const r=t[ws]||null;if(!r&&!0===i)throw new Error(`Type ${Kr(t)} does not have '\u0275mod' property.`);return r}function ke(t){const i={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputTransforms:null,inputConfig:t.inputs||zo,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Jr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Go(t.inputs,i),outputs:Go(t.outputs),debugInfo:null}}function dt(t){t.features?.forEach(i=>i(t))}function Lt(t,i){if(!t)return null;const r=i?Me:Ic;return()=>("function"==typeof t?t():t).map(o=>r(o)).filter(ml)}function Bi(t){return{\u0275providers:t}}function fi(...t){return{\u0275providers:fr(0,t),\u0275fromNgModule:!0}}function fr(t,...i){const r=[],o=new Set;let d;const g=y=>{r.push(y)};return da(i,y=>{const C=y;Gs(C,g,[],o)&&(d||=[],d.push(C))}),void 0!==d&&Ns(d,g),r}function Ns(t,i){for(let r=0;r<t.length;r++){const{ngModule:o,providers:d}=t[r];fa(d,g=>{i(g,o)})}}function Gs(t,i,r,o){if(!(t=Rt(t)))return!1;let d=null,g=Qe(t);const y=!g&&zr(t);if(g||y){if(y&&!y.standalone)return!1;d=t}else{const B=t.ngModule;if(g=Qe(B),!g)return!1;d=B}const C=o.has(d);if(y){if(C)return!1;if(o.add(d),y.dependencies){const B="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const pe of B)Gs(pe,i,r,o)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let pe;o.add(d);try{da(g.imports,Ie=>{Gs(Ie,i,r,o)&&(pe||=[],pe.push(Ie))})}finally{}void 0!==pe&&Ns(pe,i)}if(!C){const pe=Qs(d)||(()=>new d);i({provide:d,useFactory:pe,deps:Jr},d),i({provide:Da,useValue:d,multi:!0},d),i({provide:dl,useValue:()=>ao(d),multi:!0},d)}const B=g.providers;if(null!=B&&!C){const pe=t;fa(B,Ie=>{i(Ie,pe)})}}}return d!==t&&void 0!==t.providers}function fa(t,i){for(let r of t)Pr(r)&&(r=r.\u0275providers),Array.isArray(r)?fa(r,i):i(r)}const Ws=Si({provide:String,useValue:Si});function yr(t){return null!==t&&"object"==typeof t&&Ws in t}function Ti(t){return"function"==typeof t}const Ga=new pt(""),Qa={},jl={};let gl;function Xl(){return void 0===gl&&(gl=new Ys),gl}class bo{}class Aa extends bo{get destroyed(){return this._destroyed}constructor(i,r,o,d){super(),this.parent=r,this.source=o,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mt(i,y=>this.processProvider(y)),this.records.set(ec,re(void 0,this)),d.has("environment")&&this.records.set(bo,re(void 0,this));const g=this.records.get(Ga);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Da,Jr,_r.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const i=oe(null);try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const o of r)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(i)}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();const r=ta(this),o=yo(void 0);try{return i()}finally{ta(r),yo(o)}}get(i,r=ca,o=_r.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(ea))return i[ea](this);o=Xa(o);const g=ta(this),y=yo(void 0);try{if(!(o&_r.SkipSelf)){let B=this.records.get(i);if(void 0===B){const pe=function mt(t){return"function"==typeof t||"object"==typeof t&&t instanceof pt}(i)&&As(i);B=pe&&this.injectableDefInScope(pe)?re(mc(i),Qa):null,this.records.set(i,B)}if(null!=B)return this.hydrate(i,B)}return(o&_r.Self?Xl():this.parent).get(i,r=o&_r.Optional&&r===ca?null:r)}catch(C){if("NullInjectorError"===C.name){if((C[Ro]=C[Ro]||[]).unshift(Kr(i)),g)throw C;return function Ha(t,i,r,o){const d=t[Ro];throw i[va]&&d.unshift(i[va]),t.message=function cl(t,i,r,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let d=Kr(i);if(Array.isArray(i))d=i.map(Kr).join(" -> ");else if("object"==typeof i){let g=[];for(let y in i)if(i.hasOwnProperty(y)){let C=i[y];g.push(y+":"+("string"==typeof C?JSON.stringify(C):Kr(C)))}d=`{${g.join(", ")}}`}return`${r}${o?"("+o+")":""}[${d}]: ${t.replace(Ua,"\n  ")}`}("\n"+t.message,d,r,o),t.ngTokenPath=d,t[Ro]=null,t}(C,i,"R3InjectorError",this.source)}throw C}finally{yo(y),ta(g)}}resolveInjectorInitializers(){const i=oe(null),r=ta(this),o=yo(void 0);try{const g=this.get(dl,Jr,_r.Self);for(const y of g)y()}finally{ta(r),yo(o),oe(i)}}toString(){const i=[],r=this.records;for(const o of r.keys())i.push(Kr(o));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new It(205,!1)}processProvider(i){let r=Ti(i=Rt(i))?i:Rt(i&&i.provide);const o=function I(t){return yr(t)?re(void 0,t.useValue):re(F(t),Qa)}(i);if(!Ti(i)&&!0===i.multi){let d=this.records.get(r);d||(d=re(void 0,Qa,!0),d.factory=()=>_a(d.multi),this.records.set(r,d)),r=i,d.multi.push(i)}this.records.set(r,o)}hydrate(i,r){const o=oe(null);try{return r.value===Qa&&(r.value=jl,r.value=r.factory()),"object"==typeof r.value&&r.value&&function et(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}finally{oe(o)}}injectableDefInScope(i){if(!i.providedIn)return!1;const r=Rt(i.providedIn);return"string"==typeof r?"any"===r||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(i){const r=this._onDestroyHooks.indexOf(i);-1!==r&&this._onDestroyHooks.splice(r,1)}}function mc(t){const i=As(t),r=null!==i?i.factory:Qs(t);if(null!==r)return r;if(t instanceof pt)throw new It(204,!1);if(t instanceof Function)return function De(t){if(t.length>0)throw new It(204,!1);const r=function ho(t){return t&&(t[L]||t[ue])||null}(t);return null!==r?()=>r.factory(t):()=>new t}(t);throw new It(204,!1)}function F(t,i,r){let o;if(Ti(t)){const d=Rt(t);return Qs(d)||mc(d)}if(yr(t))o=()=>Rt(t.useValue);else if(function Mn(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(..._a(t.deps||[]));else if(function Rc(t){return!(!t||!t.useExisting)}(t))o=()=>ao(Rt(t.useExisting));else{const d=Rt(t&&(t.useClass||t.provide));if(!function Te(t){return!!t.deps}(t))return Qs(d)||mc(d);o=()=>new d(..._a(t.deps))}return o}function re(t,i,r=!1){return{factory:t,value:i,multi:r?[]:void 0}}function Mt(t,i){for(const r of t)Array.isArray(r)?Mt(r,i):r&&Pr(r)?Mt(r.\u0275providers,i):i(r)}function Kt(t,i){t instanceof Aa&&t.assertNotDestroyed();const o=ta(t),d=yo(void 0);try{return i()}finally{ta(o),yo(d)}}function Yt(){return void 0!==ma()||null!=function Va(){return No}()}function Nn(t){if(!Yt())throw new It(-203,!1)}const kr=0,Sn=1,ti=2,Or=3,is=4,ys=5,Gn=6,Mi=7,ci=8,Ui=9,Fr=10,Di=11,lo=12,sa=13,Yr=14,Lr=15,Il=16,po=17,Jo=18,xo=19,Co=20,mo=21,qs=22,Wa=23,br=25,au=1,nl=7,xr=9,to=10;var Sa=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Sa||{});function bs(t){return Array.isArray(t)&&"object"==typeof t[au]}function go(t){return Array.isArray(t)&&!0===t[au]}function pa(t){return!!(4&t.flags)}function vl(t){return t.componentOffset>-1}function Wo(t){return!(1&~t.flags)}function Ya(t){return!!t.template}function Nl(t){return!!(512&t[ti])}function cu(t){return!(256&~t[ti])}class uu{constructor(i,r,o){this.previousValue=i,this.currentValue=r,this.firstChange=o}isFirstChange(){return this.firstChange}}function vc(t,i,r,o){null!==i?i.applyValueToInputSignal(i,o):t[r]=o}function rc(){return Nc}function Nc(t){return t.type.prototype.ngOnChanges&&(t.setInput=oh),Ol}function Ol(){const t=Fl(this),i=t?.current;if(i){const r=t.previous;if(r===zo)t.previous=i;else for(let o in i)r[o]=i[o];t.current=null,this.ngOnChanges(i)}}function oh(t,i,r,o,d){const g=this.declaredInputs[o],y=Fl(t)||function lh(t,i){return t[ah]=i}(t,{previous:zo,current:null}),C=y.current||(y.current={}),B=y.previous,pe=B[g];C[g]=new uu(pe&&pe.currentValue,r,B===zo),vc(t,i,d,r)}rc.ngInherit=!0;const ah="__ngSimpleChanges__";function Fl(t){return t[ah]||null}const Ll=function(t,i,r){};let mp=!1;function Ps(t){for(;Array.isArray(t);)t=t[kr];return t}function $a(t,i){return Ps(i[t])}function Ia(t,i){return Ps(i[t.index])}function Oo(t,i){return t.data[i]}function Pc(t,i){return t[i]}function ms(t,i){const r=i[t];return bs(r)?r:r[kr]}function lf(t){return!(128&~t[ti])}function Oc(t,i){return null==i?null:t[i]}function Md(t){t[po]=0}function mv(t){1024&t[ti]||(t[ti]|=1024,lf(t)&&ch(t))}function gp(t,i){for(;t>0;)i=i[Yr],t--;return i}function lm(t){return!!(9216&t[ti]||t[Wa]?.dirty)}function Ji(t){t[Fr].changeDetectionScheduler?.notify(1),lm(t)?ch(t):64&t[ti]&&(function il(){return mp}()?(t[ti]|=1024,ch(t)):t[Fr].changeDetectionScheduler?.notify())}function ch(t){t[Fr].changeDetectionScheduler?.notify();let i=yc(t);for(;null!==i&&!(8192&i[ti])&&(i[ti]|=8192,lf(i));)i=yc(i)}function kl(t,i){if(!(256&~t[ti]))throw new It(911,!1);null===t[mo]&&(t[mo]=[]),t[mo].push(i)}function uh(t,i){if(null===t[mo])return;const r=t[mo].indexOf(i);-1!==r&&t[mo].splice(r,1)}function yc(t){const i=t[Or];return go(i)?i[Or]:i}const rr={lFrame:ph(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wd(){return rr.bindingsEnabled}function ju(){return null!==rr.skipHydrationRootTNode}function _n(){return rr.lFrame.lView}function Cs(){return rr.lFrame.tView}function no(t){return rr.lFrame.contextLView=t,t[ci]}function Fo(t){return rr.lFrame.contextLView=null,t}function Hs(){let t=du();for(;null!==t&&64===t.type;)t=t.parent;return t}function du(){return rr.lFrame.currentTNode}function sc(){const t=rr.lFrame,i=t.currentTNode;return t.isParent?i:i.parent}function $o(t,i){const r=rr.lFrame;r.currentTNode=t,r.isParent=i}function ff(){return rr.lFrame.isParent}function Xu(){rr.lFrame.isParent=!1}function Lo(){const t=rr.lFrame;let i=t.bindingRootIndex;return-1===i&&(i=t.bindingRootIndex=t.tView.bindingStartIndex),i}function oc(){return rr.lFrame.bindingIndex++}function Fc(t){const i=rr.lFrame,r=i.bindingIndex;return i.bindingIndex=i.bindingIndex+t,r}function Ql(t){rr.lFrame.inI18n=t}function Lc(t,i){const r=rr.lFrame;r.bindingIndex=r.bindingRootIndex=t,xu(i)}function xu(t){rr.lFrame.currentDirectiveIndex=t}function Ku(t){const i=rr.lFrame.currentDirectiveIndex;return-1===i?null:t[i]}function xc(){return rr.lFrame.currentQueryIndex}function Dd(t){rr.lFrame.currentQueryIndex=t}function vv(t){const i=t[Sn];return 2===i.type?i.declTNode:1===i.type?t[ys]:null}function Eu(t,i,r){if(r&_r.SkipSelf){let d=i,g=t;for(;!(d=d.parent,null!==d||r&_r.Host||(d=vv(g),null===d||(g=g[Yr],10&d.type))););if(null===d)return!1;i=d,t=g}const o=rr.lFrame=fh();return o.currentTNode=i,o.lView=t,!0}function hu(t){const i=fh(),r=t[Sn];rr.lFrame=i,i.currentTNode=r.firstChild,i.lView=t,i.tView=r,i.contextLView=t,i.bindingIndex=r.bindingStartIndex,i.inI18n=!1}function fh(){const t=rr.lFrame,i=null===t?null:t.child;return null===i?ph(t):i}function ph(t){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=i),i}function _p(){const t=rr.lFrame;return rr.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const um=_p;function Qu(){const t=_p();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function _l(){return rr.lFrame.selectedIndex}function Yu(t){rr.lFrame.selectedIndex=t}function ko(){const t=rr.lFrame;return Oo(t.tView,t.selectedIndex)}let pf=!0;function mh(){return pf}function ac(t){pf=t}function mf(t,i){for(let r=i.directiveStart,o=i.directiveEnd;r<o;r++){const g=t.data[r].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:B,ngAfterViewChecked:pe,ngOnDestroy:Ie}=g;y&&(t.contentHooks??=[]).push(-r,y),C&&((t.contentHooks??=[]).push(r,C),(t.contentCheckHooks??=[]).push(r,C)),B&&(t.viewHooks??=[]).push(-r,B),pe&&((t.viewHooks??=[]).push(r,pe),(t.viewCheckHooks??=[]).push(r,pe)),null!=Ie&&(t.destroyHooks??=[]).push(r,Ie)}}function Ad(t,i,r){bp(t,i,3,r)}function gh(t,i,r,o){(3&t[ti])===r&&bp(t,i,r,o)}function gf(t,i){let r=t[ti];(3&r)===i&&(r&=16383,r+=1,t[ti]=r)}function bp(t,i,r,o){const g=o??-1,y=i.length-1;let C=0;for(let B=void 0!==o?65535&t[po]:0;B<y;B++)if("number"==typeof i[B+1]){if(C=i[B],null!=o&&C>=o)break}else i[B]<0&&(t[po]+=65536),(C<g||-1==g)&&(xv(t,r,i,B),t[po]=(4294901760&t[po])+B+2),B++}function pm(t,i){Ll(4,t,i);const r=oe(null);try{i.call(t)}finally{oe(r),Ll(5,t,i)}}function xv(t,i,r,o){const d=r[o]<0,g=r[o+1],C=t[d?-r[o]:r[o]];d?t[ti]>>14<t[po]>>16&&(3&t[ti])===i&&(t[ti]+=16384,pm(C,g)):pm(C,g)}const Id=-1;class vh{constructor(i,r,o){this.factory=i,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=o}}function _h(t){return t!==Id}function fu(t){return 32767&t}function Su(t,i){let r=function gm(t){return t>>16}(t),o=i;for(;r>0;)o=o[Yr],r--;return o}let Mp=!0;function Rd(t){const i=Mp;return Mp=t,i}const lc=255,Cp=5;let wp=0;const kc={};function yh(t,i){const r=Tp(t,i);if(-1!==r)return r;const o=i[Sn];o.firstCreatePass&&(t.injectorIndex=i.length,_f(o.data,t),_f(i,null),_f(o.blueprint,null));const d=qu(t,i),g=t.injectorIndex;if(_h(d)){const y=fu(d),C=Su(d,i),B=C[Sn].data;for(let pe=0;pe<8;pe++)i[g+pe]=C[y+pe]|B[y+pe]}return i[g+8]=d,g}function _f(t,i){t.push(0,0,0,0,0,0,0,0,i)}function Tp(t,i){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===i[t.injectorIndex+8]?-1:t.injectorIndex}function qu(t,i){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let r=0,o=null,d=i;for(;null!==d;){if(o=Sh(d),null===o)return Id;if(r++,d=d[Yr],-1!==o.injectorIndex)return o.injectorIndex|r<<16}return Id}function yf(t,i,r){!function vf(t,i,r){let o;"string"==typeof r?o=r.charCodeAt(0)||0:r.hasOwnProperty(Vo)&&(o=r[Vo]),null==o&&(o=r[Vo]=wp++);const d=o&lc;i.data[t+(d>>Cp)]|=1<<d}(t,i,r)}function bf(t,i,r){if(r&_r.Optional||void 0!==t)return t;ja()}function xf(t,i,r,o){if(r&_r.Optional&&void 0===o&&(o=null),!(r&(_r.Self|_r.Host))){const d=t[Ui],g=yo(void 0);try{return d?d.get(i,o,r&_r.Optional):Qo(i,o,r&_r.Optional)}finally{yo(g)}}return bf(o,0,r)}function Dp(t,i,r,o=_r.Default,d){if(null!==t){if(2048&i[ti]&&!(o&_r.Self)){const y=function wv(t,i,r,o,d){let g=t,y=i;for(;null!==g&&null!==y&&2048&y[ti]&&!(512&y[ti]);){const C=Ef(g,y,r,o|_r.Self,kc);if(C!==kc)return C;let B=g.parent;if(!B){const pe=y[Co];if(pe){const Ie=pe.get(r,kc,o);if(Ie!==kc)return Ie}B=Sh(y),y=y[Yr]}g=B}return d}(t,i,r,o,kc);if(y!==kc)return y}const g=Ef(t,i,r,o,kc);if(g!==kc)return g}return xf(i,r,o,d)}function Ef(t,i,r,o,d){const g=function bh(t){if("string"==typeof t)return t.charCodeAt(0)||0;const i=t.hasOwnProperty(Vo)?t[Vo]:void 0;return"number"==typeof i?i>=0?i&lc:ym:i}(r);if("function"==typeof g){if(!Eu(i,t,o))return o&_r.Host?bf(d,0,o):xf(i,r,o,d);try{let y;if(y=g(o),null!=y||o&_r.Optional)return y;ja()}finally{um()}}else if("number"==typeof g){let y=null,C=Tp(t,i),B=Id,pe=o&_r.Host?i[Lr][ys]:null;for((-1===C||o&_r.SkipSelf)&&(B=-1===C?qu(t,i):i[C+8],B!==Id&&ed(o,!1)?(y=i[Sn],C=fu(B),i=Su(B,i)):C=-1);-1!==C;){const Ie=i[Sn];if(Ju(g,C,Ie.data)){const Je=_m(C,i,r,y,o,pe);if(Je!==kc)return Je}B=i[C+8],B!==Id&&ed(o,i[Sn].data[C+8]===pe)&&Ju(g,C,i)?(y=Ie,C=fu(B),i=Su(B,i)):C=-1}}return d}function _m(t,i,r,o,d,g){const y=i[Sn],C=y.data[t+8],Ie=Zu(C,y,r,null==o?vl(C)&&Mp:o!=y&&!!(3&C.type),d&_r.Host&&g===C);return null!==Ie?pu(i,y,Ie,C):kc}function Zu(t,i,r,o,d){const g=t.providerIndexes,y=i.data,C=1048575&g,B=t.directiveStart,Ie=g>>20,At=d?C+Ie:t.directiveEnd;for(let Bt=o?C:C+Ie;Bt<At;Bt++){const Jt=y[Bt];if(Bt<B&&r===Jt||Bt>=B&&Jt.type===r)return Bt}if(d){const Bt=y[B];if(Bt&&Ya(Bt)&&Bt.type===r)return B}return null}function pu(t,i,r,o){let d=t[r];const g=i.data;if(function Ev(t){return t instanceof vh}(d)){const y=d;y.resolving&&function so(t,i){throw i&&i.join(" > "),new It(-200,t)}(function vr(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Gi(t)}(g[r]));const C=Rd(y.canSeeViewProviders);y.resolving=!0;const pe=y.injectImpl?yo(y.injectImpl):null;Eu(t,o,_r.Default);try{d=t[r]=y.factory(void 0,g,t,o),i.firstCreatePass&&r>=o.directiveStart&&function bv(t,i,r){const{ngOnChanges:o,ngOnInit:d,ngDoCheck:g}=i.type.prototype;if(o){const y=Nc(i);(r.preOrderHooks??=[]).push(t,y),(r.preOrderCheckHooks??=[]).push(t,y)}d&&(r.preOrderHooks??=[]).push(0-t,d),g&&((r.preOrderHooks??=[]).push(t,g),(r.preOrderCheckHooks??=[]).push(t,g))}(r,g[r],i)}finally{null!==pe&&yo(pe),Rd(C),y.resolving=!1,um()}}return d}function Ju(t,i,r){return!!(r[i+(t>>Cp)]&1<<t)}function ed(t,i){return!(t&_r.Self||t&_r.Host&&i)}class Ra{constructor(i,r){this._tNode=i,this._lView=r}get(i,r,o){return Dp(this._tNode,this._lView,i,Xa(o),r)}}function ym(){return new Ra(Hs(),_n())}function xh(t){return Dn(()=>{const i=t.prototype.constructor,r=i[ro]||Eh(i),o=Object.prototype;let d=Object.getPrototypeOf(t.prototype).constructor;for(;d&&d!==o;){const g=d[ro]||Eh(d);if(g&&g!==r)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Eh(t){return zt(t)?()=>{const i=Eh(Rt(t));return i&&i()}:Qs(t)}function Sh(t){const i=t[Sn],r=i.type;return 2===r?i.declTNode:1===r?t[ys]:null}function Mh(t){return function vm(t,i){if("class"===i)return t.classes;if("style"===i)return t.styles;const r=t.attrs;if(r){const o=r.length;let d=0;for(;d<o;){const g=r[d];if(xe(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<o&&"string"==typeof r[d];)d++;else{if(g===i)return r[d+1];d+=2}}}return null}(Hs(),t)}function Sm(t,i=null,r=null,o){const d=Mm(t,i,r,o);return d.resolveInjectorInitializers(),d}function Mm(t,i=null,r=null,o,d=new Set){const g=[r||Jr,fi(t)];return o=o||("object"==typeof t?void 0:Kr(t)),new Aa(g,i||Xl(),o||null,d)}let cc=(()=>{class t{static{this.THROW_IF_NOT_FOUND=ca}static{this.NULL=new Ys}static create(r,o){if(Array.isArray(r))return Sm({name:""},o,r,"");{const d=r.name??"";return Sm({name:d},r.parent,r.providers,d)}}static{this.\u0275prov=ir({token:t,providedIn:"any",factory:()=>ao(ec)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();function Op(t){return t.ngOriginalError}class Bc{constructor(){this._console=console}handleError(i){const r=this._findOriginalError(i);this._console.error("ERROR",i),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(i){let r=i&&Op(i);for(;r&&Op(r);)r=Op(r);return r||null}}const Tm=new pt("",{providedIn:"root",factory:()=>$i(Bc).handleError.bind(void 0)});let nd=(()=>{class t{static{this.__NG_ELEMENT_ID__=Dm}static{this.__NG_ENV_ID__=r=>r}}return t})();class Fp extends nd{constructor(i){super(),this._lView=i}onDestroy(i){return kl(this._lView,i),()=>uh(this._lView,i)}}function Dm(){return new Fp(_n())}class Lp{constructor(){this.destroyed=!1,this.listeners=null,this.errorHandler=$i(Bc,{optional:!0}),this.destroyRef=$i(nd),this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(i){if(this.destroyed)throw new It(953,!1);return(this.listeners??=[]).push(i),{unsubscribe:()=>{const r=this.listeners?.indexOf(i);void 0!==r&&-1!==r&&this.listeners?.splice(r,1)}}}emit(i){if(this.destroyed)throw new It(953,!1);if(null===this.listeners)return;const r=oe(null);try{for(const o of this.listeners)try{o(i)}catch(d){this.errorHandler?.handleError(d)}}finally{oe(r)}}}function Dv(t){return new Lp}function Am(t,i){return Hn(t,i)}const Iv=(Am.required=function Av(t){return Hn(Fn,t)},Am);function Rv(){return Pd(Hs(),_n())}function Pd(t,i){return new wh(Ia(t,i))}let wh=(()=>{class t{constructor(r){this.nativeElement=r}static{this.__NG_ELEMENT_ID__=Rv}}return t})();function Cf(t){return t instanceof wh?t.nativeElement:t}function kp(t){return i=>{setTimeout(t,void 0,i)}}const Xc=class Nv extends rn.B{constructor(i=!1){super(),this.destroyRef=void 0,this.__isAsync=i,Yt()&&(this.destroyRef=$i(nd,{optional:!0})??void 0)}emit(i){const r=oe(null);try{super.next(i)}finally{oe(r)}}subscribe(i,r,o){let d=i,g=r||(()=>null),y=o;if(i&&"object"==typeof i){const B=i;d=B.next?.bind(B),g=B.error?.bind(B),y=B.complete?.bind(B)}this.__isAsync&&(g=kp(g),d&&(d=kp(d)),y&&(y=kp(y)));const C=super.subscribe({next:d,error:g,complete:y});return i instanceof gn.yU&&i.add(C),C}};function Pv(){return this._results[Symbol.iterator]()}class wf{get changes(){return this._changes??=new Xc}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const r=wf.prototype;r[Symbol.iterator]||(r[Symbol.iterator]=Pv)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,r){return this._results.reduce(i,r)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,r){this.dirty=!1;const o=function ks(t){return t.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Jl(t,i,r){if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++){let d=t[o],g=i[o];if(r&&(d=r(d),g=r(g)),g!==d)return!1}return!0}(this._results,o,r))&&(this._results=o,this.length=o.length,this.last=o[this.length-1],this.first=o[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(i){this._onDirty=i}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Th(t){return!(128&~t.flags)}const Im=new Map;let c1=0;const Rm="__ngContext__";function Bl(t,i){bs(i)?(t[Rm]=i[xo],function d1(t){Im.set(t[xo],t)}(i)):t[Rm]=i}function Nm(t){return Gp(t[lo])}function Pm(t){return Gp(t[is])}function Gp(t){for(;null!==t&&!go(t);)t=t[is];return t}let Mr;function ds(t){Mr=t}function ss(){if(void 0!==Mr)return Mr;if(typeof document<"u")return document;throw new It(210,!1)}const xs=new pt("",{providedIn:"root",factory:()=>wo}),wo="ng",Wr=new pt(""),Es=new pt("",{providedIn:"platform",factory:()=>"unknown"}),Ao=new pt(""),Io=new pt("",{providedIn:"root",factory:()=>ss().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Rf=()=>null;function Zc(t,i,r=!1){return Rf(t,i,r)}const jv=new pt("",{providedIn:"root",factory:()=>!1});let Qp,Yp;function Rh(t){return function Lm(){if(void 0===Qp&&(Qp=null,Yn.trustedTypes))try{Qp=Yn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Qp}()?.createHTML(t)||t}function km(){if(void 0===Yp&&(Yp=null,Yn.trustedTypes))try{Yp=Yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Yp}function Kv(t){return km()?.createHTML(t)||t}function Yv(t){return km()?.createScriptURL(t)||t}class kd{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ot})`}}class g1 extends kd{getTypeName(){return"HTML"}}class v1 extends kd{getTypeName(){return"Style"}}class _1 extends kd{getTypeName(){return"Script"}}class y1 extends kd{getTypeName(){return"URL"}}class b1 extends kd{getTypeName(){return"ResourceURL"}}function Du(t){return t instanceof kd?t.changingThisBreaksApplicationSecurity:t}function Nh(t,i){const r=function x1(t){return t instanceof kd&&t.getTypeName()||null}(t);if(null!=r&&r!==i){if("ResourceURL"===r&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${r} (see ${Ot})`)}return r===i}function E1(t){return new g1(t)}function S1(t){return new v1(t)}function M1(t){return new _1(t)}function C1(t){return new y1(t)}function w1(t){return new b1(t)}function qp(t){const i=new T1(t);return function Zp(){try{return!!(new window.DOMParser).parseFromString(Rh(""),"text/html")}catch{return!1}}()?new qv(i):i}class qv{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const r=(new window.DOMParser).parseFromString(Rh(i),"text/html").body;return null===r?this.inertDocumentHelper.getInertBodyElement(i):(r.removeChild(r.firstChild),r)}catch{return null}}}class T1{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const r=this.inertDocument.createElement("template");return r.innerHTML=Rh(i),r}}const Zv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Jp(t){return(t=String(t)).match(Zv)?t:"unsafe:"+t}function Au(t){const i={};for(const r of t.split(","))i[r]=!0;return i}function Lf(...t){const i={};for(const r of t)for(const o in r)r.hasOwnProperty(o)&&(i[o]=!0);return i}const Bm=Au("area,br,col,hr,img,wbr"),Jv=Au("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Um=Au("rp,rt"),Hm=Lf(Bm,Lf(Jv,Au("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Lf(Um,Au("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Lf(Um,Jv)),zm=Au("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ph=Lf(zm,Au("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Au("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),e_=Au("script,style,template");class t_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let r=i.firstChild,o=!0,d=[];for(;r;)if(r.nodeType===Node.ELEMENT_NODE?o=this.startElement(r):r.nodeType===Node.TEXT_NODE?this.chars(r.nodeValue):this.sanitizedSomething=!0,o&&r.firstChild)d.push(r),r=A1(r);else for(;r;){r.nodeType===Node.ELEMENT_NODE&&this.endElement(r);let g=Gm(r);if(g){r=g;break}r=d.pop()}return this.buf.join("")}startElement(i){const r=n_(i).toLowerCase();if(!Hm.hasOwnProperty(r))return this.sanitizedSomething=!0,!e_.hasOwnProperty(r);this.buf.push("<"),this.buf.push(r);const o=i.attributes;for(let d=0;d<o.length;d++){const g=o.item(d),y=g.name,C=y.toLowerCase();if(!Ph.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let B=g.value;zm[C]&&(B=Jp(B)),this.buf.push(" ",y,'="',Wm(B),'"')}return this.buf.push(">"),!0}endElement(i){const r=n_(i).toLowerCase();Hm.hasOwnProperty(r)&&!Bm.hasOwnProperty(r)&&(this.buf.push("</"),this.buf.push(r),this.buf.push(">"))}chars(i){this.buf.push(Wm(i))}}function Gm(t){const i=t.nextSibling;if(i&&t!==i.previousSibling)throw i_(i);return i}function A1(t){const i=t.firstChild;if(i&&function D1(t,i){return(t.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,i))throw i_(i);return i}function n_(t){const i=t.nodeName;return"string"==typeof i?i:"FORM"}function i_(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const r_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,I1=/([^\#-~ |!])/g;function Wm(t){return t.replace(/&/g,"&amp;").replace(r_,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(I1,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let e0;function s_(t,i){let r=null;try{e0=e0||qp(t);let o=i?String(i):"";r=e0.getInertBodyElement(o);let d=5,g=o;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,o=g,g=r.innerHTML,r=e0.getInertBodyElement(o)}while(o!==g);return Rh((new t_).sanitizeChildren($m(r)||r))}finally{if(r){const o=$m(r)||r;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function $m(t){return"content"in t&&function R1(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Bd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Bd||{});function o_(t){const i=kf();return i?Kv(i.sanitize(Bd.HTML,t)||""):Nh(t,"HTML")?Kv(Du(t)):s_(ss(),Gi(t))}function jm(t){const i=kf();return i?i.sanitize(Bd.URL,t)||"":Nh(t,"URL")?Du(t):Jp(Gi(t))}function Xm(t){const i=kf();if(i)return Yv(i.sanitize(Bd.RESOURCE_URL,t)||"");if(Nh(t,"ResourceURL"))return Yv(Du(t));throw new It(904,!1)}function Km(t,i,r){return function a_(t,i){return"src"===i&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===i&&("base"===t||"link"===t)?Xm:jm}(i,r)(t)}function kf(){const t=_n();return t&&t[Fr].sanitizer}const L1=/^>|^->|<!--|-->|--!>|<!-$/g,k1=/(<|>)/g,B1="\u200b$1\u200b";function Zm(t){Kn("Must never be called in production mode");const r=function t0(t){Kn("Must never be called in production mode");const r=t[Lr][ci];return r&&r.constructor?zr(r.constructor):null}(t)?.type?.name;return r?` (used in the '${r}' component template)`:""}function h_(t){return t.ownerDocument.defaultView}function Mc(t){return t instanceof Function?t():t}function Jc(t){return"browser"===(t??$i(cc)).get(Es)}var Oh=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Oh||{});let ad;function Ud(t,i){return ad(t,i)}function eu(t,i,r,o,d){if(null!=o){let g,y=!1;go(o)?g=o:bs(o)&&(y=!0,o=o[kr]);const C=Ps(o);0===t&&null!==r?null==d?zf(i,r,C):ud(i,r,C,d||null,!0):1===t&&null!==r?ud(i,r,C,d||null,!0):2===t?function $f(t,i,r){const o=c0(t,i);o&&function x_(t,i,r,o){t.removeChild(i,r,o)}(t,o,i,r)}(i,C,y):3===t&&i.destroyNode(C),null!=g&&function j1(t,i,r,o,d){const g=r[nl];g!==Ps(r)&&eu(i,t,o,g,d);for(let C=to;C<r.length;C++){const B=r[C];d0(B[Sn],B,t,i,o,g)}}(i,t,g,r,d)}}function ld(t,i){return t.createText(i)}function s0(t,i){return t.createComment(function Qm(t){return t.replace(L1,i=>i.replace(k1,B1))}(i))}function Vd(t,i,r){return t.createElement(i,r)}function eg(t,i){i[Fr].changeDetectionScheduler?.notify(1),d0(t,i,i[Di],2,null,null)}function Vf(t,i){const r=t[xr],o=r.indexOf(i);r.splice(o,1)}function cd(t,i){if(t.length<=to)return;const r=to+i,o=t[r];if(o){const d=o[Il];null!==d&&d!==t&&Vf(d,o),i>0&&(t[r-1][is]=o[is]);const g=Po(t,to+i);!function Uf(t,i){eg(t,i),i[kr]=null,i[ys]=null}(o[Sn],o);const y=g[Jo];null!==y&&y.detachView(g[Sn]),o[Or]=null,o[is]=null,o[ti]&=-129}return o}function Hf(t,i){if(!(256&i[ti])){const r=i[Di];r.destroyNode&&d0(t,i,r,3,null,null),function tg(t){let i=t[lo];if(!i)return ng(t[Sn],t);for(;i;){let r=null;if(bs(i))r=i[lo];else{const o=i[to];o&&(r=o)}if(!r){for(;i&&!i[is]&&i!==t;)bs(i)&&ng(i[Sn],i),i=i[Or];null===i&&(i=t),bs(i)&&ng(i[Sn],i),r=i&&i[is]}i=r}}(i)}}function ng(t,i){if(256&i[ti])return;const r=oe(null);try{i[ti]&=-129,i[ti]|=256,i[Wa]&&Ge(i[Wa]),function y_(t,i){let r;if(null!=t&&null!=(r=t.destroyHooks))for(let o=0;o<r.length;o+=2){const d=i[r[o]];if(!(d instanceof vh)){const g=r[o+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const C=d[g[y]],B=g[y+1];Ll(4,C,B);try{B.call(C)}finally{Ll(5,C,B)}}else{Ll(4,d,g);try{g.call(d)}finally{Ll(5,d,g)}}}}}(t,i),function __(t,i){const r=t.cleanup,o=i[Mi];if(null!==r)for(let g=0;g<r.length-1;g+=2)if("string"==typeof r[g]){const y=r[g+3];y>=0?o[y]():o[-y].unsubscribe(),g+=2}else r[g].call(o[r[g+1]]);null!==o&&(i[Mi]=null);const d=i[mo];if(null!==d){i[mo]=null;for(let g=0;g<d.length;g++)(0,d[g])()}}(t,i),1===i[Sn].type&&i[Di].destroy();const o=i[Il];if(null!==o&&go(i[Or])){o!==i[Or]&&Vf(o,i);const d=i[Jo];null!==d&&d.detachView(t)}!function Lv(t){Im.delete(t[xo])}(i)}finally{oe(r)}}function a0(t,i,r){return b_(t,i.parent,r)}function b_(t,i,r){let o=i;for(;null!==o&&40&o.type;)o=(i=o).parent;if(null===o)return r[kr];{const{componentOffset:d}=o;if(d>-1){const{encapsulation:g}=t.data[o.directiveStart+d];if(g===ha.None||g===ha.Emulated)return null}return Ia(o,r)}}function ud(t,i,r,o,d){t.insertBefore(i,r,o,d)}function zf(t,i,r){t.appendChild(i,r)}function l0(t,i,r,o,d){null!==o?ud(t,i,r,o,d):zf(t,i,r)}function c0(t,i){return t.parentNode(i)}function gu(t,i,r){return M_(t,i,r)}function ig(t,i,r){return 40&t.type?Ia(t,r):null}let Gf,M_=ig;function kh(t,i){M_=t,Gf=i}function Ru(t,i,r,o){const d=a0(t,o,i),g=i[Di],C=gu(o.parent||i[ys],o,i);if(null!=d)if(Array.isArray(r))for(let B=0;B<r.length;B++)l0(g,d,r[B],C,!1);else l0(g,d,r,C,!1);void 0!==Gf&&Gf(g,o,i,r,d)}function Bh(t,i){if(null!==i){const r=i.type;if(3&r)return Ia(i,t);if(4&r)return u0(-1,t[i.index]);if(8&r){const o=i.child;if(null!==o)return Bh(t,o);{const d=t[i.index];return go(d)?u0(-1,d):Ps(d)}}if(32&r)return Ud(i,t)()||Ps(t[i.index]);{const o=Wf(t,i);return null!==o?Array.isArray(o)?o[0]:Bh(yc(t[Lr]),o):Bh(t,i.next)}}return null}function Wf(t,i){return null!==i?t[Lr][ys].projection[i.projection]:null}function u0(t,i){const r=to+t+1;if(r<i.length){const o=i[r],d=o[Sn].firstChild;if(null!==d)return Bh(o,d)}return i[nl]}function Hd(t,i,r,o,d,g,y){for(;null!=r;){const C=o[r.index],B=r.type;if(y&&0===i&&(C&&Bl(Ps(C),o),r.flags|=2),32&~r.flags)if(8&B)Hd(t,i,r.child,o,d,g,!1),eu(i,t,d,C,g);else if(32&B){const pe=Ud(r,o);let Ie;for(;Ie=pe();)eu(i,t,d,Ie,g);eu(i,t,d,C,g)}else 16&B?C_(t,i,o,r,d,g):eu(i,t,d,C,g);r=y?r.projectionNext:r.next}}function d0(t,i,r,o,d,g){Hd(r,o,t.firstChild,i,d,g,!1)}function C_(t,i,r,o,d,g){const y=r[Lr],B=y[ys].projection[o.projection];if(Array.isArray(B))for(let pe=0;pe<B.length;pe++)eu(i,t,d,B[pe],g);else{let pe=B;const Ie=y[Or];Th(o)&&(pe.flags|=128),Hd(t,i,pe,Ie,d,g,!0)}}function w_(t,i,r){""===r?t.removeAttribute(i,"class"):t.setAttribute(i,"class",r)}function h0(t,i,r){const{mergedAttrs:o,classes:d,styles:g}=r;null!==o&&Dl(t,i,o),null!==d&&w_(t,i,d),null!==g&&function hc(t,i,r){t.setAttribute(i,"style",r)}(t,i,g)}const qr={};function dd(t=1){Vh(Cs(),_n(),_l()+t,!1)}function Vh(t,i,r,o){if(!o)if(3&~i[ti]){const g=t.preOrderHooks;null!==g&&gh(i,g,0,r)}else{const g=t.preOrderCheckHooks;null!==g&&Ad(i,g,r)}Yu(r)}function zd(t,i=_r.Default){const r=_n();return null===r?ao(t,i):Dp(Hs(),r,Rt(t),i)}function T_(){throw new Error("invalid")}function f0(t,i,r,o,d,g){const y=oe(null);try{let C=null;d&Bs.SignalBased&&(C=i[o][X]),null!==C&&void 0!==C.transformFn&&(g=C.transformFn(g)),d&Bs.HasDecoratorInputTransform&&(g=t.inputTransforms[o].call(i,g)),null!==t.setInput?t.setInput(i,C,g,r,o):vc(i,C,o,g)}finally{oe(y)}}function Gd(t,i,r,o,d,g,y,C,B,pe,Ie){const Je=i.blueprint.slice();return Je[kr]=d,Je[ti]=204|o,(null!==pe||t&&2048&t[ti])&&(Je[ti]|=2048),Md(Je),Je[Or]=Je[Yr]=t,Je[ci]=r,Je[Fr]=y||t&&t[Fr],Je[Di]=C||t&&t[Di],Je[Ui]=B||t&&t[Ui]||null,Je[ys]=g,Je[xo]=function u1(){return c1++}(),Je[Gn]=Ie,Je[Co]=pe,Je[Lr]=2==i.type?t[Lr]:Je,Je}function Hh(t,i,r,o,d){let g=t.data[i];if(null===g)g=Nu(t,i,r,o,d),function aa(){return rr.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=r,g.value=o,g.attrs=d;const y=sc();g.injectorIndex=null===y?-1:y.injectorIndex}return $o(g,!0),g}function Nu(t,i,r,o,d){const g=du(),y=ff(),B=t.data[i]=function K1(t,i,r,o,d,g){let y=i?i.injectorIndex:-1,C=0;return ju()&&(C|=128),{type:r,index:o,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,r,i,o,d);return null===t.firstChild&&(t.firstChild=B),null!==g&&(y?null==g.child&&null!==B.parent&&(g.child=B):null===g.next&&(g.next=B,B.prev=g)),B}function jf(t,i,r,o){if(0===r)return-1;const d=i.length;for(let g=0;g<r;g++)i.push(o),t.blueprint.push(o),t.data.push(null);return d}function ql(t,i,r,o,d){const g=_l(),y=2&o;try{Yu(-1),y&&i.length>br&&Vh(t,i,br,!1),Ll(y?2:0,d),r(o,d)}finally{Yu(g),Ll(y?3:1,d)}}function zh(t,i,r){if(pa(i)){const o=oe(null);try{const g=i.directiveEnd;for(let y=i.directiveStart;y<g;y++){const C=t.data[y];C.contentQueries&&C.contentQueries(1,r[y],y)}}finally{oe(o)}}}function Gh(t,i,r){wd()&&(function Y1(t,i,r,o){const d=r.directiveStart,g=r.directiveEnd;vl(r)&&function Z1(t,i,r){const o=Ia(i,t),d=Wh(r);let y=16;r.signals?y=4096:r.onPush&&(y=64);const C=_0(t,Gd(t,d,null,y,o,i,null,t[Fr].rendererFactory.createRenderer(o,r),null,null,null));t[i.index]=C}(i,r,t.data[d+r.componentOffset]),t.firstCreatePass||yh(r,i),Bl(o,i);const y=r.initialInputs;for(let C=d;C<g;C++){const B=t.data[C],pe=pu(i,t,C,r);Bl(pe,i),null!==y&&J1(0,C-d,pe,B,0,y),Ya(B)&&(ms(r.index,i)[ci]=pu(i,t,C,r))}}(t,i,r,Ia(r,i)),!(64&~r.flags)&&tu(t,i,r))}function p0(t,i,r=Ia){const o=i.localNames;if(null!==o){let d=i.index+1;for(let g=0;g<o.length;g+=2){const y=o[g+1],C=-1===y?r(i,t):t[y];t[d++]=C}}}function Wh(t){const i=t.tView;return null===i||i.incompleteFirstPass?t.tView=$h(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):i}function $h(t,i,r,o,d,g,y,C,B,pe,Ie){const Je=br+o,At=Je+d,Bt=function sg(t,i){const r=[];for(let o=0;o<i;o++)r.push(o<t?null:qr);return r}(Je,At),Jt="function"==typeof pe?pe():pe;return Bt[Sn]={type:t,blueprint:Bt,template:r,queries:null,viewQuery:C,declTNode:i,data:Bt.slice().fill(null,Je),bindingStartIndex:Je,expandoStartIndex:At,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:B,consts:Jt,incompleteFirstPass:!1,ssrId:Ie}}let Xf=()=>null;function og(t,i,r,o,d){for(let g in i){if(!i.hasOwnProperty(g))continue;const y=i[g];if(void 0===y)continue;o??={};let C,B=Bs.None;Array.isArray(y)?(C=y[0],B=y[1]):C=y;let pe=g;if(null!==d){if(!d.hasOwnProperty(g))continue;pe=d[g]}0===t?ag(o,r,pe,C,B):ag(o,r,pe,C)}return o}function ag(t,i,r,o,d){let g;t.hasOwnProperty(r)?(g=t[r]).push(i,o):g=t[r]=[i,o],void 0!==d&&g.push(d)}function xl(t,i,r,o,d,g,y,C){const B=Ia(i,r);let Ie,pe=i.inputs;!C&&null!=pe&&(Ie=pe[o])?(gg(t,r,Ie,o,d),vl(i)&&function Q1(t,i){const r=ms(i,t);16&r[ti]||(r[ti]|=64)}(r,i.index)):3&i.type&&(o=function m0(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),d=null!=y?y(d,i.value||"",o):d,g.setProperty(B,o,d))}function N_(t,i,r,o){if(wd()){const d=null===o?null:{"":-1},g=function q1(t,i){const r=t.directiveRegistry;let o=null,d=null;if(r)for(let g=0;g<r.length;g++){const y=r[g];if(Wl(i,y.selectors,!1))if(o||(o=[]),Ya(y))if(null!==y.findHostDirectiveDefs){const C=[];d=d||new Map,y.findHostDirectiveDefs(y,C,d),o.unshift(...C,y),Kf(t,i,C.length)}else o.unshift(y),Kf(t,i,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,o,d),o.push(y)}return null===o?null:[o,d]}(t,r);let y,C;null===g?y=C=null:[y,C]=g,null!==y&&g0(t,i,r,y,d,C),d&&function v0(t,i,r){if(i){const o=t.localNames=[];for(let d=0;d<i.length;d+=2){const g=r[i[d+1]];if(null==g)throw new It(-301,!1);o.push(i[d],g)}}}(r,o,d)}r.mergedAttrs=ie(r.mergedAttrs,r.attrs)}function g0(t,i,r,o,d,g){for(let pe=0;pe<o.length;pe++)yf(yh(r,i),t,o[pe].type);!function dg(t,i,r){t.flags|=1,t.directiveStart=i,t.directiveEnd=i+r,t.providerIndexes=i}(r,t.data.length,o.length);for(let pe=0;pe<o.length;pe++){const Ie=o[pe];Ie.providersResolver&&Ie.providersResolver(Ie)}let y=!1,C=!1,B=jf(t,i,o.length,null);for(let pe=0;pe<o.length;pe++){const Ie=o[pe];r.mergedAttrs=ie(r.mergedAttrs,Ie.hostAttrs),hg(t,r,i,B,Ie),ug(B,Ie,d),null!==Ie.contentQueries&&(r.flags|=4),(null!==Ie.hostBindings||null!==Ie.hostAttrs||0!==Ie.hostVars)&&(r.flags|=64);const Je=Ie.type.prototype;!y&&(Je.ngOnChanges||Je.ngOnInit||Je.ngDoCheck)&&((t.preOrderHooks??=[]).push(r.index),y=!0),!C&&(Je.ngOnChanges||Je.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(r.index),C=!0),B++}!function lg(t,i,r){const d=i.directiveEnd,g=t.data,y=i.attrs,C=[];let B=null,pe=null;for(let Ie=i.directiveStart;Ie<d;Ie++){const Je=g[Ie],At=r?r.get(Je):null,Jt=At?At.outputs:null;B=og(0,Je.inputs,Ie,B,At?At.inputs:null),pe=og(1,Je.outputs,Ie,pe,Jt);const bn=null===B||null===y||Dr(i)?null:eb(B,Ie,y);C.push(bn)}null!==B&&(B.hasOwnProperty("class")&&(i.flags|=8),B.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=C,i.inputs=B,i.outputs=pe}(t,r,g)}function tu(t,i,r){const o=r.directiveStart,d=r.directiveEnd,g=r.index,y=function hh(){return rr.lFrame.currentDirectiveIndex}();try{Yu(g);for(let C=o;C<d;C++){const B=t.data[C],pe=i[C];xu(C),(null!==B.hostBindings||0!==B.hostVars||null!==B.hostAttrs)&&cg(B,pe)}}finally{Yu(-1),xu(y)}}function cg(t,i){null!==t.hostBindings&&t.hostBindings(1,i)}function Kf(t,i,r){i.componentOffset=r,(t.components??=[]).push(i.index)}function ug(t,i,r){if(r){if(i.exportAs)for(let o=0;o<i.exportAs.length;o++)r[i.exportAs[o]]=t;Ya(i)&&(r[""]=t)}}function hg(t,i,r,o,d){t.data[o]=d;const g=d.factory||(d.factory=Qs(d.type)),y=new vh(g,Ya(d),zd);t.blueprint[o]=y,r[o]=y,function hE(t,i,r,o,d){const g=d.hostBindings;if(g){let y=t.hostBindingOpCodes;null===y&&(y=t.hostBindingOpCodes=[]);const C=~i.index;(function fE(t){let i=t.length;for(;i>0;){const r=t[--i];if("number"==typeof r&&r<0)return r}return 0})(y)!=C&&y.push(C),y.push(r,o,g)}}(t,i,o,jf(t,r,d.hostVars,qr),d)}function nu(t,i,r,o,d,g){const y=Ia(t,i);!function fg(t,i,r,o,d,g,y){if(null==g)t.removeAttribute(i,d,r);else{const C=null==y?Gi(g):y(g,o||"",d);t.setAttribute(i,d,C,r)}}(i[Di],y,g,t.value,r,o,d)}function J1(t,i,r,o,d,g){const y=g[i];if(null!==y)for(let C=0;C<y.length;)f0(o,r,y[C++],y[C++],y[C++],y[C++])}function eb(t,i,r){let o=null,d=0;for(;d<r.length;){const g=r[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(t.hasOwnProperty(g)){null===o&&(o=[]);const y=t[g];for(let C=0;C<y.length;C+=3)if(y[C]===i){o.push(g,y[C+1],y[C+2],r[d+1]);break}}d+=2}else d+=2;else d+=4}return o}function jh(t,i,r,o){return[t,!0,0,i,null,o,null,r,null,null]}function P_(t,i){const r=t.contentQueries;if(null!==r){const o=oe(null);try{for(let d=0;d<r.length;d+=2){const y=r[d+1];if(-1!==y){const C=t.data[y];Dd(r[d]),C.contentQueries(2,i[y],y)}}}finally{oe(o)}}}function _0(t,i){return t[lo]?t[sa][is]=i:t[lo]=i,t[sa]=i,i}function pg(t,i,r){Dd(0);const o=oe(null);try{i(t,r)}finally{oe(o)}}function Xh(t){return t[Mi]||(t[Mi]=[])}function mg(t){return t.cleanup||(t.cleanup=[])}function O_(t,i,r){return(null===t||Ya(t))&&(r=function af(t){for(;Array.isArray(t);){if("object"==typeof t[au])return t;t=t[kr]}return null}(r[i.index])),r[Di]}function Qf(t,i){const r=t[Ui],o=r?r.get(Bc,null):null;o&&o.handleError(i)}function gg(t,i,r,o,d){for(let g=0;g<r.length;){const y=r[g++],C=r[g++],B=r[g++];f0(t.data[y],i[y],o,C,B,d)}}function vu(t,i,r){const o=$a(i,t);!function Lh(t,i,r){t.setValue(i,r)}(t[Di],o,r)}function F_(t,i){const r=ms(i,t),o=r[Sn];!function L_(t,i){for(let r=i.length;r<t.blueprint.length;r++)i.push(t.blueprint[r])}(o,r);const d=r[kr];null!==d&&null===r[Gn]&&(r[Gn]=Zc(d,r[Ui])),Kh(o,r,r[ci])}function Kh(t,i,r){hu(i);try{const o=t.viewQuery;null!==o&&pg(1,o,r);const d=t.template;null!==d&&ql(t,i,d,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),i[Jo]?.finishViewCreation(t),t.staticContentQueries&&P_(t,i),t.staticViewQueries&&pg(2,t.viewQuery,r);const g=t.components;null!==g&&function tb(t,i){for(let r=0;r<i.length;r++)F_(t,i[r])}(i,g)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{i[ti]&=-5,Qu()}}function hd(t,i,r,o){const d=oe(null);try{const g=i.tView,B=Gd(t,g,r,4096&t[ti]?4096:16,null,i,null,null,o?.injector??null,o?.embeddedViewInjector??null,o?.dehydratedView??null);B[Il]=t[i.index];const Ie=t[Jo];return null!==Ie&&(B[Jo]=Ie.createEmbeddedView(g)),Kh(g,B,r),B}finally{oe(d)}}function Yf(t,i){const r=to+i;if(r<t.length)return t[r]}function fd(t,i){return!i||null===i.firstChild||Th(t)}function $d(t,i,r,o=!0){const d=i[Sn];if(function g_(t,i,r,o){const d=to+o,g=r.length;o>0&&(r[d-1][is]=i),o<g-to?(i[is]=r[d],ba(r,to+o,i)):(r.push(i),i[is]=null),i[Or]=r;const y=i[Il];null!==y&&r!==y&&function v_(t,i){const r=t[xr];i[Lr]!==i[Or][Or][Lr]&&(t[ti]|=Sa.HasTransplantedViews),null===r?t[xr]=[i]:r.push(i)}(y,i);const C=i[Jo];null!==C&&C.insertView(t),Ji(i),i[ti]|=128}(d,i,t,r),o){const y=u0(r,t),C=i[Di],B=c0(C,t[nl]);null!==B&&function o0(t,i,r,o,d,g){o[kr]=d,o[ys]=i,d0(t,o,r,1,d,g)}(d,t[ys],C,i,B,y)}const g=i[Gn];null!==g&&null!==g.firstChild&&(g.firstChild=null)}function jd(t,i){const r=cd(t,i);return void 0!==r&&Hf(r[Sn],r),r}function Xd(t,i,r,o,d=!1){for(;null!==r;){const g=i[r.index];null!==g&&o.push(Ps(g)),go(g)&&pd(g,o);const y=r.type;if(8&y)Xd(t,i,r.child,o);else if(32&y){const C=Ud(r,i);let B;for(;B=C();)o.push(B)}else if(16&y){const C=Wf(i,r);if(Array.isArray(C))o.push(...C);else{const B=yc(i[Lr]);Xd(B[Sn],B,C,o,!0)}}r=d?r.projectionNext:r.next}return o}function pd(t,i){for(let r=to;r<t.length;r++){const o=t[r],d=o[Sn].firstChild;null!==d&&Xd(o[Sn],o,d,i)}t[nl]!==t[kr]&&i.push(t[nl])}let y0=[];const E0={...P,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ch(t.lView)},consumerOnSignalRead(){this.lView[Wa]=this}},k_=100;function Ou(t,i=!0,r=0){const o=t[Fr],d=o.rendererFactory;d.begin?.();try{!function nb(t,i){_g(t,i);let r=0;for(;lm(t);){if(r===k_)throw new It(103,!1);r++,_g(t,1)}}(t,r)}catch(y){throw i&&Qf(t,y),y}finally{d.end?.(),o.inlineEffectRunner?.flush()}}function Kd(t,i,r,o){const d=i[ti];if(!(256&~d))return;i[Fr].inlineEffectRunner?.flush(),hu(i);let y=null,C=null;(function qf(t){return 2!==t.type})(t)&&(C=function b0(t){return t[Wa]??function x0(t){const i=y0.pop()??Object.create(E0);return i.lView=t,i}(t)}(i),y=de(C));try{Md(i),function jc(t){return rr.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==r&&ql(t,i,r,2,o);const B=!(3&~d);if(B){const Je=t.preOrderCheckHooks;null!==Je&&Ad(i,Je,null)}else{const Je=t.preOrderHooks;null!==Je&&gh(i,Je,0,null),gf(i,0)}if(function rb(t){for(let i=Nm(t);null!==i;i=Pm(i)){if(!(i[ti]&Sa.HasTransplantedViews))continue;const r=i[xr];for(let o=0;o<r.length;o++){mv(r[o])}}}(i),B_(i,0),null!==t.contentQueries&&P_(t,i),B){const Je=t.contentCheckHooks;null!==Je&&Ad(i,Je)}else{const Je=t.contentHooks;null!==Je&&gh(i,Je,1),gf(i,1)}!function Vl(t,i){const r=t.hostBindingOpCodes;if(null!==r)try{for(let o=0;o<r.length;o++){const d=r[o];if(d<0)Yu(~d);else{const g=d,y=r[++o],C=r[++o];Lc(y,g),C(2,i[g])}}}finally{Yu(-1)}}(t,i);const pe=t.components;null!==pe&&V_(i,pe,0);const Ie=t.viewQuery;if(null!==Ie&&pg(2,Ie,o),B){const Je=t.viewCheckHooks;null!==Je&&Ad(i,Je)}else{const Je=t.viewHooks;null!==Je&&gh(i,Je,2),gf(i,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i[qs]){for(const Je of i[qs])Je();i[qs]=null}i[ti]&=-73}catch(B){throw ch(i),B}finally{null!==C&&(Re(C,y),function vg(t){t.lView[Wa]!==t&&(t.lView=null,y0.push(t))}(C)),Qu()}}function B_(t,i){for(let r=Nm(t);null!==r;r=Pm(r))for(let o=to;o<r.length;o++)U_(r[o],i)}function sb(t,i,r){U_(ms(i,t),r)}function U_(t,i){lf(t)&&_g(t,i)}function _g(t,i){const o=t[Sn],d=t[ti],g=t[Wa];let y=!!(0===i&&16&d);if(y||=!!(64&d&&0===i),y||=!!(1024&d),y||=!(!g?.dirty||!ze(g)),g&&(g.dirty=!1),t[ti]&=-9217,y)Kd(o,t,o.template,t[ci]);else if(8192&d){B_(t,1);const C=o.components;null!==C&&V_(t,C,1)}}function V_(t,i,r){for(let o=0;o<i.length;o++)sb(t,i[o],r)}function Zf(t){for(t[Fr].changeDetectionScheduler?.notify();t;){t[ti]|=64;const i=yc(t);if(Nl(t)&&!i)return t;t=i}return null}class Jf{get rootNodes(){const i=this._lView,r=i[Sn];return Xd(r,i,r.firstChild,[])}constructor(i,r,o=!0){this._lView=i,this._cdRefInjectingView=r,this.notifyErrorHandler=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ci]}set context(i){this._lView[ci]=i}get destroyed(){return!(256&~this._lView[ti])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Or];if(go(i)){const r=i[8],o=r?r.indexOf(this):-1;o>-1&&(cd(i,o),Po(r,o))}this._attachedToViewContainer=!1}Hf(this._lView[Sn],this._lView)}onDestroy(i){kl(this._lView,i)}markForCheck(){Zf(this._cdRefInjectingView||this._lView)}detach(){this._lView[ti]&=-129}reattach(){Ji(this._lView),this._lView[ti]|=128}detectChanges(){this._lView[ti]|=1024,Ou(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new It(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,eg(this._lView[Sn],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new It(902,!1);this._appRef=i,Ji(this._lView)}}let ep=(()=>{class t{static{this.__NG_ELEMENT_ID__=yg}}return t})();const ob=ep,ab=class extends ob{constructor(i,r,o){super(),this._declarationLView=i,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(i,r){return this.createEmbeddedViewImpl(i,r)}createEmbeddedViewImpl(i,r,o){const d=hd(this._declarationLView,this._declarationTContainer,i,{embeddedViewInjector:r,dehydratedView:o});return new Jf(d)}};function yg(){return S0(Hs(),_n())}function S0(t,i){return 4&t.type?new ab(i,t,Pd(t,i)):null}let gd=()=>null;function vd(t,i){return gd(t,i)}class qh{}class _b{}class K_{}class Q_{resolveComponentFactory(i){throw function mE(t){const i=Error(`No component factory found for ${Kr(t)}.`);return i.ngComponent=t,i}(i)}}let ip=(()=>{class t{static{this.NULL=new Q_}}return t})();class iu{}let Zh=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function Y_(){const t=_n(),r=ms(Hs().index,t);return(bs(r)?r:t)[Di]}()}}return t})(),O0=(()=>{class t{static{this.\u0275prov=ir({token:t,providedIn:"root",factory:()=>null})}}return t})();const Rg={};function F0(t,i){if(null!==function H(){return h}())throw new It(-602,!1)}const qd=new Set;function fc(t){qd.has(t)||(qd.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function rp(...t){}class Bo{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xc(!1),this.onMicrotaskEmpty=new Xc(!1),this.onStable=new Xc(!1),this.onError=new Xc(!1),typeof Zone>"u")throw new It(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!o&&r,d.shouldCoalesceRunChangeDetection=o,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function yb(){const t="function"==typeof Yn.requestAnimationFrame;let i=Yn[t?"requestAnimationFrame":"setTimeout"],r=Yn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&i&&r){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Fu(t){const i=()=>{!function Hc(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Yn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Pg(t),t.isCheckStableRunning=!0,Ng(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Pg(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,o,d,g,y,C)=>{if(function L0(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(C))return r.invokeTask(d,g,y,C);try{return Lu(t),r.invokeTask(d,g,y,C)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||t.shouldCoalesceRunChangeDetection)&&i(),bb(t)}},onInvoke:(r,o,d,g,y,C,B)=>{try{return Lu(t),r.invoke(d,g,y,C,B)}finally{t.shouldCoalesceRunChangeDetection&&i(),bb(t)}},onHasTask:(r,o,d,g)=>{r.hasTask(d,g),o===d&&("microTask"==g.change?(t._hasPendingMicrotasks=g.microTask,Pg(t),Ng(t)):"macroTask"==g.change&&(t.hasPendingMacrotasks=g.macroTask))},onHandleError:(r,o,d,g)=>(r.handleError(d,g),t.runOutsideAngular(()=>t.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bo.isInAngularZone())throw new It(909,!1)}static assertNotInAngularZone(){if(Bo.isInAngularZone())throw new It(909,!1)}run(i,r,o){return this._inner.run(i,r,o)}runTask(i,r,o,d){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+d,i,q_,rp,rp);try{return g.runTask(y,r,o)}finally{g.cancelTask(y)}}runGuarded(i,r,o){return this._inner.runGuarded(i,r,o)}runOutsideAngular(i){return this._outer.run(i)}}const q_={};function Ng(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Pg(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Lu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function bb(t){t._nesting--,Ng(t)}var Jh=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Jh||{});const Eb={destroy(){}};function ku(t,i){const r=i?.injector??$i(cc);(i?.runOnServer||Jc(r))&&r.get(Zd).internalCallbacks.push(t)}function k0(t,i){!i&&Nn();const r=i?.injector??$i(cc);if(!Jc(r))return Eb;fc("NgAfterNextRender");const o=r.get(Zd),d=o.handler??=new Fg,g=i?.phase??Jh.MixedReadWrite,y=()=>{d.unregister(B),C()},C=r.get(nd).onDestroy(y),B=Kt(r,()=>new Og(g,()=>{y(),t()}));return d.register(B),{destroy:y}}class Og{constructor(i,r){this.phase=i,this.callbackFn=r,this.zone=$i(Bo),this.errorHandler=$i(Bc,{optional:!0}),$i(qh,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(i){this.errorHandler?.handleError(i)}}}class Fg{constructor(){this.executingCallbacks=!1,this.buckets={[Jh.EarlyRead]:new Set,[Jh.Write]:new Set,[Jh.MixedReadWrite]:new Set,[Jh.Read]:new Set},this.deferredCallbacks=new Set}register(i){(this.executingCallbacks?this.deferredCallbacks:this.buckets[i.phase]).add(i)}unregister(i){this.buckets[i.phase].delete(i),this.deferredCallbacks.delete(i)}execute(){this.executingCallbacks=!0;for(const i of Object.values(this.buckets))for(const r of i)r.invoke();this.executingCallbacks=!1;for(const i of this.deferredCallbacks)this.buckets[i.phase].add(i);this.deferredCallbacks.clear()}destroy(){for(const i of Object.values(this.buckets))i.clear();this.deferredCallbacks.clear()}}let Zd=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const o of r)o()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=ir({token:t,providedIn:"root",factory:()=>new t})}}return t})();function _d(t){return!!me(t)}function B0(t,i,r){let o=r?t.styles:null,d=r?t.classes:null,g=0;if(null!==i)for(let y=0;y<i.length;y++){const C=i[y];"number"==typeof C?g=C:1==g?d=gr(d,C):2==g&&(o=gr(o,C+": "+i[++y]+";"))}r?t.styles=o:t.stylesWithoutHost=o,r?t.classes=d:t.classesWithoutHost=d}class U0 extends ip{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const r=zr(i);return new H0(r,this.ngModule)}}function Bg(t){const i=[];for(const r in t){if(!t.hasOwnProperty(r))continue;const o=t[r];void 0!==o&&i.push({propName:Array.isArray(o)?o[0]:o,templateName:r})}return i}class V0{constructor(i,r){this.injector=i,this.parentInjector=r}get(i,r,o){o=Xa(o);const d=this.injector.get(i,Rg,o);return d!==Rg||r===Rg?d:this.parentInjector.get(i,r,o)}}class H0 extends K_{get inputs(){const i=this.componentDef,r=i.inputTransforms,o=Bg(i.inputs);if(null!==r)for(const d of o)r.hasOwnProperty(d.propName)&&(d.transform=r[d.propName]);return o}get outputs(){return Bg(this.componentDef.outputs)}constructor(i,r){super(),this.componentDef=i,this.ngModule=r,this.componentType=i.type,this.selector=function nc(t){return t.map(fl).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!r}create(i,r,o,d){const g=oe(null);try{let y=(d=d||this.ngModule)instanceof bo?d:d?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const C=y?new V0(i,y):i,B=C.get(iu,null);if(null===B)throw new It(407,!1);const pe=C.get(O0,null),At={rendererFactory:B,sanitizer:pe,inlineEffectRunner:null,afterRenderEventManager:C.get(Zd,null),changeDetectionScheduler:C.get(qh,null)},Bt=B.createRenderer(null,this.componentDef),Jt=this.componentDef.selectors[0][0]||"div",bn=o?function D_(t,i,r,o){const g=o.get(jv,!1)||r===ha.ShadowDom,y=t.selectRootElement(i,g);return function Wd(t){Xf(t)}(y),y}(Bt,o,this.componentDef.encapsulation,C):Vd(Bt,Jt,function wb(t){const i=t.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(Jt));let jn=512;this.componentDef.signals?jn|=4096:this.componentDef.onPush||(jn|=16);let pi=null;null!==bn&&(pi=Zc(bn,C,!0));const In=$h(0,null,null,1,0,null,null,null,null,null,null),Vr=Gd(null,In,null,jn,null,null,At,Bt,C,null,pi);let co,Ko;hu(Vr);try{const Ml=this.componentDef;let Wc,am=null;Ml.findHostDirectiveDefs?(Wc=[],am=new Map,Ml.findHostDirectiveDefs(Ml,Wc,am),Wc.push(Ml)):Wc=[Ml];const JC=function J_(t,i){const r=t[Sn],o=br;return t[o]=i,Hh(r,o,2,"#host",null)}(Vr,bn),U2=function ey(t,i,r,o,d,g,y){const C=d[Sn];!function bE(t,i,r,o){for(const d of t)i.mergedAttrs=ie(i.mergedAttrs,d.hostAttrs);null!==i.mergedAttrs&&(B0(i,i.mergedAttrs,!0),null!==r&&h0(o,r,i))}(o,t,i,y);let B=null;null!==i&&(B=Zc(i,d[Ui]));const pe=g.rendererFactory.createRenderer(i,r);let Ie=16;r.signals?Ie=4096:r.onPush&&(Ie=64);const Je=Gd(d,Wh(r),null,Ie,d[t.index],t,g,pe,null,null,B);return C.firstCreatePass&&Kf(C,t,o.length-1),_0(d,Je),d[t.index]=Je}(JC,bn,Ml,Wc,Vr,At,Bt);Ko=Oo(In,br),bn&&function ty(t,i,r,o){if(o)Dl(t,r,["ng-version","17.3.12"]);else{const{attrs:d,classes:g}=function pl(t){const i=[],r=[];let o=1,d=2;for(;o<t.length;){let g=t[o];if("string"==typeof g)2===d?""!==g&&i.push(g,t[++o]):8===d&&r.push(g);else{if(!ra(d))break;d=g}o++}return{attrs:i,classes:r}}(i.selectors[0]);d&&Dl(t,r,d),g&&g.length>0&&w_(t,r,g.join(" "))}}(Bt,Ml,bn,o),void 0!==r&&function xE(t,i,r){const o=t.projection=[];for(let d=0;d<i.length;d++){const g=r[d];o.push(null!=g?Array.from(g):null)}}(Ko,this.ngContentSelectors,r),co=function z0(t,i,r,o,d,g){const y=Hs(),C=d[Sn],B=Ia(y,d);g0(C,d,y,r,null,o);for(let Ie=0;Ie<r.length;Ie++)Bl(pu(d,C,y.directiveStart+Ie,y),d);tu(C,d,y),B&&Bl(B,d);const pe=pu(d,C,y.directiveStart+y.componentOffset,y);if(t[ci]=d[ci]=pe,null!==g)for(const Ie of g)Ie(pe,i);return zh(C,y,d),pe}(U2,Ml,Wc,am,Vr,[ny]),Kh(In,Vr,null)}finally{Qu()}return new Tb(this.componentType,co,Pd(Ko,Vr),Vr,Ko)}finally{oe(g)}}}class Tb extends _b{constructor(i,r,o,d,g){super(),this.location=o,this._rootLView=d,this._tNode=g,this.previousInputValues=null,this.instance=r,this.hostView=this.changeDetectorRef=new Jf(d,void 0,!1),this.componentType=i}setInput(i,r){const o=this._tNode.inputs;let d;if(null!==o&&(d=o[i])){if(this.previousInputValues??=new Map,this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),r))return;const g=this._rootLView;gg(g[Sn],g,d,i,r),this.previousInputValues.set(i,r),Zf(ms(this._tNode.index,g))}}get injector(){return new Ra(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function ny(){const t=Hs();mf(_n()[Sn],t)}let ap=(()=>{class t{static{this.__NG_ELEMENT_ID__=eh}}return t})();function eh(){return Vg(Hs(),_n())}const EE=ap,iy=class extends EE{constructor(i,r,o){super(),this._lContainer=i,this._hostTNode=r,this._hostLView=o}get element(){return Pd(this._hostTNode,this._hostLView)}get injector(){return new Ra(this._hostTNode,this._hostLView)}get parentInjector(){const i=qu(this._hostTNode,this._hostLView);if(_h(i)){const r=Su(i,this._hostLView),o=fu(i);return new Ra(r[Sn].data[o+8],r)}return new Ra(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const r=Ug(this._lContainer);return null!==r&&r[i]||null}get length(){return this._lContainer.length-to}createEmbeddedView(i,r,o){let d,g;"number"==typeof o?d=o:null!=o&&(d=o.index,g=o.injector);const y=vd(this._lContainer,i.ssrId),C=i.createEmbeddedViewImpl(r||{},g,y);return this.insertImpl(C,d,fd(this._hostTNode,y)),C}createComponent(i,r,o,d,g){const y=i&&!function Wt(t){return"function"==typeof t}(i);let C;if(y)C=r;else{const Jt=r||{};C=Jt.index,o=Jt.injector,d=Jt.projectableNodes,g=Jt.environmentInjector||Jt.ngModuleRef}const B=y?i:new H0(zr(i)),pe=o||this.parentInjector;if(!g&&null==B.ngModule){const bn=(y?pe:this.parentInjector).get(bo,null);bn&&(g=bn)}const Ie=zr(B.componentType??{}),Je=vd(this._lContainer,Ie?.id??null),Bt=B.create(pe,d,Je?.firstChild??null,g);return this.insertImpl(Bt.hostView,C,fd(this._hostTNode,Je)),Bt}insert(i,r){return this.insertImpl(i,r,!0)}insertImpl(i,r,o){const d=i._lView;if(function pv(t){return go(t[Or])}(d)){const C=this.indexOf(i);if(-1!==C)this.detach(C);else{const B=d[Or],pe=new iy(B,B[ys],B[Or]);pe.detach(pe.indexOf(i))}}const g=this._adjustIndex(r),y=this._lContainer;return $d(y,d,g,o),i.attachToViewContainerRef(),ba(Bu(y),g,i),i}move(i,r){return this.insert(i,r)}indexOf(i){const r=Ug(this._lContainer);return null!==r?r.indexOf(i):-1}remove(i){const r=this._adjustIndex(i,-1),o=cd(this._lContainer,r);o&&(Po(Bu(this._lContainer),r),Hf(o[Sn],o))}detach(i){const r=this._adjustIndex(i,-1),o=cd(this._lContainer,r);return o&&null!=Po(Bu(this._lContainer),r)?new Jf(o):null}_adjustIndex(i,r=0){return i??this.length+r}};function Ug(t){return t[8]}function Bu(t){return t[8]||(t[8]=[])}function Vg(t,i){let r;const o=i[t.index];return go(o)?r=o:(r=jh(o,i,null,t),i[t.index]=r,_0(i,r)),bd(r,i,t,o),new iy(r,t,i)}let bd=function xd(t,i,r,o){if(t[nl])return;let d;d=8&r.type?Ps(o):function Db(t,i){const r=t[Di],o=r.createComment(""),d=Ia(i,t);return ud(r,c0(r,d),o,function S_(t,i){return t.nextSibling(i)}(r,d),!1),o}(i,r),t[nl]=d},ry=()=>!1;function sy(t,i,r){return ry(t,i,r)}class ay{constructor(i){this.queryList=i,this.matches=null}clone(){return new ay(this.queryList)}setDirty(){this.queryList.setDirty()}}class ly{constructor(i=[]){this.queries=i}createEmbeddedView(i){const r=i.queries;if(null!==r){const o=null!==i.contentQueries?i.contentQueries[0]:r.length,d=[];for(let g=0;g<o;g++){const y=r.getByIndex(g);d.push(this.queries[y.indexInDeclarationView].clone())}return new ly(d)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}finishViewCreation(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let r=0;r<this.queries.length;r++)null!==py(i,r).matches&&this.queries[r].setDirty()}}class cy{constructor(i,r,o=null){this.flags=r,this.read=o,this.predicate="string"==typeof i?function SE(t){return t.split(",").map(i=>i.trim())}(i):i}}class lp{constructor(i=[]){this.queries=i}elementStart(i,r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(i,r)}elementEnd(i){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(i)}embeddedTView(i){let r=null;for(let o=0;o<this.length;o++){const d=null!==r?r.length:0,g=this.getByIndex(o).embeddedTView(i,d);g&&(g.indexInDeclarationView=o,null!==r?r.push(g):r=[g])}return null!==r?new lp(r):null}template(i,r){for(let o=0;o<this.queries.length;o++)this.queries[o].template(i,r)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Hg{constructor(i,r=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(i,r){this.isApplyingToNode(r)&&this.matchTNode(i,r)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,r){this.elementStart(i,r)}embeddedTView(i,r){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,r),new Hg(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1&~this.metadata.flags){const r=this._declarationNodeIndex;let o=i.parent;for(;null!==o&&8&o.type&&o.index!==r;)o=o.parent;return r===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(i,r){const o=this.metadata.predicate;if(Array.isArray(o))for(let d=0;d<o.length;d++){const g=o[d];this.matchTNodeWithReadOption(i,r,zg(r,g)),this.matchTNodeWithReadOption(i,r,Zu(r,i,g,!1,!1))}else o===ep?4&r.type&&this.matchTNodeWithReadOption(i,r,-1):this.matchTNodeWithReadOption(i,r,Zu(r,i,o,!1,!1))}matchTNodeWithReadOption(i,r,o){if(null!==o){const d=this.metadata.read;if(null!==d)if(d===wh||d===ap||d===ep&&4&r.type)this.addMatch(r.index,-2);else{const g=Zu(r,i,d,!1,!1);null!==g&&this.addMatch(r.index,g)}else this.addMatch(r.index,o)}}addMatch(i,r){null===this.matches?this.matches=[i,r]:this.matches.push(i,r)}}function zg(t,i){const r=t.localNames;if(null!==r)for(let o=0;o<r.length;o+=2)if(r[o]===i)return r[o+1];return null}function Rb(t,i,r,o){return-1===r?function Ib(t,i){return 11&t.type?Pd(t,i):4&t.type?S0(t,i):null}(i,t):-2===r?function Nb(t,i,r){return r===wh?Pd(i,t):r===ep?S0(i,t):r===ap?Vg(i,t):void 0}(t,i,o):pu(t,t[Sn],r,i)}function uy(t,i,r,o){const d=i[Jo].queries[o];if(null===d.matches){const g=t.data,y=r.matches,C=[];for(let B=0;null!==y&&B<y.length;B+=2){const pe=y[B];C.push(pe<0?null:Rb(i,g[pe],y[B+1],r.metadata.read))}d.matches=C}return d.matches}function Gg(t,i,r,o){const d=t.queries.getByIndex(r),g=d.matches;if(null!==g){const y=uy(t,i,d,r);for(let C=0;C<g.length;C+=2){const B=g[C];if(B>0)o.push(y[C/2]);else{const pe=g[C+1],Ie=i[-B];for(let Je=to;Je<Ie.length;Je++){const At=Ie[Je];At[Il]===At[Or]&&Gg(At[Sn],At,pe,o)}if(null!==Ie[xr]){const Je=Ie[xr];for(let At=0;At<Je.length;At++){const Bt=Je[At];Gg(Bt[Sn],Bt,pe,o)}}}}}return o}function Wg(t,i){return t[Jo].queries[i].queryList}function dy(t,i,r){const o=new wf(!(4&~r));return function Pu(t,i,r,o){const d=Xh(i);d.push(r),t.firstCreatePass&&mg(t).push(o,d.length-1)}(t,i,o,o.destroy),(i[Jo]??=new ly).queries.push(new ay(o))-1}function hy(t,i,r){const o=Cs();return o.firstCreatePass&&(fy(o,new cy(t,i,r),-1),!(2&~i)&&(o.staticViewQueries=!0)),dy(o,_n(),i)}function fy(t,i,r){null===t.queries&&(t.queries=new lp),t.queries.track(new Hg(i,r))}function py(t,i){return t.queries.getByIndex(i)}function $g(t,i){const r=t[Sn],o=py(r,i);return o.crossesNgTemplate?Gg(r,t,i,[]):uy(r,t,o,i)}function Ob(t,i){fc("NgSignals");const r=function Fe(t){const i=Object.create(st);i.value=t;const r=()=>(q(i),i.value);return r[X]=i,r}(t),o=r[X];return i?.equal&&(o.equal=i.equal),r.set=d=>Vt(o,d),r.update=d=>function vt(t,i){Ae()||Be(),Vt(t,i(t.value))}(o,d),r.asReadonly=jg.bind(r),r}function jg(){const t=this[X];if(void 0===t.readonlyFn){const i=()=>this();i[X]=t,t.readonlyFn=i}return t.readonlyFn}function Fb(t){return function my(t){return"function"==typeof t&&void 0!==t[X]}(t)&&"function"==typeof t.set}function G0(t,i){let r;const o=ae(()=>{r._dirtyCounter();const d=function gy(t,i){const r=t._lView,o=t._queryIndex;if(void 0===r||void 0===o||4&r[ti])return i?void 0:Jr;const d=Wg(r,o),g=$g(r,o);return d.reset(g,Cf),i?d.first:d._changesDetected||void 0===t._flatValue?t._flatValue=d.toArray():t._flatValue}(r,t);if(i&&void 0===d)throw new It(-951,!1);return d});return r=o[X],r._dirtyCounter=Ob(0),r._flatValue=void 0,o}function Bb(t,i){return function W0(){return G0(!0,!1)}()}const $0=(Bb.required=function vy(t,i){return function Lb(){return G0(!0,!0)}()},Bb);function dp(t){let i=function _y(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),r=!0;const o=[t];for(;i;){let d;if(Ya(t))d=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new It(903,!1);d=i.\u0275dir}if(d){if(r){o.push(d);const y=t;y.inputs=q0(t.inputs),y.inputTransforms=q0(t.inputTransforms),y.declaredInputs=q0(t.declaredInputs),y.outputs=q0(t.outputs);const C=d.hostBindings;C&&Yb(t,C);const B=d.viewQuery,pe=d.contentQueries;if(B&&Kb(t,B),pe&&Qb(t,pe),yy(t,d),Ir(t.outputs,d.outputs),Ya(d)&&d.data.animation){const Ie=t.data;Ie.animation=(Ie.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let y=0;y<g.length;y++){const C=g[y];C&&C.ngInherit&&C(t),C===dp&&(r=!1)}}i=Object.getPrototypeOf(i)}!function Y0(t){let i=0,r=null;for(let o=t.length-1;o>=0;o--){const d=t[o];d.hostVars=i+=d.hostVars,d.hostAttrs=ie(d.hostAttrs,r=ie(r,d.hostAttrs))}}(o)}function yy(t,i){for(const r in i.inputs){if(!i.inputs.hasOwnProperty(r)||t.inputs.hasOwnProperty(r))continue;const o=i.inputs[r];if(void 0!==o&&(t.inputs[r]=o,t.declaredInputs[r]=i.declaredInputs[r],null!==i.inputTransforms)){const d=Array.isArray(o)?o[0]:o;if(!i.inputTransforms.hasOwnProperty(d))continue;t.inputTransforms??={},t.inputTransforms[d]=i.inputTransforms[d]}}}function q0(t){return t===zo?{}:t===Jr?[]:t}function Kb(t,i){const r=t.viewQuery;t.viewQuery=r?(o,d)=>{i(o,d),r(o,d)}:i}function Qb(t,i){const r=t.contentQueries;t.contentQueries=r?(o,d,g)=>{i(o,d,g),r(o,d,g)}:i}function Yb(t,i){const r=t.hostBindings;t.hostBindings=r?(o,d)=>{i(o,d),r(o,d)}:i}function by(t){const i=r=>{const o=(Array.isArray(t)?t:t()).map(d=>"function"==typeof d?{directive:Rt(d),inputs:zo,outputs:zo}:{directive:Rt(d.directive),inputs:Ey(d.inputs),outputs:Ey(d.outputs)});null===r.hostDirectives?(r.findHostDirectiveDefs=xy,r.hostDirectives=o):r.hostDirectives.unshift(...o)};return i.ngInherit=!0,i}function xy(t,i,r){if(null!==t.hostDirectives)for(const o of t.hostDirectives){const d=nt(o.directive);ex(d.declaredInputs,o.inputs),xy(d,i,r),r.set(d,o),i.push(d)}}function Ey(t){if(void 0===t||0===t.length)return zo;const i={};for(let r=0;r<t.length;r+=2)i[t[r]]=t[r+1];return i}function ex(t,i){for(const r in i)i.hasOwnProperty(r)&&(t[i[r]]=t[r])}function My(t){const i=t.inputConfig,r={};for(const o in i)if(i.hasOwnProperty(o)){const d=i[o];Array.isArray(d)&&d[3]&&(r[o]=d[3])}t.inputTransforms=r}class rh{}class Cy{}function tx(t,i){return new e(t,i??null,[])}class e extends rh{constructor(i,r,o){super(),this._parent=r,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new U0(this);const d=me(i);this._bootstrapComponents=Mc(d.bootstrap),this._r3Injector=Mm(i,r,[{provide:rh,useValue:this},{provide:ip,useValue:this.componentFactoryResolver},...o],Kr(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class n extends Cy{constructor(i){super(),this.moduleType=i}create(i){return new e(this.moduleType,i,[])}}class a extends rh{constructor(i){super(),this.componentFactoryResolver=new U0(this),this.instance=null;const r=new Aa([...i.providers,{provide:rh,useValue:this},{provide:ip,useValue:this.componentFactoryResolver}],i.parent||Xl(),i.debugName,new Set(["environment"]));this.injector=r,i.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function u(t,i,r=null){return new a({providers:t,parent:i,debugName:r,runEnvironmentInitializers:!0}).injector}let p=(()=>{class t{constructor(){this.cachedInjectors=new Map}getOrCreateInjector(r,o,d,g){if(!this.cachedInjectors.has(r)){const y=d.length>0?u(d,o,g):null;this.cachedInjectors.set(r,y)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ir({token:t,providedIn:"environment",factory:()=>new t})}}return t})(),V=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Xt.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=ir({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function se(t){return!!J(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function J(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Le(t,i,r){return t[i]=r}function Ct(t,i,r){return!Object.is(t[i],r)&&(t[i]=r,!0)}function ft(t,i,r,o){const d=Ct(t,i,r);return Ct(t,i+1,o)||d}function Nt(t,i,r,o,d,g,y,C){const B=_n(),pe=Cs(),Ie=t+br,Je=pe.firstCreatePass?function je(t,i,r,o,d,g,y,C,B){const pe=i.consts,Ie=Hh(i,t,4,y||null,Oc(pe,C));N_(i,r,Ie,Oc(pe,B)),mf(i,Ie);const Je=Ie.tView=$h(2,Ie,o,d,g,i.directiveRegistry,i.pipeRegistry,null,i.schemas,pe,null);return null!==i.queries&&(i.queries.template(i,Ie),Je.queries=i.queries.embeddedTView(Ie)),Ie}(Ie,pe,B,i,r,o,d,g,y):pe.data[Ie];$o(Je,!1);const At=mn(pe,B,Je,t);mh()&&Ru(pe,B,At,Je),Bl(At,B);const Bt=jh(At,B,At,Je);return B[Ie]=Bt,_0(B,Bt),sy(Bt,Je,B),Wo(Je)&&Gh(pe,B,Je),null!=y&&p0(B,Je,C),Nt}let mn=function ln(t,i,r,o){return ac(!0),i[Di].createComment("")};var sn=function(t){return t[t.NOT_STARTED=0]="NOT_STARTED",t[t.IN_PROGRESS=1]="IN_PROGRESS",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t}(sn||{});const ri=0,xn=1;var Qn=function(t){return t[t.Placeholder=0]="Placeholder",t[t.Loading=1]="Loading",t[t.Complete=2]="Complete",t[t.Error=3]="Error",t}(Qn||{}),Ii=function(t){return t[t.Initial=-1]="Initial",t}(Ii||{});const Vi=0,os=1,Zs=2,An=3,mi=4,er=5;var _i=function(t){return t[t.Manual=0]="Manual",t[t.Playthrough=1]="Playthrough",t}(_i||{});function Cr(t,i,r){const o=1===t?er:mi;null===i[o]&&(i[o]=[]),i[o].push(r)}function $r(t,i){const r=1===t?er:mi,o=i[r];if(null!==o){for(const d of o)d();i[r]=null}}function jr(t){$r(1,t),$r(0,t)}function zs(t){return t+1}function Rn(t,i){return t[zs(i.index)]}function xt(t,i){const r=zs(i.index);return t.data[r]}function Hi(t,i){return i===Qn.Placeholder?t.placeholderBlockConfig?.[ri]??null:i===Qn.Loading?t.loadingBlockConfig?.[ri]??null:null}function bi(t){return t.loadingBlockConfig?.[xn]??null}function Br(t,i){if(!t||0===t.length)return i;const r=new Set(t);for(const o of i)r.add(o);return t.length===r.size?t:Array.from(r)}const Cn=new WeakMap;let Fi=null,Os=0;class ei{constructor(){this.callbacks=new Set,this.listener=()=>{for(const i of this.callbacks)i()}}}function ts(t,i,r){const o=r.get(Bo);let d=Cn.get(t);return Fi=Fi||o.runOutsideAngular(()=>new IntersectionObserver(g=>{for(const y of g)y.isIntersecting&&Cn.has(y.target)&&o.run(Cn.get(y.target).listener)})),d||(d=new ei,o.runOutsideAngular(()=>Fi.observe(t)),Cn.set(t,d),Os++),d.callbacks.add(i),()=>{Cn.has(t)&&(d.callbacks.delete(i),0===d.callbacks.size&&(Fi?.unobserve(t),Cn.delete(t),Os--),0===Os&&(Fi?.disconnect(),Fi=null))}}let ki=(()=>{class t{constructor(){this.executingCallbacks=!1,this.timeoutId=null,this.invokeTimerAt=null,this.current=[],this.deferred=[]}add(r,o){this.addToQueue(this.executingCallbacks?this.deferred:this.current,Date.now()+r,o),this.scheduleTimer()}remove(r){const{current:o,deferred:d}=this;-1===this.removeFromQueue(o,r)&&this.removeFromQueue(d,r),0===o.length&&0===d.length&&this.clearTimeout()}addToQueue(r,o,d){let g=r.length;for(let y=0;y<r.length;y+=2)if(r[y]>o){g=y;break}Gl(r,g,o,d)}removeFromQueue(r,o){let d=-1;for(let g=0;g<r.length;g+=2)if(r[g+1]===o){d=g;break}return d>-1&&Tl(r,d,2),d}scheduleTimer(){const r=()=>{this.clearTimeout(),this.executingCallbacks=!0;const d=[...this.current],g=Date.now();for(let C=0;C<d.length;C+=2){const pe=d[C+1];if(!(d[C]<=g))break;pe()}let y=-1;for(let C=0;C<this.current.length&&this.current[C]<=g;C+=2)y=C+1;if(y>=0&&Tl(this.current,0,y+1),this.executingCallbacks=!1,this.deferred.length>0){for(let C=0;C<this.deferred.length;C+=2)this.addToQueue(this.current,this.deferred[C],this.deferred[C+1]);this.deferred.length=0}this.scheduleTimer()};if(this.current.length>0){const d=Date.now(),g=this.current[0];if(null===this.timeoutId||this.invokeTimerAt&&this.invokeTimerAt-g>16){this.clearTimeout();const y=Math.max(g-d,16);this.invokeTimerAt=g,this.timeoutId=setTimeout(r,y)}}}clearTimeout(){null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}ngOnDestroy(){this.clearTimeout(),this.current.length=0,this.deferred.length=0}static{this.\u0275prov=ir({token:t,providedIn:"root",factory:()=>new t})}}return t})();const wa=new pt("");let _o=null;function zc(t,i,r,o){const d=t.consts;null!=r&&(i.placeholderBlockConfig=Oc(d,r)),null!=o&&(i.loadingBlockConfig=Oc(d,o)),null===_o&&(_o=Ni)}function _u(t,i,r,o,d,g,y,C,B){const pe=_n(),Ie=Cs(),Je=t+br;if(Nt(t,null,0,0),Ie.firstCreatePass){fc("NgDefer");const jn={primaryTmplIndex:i,loadingTmplIndex:o??null,placeholderTmplIndex:d??null,errorTmplIndex:g??null,placeholderBlockConfig:null,loadingBlockConfig:null,dependencyResolverFn:r??null,loadingState:sn.NOT_STARTED,loadingPromise:null,providers:null};B?.(Ie,jn,C,y),function Er(t,i,r){const o=zs(i);t.data[o]=r}(Ie,Je,jn)}const At=Hs();sy(pe[Je],At,pe);const Jt=[null,Ii.Initial,null,null,null,null];!function di(t,i,r){t[zs(i)]=r}(pe,Je,Jt);const bn=()=>jr(Jt);Cr(0,Jt,()=>uh(pe,bn)),kl(pe,bn)}function Py(t,i){const r=_n(),o=Hs();(function nr(t,i){on(Qn.Placeholder,i,t[i.index])})(r,o),function as(t,i,r,o,d,g,y){const C=t[Ui];ku(function B(){if(cu(t))return;const pe=Rn(t,i),Ie=pe[os];if(Ie!==Ii.Initial&&Ie!==Qn.Placeholder)return;const Je=function tr(t,i,r){return null==r?t:r>=0?gp(r,t):t[i.index][to]??null}(t,i,o);if(!Je)return void ku(B,{injector:C});if(cu(Je))return;const At=function Js(t,i){return $a(br+i,t)}(Je,r),Bt=d(At,()=>{t!==Je&&uh(Je,Bt),g()},C);t!==Je&&kl(Je,Bt),Cr(y,pe,Bt)},{injector:C})}(r,o,t,i,ts,()=>function Eo(t,i){const r=t[Sn],o=t[i.index];if(!function ol(t){return t.get(wa,null,{optional:!0})?.behavior!==_i.Manual&&Jc(t)}(t[Ui]))return;const g=Rn(t,i),y=xt(r,i);switch(jr(g),y.loadingState){case sn.NOT_STARTED:on(Qn.Loading,i,o),function gs(t,i,r){const o=i[Ui],d=i[Sn];if(t.loadingState!==sn.NOT_STARTED)return t.loadingPromise??Promise.resolve();const g=Rn(i,r),y=function Wi(t,i){return Oo(t,i.primaryTmplIndex+br)}(d,t);t.loadingState=sn.IN_PROGRESS,$r(1,g);let C=t.dependencyResolverFn;const B=o.get(V),pe=B.add();return C?(t.loadingPromise=Promise.allSettled(C()).then(Ie=>{let Je=!1;const At=[],Bt=[];for(const Jt of Ie){if("fulfilled"!==Jt.status){Je=!0;break}{const bn=Jt.value,jn=zr(bn)||nt(bn);if(jn)At.push(jn);else{const pi=Me(bn);pi&&Bt.push(pi)}}}if(t.loadingPromise=null,B.remove(pe),Je){if(t.loadingState=sn.FAILED,null===t.errorTmplIndex){Zm(i);const bn=new It(750,!1);Qf(i,bn)}}else{t.loadingState=sn.COMPLETE;const Jt=y.tView;if(At.length>0){Jt.directiveRegistry=Br(Jt.directiveRegistry,At);const jn=fr(!1,...At.map(pi=>pi.type));t.providers=jn}Bt.length>0&&(Jt.pipeRegistry=Br(Jt.pipeRegistry,Bt))}}),t.loadingPromise):(t.loadingPromise=Promise.resolve().then(()=>{t.loadingPromise=null,t.loadingState=sn.COMPLETE,B.remove(pe)}),t.loadingPromise)}(y,t,i),y.loadingState===sn.IN_PROGRESS&&$s(y,i,o);break;case sn.IN_PROGRESS:on(Qn.Loading,i,o),$s(y,i,o);break;case sn.COMPLETE:on(Qn.Complete,i,o);break;case sn.FAILED:on(Qn.Error,i,o)}}(r,o),0)}function on(t,i,r,o=!1){const d=r[Or],g=d[Sn];if(cu(d))return;const y=Rn(d,i);if(sr(y[os],t)&&sr(y[Vi]??-1,t)){const B=d[Ui],pe=xt(g,i),Je=o||!Jc(B)||null===bi(pe)&&null===Hi(pe,Qn.Loading)&&!Hi(pe,Qn.Placeholder)?hi:_o;try{Je(t,y,r,i,d)}catch(At){Qf(d,At)}}}function hi(t,i,r,o,d){const g=function qn(t,i,r){const d=xt(i[Sn],r);switch(t){case Qn.Complete:return d.primaryTmplIndex;case Qn.Loading:return d.loadingTmplIndex;case Qn.Error:return d.errorTmplIndex;case Qn.Placeholder:return d.placeholderTmplIndex;default:return null}}(t,d,o);if(null!==g){i[os]=t;const y=d[Sn],B=Oo(y,g+br),pe=0;let Ie;if(jd(r,pe),t===Qn.Complete){const Bt=xt(y,o),Jt=Bt.providers;if(Jt&&Jt.length>0){const bn=d[Ui],jn=function dn(t){return t instanceof V0&&"function"==typeof t.injector.__ngOutletInjector}(bn),pi=jn?bn:bn.get(bo);Ie=pi.get(p).getOrCreateInjector(Bt,pi,Jt,""),jn&&(Ie=function qt(t,i){return t.injector.__ngOutletInjector(i)}(bn,Ie))}}const Je=vd(r,B.tView.ssrId),At=hd(d,B,null,{dehydratedView:Je,injector:Ie});$d(r,At,pe,fd(B,Je)),Zf(At)}}function Ni(t,i,r,o,d){const g=Date.now(),C=xt(d[Sn],o);if(null===i[Zs]||i[Zs]<=g){i[Zs]=null;const B=bi(C),pe=null!==i[An];if(t!==Qn.Loading||null===B||pe){t>Qn.Loading&&pe&&(i[An](),i[An]=null,i[Vi]=null),hi(t,i,r,o,d);const Ie=Hi(C,t);null!==Ie&&(i[Zs]=g+Ie,pr(Ie,i,o,r,d))}else{i[Vi]=t;const Ie=pr(B,i,o,r,d);i[An]=Ie}}else i[Vi]=t}function pr(t,i,r,o,d){return function Li(t,i,r){const d=r[Ui].get(ki);return d.add(t,i),()=>d.remove(i)}(t,()=>{const y=i[Vi];i[Zs]=null,i[Vi]=null,null!==y&&on(y,r,o)},d)}function sr(t,i){return t<i}function $s(t,i,r){t.loadingPromise.then(()=>{t.loadingState===sn.COMPLETE?on(Qn.Complete,i,r):t.loadingState===sn.FAILED&&on(Qn.Error,i,r)})}function So(t,i,r,o){const d=_n();return Ct(d,oc(),i)&&(Cs(),nu(ko(),d,t,i,r,o)),So}function js(t,i,r,o){return Ct(t,oc(),r)?i+Gi(r)+o:qr}function or(t,i,r,o,d,g){const C=ft(t,function bc(){return rr.lFrame.bindingIndex}(),r,d);return Fc(2),C?i+Gi(r)+o+Gi(d)+g:qr}function Oy(t,i){return t<<17|i<<2}function nf(t){return t>>17&32767}function rx(t){return 2|t}function hp(t){return(131068&t)>>2}function sx(t,i){return-131069&t|i<<2}function ox(t){return 1|t}function NE(t,i,r,o){const d=t[r+1],g=null===i;let y=o?nf(d):hp(d),C=!1;for(;0!==y&&(!1===C||g);){const pe=t[y+1];vw(t[y],i)&&(C=!0,t[y+1]=o?ox(pe):rx(pe)),y=o?nf(pe):hp(pe)}C&&(t[r+1]=o?rx(d):ox(d))}function vw(t,i){return null===t||null==i||(Array.isArray(t)?t[1]:t)===i||!(!Array.isArray(t)||"string"!=typeof i)&&ia(t,i)>=0}const El={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function PE(t){return t.substring(El.key,El.keyEnd)}function OE(t,i){const r=El.textEnd;return r===i?-1:(i=El.keyEnd=function xw(t,i,r){for(;i<r&&t.charCodeAt(i)>32;)i++;return i}(t,El.key=i,r),em(t,i,r))}function em(t,i,r){for(;i<r&&t.charCodeAt(i)<=32;)i++;return i}function ax(t,i,r){const o=_n();return Ct(o,oc(),i)&&xl(Cs(),ko(),o,t,i,o[Di],r,!1),ax}function lx(t,i,r,o,d){const y=d?"class":"style";gg(t,r,i.inputs[y],y,o)}function cx(t,i,r){return Hu(t,i,r,!1),cx}function ux(t,i){return Hu(t,i,null,!0),ux}function UE(t){zu(Iw,Sd,t,!0)}function Sd(t,i){for(let r=function yw(t){return function LE(t){El.key=0,El.keyEnd=0,El.value=0,El.valueEnd=0,El.textEnd=t.length}(t),OE(t,em(t,0,El.textEnd))}(i);r>=0;r=OE(i,r))qo(t,PE(i),!0)}function Hu(t,i,r,o){const d=_n(),g=Cs(),y=Fc(2);g.firstUpdatePass&&HE(g,t,y,o),i!==qr&&Ct(d,y,i)&&GE(g,g.data[_l()],d,d[Di],t,d[y+1]=function Nw(t,i){return null==t||""===t||("string"==typeof i?t+=i:"object"==typeof t&&(t=Kr(Du(t)))),t}(i,r),o,y)}function zu(t,i,r,o){const d=Cs(),g=Fc(2);d.firstUpdatePass&&HE(d,null,g,o);const y=_n();if(r!==qr&&Ct(y,g,r)){const C=d.data[_l()];if($E(C,o)&&!VE(d,g)){let B=o?C.classesWithoutHost:C.stylesWithoutHost;null!==B&&(r=gr(B,r||"")),lx(d,C,y,r,o)}else!function Rw(t,i,r,o,d,g,y,C){d===qr&&(d=Jr);let B=0,pe=0,Ie=0<d.length?d[0]:null,Je=0<g.length?g[0]:null;for(;null!==Ie||null!==Je;){const At=B<d.length?d[B+1]:void 0,Bt=pe<g.length?g[pe+1]:void 0;let bn,Jt=null;Ie===Je?(B+=2,pe+=2,At!==Bt&&(Jt=Je,bn=Bt)):null===Je||null!==Ie&&Ie<Je?(B+=2,Jt=Ie):(pe+=2,Jt=Je,bn=Bt),null!==Jt&&GE(t,i,r,o,Jt,bn,y,C),Ie=B<d.length?d[B]:null,Je=pe<g.length?g[pe]:null}}(d,C,y,y[Di],y[g+1],y[g+1]=function Aw(t,i,r){if(null==r||""===r)return Jr;const o=[],d=Du(r);if(Array.isArray(d))for(let g=0;g<d.length;g++)t(o,d[g],!0);else if("object"==typeof d)for(const g in d)d.hasOwnProperty(g)&&t(o,g,d[g]);else"string"==typeof d&&i(o,d);return o}(t,i,r),o,g)}}function VE(t,i){return i>=t.expandoStartIndex}function HE(t,i,r,o){const d=t.data;if(null===d[r+1]){const g=d[_l()],y=VE(t,r);$E(g,o)&&null===i&&!y&&(i=!1),i=function Cw(t,i,r,o){const d=Ku(t);let g=o?i.residualClasses:i.residualStyles;if(null===d)0===(o?i.classBindings:i.styleBindings)&&(r=Jg(r=dx(null,t,i,r,o),i.attrs,o),g=null);else{const y=i.directiveStylingLast;if(-1===y||t[y]!==d)if(r=dx(d,t,i,r,o),null===g){let B=function ww(t,i,r){const o=r?i.classBindings:i.styleBindings;if(0!==hp(o))return t[nf(o)]}(t,i,o);void 0!==B&&Array.isArray(B)&&(B=dx(null,t,i,B[1],o),B=Jg(B,i.attrs,o),function Tw(t,i,r,o){t[nf(r?i.classBindings:i.styleBindings)]=o}(t,i,o,B))}else g=function Dw(t,i,r){let o;const d=i.directiveEnd;for(let g=1+i.directiveStylingLast;g<d;g++)o=Jg(o,t[g].hostAttrs,r);return Jg(o,i.attrs,r)}(t,i,o)}return void 0!==g&&(o?i.residualClasses=g:i.residualStyles=g),r}(d,g,i,o),function mw(t,i,r,o,d,g){let y=g?i.classBindings:i.styleBindings,C=nf(y),B=hp(y);t[o]=r;let Ie,pe=!1;if(Array.isArray(r)?(Ie=r[1],(null===Ie||ia(r,Ie)>0)&&(pe=!0)):Ie=r,d)if(0!==B){const At=nf(t[C+1]);t[o+1]=Oy(At,C),0!==At&&(t[At+1]=sx(t[At+1],o)),t[C+1]=function fw(t,i){return 131071&t|i<<17}(t[C+1],o)}else t[o+1]=Oy(C,0),0!==C&&(t[C+1]=sx(t[C+1],o)),C=o;else t[o+1]=Oy(B,0),0===C?C=o:t[B+1]=sx(t[B+1],o),B=o;pe&&(t[o+1]=rx(t[o+1])),NE(t,Ie,o,!0),NE(t,Ie,o,!1),function gw(t,i,r,o,d){const g=d?t.residualClasses:t.residualStyles;null!=g&&"string"==typeof i&&ia(g,i)>=0&&(r[o+1]=ox(r[o+1]))}(i,Ie,t,o,g),y=Oy(C,B),g?i.classBindings=y:i.styleBindings=y}(d,g,i,r,y,o)}}function dx(t,i,r,o,d){let g=null;const y=r.directiveEnd;let C=r.directiveStylingLast;for(-1===C?C=r.directiveStart:C++;C<y&&(g=i[C],o=Jg(o,g.hostAttrs,d),g!==t);)C++;return null!==t&&(r.directiveStylingLast=C),o}function Jg(t,i,r){const o=r?1:2;let d=-1;if(null!==i)for(let g=0;g<i.length;g++){const y=i[g];"number"==typeof y?d=y:d===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),qo(t,y,!!r||i[++g]))}return void 0===t?null:t}function Iw(t,i,r){const o=String(i);""!==o&&!o.includes(" ")&&qo(t,o,r)}function GE(t,i,r,o,d,g,y,C){if(!(3&i.type))return;const B=t.data,pe=B[C+1],Ie=function pw(t){return!(1&~t)}(pe)?WE(B,i,r,d,hp(pe),y):void 0;Fy(Ie)||(Fy(g)||function hw(t){return!(2&~t)}(pe)&&(g=WE(B,null,r,d,C,y)),function X1(t,i,r,o,d){if(i)d?t.addClass(r,o):t.removeClass(r,o);else{let g=-1===o.indexOf("-")?void 0:Oh.DashCase;null==d?t.removeStyle(r,o,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Oh.Important),t.setStyle(r,o,d,g))}}(o,y,$a(_l(),r),d,g))}function WE(t,i,r,o,d,g){const y=null===i;let C;for(;d>0;){const B=t[d],pe=Array.isArray(B),Ie=pe?B[1]:B,Je=null===Ie;let At=r[d+1];At===qr&&(At=Je?Jr:void 0);let Bt=Je?ul(At,o):Ie===o?At:void 0;if(pe&&!Fy(Bt)&&(Bt=ul(B,o)),Fy(Bt)&&(C=Bt,y))return C;const Jt=t[d+1];d=y?nf(Jt):hp(Jt)}if(null!==i){let B=g?i.residualClasses:i.residualStyles;null!=B&&(C=ul(B,o))}return C}function Fy(t){return void 0!==t}function $E(t,i){return!!(t.flags&(i?8:16))}function jE(t,i,r){zu(qo,Sd,js(_n(),t,i,r),!0)}class zw{destroy(i){}updateValue(i,r){}swap(i,r){const o=Math.min(i,r),d=Math.max(i,r),g=this.detach(d);if(d-o>1){const y=this.detach(o);this.attach(o,g),this.attach(d,y)}else this.attach(o,g)}move(i,r){this.attach(r,this.detach(i))}}function hx(t,i,r,o,d){return t===r&&Object.is(i,o)?1:Object.is(d(t,i),d(r,o))?-1:0}function fx(t,i,r,o){return!(void 0===i||!i.has(o)||(t.attach(r,i.get(o)),i.delete(o),0))}function XE(t,i,r,o,d){if(fx(t,i,o,r(o,d)))t.updateValue(o,d);else{const g=t.create(o,d);t.attach(o,g)}}function KE(t,i,r,o){const d=new Set;for(let g=i;g<=r;g++)d.add(o(g,t.at(g)));return d}class QE{constructor(){this.kvMap=new Map,this._vMap=void 0}has(i){return this.kvMap.has(i)}delete(i){if(!this.has(i))return!1;const r=this.kvMap.get(i);return void 0!==this._vMap&&this._vMap.has(r)?(this.kvMap.set(i,this._vMap.get(r)),this._vMap.delete(r)):this.kvMap.delete(i),!0}get(i){return this.kvMap.get(i)}set(i,r){if(this.kvMap.has(i)){let o=this.kvMap.get(i);void 0===this._vMap&&(this._vMap=new Map);const d=this._vMap;for(;d.has(o);)o=d.get(o);d.set(o,r)}else this.kvMap.set(i,r)}forEach(i){for(let[r,o]of this.kvMap)if(i(o,r),void 0!==this._vMap){const d=this._vMap;for(;d.has(o);)o=d.get(o),i(o,r)}}}function YE(t,i,r){fc("NgControlFlow");const o=_n(),d=oc(),g=px(o,br+t);if(Ct(o,d,i)){const C=oe(null);try{if(jd(g,0),-1!==i){const B=mx(o[Sn],br+i),pe=vd(g,B.tView.ssrId);$d(g,hd(o,B,r,{dehydratedView:pe}),0,fd(B,pe))}}finally{oe(C)}}else{const C=Yf(g,0);void 0!==C&&(C[ci]=r)}}class Ww{constructor(i,r,o){this.lContainer=i,this.$implicit=r,this.$index=o}get $count(){return this.lContainer.length-to}}function qE(t){return t}function ZE(t,i){return i}class $w{constructor(i,r,o){this.hasEmptyBlock=i,this.trackByFn=r,this.liveCollection=o}}function JE(t,i,r,o,d,g,y,C,B,pe,Ie,Je,At){fc("NgControlFlow");const Bt=void 0!==B,Jt=_n(),bn=C?y.bind(Jt[Lr][ci]):y,jn=new $w(Bt,bn);Jt[br+t]=jn,Nt(t+1,i,r,o,d,g),Bt&&Nt(t+2,B,pe,Ie,Je,At)}class jw extends zw{constructor(i,r,o){super(),this.lContainer=i,this.hostLView=r,this.templateTNode=o,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-to}at(i){return this.getLView(i)[ci].$implicit}attach(i,r){const o=r[Gn];this.needsIndexUpdate||=i!==this.length,$d(this.lContainer,r,i,fd(this.templateTNode,o))}detach(i){return this.needsIndexUpdate||=i!==this.length-1,function Xw(t,i){return cd(t,i)}(this.lContainer,i)}create(i,r){const o=vd(this.lContainer,this.templateTNode.tView.ssrId);return hd(this.hostLView,this.templateTNode,new Ww(this.lContainer,r,i),{dehydratedView:o})}destroy(i){Hf(i[Sn],i)}updateValue(i,r){this.getLView(i)[ci].$implicit=r}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let i=0;i<this.length;i++)this.getLView(i)[ci].$index=i}getLView(i){return function Kw(t,i){return Yf(t,i)}(this.lContainer,i)}}function eS(t){const i=oe(null),r=_l();try{const o=_n(),d=o[Sn],g=o[r];if(void 0===g.liveCollection){const C=r+1,B=px(o,C),pe=mx(d,C);g.liveCollection=new jw(B,o,pe)}else g.liveCollection.reset();const y=g.liveCollection;if(function Gw(t,i,r){let o,d,g=0,y=t.length-1;if(Array.isArray(i)){let C=i.length-1;for(;g<=y&&g<=C;){const B=t.at(g),pe=i[g],Ie=hx(g,B,g,pe,r);if(0!==Ie){Ie<0&&t.updateValue(g,pe),g++;continue}const Je=t.at(y),At=i[C],Bt=hx(y,Je,C,At,r);if(0!==Bt){Bt<0&&t.updateValue(y,At),y--,C--;continue}const Jt=r(g,B),bn=r(y,Je),jn=r(g,pe);if(Object.is(jn,bn)){const pi=r(C,At);Object.is(pi,Jt)?(t.swap(g,y),t.updateValue(y,At),C--,y--):t.move(y,g),t.updateValue(g,pe),g++}else if(o??=new QE,d??=KE(t,g,y,r),fx(t,o,g,jn))t.updateValue(g,pe),g++,y++;else if(d.has(jn))o.set(Jt,t.detach(g)),y--;else{const pi=t.create(g,i[g]);t.attach(g,pi),g++,y++}}for(;g<=C;)XE(t,o,r,g,i[g]),g++}else if(null!=i){const C=i[Symbol.iterator]();let B=C.next();for(;!B.done&&g<=y;){const pe=t.at(g),Ie=B.value,Je=hx(g,pe,g,Ie,r);if(0!==Je)Je<0&&t.updateValue(g,Ie),g++,B=C.next();else{o??=new QE,d??=KE(t,g,y,r);const At=r(g,Ie);if(fx(t,o,g,At))t.updateValue(g,Ie),g++,y++,B=C.next();else if(d.has(At)){const Bt=r(g,pe);o.set(Bt,t.detach(g)),y--}else t.attach(g,t.create(g,Ie)),g++,y++,B=C.next()}}for(;!B.done;)XE(t,o,r,t.length,B.value),B=C.next()}for(;g<=y;)t.destroy(t.detach(y--));o?.forEach(C=>{t.destroy(C)})}(y,t,g.trackByFn),y.updateIndexes(),g.hasEmptyBlock){const C=oc(),B=0===y.length;if(Ct(o,C,B)){const pe=r+2,Ie=px(o,pe);if(B){const Je=mx(d,pe),At=vd(Ie,Je.tView.ssrId);$d(Ie,hd(o,Je,void 0,{dehydratedView:At}),0,fd(Je,At))}else jd(Ie,0)}}}finally{oe(i)}}function px(t,i){return t[i]}function mx(t,i){return Oo(t,i)}function Ly(t,i,r,o){const d=_n(),g=Cs(),y=br+t,C=d[Di],B=g.firstCreatePass?function Qw(t,i,r,o,d,g){const y=i.consts,B=Hh(i,t,2,o,Oc(y,d));return N_(i,r,B,Oc(y,g)),null!==B.attrs&&B0(B,B.attrs,!1),null!==B.mergedAttrs&&B0(B,B.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,B),B}(y,g,d,i,r,o):g.data[y],pe=tS(g,d,B,C,i,t);d[y]=pe;const Ie=Wo(B);return $o(B,!0),h0(C,pe,B),!function tt(t){return!(32&~t.flags)}(B)&&mh()&&Ru(g,d,pe,B),0===function Ms(){return rr.lFrame.elementDepthCount}()&&Bl(pe,d),function cm(){rr.lFrame.elementDepthCount++}(),Ie&&(Gh(g,d,B),zh(g,B,d)),null!==o&&p0(d,B),Ly}function ky(){let t=Hs();ff()?Xu():(t=t.parent,$o(t,!1));const i=t;(function cf(t){return rr.skipHydrationRootTNode===t})(i)&&function hf(){rr.skipHydrationRootTNode=null}(),function $u(){rr.lFrame.elementDepthCount--}();const r=Cs();return r.firstCreatePass&&(mf(r,t),pa(t)&&r.queries.elementEnd(t)),null!=i.classesWithoutHost&&function Ep(t){return!!(8&t.flags)}(i)&&lx(r,i,_n(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function mm(t){return!!(16&t.flags)}(i)&&lx(r,i,_n(),i.stylesWithoutHost,!1),ky}function gx(t,i,r,o){return Ly(t,i,r,o),ky(),gx}let tS=(t,i,r,o,d,g)=>(ac(!0),Vd(o,d,function fm(){return rr.lFrame.currentNamespace}()));function By(t,i,r){const o=_n(),d=Cs(),g=t+br,y=d.firstCreatePass?function Zw(t,i,r,o,d){const g=i.consts,y=Oc(g,o),C=Hh(i,t,8,"ng-container",y);return null!==y&&B0(C,y,!0),N_(i,r,C,Oc(g,d)),null!==i.queries&&i.queries.elementStart(i,C),C}(g,d,o,i,r):d.data[g];$o(y,!0);const C=iS(d,o,y,t);return o[g]=C,mh()&&Ru(d,o,C,y),Bl(C,o),Wo(y)&&(Gh(d,o,y),zh(d,y,o)),null!=r&&p0(o,y),By}function Uy(){let t=Hs();const i=Cs();return ff()?Xu():(t=t.parent,$o(t,!1)),i.firstCreatePass&&(mf(i,t),pa(t)&&i.queries.elementEnd(t)),Uy}let iS=(t,i,r,o)=>(ac(!0),s0(i[Di],""));function rS(){return _n()}function vx(t,i,r){const o=_n();return Ct(o,oc(),i)&&xl(Cs(),ko(),o,t,i,o[Di],r,!0),vx}function _x(t,i,r){const o=_n();if(Ct(o,oc(),i)){const g=Cs(),y=ko();xl(g,y,o,t,i,O_(Ku(g.data),y,o),r,!0)}return _x}const fp=void 0;var nT=["en",[["a","p"],["AM","PM"],fp],[["AM","PM"],fp,fp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fp,"{1} 'at' {0}",fp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function tT(t){const r=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===r&&0===o?1:5}];let tm={};function yx(t){const i=function iT(t){return t.toLowerCase().replace(/_/g,"-")}(t);let r=oS(i);if(r)return r;const o=i.split("-")[0];if(r=oS(o),r)return r;if("en"===o)return nT;throw new It(701,!1)}function sS(t){return yx(t)[nm.PluralCase]}function oS(t){return t in tm||(tm[t]=Yn.ng&&Yn.ng.common&&Yn.ng.common.locales&&Yn.ng.common.locales[t]),tm[t]}var nm=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(nm||{});const im="en-US",Vy={marker:"element"},Hy={marker:"ICU"};var Gc=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}(Gc||{});let aS=im;function cS(t,i,r){const o=i.insertBeforeIndex,d=Array.isArray(o)?o[0]:o;return null===d?ig(t,0,r):Ps(r[d])}function uS(t,i,r,o,d){const g=i.insertBeforeIndex;if(Array.isArray(g)){let y=o,C=null;if(3&i.type||(C=y,y=d),null!==y&&-1===i.componentOffset)for(let B=1;B<g.length;B++)ud(t,y,r[g[B]],C,!1)}}function dS(t,i){if(t.push(i),t.length>1)for(let r=t.length-2;r>=0;r--){const o=t[r];hS(o)||lT(o,i)&&null===cT(o)&&uT(o,i.index)}}function hS(t){return!(64&t.type)}function lT(t,i){return hS(i)||t.index>i.index}function cT(t){const i=t.insertBeforeIndex;return Array.isArray(i)?i[0]:i}function uT(t,i){const r=t.insertBeforeIndex;Array.isArray(r)?r[0]=i:(kh(cS,uS),t.insertBeforeIndex=i)}function fT(t,i,r){const o=Nu(t,r,64,null,null);return dS(i,o),o}let iv=(t,i,r,o)=>(ac(!0),function gS(t,i,r){const o=t[Di];switch(r){case Node.COMMENT_NODE:return s0(o,i);case Node.TEXT_NODE:return ld(o,i);case Node.ELEMENT_NODE:return Vd(o,i,null)}}(t,r,o));function ET(){const t=[];let r,o,i=-1;function g(C,B){i=0;const pe=function zy(t,i){const r=i[t.currentCaseLViewIndex];return null===r?r:r<0?~r:r}(C,B);o=null!==pe?C.remove[pe]:Jr}function y(){if(i<o.length){const C=o[i++];return C>0?r[C]:(t.push(i,o),g(r[Sn].data[~C],r),y())}return 0===t.length?null:(o=t.pop(),i=t.pop(),y())}return function d(C,B){for(r=B;t.length;)t.pop();return g(C.value,B),y}}const Gy=/\ufffd(\d+):?\d*\ufffd/gi,MT=/\ufffd(\d+)\ufffd/,ES=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,rv="\ufffd",CT=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,wT=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,TT=/\uE500/g;function SS(t,i,r,o,d,g,y){const C=jf(t,o,1,null);let B=C<<Gc.SHIFT,pe=sc();i===pe&&(pe=null),null===pe&&(B|=Gc.APPEND_EAGERLY),y&&(B|=Gc.COMMENT,function Fh(t){void 0===ad&&(ad=t())}(ET)),d.push(B,null===g?"":g);const Ie=Nu(t,C,y?32:1,null===g?"":g,null);dS(r,Ie);const Je=Ie.index;return $o(Ie,!1),null!==pe&&i!==pe&&function hT(t,i){let r=t.insertBeforeIndex;null===r?(kh(cS,uS),r=t.insertBeforeIndex=[null,i]):(function kn(t,i,r){t!=i&&Kn(r,t,i,"==")}(Array.isArray(r),!0,"Expecting array here"),r.push(i))}(pe,Je),Ie}function IT(t,i,r,o,d,g,y,C){const B=C.match(Gy),Ie=SS(i,r,o,y,d,B?null:C,!1).index;B&&sv(g,C,Ie,null,0,null),t.push({kind:0,index:Ie})}function sv(t,i,r,o,d,g){const y=t.length,C=y+1;t.push(null,null);const B=y+2,pe=i.split(Gy);let Ie=0;for(let Je=0;Je<pe.length;Je++){const At=pe[Je];if(1&Je){const Bt=d+parseInt(At,10);t.push(-1-Bt),Ie|=MS(Bt)}else""!==At&&t.push(At)}return t.push(r<<2|(o?1:0)),o&&t.push(o,g),t[y]=Ie,t[C]=t.length-B,Ie}function MS(t){return 1<<Math.min(t,31)}function CS(t){let i,g,r="",o=0,d=!1;for(;null!==(i=CT.exec(t));)d?i[0]===`${rv}/*${g}${rv}`&&(o=i.index,d=!1):(r+=t.substring(o,i.index+i[0].length),g=i[1],d=!0);return r+=t.slice(o),r}function wS(t,i,r,o,d,g,y){let C=0;const B={type:g.type,currentCaseLViewIndex:jf(i,r,1,null),anchorIdx:y,cases:[],create:[],remove:[],update:[]};(function BT(t,i,r){t.push(MS(i.mainBinding),2,-1-i.mainBinding,r<<2|2)})(o,g,y),function dT(t,i,r){const o=t.data[i];null===o?t.data[i]=r:o.value=r}(i,y,B);const pe=g.values,Ie=[];for(let Je=0;Je<pe.length;Je++){const At=pe[Je],Bt=[];for(let bn=0;bn<At.length;bn++){const jn=At[bn];if("string"!=typeof jn){const pi=Bt.push(jn)-1;At[bn]=`\x3c!--\ufffd${pi}\ufffd--\x3e`}}const Jt=[];Ie.push(Jt),C=LT(Jt,i,B,r,o,d,g.cases[Je],At.join(""),Bt)|C}C&&function UT(t,i,r){t.push(i,1,r<<2|3)}(o,C,y),t.push({kind:3,index:y,cases:Ie,currentCaseLViewIndex:B.currentCaseLViewIndex})}function FT(t){const i=[],r=[];let o=1,d=0;const g=bx(t=t.replace(ES,function(y,C,B){return o="select"===B?0:1,d=parseInt(C.slice(1),10),""}));for(let y=0;y<g.length;){let C=g[y++].trim();1===o&&(C=C.replace(/\s*(?:=)?(\w+)\s*/,"$1")),C.length&&i.push(C);const B=bx(g[y++]);i.length>r.length&&r.push(B)}return{type:o,mainBinding:d,cases:i,values:r}}function bx(t){if(!t)return[];let i=0;const r=[],o=[],d=/[{}]/g;let g;for(d.lastIndex=0;g=d.exec(t);){const C=g.index;if("}"==g[0]){if(r.pop(),0==r.length){const B=t.substring(i,C);ES.test(B)?o.push(FT(B)):o.push(B),i=C+1}}else{if(0==r.length){const B=t.substring(i,C);o.push(B),i=C+1}r.push("{")}}const y=t.substring(i);return o.push(y),o}function LT(t,i,r,o,d,g,y,C,B){const pe=[],Ie=[],Je=[];r.cases.push(y),r.create.push(pe),r.remove.push(Ie),r.update.push(Je);const Bt=qp(ss()).getInertBodyElement(C),Jt=$m(Bt)||Bt;return Jt?TS(t,i,r,o,d,pe,Ie,Je,Jt,g,B,0):0}function TS(t,i,r,o,d,g,y,C,B,pe,Ie,Je){let At=0,Bt=B.firstChild;for(;Bt;){const Jt=jf(i,o,1,null);switch(Bt.nodeType){case Node.ELEMENT_NODE:const bn=Bt,jn=bn.tagName.toLowerCase();if(Hm.hasOwnProperty(jn)){xx(g,Vy,jn,pe,Jt),i.data[Jt]=jn;const co=bn.attributes;for(let Ml=0;Ml<co.length;Ml++){const Wc=co.item(Ml),am=Wc.name.toLowerCase();Wc.value.match(Gy)?Ph.hasOwnProperty(am)&&sv(C,Wc.value,Jt,Wc.name,0,zm[am]?Jp:null):VT(g,Jt,Wc)}const Ko={kind:1,index:Jt,children:[]};t.push(Ko),At=TS(Ko.children,i,r,o,d,g,y,C,Bt,Jt,Ie,Je+1)|At,DS(y,Jt,Je)}break;case Node.TEXT_NODE:const pi=Bt.textContent||"",In=pi.match(Gy);xx(g,null,In?"":pi,pe,Jt),DS(y,Jt,Je),In&&(At=sv(C,pi,Jt,null,0,null)|At),t.push({kind:0,index:Jt});break;case Node.COMMENT_NODE:const Vr=MT.exec(Bt.textContent||"");if(Vr){const Ko=Ie[parseInt(Vr[1],10)];xx(g,Hy,"",pe,Jt),wS(t,i,o,d,pe,Ko,Jt),kT(y,Jt,Je)}}Bt=Bt.nextSibling}return At}function DS(t,i,r){0===r&&t.push(i)}function kT(t,i,r){0===r&&(t.push(~i),t.push(i))}function xx(t,i,r,o,d){null!==i&&t.push(i),t.push(r,d,function pT(t,i,r){return t|i<<17|r<<1}(0,o,d))}function VT(t,i,r){t.push(i<<1|1,r.name,r.value)}function IS(t,i,r=-1){const o=Cs(),d=_n(),g=br+t,y=Oc(o.consts,i),C=sc();o.firstCreatePass&&function AT(t,i,r,o,d,g){const y=sc(),C=[],B=[],pe=[[]],Ie=[[]];d=function OT(t,i){if(function PT(t){return-1===t}(i))return CS(t);{const r=t.indexOf(`:${i}${rv}`)+2+i.toString().length,o=t.search(new RegExp(`${rv}\\/\\*\\d+:${i}${rv}`));return CS(t.substring(r,o))}}(d,g);const Je=function DT(t){return t.replace(TT," ")}(d).split(wT);for(let At=0;At<Je.length;At++){let Bt=Je[At];if(1&At){const Jt=47===Bt.charCodeAt(0),bn=Bt.charCodeAt(Jt?1:0),jn=br+Number.parseInt(Bt.substring(Jt?2:1));if(Jt)pe.shift(),Ie.shift(),$o(sc(),!1);else{const pi=fT(t,pe[0],jn);pe.unshift([]),$o(pi,!0);const In={kind:2,index:jn,children:[],type:35===bn?0:1};Ie[0].push(In),Ie.unshift(In.children)}}else{const Jt=bx(Bt);for(let bn=0;bn<Jt.length;bn++){let jn=Jt[bn];if(1&bn){const pi=jn;if("object"!=typeof pi)throw new Error(`Unable to parse ICU expression in "${d}" message.`);const Vr=SS(t,y,pe[0],r,C,"",!0).index;wS(Ie[0],t,r,B,i,pi,Vr)}else""!==jn&&IT(Ie[0],t,y,pe[0],C,B,r,jn)}}}t.data[o]={create:C,update:B,ast:Ie[0]}}(o,null===C?0:C.index,d,g,y,r),2===o.type?d[Lr][ti]|=32:d[ti]|=32;const B=o.data[g],Ie=b_(o,C===d[ys]?null:C,d);(function yT(t,i,r,o){const d=t[Di];for(let g=0;g<i.length;g++){const y=i[g++],pe=(y&Gc.APPEND_EAGERLY)===Gc.APPEND_EAGERLY,Ie=y>>>Gc.SHIFT;let Je=t[Ie],At=!1;null===Je&&(Je=t[Ie]=iv(t,Ie,i[g],(y&Gc.COMMENT)===Gc.COMMENT?Node.COMMENT_NODE:Node.TEXT_NODE),At=mh()),pe&&null!==r&&At&&ud(d,r,Je,o,!1)}})(d,B.create,Ie,C&&8&C.type?d[C.index]:null),Ql(!0)}function NS(t,i,r){IS(t,i,r),function RS(){Ql(!1)}()}function Ex(t,i,r,o){const d=_n(),g=Cs(),y=Hs();return Sx(g,d,d[Di],y,t,i,o),Ex}function Sx(t,i,r,o,d,g,y){const C=Wo(o),pe=t.firstCreatePass&&mg(t),Ie=i[ci],Je=Xh(i);let At=!0;if(3&o.type||y){const bn=Ia(o,i),jn=y?y(bn):bn,pi=Je.length,In=y?co=>y(Ps(co[o.index])):o.index;let Vr=null;if(!y&&C&&(Vr=function ZT(t,i,r,o){const d=t.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const y=d[g];if(y===r&&d[g+1]===o){const C=i[Mi],B=d[g+2];return C.length>B?C[B]:null}"string"==typeof y&&(g+=2)}return null}(t,i,d,o.index)),null!==Vr)(Vr.__ngLastListenerFn__||Vr).__ngNextListenerFn__=g,Vr.__ngLastListenerFn__=g,At=!1;else{g=LS(o,i,Ie,g,!1);const co=r.listen(jn,d,g);Je.push(g,co),pe&&pe.push(d,In,pi,pi+1)}}else g=LS(o,i,Ie,g,!1);const Bt=o.outputs;let Jt;if(At&&null!==Bt&&(Jt=Bt[d])){const bn=Jt.length;if(bn)for(let jn=0;jn<bn;jn+=2){const Ko=i[Jt[jn]][Jt[jn+1]].subscribe(g),Ml=Je.length;Je.push(g,Ko),pe&&pe.push(d,o.index,Ml,-(Ml+1))}}}function FS(t,i,r,o){const d=oe(null);try{return Ll(6,i,r),!1!==r(o)}catch(g){return Qf(t,g),!1}finally{Ll(7,i,r),oe(d)}}function LS(t,i,r,o,d){return function g(y){if(y===Function)return o;Zf(t.componentOffset>-1?ms(t.index,i):i);let B=FS(i,r,o,y),pe=g.__ngNextListenerFn__;for(;pe;)B=FS(i,r,pe,y)&&B,pe=pe.__ngNextListenerFn__;return d&&!1===B&&y.preventDefault(),B}}function kS(t=1){return function _v(t){return(rr.lFrame.contextLView=gp(t,rr.lFrame.contextLView))[ci]}(t)}function JT(t,i){let r=null;const o=function $c(t){const i=t.attrs;if(null!=i){const r=i.indexOf(5);if(!(1&r))return i[r+1]}return null}(t);for(let d=0;d<i.length;d++){const g=i[d];if("*"!==g){if(null===o?Wl(t,g,!0):bu(o,g))return d}else r=d}return r}function BS(t){const i=_n()[Lr][ys];if(!i.projection){const o=i.projection=function Ho(t,i){const r=[];for(let o=0;o<t;o++)r.push(i);return r}(t?t.length:1,null),d=o.slice();let g=i.child;for(;null!==g;){const y=t?JT(g,t):0;null!==y&&(d[y]?d[y].projectionNext=g:o[y]=g,d[y]=g),g=g.next}}}function US(t,i=0,r){const o=_n(),d=Cs(),g=Hh(d,br+t,16,null,r||null);null===g.projection&&(g.projection=i),Xu(),(!o[Gn]||ju())&&32&~g.flags&&function rg(t,i,r){C_(i[Di],0,i,r,a0(t,r,i),gu(r.parent||i[ys],r,i))}(d,o,g)}function Mx(t,i,r){return Wy(t,"",i,"",r),Mx}function Wy(t,i,r,o,d){const g=_n(),y=js(g,i,r,o);return y!==qr&&xl(Cs(),ko(),g,t,y,g[Di],d,!1),Wy}function KS(t,i,r,o){!function jo(t,i,r,o){const d=Cs();if(d.firstCreatePass){const g=Hs();fy(d,new cy(i,r,o),g.index),function Pb(t,i){const r=t.contentQueries||(t.contentQueries=[]);i!==(r.length?r[r.length-1]:-1)&&r.push(t.queries.length-1,i)}(d,t),!(2&~r)&&(d.staticContentQueries=!0)}return dy(d,_n(),r)}(t,i,r,o)}function QS(t,i,r){hy(t,i,r)}function YS(t){const i=_n(),r=Cs(),o=xc();Dd(o+1);const d=py(r,o);if(t.dirty&&function fv(t){return!(4&~t[ti])}(i)===!(2&~d.metadata.flags)){if(null===d.matches)t.reset([]);else{const g=$g(i,o);t.reset(g,Cf),t.notifyOnChanges()}return!0}return!1}function qS(){return Wg(_n(),xc())}function ZS(t,i,r,o){!function Xg(t,i){const r=t[X];r._lView=_n(),r._queryIndex=i,r._queryList=Wg(r._lView,i),r._queryList.onDirty(()=>r._dirtyCounter.update(o=>o+1))}(t,hy(i,r,o))}function JS(t=1){Dd(xc()+t)}function eM(t){return Pc(function gv(){return rr.lFrame.contextLView}(),br+t)}function uM(t,i=""){const r=_n(),o=Cs(),d=t+br,g=o.firstCreatePass?Hh(o,d,1,i,null):o.data[d],y=dM(o,r,g,i,t);r[d]=y,mh()&&Ru(o,r,y,g),$o(g,!1)}let dM=(t,i,r,o,d)=>(ac(!0),ld(i[Di],o));function Cx(t){return $y("",t,""),Cx}function $y(t,i,r){const o=_n(),d=js(o,t,i,r);return d!==qr&&vu(o,_l(),d),$y}function wx(t,i,r,o,d){const g=_n(),y=or(g,t,i,r,o,d);return y!==qr&&vu(g,_l(),y),wx}function Tx(t,i,r){Fb(i)&&(i=i());const o=_n();return Ct(o,oc(),i)&&xl(Cs(),ko(),o,t,i,o[Di],r,!1),Tx}function yM(t,i){const r=Fb(t);return r&&t.set(i),r}function Dx(t,i){const r=_n(),o=Cs(),d=Hs();return Sx(o,r,r[Di],d,t,i),Dx}function Ax(t,i,r,o,d){if(t=Rt(t),Array.isArray(t))for(let g=0;g<t.length;g++)Ax(t[g],i,r,o,d);else{const g=Cs(),y=_n(),C=Hs();let B=Ti(t)?t:Rt(t.provide);const pe=F(t),Ie=1048575&C.providerIndexes,Je=C.directiveStart,At=C.providerIndexes>>20;if(Ti(t)||!t.multi){const Bt=new vh(pe,d,zd),Jt=Rx(B,i,d?Ie:Ie+At,Je);-1===Jt?(yf(yh(C,y),g,B),Ix(g,t,i.length),i.push(B),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),r.push(Bt),y.push(Bt)):(r[Jt]=Bt,y[Jt]=Bt)}else{const Bt=Rx(B,i,Ie+At,Je),Jt=Rx(B,i,Ie,Ie+At),jn=Jt>=0&&r[Jt];if(d&&!jn||!d&&!(Bt>=0&&r[Bt])){yf(yh(C,y),g,B);const pi=function gD(t,i,r,o,d){const g=new vh(t,r,zd);return g.multi=[],g.index=i,g.componentProviders=0,bM(g,d,o&&!r),g}(d?mD:pD,r.length,d,o,pe);!d&&jn&&(r[Jt].providerFactory=pi),Ix(g,t,i.length,0),i.push(B),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),r.push(pi),y.push(pi)}else Ix(g,t,Bt>-1?Bt:Jt,bM(r[d?Jt:Bt],pe,!d&&o));!d&&o&&jn&&r[Jt].componentProviders++}}}function Ix(t,i,r,o){const d=Ti(i),g=function tl(t){return!!t.useClass}(i);if(d||g){const B=(g?Rt(i.useClass):i).prototype.ngOnDestroy;if(B){const pe=t.destroyHooks||(t.destroyHooks=[]);if(!d&&i.multi){const Ie=pe.indexOf(r);-1===Ie?pe.push(r,[o,B]):pe[Ie+1].push(o,B)}else pe.push(r,B)}}}function bM(t,i,r){return r&&t.componentProviders++,t.multi.push(i)-1}function Rx(t,i,r,o){for(let d=r;d<o;d++)if(i[d]===t)return d;return-1}function pD(t,i,r,o){return Nx(this.multi,[])}function mD(t,i,r,o){const d=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=pu(r,r[Sn],this.providerFactory.index,o);g=C.slice(0,y),Nx(d,g);for(let B=y;B<C.length;B++)g.push(C[B])}else g=[],Nx(d,g);return g}function Nx(t,i){for(let r=0;r<t.length;r++)i.push((0,t[r])());return i}function xM(t,i=[]){return r=>{r.providersResolver=(o,d)=>function fD(t,i,r){const o=Cs();if(o.firstCreatePass){const d=Ya(t);Ax(r,o.data,o.blueprint,d,!0),Ax(i,o.data,o.blueprint,d,!1)}}(o,d?d(t):t,i)}}let vD=(()=>{class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){const o=fr(0,r.type),d=o.length>0?u([o],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,d)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ir({token:t,providedIn:"environment",factory:()=>new t(ao(bo))})}}return t})();function EM(t){fc("NgStandalone"),t.getStandaloneInjector=i=>i.get(vD).getOrCreateStandaloneInjector(t)}function MM(t,i,r){const o=Lo()+t,d=_n();return d[o]===qr?Le(d,o,r?i.call(r):i()):function Pe(t,i){return t[i]}(d,o)}function CM(t,i,r,o){return AM(_n(),Lo(),t,i,r,o)}function wM(t,i,r,o,d){return IM(_n(),Lo(),t,i,r,o,d)}function TM(t,i,r,o,d,g){return function RM(t,i,r,o,d,g,y,C){const B=i+r;return function bt(t,i,r,o,d){const g=ft(t,i,r,o);return Ct(t,i+2,d)||g}(t,B,d,g,y)?Le(t,B+3,C?o.call(C,d,g,y):o(d,g,y)):ov(t,B+3)}(_n(),Lo(),t,i,r,o,d,g)}function DM(t,i,r,o,d,g,y){return function NM(t,i,r,o,d,g,y,C,B){const pe=i+r;return function Et(t,i,r,o,d,g){const y=ft(t,i,r,o);return ft(t,i+2,d,g)||y}(t,pe,d,g,y,C)?Le(t,pe+4,B?o.call(B,d,g,y,C):o(d,g,y,C)):ov(t,pe+4)}(_n(),Lo(),t,i,r,o,d,g,y)}function ov(t,i){const r=t[i];return r===qr?void 0:r}function AM(t,i,r,o,d,g){const y=i+r;return Ct(t,y,d)?Le(t,y+1,g?o.call(g,d):o(d)):ov(t,y+1)}function IM(t,i,r,o,d,g,y){const C=i+r;return ft(t,C,d,g)?Le(t,C+2,y?o.call(y,d,g):o(d,g)):ov(t,C+2)}function OM(t,i){const r=Cs();let o;const d=t+br;r.firstCreatePass?(o=function CD(t,i){if(i)for(let r=i.length-1;r>=0;r--){const o=i[r];if(t===o.name)return o}}(i,r.pipeRegistry),r.data[d]=o,o.onDestroy&&(r.destroyHooks??=[]).push(d,o.onDestroy)):o=r.data[d];const g=o.factory||(o.factory=Qs(o.type)),C=yo(zd);try{const B=Rd(!1),pe=g();return Rd(B),function tD(t,i,r,o){r>=t.data.length&&(t.data[r]=null,t.blueprint[r]=null),i[r]=o}(r,_n(),d,pe),pe}finally{yo(C)}}function FM(t,i,r){const o=t+br,d=_n(),g=Pc(d,o);return av(d,o)?AM(d,Lo(),i,g.transform,r,g):g.transform(r)}function LM(t,i,r,o){const d=t+br,g=_n(),y=Pc(g,d);return av(g,d)?IM(g,Lo(),i,y.transform,r,o,y):y.transform(r,o)}function av(t,i){return t[Sn].data[i].pure}function kM(t,i){return S0(t,i)}class JM{constructor(i){this.full=i;const r=i.split(".");this.major=r[0],this.minor=r[1],this.patch=r.slice(2).join(".")}}let eC=(()=>{class t{log(r){console.log(r)}warn(r){console.warn(r)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=ir({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const sC=new pt(""),oC=new pt("");let Bx,xA=(()=>{class t{constructor(r,o,d){this._ngZone=r,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Bx||(function EA(t){Bx=t}(d),d.addToWindow(o)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bo.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(r)||(clearTimeout(o.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,d){let g=-1;o&&o>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),r()},o)),this._callbacks.push({doneCb:r,timeoutId:g,updateCb:d})}whenStable(r,o,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,o,d){return[]}static{this.\u0275fac=function(o){return new(o||t)(ao(Bo),ao(aC),ao(oC))}}static{this.\u0275prov=ir({token:t,factory:t.\u0275fac})}}return t})(),aC=(()=>{class t{constructor(){this._applications=new Map}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return Bx?.findTestabilityInTree(this,r,o)??null}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=ir({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();function Ux(t){return!!t&&"function"==typeof t.then}function lC(t){return!!t&&"function"==typeof t.subscribe}const cC=new pt("");let Vx=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o}),this.appInits=$i(cC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const r=[];for(const d of this.appInits){const g=d();if(Ux(g))r.push(g);else if(lC(g)){const y=new Promise((C,B)=>{g.subscribe({complete:C,error:B})});r.push(y)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{o()}).catch(d=>{this.reject(d)}),0===r.length&&o(),this.initialized=!0}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=ir({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Hx=new pt("");let rf=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$i(Tm),this.afterRenderEffectManager=$i(Zd),this.externalTestViews=new Set,this.beforeRender=new rn.B,this.afterTick=new rn.B,this.componentTypes=[],this.components=[],this.isStable=$i(V).hasPendingTasks.pipe((0,hn.T)(r=>!r)),this._injector=$i(bo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,o){const d=r instanceof K_;if(!this._injector.get(Vx).done)throw!d&&Z(r),new It(405,!1);let y;y=d?r:this._injector.get(ip).resolveComponentFactory(r),this.componentTypes.push(y.componentType);const C=function SA(t){return t.isBoundToModule}(y)?void 0:this._injector.get(rh),pe=y.create(cc.NULL,[],o||y.selector,C),Ie=pe.location.nativeElement,Je=pe.injector.get(sC,null);return Je?.registerApplication(Ie),pe.onDestroy(()=>{this.detachView(pe.hostView),Qy(this.components,pe),Je?.unregisterApplication(Ie)}),this._loadComponent(pe),pe}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new It(101,!1);const o=oe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(d){this.internalErrorHandler(d)}finally{this.afterTick.next(),this._runningTick=!1,oe(o)}}detectChangesInAttachedViews(r){let o=0;const d=this.afterRenderEffectManager;for(;;){if(o===k_)throw new It(103,!1);if(r){const g=0===o;this.beforeRender.next(g);for(let{_lView:y,notifyErrorHandler:C}of this._views)CA(y,g,C)}if(o++,d.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:g})=>zx(g))&&(d.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:g})=>zx(g))))break}}attachView(r){const o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){const o=r;Qy(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const o=this._injector.get(Hx,[]);[...this._bootstrapListeners,...o].forEach(d=>d(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Qy(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new It(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=ir({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Qy(t,i){const r=t.indexOf(i);r>-1&&t.splice(r,1)}function CA(t,i,r){!i&&!zx(t)||function wA(t,i,r){let o;r?(o=0,t[ti]|=1024):o=64&t[ti]?0:1,Ou(t,i,o)}(t,r,i)}function zx(t){return lm(t)}class TA{constructor(i,r){this.ngModuleFactory=i,this.componentFactories=r}}let DA=(()=>{class t{compileModuleSync(r){return new n(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const o=this.compileModuleSync(r),g=Mc(me(r).declarations).reduce((y,C)=>{const B=zr(C);return B&&y.push(new H0(B)),y},[]);return new TA(o,g)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=ir({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),RA=(()=>{class t{constructor(){this.zone=$i(Bo),this.applicationRef=$i(rf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=ir({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function pC(t){return[{provide:Bo,useFactory:t},{provide:dl,multi:!0,useFactory:()=>{const i=$i(RA,{optional:!0});return()=>i.initialize()}},{provide:dl,multi:!0,useFactory:()=>{const i=$i(OA);return()=>{i.initialize()}}},{provide:Tm,useFactory:NA}]}function NA(){const t=$i(Bo),i=$i(Bc);return r=>t.runOutsideAngular(()=>i.handleError(r))}function PA(t){return Bi([[],pC(()=>new Bo(function mC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}(t)))])}let OA=(()=>{class t{constructor(){this.subscription=new gn.yU,this.initialized=!1,this.zone=$i(Bo),this.pendingTasks=$i(V)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Bo.assertNotInAngularZone(),queueMicrotask(()=>{null!==r&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Bo.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=ir({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const qy=new pt("",{providedIn:"root",factory:()=>$i(qy,_r.Optional|_r.SkipSelf)||function FA(){return typeof $localize<"u"&&$localize.locale||im}()}),LA=new pt("",{providedIn:"root",factory:()=>"USD"}),Gx=new pt("");let sf=null;let xC=(()=>{class t{static{this.__NG_ELEMENT_ID__=HA}}return t})();function HA(t){return function zA(t,i,r){if(vl(t)&&!r){const o=ms(t.index,i);return new Jf(o,o)}return 47&t.type?new Jf(i[Lr],i):null}(Hs(),_n(),!(16&~t))}class CC{constructor(){}supports(i){return se(i)}create(i){return new XA(i)}}const jA=(t,i)=>i;class XA{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||jA}forEachItem(i){let r;for(r=this._itHead;null!==r;r=r._next)i(r)}forEachOperation(i){let r=this._itHead,o=this._removalsHead,d=0,g=null;for(;r||o;){const y=!o||r&&r.currentIndex<TC(o,d,g)?r:o,C=TC(y,d,g),B=y.currentIndex;if(y===o)d--,o=o._nextRemoved;else if(r=r._next,null==y.previousIndex)d++;else{g||(g=[]);const pe=C-d,Ie=B-d;if(pe!=Ie){for(let At=0;At<pe;At++){const Bt=At<g.length?g[At]:g[At]=0,Jt=Bt+At;Ie<=Jt&&Jt<pe&&(g[At]=Bt+1)}g[y.previousIndex]=Ie-pe}}C!==B&&i(y,C,B)}}forEachPreviousItem(i){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)i(r)}forEachAddedItem(i){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)i(r)}forEachMovedItem(i){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)i(r)}forEachRemovedItem(i){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)i(r)}forEachIdentityChange(i){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)i(r)}diff(i){if(null==i&&(i=[]),!se(i))throw new It(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let d,g,y,r=this._itHead,o=!1;if(Array.isArray(i)){this.length=i.length;for(let C=0;C<this.length;C++)g=i[C],y=this._trackByFn(C,g),null!==r&&Object.is(r.trackById,y)?(o&&(r=this._verifyReinsertion(r,g,y,C)),Object.is(r.item,g)||this._addIdentityChange(r,g)):(r=this._mismatch(r,g,y,C),o=!0),r=r._next}else d=0,function le(t,i){if(Array.isArray(t))for(let r=0;r<t.length;r++)i(t[r]);else{const r=t[Symbol.iterator]();let o;for(;!(o=r.next()).done;)i(o.value)}}(i,C=>{y=this._trackByFn(d,C),null!==r&&Object.is(r.trackById,y)?(o&&(r=this._verifyReinsertion(r,C,y,d)),Object.is(r.item,C)||this._addIdentityChange(r,C)):(r=this._mismatch(r,C,y,d),o=!0),r=r._next,d++}),this.length=d;return this._truncate(r),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,r,o,d){let g;return null===i?g=this._itTail:(g=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(i.item,r)||this._addIdentityChange(i,r),this._reinsertAfter(i,g,d)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(o,d))?(Object.is(i.item,r)||this._addIdentityChange(i,r),this._moveAfter(i,g,d)):i=this._addAfter(new KA(r,o),g,d),i}_verifyReinsertion(i,r,o,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==g?i=this._reinsertAfter(g,i._prev,d):i.currentIndex!=d&&(i.currentIndex=d,this._addToMoves(i,d)),i}_truncate(i){for(;null!==i;){const r=i._next;this._addToRemovals(this._unlink(i)),i=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,r,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const d=i._prevRemoved,g=i._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(i,r,o),this._addToMoves(i,o),i}_moveAfter(i,r,o){return this._unlink(i),this._insertAfter(i,r,o),this._addToMoves(i,o),i}_addAfter(i,r,o){return this._insertAfter(i,r,o),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,r,o){const d=null===r?this._itHead:r._next;return i._next=d,i._prev=r,null===d?this._itTail=i:d._prev=i,null===r?this._itHead=i:r._next=i,null===this._linkedRecords&&(this._linkedRecords=new wC),this._linkedRecords.put(i),i.currentIndex=o,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const r=i._prev,o=i._next;return null===r?this._itHead=o:r._next=o,null===o?this._itTail=r:o._prev=r,i}_addToMoves(i,r){return i.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wC),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,r){return i.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class KA{constructor(i,r){this.item=i,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QA{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,r){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===r||r<=o.currentIndex)&&Object.is(o.trackById,i))return o;return null}remove(i){const r=i._prevDup,o=i._nextDup;return null===r?this._head=o:r._nextDup=o,null===o?this._tail=r:o._prevDup=r,null===this._head}}class wC{constructor(){this.map=new Map}put(i){const r=i.trackById;let o=this.map.get(r);o||(o=new QA,this.map.set(r,o)),o.add(i)}get(i,r){const d=this.map.get(i);return d?d.get(i,r):null}remove(i){const r=i.trackById;return this.map.get(r).remove(i)&&this.map.delete(r),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function TC(t,i,r){const o=t.previousIndex;if(null===o)return o;let d=0;return r&&o<r.length&&(d=r[o]),o+i+d}class DC{constructor(){}supports(i){return i instanceof Map||J(i)}create(){return new YA}}class YA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let r;for(r=this._mapHead;null!==r;r=r._next)i(r)}forEachPreviousItem(i){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)i(r)}forEachChangedItem(i){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)i(r)}forEachAddedItem(i){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)i(r)}forEachRemovedItem(i){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)i(r)}diff(i){if(i){if(!(i instanceof Map||J(i)))throw new It(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(i,(o,d)=>{if(r&&r.key===d)this._maybeAddToChanges(r,o),this._appendAfter=r,r=r._next;else{const g=this._getOrCreateRecordForKey(d,o);r=this._insertBeforeOrAppend(r,g)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let o=r;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,r){if(i){const o=i._prev;return r._next=i,r._prev=o,i._prev=r,o&&(o._next=r),i===this._mapHead&&(this._mapHead=r),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(i,r){if(this._records.has(i)){const d=this._records.get(i);this._maybeAddToChanges(d,r);const g=d._prev,y=d._next;return g&&(g._next=y),y&&(y._prev=g),d._next=null,d._prev=null,d}const o=new qA(i);return this._records.set(i,o),o.currentValue=r,this._addToAdditions(o),o}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,r){Object.is(r,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=r,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,r){i instanceof Map?i.forEach(r):Object.keys(i).forEach(o=>r(i[o],o))}}class qA{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function AC(){return new Qx([new CC])}let Qx=(()=>{class t{static{this.\u0275prov=ir({token:t,providedIn:"root",factory:AC})}constructor(r){this.factories=r}static create(r,o){if(null!=o){const d=o.factories.slice();r=r.concat(d)}return new t(r)}static extend(r){return{provide:t,useFactory:o=>t.create(r,o||AC()),deps:[[t,new Ka,new ya]]}}find(r){const o=this.factories.find(d=>d.supports(r));if(null!=o)return o;throw new It(901,!1)}}return t})();function IC(){return new Yx([new DC])}let Yx=(()=>{class t{static{this.\u0275prov=ir({token:t,providedIn:"root",factory:IC})}constructor(r){this.factories=r}static create(r,o){if(o){const d=o.factories.slice();r=r.concat(d)}return new t(r)}static extend(r){return{provide:t,useFactory:o=>t.create(r,o||IC()),deps:[[t,new Ka,new ya]]}}find(r){const o=this.factories.find(d=>d.supports(r));if(o)return o;throw new It(901,!1)}}return t})();function p2(t){try{const{rootComponent:i,appProviders:r,platformProviders:o}=t,d=function VA(t=[]){if(sf)return sf;const i=function _C(t=[],i){return cc.create({name:i,providers:[{provide:Ga,useValue:"platform"},{provide:Gx,useValue:new Set([()=>sf=null])},...t]})}(t);return sf=i,function uC(){!function Ne(t){Ce=t}(()=>{throw new It(600,!1)})}(),function yC(t){t.get(Wr,null)?.forEach(r=>r())}(i),i}(o),g=[PA(),...r||[]],C=new a({providers:g,parent:d,debugName:"",runEnvironmentInitializers:!1}).injector,B=C.get(Bo);return B.run(()=>{C.resolveInjectorInitializers();const pe=C.get(Bc,null);let Ie;B.runOutsideAngular(()=>{Ie=B.onError.subscribe({next:Bt=>{pe.handleError(Bt)}})});const Je=()=>C.destroy(),At=d.get(Gx);return At.add(Je),C.onDestroy(()=>{Ie.unsubscribe(),At.delete(Je)}),function dC(t,i,r){try{const o=r();return Ux(o)?o.catch(d=>{throw i.runOutsideAngular(()=>t.handleError(d)),d}):o}catch(o){throw i.runOutsideAngular(()=>t.handleError(o)),o}}(pe,B,()=>{const Bt=C.get(Vx);return Bt.runInitializers(),Bt.donePromise.then(()=>{!function lS(t){"string"==typeof t&&(aS=t.toLowerCase().replace(/_/g,"-"))}(C.get(qy,im)||im);const bn=C.get(rf);return void 0!==i&&bn.bootstrap(i),bn})})})}catch(i){return Promise.reject(i)}}function A2(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function R2(t,i){fc("NgSignals");const r=ae(t);return i?.equal&&(r[X].equal=i.equal),r}function N2(t){const i=oe(null);try{return t()}finally{oe(i)}}const P2=new pt("",{providedIn:"root",factory:()=>$i(O2)});let O2=(()=>{class t{static{this.\u0275prov=ir({token:t,providedIn:"root",factory:()=>new F2})}}return t})();class F2{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=$i(V),this.taskId=null}scheduleEffect(i){if(this.enqueue(i),null===this.taskId){const r=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(r),this.taskId=null})}}enqueue(i){const r=i.creationZone;this.queues.has(r)||this.queues.set(r,new Set);const o=this.queues.get(r);o.has(i)||(this.queuedEffectCount++,o.add(i))}flush(){for(;this.queuedEffectCount>0;)for(const[i,r]of this.queues)null===i?this.flushQueue(r):i.run(()=>this.flushQueue(r))}flushQueue(i){for(const r of i)i.delete(r),this.queuedEffectCount--,r.run()}}class L2{constructor(i,r,o,d,g,y){this.scheduler=i,this.effectFn=r,this.creationZone=o,this.injector=g,this.watcher=function $e(t,i,r){const o=Object.create(kt);r&&(o.consumerAllowSignalWrites=!0),o.fn=t,o.schedule=i;const d=B=>{o.cleanupFn=B};return o.ref={notify:()=>we(o),run:()=>{if(null===o.fn)return;if(function G(){return ge}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(o.dirty=!1,o.hasRun&&!ze(o))return;o.hasRun=!0;const B=de(o);try{o.cleanupFn(),o.cleanupFn=Xe,o.fn(d)}finally{Re(o,B)}},cleanup:()=>o.cleanupFn(),destroy:()=>function y(B){(function g(B){return null===B.fn&&null===B.schedule})(B)||(Ge(B),B.cleanupFn(),B.fn=null,B.schedule=null,B.cleanupFn=Xe)}(o),[X]:o},o.ref}(C=>this.runEffect(C),()=>this.schedule(),y),this.unregisterOnDestroy=d?.onDestroy(()=>this.destroy())}runEffect(i){try{this.effectFn(i)}catch(r){this.injector.get(Bc,null,{optional:!0})?.handleError(r)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function ZC(t,i){fc("NgSignals"),!i?.injector&&Nn();const r=i?.injector??$i(cc),o=!0!==i?.manualCleanup?r.get(nd):null,d=new L2(r.get(P2),t,typeof Zone>"u"?null:Zone.current,o,r,i?.allowSignalWrites??!1),g=r.get(xC,null,{optional:!0});return g&&8&g._lView[ti]?(g._lView[qs]??=[]).push(d.watcher.notify):d.watcher.notify(),d}function k2(t,i){const r=zr(t),o=i.elementInjector||Xl();return new H0(r).create(o,i.projectableNodes,i.hostElement,i.environmentInjector)}function B2(t){const i=zr(t);if(!i)return null;const r=new H0(i);return{get selector(){return r.selector},get type(){return r.componentType},get inputs(){return r.inputs},get outputs(){return r.outputs},get ngContentSelectors(){return r.ngContentSelectors},get isStandalone(){return i.standalone},get isSignal(){return i.signals}}}},9079:(Dt,qe,S)=>{"use strict";S.d(qe,{ot:()=>G,pQ:()=>ge});var l=S(4438),M=S(1985),h=S(6977);function ge(k){k||((0,l.Af3)(ge),k=(0,l.WQX)(l.abz));const P=new M.c(q=>k.onDestroy(q.next.bind(q)));return q=>q.pipe((0,h.Q)(P))}function G(k,P){const q=!P?.manualCleanup;q&&!P?.injector&&(0,l.Af3)(G);const ne=q?P?.injector?.get(l.abz)??(0,l.WQX)(l.abz):null;let ce;ce=(0,l.vPA)(P?.requireSync?{kind:0}:{kind:1,value:P?.initialValue});const he=k.subscribe({next:Ae=>ce.set({kind:1,value:Ae}),error:Ae=>{if(P?.rejectErrors)throw Ae;ce.set({kind:2,error:Ae})}});return ne?.onDestroy(he.unsubscribe.bind(he)),(0,l.EWP)(()=>{const Ae=ce();switch(Ae.kind){case 1:return Ae.value;case 2:throw Ae.error;case 0:throw new l.wOt(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}},9417:(Dt,qe,S)=>{"use strict";S.d(qe,{$R:()=>Ro,BC:()=>Ot,JD:()=>No,MJ:()=>ns,Q0:()=>so,VZ:()=>Qs,X1:()=>Dl,YN:()=>za,Zm:()=>k,cb:()=>It,cz:()=>we,gE:()=>vn,j4:()=>ca,k0:()=>ze,kq:()=>H,l_:()=>Ba,me:()=>ce,ok:()=>Ys,qT:()=>Cl,tU:()=>xa,vS:()=>vr,wz:()=>ao,xH:()=>Yo,y7:()=>Ha,zX:()=>Ka});var l=S(4438),M=S(177),h=S(6648),ge=S(7468),W=S(6354);let X=(()=>{class xe{constructor(ie,We){this._renderer=ie,this._elementRef=We,this.onChange=wt=>{},this.onTouched=()=>{}}setProperty(ie,We){this._renderer.setProperty(this._elementRef.nativeElement,ie,We)}registerOnTouched(ie){this.onTouched=ie}registerOnChange(ie){this.onChange=ie}setDisabledState(ie){this.setProperty("disabled",ie)}static{this.\u0275fac=function(We){return new(We||xe)(l.rXU(l.sFG),l.rXU(l.aKT))}}static{this.\u0275dir=l.FsC({type:xe})}}return xe})(),oe=(()=>{class xe extends X{static{this.\u0275fac=(()=>{let ie;return function(wt){return(ie||(ie=l.xGo(xe)))(wt||xe)}})()}static{this.\u0275dir=l.FsC({type:xe,features:[l.Vt3]})}}return xe})();const H=new l.nKC(""),G={provide:H,useExisting:(0,l.Rfq)(()=>k),multi:!0};let k=(()=>{class xe extends oe{writeValue(ie){this.setProperty("checked",ie)}static{this.\u0275fac=(()=>{let ie;return function(wt){return(ie||(ie=l.xGo(xe)))(wt||xe)}})()}static{this.\u0275dir=l.FsC({type:xe,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(We,wt){1&We&&l.bIt("change",function(Dr){return wt.onChange(Dr.target.checked)})("blur",function(){return wt.onTouched()})},features:[l.Jv_([G]),l.Vt3]})}}return xe})();const P={provide:H,useExisting:(0,l.Rfq)(()=>ce),multi:!0},ne=new l.nKC("");let ce=(()=>{class xe extends X{constructor(ie,We,wt){super(ie,We),this._compositionMode=wt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function q(){const xe=(0,M.QT)()?(0,M.QT)().getUserAgent():"";return/android (\d+)/.test(xe.toLowerCase())}())}writeValue(ie){this.setProperty("value",ie??"")}_handleInput(ie){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(ie)}_compositionStart(){this._composing=!0}_compositionEnd(ie){this._composing=!1,this._compositionMode&&this.onChange(ie)}static{this.\u0275fac=function(We){return new(We||xe)(l.rXU(l.sFG),l.rXU(l.aKT),l.rXU(ne,8))}}static{this.\u0275dir=l.FsC({type:xe,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(We,wt){1&We&&l.bIt("input",function(Dr){return wt._handleInput(Dr.target.value)})("blur",function(){return wt.onTouched()})("compositionstart",function(){return wt._compositionStart()})("compositionend",function(Dr){return wt._compositionEnd(Dr.target.value)})},features:[l.Jv_([P]),l.Vt3]})}}return xe})();function he(xe){return null==xe||("string"==typeof xe||Array.isArray(xe))&&0===xe.length}function Ae(xe){return null!=xe&&"number"==typeof xe.length}const we=new l.nKC(""),de=new l.nKC(""),Re=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ze{static min(Ee){return Ge(Ee)}static max(Ee){return Oe(Ee)}static required(Ee){return function Ye(xe){return he(xe.value)?{required:!0}:null}(Ee)}static requiredTrue(Ee){return function yt(xe){return!0===xe.value?null:{required:!0}}(Ee)}static email(Ee){return function _t(xe){return he(xe.value)||Re.test(xe.value)?null:{email:!0}}(Ee)}static minLength(Ee){return function ut(xe){return Ee=>he(Ee.value)||!Ae(Ee.value)?null:Ee.value.length<xe?{minlength:{requiredLength:xe,actualLength:Ee.value.length}}:null}(Ee)}static maxLength(Ee){return ae(Ee)}static pattern(Ee){return function x(xe){if(!xe)return T;let Ee,ie;return"string"==typeof xe?(ie="","^"!==xe.charAt(0)&&(ie+="^"),ie+=xe,"$"!==xe.charAt(xe.length-1)&&(ie+="$"),Ee=new RegExp(ie)):(ie=xe.toString(),Ee=xe),We=>{if(he(We.value))return null;const wt=We.value;return Ee.test(wt)?null:{pattern:{requiredPattern:ie,actualValue:wt}}}}(Ee)}static nullValidator(Ee){return null}static compose(Ee){return z(Ee)}static composeAsync(Ee){return Pt(Ee)}}function Ge(xe){return Ee=>{if(he(Ee.value)||he(xe))return null;const ie=parseFloat(Ee.value);return!isNaN(ie)&&ie<xe?{min:{min:xe,actual:Ee.value}}:null}}function Oe(xe){return Ee=>{if(he(Ee.value)||he(xe))return null;const ie=parseFloat(Ee.value);return!isNaN(ie)&&ie>xe?{max:{max:xe,actual:Ee.value}}:null}}function ae(xe){return Ee=>Ae(Ee.value)&&Ee.value.length>xe?{maxlength:{requiredLength:xe,actualLength:Ee.value.length}}:null}function T(xe){return null}function K(xe){return null!=xe}function te(xe){return(0,l.jNT)(xe)?(0,h.H)(xe):xe}function ve(xe){let Ee={};return xe.forEach(ie=>{Ee=null!=ie?{...Ee,...ie}:Ee}),0===Object.keys(Ee).length?null:Ee}function Ce(xe,Ee){return Ee.map(ie=>ie(xe))}function Ne(xe){return xe.map(Ee=>function Be(xe){return!xe.validate}(Ee)?Ee:ie=>Ee.validate(ie))}function z(xe){if(!xe)return null;const Ee=xe.filter(K);return 0==Ee.length?null:function(ie){return ve(Ce(ie,Ee))}}function Fe(xe){return null!=xe?z(Ne(xe)):null}function Pt(xe){if(!xe)return null;const Ee=xe.filter(K);return 0==Ee.length?null:function(ie){const We=Ce(ie,Ee).map(te);return(0,ge.p)(We).pipe((0,W.T)(ve))}}function ot(xe){return null!=xe?Pt(Ne(xe)):null}function Vt(xe,Ee){return null===xe?[Ee]:Array.isArray(xe)?[...xe,Ee]:[xe,Ee]}function vt(xe){return xe._rawValidators}function st(xe){return xe._rawAsyncValidators}function Ft(xe){return xe?Array.isArray(xe)?xe:[xe]:[]}function $e(xe,Ee){return Array.isArray(xe)?xe.includes(Ee):xe===Ee}function Xe(xe,Ee){const ie=Ft(Ee);return Ft(xe).forEach(wt=>{$e(ie,wt)||ie.push(wt)}),ie}function kt(xe,Ee){return Ft(Ee).filter(ie=>!$e(xe,ie))}class cn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Ee){this._rawValidators=Ee||[],this._composedValidatorFn=Fe(this._rawValidators)}_setAsyncValidators(Ee){this._rawAsyncValidators=Ee||[],this._composedAsyncValidatorFn=ot(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Ee){this._onDestroyCallbacks.push(Ee)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Ee=>Ee()),this._onDestroyCallbacks=[]}reset(Ee=void 0){this.control&&this.control.reset(Ee)}hasError(Ee,ie){return!!this.control&&this.control.hasError(Ee,ie)}getError(Ee,ie){return this.control?this.control.getError(Ee,ie):null}}class rn extends cn{get formDirective(){return null}get path(){return null}}class gn extends cn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Xt{constructor(Ee){this._cd=Ee}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ot=(()=>{class xe extends Xt{constructor(ie){super(ie)}static{this.\u0275fac=function(We){return new(We||xe)(l.rXU(gn,2))}}static{this.\u0275dir=l.FsC({type:xe,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(We,wt){2&We&&l.AVh("ng-untouched",wt.isUntouched)("ng-touched",wt.isTouched)("ng-pristine",wt.isPristine)("ng-dirty",wt.isDirty)("ng-valid",wt.isValid)("ng-invalid",wt.isInvalid)("ng-pending",wt.isPending)},features:[l.Vt3]})}}return xe})(),It=(()=>{class xe extends Xt{constructor(ie){super(ie)}static{this.\u0275fac=function(We){return new(We||xe)(l.rXU(rn,10))}}static{this.\u0275dir=l.FsC({type:xe,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(We,wt){2&We&&l.AVh("ng-untouched",wt.isUntouched)("ng-touched",wt.isTouched)("ng-pristine",wt.isPristine)("ng-dirty",wt.isDirty)("ng-valid",wt.isValid)("ng-invalid",wt.isInvalid)("ng-pending",wt.isPending)("ng-submitted",wt.isSubmitted)},features:[l.Vt3]})}}return xe})();const Si="VALID",Ir="INVALID",Kr="PENDING",gr="DISABLED";function Zr(xe){return(zt(xe)?xe.validators:xe)||null}function ar(xe,Ee){return(zt(Ee)?Ee.asyncValidators:xe)||null}function zt(xe){return null!=xe&&!Array.isArray(xe)&&"object"==typeof xe}function at(xe,Ee,ie){const We=xe.controls;if(!(Ee?Object.keys(We):We).length)throw new l.wOt(1e3,"");if(!We[ie])throw new l.wOt(1001,"")}function St(xe,Ee,ie){xe._forEachChild((We,wt)=>{if(void 0===ie[wt])throw new l.wOt(1002,"")})}class fn{constructor(Ee,ie){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(Ee),this._assignAsyncValidators(ie)}get validator(){return this._composedValidatorFn}set validator(Ee){this._rawValidators=this._composedValidatorFn=Ee}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Ee){this._rawAsyncValidators=this._composedAsyncValidatorFn=Ee}get parent(){return this._parent}get valid(){return this.status===Si}get invalid(){return this.status===Ir}get pending(){return this.status==Kr}get disabled(){return this.status===gr}get enabled(){return this.status!==gr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Ee){this._assignValidators(Ee)}setAsyncValidators(Ee){this._assignAsyncValidators(Ee)}addValidators(Ee){this.setValidators(Xe(Ee,this._rawValidators))}addAsyncValidators(Ee){this.setAsyncValidators(Xe(Ee,this._rawAsyncValidators))}removeValidators(Ee){this.setValidators(kt(Ee,this._rawValidators))}removeAsyncValidators(Ee){this.setAsyncValidators(kt(Ee,this._rawAsyncValidators))}hasValidator(Ee){return $e(this._rawValidators,Ee)}hasAsyncValidator(Ee){return $e(this._rawAsyncValidators,Ee)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Ee={}){this.touched=!0,this._parent&&!Ee.onlySelf&&this._parent.markAsTouched(Ee)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(Ee=>Ee.markAllAsTouched())}markAsUntouched(Ee={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(ie=>{ie.markAsUntouched({onlySelf:!0})}),this._parent&&!Ee.onlySelf&&this._parent._updateTouched(Ee)}markAsDirty(Ee={}){this.pristine=!1,this._parent&&!Ee.onlySelf&&this._parent.markAsDirty(Ee)}markAsPristine(Ee={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(ie=>{ie.markAsPristine({onlySelf:!0})}),this._parent&&!Ee.onlySelf&&this._parent._updatePristine(Ee)}markAsPending(Ee={}){this.status=Kr,!1!==Ee.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!Ee.onlySelf&&this._parent.markAsPending(Ee)}disable(Ee={}){const ie=this._parentMarkedDirty(Ee.onlySelf);this.status=gr,this.errors=null,this._forEachChild(We=>{We.disable({...Ee,onlySelf:!0})}),this._updateValue(),!1!==Ee.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Ee,skipPristineCheck:ie}),this._onDisabledChange.forEach(We=>We(!0))}enable(Ee={}){const ie=this._parentMarkedDirty(Ee.onlySelf);this.status=Si,this._forEachChild(We=>{We.enable({...Ee,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Ee.emitEvent}),this._updateAncestors({...Ee,skipPristineCheck:ie}),this._onDisabledChange.forEach(We=>We(!1))}_updateAncestors(Ee){this._parent&&!Ee.onlySelf&&(this._parent.updateValueAndValidity(Ee),Ee.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(Ee){this._parent=Ee}getRawValue(){return this.value}updateValueAndValidity(Ee={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Si||this.status===Kr)&&this._runAsyncValidator(Ee.emitEvent)),!1!==Ee.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Ee.onlySelf&&this._parent.updateValueAndValidity(Ee)}_updateTreeValidity(Ee={emitEvent:!0}){this._forEachChild(ie=>ie._updateTreeValidity(Ee)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Ee.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gr:Si}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Ee){if(this.asyncValidator){this.status=Kr,this._hasOwnPendingAsyncValidator=!0;const ie=te(this.asyncValidator(this));this._asyncValidationSubscription=ie.subscribe(We=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(We,{emitEvent:Ee})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(Ee,ie={}){this.errors=Ee,this._updateControlsErrors(!1!==ie.emitEvent)}get(Ee){let ie=Ee;return null==ie||(Array.isArray(ie)||(ie=ie.split(".")),0===ie.length)?null:ie.reduce((We,wt)=>We&&We._find(wt),this)}getError(Ee,ie){const We=ie?this.get(ie):this;return We&&We.errors?We.errors[Ee]:null}hasError(Ee,ie){return!!this.getError(Ee,ie)}get root(){let Ee=this;for(;Ee._parent;)Ee=Ee._parent;return Ee}_updateControlsErrors(Ee){this.status=this._calculateStatus(),Ee&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(Ee)}_initObservables(){this.valueChanges=new l.bkB,this.statusChanges=new l.bkB}_calculateStatus(){return this._allControlsDisabled()?gr:this.errors?Ir:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Kr)?Kr:this._anyControlsHaveStatus(Ir)?Ir:Si}_anyControlsHaveStatus(Ee){return this._anyControls(ie=>ie.status===Ee)}_anyControlsDirty(){return this._anyControls(Ee=>Ee.dirty)}_anyControlsTouched(){return this._anyControls(Ee=>Ee.touched)}_updatePristine(Ee={}){this.pristine=!this._anyControlsDirty(),this._parent&&!Ee.onlySelf&&this._parent._updatePristine(Ee)}_updateTouched(Ee={}){this.touched=this._anyControlsTouched(),this._parent&&!Ee.onlySelf&&this._parent._updateTouched(Ee)}_registerOnCollectionChange(Ee){this._onCollectionChange=Ee}_setUpdateStrategy(Ee){zt(Ee)&&null!=Ee.updateOn&&(this._updateOn=Ee.updateOn)}_parentMarkedDirty(Ee){return!Ee&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Ee){return null}_assignValidators(Ee){this._rawValidators=Array.isArray(Ee)?Ee.slice():Ee,this._composedValidatorFn=function ls(xe){return Array.isArray(xe)?Fe(xe):xe||null}(this._rawValidators)}_assignAsyncValidators(Ee){this._rawAsyncValidators=Array.isArray(Ee)?Ee.slice():Ee,this._composedAsyncValidatorFn=function Rt(xe){return Array.isArray(xe)?ot(xe):xe||null}(this._rawAsyncValidators)}}class vn extends fn{constructor(Ee,ie,We){super(Zr(ie),ar(We,ie)),this.controls=Ee,this._initObservables(),this._setUpdateStrategy(ie),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Ee,ie){return this.controls[Ee]?this.controls[Ee]:(this.controls[Ee]=ie,ie.setParent(this),ie._registerOnCollectionChange(this._onCollectionChange),ie)}addControl(Ee,ie,We={}){this.registerControl(Ee,ie),this.updateValueAndValidity({emitEvent:We.emitEvent}),this._onCollectionChange()}removeControl(Ee,ie={}){this.controls[Ee]&&this.controls[Ee]._registerOnCollectionChange(()=>{}),delete this.controls[Ee],this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}setControl(Ee,ie,We={}){this.controls[Ee]&&this.controls[Ee]._registerOnCollectionChange(()=>{}),delete this.controls[Ee],ie&&this.registerControl(Ee,ie),this.updateValueAndValidity({emitEvent:We.emitEvent}),this._onCollectionChange()}contains(Ee){return this.controls.hasOwnProperty(Ee)&&this.controls[Ee].enabled}setValue(Ee,ie={}){St(this,0,Ee),Object.keys(Ee).forEach(We=>{at(this,!0,We),this.controls[We].setValue(Ee[We],{onlySelf:!0,emitEvent:ie.emitEvent})}),this.updateValueAndValidity(ie)}patchValue(Ee,ie={}){null!=Ee&&(Object.keys(Ee).forEach(We=>{const wt=this.controls[We];wt&&wt.patchValue(Ee[We],{onlySelf:!0,emitEvent:ie.emitEvent})}),this.updateValueAndValidity(ie))}reset(Ee={},ie={}){this._forEachChild((We,wt)=>{We.reset(Ee?Ee[wt]:null,{onlySelf:!0,emitEvent:ie.emitEvent})}),this._updatePristine(ie),this._updateTouched(ie),this.updateValueAndValidity(ie)}getRawValue(){return this._reduceChildren({},(Ee,ie,We)=>(Ee[We]=ie.getRawValue(),Ee))}_syncPendingControls(){let Ee=this._reduceChildren(!1,(ie,We)=>!!We._syncPendingControls()||ie);return Ee&&this.updateValueAndValidity({onlySelf:!0}),Ee}_forEachChild(Ee){Object.keys(this.controls).forEach(ie=>{const We=this.controls[ie];We&&Ee(We,ie)})}_setUpControls(){this._forEachChild(Ee=>{Ee.setParent(this),Ee._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Ee){for(const[ie,We]of Object.entries(this.controls))if(this.contains(ie)&&Ee(We))return!0;return!1}_reduceValue(){return this._reduceChildren({},(ie,We,wt)=>((We.enabled||this.disabled)&&(ie[wt]=We.value),ie))}_reduceChildren(Ee,ie){let We=Ee;return this._forEachChild((wt,wi)=>{We=ie(We,wt,wi)}),We}_allControlsDisabled(){for(const Ee of Object.keys(this.controls))if(this.controls[Ee].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Ee){return this.controls.hasOwnProperty(Ee)?this.controls[Ee]:null}}class gi extends vn{}const $n=new l.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>hr}),hr="always";function cs(xe,Ee){return[...Ee.path,xe]}function Qr(xe,Ee,ie=hr){Sr(xe,Ee),Ee.valueAccessor.writeValue(xe.value),(xe.disabled||"always"===ie)&&Ee.valueAccessor.setDisabledState?.(xe.disabled),function Fs(xe,Ee){Ee.valueAccessor.registerOnChange(ie=>{xe._pendingValue=ie,xe._pendingChange=!0,xe._pendingDirty=!0,"change"===xe.updateOn&&ir(xe,Ee)})}(xe,Ee),function Ks(xe,Ee){const ie=(We,wt)=>{Ee.valueAccessor.writeValue(We),wt&&Ee.viewToModelUpdate(We)};xe.registerOnChange(ie),Ee._registerOnDestroy(()=>{xe._unregisterOnChange(ie)})}(xe,Ee),function hs(xe,Ee){Ee.valueAccessor.registerOnTouched(()=>{xe._pendingTouched=!0,"blur"===xe.updateOn&&xe._pendingChange&&ir(xe,Ee),"submit"!==xe.updateOn&&xe.markAsTouched()})}(xe,Ee),function xi(xe,Ee){if(Ee.valueAccessor.setDisabledState){const ie=We=>{Ee.valueAccessor.setDisabledState(We)};xe.registerOnDisabledChange(ie),Ee._registerOnDestroy(()=>{xe._unregisterOnDisabledChange(ie)})}}(xe,Ee)}function zn(xe,Ee,ie=!0){const We=()=>{};Ee.valueAccessor&&(Ee.valueAccessor.registerOnChange(We),Ee.valueAccessor.registerOnTouched(We)),us(xe,Ee),xe&&(Ee._invokeOnDestroyCallbacks(),xe._registerOnCollectionChange(()=>{}))}function Kn(xe,Ee){xe.forEach(ie=>{ie.registerOnValidatorChange&&ie.registerOnValidatorChange(Ee)})}function Sr(xe,Ee){const ie=vt(xe);null!==Ee.validator?xe.setValidators(Vt(ie,Ee.validator)):"function"==typeof ie&&xe.setValidators([ie]);const We=st(xe);null!==Ee.asyncValidator?xe.setAsyncValidators(Vt(We,Ee.asyncValidator)):"function"==typeof We&&xe.setAsyncValidators([We]);const wt=()=>xe.updateValueAndValidity();Kn(Ee._rawValidators,wt),Kn(Ee._rawAsyncValidators,wt)}function us(xe,Ee){let ie=!1;if(null!==xe){if(null!==Ee.validator){const wt=vt(xe);if(Array.isArray(wt)&&wt.length>0){const wi=wt.filter(Dr=>Dr!==Ee.validator);wi.length!==wt.length&&(ie=!0,xe.setValidators(wi))}}if(null!==Ee.asyncValidator){const wt=st(xe);if(Array.isArray(wt)&&wt.length>0){const wi=wt.filter(Dr=>Dr!==Ee.asyncValidator);wi.length!==wt.length&&(ie=!0,xe.setAsyncValidators(wi))}}}const We=()=>{};return Kn(Ee._rawValidators,We),Kn(Ee._rawAsyncValidators,We),ie}function ir(xe,Ee){xe._pendingDirty&&xe.markAsDirty(),xe.setValue(xe._pendingValue,{emitModelToViewChange:!1}),Ee.viewToModelUpdate(xe._pendingValue),xe._pendingChange=!1}function $(xe,Ee){if(!xe.hasOwnProperty("model"))return!1;const ie=xe.model;return!!ie.isFirstChange()||!Object.is(Ee,ie.currentValue)}function pt(xe,Ee){if(!Ee)return null;let ie,We,wt;return Array.isArray(Ee),Ee.forEach(wi=>{wi.constructor===ce?ie=wi:function ue(xe){return Object.getPrototypeOf(xe.constructor)===oe}(wi)?We=wi:wt=wi}),wt||We||ie||null}function Ei(xe,Ee){const ie=xe.indexOf(Ee);ie>-1&&xe.splice(ie,1)}function Yi(xe){return"object"==typeof xe&&null!==xe&&2===Object.keys(xe).length&&"value"in xe&&"disabled"in xe}Promise.resolve();const ns=class extends fn{constructor(Ee=null,ie,We){super(Zr(ie),ar(We,ie)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Ee),this._setUpdateStrategy(ie),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zt(ie)&&(ie.nonNullable||ie.initialValueIsDefault)&&(this.defaultValue=Yi(Ee)?Ee.value:Ee)}setValue(Ee,ie={}){this.value=this._pendingValue=Ee,this._onChange.length&&!1!==ie.emitModelToViewChange&&this._onChange.forEach(We=>We(this.value,!1!==ie.emitViewToModelChange)),this.updateValueAndValidity(ie)}patchValue(Ee,ie={}){this.setValue(Ee,ie)}reset(Ee=this.defaultValue,ie={}){this._applyFormState(Ee),this.markAsPristine(ie),this.markAsUntouched(ie),this.setValue(this.value,ie),this._pendingChange=!1}_updateValue(){}_anyControls(Ee){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Ee){this._onChange.push(Ee)}_unregisterOnChange(Ee){Ei(this._onChange,Ee)}registerOnDisabledChange(Ee){this._onDisabledChange.push(Ee)}_unregisterOnDisabledChange(Ee){Ei(this._onDisabledChange,Ee)}_forEachChild(Ee){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Ee){Yi(Ee)?(this.value=this._pendingValue=Ee.value,Ee.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Ee}};let Pr=(()=>{class xe extends rn{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return cs(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static{this.\u0275fac=(()=>{let ie;return function(wt){return(ie||(ie=l.xGo(xe)))(wt||xe)}})()}static{this.\u0275dir=l.FsC({type:xe,features:[l.Vt3]})}}return xe})();const ea={provide:gn,useExisting:(0,l.Rfq)(()=>vr)},Gi=Promise.resolve();let vr=(()=>{class xe extends gn{constructor(ie,We,wt,wi,Dr,el){super(),this._changeDetectorRef=Dr,this.callSetDisabledState=el,this.control=new ns,this._registered=!1,this.name="",this.update=new l.bkB,this._parent=ie,this._setValidators(We),this._setAsyncValidators(wt),this.valueAccessor=pt(0,wi)}ngOnChanges(ie){if(this._checkForErrors(),!this._registered||"name"in ie){if(this._registered&&(this._checkName(),this.formDirective)){const We=ie.name.previousValue;this.formDirective.removeControl({name:We,path:this._getPath(We)})}this._setUpControl()}"isDisabled"in ie&&this._updateDisabled(ie),$(ie,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(ie){this.viewModel=ie,this.update.emit(ie)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Qr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(ie){Gi.then(()=>{this.control.setValue(ie,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(ie){const We=ie.isDisabled.currentValue,wt=0!==We&&(0,l.L39)(We);Gi.then(()=>{wt&&!this.control.disabled?this.control.disable():!wt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(ie){return this._parent?cs(ie,this._parent):[ie]}static{this.\u0275fac=function(We){return new(We||xe)(l.rXU(rn,9),l.rXU(we,10),l.rXU(de,10),l.rXU(H,10),l.rXU(l.gRc,8),l.rXU($n,8))}}static{this.\u0275dir=l.FsC({type:xe,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[l.Mj6.None,"disabled","isDisabled"],model:[l.Mj6.None,"ngModel","model"],options:[l.Mj6.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l.Jv_([ea]),l.Vt3,l.OA$]})}}return xe})(),Cl=(()=>{class xe{static{this.\u0275fac=function(We){return new(We||xe)}}static{this.\u0275dir=l.FsC({type:xe,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return xe})();const To={provide:H,useExisting:(0,l.Rfq)(()=>so),multi:!0};let so=(()=>{class xe extends oe{writeValue(ie){this.setProperty("value",ie??"")}registerOnChange(ie){this.onChange=We=>{ie(""==We?null:parseFloat(We))}}static{this.\u0275fac=(()=>{let ie;return function(wt){return(ie||(ie=l.xGo(xe)))(wt||xe)}})()}static{this.\u0275dir=l.FsC({type:xe,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(We,wt){1&We&&l.bIt("input",function(Dr){return wt.onChange(Dr.target.value)})("blur",function(){return wt.onTouched()})},features:[l.Jv_([To]),l.Vt3]})}}return xe})();const yo=new l.nKC(""),Qo={provide:gn,useExisting:(0,l.Rfq)(()=>Ba)};let Ba=(()=>{class xe extends gn{set isDisabled(ie){}static{this._ngModelWarningSentOnce=!1}constructor(ie,We,wt,wi,Dr){super(),this._ngModelWarningConfig=wi,this.callSetDisabledState=Dr,this.update=new l.bkB,this._ngModelWarningSent=!1,this._setValidators(ie),this._setAsyncValidators(We),this.valueAccessor=pt(0,wt)}ngOnChanges(ie){if(this._isControlChanged(ie)){const We=ie.form.previousValue;We&&zn(We,this,!1),Qr(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}$(ie,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&zn(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(ie){this.viewModel=ie,this.update.emit(ie)}_isControlChanged(ie){return ie.hasOwnProperty("form")}static{this.\u0275fac=function(We){return new(We||xe)(l.rXU(we,10),l.rXU(de,10),l.rXU(H,10),l.rXU(yo,8),l.rXU($n,8))}}static{this.\u0275dir=l.FsC({type:xe,selectors:[["","formControl",""]],inputs:{form:[l.Mj6.None,"formControl","form"],isDisabled:[l.Mj6.None,"disabled","isDisabled"],model:[l.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[l.Jv_([Qo]),l.Vt3,l.OA$]})}}return xe})();const ga={provide:rn,useExisting:(0,l.Rfq)(()=>ca)};let ca=(()=>{class xe extends rn{constructor(ie,We,wt){super(),this.callSetDisabledState=wt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.bkB,this._setValidators(ie),this._setAsyncValidators(We)}ngOnChanges(ie){this._checkFormPresent(),ie.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(us(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(ie){const We=this.form.get(ie.path);return Qr(We,ie,this.callSetDisabledState),We.updateValueAndValidity({emitEvent:!1}),this.directives.push(ie),We}getControl(ie){return this.form.get(ie.path)}removeControl(ie){zn(ie.control||null,ie,!1),function en(xe,Ee){const ie=xe.indexOf(Ee);ie>-1&&xe.splice(ie,1)}(this.directives,ie)}addFormGroup(ie){this._setUpFormContainer(ie)}removeFormGroup(ie){this._cleanUpFormContainer(ie)}getFormGroup(ie){return this.form.get(ie.path)}addFormArray(ie){this._setUpFormContainer(ie)}removeFormArray(ie){this._cleanUpFormContainer(ie)}getFormArray(ie){return this.form.get(ie.path)}updateModel(ie,We){this.form.get(ie.path).setValue(We)}onSubmit(ie){return this.submitted=!0,function Ze(xe,Ee){xe._syncPendingControls(),Ee.forEach(ie=>{const We=ie.control;"submit"===We.updateOn&&We._pendingChange&&(ie.viewToModelUpdate(We._pendingValue),We._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(ie),"dialog"===ie?.target?.method}onReset(){this.resetForm()}resetForm(ie=void 0){this.form.reset(ie),this.submitted=!1}_updateDomValue(){this.directives.forEach(ie=>{const We=ie.control,wt=this.form.get(ie.path);We!==wt&&(zn(We||null,ie),(xe=>xe instanceof ns)(wt)&&(Qr(wt,ie,this.callSetDisabledState),ie.control=wt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(ie){const We=this.form.get(ie.path);(function Mo(xe,Ee){Sr(xe,Ee)})(We,ie),We.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(ie){if(this.form){const We=this.form.get(ie.path);We&&function As(xe,Ee){return us(xe,Ee)}(We,ie)&&We.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Sr(this.form,this),this._oldForm&&us(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(We){return new(We||xe)(l.rXU(we,10),l.rXU(de,10),l.rXU($n,8))}}static{this.\u0275dir=l.FsC({type:xe,selectors:[["","formGroup",""]],hostBindings:function(We,wt){1&We&&l.bIt("submit",function(Dr){return wt.onSubmit(Dr)})("reset",function(){return wt.onReset()})},inputs:{form:[l.Mj6.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l.Jv_([ga]),l.Vt3,l.OA$]})}}return xe})();const oo={provide:rn,useExisting:(0,l.Rfq)(()=>Ro)};let Ro=(()=>{class xe extends Pr{constructor(ie,We,wt){super(),this.name=null,this._parent=ie,this._setValidators(We),this._setAsyncValidators(wt)}_checkParentType(){ll(this._parent)}static{this.\u0275fac=function(We){return new(We||xe)(l.rXU(rn,13),l.rXU(we,10),l.rXU(de,10))}}static{this.\u0275dir=l.FsC({type:xe,selectors:[["","formGroupName",""]],inputs:{name:[l.Mj6.None,"formGroupName","name"]},features:[l.Jv_([oo]),l.Vt3]})}}return xe})();const Ta={provide:rn,useExisting:(0,l.Rfq)(()=>Ua)};let Ua=(()=>{class xe extends rn{constructor(ie,We,wt){super(),this.name=null,this._parent=ie,this._setValidators(We),this._setAsyncValidators(wt)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return cs(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){ll(this._parent)}static{this.\u0275fac=function(We){return new(We||xe)(l.rXU(rn,13),l.rXU(we,10),l.rXU(de,10))}}static{this.\u0275dir=l.FsC({type:xe,selectors:[["","formArrayName",""]],inputs:{name:[l.Mj6.None,"formArrayName","name"]},features:[l.Jv_([Ta]),l.Vt3]})}}return xe})();function ll(xe){return!(xe instanceof Ro||xe instanceof ca||xe instanceof Ua)}const va={provide:gn,useExisting:(0,l.Rfq)(()=>No)};let No=(()=>{class xe extends gn{set isDisabled(ie){}static{this._ngModelWarningSentOnce=!1}constructor(ie,We,wt,wi,Dr){super(),this._ngModelWarningConfig=Dr,this._added=!1,this.name=null,this.update=new l.bkB,this._ngModelWarningSent=!1,this._parent=ie,this._setValidators(We),this._setAsyncValidators(wt),this.valueAccessor=pt(0,wi)}ngOnChanges(ie){this._added||this._setUpControl(),$(ie,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(ie){this.viewModel=ie,this.update.emit(ie)}get path(){return cs(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(We){return new(We||xe)(l.rXU(rn,13),l.rXU(we,10),l.rXU(de,10),l.rXU(H,10),l.rXU(yo,8))}}static{this.\u0275dir=l.FsC({type:xe,selectors:[["","formControlName",""]],inputs:{name:[l.Mj6.None,"formControlName","name"],isDisabled:[l.Mj6.None,"disabled","isDisabled"],model:[l.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[l.Jv_([va]),l.Vt3,l.OA$]})}}return xe})();const Va={provide:H,useExisting:(0,l.Rfq)(()=>ao),multi:!0};function ta(xe,Ee){return null==xe?`${Ee}`:(Ee&&"object"==typeof Ee&&(Ee="Object"),`${xe}: ${Ee}`.slice(0,50))}let ao=(()=>{class xe extends oe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(ie){this._compareWith=ie}writeValue(ie){this.value=ie;const wt=ta(this._getOptionId(ie),ie);this.setProperty("value",wt)}registerOnChange(ie){this.onChange=We=>{this.value=this._getOptionValue(We),ie(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(ie){for(const We of this._optionMap.keys())if(this._compareWith(this._optionMap.get(We),ie))return We;return null}_getOptionValue(ie){const We=function zl(xe){return xe.split(":")[0]}(ie);return this._optionMap.has(We)?this._optionMap.get(We):ie}static{this.\u0275fac=(()=>{let ie;return function(wt){return(ie||(ie=l.xGo(xe)))(wt||xe)}})()}static{this.\u0275dir=l.FsC({type:xe,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(We,wt){1&We&&l.bIt("change",function(Dr){return wt.onChange(Dr.target.value)})("blur",function(){return wt.onTouched()})},inputs:{compareWith:"compareWith"},features:[l.Jv_([Va]),l.Vt3]})}}return xe})(),Yo=(()=>{class xe{constructor(ie,We,wt){this._element=ie,this._renderer=We,this._select=wt,this._select&&(this.id=this._select._registerOption())}set ngValue(ie){null!=this._select&&(this._select._optionMap.set(this.id,ie),this._setElementValue(ta(this.id,ie)),this._select.writeValue(this._select.value))}set value(ie){this._setElementValue(ie),this._select&&this._select.writeValue(this._select.value)}_setElementValue(ie){this._renderer.setProperty(this._element.nativeElement,"value",ie)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(We){return new(We||xe)(l.rXU(l.aKT),l.rXU(l.sFG),l.rXU(ao,9))}}static{this.\u0275dir=l.FsC({type:xe,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return xe})();const $i={provide:H,useExisting:(0,l.Rfq)(()=>na),multi:!0};function Xa(xe,Ee){return null==xe?`${Ee}`:("string"==typeof Ee&&(Ee=`'${Ee}'`),Ee&&"object"==typeof Ee&&(Ee="Object"),`${xe}: ${Ee}`.slice(0,50))}let na=(()=>{class xe extends oe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(ie){this._compareWith=ie}writeValue(ie){let We;if(this.value=ie,Array.isArray(ie)){const wt=ie.map(wi=>this._getOptionId(wi));We=(wi,Dr)=>{wi._setSelected(wt.indexOf(Dr.toString())>-1)}}else We=(wt,wi)=>{wt._setSelected(!1)};this._optionMap.forEach(We)}registerOnChange(ie){this.onChange=We=>{const wt=[],wi=We.selectedOptions;if(void 0!==wi){const Dr=wi;for(let el=0;el<Dr.length;el++){const ra=this._getOptionValue(Dr[el].value);wt.push(ra)}}else{const Dr=We.options;for(let el=0;el<Dr.length;el++){const tc=Dr[el];if(tc.selected){const ra=this._getOptionValue(tc.value);wt.push(ra)}}}this.value=wt,ie(wt)}}_registerOption(ie){const We=(this._idCounter++).toString();return this._optionMap.set(We,ie),We}_getOptionId(ie){for(const We of this._optionMap.keys())if(this._compareWith(this._optionMap.get(We)._value,ie))return We;return null}_getOptionValue(ie){const We=function _a(xe){return xe.split(":")[0]}(ie);return this._optionMap.has(We)?this._optionMap.get(We)._value:ie}static{this.\u0275fac=(()=>{let ie;return function(wt){return(ie||(ie=l.xGo(xe)))(wt||xe)}})()}static{this.\u0275dir=l.FsC({type:xe,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(We,wt){1&We&&l.bIt("change",function(Dr){return wt.onChange(Dr.target)})("blur",function(){return wt.onTouched()})},inputs:{compareWith:"compareWith"},features:[l.Jv_([$i]),l.Vt3]})}}return xe})(),Ha=(()=>{class xe{constructor(ie,We,wt){this._element=ie,this._renderer=We,this._select=wt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(ie){null!=this._select&&(this._value=ie,this._setElementValue(Xa(this.id,ie)),this._select.writeValue(this._select.value))}set value(ie){this._select?(this._value=ie,this._setElementValue(Xa(this.id,ie)),this._select.writeValue(this._select.value)):this._setElementValue(ie)}_setElementValue(ie){this._renderer.setProperty(this._element.nativeElement,"value",ie)}_setSelected(ie){this._renderer.setProperty(this._element.nativeElement,"selected",ie)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(We){return new(We||xe)(l.rXU(l.aKT),l.rXU(l.sFG),l.rXU(na,9))}}static{this.\u0275dir=l.FsC({type:xe,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return xe})();function wl(xe){return"number"==typeof xe?xe:parseFloat(xe)}let ya=(()=>{class xe{constructor(){this._validator=T}ngOnChanges(ie){if(this.inputName in ie){const We=this.normalizeInput(ie[this.inputName].currentValue);this._enabled=this.enabled(We),this._validator=this._enabled?this.createValidator(We):T,this._onChange&&this._onChange()}}validate(ie){return this._validator(ie)}registerOnValidatorChange(ie){this._onChange=ie}enabled(ie){return null!=ie}static{this.\u0275fac=function(We){return new(We||xe)}}static{this.\u0275dir=l.FsC({type:xe,features:[l.OA$]})}}return xe})();const Tc={provide:we,useExisting:(0,l.Rfq)(()=>Ka),multi:!0};let Ka=(()=>{class xe extends ya{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=ie=>wl(ie),this.createValidator=ie=>Oe(ie)}static{this.\u0275fac=(()=>{let ie;return function(wt){return(ie||(ie=l.xGo(xe)))(wt||xe)}})()}static{this.\u0275dir=l.FsC({type:xe,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(We,wt){2&We&&l.BMQ("max",wt._enabled?wt.max:null)},inputs:{max:"max"},features:[l.Jv_([Tc]),l.Vt3]})}}return xe})();const Dc={provide:we,useExisting:(0,l.Rfq)(()=>Qs),multi:!0};let Qs=(()=>{class xe extends ya{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=ie=>wl(ie),this.createValidator=ie=>Ge(ie)}static{this.\u0275fac=(()=>{let ie;return function(wt){return(ie||(ie=l.xGo(xe)))(wt||xe)}})()}static{this.\u0275dir=l.FsC({type:xe,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(We,wt){2&We&&l.BMQ("min",wt._enabled?wt.min:null)},inputs:{min:"min"},features:[l.Jv_([Dc]),l.Vt3]})}}return xe})();const Gl={provide:we,useExisting:(0,l.Rfq)(()=>xa),multi:!0};let xa=(()=>{class xe extends ya{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=ie=>function cl(xe){return"number"==typeof xe?xe:parseInt(xe,10)}(ie),this.createValidator=ie=>ae(ie)}static{this.\u0275fac=(()=>{let ie;return function(wt){return(ie||(ie=l.xGo(xe)))(wt||xe)}})()}static{this.\u0275dir=l.FsC({type:xe,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(We,wt){2&We&&l.BMQ("maxlength",wt._enabled?wt.maxlength:null)},inputs:{maxlength:"maxlength"},features:[l.Jv_([Gl]),l.Vt3]})}}return xe})(),zo=(()=>{class xe{static{this.\u0275fac=function(We){return new(We||xe)}}static{this.\u0275mod=l.$C({type:xe})}static{this.\u0275inj=l.G2t({})}}return xe})();class Jr extends fn{constructor(Ee,ie,We){super(Zr(ie),ar(We,ie)),this.controls=Ee,this._initObservables(),this._setUpdateStrategy(ie),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(Ee){return this.controls[this._adjustIndex(Ee)]}push(Ee,ie={}){this.controls.push(Ee),this._registerControl(Ee),this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}insert(Ee,ie,We={}){this.controls.splice(Ee,0,ie),this._registerControl(ie),this.updateValueAndValidity({emitEvent:We.emitEvent})}removeAt(Ee,ie={}){let We=this._adjustIndex(Ee);We<0&&(We=0),this.controls[We]&&this.controls[We]._registerOnCollectionChange(()=>{}),this.controls.splice(We,1),this.updateValueAndValidity({emitEvent:ie.emitEvent})}setControl(Ee,ie,We={}){let wt=this._adjustIndex(Ee);wt<0&&(wt=0),this.controls[wt]&&this.controls[wt]._registerOnCollectionChange(()=>{}),this.controls.splice(wt,1),ie&&(this.controls.splice(wt,0,ie),this._registerControl(ie)),this.updateValueAndValidity({emitEvent:We.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(Ee,ie={}){St(this,0,Ee),Ee.forEach((We,wt)=>{at(this,!1,wt),this.at(wt).setValue(We,{onlySelf:!0,emitEvent:ie.emitEvent})}),this.updateValueAndValidity(ie)}patchValue(Ee,ie={}){null!=Ee&&(Ee.forEach((We,wt)=>{this.at(wt)&&this.at(wt).patchValue(We,{onlySelf:!0,emitEvent:ie.emitEvent})}),this.updateValueAndValidity(ie))}reset(Ee=[],ie={}){this._forEachChild((We,wt)=>{We.reset(Ee[wt],{onlySelf:!0,emitEvent:ie.emitEvent})}),this._updatePristine(ie),this._updateTouched(ie),this.updateValueAndValidity(ie)}getRawValue(){return this.controls.map(Ee=>Ee.getRawValue())}clear(Ee={}){this.controls.length<1||(this._forEachChild(ie=>ie._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:Ee.emitEvent}))}_adjustIndex(Ee){return Ee<0?Ee+this.length:Ee}_syncPendingControls(){let Ee=this.controls.reduce((ie,We)=>!!We._syncPendingControls()||ie,!1);return Ee&&this.updateValueAndValidity({onlySelf:!0}),Ee}_forEachChild(Ee){this.controls.forEach((ie,We)=>{Ee(ie,We)})}_updateValue(){this.value=this.controls.filter(Ee=>Ee.enabled||this.disabled).map(Ee=>Ee.value)}_anyControls(Ee){return this.controls.some(ie=>ie.enabled&&Ee(ie))}_setUpControls(){this._forEachChild(Ee=>this._registerControl(Ee))}_allControlsDisabled(){for(const Ee of this.controls)if(Ee.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(Ee){Ee.setParent(this),Ee._registerOnCollectionChange(this._onCollectionChange)}_find(Ee){return this.at(Ee)??null}}function Da(xe){return!!xe&&(void 0!==xe.asyncValidators||void 0!==xe.validators||void 0!==xe.updateOn)}let Ys=(()=>{class xe{constructor(){this.useNonNullable=!1}get nonNullable(){const ie=new xe;return ie.useNonNullable=!0,ie}group(ie,We=null){const wt=this._reduceControls(ie);let wi={};return Da(We)?wi=We:null!==We&&(wi.validators=We.validator,wi.asyncValidators=We.asyncValidator),new vn(wt,wi)}record(ie,We=null){const wt=this._reduceControls(ie);return new gi(wt,We)}control(ie,We,wt){let wi={};return this.useNonNullable?(Da(We)?wi=We:(wi.validators=We,wi.asyncValidators=wt),new ns(ie,{...wi,nonNullable:!0})):new ns(ie,We,wt)}array(ie,We,wt){const wi=ie.map(Dr=>this._createControl(Dr));return new Jr(wi,We,wt)}_reduceControls(ie){const We={};return Object.keys(ie).forEach(wt=>{We[wt]=this._createControl(ie[wt])}),We}_createControl(ie){return ie instanceof ns||ie instanceof fn?ie:Array.isArray(ie)?this.control(ie[0],ie.length>1?ie[1]:null,ie.length>2?ie[2]:null):this.control(ie)}static{this.\u0275fac=function(We){return new(We||xe)}}static{this.\u0275prov=l.jDH({token:xe,factory:xe.\u0275fac,providedIn:"root"})}}return xe})(),za=(()=>{class xe{static withConfig(ie){return{ngModule:xe,providers:[{provide:$n,useValue:ie.callSetDisabledState??hr}]}}static{this.\u0275fac=function(We){return new(We||xe)}}static{this.\u0275mod=l.$C({type:xe})}static{this.\u0275inj=l.G2t({imports:[zo]})}}return xe})(),Dl=(()=>{class xe{static withConfig(ie){return{ngModule:xe,providers:[{provide:yo,useValue:ie.warnOnNgModelWithFormControl??"always"},{provide:$n,useValue:ie.callSetDisabledState??hr}]}}static{this.\u0275fac=function(We){return new(We||xe)}}static{this.\u0275mod=l.$C({type:xe})}static{this.\u0275inj=l.G2t({imports:[zo]})}}return xe})()},4073:()=>{"use strict";const Dt=":";Error;const vt=function($e,...Xe){if(vt.translate){const cn=vt.translate($e,Xe);$e=cn[0],Xe=cn[1]}let kt=Ft($e[0],$e.raw[0]);for(let cn=1;cn<$e.length;cn++)kt+=Xe[cn-1]+Ft($e[cn],$e.raw[cn]);return kt},st=":";function Ft($e,Xe){return Xe.charAt(0)===st?$e.substring(function K($e,Xe){for(let kt=1,cn=1;kt<$e.length;kt++,cn++)if("\\"===Xe[cn])cn++;else if($e[kt]===Dt)return kt;throw new Error(`Unterminated $localize metadata block in "${Xe}".`)}($e,Xe)+1):$e}globalThis.$localize=vt},345:(Dt,qe,S)=>{"use strict";S.d(qe,{B7:()=>_t,B8:()=>Pt,hE:()=>Ot,up:()=>uo});var l=S(4438),M=S(177);class h extends M.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ge extends h{static makeCurrent(){(0,M.ZD)(new ge)}onAndCancel(zt,at,St){return zt.addEventListener(at,St),()=>{zt.removeEventListener(at,St)}}dispatchEvent(zt,at){zt.dispatchEvent(at)}remove(zt){zt.parentNode&&zt.parentNode.removeChild(zt)}createElement(zt,at){return(at=at||this.getDefaultDocument()).createElement(zt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(zt){return zt.nodeType===Node.ELEMENT_NODE}isShadowRoot(zt){return zt instanceof DocumentFragment}getGlobalEventTarget(zt,at){return"window"===at?window:"document"===at?zt:"body"===at?zt.body:null}getBaseHref(zt){const at=function X(){return W=W||document.querySelector("base"),W?W.getAttribute("href"):null}();return null==at?null:function oe(Rt){return new URL(Rt,document.baseURI).pathname}(at)}resetBaseElement(){W=null}getUserAgent(){return window.navigator.userAgent}getCookie(zt){return(0,M._b)(document.cookie,zt)}}let W=null,G=(()=>{class Rt{build(){return new XMLHttpRequest}static{this.\u0275fac=function(St){return new(St||Rt)}}static{this.\u0275prov=l.jDH({token:Rt,factory:Rt.\u0275fac})}}return Rt})();const k=new l.nKC("");let P=(()=>{class Rt{constructor(at,St){this._zone=St,this._eventNameToPlugin=new Map,at.forEach(fn=>{fn.manager=this}),this._plugins=at.slice().reverse()}addEventListener(at,St,fn){return this._findPluginFor(St).addEventListener(at,St,fn)}getZone(){return this._zone}_findPluginFor(at){let St=this._eventNameToPlugin.get(at);if(St)return St;if(St=this._plugins.find(vn=>vn.supports(at)),!St)throw new l.wOt(5101,!1);return this._eventNameToPlugin.set(at,St),St}static{this.\u0275fac=function(St){return new(St||Rt)(l.KVO(k),l.KVO(l.SKi))}}static{this.\u0275prov=l.jDH({token:Rt,factory:Rt.\u0275fac})}}return Rt})();class q{constructor(zt){this._doc=zt}}const ne="ng-app-id";let ce=(()=>{class Rt{constructor(at,St,fn,vn={}){this.doc=at,this.appId=St,this.nonce=fn,this.platformId=vn,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,M.Vy)(vn),this.resetHostNodes()}addStyles(at){for(const St of at)1===this.changeUsageCount(St,1)&&this.onStyleAdded(St)}removeStyles(at){for(const St of at)this.changeUsageCount(St,-1)<=0&&this.onStyleRemoved(St)}ngOnDestroy(){const at=this.styleNodesInDOM;at&&(at.forEach(St=>St.remove()),at.clear());for(const St of this.getAllStyles())this.onStyleRemoved(St);this.resetHostNodes()}addHost(at){this.hostNodes.add(at);for(const St of this.getAllStyles())this.addStyleToHost(at,St)}removeHost(at){this.hostNodes.delete(at)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(at){for(const St of this.hostNodes)this.addStyleToHost(St,at)}onStyleRemoved(at){const St=this.styleRef;St.get(at)?.elements?.forEach(fn=>fn.remove()),St.delete(at)}collectServerRenderedStyles(){const at=this.doc.head?.querySelectorAll(`style[${ne}="${this.appId}"]`);if(at?.length){const St=new Map;return at.forEach(fn=>{null!=fn.textContent&&St.set(fn.textContent,fn)}),St}return null}changeUsageCount(at,St){const fn=this.styleRef;if(fn.has(at)){const vn=fn.get(at);return vn.usage+=St,vn.usage}return fn.set(at,{usage:St,elements:[]}),St}getStyleElement(at,St){const fn=this.styleNodesInDOM,vn=fn?.get(St);if(vn?.parentNode===at)return fn.delete(St),vn.removeAttribute(ne),vn;{const kn=this.doc.createElement("style");return this.nonce&&kn.setAttribute("nonce",this.nonce),kn.textContent=St,this.platformIsServer&&kn.setAttribute(ne,this.appId),at.appendChild(kn),kn}}addStyleToHost(at,St){const fn=this.getStyleElement(at,St),vn=this.styleRef,kn=vn.get(St)?.elements;kn?kn.push(fn):vn.set(St,{elements:[fn],usage:1})}resetHostNodes(){const at=this.hostNodes;at.clear(),at.add(this.doc.head)}static{this.\u0275fac=function(St){return new(St||Rt)(l.KVO(M.qQ),l.KVO(l.sZ2),l.KVO(l.BIS,8),l.KVO(l.Agw))}}static{this.\u0275prov=l.jDH({token:Rt,factory:Rt.\u0275fac})}}return Rt})();const he={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ae=/%COMP%/g,Ge=new l.nKC("",{providedIn:"root",factory:()=>!0});function yt(Rt,zt){return zt.map(at=>at.replace(Ae,Rt))}let _t=(()=>{class Rt{constructor(at,St,fn,vn,kn,zi,oi,gi=null){this.eventManager=at,this.sharedStylesHost=St,this.appId=fn,this.removeStylesOnCompDestroy=vn,this.doc=kn,this.platformId=zi,this.ngZone=oi,this.nonce=gi,this.rendererByCompId=new Map,this.platformIsServer=(0,M.Vy)(zi),this.defaultRenderer=new ut(at,kn,oi,this.platformIsServer)}createRenderer(at,St){if(!at||!St)return this.defaultRenderer;this.platformIsServer&&St.encapsulation===l.gXe.ShadowDom&&(St={...St,encapsulation:l.gXe.Emulated});const fn=this.getOrCreateRenderer(at,St);return fn instanceof ve?fn.applyToHost(at):fn instanceof te&&fn.applyStyles(),fn}getOrCreateRenderer(at,St){const fn=this.rendererByCompId;let vn=fn.get(St.id);if(!vn){const kn=this.doc,zi=this.ngZone,oi=this.eventManager,gi=this.sharedStylesHost,Nr=this.removeStylesOnCompDestroy,$n=this.platformIsServer;switch(St.encapsulation){case l.gXe.Emulated:vn=new ve(oi,gi,St,this.appId,Nr,kn,zi,$n);break;case l.gXe.ShadowDom:return new K(oi,gi,at,St,kn,zi,this.nonce,$n);default:vn=new te(oi,gi,St,Nr,kn,zi,$n)}fn.set(St.id,vn)}return vn}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(St){return new(St||Rt)(l.KVO(P),l.KVO(ce),l.KVO(l.sZ2),l.KVO(Ge),l.KVO(M.qQ),l.KVO(l.Agw),l.KVO(l.SKi),l.KVO(l.BIS))}}static{this.\u0275prov=l.jDH({token:Rt,factory:Rt.\u0275fac})}}return Rt})();class ut{constructor(zt,at,St,fn){this.eventManager=zt,this.doc=at,this.ngZone=St,this.platformIsServer=fn,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(zt,at){return at?this.doc.createElementNS(he[at]||at,zt):this.doc.createElement(zt)}createComment(zt){return this.doc.createComment(zt)}createText(zt){return this.doc.createTextNode(zt)}appendChild(zt,at){(T(zt)?zt.content:zt).appendChild(at)}insertBefore(zt,at,St){zt&&(T(zt)?zt.content:zt).insertBefore(at,St)}removeChild(zt,at){zt&&zt.removeChild(at)}selectRootElement(zt,at){let St="string"==typeof zt?this.doc.querySelector(zt):zt;if(!St)throw new l.wOt(-5104,!1);return at||(St.textContent=""),St}parentNode(zt){return zt.parentNode}nextSibling(zt){return zt.nextSibling}setAttribute(zt,at,St,fn){if(fn){at=fn+":"+at;const vn=he[fn];vn?zt.setAttributeNS(vn,at,St):zt.setAttribute(at,St)}else zt.setAttribute(at,St)}removeAttribute(zt,at,St){if(St){const fn=he[St];fn?zt.removeAttributeNS(fn,at):zt.removeAttribute(`${St}:${at}`)}else zt.removeAttribute(at)}addClass(zt,at){zt.classList.add(at)}removeClass(zt,at){zt.classList.remove(at)}setStyle(zt,at,St,fn){fn&(l.czy.DashCase|l.czy.Important)?zt.style.setProperty(at,St,fn&l.czy.Important?"important":""):zt.style[at]=St}removeStyle(zt,at,St){St&l.czy.DashCase?zt.style.removeProperty(at):zt.style[at]=""}setProperty(zt,at,St){null!=zt&&(zt[at]=St)}setValue(zt,at){zt.nodeValue=at}listen(zt,at,St){if("string"==typeof zt&&!(zt=(0,M.QT)().getGlobalEventTarget(this.doc,zt)))throw new Error(`Unsupported event target ${zt} for event ${at}`);return this.eventManager.addEventListener(zt,at,this.decoratePreventDefault(St))}decoratePreventDefault(zt){return at=>{if("__ngUnwrap__"===at)return zt;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>zt(at)):zt(at))&&at.preventDefault()}}}function T(Rt){return"TEMPLATE"===Rt.tagName&&void 0!==Rt.content}class K extends ut{constructor(zt,at,St,fn,vn,kn,zi,oi){super(zt,vn,kn,oi),this.sharedStylesHost=at,this.hostEl=St,this.shadowRoot=St.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const gi=yt(fn.id,fn.styles);for(const Nr of gi){const $n=document.createElement("style");zi&&$n.setAttribute("nonce",zi),$n.textContent=Nr,this.shadowRoot.appendChild($n)}}nodeOrShadowRoot(zt){return zt===this.hostEl?this.shadowRoot:zt}appendChild(zt,at){return super.appendChild(this.nodeOrShadowRoot(zt),at)}insertBefore(zt,at,St){return super.insertBefore(this.nodeOrShadowRoot(zt),at,St)}removeChild(zt,at){return super.removeChild(this.nodeOrShadowRoot(zt),at)}parentNode(zt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(zt)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class te extends ut{constructor(zt,at,St,fn,vn,kn,zi,oi){super(zt,vn,kn,zi),this.sharedStylesHost=at,this.removeStylesOnCompDestroy=fn,this.styles=oi?yt(oi,St.styles):St.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class ve extends te{constructor(zt,at,St,fn,vn,kn,zi,oi){const gi=fn+"-"+St.id;super(zt,at,St,vn,kn,zi,oi,gi),this.contentAttr=function Oe(Rt){return"_ngcontent-%COMP%".replace(Ae,Rt)}(gi),this.hostAttr=function Ye(Rt){return"_nghost-%COMP%".replace(Ae,Rt)}(gi)}applyToHost(zt){this.applyStyles(),this.setAttribute(zt,this.hostAttr,"")}createElement(zt,at){const St=super.createElement(zt,at);return super.setAttribute(St,this.contentAttr,""),St}}let Ce=(()=>{class Rt extends q{constructor(at){super(at)}supports(at){return!0}addEventListener(at,St,fn){return at.addEventListener(St,fn,!1),()=>this.removeEventListener(at,St,fn)}removeEventListener(at,St,fn){return at.removeEventListener(St,fn)}static{this.\u0275fac=function(St){return new(St||Rt)(l.KVO(M.qQ))}}static{this.\u0275prov=l.jDH({token:Rt,factory:Rt.\u0275fac})}}return Rt})();const Be=["alt","control","meta","shift"],Ne={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z={alt:Rt=>Rt.altKey,control:Rt=>Rt.ctrlKey,meta:Rt=>Rt.metaKey,shift:Rt=>Rt.shiftKey};let Fe=(()=>{class Rt extends q{constructor(at){super(at)}supports(at){return null!=Rt.parseEventName(at)}addEventListener(at,St,fn){const vn=Rt.parseEventName(St),kn=Rt.eventCallback(vn.fullKey,fn,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,M.QT)().onAndCancel(at,vn.domEventName,kn))}static parseEventName(at){const St=at.toLowerCase().split("."),fn=St.shift();if(0===St.length||"keydown"!==fn&&"keyup"!==fn)return null;const vn=Rt._normalizeKey(St.pop());let kn="",zi=St.indexOf("code");if(zi>-1&&(St.splice(zi,1),kn="code."),Be.forEach(gi=>{const Nr=St.indexOf(gi);Nr>-1&&(St.splice(Nr,1),kn+=gi+".")}),kn+=vn,0!=St.length||0===vn.length)return null;const oi={};return oi.domEventName=fn,oi.fullKey=kn,oi}static matchEventFullKeyCode(at,St){let fn=Ne[at.key]||at.key,vn="";return St.indexOf("code.")>-1&&(fn=at.code,vn="code."),!(null==fn||!fn)&&(fn=fn.toLowerCase()," "===fn?fn="space":"."===fn&&(fn="dot"),Be.forEach(kn=>{kn!==fn&&(0,z[kn])(at)&&(vn+=kn+".")}),vn+=fn,vn===St)}static eventCallback(at,St,fn){return vn=>{Rt.matchEventFullKeyCode(vn,at)&&fn.runGuarded(()=>St(vn))}}static _normalizeKey(at){return"esc"===at?"escape":at}static{this.\u0275fac=function(St){return new(St||Rt)(l.KVO(M.qQ))}}static{this.\u0275prov=l.jDH({token:Rt,factory:Rt.\u0275fac})}}return Rt})();function Pt(Rt,zt){return(0,l.TL3)({rootComponent:Rt,...Vt(zt)})}function Vt(Rt){return{appProviders:[...gn,...Rt?.providers??[]],platformProviders:Xe}}const Xe=[{provide:l.Agw,useValue:M.AJ},{provide:l.PLl,useValue:function st(){ge.makeCurrent()},multi:!0},{provide:M.qQ,useFactory:function $e(){return(0,l.TL$)(document),document},deps:[]}],gn=[{provide:l.H8p,useValue:"root"},{provide:l.zcH,useFactory:function Ft(){return new l.zcH},deps:[]},{provide:k,useClass:Ce,multi:!0,deps:[M.qQ,l.SKi,l.Agw]},{provide:k,useClass:Fe,multi:!0,deps:[M.qQ]},_t,ce,P,{provide:l._9s,useExisting:_t},{provide:M.N0,useClass:G,deps:[]},[]];let Ot=(()=>{class Rt{constructor(at){this._doc=at}getTitle(){return this._doc.title}setTitle(at){this._doc.title=at||""}static{this.\u0275fac=function(St){return new(St||Rt)(l.KVO(M.qQ))}}static{this.\u0275prov=l.jDH({token:Rt,factory:Rt.\u0275fac,providedIn:"root"})}}return Rt})(),uo=(()=>{class Rt{static{this.\u0275fac=function(St){return new(St||Rt)}}static{this.\u0275prov=l.jDH({token:Rt,factory:function(St){let fn=null;return fn=St?new(St||Rt):l.KVO(Yn),fn},providedIn:"root"})}}return Rt})(),Yn=(()=>{class Rt extends uo{constructor(at){super(),this._doc=at}sanitize(at,St){if(null==St)return null;switch(at){case l.WPN.NONE:return St;case l.WPN.HTML:return(0,l.ZF7)(St,"HTML")?(0,l.rcV)(St):(0,l.h9k)(this._doc,String(St)).toString();case l.WPN.STYLE:return(0,l.ZF7)(St,"Style")?(0,l.rcV)(St):St;case l.WPN.SCRIPT:if((0,l.ZF7)(St,"Script"))return(0,l.rcV)(St);throw new l.wOt(5200,!1);case l.WPN.URL:return(0,l.ZF7)(St,"URL")?(0,l.rcV)(St):(0,l.$MX)(String(St));case l.WPN.RESOURCE_URL:if((0,l.ZF7)(St,"ResourceURL"))return(0,l.rcV)(St);throw new l.wOt(5201,!1);default:throw new l.wOt(5202,!1)}}bypassSecurityTrustHtml(at){return(0,l.Kcf)(at)}bypassSecurityTrustStyle(at){return(0,l.cWb)(at)}bypassSecurityTrustScript(at){return(0,l.UyX)(at)}bypassSecurityTrustUrl(at){return(0,l.osQ)(at)}bypassSecurityTrustResourceUrl(at){return(0,l.e5t)(at)}static{this.\u0275fac=function(St){return new(St||Rt)(l.KVO(M.qQ))}}static{this.\u0275prov=l.jDH({token:Rt,factory:Rt.\u0275fac,providedIn:"root"})}}return Rt})()},33:(Dt,qe,S)=>{"use strict";S.d(qe,{nX:()=>va,wF:()=>Ls,Ix:()=>Sn,Wk:()=>is,iI:()=>Wo,n3:()=>_a,lh:()=>sa,qQ:()=>bs});var l=S(467),M=S(4438),h=S(4402),ge=S(6648),W=S(7673),X=S(4412),oe=S(4572),H=S(9350),G=S(8793),k=S(9030),P=S(1203),q=S(8810),ne=S(983),ce=S(1985),he=S(8359),Ae=S(9974),we=S(4360);function de(){return(0,Ae.N)((D,j)=>{let R=null;D._refCount++;const Y=(0,we._)(j,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(R=null);const be=D._connection,Ve=R;R=null,be&&(!Ve||be===Ve)&&be.unsubscribe(),j.unsubscribe()});D.subscribe(Y),Y.closed||(R=D.connect())})}class Re extends ce.c{constructor(j,R){super(),this.source=j,this.subjectFactory=R,this._subject=null,this._refCount=0,this._connection=null,(0,Ae.S)(j)&&(this.lift=j.lift)}_subscribe(j){return this.getSubject().subscribe(j)}getSubject(){const j=this._subject;return(!j||j.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:j}=this;this._subject=this._connection=null,j?.unsubscribe()}connect(){let j=this._connection;if(!j){j=this._connection=new he.yU;const R=this.getSubject();j.add(this.source.subscribe((0,we._)(R,void 0,()=>{this._teardown(),R.complete()},Y=>{this._teardown(),R.error(Y)},()=>this._teardown()))),j.closed&&(this._connection=null,j=he.yU.EMPTY)}return j}refCount(){return de()(this)}}var ze=S(1413),Ge=S(177),Oe=S(6354),Ye=S(5558),yt=S(6697),_t=S(9172),ut=S(5964),ae=S(1397);function x(D){return(0,Ae.N)((j,R)=>{let Y=!1;j.subscribe((0,we._)(R,be=>{Y=!0,R.next(be)},()=>{Y||R.next(D),R.complete()}))})}function T(D=K){return(0,Ae.N)((j,R)=>{let Y=!1;j.subscribe((0,we._)(R,be=>{Y=!0,R.next(be)},()=>Y?R.complete():R.error(D())))})}function K(){return new H.G}var te=S(3669);function ve(D,j){const R=arguments.length>=2;return Y=>Y.pipe(D?(0,ut.p)((be,Ve)=>D(be,Ve,Y)):te.D,(0,yt.s)(1),R?x(j):T(()=>new H.G))}var Ce=S(274),Be=S(8141),Ne=S(9437);function Pt(D){return D<=0?()=>ne.w:(0,Ae.N)((j,R)=>{let Y=[];j.subscribe((0,we._)(R,be=>{Y.push(be),D<Y.length&&Y.shift()},()=>{for(const be of Y)R.next(be);R.complete()},void 0,()=>{Y=null}))})}var Vt=S(3703),vt=S(980),st=S(6977),Ft=S(6365),$e=S(345);const Xe="primary",kt=Symbol("RouteTitle");class cn{constructor(j){this.params=j||{}}has(j){return Object.prototype.hasOwnProperty.call(this.params,j)}get(j){if(this.has(j)){const R=this.params[j];return Array.isArray(R)?R[0]:R}return null}getAll(j){if(this.has(j)){const R=this.params[j];return Array.isArray(R)?R:[R]}return[]}get keys(){return Object.keys(this.params)}}function rn(D){return new cn(D)}function gn(D,j,R){const Y=R.path.split("/");if(Y.length>D.length||"full"===R.pathMatch&&(j.hasChildren()||Y.length<D.length))return null;const be={};for(let Ve=0;Ve<Y.length;Ve++){const ht=Y[Ve],Zt=D[Ve];if(ht.startsWith(":"))be[ht.substring(1)]=Zt;else if(ht!==Zt.path)return null}return{consumed:D.slice(0,Y.length),posParams:be}}function hn(D,j){const R=D?ct(D):void 0,Y=j?ct(j):void 0;if(!R||!Y||R.length!=Y.length)return!1;let be;for(let Ve=0;Ve<R.length;Ve++)if(be=R[Ve],!Ot(D[be],j[be]))return!1;return!0}function ct(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}function Ot(D,j){if(Array.isArray(D)&&Array.isArray(j)){if(D.length!==j.length)return!1;const R=[...D].sort(),Y=[...j].sort();return R.every((be,Ve)=>Y[Ve]===be)}return D===j}function It(D){return D.length>0?D[D.length-1]:null}function an(D){return(0,h.A)(D)?D:(0,M.jNT)(D)?(0,ge.H)(Promise.resolve(D)):(0,W.of)(D)}const Fn={exact:function Hn(D,j,R){if(!Yn(D.segments,j.segments)||!Qi(D.segments,j.segments,R)||D.numberOfChildren!==j.numberOfChildren)return!1;for(const Y in j.children)if(!D.children[Y]||!Hn(D.children[Y],j.children[Y],R))return!1;return!0},subset:Un},Xn={exact:function Hr(D,j){return hn(D,j)},subset:function Dn(D,j){return Object.keys(j).length<=Object.keys(D).length&&Object.keys(j).every(R=>Ot(D[R],j[R]))},ignored:()=>!0};function Zn(D,j,R){return Fn[R.paths](D.root,j.root,R.matrixParams)&&Xn[R.queryParams](D.queryParams,j.queryParams)&&!("exact"===R.fragment&&D.fragment!==j.fragment)}function Un(D,j,R){return Pi(D,j,j.segments,R)}function Pi(D,j,R,Y){if(D.segments.length>R.length){const be=D.segments.slice(0,R.length);return!(!Yn(be,R)||j.hasChildren()||!Qi(be,R,Y))}if(D.segments.length===R.length){if(!Yn(D.segments,R)||!Qi(D.segments,R,Y))return!1;for(const be in j.children)if(!D.children[be]||!Un(D.children[be],j.children[be],Y))return!1;return!0}{const be=R.slice(0,D.segments.length),Ve=R.slice(D.segments.length);return!!(Yn(D.segments,be)&&Qi(D.segments,be,Y)&&D.children[Xe])&&Pi(D.children[Xe],j,Ve,Y)}}function Qi(D,j,R){return j.every((Y,be)=>Xn[R](D[be].parameters,Y.parameters))}class Rr{constructor(j=new ii([],{}),R={},Y=null){this.root=j,this.queryParams=R,this.fragment=Y}get queryParamMap(){return this._queryParamMap??=rn(this.queryParams),this._queryParamMap}toString(){return Ir.serialize(this)}}class ii{constructor(j,R){this.segments=j,this.children=R,this.parent=null,Object.values(R).forEach(Y=>Y.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kr(this)}}class yi{constructor(j,R){this.path=j,this.parameters=R}get parameterMap(){return this._parameterMap??=rn(this.parameters),this._parameterMap}toString(){return St(this)}}function Yn(D,j){return D.length===j.length&&D.every((R,Y)=>R.path===j[Y].path)}let mr=(()=>{class D{static{this.\u0275fac=function(Y){return new(Y||D)}}static{this.\u0275prov=M.jDH({token:D,factory:()=>new Si,providedIn:"root"})}}return D})();class Si{parse(j){const R=new Qr(j);return new Rr(R.parseRootSegment(),R.parseQueryParams(),R.parseFragment())}serialize(j){const R=`/${gr(j.root,!0)}`,Y=function vn(D){const j=Object.entries(D).map(([R,Y])=>Array.isArray(Y)?Y.map(be=>`${ls(R)}=${ls(be)}`).join("&"):`${ls(R)}=${ls(Y)}`).filter(R=>R);return j.length?`?${j.join("&")}`:""}(j.queryParams);return`${R}${Y}${"string"==typeof j.fragment?`#${function ar(D){return encodeURI(D)}(j.fragment)}`:""}`}}const Ir=new Si;function Kr(D){return D.segments.map(j=>St(j)).join("/")}function gr(D,j){if(!D.hasChildren())return Kr(D);if(j){const R=D.children[Xe]?gr(D.children[Xe],!1):"",Y=[];return Object.entries(D.children).forEach(([be,Ve])=>{be!==Xe&&Y.push(`${be}:${gr(Ve,!1)}`)}),Y.length>0?`${R}(${Y.join("//")})`:R}{const R=function cr(D,j){let R=[];return Object.entries(D.children).forEach(([Y,be])=>{Y===Xe&&(R=R.concat(j(be,Y)))}),Object.entries(D.children).forEach(([Y,be])=>{Y!==Xe&&(R=R.concat(j(be,Y)))}),R}(D,(Y,be)=>be===Xe?[gr(D.children[Xe],!1)]:[`${be}:${gr(Y,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[Xe]?`${Kr(D)}/${R[0]}`:`${Kr(D)}/(${R.join("//")})`}}function Zr(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ls(D){return Zr(D).replace(/%3B/gi,";")}function Rt(D){return Zr(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zt(D){return decodeURIComponent(D)}function at(D){return zt(D.replace(/\+/g,"%20"))}function St(D){return`${Rt(D.path)}${function fn(D){return Object.entries(D).map(([j,R])=>`;${Rt(j)}=${Rt(R)}`).join("")}(D.parameters)}`}const kn=/^[^\/()?;#]+/;function zi(D){const j=D.match(kn);return j?j[0]:""}const oi=/^[^\/()?;=#]+/,Nr=/^[^=?&#]+/,hr=/^[^&#]+/;class Qr{constructor(j){this.url=j,this.remaining=j}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ii([],{}):new ii([],this.parseChildren())}parseQueryParams(){const j={};if(this.consumeOptional("?"))do{this.parseQueryParam(j)}while(this.consumeOptional("&"));return j}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const j=[];for(this.peekStartsWith("(")||j.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),j.push(this.parseSegment());let R={};this.peekStartsWith("/(")&&(this.capture("/"),R=this.parseParens(!0));let Y={};return this.peekStartsWith("(")&&(Y=this.parseParens(!1)),(j.length>0||Object.keys(R).length>0)&&(Y[Xe]=new ii(j,R)),Y}parseSegment(){const j=zi(this.remaining);if(""===j&&this.peekStartsWith(";"))throw new M.wOt(4009,!1);return this.capture(j),new yi(zt(j),this.parseMatrixParams())}parseMatrixParams(){const j={};for(;this.consumeOptional(";");)this.parseParam(j);return j}parseParam(j){const R=function gi(D){const j=D.match(oi);return j?j[0]:""}(this.remaining);if(!R)return;this.capture(R);let Y="";if(this.consumeOptional("=")){const be=zi(this.remaining);be&&(Y=be,this.capture(Y))}j[zt(R)]=zt(Y)}parseQueryParam(j){const R=function $n(D){const j=D.match(Nr);return j?j[0]:""}(this.remaining);if(!R)return;this.capture(R);let Y="";if(this.consumeOptional("=")){const ht=function cs(D){const j=D.match(hr);return j?j[0]:""}(this.remaining);ht&&(Y=ht,this.capture(Y))}const be=at(R),Ve=at(Y);if(j.hasOwnProperty(be)){let ht=j[be];Array.isArray(ht)||(ht=[ht],j[be]=ht),ht.push(Ve)}else j[be]=Ve}parseParens(j){const R={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Y=zi(this.remaining),be=this.remaining[Y.length];if("/"!==be&&")"!==be&&";"!==be)throw new M.wOt(4010,!1);let Ve;Y.indexOf(":")>-1?(Ve=Y.slice(0,Y.indexOf(":")),this.capture(Ve),this.capture(":")):j&&(Ve=Xe);const ht=this.parseChildren();R[Ve]=1===Object.keys(ht).length?ht[Xe]:new ii([],ht),this.consumeOptional("//")}return R}peekStartsWith(j){return this.remaining.startsWith(j)}consumeOptional(j){return!!this.peekStartsWith(j)&&(this.remaining=this.remaining.substring(j.length),!0)}capture(j){if(!this.consumeOptional(j))throw new M.wOt(4011,!1)}}function zn(D){return D.segments.length>0?new ii([],{[Xe]:D}):D}function Kn(D){const j={};for(const[Y,be]of Object.entries(D.children)){const Ve=Kn(be);if(Y===Xe&&0===Ve.segments.length&&Ve.hasChildren())for(const[ht,Zt]of Object.entries(Ve.children))j[ht]=Zt;else(Ve.segments.length>0||Ve.hasChildren())&&(j[Y]=Ve)}return function xi(D){if(1===D.numberOfChildren&&D.children[Xe]){const j=D.children[Xe];return new ii(D.segments.concat(j.segments),j.children)}return D}(new ii(D.segments,j))}function Sr(D){return D instanceof Rr}function Fs(D){let j;const be=zn(function R(Ve){const ht={};for(const Qt of Ve.children){const Pn=R(Qt);ht[Qt.outlet]=Pn}const Zt=new ii(Ve.url,ht);return Ve===D&&(j=Zt),Zt}(D.root));return j??be}function hs(D,j,R,Y){let be=D;for(;be.parent;)be=be.parent;if(0===j.length)return Mo(be,be,be,R,Y);const Ve=function vs(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new Us(!0,0,D);let j=0,R=!1;const Y=D.reduce((be,Ve,ht)=>{if("object"==typeof Ve&&null!=Ve){if(Ve.outlets){const Zt={};return Object.entries(Ve.outlets).forEach(([Qt,Pn])=>{Zt[Qt]="string"==typeof Pn?Pn.split("/"):Pn}),[...be,{outlets:Zt}]}if(Ve.segmentPath)return[...be,Ve.segmentPath]}return"string"!=typeof Ve?[...be,Ve]:0===ht?(Ve.split("/").forEach((Zt,Qt)=>{0==Qt&&"."===Zt||(0==Qt&&""===Zt?R=!0:".."===Zt?j++:""!=Zt&&be.push(Zt))}),be):[...be,Ve]},[]);return new Us(R,j,Y)}(j);if(Ve.toRoot())return Mo(be,be,new ii([],{}),R,Y);const ht=function Qe(D,j,R){if(D.isAbsolute)return new ho(j,!0,0);if(!R)return new ho(j,!1,NaN);if(null===R.parent)return new ho(R,!0,0);const Y=ir(D.commands[0])?0:1;return function L(D,j,R){let Y=D,be=j,Ve=R;for(;Ve>be;){if(Ve-=be,Y=Y.parent,!Y)throw new M.wOt(4005,!1);be=Y.segments.length}return new ho(Y,!1,be-Ve)}(R,R.segments.length-1+Y,D.numberOfDoubleDots)}(Ve,be,D),Zt=ht.processChildren?Ze(ht.segmentGroup,ht.index,Ve.commands):ue(ht.segmentGroup,ht.index,Ve.commands);return Mo(be,ht.segmentGroup,Zt,R,Y)}function ir(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function Ks(D){return"object"==typeof D&&null!=D&&D.outlets}function Mo(D,j,R,Y,be){let ht,Ve={};Y&&Object.entries(Y).forEach(([Qt,Pn])=>{Ve[Qt]=Array.isArray(Pn)?Pn.map(Ar=>`${Ar}`):`${Pn}`}),ht=D===j?R:As(D,j,R);const Zt=zn(Kn(ht));return new Rr(Zt,Ve,be)}function As(D,j,R){const Y={};return Object.entries(D.children).forEach(([be,Ve])=>{Y[be]=Ve===j?R:As(Ve,j,R)}),new ii(D.segments,Y)}class Us{constructor(j,R,Y){if(this.isAbsolute=j,this.numberOfDoubleDots=R,this.commands=Y,j&&Y.length>0&&ir(Y[0]))throw new M.wOt(4003,!1);const be=Y.find(Ks);if(be&&be!==It(Y))throw new M.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ho{constructor(j,R,Y){this.segmentGroup=j,this.processChildren=R,this.index=Y}}function ue(D,j,R){if(D??=new ii([],{}),0===D.segments.length&&D.hasChildren())return Ze(D,j,R);const Y=function pt(D,j,R){let Y=0,be=j;const Ve={match:!1,pathIndex:0,commandIndex:0};for(;be<D.segments.length;){if(Y>=R.length)return Ve;const ht=D.segments[be],Zt=R[Y];if(Ks(Zt))break;const Qt=`${Zt}`,Pn=Y<R.length-1?R[Y+1]:null;if(be>0&&void 0===Qt)break;if(Qt&&Pn&&"object"==typeof Pn&&void 0===Pn.outlets){if(!ai(Qt,Pn,ht))return Ve;Y+=2}else{if(!ai(Qt,{},ht))return Ve;Y++}be++}return{match:!0,pathIndex:be,commandIndex:Y}}(D,j,R),be=R.slice(Y.commandIndex);if(Y.match&&Y.pathIndex<D.segments.length){const Ve=new ii(D.segments.slice(0,Y.pathIndex),{});return Ve.children[Xe]=new ii(D.segments.slice(Y.pathIndex),D.children),Ze(Ve,0,be)}return Y.match&&0===be.length?new ii(D.segments,{}):Y.match&&!D.hasChildren()?en(D,j,R):Y.match?Ze(D,0,be):en(D,j,R)}function Ze(D,j,R){if(0===R.length)return new ii(D.segments,{});{const Y=function $(D){return Ks(D[0])?D[0].outlets:{[Xe]:D}}(R),be={};if(Object.keys(Y).some(Ve=>Ve!==Xe)&&D.children[Xe]&&1===D.numberOfChildren&&0===D.children[Xe].segments.length){const Ve=Ze(D.children[Xe],j,R);return new ii(D.segments,Ve.children)}return Object.entries(Y).forEach(([Ve,ht])=>{"string"==typeof ht&&(ht=[ht]),null!==ht&&(be[Ve]=ue(D.children[Ve],j,ht))}),Object.entries(D.children).forEach(([Ve,ht])=>{void 0===Y[Ve]&&(be[Ve]=ht)}),new ii(D.segments,be)}}function en(D,j,R){const Y=D.segments.slice(0,j);let be=0;for(;be<R.length;){const Ve=R[be];if(Ks(Ve)){const Qt=pn(Ve.outlets);return new ii(Y,Qt)}if(0===be&&ir(R[0])){Y.push(new yi(D.segments[j].path,Vn(R[0]))),be++;continue}const ht=Ks(Ve)?Ve.outlets[Xe]:`${Ve}`,Zt=be<R.length-1?R[be+1]:null;ht&&Zt&&ir(Zt)?(Y.push(new yi(ht,Vn(Zt))),be+=2):(Y.push(new yi(ht,{})),be++)}return new ii(Y,{})}function pn(D){const j={};return Object.entries(D).forEach(([R,Y])=>{"string"==typeof Y&&(Y=[Y]),null!==Y&&(j[R]=en(new ii([],{}),0,Y))}),j}function Vn(D){const j={};return Object.entries(D).forEach(([R,Y])=>j[R]=`${Y}`),j}function ai(D,j,R){return D==R.path&&hn(j,R.parameters)}const ur="imperative";var Ei=function(D){return D[D.NavigationStart=0]="NavigationStart",D[D.NavigationEnd=1]="NavigationEnd",D[D.NavigationCancel=2]="NavigationCancel",D[D.NavigationError=3]="NavigationError",D[D.RoutesRecognized=4]="RoutesRecognized",D[D.ResolveStart=5]="ResolveStart",D[D.ResolveEnd=6]="ResolveEnd",D[D.GuardsCheckStart=7]="GuardsCheckStart",D[D.GuardsCheckEnd=8]="GuardsCheckEnd",D[D.RouteConfigLoadStart=9]="RouteConfigLoadStart",D[D.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",D[D.ChildActivationStart=11]="ChildActivationStart",D[D.ChildActivationEnd=12]="ChildActivationEnd",D[D.ActivationStart=13]="ActivationStart",D[D.ActivationEnd=14]="ActivationEnd",D[D.Scroll=15]="Scroll",D[D.NavigationSkipped=16]="NavigationSkipped",D}(Ei||{});class Yi{constructor(j,R){this.id=j,this.url=R}}class ns extends Yi{constructor(j,R,Y="imperative",be=null){super(j,R),this.type=Ei.NavigationStart,this.navigationTrigger=Y,this.restoredState=be}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ls extends Yi{constructor(j,R,Y){super(j,R),this.urlAfterRedirects=Y,this.type=Ei.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var fs=function(D){return D[D.Redirect=0]="Redirect",D[D.SupersededByNewNavigation=1]="SupersededByNewNavigation",D[D.NoDataFromResolver=2]="NoDataFromResolver",D[D.GuardRejected=3]="GuardRejected",D}(fs||{}),Pr=function(D){return D[D.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",D[D.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",D}(Pr||{});class Tr extends Yi{constructor(j,R,Y,be){super(j,R),this.reason=Y,this.code=be,this.type=Ei.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Is extends Yi{constructor(j,R,Y,be){super(j,R),this.reason=Y,this.code=be,this.type=Ei.NavigationSkipped}}class eo extends Yi{constructor(j,R,Y,be){super(j,R),this.error=Y,this.target=be,this.type=Ei.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ws extends Yi{constructor(j,R,Y,be){super(j,R),this.urlAfterRedirects=Y,this.state=be,this.type=Ei.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ro extends Yi{constructor(j,R,Y,be){super(j,R),this.urlAfterRedirects=Y,this.state=be,this.type=Ei.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vo extends Yi{constructor(j,R,Y,be,Ve){super(j,R),this.urlAfterRedirects=Y,this.state=be,this.shouldActivate=Ve,this.type=Ei.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ea extends Yi{constructor(j,R,Y,be){super(j,R),this.urlAfterRedirects=Y,this.state=be,this.type=Ei.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gi extends Yi{constructor(j,R,Y,be){super(j,R),this.urlAfterRedirects=Y,this.state=be,this.type=Ei.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vr{constructor(j){this.route=j,this.type=Ei.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Cl{constructor(j){this.route=j,this.type=Ei.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class To{constructor(j){this.snapshot=j,this.type=Ei.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class so{constructor(j){this.snapshot=j,this.type=Ei.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zl{constructor(j){this.snapshot=j,this.type=Ei.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ss{constructor(j){this.snapshot=j,this.type=Ei.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ja{constructor(j,R,Y){this.routerEvent=j,this.position=R,this.anchor=Y,this.type=Ei.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _r{}class ka{constructor(j){this.url=j}}class yo{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Qo,this.attachRef=null}}let Qo=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(R,Y){const be=this.getOrCreateContext(R);be.outlet=Y,this.contexts.set(R,be)}onChildOutletDestroyed(R){const Y=this.getContext(R);Y&&(Y.outlet=null,Y.attachRef=null)}onOutletDeactivated(){const R=this.contexts;return this.contexts=new Map,R}onOutletReAttached(R){this.contexts=R}getOrCreateContext(R){let Y=this.getContext(R);return Y||(Y=new yo,this.contexts.set(R,Y)),Y}getContext(R){return this.contexts.get(R)||null}static{this.\u0275fac=function(Y){return new(Y||D)}}static{this.\u0275prov=M.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();class Ba{constructor(j){this._root=j}get root(){return this._root.value}parent(j){const R=this.pathFromRoot(j);return R.length>1?R[R.length-2]:null}children(j){const R=ga(j,this._root);return R?R.children.map(Y=>Y.value):[]}firstChild(j){const R=ga(j,this._root);return R&&R.children.length>0?R.children[0].value:null}siblings(j){const R=ca(j,this._root);return R.length<2?[]:R[R.length-2].children.map(be=>be.value).filter(be=>be!==j)}pathFromRoot(j){return ca(j,this._root).map(R=>R.value)}}function ga(D,j){if(D===j.value)return j;for(const R of j.children){const Y=ga(D,R);if(Y)return Y}return null}function ca(D,j){if(D===j.value)return[j];for(const R of j.children){const Y=ca(D,R);if(Y.length)return Y.unshift(j),Y}return[]}class oo{constructor(j,R){this.value=j,this.children=R}toString(){return`TreeNode(${this.value})`}}function Ro(D){const j={};return D&&D.children.forEach(R=>j[R.value.outlet]=R),j}class Ta extends Ba{constructor(j,R){super(j),this.snapshot=R,zl(this,j)}toString(){return this.snapshot.toString()}}function Ua(D){const j=function ll(D){const Ve=new Va([],{},{},"",{},Xe,D,null,{});return new ta("",new oo(Ve,[]))}(D),R=new X.t([new yi("",{})]),Y=new X.t({}),be=new X.t({}),Ve=new X.t({}),ht=new X.t(""),Zt=new va(R,Y,Ve,ht,be,Xe,D,j.root);return Zt.snapshot=j.root,new Ta(new oo(Zt,[]),j)}class va{constructor(j,R,Y,be,Ve,ht,Zt,Qt){this.urlSubject=j,this.paramsSubject=R,this.queryParamsSubject=Y,this.fragmentSubject=be,this.dataSubject=Ve,this.outlet=ht,this.component=Zt,this._futureSnapshot=Qt,this.title=this.dataSubject?.pipe((0,Oe.T)(Pn=>Pn[kt]))??(0,W.of)(void 0),this.url=j,this.params=R,this.queryParams=Y,this.fragment=be,this.data=Ve}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Oe.T)(j=>rn(j))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Oe.T)(j=>rn(j))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function No(D,j,R="emptyOnly"){let Y;const{routeConfig:be}=D;return Y=null===j||"always"!==R&&""!==be?.path&&(j.component||j.routeConfig?.loadComponent)?{params:{...D.params},data:{...D.data},resolve:{...D.data,...D._resolvedData??{}}}:{params:{...j.params,...D.params},data:{...j.data,...D.data},resolve:{...D.data,...j.data,...be?.data,...D._resolvedData}},be&&Xa(be)&&(Y.resolve[kt]=be.title),Y}class Va{get title(){return this.data?.[kt]}constructor(j,R,Y,be,Ve,ht,Zt,Qt,Pn){this.url=j,this.params=R,this.queryParams=Y,this.fragment=be,this.data=Ve,this.outlet=ht,this.component=Zt,this.routeConfig=Qt,this._resolve=Pn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=rn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=rn(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Y=>Y.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ta extends Ba{constructor(j,R){super(R),this.url=j,zl(this,R)}toString(){return ao(this._root)}}function zl(D,j){j.value._routerState=D,j.children.forEach(R=>zl(D,R))}function ao(D){const j=D.children.length>0?` { ${D.children.map(ao).join(", ")} } `:"";return`${D.value}${j}`}function Yo(D){if(D.snapshot){const j=D.snapshot,R=D._futureSnapshot;D.snapshot=R,hn(j.queryParams,R.queryParams)||D.queryParamsSubject.next(R.queryParams),j.fragment!==R.fragment&&D.fragmentSubject.next(R.fragment),hn(j.params,R.params)||D.paramsSubject.next(R.params),function Xt(D,j){if(D.length!==j.length)return!1;for(let R=0;R<D.length;++R)if(!hn(D[R],j[R]))return!1;return!0}(j.url,R.url)||D.urlSubject.next(R.url),hn(j.data,R.data)||D.dataSubject.next(R.data)}else D.snapshot=D._futureSnapshot,D.dataSubject.next(D._futureSnapshot.data)}function $i(D,j){const R=hn(D.params,j.params)&&function uo(D,j){return Yn(D,j)&&D.every((R,Y)=>hn(R.parameters,j[Y].parameters))}(D.url,j.url);return R&&!(!D.parent!=!j.parent)&&(!D.parent||$i(D.parent,j.parent))}function Xa(D){return"string"==typeof D.title||null===D.title}let _a=(()=>{class D{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xe,this.activateEvents=new M.bkB,this.deactivateEvents=new M.bkB,this.attachEvents=new M.bkB,this.detachEvents=new M.bkB,this.parentContexts=(0,M.WQX)(Qo),this.location=(0,M.WQX)(M.c1b),this.changeDetector=(0,M.WQX)(M.gRc),this.environmentInjector=(0,M.WQX)(M.uvJ),this.inputBinder=(0,M.WQX)(na,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(R){if(R.name){const{firstChange:Y,previousValue:be}=R.name;if(Y)return;this.isTrackedInParentContexts(be)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(be)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(R){return this.parentContexts.getContext(R)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const R=this.parentContexts.getContext(this.name);R?.route&&(R.attachRef?this.attach(R.attachRef,R.route):this.activateWith(R.route,R.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M.wOt(4012,!1);this.location.detach();const R=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(R.instance),R}attach(R,Y){this.activated=R,this._activatedRoute=Y,this.location.insert(R.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(R.instance)}deactivate(){if(this.activated){const R=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(R)}}activateWith(R,Y){if(this.isActivated)throw new M.wOt(4013,!1);this._activatedRoute=R;const be=this.location,ht=R.snapshot.component,Zt=this.parentContexts.getOrCreateContext(this.name).children,Qt=new ua(R,Zt,be.injector);this.activated=be.createComponent(ht,{index:be.length,injector:Qt,environmentInjector:Y??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(Y){return new(Y||D)}}static{this.\u0275dir=M.FsC({type:D,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[M.OA$]})}}return D})();class ua{__ngOutletInjector(j){return new ua(this.route,this.childContexts,j)}constructor(j,R,Y){this.route=j,this.childContexts=R,this.parent=Y}get(j,R){return j===va?this.route:j===Qo?this.childContexts:this.parent.get(j,R)}}const na=new M.nKC("");let Ha=(()=>{class D{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(R){this.unsubscribeFromRouteData(R),this.subscribeToRouteData(R)}unsubscribeFromRouteData(R){this.outletDataSubscriptions.get(R)?.unsubscribe(),this.outletDataSubscriptions.delete(R)}subscribeToRouteData(R){const{activatedRoute:Y}=R,be=(0,oe.z)([Y.queryParams,Y.params,Y.data]).pipe((0,Ye.n)(([Ve,ht,Zt],Qt)=>(Zt={...Ve,...ht,...Zt},0===Qt?(0,W.of)(Zt):Promise.resolve(Zt)))).subscribe(Ve=>{if(!R.isActivated||!R.activatedComponentRef||R.activatedRoute!==Y||null===Y.component)return void this.unsubscribeFromRouteData(R);const ht=(0,M.HJs)(Y.component);if(ht)for(const{templateName:Zt}of ht.inputs)R.activatedComponentRef.setInput(Zt,Ve[Zt]);else this.unsubscribeFromRouteData(R)});this.outletDataSubscriptions.set(R,be)}static{this.\u0275fac=function(Y){return new(Y||D)}}static{this.\u0275prov=M.jDH({token:D,factory:D.\u0275fac})}}return D})();function wl(D,j,R){if(R&&D.shouldReuseRoute(j.value,R.value.snapshot)){const Y=R.value;Y._futureSnapshot=j.value;const be=function ya(D,j,R){return j.children.map(Y=>{for(const be of R.children)if(D.shouldReuseRoute(Y.value,be.value.snapshot))return wl(D,Y,be);return wl(D,Y)})}(D,j,R);return new oo(Y,be)}{if(D.shouldAttach(j.value)){const Ve=D.retrieve(j.value);if(null!==Ve){const ht=Ve.route;return ht.value._futureSnapshot=j.value,ht.children=j.children.map(Zt=>wl(D,Zt)),ht}}const Y=function Tc(D){return new va(new X.t(D.url),new X.t(D.params),new X.t(D.queryParams),new X.t(D.fragment),new X.t(D.data),D.outlet,D.component,D)}(j.value),be=j.children.map(Ve=>wl(D,Ve));return new oo(Y,be)}}const Ka="ngNavigationCancelingError";function Dc(D,j){const{redirectTo:R,navigationBehaviorOptions:Y}=Sr(j)?{redirectTo:j,navigationBehaviorOptions:void 0}:j,be=Qs(!1,fs.Redirect);return be.url=R,be.navigationBehaviorOptions=Y,be}function Qs(D,j){const R=new Error(`NavigationCancelingError: ${D||""}`);return R[Ka]=!0,R.cancellationCode=j,R}function ks(D){return!!D&&D[Ka]}let da=(()=>{class D{static{this.\u0275fac=function(Y){return new(Y||D)}}static{this.\u0275cmp=M.VBU({type:D,selectors:[["ng-component"]],standalone:!0,features:[M.aNF],decls:1,vars:0,template:function(Y,be){1&Y&&M.nrm(0,"router-outlet")},dependencies:[_a],encapsulation:2})}}return D})();function ia(D){const j=D.children&&D.children.map(ia),R=j?{...D,children:j}:{...D};return!R.component&&!R.loadComponent&&(j||R.loadChildren)&&R.outlet&&R.outlet!==Xe&&(R.component=da),R}function fo(D){return D.outlet||Xe}function zo(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let j=D.parent;j;j=j.parent){const R=j.routeConfig;if(R?._loadedInjector)return R._loadedInjector;if(R?._injector)return R._injector}return null}class ec{constructor(j,R,Y,be,Ve){this.routeReuseStrategy=j,this.futureState=R,this.currState=Y,this.forwardEvent=be,this.inputBindingEnabled=Ve}activate(j){const R=this.futureState._root,Y=this.currState?this.currState._root:null;this.deactivateChildRoutes(R,Y,j),Yo(this.futureState.root),this.activateChildRoutes(R,Y,j)}deactivateChildRoutes(j,R,Y){const be=Ro(R);j.children.forEach(Ve=>{const ht=Ve.value.outlet;this.deactivateRoutes(Ve,be[ht],Y),delete be[ht]}),Object.values(be).forEach(Ve=>{this.deactivateRouteAndItsChildren(Ve,Y)})}deactivateRoutes(j,R,Y){const be=j.value,Ve=R?R.value:null;if(be===Ve)if(be.component){const ht=Y.getContext(be.outlet);ht&&this.deactivateChildRoutes(j,R,ht.children)}else this.deactivateChildRoutes(j,R,Y);else Ve&&this.deactivateRouteAndItsChildren(R,Y)}deactivateRouteAndItsChildren(j,R){j.value.component&&this.routeReuseStrategy.shouldDetach(j.value.snapshot)?this.detachAndStoreRouteSubtree(j,R):this.deactivateRouteAndOutlet(j,R)}detachAndStoreRouteSubtree(j,R){const Y=R.getContext(j.value.outlet),be=Y&&j.value.component?Y.children:R,Ve=Ro(j);for(const ht of Object.values(Ve))this.deactivateRouteAndItsChildren(ht,be);if(Y&&Y.outlet){const ht=Y.outlet.detach(),Zt=Y.children.onOutletDeactivated();this.routeReuseStrategy.store(j.value.snapshot,{componentRef:ht,route:j,contexts:Zt})}}deactivateRouteAndOutlet(j,R){const Y=R.getContext(j.value.outlet),be=Y&&j.value.component?Y.children:R,Ve=Ro(j);for(const ht of Object.values(Ve))this.deactivateRouteAndItsChildren(ht,be);Y&&(Y.outlet&&(Y.outlet.deactivate(),Y.children.onOutletDeactivated()),Y.attachRef=null,Y.route=null)}activateChildRoutes(j,R,Y){const be=Ro(R);j.children.forEach(Ve=>{this.activateRoutes(Ve,be[Ve.value.outlet],Y),this.forwardEvent(new Ss(Ve.value.snapshot))}),j.children.length&&this.forwardEvent(new so(j.value.snapshot))}activateRoutes(j,R,Y){const be=j.value,Ve=R?R.value:null;if(Yo(be),be===Ve)if(be.component){const ht=Y.getOrCreateContext(be.outlet);this.activateChildRoutes(j,R,ht.children)}else this.activateChildRoutes(j,R,Y);else if(be.component){const ht=Y.getOrCreateContext(be.outlet);if(this.routeReuseStrategy.shouldAttach(be.snapshot)){const Zt=this.routeReuseStrategy.retrieve(be.snapshot);this.routeReuseStrategy.store(be.snapshot,null),ht.children.onOutletReAttached(Zt.contexts),ht.attachRef=Zt.componentRef,ht.route=Zt.route.value,ht.outlet&&ht.outlet.attach(Zt.componentRef,Zt.route.value),Yo(Zt.route.value),this.activateChildRoutes(j,null,ht.children)}else{const Zt=zo(be.snapshot);ht.attachRef=null,ht.route=be,ht.injector=Zt,ht.outlet&&ht.outlet.activateWith(be,ht.injector),this.activateChildRoutes(j,null,ht.children)}}else this.activateChildRoutes(j,null,Y)}}class Da{constructor(j){this.path=j,this.route=this.path[this.path.length-1]}}class Ys{constructor(j,R){this.component=j,this.route=R}}function hl(D,j,R){const Y=D._root;return za(Y,j?j._root:null,R,[Y.value])}function Bs(D,j){const R=Symbol(),Y=j.get(D,R);return Y===R?"function"!=typeof D||(0,M.LfX)(D)?j.get(D):D:Y}function za(D,j,R,Y,be={canDeactivateChecks:[],canActivateChecks:[]}){const Ve=Ro(j);return D.children.forEach(ht=>{(function Dl(D,j,R,Y,be={canDeactivateChecks:[],canActivateChecks:[]}){const Ve=D.value,ht=j?j.value:null,Zt=R?R.getContext(D.value.outlet):null;if(ht&&Ve.routeConfig===ht.routeConfig){const Qt=function xe(D,j,R){if("function"==typeof R)return R(D,j);switch(R){case"pathParamsChange":return!Yn(D.url,j.url);case"pathParamsOrQueryParamsChange":return!Yn(D.url,j.url)||!hn(D.queryParams,j.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$i(D,j)||!hn(D.queryParams,j.queryParams);default:return!$i(D,j)}}(ht,Ve,Ve.routeConfig.runGuardsAndResolvers);Qt?be.canActivateChecks.push(new Da(Y)):(Ve.data=ht.data,Ve._resolvedData=ht._resolvedData),za(D,j,Ve.component?Zt?Zt.children:null:R,Y,be),Qt&&Zt&&Zt.outlet&&Zt.outlet.isActivated&&be.canDeactivateChecks.push(new Ys(Zt.outlet.component,ht))}else ht&&Ee(j,Zt,be),be.canActivateChecks.push(new Da(Y)),za(D,null,Ve.component?Zt?Zt.children:null:R,Y,be)})(ht,Ve[ht.value.outlet],R,Y.concat([ht.value]),be),delete Ve[ht.value.outlet]}),Object.entries(Ve).forEach(([ht,Zt])=>Ee(Zt,R.getContext(ht),be)),be}function Ee(D,j,R){const Y=Ro(D),be=D.value;Object.entries(Y).forEach(([Ve,ht])=>{Ee(ht,be.component?j?j.children.getContext(Ve):null:j,R)}),R.canDeactivateChecks.push(new Ys(be.component&&j&&j.outlet&&j.outlet.isActivated?j.outlet.component:null,be))}function ie(D){return"function"==typeof D}function ra(D){return D instanceof H.G||"EmptyError"===D?.name}const Al=Symbol("INITIAL_VALUE");function Wl(){return(0,Ye.n)(D=>(0,oe.z)(D.map(j=>j.pipe((0,yt.s)(1),(0,_t.Z)(Al)))).pipe((0,Oe.T)(j=>{for(const R of j)if(!0!==R){if(R===Al)return Al;if(!1===R||R instanceof Rr)return R}return!0}),(0,ut.p)(j=>j!==Al),(0,yt.s)(1)))}function Ic(D){return(0,P.F)((0,Be.M)(j=>{if(Sr(j))throw Dc(0,j)}),(0,Oe.T)(j=>!0===j))}class Ea{constructor(j){this.segmentGroup=j||null}}class Go extends Error{constructor(j){super(),this.urlTree=j}}function Rs(D){return(0,q.$)(new Ea(D))}class Me{constructor(j,R){this.urlSerializer=j,this.urlTree=R}lineralizeSegments(j,R){let Y=[],be=R.root;for(;;){if(Y=Y.concat(be.segments),0===be.numberOfChildren)return(0,W.of)(Y);if(be.numberOfChildren>1||!be.children[Xe])return(0,q.$)(new M.wOt(4e3,!1));be=be.children[Xe]}}applyRedirectCommands(j,R,Y){const be=this.applyRedirectCreateUrlTree(R,this.urlSerializer.parse(R),j,Y);if(R.startsWith("/"))throw new Go(be);return be}applyRedirectCreateUrlTree(j,R,Y,be){const Ve=this.createSegmentGroup(j,R.root,Y,be);return new Rr(Ve,this.createQueryParams(R.queryParams,this.urlTree.queryParams),R.fragment)}createQueryParams(j,R){const Y={};return Object.entries(j).forEach(([be,Ve])=>{if("string"==typeof Ve&&Ve.startsWith(":")){const Zt=Ve.substring(1);Y[be]=R[Zt]}else Y[be]=Ve}),Y}createSegmentGroup(j,R,Y,be){const Ve=this.createSegments(j,R.segments,Y,be);let ht={};return Object.entries(R.children).forEach(([Zt,Qt])=>{ht[Zt]=this.createSegmentGroup(j,Qt,Y,be)}),new ii(Ve,ht)}createSegments(j,R,Y,be){return R.map(Ve=>Ve.path.startsWith(":")?this.findPosParam(j,Ve,be):this.findOrReturn(Ve,Y))}findPosParam(j,R,Y){const be=Y[R.path.substring(1)];if(!be)throw new M.wOt(4001,!1);return be}findOrReturn(j,R){let Y=0;for(const be of R){if(be.path===j.path)return R.splice(Y),be;Y++}return j}}const Z={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function me(D,j,R,Y,be){const Ve=ke(D,j,R);return Ve.matched?(Y=function ba(D,j){return D.providers&&!D._injector&&(D._injector=(0,M.Ol2)(D.providers,j,`Route: ${D.path}`)),D._injector??j}(j,Y),function ml(D,j,R,Y){const be=j.canMatch;if(!be||0===be.length)return(0,W.of)(!0);const Ve=be.map(ht=>{const Zt=Bs(ht,D);return an(function tc(D){return D&&ie(D.canMatch)}(Zt)?Zt.canMatch(j,R):(0,M.N4e)(D,()=>Zt(j,R)))});return(0,W.of)(Ve).pipe(Wl(),Ic())}(Y,j,R).pipe((0,Oe.T)(ht=>!0===ht?Ve:{...Z}))):(0,W.of)(Ve)}function ke(D,j,R){if("**"===j.path)return function dt(D){return{matched:!0,parameters:D.length>0?It(D).parameters:{},consumedSegments:D,remainingSegments:[],positionalParamSegments:{}}}(R);if(""===j.path)return"full"===j.pathMatch&&(D.hasChildren()||R.length>0)?{...Z}:{matched:!0,consumedSegments:[],remainingSegments:R,parameters:{},positionalParamSegments:{}};const be=(j.matcher||gn)(R,D,j);if(!be)return{...Z};const Ve={};Object.entries(be.posParams??{}).forEach(([Zt,Qt])=>{Ve[Zt]=Qt.path});const ht=be.consumed.length>0?{...Ve,...be.consumed[be.consumed.length-1].parameters}:Ve;return{matched:!0,consumedSegments:be.consumed,remainingSegments:R.slice(be.consumed.length),parameters:ht,positionalParamSegments:be.posParams??{}}}function Lt(D,j,R,Y){return R.length>0&&function Bi(D,j,R){return R.some(Y=>fr(D,j,Y)&&fo(Y)!==Xe)}(D,R,Y)?{segmentGroup:new ii(j,li(Y,new ii(R,D.children))),slicedSegments:[]}:0===R.length&&function fi(D,j,R){return R.some(Y=>fr(D,j,Y))}(D,R,Y)?{segmentGroup:new ii(D.segments,wn(D,R,Y,D.children)),slicedSegments:R}:{segmentGroup:new ii(D.segments,D.children),slicedSegments:R}}function wn(D,j,R,Y){const be={};for(const Ve of R)if(fr(D,j,Ve)&&!Y[fo(Ve)]){const ht=new ii([],{});be[fo(Ve)]=ht}return{...Y,...be}}function li(D,j){const R={};R[Xe]=j;for(const Y of D)if(""===Y.path&&fo(Y)!==Xe){const be=new ii([],{});R[fo(Y)]=be}return R}function fr(D,j,R){return(!(D.hasChildren()||j.length>0)||"full"!==R.pathMatch)&&""===R.path}class Ts{}class yr{constructor(j,R,Y,be,Ve,ht,Zt){this.injector=j,this.configLoader=R,this.rootComponentType=Y,this.config=be,this.urlTree=Ve,this.paramsInheritanceStrategy=ht,this.urlSerializer=Zt,this.applyRedirects=new Me(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(j){return new M.wOt(4002,`'${j.segmentGroup}'`)}recognize(){const j=Lt(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(j).pipe((0,Oe.T)(R=>{const Y=new Va([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xe,this.rootComponentType,null,{}),be=new oo(Y,R),Ve=new ta("",be),ht=function us(D,j,R=null,Y=null){return hs(Fs(D),j,R,Y)}(Y,[],this.urlTree.queryParams,this.urlTree.fragment);return ht.queryParams=this.urlTree.queryParams,Ve.url=this.urlSerializer.serialize(ht),this.inheritParamsAndData(Ve._root,null),{state:Ve,tree:ht}}))}match(j){return this.processSegmentGroup(this.injector,this.config,j,Xe).pipe((0,Ne.W)(Y=>{if(Y instanceof Go)return this.urlTree=Y.urlTree,this.match(Y.urlTree.root);throw Y instanceof Ea?this.noMatchError(Y):Y}))}inheritParamsAndData(j,R){const Y=j.value,be=No(Y,R,this.paramsInheritanceStrategy);Y.params=Object.freeze(be.params),Y.data=Object.freeze(be.data),j.children.forEach(Ve=>this.inheritParamsAndData(Ve,Y))}processSegmentGroup(j,R,Y,be){return 0===Y.segments.length&&Y.hasChildren()?this.processChildren(j,R,Y):this.processSegment(j,R,Y,Y.segments,be,!0).pipe((0,Oe.T)(Ve=>Ve instanceof oo?[Ve]:[]))}processChildren(j,R,Y){const be=[];for(const Ve of Object.keys(Y.children))"primary"===Ve?be.unshift(Ve):be.push(Ve);return(0,ge.H)(be).pipe((0,Ce.H)(Ve=>{const ht=Y.children[Ve],Zt=function Ja(D,j){const R=D.filter(Y=>fo(Y)===j);return R.push(...D.filter(Y=>fo(Y)!==j)),R}(R,Ve);return this.processSegmentGroup(j,Zt,ht,Ve)}),function Fe(D,j){return(0,Ae.N)(function z(D,j,R,Y,be){return(Ve,ht)=>{let Zt=R,Qt=j,Pn=0;Ve.subscribe((0,we._)(ht,Ar=>{const Gr=Pn++;Qt=Zt?D(Qt,Ar,Gr):(Zt=!0,Ar),Y&&ht.next(Qt)},be&&(()=>{Zt&&ht.next(Qt),ht.complete()})))}}(D,j,arguments.length>=2,!0))}((Ve,ht)=>(Ve.push(...ht),Ve)),x(null),function ot(D,j){const R=arguments.length>=2;return Y=>Y.pipe(D?(0,ut.p)((be,Ve)=>D(be,Ve,Y)):te.D,Pt(1),R?x(j):T(()=>new H.G))}(),(0,ae.Z)(Ve=>{if(null===Ve)return Rs(Y);const ht=Ti(Ve);return function Rc(D){D.sort((j,R)=>j.value.outlet===Xe?-1:R.value.outlet===Xe?1:j.value.outlet.localeCompare(R.value.outlet))}(ht),(0,W.of)(ht)}))}processSegment(j,R,Y,be,Ve,ht){return(0,ge.H)(R).pipe((0,Ce.H)(Zt=>this.processSegmentAgainstRoute(Zt._injector??j,R,Zt,Y,be,Ve,ht).pipe((0,Ne.W)(Qt=>{if(Qt instanceof Ea)return(0,W.of)(null);throw Qt}))),ve(Zt=>!!Zt),(0,Ne.W)(Zt=>{if(ra(Zt))return function Gs(D,j,R){return 0===j.length&&!D.children[R]}(Y,be,Ve)?(0,W.of)(new Ts):Rs(Y);throw Zt}))}processSegmentAgainstRoute(j,R,Y,be,Ve,ht,Zt){return function Ns(D,j,R,Y){return!!(fo(D)===Y||Y!==Xe&&fr(j,R,D))&&ke(j,D,R).matched}(Y,be,Ve,ht)?void 0===Y.redirectTo?this.matchSegmentAgainstRoute(j,be,Y,Ve,ht):this.allowRedirects&&Zt?this.expandSegmentAgainstRouteUsingRedirect(j,be,R,Y,Ve,ht):Rs(be):Rs(be)}expandSegmentAgainstRouteUsingRedirect(j,R,Y,be,Ve,ht){const{matched:Zt,consumedSegments:Qt,positionalParamSegments:Pn,remainingSegments:Ar}=ke(R,be,Ve);if(!Zt)return Rs(R);be.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Gr=this.applyRedirects.applyRedirectCommands(Qt,be.redirectTo,Pn);return this.applyRedirects.lineralizeSegments(be,Gr).pipe((0,ae.Z)(Do=>this.processSegment(j,Y,R,Do.concat(Ar),ht,!1)))}matchSegmentAgainstRoute(j,R,Y,be,Ve){const ht=me(R,Y,be,j);return"**"===Y.path&&(R.children={}),ht.pipe((0,Ye.n)(Zt=>Zt.matched?this.getChildConfig(j=Y._injector??j,Y,be).pipe((0,Ye.n)(({routes:Qt})=>{const Pn=Y._loadedInjector??j,{consumedSegments:Ar,remainingSegments:Gr,parameters:Do}=Zt,uu=new Va(Ar,Do,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Ga(D){return D.data||{}}(Y),fo(Y),Y.component??Y._loadedComponent??null,Y,function Qa(D){return D.resolve||{}}(Y)),{segmentGroup:vc,slicedSegments:rc}=Lt(R,Ar,Gr,Qt);if(0===rc.length&&vc.hasChildren())return this.processChildren(Pn,Qt,vc).pipe((0,Oe.T)(Ol=>null===Ol?null:new oo(uu,Ol)));if(0===Qt.length&&0===rc.length)return(0,W.of)(new oo(uu,[]));const Nc=fo(Y)===Ve;return this.processSegment(Pn,Qt,vc,rc,Nc?Xe:Ve,!0).pipe((0,Oe.T)(Ol=>new oo(uu,Ol instanceof oo?[Ol]:[])))})):Rs(R)))}getChildConfig(j,R,Y){return R.children?(0,W.of)({routes:R.children,injector:j}):R.loadChildren?void 0!==R._loadedRoutes?(0,W.of)({routes:R._loadedRoutes,injector:R._loadedInjector}):function Zo(D,j,R,Y){const be=j.canLoad;if(void 0===be||0===be.length)return(0,W.of)(!0);const Ve=be.map(ht=>{const Zt=Bs(ht,D);return an(function wt(D){return D&&ie(D.canLoad)}(Zt)?Zt.canLoad(j,R):(0,M.N4e)(D,()=>Zt(j,R)))});return(0,W.of)(Ve).pipe(Wl(),Ic())}(j,R,Y).pipe((0,ae.Z)(be=>be?this.configLoader.loadChildren(j,R).pipe((0,Be.M)(Ve=>{R._loadedRoutes=Ve.routes,R._loadedInjector=Ve.injector})):function nt(D){return(0,q.$)(Qs(!1,fs.GuardRejected))}())):(0,W.of)({routes:[],injector:j})}}function Mn(D){const j=D.value.routeConfig;return j&&""===j.path}function Ti(D){const j=[],R=new Set;for(const Y of D){if(!Mn(Y)){j.push(Y);continue}const be=j.find(Ve=>Y.value.routeConfig===Ve.value.routeConfig);void 0!==be?(be.children.push(...Y.children),R.add(be)):j.push(Y)}for(const Y of R){const be=Ti(Y.children);j.push(new oo(Y.value,be))}return j.filter(Y=>!R.has(Y))}function Xl(D){const j=D.children.map(R=>Xl(R)).flat();return[D,...j]}function De(D){return(0,Ye.n)(j=>{const R=D(j);return R?(0,ge.H)(R).pipe((0,Oe.T)(()=>j)):(0,W.of)(j)})}let I=(()=>{class D{buildTitle(R){let Y,be=R.root;for(;void 0!==be;)Y=this.getResolvedTitleForRoute(be)??Y,be=be.children.find(Ve=>Ve.outlet===Xe);return Y}getResolvedTitleForRoute(R){return R.data[kt]}static{this.\u0275fac=function(Y){return new(Y||D)}}static{this.\u0275prov=M.jDH({token:D,factory:()=>(0,M.WQX)(F),providedIn:"root"})}}return D})(),F=(()=>{class D extends I{constructor(R){super(),this.title=R}updateTitle(R){const Y=this.buildTitle(R);void 0!==Y&&this.title.setTitle(Y)}static{this.\u0275fac=function(Y){return new(Y||D)(M.KVO($e.hE))}}static{this.\u0275prov=M.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();const re=new M.nKC("",{providedIn:"root",factory:()=>({})}),Te=new M.nKC("");let et=(()=>{class D{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,M.WQX)(M.Ql9)}loadComponent(R){if(this.componentLoaders.get(R))return this.componentLoaders.get(R);if(R._loadedComponent)return(0,W.of)(R._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(R);const Y=an(R.loadComponent()).pipe((0,Oe.T)(Kt),(0,Be.M)(Ve=>{this.onLoadEndListener&&this.onLoadEndListener(R),R._loadedComponent=Ve}),(0,vt.j)(()=>{this.componentLoaders.delete(R)})),be=new Re(Y,()=>new ze.B).pipe(de());return this.componentLoaders.set(R,be),be}loadChildren(R,Y){if(this.childrenLoaders.get(Y))return this.childrenLoaders.get(Y);if(Y._loadedRoutes)return(0,W.of)({routes:Y._loadedRoutes,injector:Y._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(Y);const Ve=function mt(D,j,R,Y){return an(D.loadChildren()).pipe((0,Oe.T)(Kt),(0,ae.Z)(be=>be instanceof M.Co$||Array.isArray(be)?(0,W.of)(be):(0,ge.H)(j.compileModuleAsync(be))),(0,Oe.T)(be=>{Y&&Y(D);let Ve,ht,Zt=!1;return Array.isArray(be)?(ht=be,!0):(Ve=be.create(R).injector,ht=Ve.get(Te,[],{optional:!0,self:!0}).flat()),{routes:ht.map(ia),injector:Ve}}))}(Y,this.compiler,R,this.onLoadEndListener).pipe((0,vt.j)(()=>{this.childrenLoaders.delete(Y)})),ht=new Re(Ve,()=>new ze.B).pipe(de());return this.childrenLoaders.set(Y,ht),ht}static{this.\u0275fac=function(Y){return new(Y||D)}}static{this.\u0275prov=M.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();function Kt(D){return function Mt(D){return D&&"object"==typeof D&&"default"in D}(D)?D.default:D}let Yt=(()=>{class D{static{this.\u0275fac=function(Y){return new(Y||D)}}static{this.\u0275prov=M.jDH({token:D,factory:()=>(0,M.WQX)(Nn),providedIn:"root"})}}return D})(),Nn=(()=>{class D{shouldProcessUrl(R){return!0}extract(R){return R}merge(R,Y){return R}static{this.\u0275fac=function(Y){return new(Y||D)}}static{this.\u0275prov=M.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();const A=new M.nKC(""),Se=new M.nKC("");function ee(D,j,R){const Y=D.get(Se),be=D.get(Ge.qQ);return D.get(M.SKi).runOutsideAngular(()=>{if(!be.startViewTransition||Y.skipNextTransition)return Y.skipNextTransition=!1,new Promise(Pn=>setTimeout(Pn));let Ve;const ht=new Promise(Pn=>{Ve=Pn}),Zt=be.startViewTransition(()=>(Ve(),function fe(D){return new Promise(j=>{(0,M.mal)(j,{injector:D})})}(D))),{onViewTransitionCreated:Qt}=Y;return Qt&&(0,M.N4e)(D,()=>Qt({transition:Zt,from:j,to:R})),ht})}let it=(()=>{class D{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ze.B,this.transitionAbortSubject=new ze.B,this.configLoader=(0,M.WQX)(et),this.environmentInjector=(0,M.WQX)(M.uvJ),this.urlSerializer=(0,M.WQX)(mr),this.rootContexts=(0,M.WQX)(Qo),this.location=(0,M.WQX)(Ge.aZ),this.inputBindingEnabled=null!==(0,M.WQX)(na,{optional:!0}),this.titleStrategy=(0,M.WQX)(I),this.options=(0,M.WQX)(re,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,M.WQX)(Yt),this.createViewTransition=(0,M.WQX)(A,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,W.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=be=>this.events.next(new Cl(be)),this.configLoader.onLoadStartListener=be=>this.events.next(new vr(be))}complete(){this.transitions?.complete()}handleNavigationRequest(R){const Y=++this.navigationId;this.transitions?.next({...this.transitions.value,...R,id:Y})}setupNavigations(R,Y,be){return this.transitions=new X.t({id:0,currentUrlTree:Y,currentRawUrl:Y,extractedUrl:this.urlHandlingStrategy.extract(Y),urlAfterRedirects:this.urlHandlingStrategy.extract(Y),rawUrl:Y,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ur,restoredState:null,currentSnapshot:be.snapshot,targetSnapshot:null,currentRouterState:be,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,ut.p)(Ve=>0!==Ve.id),(0,Oe.T)(Ve=>({...Ve,extractedUrl:this.urlHandlingStrategy.extract(Ve.rawUrl)})),(0,Ye.n)(Ve=>{let ht=!1,Zt=!1;return(0,W.of)(Ve).pipe((0,Ye.n)(Qt=>{if(this.navigationId>Ve.id)return this.cancelNavigationTransition(Ve,"",fs.SupersededByNewNavigation),ne.w;this.currentTransition=Ve,this.currentNavigation={id:Qt.id,initialUrl:Qt.rawUrl,extractedUrl:Qt.extractedUrl,trigger:Qt.source,extras:Qt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const Pn=!R.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!Pn&&"reload"!==(Qt.extras.onSameUrlNavigation??R.onSameUrlNavigation)){const Gr="";return this.events.next(new Is(Qt.id,this.urlSerializer.serialize(Qt.rawUrl),Gr,Pr.IgnoredSameUrlNavigation)),Qt.resolve(null),ne.w}if(this.urlHandlingStrategy.shouldProcessUrl(Qt.rawUrl))return(0,W.of)(Qt).pipe((0,Ye.n)(Gr=>{const Do=this.transitions?.getValue();return this.events.next(new ns(Gr.id,this.urlSerializer.serialize(Gr.extractedUrl),Gr.source,Gr.restoredState)),Do!==this.transitions?.getValue()?ne.w:Promise.resolve(Gr)}),function jl(D,j,R,Y,be,Ve){return(0,ae.Z)(ht=>function fa(D,j,R,Y,be,Ve,ht="emptyOnly"){return new yr(D,j,R,Y,be,ht,Ve).recognize()}(D,j,R,Y,ht.extractedUrl,be,Ve).pipe((0,Oe.T)(({state:Zt,tree:Qt})=>({...ht,targetSnapshot:Zt,urlAfterRedirects:Qt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,R.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Be.M)(Gr=>{Ve.targetSnapshot=Gr.targetSnapshot,Ve.urlAfterRedirects=Gr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Gr.urlAfterRedirects};const Do=new ws(Gr.id,this.urlSerializer.serialize(Gr.extractedUrl),this.urlSerializer.serialize(Gr.urlAfterRedirects),Gr.targetSnapshot);this.events.next(Do)}));if(Pn&&this.urlHandlingStrategy.shouldProcessUrl(Qt.currentRawUrl)){const{id:Gr,extractedUrl:Do,source:uu,restoredState:vc,extras:rc}=Qt,Nc=new ns(Gr,this.urlSerializer.serialize(Do),uu,vc);this.events.next(Nc);const Ol=Ua(this.rootComponentType).snapshot;return this.currentTransition=Ve={...Qt,targetSnapshot:Ol,urlAfterRedirects:Do,extras:{...rc,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Do,(0,W.of)(Ve)}{const Gr="";return this.events.next(new Is(Qt.id,this.urlSerializer.serialize(Qt.extractedUrl),Gr,Pr.IgnoredByUrlHandlingStrategy)),Qt.resolve(null),ne.w}}),(0,Be.M)(Qt=>{const Pn=new ro(Qt.id,this.urlSerializer.serialize(Qt.extractedUrl),this.urlSerializer.serialize(Qt.urlAfterRedirects),Qt.targetSnapshot);this.events.next(Pn)}),(0,Oe.T)(Qt=>(this.currentTransition=Ve={...Qt,guards:hl(Qt.targetSnapshot,Qt.currentSnapshot,this.rootContexts)},Ve)),function $c(D,j){return(0,ae.Z)(R=>{const{targetSnapshot:Y,currentSnapshot:be,guards:{canActivateChecks:Ve,canDeactivateChecks:ht}}=R;return 0===ht.length&&0===Ve.length?(0,W.of)({...R,guardsResult:!0}):function ou(D,j,R,Y){return(0,ge.H)(D).pipe((0,ae.Z)(be=>function pl(D,j,R,Y,be){const Ve=j&&j.routeConfig?j.routeConfig.canDeactivate:null;if(!Ve||0===Ve.length)return(0,W.of)(!0);const ht=Ve.map(Zt=>{const Qt=zo(j)??be,Pn=Bs(Zt,Qt);return an(function el(D){return D&&ie(D.canDeactivate)}(Pn)?Pn.canDeactivate(D,j,R,Y):(0,M.N4e)(Qt,()=>Pn(D,j,R,Y))).pipe(ve())});return(0,W.of)(ht).pipe(Wl())}(be.component,be.route,R,j,Y)),ve(be=>!0!==be,!0))}(ht,Y,be,D).pipe((0,ae.Z)(Zt=>Zt&&function We(D){return"boolean"==typeof D}(Zt)?function Vs(D,j,R,Y){return(0,ge.H)(j).pipe((0,Ce.H)(be=>(0,G.x)(function Ac(D,j){return null!==D&&j&&j(new To(D)),(0,W.of)(!0)}(be.route.parent,Y),function bu(D,j){return null!==D&&j&&j(new Zl(D)),(0,W.of)(!0)}(be.route,Y),function nc(D,j,R){const Y=j[j.length-1],Ve=j.slice(0,j.length-1).reverse().map(ht=>function ha(D){const j=D.routeConfig?D.routeConfig.canActivateChild:null;return j&&0!==j.length?{node:D,guards:j}:null}(ht)).filter(ht=>null!==ht).map(ht=>(0,k.v)(()=>{const Zt=ht.guards.map(Qt=>{const Pn=zo(ht.node)??R,Ar=Bs(Qt,Pn);return an(function Dr(D){return D&&ie(D.canActivateChild)}(Ar)?Ar.canActivateChild(Y,D):(0,M.N4e)(Pn,()=>Ar(Y,D))).pipe(ve())});return(0,W.of)(Zt).pipe(Wl())}));return(0,W.of)(Ve).pipe(Wl())}(D,be.path,R),function fl(D,j,R){const Y=j.routeConfig?j.routeConfig.canActivate:null;if(!Y||0===Y.length)return(0,W.of)(!0);const be=Y.map(Ve=>(0,k.v)(()=>{const ht=zo(j)??R,Zt=Bs(Ve,ht);return an(function wi(D){return D&&ie(D.canActivate)}(Zt)?Zt.canActivate(j,D):(0,M.N4e)(ht,()=>Zt(j,D))).pipe(ve())}));return(0,W.of)(be).pipe(Wl())}(D,be.route,R))),ve(be=>!0!==be,!0))}(Y,Ve,D,j):(0,W.of)(Zt)),(0,Oe.T)(Zt=>({...R,guardsResult:Zt})))})}(this.environmentInjector,Qt=>this.events.next(Qt)),(0,Be.M)(Qt=>{if(Ve.guardsResult=Qt.guardsResult,Sr(Qt.guardsResult))throw Dc(0,Qt.guardsResult);const Pn=new Vo(Qt.id,this.urlSerializer.serialize(Qt.extractedUrl),this.urlSerializer.serialize(Qt.urlAfterRedirects),Qt.targetSnapshot,!!Qt.guardsResult);this.events.next(Pn)}),(0,ut.p)(Qt=>!!Qt.guardsResult||(this.cancelNavigationTransition(Qt,"",fs.GuardRejected),!1)),De(Qt=>{if(Qt.guards.canActivateChecks.length)return(0,W.of)(Qt).pipe((0,Be.M)(Pn=>{const Ar=new ea(Pn.id,this.urlSerializer.serialize(Pn.extractedUrl),this.urlSerializer.serialize(Pn.urlAfterRedirects),Pn.targetSnapshot);this.events.next(Ar)}),(0,Ye.n)(Pn=>{let Ar=!1;return(0,W.of)(Pn).pipe(function gl(D,j){return(0,ae.Z)(R=>{const{targetSnapshot:Y,guards:{canActivateChecks:be}}=R;if(!be.length)return(0,W.of)(R);const Ve=new Set(be.map(Qt=>Qt.route)),ht=new Set;for(const Qt of Ve)if(!ht.has(Qt))for(const Pn of Xl(Qt))ht.add(Pn);let Zt=0;return(0,ge.H)(ht).pipe((0,Ce.H)(Qt=>Ve.has(Qt)?function bo(D,j,R,Y){const be=D.routeConfig,Ve=D._resolve;return void 0!==be?.title&&!Xa(be)&&(Ve[kt]=be.title),function Aa(D,j,R,Y){const be=ct(D);if(0===be.length)return(0,W.of)({});const Ve={};return(0,ge.H)(be).pipe((0,ae.Z)(ht=>function mc(D,j,R,Y){const be=zo(j)??Y,Ve=Bs(D,be);return an(Ve.resolve?Ve.resolve(j,R):(0,M.N4e)(be,()=>Ve(j,R)))}(D[ht],j,R,Y).pipe(ve(),(0,Be.M)(Zt=>{Ve[ht]=Zt}))),Pt(1),(0,Vt.u)(Ve),(0,Ne.W)(ht=>ra(ht)?ne.w:(0,q.$)(ht)))}(Ve,D,j,Y).pipe((0,Oe.T)(ht=>(D._resolvedData=ht,D.data=No(D,D.parent,R).resolve,null)))}(Qt,Y,D,j):(Qt.data=No(Qt,Qt.parent,D).resolve,(0,W.of)(void 0))),(0,Be.M)(()=>Zt++),Pt(1),(0,ae.Z)(Qt=>Zt===ht.size?(0,W.of)(R):ne.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Be.M)({next:()=>Ar=!0,complete:()=>{Ar||this.cancelNavigationTransition(Pn,"",fs.NoDataFromResolver)}}))}),(0,Be.M)(Pn=>{const Ar=new Gi(Pn.id,this.urlSerializer.serialize(Pn.extractedUrl),this.urlSerializer.serialize(Pn.urlAfterRedirects),Pn.targetSnapshot);this.events.next(Ar)}))}),De(Qt=>{const Pn=Ar=>{const Gr=[];Ar.routeConfig?.loadComponent&&!Ar.routeConfig._loadedComponent&&Gr.push(this.configLoader.loadComponent(Ar.routeConfig).pipe((0,Be.M)(Do=>{Ar.component=Do}),(0,Oe.T)(()=>{})));for(const Do of Ar.children)Gr.push(...Pn(Do));return Gr};return(0,oe.z)(Pn(Qt.targetSnapshot.root)).pipe(x(null),(0,yt.s)(1))}),De(()=>this.afterPreactivation()),(0,Ye.n)(()=>{const{currentSnapshot:Qt,targetSnapshot:Pn}=Ve,Ar=this.createViewTransition?.(this.environmentInjector,Qt.root,Pn.root);return Ar?(0,ge.H)(Ar).pipe((0,Oe.T)(()=>Ve)):(0,W.of)(Ve)}),(0,Oe.T)(Qt=>{const Pn=function cl(D,j,R){const Y=wl(D,j._root,R?R._root:void 0);return new Ta(Y,j)}(R.routeReuseStrategy,Qt.targetSnapshot,Qt.currentRouterState);return this.currentTransition=Ve={...Qt,targetRouterState:Pn},this.currentNavigation.targetRouterState=Pn,Ve}),(0,Be.M)(()=>{this.events.next(new _r)}),((D,j,R,Y)=>(0,Oe.T)(be=>(new ec(j,be.targetRouterState,be.currentRouterState,R,Y).activate(D),be)))(this.rootContexts,R.routeReuseStrategy,Qt=>this.events.next(Qt),this.inputBindingEnabled),(0,yt.s)(1),(0,Be.M)({next:Qt=>{ht=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ls(Qt.id,this.urlSerializer.serialize(Qt.extractedUrl),this.urlSerializer.serialize(Qt.urlAfterRedirects))),this.titleStrategy?.updateTitle(Qt.targetRouterState.snapshot),Qt.resolve(!0)},complete:()=>{ht=!0}}),(0,st.Q)(this.transitionAbortSubject.pipe((0,Be.M)(Qt=>{throw Qt}))),(0,vt.j)(()=>{!ht&&!Zt&&this.cancelNavigationTransition(Ve,"",fs.SupersededByNewNavigation),this.currentTransition?.id===Ve.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,Ne.W)(Qt=>{if(Zt=!0,ks(Qt))this.events.next(new Tr(Ve.id,this.urlSerializer.serialize(Ve.extractedUrl),Qt.message,Qt.cancellationCode)),function Jl(D){return ks(D)&&Sr(D.url)}(Qt)?this.events.next(new ka(Qt.url)):Ve.resolve(!1);else{this.events.next(new eo(Ve.id,this.urlSerializer.serialize(Ve.extractedUrl),Qt,Ve.targetSnapshot??void 0));try{Ve.resolve(R.errorHandler(Qt))}catch(Pn){this.options.resolveNavigationPromiseOnError?Ve.resolve(!1):Ve.reject(Pn)}}return ne.w}))}))}cancelNavigationTransition(R,Y,be){const Ve=new Tr(R.id,this.urlSerializer.serialize(R.extractedUrl),Y,be);this.events.next(Ve),R.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(Y){return new(Y||D)}}static{this.\u0275prov=M.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();function Ht(D){return D!==ur}let Wt=(()=>{class D{static{this.\u0275fac=function(Y){return new(Y||D)}}static{this.\u0275prov=M.jDH({token:D,factory:()=>(0,M.WQX)(dr),providedIn:"root"})}}return D})();class Wn{shouldDetach(j){return!1}store(j,R){}shouldAttach(j){return!1}retrieve(j){return null}shouldReuseRoute(j,R){return j.routeConfig===R.routeConfig}}let dr=(()=>{class D extends Wn{static{this.\u0275fac=(()=>{let R;return function(be){return(R||(R=M.xGo(D)))(be||D)}})()}static{this.\u0275prov=M.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})(),qi=(()=>{class D{static{this.\u0275fac=function(Y){return new(Y||D)}}static{this.\u0275prov=M.jDH({token:D,factory:()=>(0,M.WQX)(ps),providedIn:"root"})}}return D})(),ps=(()=>{class D extends qi{constructor(){super(...arguments),this.location=(0,M.WQX)(Ge.aZ),this.urlSerializer=(0,M.WQX)(mr),this.options=(0,M.WQX)(re,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,M.WQX)(Yt),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Rr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ua(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(R){return this.location.subscribe(Y=>{"popstate"===Y.type&&R(Y.url,Y.state)})}handleRouterEvent(R,Y){if(R instanceof ns)this.stateMemento=this.createStateMemento();else if(R instanceof Is)this.rawUrlTree=Y.initialUrl;else if(R instanceof ws){if("eager"===this.urlUpdateStrategy&&!Y.extras.skipLocationChange){const be=this.urlHandlingStrategy.merge(Y.finalUrl,Y.initialUrl);this.setBrowserUrl(be,Y)}}else R instanceof _r?(this.currentUrlTree=Y.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(Y.finalUrl,Y.initialUrl),this.routerState=Y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Y))):R instanceof Tr&&(R.code===fs.GuardRejected||R.code===fs.NoDataFromResolver)?this.restoreHistory(Y):R instanceof eo?this.restoreHistory(Y,!0):R instanceof Ls&&(this.lastSuccessfulId=R.id,this.currentPageId=this.browserPageId)}setBrowserUrl(R,Y){const be=this.urlSerializer.serialize(R);if(this.location.isCurrentPathEqualTo(be)||Y.extras.replaceUrl){const ht={...Y.extras.state,...this.generateNgRouterState(Y.id,this.browserPageId)};this.location.replaceState(be,"",ht)}else{const Ve={...Y.extras.state,...this.generateNgRouterState(Y.id,this.browserPageId+1)};this.location.go(be,"",Ve)}}restoreHistory(R,Y=!1){if("computed"===this.canceledNavigationResolution){const Ve=this.currentPageId-this.browserPageId;0!==Ve?this.location.historyGo(Ve):this.currentUrlTree===R.finalUrl&&0===Ve&&(this.resetState(R),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(Y&&this.resetState(R),this.resetUrlToCurrentUrlTree())}resetState(R){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,R.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(R,Y){return"computed"===this.canceledNavigationResolution?{navigationId:R,\u0275routerPageId:Y}:{navigationId:R}}static{this.\u0275fac=(()=>{let R;return function(be){return(R||(R=M.xGo(D)))(be||D)}})()}static{this.\u0275prov=M.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();var ji=function(D){return D[D.COMPLETE=0]="COMPLETE",D[D.FAILED=1]="FAILED",D[D.REDIRECTING=2]="REDIRECTING",D}(ji||{});function wr(D,j){D.events.pipe((0,ut.p)(R=>R instanceof Ls||R instanceof Tr||R instanceof eo||R instanceof Is),(0,Oe.T)(R=>R instanceof Ls||R instanceof Is?ji.COMPLETE:R instanceof Tr&&(R.code===fs.Redirect||R.code===fs.SupersededByNewNavigation)?ji.REDIRECTING:ji.FAILED),(0,ut.p)(R=>R!==ji.REDIRECTING),(0,yt.s)(1)).subscribe(()=>{j()})}function vi(D){throw D}const lt={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Sn=(()=>{class D{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,M.WQX)(M.H3F),this.stateManager=(0,M.WQX)(qi),this.options=(0,M.WQX)(re,{optional:!0})||{},this.pendingTasks=(0,M.WQX)(M.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,M.WQX)(it),this.urlSerializer=(0,M.WQX)(mr),this.location=(0,M.WQX)(Ge.aZ),this.urlHandlingStrategy=(0,M.WQX)(Yt),this._events=new ze.B,this.errorHandler=this.options.errorHandler||vi,this.navigated=!1,this.routeReuseStrategy=(0,M.WQX)(Wt),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,M.WQX)(Te,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,M.WQX)(na,{optional:!0}),this.eventsSubscription=new he.yU,this.isNgZoneEnabled=(0,M.WQX)(M.SKi)instanceof M.SKi&&M.SKi.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:R=>{this.console.warn(R)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const R=this.navigationTransitions.events.subscribe(Y=>{try{const be=this.navigationTransitions.currentTransition,Ve=this.navigationTransitions.currentNavigation;if(null!==be&&null!==Ve)if(this.stateManager.handleRouterEvent(Y,Ve),Y instanceof Tr&&Y.code!==fs.Redirect&&Y.code!==fs.SupersededByNewNavigation)this.navigated=!0;else if(Y instanceof Ls)this.navigated=!0;else if(Y instanceof ka){const ht=this.urlHandlingStrategy.merge(Y.url,be.currentRawUrl),Zt={info:be.extras.info,skipLocationChange:be.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ht(be.source)};this.scheduleNavigation(ht,ur,null,Zt,{resolve:be.resolve,reject:be.reject,promise:be.promise})}(function Or(D){return!(D instanceof _r||D instanceof ka)})(Y)&&this._events.next(Y)}catch(be){this.navigationTransitions.transitionAbortSubject.next(be)}});this.eventsSubscription.add(R)}resetRootComponentType(R){this.routerState.root.component=R,this.navigationTransitions.rootComponentType=R}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ur,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((R,Y)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(R,"popstate",Y)},0)})}navigateToSyncWithBrowser(R,Y,be){const Ve={replaceUrl:!0},ht=be?.navigationId?be:null;if(be){const Qt={...be};delete Qt.navigationId,delete Qt.\u0275routerPageId,0!==Object.keys(Qt).length&&(Ve.state=Qt)}const Zt=this.parseUrl(R);this.scheduleNavigation(Zt,Y,ht,Ve)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(R){this.config=R.map(ia),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(R,Y={}){const{relativeTo:be,queryParams:Ve,fragment:ht,queryParamsHandling:Zt,preserveFragment:Qt}=Y,Pn=Qt?this.currentUrlTree.fragment:ht;let Gr,Ar=null;switch(Zt){case"merge":Ar={...this.currentUrlTree.queryParams,...Ve};break;case"preserve":Ar=this.currentUrlTree.queryParams;break;default:Ar=Ve||null}null!==Ar&&(Ar=this.removeEmptyProps(Ar));try{Gr=Fs(be?be.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof R[0]||!R[0].startsWith("/"))&&(R=[]),Gr=this.currentUrlTree.root}return hs(Gr,R,Ar,Pn??null)}navigateByUrl(R,Y={skipLocationChange:!1}){const be=Sr(R)?R:this.parseUrl(R),Ve=this.urlHandlingStrategy.merge(be,this.rawUrlTree);return this.scheduleNavigation(Ve,ur,null,Y)}navigate(R,Y={skipLocationChange:!1}){return function ti(D){for(let j=0;j<D.length;j++)if(null==D[j])throw new M.wOt(4008,!1)}(R),this.navigateByUrl(this.createUrlTree(R,Y),Y)}serializeUrl(R){return this.urlSerializer.serialize(R)}parseUrl(R){try{return this.urlSerializer.parse(R)}catch{return this.urlSerializer.parse("/")}}isActive(R,Y){let be;if(be=!0===Y?{...lt}:!1===Y?{...kr}:Y,Sr(R))return Zn(this.currentUrlTree,R,be);const Ve=this.parseUrl(R);return Zn(this.currentUrlTree,Ve,be)}removeEmptyProps(R){return Object.entries(R).reduce((Y,[be,Ve])=>(null!=Ve&&(Y[be]=Ve),Y),{})}scheduleNavigation(R,Y,be,Ve,ht){if(this.disposed)return Promise.resolve(!1);let Zt,Qt,Pn;ht?(Zt=ht.resolve,Qt=ht.reject,Pn=ht.promise):Pn=new Promise((Gr,Do)=>{Zt=Gr,Qt=Do});const Ar=this.pendingTasks.add();return wr(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Ar))}),this.navigationTransitions.handleNavigationRequest({source:Y,restoredState:be,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:R,extras:Ve,resolve:Zt,reject:Qt,promise:Pn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Pn.catch(Gr=>Promise.reject(Gr))}static{this.\u0275fac=function(Y){return new(Y||D)}}static{this.\u0275prov=M.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})(),is=(()=>{class D{constructor(R,Y,be,Ve,ht,Zt){this.router=R,this.route=Y,this.tabIndexAttribute=be,this.renderer=Ve,this.el=ht,this.locationStrategy=Zt,this.href=null,this.commands=null,this.onChanges=new ze.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Qt=ht.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Qt||"area"===Qt,this.isAnchorElement?this.subscription=R.events.subscribe(Pn=>{Pn instanceof Ls&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(R){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",R)}ngOnChanges(R){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(R){null!=R?(this.commands=Array.isArray(R)?R:[R],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(R,Y,be,Ve,ht){const Zt=this.urlTree;return!!(null===Zt||this.isAnchorElement&&(0!==R||Y||be||Ve||ht||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(Zt,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const R=this.urlTree;this.href=null!==R&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(R)):null;const Y=null===this.href?null:(0,M.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",Y)}applyAttributeValue(R,Y){const be=this.renderer,Ve=this.el.nativeElement;null!==Y?be.setAttribute(Ve,R,Y):be.removeAttribute(Ve,R)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(Y){return new(Y||D)(M.rXU(Sn),M.rXU(va),M.kS0("tabindex"),M.rXU(M.sFG),M.rXU(M.aKT),M.rXU(Ge.hb))}}static{this.\u0275dir=M.FsC({type:D,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(Y,be){1&Y&&M.bIt("click",function(ht){return be.onClick(ht.button,ht.ctrlKey,ht.shiftKey,ht.altKey,ht.metaKey)}),2&Y&&M.BMQ("target",be.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[M.Mj6.HasDecoratorInputTransform,"preserveFragment","preserveFragment",M.L39],skipLocationChange:[M.Mj6.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",M.L39],replaceUrl:[M.Mj6.HasDecoratorInputTransform,"replaceUrl","replaceUrl",M.L39],routerLink:"routerLink"},standalone:!0,features:[M.GFd,M.OA$]})}}return D})();class Mi{}let Fr=(()=>{class D{constructor(R,Y,be,Ve,ht){this.router=R,this.injector=be,this.preloadingStrategy=Ve,this.loader=ht}setUpPreloading(){this.subscription=this.router.events.pipe((0,ut.p)(R=>R instanceof Ls),(0,Ce.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(R,Y){const be=[];for(const Ve of Y){Ve.providers&&!Ve._injector&&(Ve._injector=(0,M.Ol2)(Ve.providers,R,`Route: ${Ve.path}`));const ht=Ve._injector??R,Zt=Ve._loadedInjector??ht;(Ve.loadChildren&&!Ve._loadedRoutes&&void 0===Ve.canLoad||Ve.loadComponent&&!Ve._loadedComponent)&&be.push(this.preloadConfig(ht,Ve)),(Ve.children||Ve._loadedRoutes)&&be.push(this.processRoutes(Zt,Ve.children??Ve._loadedRoutes))}return(0,ge.H)(be).pipe((0,Ft.U)())}preloadConfig(R,Y){return this.preloadingStrategy.preload(Y,()=>{let be;be=Y.loadChildren&&void 0===Y.canLoad?this.loader.loadChildren(R,Y):(0,W.of)(null);const Ve=be.pipe((0,ae.Z)(ht=>null===ht?(0,W.of)(void 0):(Y._loadedRoutes=ht.routes,Y._loadedInjector=ht.injector,this.processRoutes(ht.injector??R,ht.routes))));if(Y.loadComponent&&!Y._loadedComponent){const ht=this.loader.loadComponent(Y);return(0,ge.H)([Ve,ht]).pipe((0,Ft.U)())}return Ve})}static{this.\u0275fac=function(Y){return new(Y||D)(M.KVO(Sn),M.KVO(M.Ql9),M.KVO(M.uvJ),M.KVO(Mi),M.KVO(et))}}static{this.\u0275prov=M.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})();const Di=new M.nKC("");let lo=(()=>{class D{constructor(R,Y,be,Ve,ht={}){this.urlSerializer=R,this.transitions=Y,this.viewportScroller=be,this.zone=Ve,this.options=ht,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,M.WQX)(M.uvJ),ht.scrollPositionRestoration||="disabled",ht.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(R=>{R instanceof ns?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=R.navigationTrigger,this.restoredId=R.restoredState?R.restoredState.navigationId:0):R instanceof Ls?(this.lastId=R.id,this.scheduleScrollEvent(R,this.urlSerializer.parse(R.urlAfterRedirects).fragment)):R instanceof Is&&R.code===Pr.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(R,this.urlSerializer.parse(R.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(R=>{R instanceof ja&&(R.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(R.position):R.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(R.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(R,Y){var be=this;this.zone.runOutsideAngular((0,l.A)(function*(){yield new Promise(Ve=>{setTimeout(()=>{Ve()}),(0,M.mal)(()=>{Ve()},{injector:be.environmentInjector})}),be.zone.run(()=>{be.transitions.events.next(new ja(R,"popstate"===be.lastSource?be.store[be.restoredId]:null,Y))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(Y){M.QTQ()}}static{this.\u0275prov=M.jDH({token:D,factory:D.\u0275fac})}}return D})();function sa(D,...j){return(0,M.EmA)([{provide:Te,multi:!0,useValue:D},[],{provide:va,useFactory:Yr,deps:[Sn]},{provide:M.iLQ,multi:!0,useFactory:Co},j.map(R=>R.\u0275providers)])}function Yr(D){return D.routerState.root}function Lr(D,j){return{\u0275kind:D,\u0275providers:j}}function Co(){const D=(0,M.WQX)(M.zZn);return j=>{const R=D.get(M.o8S);if(j!==R.components[0])return;const Y=D.get(Sn),be=D.get(mo);1===D.get(qs)&&Y.initialNavigation(),D.get(Rl,null,M.$GK.Optional)?.setUpPreloading(),D.get(Di,null,M.$GK.Optional)?.init(),Y.resetRootComponentType(R.componentTypes[0]),be.closed||(be.next(),be.complete(),be.unsubscribe())}}const mo=new M.nKC("",{factory:()=>new ze.B}),qs=new M.nKC("",{providedIn:"root",factory:()=>1}),Rl=new M.nKC("");function nl(D){return Lr(0,[{provide:Rl,useExisting:Fr},{provide:Mi,useExisting:D}])}function bs(D){return Lr(9,[{provide:A,useValue:ee},{provide:Se,useValue:{skipNextTransition:!!D?.skipInitialTransition,...D}}])}const pa=new M.nKC("ROUTER_FORROOT_GUARD"),vl=[Ge.aZ,{provide:mr,useClass:Si},Sn,Qo,{provide:va,useFactory:Yr,deps:[Sn]},et,[]];let Wo=(()=>{class D{constructor(R){}static forRoot(R,Y){return{ngModule:D,providers:[vl,[],{provide:Te,multi:!0,useValue:R},{provide:pa,useFactory:lu,deps:[[Sn,new M.Xx1,new M.kdw]]},{provide:re,useValue:Y||{}},Y?.useHash?{provide:Ge.hb,useClass:Ge.fw}:{provide:Ge.hb,useClass:Ge.Sm},{provide:Di,useFactory:()=>{const D=(0,M.WQX)(Ge.Xr),j=(0,M.WQX)(M.SKi),R=(0,M.WQX)(re),Y=(0,M.WQX)(it),be=(0,M.WQX)(mr);return R.scrollOffset&&D.setOffset(R.scrollOffset),new lo(be,Y,D,j,R)}},Y?.preloadingStrategy?nl(Y.preloadingStrategy).\u0275providers:[],Y?.initialNavigation?cu(Y):[],Y?.bindToComponentInputs?Lr(8,[Ha,{provide:na,useExisting:Ha}]).\u0275providers:[],Y?.enableViewTransitions?bs().\u0275providers:[],[{provide:ic,useFactory:Co},{provide:M.iLQ,multi:!0,useExisting:ic}]]}}static forChild(R){return{ngModule:D,providers:[{provide:Te,multi:!0,useValue:R}]}}static{this.\u0275fac=function(Y){return new(Y||D)(M.KVO(pa,8))}}static{this.\u0275mod=M.$C({type:D})}static{this.\u0275inj=M.G2t({})}}return D})();function lu(D){return"guarded"}function cu(D){return["disabled"===D.initialNavigation?Lr(3,[{provide:M.hnV,multi:!0,useFactory:()=>{const j=(0,M.WQX)(Sn);return()=>{j.setUpLocationChangeListener()}}},{provide:qs,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?Lr(2,[{provide:qs,useValue:0},{provide:M.hnV,multi:!0,deps:[M.zZn],useFactory:j=>{const R=j.get(Ge.hj,Promise.resolve());return()=>R.then(()=>new Promise(Y=>{const be=j.get(Sn),Ve=j.get(mo);wr(be,()=>{Y(!0)}),j.get(it).afterPreactivation=()=>(Y(!0),Ve.closed?(0,W.of)(void 0):Ve),be.initialNavigation()}))}}]).\u0275providers:[]]}const ic=new M.nKC("")},4221:(Dt,qe,S)=>{"use strict";S.d(qe,{Lw:()=>vf,DI:()=>If,$G:()=>Or,HC:()=>Sa,Bq:()=>bf,UN:()=>Ci,X9:()=>Ju,Um:()=>Zu,sy:()=>bh,Gx:()=>pu,Ri:()=>Mu,WA:()=>ed,Pv:()=>Sh,m_:()=>Eh,RS:()=>Pm,md:()=>Vp,n8:()=>Df});var l=S(4438),M=S(9079),h=S(1985),ge=S(983),W=S(7673),X=S(1413),oe=S(8750),H=S(1397),G=S(7441),k=S(8071),P=S(6450);const q=["addListener","removeListener"],ne=["addEventListener","removeEventListener"],ce=["on","off"];function he(m,N,f,_){if((0,k.T)(f)&&(_=f,f=void 0),_)return he(m,N,f).pipe((0,P.I)(_));const[w,_e]=function Re(m){return(0,k.T)(m.addEventListener)&&(0,k.T)(m.removeEventListener)}(m)?ne.map(Ue=>Tt=>m[Ue](N,Tt,f)):function we(m){return(0,k.T)(m.addListener)&&(0,k.T)(m.removeListener)}(m)?q.map(Ae(m,N)):function de(m){return(0,k.T)(m.on)&&(0,k.T)(m.off)}(m)?ce.map(Ae(m,N)):[];if(!w&&(0,G.X)(m))return(0,H.Z)(Ue=>he(Ue,N,f))((0,oe.Tg)(m));if(!w)throw new TypeError("Invalid event target");return new h.c(Ue=>{const Tt=(...Ut)=>Ue.next(1<Ut.length?Ut:Ut[0]);return w(Tt),()=>_e(Tt)})}function Ae(m,N){return f=>_=>m[f](N,_)}var ze=S(1584);const{isArray:Ge}=Array;function Oe(m){return 1===m.length&&Ge(m[0])?m[0]:m}var Ye=S(4360);function yt(...m){return 1===(m=Oe(m)).length?(0,oe.Tg)(m[0]):new h.c(function _t(m){return N=>{let f=[];for(let _=0;f&&!N.closed&&_<m.length;_++)f.push((0,oe.Tg)(m[_]).subscribe((0,Ye._)(N,w=>{if(f){for(let _e=0;_e<f.length;_e++)_e!==_&&f[_e].unsubscribe();f=null}N.next(w)})))}}(m))}S(6365);var ae=S(9326);function K(...m){const N=(0,ae.ms)(m),f=Oe(m);return f.length?new h.c(_=>{let w=f.map(()=>[]),_e=f.map(()=>!1);_.add(()=>{w=_e=null});for(let Ue=0;!_.closed&&Ue<f.length;Ue++)(0,oe.Tg)(f[Ue]).subscribe((0,Ye._)(_,Tt=>{if(w[Ue].push(Tt),w.every(Ut=>Ut.length)){const Ut=w.map(tn=>tn.shift());_.next(N?N(...Ut):Ut),w.some((tn,un)=>!tn.length&&_e[un])&&_.complete()}},()=>{_e[Ue]=!0,!w[Ue].length&&_.complete()}));return()=>{w=_e=null}}):ge.w}S(6648);var te=S(8793),Ce=S(6977),Be=S(5964),Ne=S(6697),z=S(8141),Fe=S(6354),Pt=S(9974),ot=S(3669),Vt=S(5343);function vt(...m){const N=(0,ae.ms)(m);return(0,Pt.N)((f,_)=>{const w=m.length,_e=new Array(w);let Ue=m.map(()=>!1),Tt=!1;for(let Ut=0;Ut<w;Ut++)(0,oe.Tg)(m[Ut]).subscribe((0,Ye._)(_,tn=>{_e[Ut]=tn,!Tt&&!Ue[Ut]&&(Ue[Ut]=!0,(Tt=Ue.every(ot.D))&&(Ue=null))},Vt.l));f.subscribe((0,Ye._)(_,Ut=>{if(Tt){const tn=[Ut,..._e];_.next(N?N(...tn):tn)}}))})}var st=S(8839),$e=S(3703);function Xe(m,N){return N?f=>(0,te.x)(N.pipe((0,Ne.s)(1),function Ft(){return(0,Pt.N)((m,N)=>{m.subscribe((0,Ye._)(N,Vt.l))})}()),f.pipe(Xe(m))):(0,H.Z)((f,_)=>(0,oe.Tg)(m(f,_)).pipe((0,Ne.s)(1),(0,$e.u)(f)))}var cn=S(5558),rn=S(9172);function Xt(m,N){return m===N}var ct=S(980),Ot=S(177),an=(S(9417),{left:"right",right:"left",bottom:"top",top:"bottom"});function Fn(m){return m.replace(/left|right|bottom|top/g,function(N){return an[N]})}function Xn(m){return m.split("-")[0]}var Zn={start:"end",end:"start"};function Hr(m){return m.replace(/start|end/g,function(N){return Zn[N]})}var Hn="top",Dn="bottom",Un="right",Pi="left",Qi="auto",Rr=[Hn,Dn,Un,Pi],ii="start",yi="end",Yn="viewport",cr="popper",Si=Rr.reduce(function(m,N){return m.concat([N+"-"+ii,N+"-"+yi])},[]),Ir=[].concat(Rr,[Qi]).reduce(function(m,N){return m.concat([N,N+"-"+ii,N+"-"+yi])},[]),fn=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function vn(m){if(null==m)return window;if("[object Window]"!==m.toString()){var N=m.ownerDocument;return N&&N.defaultView||window}return m}function kn(m){return m instanceof vn(m).Element||m instanceof Element}function zi(m){return m instanceof vn(m).HTMLElement||m instanceof HTMLElement}function oi(m){return!(typeof ShadowRoot>"u")&&(m instanceof vn(m).ShadowRoot||m instanceof ShadowRoot)}function gi(m){return((kn(m)?m.ownerDocument:m.document)||window.document).documentElement}var Nr=Math.max,$n=Math.min,hr=Math.round;function cs(){var m=navigator.userAgentData;return null!=m&&m.brands&&Array.isArray(m.brands)?m.brands.map(function(N){return N.brand+"/"+N.version}).join(" "):navigator.userAgent}function Qr(){return!/^((?!chrome|android).)*safari/i.test(cs())}function zn(m,N,f){void 0===N&&(N=!1),void 0===f&&(f=!1);var _=m.getBoundingClientRect(),w=1,_e=1;N&&zi(m)&&(w=m.offsetWidth>0&&hr(_.width)/m.offsetWidth||1,_e=m.offsetHeight>0&&hr(_.height)/m.offsetHeight||1);var Tt=(kn(m)?vn(m):window).visualViewport,Ut=!Qr()&&f,tn=(_.left+(Ut&&Tt?Tt.offsetLeft:0))/w,un=(_.top+(Ut&&Tt?Tt.offsetTop:0))/_e,Jn=_.width/w,si=_.height/_e;return{width:Jn,height:si,top:un,right:tn+Jn,bottom:un+si,left:tn,x:tn,y:un}}function Kn(m){var N=vn(m);return{scrollLeft:N.pageXOffset,scrollTop:N.pageYOffset}}function xi(m){return zn(gi(m)).left+Kn(m).scrollLeft}function us(m){return vn(m).getComputedStyle(m)}function hs(m){return m?(m.nodeName||"").toLowerCase():null}function ir(m){return"html"===hs(m)?m:m.assignedSlot||m.parentNode||(oi(m)?m.host:null)||gi(m)}function Ks(m){var N=us(m);return/auto|scroll|overlay|hidden/.test(N.overflow+N.overflowY+N.overflowX)}function Mo(m){return["html","body","#document"].indexOf(hs(m))>=0?m.ownerDocument.body:zi(m)&&Ks(m)?m:Mo(ir(m))}function As(m,N){var f;void 0===N&&(N=[]);var _=Mo(m),w=_===(null==(f=m.ownerDocument)?void 0:f.body),_e=vn(_),Ue=w?[_e].concat(_e.visualViewport||[],Ks(_)?_:[]):_,Tt=N.concat(Ue);return w?Tt:Tt.concat(As(ir(Ue)))}function Us(m){return["table","td","th"].indexOf(hs(m))>=0}function vs(m){return zi(m)&&"fixed"!==us(m).position?m.offsetParent:null}function Qe(m){for(var N=vn(m),f=vs(m);f&&Us(f)&&"static"===us(f).position;)f=vs(f);return f&&("html"===hs(f)||"body"===hs(f)&&"static"===us(f).position)?N:f||function ho(m){var N=/firefox/i.test(cs());if(/Trident/i.test(cs())&&zi(m)&&"fixed"===us(m).position)return null;var w=ir(m);for(oi(w)&&(w=w.host);zi(w)&&["html","body"].indexOf(hs(w))<0;){var _e=us(w);if("none"!==_e.transform||"none"!==_e.perspective||"paint"===_e.contain||-1!==["transform","perspective"].indexOf(_e.willChange)||N&&"filter"===_e.willChange||N&&_e.filter&&"none"!==_e.filter)return w;w=w.parentNode}return null}(m)||N}function L(m,N){var f=N.getRootNode&&N.getRootNode();if(m.contains(N))return!0;if(f&&oi(f)){var _=N;do{if(_&&m.isSameNode(_))return!0;_=_.parentNode||_.host}while(_)}return!1}function $(m){return Object.assign({},m,{left:m.x,top:m.y,right:m.x+m.width,bottom:m.y+m.height})}function Ze(m,N,f){return N===Yn?$(function Sr(m,N){var f=vn(m),_=gi(m),w=f.visualViewport,_e=_.clientWidth,Ue=_.clientHeight,Tt=0,Ut=0;if(w){_e=w.width,Ue=w.height;var tn=Qr();(tn||!tn&&"fixed"===N)&&(Tt=w.offsetLeft,Ut=w.offsetTop)}return{width:_e,height:Ue,x:Tt+xi(m),y:Ut}}(m,f)):kn(N)?function ue(m,N){var f=zn(m,!1,"fixed"===N);return f.top=f.top+m.clientTop,f.left=f.left+m.clientLeft,f.bottom=f.top+m.clientHeight,f.right=f.left+m.clientWidth,f.width=m.clientWidth,f.height=m.clientHeight,f.x=f.left,f.y=f.top,f}(N,f):$(function Fs(m){var N,f=gi(m),_=Kn(m),w=null==(N=m.ownerDocument)?void 0:N.body,_e=Nr(f.scrollWidth,f.clientWidth,w?w.scrollWidth:0,w?w.clientWidth:0),Ue=Nr(f.scrollHeight,f.clientHeight,w?w.scrollHeight:0,w?w.clientHeight:0),Tt=-_.scrollLeft+xi(m),Ut=-_.scrollTop;return"rtl"===us(w||f).direction&&(Tt+=Nr(f.clientWidth,w?w.clientWidth:0)-_e),{width:_e,height:Ue,x:Tt,y:Ut}}(gi(m)))}function pn(m){return m.split("-")[1]}function Vn(m){return["top","bottom"].indexOf(m)>=0?"x":"y"}function ai(m){var Ut,N=m.reference,f=m.element,_=m.placement,w=_?Xn(_):null,_e=_?pn(_):null,Ue=N.x+N.width/2-f.width/2,Tt=N.y+N.height/2-f.height/2;switch(w){case Hn:Ut={x:Ue,y:N.y-f.height};break;case Dn:Ut={x:Ue,y:N.y+N.height};break;case Un:Ut={x:N.x+N.width,y:Tt};break;case Pi:Ut={x:N.x-f.width,y:Tt};break;default:Ut={x:N.x,y:N.y}}var tn=w?Vn(w):null;if(null!=tn){var un="y"===tn?"height":"width";switch(_e){case ii:Ut[tn]=Ut[tn]-(N[un]/2-f[un]/2);break;case yi:Ut[tn]=Ut[tn]+(N[un]/2-f[un]/2)}}return Ut}function Ei(m){return Object.assign({},{top:0,right:0,bottom:0,left:0},m)}function Yi(m,N){return N.reduce(function(f,_){return f[_]=m,f},{})}function ns(m,N){void 0===N&&(N={});var _=N.placement,w=void 0===_?m.placement:_,_e=N.strategy,Ue=void 0===_e?m.strategy:_e,Tt=N.boundary,Ut=void 0===Tt?"clippingParents":Tt,tn=N.rootBoundary,un=void 0===tn?Yn:tn,Jn=N.elementContext,si=void 0===Jn?cr:Jn,ui=N.altBoundary,es=void 0!==ui&&ui,Mr=N.padding,ds=void 0===Mr?0:Mr,ss=Ei("number"!=typeof ds?ds:Yi(ds,Rr)),wo=m.rects.popper,Wr=m.elements[es?si===cr?"reference":cr:si],Es=function en(m,N,f,_){var w="clippingParents"===N?function pt(m){var N=As(ir(m)),_=["absolute","fixed"].indexOf(us(m).position)>=0&&zi(m)?Qe(m):m;return kn(_)?N.filter(function(w){return kn(w)&&L(w,_)&&"body"!==hs(w)}):[]}(m):[].concat(N),_e=[].concat(w,[f]),Tt=_e.reduce(function(Ut,tn){var un=Ze(m,tn,_);return Ut.top=Nr(un.top,Ut.top),Ut.right=$n(un.right,Ut.right),Ut.bottom=$n(un.bottom,Ut.bottom),Ut.left=Nr(un.left,Ut.left),Ut},Ze(m,_e[0],_));return Tt.width=Tt.right-Tt.left,Tt.height=Tt.bottom-Tt.top,Tt.x=Tt.left,Tt.y=Tt.top,Tt}(kn(Wr)?Wr:Wr.contextElement||gi(m.elements.popper),Ut,un,Ue),io=zn(m.elements.reference),Ao=ai({reference:io,element:wo,strategy:"absolute",placement:w}),Io=$(Object.assign({},wo,Ao)),Na=si===cr?Io:io,la={top:Es.top-Na.top+ss.top,bottom:Na.bottom-Es.bottom+ss.bottom,left:Es.left-Na.left+ss.left,right:Na.right-Es.right+ss.right},yl=m.modifiersData.offset;if(si===cr&&yl){var Ec=yl[w];Object.keys(la).forEach(function(Pa){var Kc=[Un,Dn].indexOf(Pa)>=0?1:-1,Qc=[Hn,Dn].indexOf(Pa)>=0?"y":"x";la[Pa]+=Ec[Qc]*Kc})}return la}const Tr={name:"flip",enabled:!0,phase:"main",fn:function Pr(m){var N=m.state,f=m.options,_=m.name;if(!N.modifiersData[_]._skip){for(var w=f.mainAxis,_e=void 0===w||w,Ue=f.altAxis,Tt=void 0===Ue||Ue,Ut=f.fallbackPlacements,tn=f.padding,un=f.boundary,Jn=f.rootBoundary,si=f.altBoundary,ui=f.flipVariations,es=void 0===ui||ui,Mr=f.allowedAutoPlacements,ds=N.options.placement,ss=Xn(ds),wo=Ut||(ss!==ds&&es?function fs(m){if(Xn(m)===Qi)return[];var N=Fn(m);return[Hr(m),N,Hr(N)]}(ds):[Fn(ds)]),Wr=[ds].concat(wo).reduce(function(qc,uc){return qc.concat(Xn(uc)===Qi?function Ls(m,N){void 0===N&&(N={});var w=N.boundary,_e=N.rootBoundary,Ue=N.padding,Tt=N.flipVariations,Ut=N.allowedAutoPlacements,tn=void 0===Ut?Ir:Ut,un=pn(N.placement),Jn=un?Tt?Si:Si.filter(function(es){return pn(es)===un}):Rr,si=Jn.filter(function(es){return tn.indexOf(es)>=0});0===si.length&&(si=Jn);var ui=si.reduce(function(es,Mr){return es[Mr]=ns(m,{placement:Mr,boundary:w,rootBoundary:_e,padding:Ue})[Xn(Mr)],es},{});return Object.keys(ui).sort(function(es,Mr){return ui[es]-ui[Mr]})}(N,{placement:uc,boundary:un,rootBoundary:Jn,padding:tn,flipVariations:es,allowedAutoPlacements:Mr}):uc)},[]),Es=N.rects.reference,io=N.rects.popper,Ao=new Map,Io=!0,Na=Wr[0],la=0;la<Wr.length;la++){var yl=Wr[la],Ec=Xn(yl),Pa=pn(yl)===ii,Kc=[Hn,Dn].indexOf(Ec)>=0,Qc=Kc?"width":"height",bl=ns(N,{placement:yl,boundary:un,rootBoundary:Jn,altBoundary:si,padding:tn}),sl=Kc?Pa?Un:Pi:Pa?Dn:Hn;Es[Qc]>io[Qc]&&(sl=Fn(sl));var id=Fn(sl),Yc=[];if(_e&&Yc.push(bl[Ec]<=0),Tt&&Yc.push(bl[sl]<=0,bl[id]<=0),Yc.every(function(qc){return qc})){Na=yl,Io=!1;break}Ao.set(yl,Yc)}if(Io)for(var rd=function(uc){var Od=Wr.find(function(wu){var dc=Ao.get(wu);if(dc)return dc.slice(0,uc).every(function(Dh){return Dh})});if(Od)return Na=Od,"break"},Sc=es?3:1;Sc>0&&"break"!==rd(Sc);Sc--);N.placement!==Na&&(N.modifiersData[_]._skip=!0,N.placement=Na,N.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function eo(m,N,f){return Nr(m,$n(N,f))}function ro(m){var N=zn(m),f=m.offsetWidth,_=m.offsetHeight;return Math.abs(N.width-f)<=1&&(f=N.width),Math.abs(N.height-_)<=1&&(_=N.height),{x:m.offsetLeft,y:m.offsetTop,width:f,height:_}}const ea={name:"preventOverflow",enabled:!0,phase:"main",fn:function Vo(m){var N=m.state,f=m.options,_=m.name,w=f.mainAxis,_e=void 0===w||w,Ue=f.altAxis,Tt=void 0!==Ue&&Ue,si=f.tether,ui=void 0===si||si,es=f.tetherOffset,Mr=void 0===es?0:es,ds=ns(N,{boundary:f.boundary,rootBoundary:f.rootBoundary,padding:f.padding,altBoundary:f.altBoundary}),ss=Xn(N.placement),xs=pn(N.placement),wo=!xs,Wr=Vn(ss),Es=function Is(m){return"x"===m?"y":"x"}(Wr),io=N.modifiersData.popperOffsets,Ao=N.rects.reference,Io=N.rects.popper,Na="function"==typeof Mr?Mr(Object.assign({},N.rects,{placement:N.placement})):Mr,la="number"==typeof Na?{mainAxis:Na,altAxis:Na}:Object.assign({mainAxis:0,altAxis:0},Na),yl=N.modifiersData.offset?N.modifiersData.offset[N.placement]:null,Ec={x:0,y:0};if(io){if(_e){var Pa,Kc="y"===Wr?Hn:Pi,Qc="y"===Wr?Dn:Un,bl="y"===Wr?"height":"width",sl=io[Wr],id=sl+ds[Kc],Yc=sl-ds[Qc],mu=ui?-Io[bl]/2:0,rd=xs===ii?Ao[bl]:Io[bl],Sc=xs===ii?-Io[bl]:-Ao[bl],Cu=N.elements.arrow,qc=ui&&Cu?ro(Cu):{width:0,height:0},uc=N.modifiersData["arrow#persistent"]?N.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Od=uc[Kc],wu=uc[Qc],dc=eo(0,Ao[bl],qc[bl]),Dh=wo?Ao[bl]/2-mu-dc-Od-la.mainAxis:rd-dc-Od-la.mainAxis,Rf=wo?-Ao[bl]/2+mu+dc+wu+la.mainAxis:Sc+dc+wu+la.mainAxis,Ah=N.elements.arrow&&Qe(N.elements.arrow),Wp=Ah?"y"===Wr?Ah.clientTop||0:Ah.clientLeft||0:0,Zc=null!=(Pa=yl?.[Wr])?Pa:0,Oa=sl+Rf-Zc,Fd=eo(ui?$n(id,sl+Dh-Zc-Wp):id,sl,ui?Nr(Yc,Oa):Yc);io[Wr]=Fd,Ec[Wr]=Fd-sl}if(Tt){var sd,Tu=io[Es],Pf="y"===Es?"height":"width",Om=Tu+ds["x"===Wr?Hn:Pi],od=Tu-ds["x"===Wr?Dn:Un],Of=-1!==[Hn,Pi].indexOf(ss),Ld=null!=(sd=yl?.[Es])?sd:0,Ih=Of?Om:Tu-Ao[Pf]-Io[Pf]-Ld+la.altAxis,jp=Of?Tu+Ao[Pf]+Io[Pf]-Ld-la.altAxis:od,Ff=ui&&Of?function ws(m,N,f){var _=eo(m,N,f);return _>f?f:_}(Ih,Tu,jp):eo(ui?Ih:Om,Tu,ui?jp:od);io[Es]=Ff,Ec[Es]=Ff-Tu}N.modifiersData[_]=Ec}},requiresIfExists:["offset"]},To={name:"arrow",enabled:!0,phase:"main",fn:function vr(m){var N,f=m.state,_=m.name,w=m.options,_e=f.elements.arrow,Ue=f.modifiersData.popperOffsets,Tt=Xn(f.placement),Ut=Vn(Tt),un=[Pi,Un].indexOf(Tt)>=0?"height":"width";if(_e&&Ue){var Jn=function(N,f){return Ei("number"!=typeof(N="function"==typeof N?N(Object.assign({},f.rects,{placement:f.placement})):N)?N:Yi(N,Rr))}(w.padding,f),si=ro(_e),ui="y"===Ut?Hn:Pi,es="y"===Ut?Dn:Un,Mr=f.rects.reference[un]+f.rects.reference[Ut]-Ue[Ut]-f.rects.popper[un],ds=Ue[Ut]-f.rects.reference[Ut],ss=Qe(_e),xs=ss?"y"===Ut?ss.clientHeight||0:ss.clientWidth||0:0,io=xs/2-si[un]/2+(Mr/2-ds/2),Ao=eo(Jn[ui],io,xs-si[un]-Jn[es]);f.modifiersData[_]=((N={})[Ut]=Ao,N.centerOffset=Ao-io,N)}},effect:function Cl(m){var N=m.state,_=m.options.element,w=void 0===_?"[data-popper-arrow]":_;null!=w&&("string"==typeof w&&!(w=N.elements.popper.querySelector(w))||L(N.elements.popper,w)&&(N.elements.arrow=w))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ja(m,N,f){void 0===f&&(f=!1);var _=zi(N),w=zi(N)&&function Ss(m){var N=m.getBoundingClientRect(),f=hr(N.width)/m.offsetWidth||1,_=hr(N.height)/m.offsetHeight||1;return 1!==f||1!==_}(N),_e=gi(N),Ue=zn(m,w,f),Tt={scrollLeft:0,scrollTop:0},Ut={x:0,y:0};return(_||!_&&!f)&&(("body"!==hs(N)||Ks(_e))&&(Tt=function Zl(m){return m!==vn(m)&&zi(m)?function so(m){return{scrollLeft:m.scrollLeft,scrollTop:m.scrollTop}}(m):Kn(m)}(N)),zi(N)?((Ut=zn(N,!0)).x+=N.clientLeft,Ut.y+=N.clientTop):_e&&(Ut.x=xi(_e))),{x:Ue.left+Tt.scrollLeft-Ut.x,y:Ue.top+Tt.scrollTop-Ut.y,width:Ue.width,height:Ue.height}}function _r(m){var N=new Map,f=new Set,_=[];function w(_e){f.add(_e.name),[].concat(_e.requires||[],_e.requiresIfExists||[]).forEach(function(Tt){if(!f.has(Tt)){var Ut=N.get(Tt);Ut&&w(Ut)}}),_.push(_e)}return m.forEach(function(_e){N.set(_e.name,_e)}),m.forEach(function(_e){f.has(_e.name)||w(_e)}),_}function ma(m){var N;return function(){return N||(N=new Promise(function(f){Promise.resolve().then(function(){N=void 0,f(m())})})),N}}var Qo={placement:"bottom",modifiers:[],strategy:"absolute"};function Ba(){for(var m=arguments.length,N=new Array(m),f=0;f<m;f++)N[f]=arguments[f];return!N.some(function(_){return!(_&&"function"==typeof _.getBoundingClientRect)})}function ga(m){void 0===m&&(m={});var f=m.defaultModifiers,_=void 0===f?[]:f,w=m.defaultOptions,_e=void 0===w?Qo:w;return function(Tt,Ut,tn){void 0===tn&&(tn=_e);var un={placement:"bottom",orderedModifiers:[],options:Object.assign({},Qo,_e),modifiersData:{},elements:{reference:Tt,popper:Ut},attributes:{},styles:{}},Jn=[],si=!1,ui={state:un,setOptions:function(ss){var xs="function"==typeof ss?ss(un.options):ss;Mr(),un.options=Object.assign({},_e,un.options,xs),un.scrollParents={reference:kn(Tt)?As(Tt):Tt.contextElement?As(Tt.contextElement):[],popper:As(Ut)};var wo=function ka(m){var N=_r(m);return fn.reduce(function(f,_){return f.concat(N.filter(function(w){return w.phase===_}))},[])}(function yo(m){var N=m.reduce(function(f,_){var w=f[_.name];return f[_.name]=w?Object.assign({},w,_,{options:Object.assign({},w.options,_.options),data:Object.assign({},w.data,_.data)}):_,f},{});return Object.keys(N).map(function(f){return N[f]})}([].concat(_,un.options.modifiers)));return un.orderedModifiers=wo.filter(function(Wr){return Wr.enabled}),function es(){un.orderedModifiers.forEach(function(ds){var xs=ds.options,Wr=ds.effect;if("function"==typeof Wr){var Es=Wr({state:un,name:ds.name,instance:ui,options:void 0===xs?{}:xs});Jn.push(Es||function(){})}})}(),ui.update()},forceUpdate:function(){if(!si){var ss=un.elements,xs=ss.reference,wo=ss.popper;if(Ba(xs,wo)){un.rects={reference:ja(xs,Qe(wo),"fixed"===un.options.strategy),popper:ro(wo)},un.reset=!1,un.placement=un.options.placement,un.orderedModifiers.forEach(function(la){return un.modifiersData[la.name]=Object.assign({},la.data)});for(var Wr=0;Wr<un.orderedModifiers.length;Wr++)if(!0!==un.reset){var Es=un.orderedModifiers[Wr],io=Es.fn,Ao=Es.options;"function"==typeof io&&(un=io({state:un,options:void 0===Ao?{}:Ao,name:Es.name,instance:ui})||un)}else un.reset=!1,Wr=-1}}},update:ma(function(){return new Promise(function(ds){ui.forceUpdate(),ds(un)})}),destroy:function(){Mr(),si=!0}};if(!Ba(Tt,Ut))return ui;function Mr(){Jn.forEach(function(ds){return ds()}),Jn=[]}return ui.setOptions(tn).then(function(ds){!si&&tn.onFirstUpdate&&tn.onFirstUpdate(ds)}),ui}}var oo={passive:!0},va={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Va(m){var N,f=m.popper,_=m.popperRect,w=m.placement,_e=m.variation,Ue=m.offsets,Tt=m.position,Ut=m.gpuAcceleration,tn=m.adaptive,un=m.roundOffsets,Jn=m.isFixed,si=Ue.x,ui=void 0===si?0:si,es=Ue.y,Mr=void 0===es?0:es,ds="function"==typeof un?un({x:ui,y:Mr}):{x:ui,y:Mr};ui=ds.x,Mr=ds.y;var ss=Ue.hasOwnProperty("x"),xs=Ue.hasOwnProperty("y"),wo=Pi,Wr=Hn,Es=window;if(tn){var io=Qe(f),Ao="clientHeight",Io="clientWidth";io===vn(f)&&"static"!==us(io=gi(f)).position&&"absolute"===Tt&&(Ao="scrollHeight",Io="scrollWidth"),(w===Hn||(w===Pi||w===Un)&&_e===yi)&&(Wr=Dn,Mr-=(Jn&&io===Es&&Es.visualViewport?Es.visualViewport.height:io[Ao])-_.height,Mr*=Ut?1:-1),w!==Pi&&(w!==Hn&&w!==Dn||_e!==yi)||(wo=Un,ui-=(Jn&&io===Es&&Es.visualViewport?Es.visualViewport.width:io[Io])-_.width,ui*=Ut?1:-1)}var Pa,yl=Object.assign({position:Tt},tn&&va),Ec=!0===un?function No(m,N){var _=m.y,w=N.devicePixelRatio||1;return{x:hr(m.x*w)/w||0,y:hr(_*w)/w||0}}({x:ui,y:Mr},vn(f)):{x:ui,y:Mr};return ui=Ec.x,Mr=Ec.y,Object.assign({},yl,Ut?((Pa={})[Wr]=xs?"0":"",Pa[wo]=ss?"0":"",Pa.transform=(Es.devicePixelRatio||1)<=1?"translate("+ui+"px, "+Mr+"px)":"translate3d("+ui+"px, "+Mr+"px, 0)",Pa):((N={})[Wr]=xs?Mr+"px":"",N[wo]=ss?ui+"px":"",N.transform="",N))}var _a=ga({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Ro(m){var N=m.state,f=m.instance,_=m.options,w=_.scroll,_e=void 0===w||w,Ue=_.resize,Tt=void 0===Ue||Ue,Ut=vn(N.elements.popper),tn=[].concat(N.scrollParents.reference,N.scrollParents.popper);return _e&&tn.forEach(function(un){un.addEventListener("scroll",f.update,oo)}),Tt&&Ut.addEventListener("resize",f.update,oo),function(){_e&&tn.forEach(function(un){un.removeEventListener("scroll",f.update,oo)}),Tt&&Ut.removeEventListener("resize",f.update,oo)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function Ua(m){var N=m.state;N.modifiersData[m.name]=ai({reference:N.rects.reference,element:N.rects.popper,strategy:"absolute",placement:N.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function ta(m){var N=m.state,f=m.options,_=f.gpuAcceleration,w=void 0===_||_,_e=f.adaptive,Ue=void 0===_e||_e,Tt=f.roundOffsets,Ut=void 0===Tt||Tt,tn={placement:Xn(N.placement),variation:pn(N.placement),popper:N.elements.popper,popperRect:N.rects.popper,gpuAcceleration:w,isFixed:"fixed"===N.options.strategy};null!=N.modifiersData.popperOffsets&&(N.styles.popper=Object.assign({},N.styles.popper,Va(Object.assign({},tn,{offsets:N.modifiersData.popperOffsets,position:N.options.strategy,adaptive:Ue,roundOffsets:Ut})))),null!=N.modifiersData.arrow&&(N.styles.arrow=Object.assign({},N.styles.arrow,Va(Object.assign({},tn,{offsets:N.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Ut})))),N.attributes.popper=Object.assign({},N.attributes.popper,{"data-popper-placement":N.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function ao(m){var N=m.state;Object.keys(N.elements).forEach(function(f){var _=N.styles[f]||{},w=N.attributes[f]||{},_e=N.elements[f];!zi(_e)||!hs(_e)||(Object.assign(_e.style,_),Object.keys(w).forEach(function(Ue){var Tt=w[Ue];!1===Tt?_e.removeAttribute(Ue):_e.setAttribute(Ue,!0===Tt?"":Tt)}))})},effect:function Yo(m){var N=m.state,f={popper:{position:N.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(N.elements.popper.style,f.popper),N.styles=f,N.elements.arrow&&Object.assign(N.elements.arrow.style,f.arrow),function(){Object.keys(N.elements).forEach(function(_){var w=N.elements[_],_e=N.attributes[_]||{},Tt=Object.keys(N.styles.hasOwnProperty(_)?N.styles[_]:f[_]).reduce(function(Ut,tn){return Ut[tn]="",Ut},{});!zi(w)||!hs(w)||(Object.assign(w.style,Tt),Object.keys(_e).forEach(function(Ut){w.removeAttribute(Ut)}))})}},requires:["computeStyles"]}]});const Ha={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function na(m){var N=m.state,_=m.name,w=m.options.offset,_e=void 0===w?[0,0]:w,Ue=Ir.reduce(function(un,Jn){return un[Jn]=function ua(m,N,f){var _=Xn(m),w=[Pi,Hn].indexOf(_)>=0?-1:1,_e="function"==typeof f?f(Object.assign({},N,{placement:m})):f,Ue=_e[0],Tt=_e[1];return Ue=Ue||0,Tt=(Tt||0)*w,[Pi,Un].indexOf(_)>=0?{x:Tt,y:Ue}:{x:Ue,y:Tt}}(Jn,N.rects,_e),un},{}),Tt=Ue[N.placement],tn=Tt.y;null!=N.modifiersData.popperOffsets&&(N.modifiersData.popperOffsets.x+=Tt.x,N.modifiersData.popperOffsets.y+=tn),N.modifiersData[_]=Ue}},cl=["*"],Ys=m=>({$implicit:m}),ie=["dialog"],We=["ngbNavOutlet",""];function wt(m,N){}function wi(m,N){if(1&m&&(l.j41(0,"div",0),l.DNE(1,wt,0,0,"ng-template",1),l.k0s()),2&m){const f=l.XpG().$implicit,_=l.XpG();l.Y8G("item",f)("nav",_.nav)("role",_.paneRole),l.R7$(),l.Y8G("ngTemplateOutlet",(null==f.contentTpl?null:f.contentTpl.templateRef)||null)("ngTemplateOutletContext",l.eq3(5,Ys,f.active||_.isPanelTransitioning(f)))}}function Dr(m,N){if(1&m&&l.DNE(0,wi,2,7,"div",0),2&m){const f=N.$implicit,_=l.XpG();l.vxM(0,f.isPanelInDom()||_.isPanelTransitioning(f)?0:-1)}}const F={animation:!0,transitionTimerDelayMs:5};let re=(()=>{class m{constructor(){this.animation=F.animation}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})();function Yt(m){return"string"==typeof m}function Se(m){return null!=m}function ee(m){return m&&m.then}function Wt(m){return(m||document.body).getBoundingClientRect()}const ps=()=>{},{transitionTimerDelayMs:ji}=F,wr=new Map,vi=(m,N,f,_)=>{let w=_.context||{};const _e=wr.get(N);if(_e)switch(_.runningTransition){case"continue":return ge.w;case"stop":m.run(()=>_e.transition$.complete()),w=Object.assign(_e.context,w),wr.delete(N)}const Ue=f(N,_.animation,w)||ps;if(!_.animation||"none"===window.getComputedStyle(N).transitionProperty)return m.run(()=>Ue()),(0,W.of)(void 0).pipe(function Wn(m){return N=>new h.c(f=>N.subscribe({next:Ue=>m.run(()=>f.next(Ue)),error:Ue=>m.run(()=>f.error(Ue)),complete:()=>m.run(()=>f.complete())}))}(m));const Tt=new X.B,Ut=new X.B,tn=Tt.pipe(function ve(...m){return N=>(0,te.x)(N,(0,W.of)(...m))}(!0));wr.set(N,{transition$:Tt,complete:()=>{Ut.next(),Ut.complete()},context:w});const un=function et(m){const{transitionDelay:N,transitionDuration:f}=window.getComputedStyle(m);return 1e3*(parseFloat(N)+parseFloat(f))}(N);return m.runOutsideAngular(()=>{const Jn=he(N,"transitionend").pipe((0,Ce.Q)(tn),(0,Be.p)(({target:ui})=>ui===N));yt((0,ze.O)(un+ji).pipe((0,Ce.Q)(tn)),Jn,Ut).pipe((0,Ce.Q)(tn)).subscribe(()=>{wr.delete(N),m.run(()=>{Ue(),Tt.next(),Tt.complete()})})}),Tt.asObservable()},Sn=(m,N,f)=>{let{direction:_,maxSize:w,dimension:_e}=f;const{classList:Ue}=m;function Tt(){Ue.add("collapse"),"show"===_?Ue.add("show"):Ue.remove("show")}if(N)return w||(w=function kr(m,N){if(typeof navigator>"u")return"0px";const{classList:f}=m,_=f.contains("show");_||f.add("show"),m.style[N]="";const w=m.getBoundingClientRect()[N]+"px";return _||f.remove("show"),w}(m,_e),f.maxSize=w,m.style[_e]="show"!==_?w:"0px",Ue.remove("collapse"),Ue.remove("collapsing"),Ue.remove("show"),Wt(m),Ue.add("collapsing")),m.style[_e]="show"===_?w:"0px",()=>{Tt(),Ue.remove("collapsing"),m.style[_e]=""};Tt()};let ti=(()=>{class m{constructor(){this._ngbConfig=(0,l.WQX)(re),this.horizontal=!1}get animation(){return this._animation??this._ngbConfig.animation}set animation(f){this._animation=f}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),Or=(()=>{class m{constructor(){this._config=(0,l.WQX)(ti),this._element=(0,l.WQX)(l.aKT),this._zone=(0,l.WQX)(l.SKi),this.animation=this._config.animation,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new l.bkB,this.horizontal=this._config.horizontal,this.shown=new l.bkB,this.hidden=new l.bkB}set collapsed(f){this._isCollapsed!==f&&(this._isCollapsed=f,this._afterInit&&this._runTransitionWithEvents(f,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(f=this._isCollapsed){this.collapsed=!f,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(f,_){return vi(this._zone,this._element.nativeElement,Sn,{animation:_,runningTransition:"stop",context:{direction:f?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(f,_){this._runTransition(f,_).subscribe(()=>{f?this.hidden.emit():this.shown.emit()})}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(_,w){2&_&&l.AVh("collapse-horizontal",w.horizontal)},inputs:{animation:"animation",collapsed:[l.Mj6.None,"ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0})}}return m})(),sa=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),po=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),to=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Sa=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})();var Pn=function(m){return m[m.Tab=9]="Tab",m[m.Enter=13]="Enter",m[m.Escape=27]="Escape",m[m.Space=32]="Space",m[m.PageUp=33]="PageUp",m[m.PageDown=34]="PageDown",m[m.End=35]="End",m[m.Home=36]="Home",m[m.ArrowLeft=37]="ArrowLeft",m[m.ArrowUp=38]="ArrowUp",m[m.ArrowRight=39]="ArrowRight",m[m.ArrowDown=40]="ArrowDown",m}(Pn||{});const Ol=(m,N)=>!!N&&N.some(f=>f.contains(m)),oh=(m,N)=>!N||null!=function Ht(m,N){return!N||typeof m.closest>"u"?null:m.closest(N)}(m,N),ah=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function lh(m,N,f,_,w,_e,Ue,Tt){f&&m.runOutsideAngular((m=>ah?()=>setTimeout(()=>m(),100):m)(()=>{const tn=he(N,"keydown").pipe((0,Ce.Q)(w),(0,Be.p)(si=>si.which===Pn.Escape),(0,z.M)(si=>si.preventDefault())),un=he(N,"mousedown").pipe((0,Fe.T)(si=>{const ui=si.target;return 2!==si.button&&!Ol(ui,Ue)&&("inside"===f?Ol(ui,_e)&&oh(ui,Tt):"outside"===f?!Ol(ui,_e):oh(ui,Tt)||!Ol(ui,_e))}),(0,Ce.Q)(w)),Jn=he(N,"mouseup").pipe(vt(un),(0,Be.p)(([si,ui])=>ui),function kt(m,N=st.E){const f=(0,ze.O)(m,N);return Xe(()=>f)}(0),(0,Ce.Q)(w));yt([tn.pipe((0,Fe.T)(si=>0)),Jn.pipe((0,Fe.T)(si=>1))]).subscribe(si=>m.run(()=>_(si)))}))}const _c=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Gu(m){const N=Array.from(m.querySelectorAll(_c)).filter(f=>-1!==f.tabIndex);return[N[0],N[N.length-1]]}const Ll=(m,N,f,_=!1)=>{m.runOutsideAngular(()=>{const w=he(N,"focusin").pipe((0,Ce.Q)(f),(0,Fe.T)(_e=>_e.target));he(N,"keydown").pipe((0,Ce.Q)(f),(0,Be.p)(_e=>_e.which===Pn.Tab),vt(w)).subscribe(([_e,Ue])=>{const[Tt,Ut]=Gu(N);(Ue===Tt||Ue===N)&&_e.shiftKey&&(Ut.focus(),_e.preventDefault()),Ue===Ut&&!_e.shiftKey&&(Tt.focus(),_e.preventDefault())}),_&&he(N,"click").pipe((0,Ce.Q)(f),vt(w),(0,Fe.T)(_e=>_e[1])).subscribe(_e=>_e.focus())})};let Oi=(()=>{class m{constructor(){this._element=(0,l.WQX)(Ot.qQ).documentElement}isRTL(){return"rtl"===(this._element.getAttribute("dir")||"").toLowerCase()}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})();const qa=/\s+/,mp=/  +/gi,il={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]},Ps=/^left/,af=/^right/,$a=/^start/,Ia=/^end/;function Oo({placement:m,baseClass:N},f){let _=Array.isArray(m)?m:m.split(qa),_e=_.findIndex(tn=>"auto"===tn);_e>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(tn){null==_.find(un=>-1!==un.search("^"+tn))&&_.splice(_e++,1,tn)});const Ue=_.map(tn=>function Wu(m,N){const[f,_]=il[m];return N&&_||f}(tn,f.isRTL()));return{placement:Ue.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!N,phase:"write",fn({state:tn}){const un=new RegExp(N+"(-[a-z]+)*","gi"),Jn=tn.elements.popper,si=tn.placement;let ui=Jn.className;ui=ui.replace(un,""),ui+=` ${function hv(m,N){let[f,_]=N.split("-");const w=f.replace(Ps,"start").replace(af,"end");let _e=[w];if(_){let Ue=_;("left"===f||"right"===f)&&(Ue=Ue.replace($a,"top").replace(Ia,"bottom")),_e.push(`${w}-${Ue}`)}return m&&(_e=_e.map(Ue=>`${m}-${Ue}`)),_e.join(" ")}(N,si)}`,ui=ui.trim().replace(mp," "),Jn.className=ui}},Tr,ea,To,{enabled:!0,name:"flip",options:{fallbackPlacements:Ue}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function Pc(m){return m}new Date(1882,10,12),new Date(2174,10,25);let Ep=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Rd=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Cv=(()=>{class m{constructor(){this._ngbConfig=(0,l.WQX)(re),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(f){this._animation=f}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})();class lc{constructor(N,f,_){this.nodes=N,this.viewRef=f,this.componentRef=_}}class Cp{constructor(N){this._componentType=N,this._windowRef=null,this._contentRef=null,this._document=(0,l.WQX)(Ot.qQ),this._applicationRef=(0,l.WQX)(l.o8S),this._injector=(0,l.WQX)(l.zZn),this._viewContainerRef=(0,l.WQX)(l.c1b),this._ngZone=(0,l.WQX)(l.SKi)}open(N,f,_=!1){this._windowRef||(this._contentRef=this._getContentRef(N,f),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:w}=this._windowRef.location,_e=this._ngZone.onStable.pipe((0,Ne.s)(1),(0,H.Z)(()=>vi(this._ngZone,w,({classList:Ue})=>Ue.add("show"),{animation:_,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:_e}}close(N=!1){return this._windowRef?vi(this._ngZone,this._windowRef.location.nativeElement,({classList:f})=>f.remove("show"),{animation:N,runningTransition:"stop"}).pipe((0,z.M)(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):(0,W.of)(void 0)}_getContentRef(N,f){if(N){if(N instanceof l.C4Q){const _=N.createEmbeddedView(f);return this._applicationRef.attachView(_),new lc([_.rootNodes],_)}return new lc([[this._document.createTextNode(`${N}`)]])}return new lc([])}}let wp=(()=>{class m{constructor(){this._document=(0,l.WQX)(Ot.qQ)}hide(){const f=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),_=this._document.body,w=_.style,{overflow:_e,paddingRight:Ue}=w;if(f>0){const Tt=parseFloat(window.getComputedStyle(_).paddingRight);w.paddingRight=`${Tt+f}px`}return w.overflow="hidden",()=>{f>0&&(w.paddingRight=Ue),w.overflow=_e}}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),kc=(()=>{class m{constructor(){this._nativeElement=(0,l.WQX)(l.aKT).nativeElement,this._zone=(0,l.WQX)(l.SKi)}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Ne.s)(1)).subscribe(()=>{vi(this._zone,this._nativeElement,(f,_)=>{_&&Wt(f),f.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return vi(this._zone,this._nativeElement,({classList:f})=>f.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275cmp=l.VBU({type:m,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(_,w){2&_&&(l.HbH("modal-backdrop"+(w.backdropClass?" "+w.backdropClass:"")),l.AVh("show",!w.animation)("fade",w.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[l.aNF],decls:0,vars:0,template:function(_,w){},encapsulation:2})}}return m})();class vf{update(N){}close(N){}dismiss(N){}}const yh=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],_f=["animation","backdropClass"];class Tp{_applyWindowOptions(N,f){yh.forEach(_=>{Se(f[_])&&(N[_]=f[_])})}_applyBackdropOptions(N,f){_f.forEach(_=>{Se(f[_])&&(N[_]=f[_])})}update(N){this._applyWindowOptions(this._windowCmptRef.instance,N),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,N)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,Ce.Q)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,Ce.Q)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(N,f,_,w){this._windowCmptRef=N,this._contentRef=f,this._backdropCmptRef=_,this._beforeDismiss=w,this._closed=new X.B,this._dismissed=new X.B,this._hidden=new X.B,N.instance.dismissEvent.subscribe(_e=>{this.dismiss(_e)}),this.result=new Promise((_e,Ue)=>{this._resolve=_e,this._reject=Ue}),this.result.then(null,()=>{})}close(N){this._windowCmptRef&&(this._closed.next(N),this._resolve(N),this._removeModalElements())}_dismiss(N){this._dismissed.next(N),this._reject(N),this._removeModalElements()}dismiss(N){if(this._windowCmptRef)if(this._beforeDismiss){const f=this._beforeDismiss();ee(f)?f.then(_=>{!1!==_&&this._dismiss(N)},()=>{}):!1!==f&&this._dismiss(N)}else this._dismiss(N)}_removeModalElements(){const N=this._windowCmptRef.instance.hide(),f=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,W.of)(void 0);N.subscribe(()=>{const{nativeElement:_}=this._windowCmptRef.location;_.parentNode.removeChild(_),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),f.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:_}=this._backdropCmptRef.location;_.parentNode.removeChild(_),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),K(N,f).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var qu=function(m){return m[m.BACKDROP_CLICK=0]="BACKDROP_CLICK",m[m.ESC=1]="ESC",m}(qu||{});let yf=(()=>{class m{constructor(){this._document=(0,l.WQX)(Ot.qQ),this._elRef=(0,l.WQX)(l.aKT),this._zone=(0,l.WQX)(l.SKi),this._closed$=new X.B,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new l.bkB,this.shown=new X.B,this.hidden=new X.B}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Yt(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(f){this.dismissEvent.emit(f)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Ne.s)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:f}=this._elRef,_={animation:this.animation,runningTransition:"stop"},Ue=K(vi(this._zone,f,()=>f.classList.remove("show"),_),vi(this._zone,this._dialogEl.nativeElement,()=>{},_));return Ue.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),Ue}_show(){const f={animation:this.animation,runningTransition:"continue"};K(vi(this._zone,this._elRef.nativeElement,(_e,Ue)=>{Ue&&Wt(_e),_e.classList.add("show")},f),vi(this._zone,this._dialogEl.nativeElement,()=>{},f)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:f}=this._elRef;this._zone.runOutsideAngular(()=>{he(f,"keydown").pipe((0,Ce.Q)(this._closed$),(0,Be.p)(w=>w.which===Pn.Escape)).subscribe(w=>{this.keyboard?requestAnimationFrame(()=>{w.defaultPrevented||this._zone.run(()=>this.dismiss(qu.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let _=!1;he(this._dialogEl.nativeElement,"mousedown").pipe((0,Ce.Q)(this._closed$),(0,z.M)(()=>_=!1),(0,cn.n)(()=>he(f,"mouseup").pipe((0,Ce.Q)(this._closed$),(0,Ne.s)(1))),(0,Be.p)(({target:w})=>f===w)).subscribe(()=>{_=!0}),he(f,"click").pipe((0,Ce.Q)(this._closed$)).subscribe(({target:w})=>{f===w&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!_&&this._zone.run(()=>this.dismiss(qu.BACKDROP_CLICK))),_=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:f}=this._elRef;if(!f.contains(document.activeElement)){const _=f.querySelector("[ngbAutofocus]"),w=Gu(f)[0];(_||w||f).focus()}}_restoreFocus(){const f=this._document.body,_=this._elWithFocus;let w;w=_&&_.focus&&f.contains(_)?_:f,this._zone.runOutsideAngular(()=>{setTimeout(()=>w.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&vi(this._zone,this._elRef.nativeElement,({classList:f})=>(f.add("modal-static"),()=>f.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275cmp=l.VBU({type:m,selectors:[["ngb-modal-window"]],viewQuery:function(_,w){if(1&_&&l.GBs(ie,7),2&_){let _e;l.mGM(_e=l.lsd())&&(w._dialogEl=_e.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(_,w){2&_&&(l.BMQ("aria-modal",!0)("aria-labelledby",w.ariaLabelledBy)("aria-describedby",w.ariaDescribedBy),l.HbH("modal d-block"+(w.windowClass?" "+w.windowClass:"")),l.AVh("fade",w.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[l.aNF],ngContentSelectors:cl,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(_,w){1&_&&(l.NAR(),l.j41(0,"div",1,0)(2,"div",2),l.SdG(3),l.k0s()()),2&_&&l.HbH("modal-dialog"+(w.size?" modal-"+w.size:"")+(w.centered?" modal-dialog-centered":"")+w.fullscreenClass+(w.scrollable?" modal-dialog-scrollable":"")+(w.modalDialogClass?" "+w.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}}return m})(),vm=(()=>{class m{constructor(){this._applicationRef=(0,l.WQX)(l.o8S),this._injector=(0,l.WQX)(l.zZn),this._environmentInjector=(0,l.WQX)(l.uvJ),this._document=(0,l.WQX)(Ot.qQ),this._scrollBar=(0,l.WQX)(wp),this._activeWindowCmptHasChanged=new X.B,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new l.bkB;const f=(0,l.WQX)(l.SKi);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const _=this._windowCmpts[this._windowCmpts.length-1];Ll(f,_.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(_.location.nativeElement)}})}_restoreScrollBar(){const f=this._scrollBarRestoreFn;f&&(this._scrollBarRestoreFn=null,f())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(f,_,w){const _e=w.container instanceof HTMLElement?w.container:Se(w.container)?this._document.querySelector(w.container):this._document.body;if(!_e)throw new Error(`The specified modal container "${w.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const Ue=new vf,Tt=(f=w.injector||f).get(l.uvJ,null)||this._environmentInjector,Ut=this._getContentRef(f,Tt,_,Ue,w);let tn=!1!==w.backdrop?this._attachBackdrop(_e):void 0,un=this._attachWindowComponent(_e,Ut.nodes),Jn=new Tp(un,Ut,tn,w.beforeDismiss);return this._registerModalRef(Jn),this._registerWindowCmpt(un),Jn.hidden.pipe((0,Ne.s)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),Ue.close=si=>{Jn.close(si)},Ue.dismiss=si=>{Jn.dismiss(si)},Ue.update=si=>{Jn.update(si)},Jn.update(w),1===this._modalRefs.length&&this._document.body.classList.add("modal-open"),tn&&tn.instance&&tn.changeDetectorRef.detectChanges(),un.changeDetectorRef.detectChanges(),Jn}get activeInstances(){return this._activeInstances}dismissAll(f){this._modalRefs.forEach(_=>_.dismiss(f))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(f){let _=(0,l.a0P)(kc,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(_.hostView),f.appendChild(_.location.nativeElement),_}_attachWindowComponent(f,_){let w=(0,l.a0P)(yf,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:_});return this._applicationRef.attachView(w.hostView),f.appendChild(w.location.nativeElement),w}_getContentRef(f,_,w,_e,Ue){return w?w instanceof l.C4Q?this._createFromTemplateRef(w,_e):Yt(w)?this._createFromString(w):this._createFromComponent(f,_,w,_e,Ue):new lc([])}_createFromTemplateRef(f,_){const _e=f.createEmbeddedView({$implicit:_,close(Ue){_.close(Ue)},dismiss(Ue){_.dismiss(Ue)}});return this._applicationRef.attachView(_e),new lc([_e.rootNodes],_e)}_createFromString(f){const _=this._document.createTextNode(`${f}`);return new lc([[_]])}_createFromComponent(f,_,w,_e,Ue){const Tt=l.zZn.create({providers:[{provide:vf,useValue:_e}],parent:f}),Ut=(0,l.a0P)(w,{environmentInjector:_,elementInjector:Tt}),tn=Ut.location.nativeElement;return Ue.scrollable&&tn.classList.add("component-host-scrollable"),this._applicationRef.attachView(Ut.hostView),new lc([[tn]],Ut.hostView,Ut)}_setAriaHidden(f){const _=f.parentElement;_&&f!==this._document.body&&(Array.from(_.children).forEach(w=>{w!==f&&"SCRIPT"!==w.nodeName&&(this._ariaHiddenValues.set(w,w.getAttribute("aria-hidden")),w.setAttribute("aria-hidden","true"))}),this._setAriaHidden(_))}_revertAriaHidden(){this._ariaHiddenValues.forEach((f,_)=>{f?_.setAttribute("aria-hidden",f):_.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(f){const _=()=>{const w=this._modalRefs.indexOf(f);w>-1&&(this._modalRefs.splice(w,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(f),this._activeInstances.emit(this._modalRefs),f.result.then(_,_)}_registerWindowCmpt(f){this._windowCmpts.push(f),this._activeWindowCmptHasChanged.next(),f.onDestroy(()=>{const _=this._windowCmpts.indexOf(f);_>-1&&(this._windowCmpts.splice(_,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),bf=(()=>{class m{constructor(){this._injector=(0,l.WQX)(l.zZn),this._modalStack=(0,l.WQX)(vm),this._config=(0,l.WQX)(Cv)}open(f,_={}){const w={...this._config,animation:this._config.animation,..._};return this._modalStack.open(this._injector,f,w)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(f){this._modalStack.dismissAll(f)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),xf=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({providers:[bf]})}}return m})(),Dp=(()=>{class m{constructor(){this._ngbConfig=(0,l.WQX)(re),this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(f){this._animation=f}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})();const Ef=m=>Se(m)&&""!==m;let _m=0,Zu=(()=>{class m{constructor(){this.templateRef=(0,l.WQX)(l.C4Q)}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275dir=l.FsC({type:m,selectors:[["ng-template","ngbNavContent",""]],standalone:!0})}}return m})(),pu=(()=>{class m{constructor(f){this.role=f,this.nav=(0,l.WQX)(Ju)}static{this.\u0275fac=function(_){return new(_||m)(l.kS0("role"))}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbNavItem","",5,"ng-container"]],hostVars:1,hostBindings:function(_,w){2&_&&l.BMQ("role",w.role?w.role:w.nav.roles?"presentation":void 0)},standalone:!0})}}return m})(),bh=(()=>{class m{constructor(){this._nav=(0,l.WQX)(Ju),this._nativeElement=(0,l.WQX)(l.aKT).nativeElement,this.disabled=!1,this.shown=new l.bkB,this.hidden=new l.bkB}ngAfterContentChecked(){this.contentTpl=this.contentTpls.first}ngOnInit(){Se(this.domId)||(this.domId="ngb-nav-"+_m++)}get active(){return this._nav.activeId===this.id}get id(){return Ef(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(Se(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}isNgContainer(){return this._nativeElement.nodeType===Node.COMMENT_NODE}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbNavItem",""]],contentQueries:function(_,w,_e){if(1&_&&l.wni(_e,Zu,4),2&_){let Ue;l.mGM(Ue=l.lsd())&&(w.contentTpls=Ue)}},hostVars:2,hostBindings:function(_,w){2&_&&l.AVh("nav-item",!0)},inputs:{destroyOnHide:"destroyOnHide",disabled:"disabled",domId:"domId",_id:[l.Mj6.None,"ngbNavItem","_id"]},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbNavItem"],standalone:!0})}}return m})(),Ju=(()=>{class m{constructor(f){this.role=f,this._config=(0,l.WQX)(Dp),this._cd=(0,l.WQX)(l.gRc),this._document=(0,l.WQX)(Ot.qQ),this._nativeElement=(0,l.WQX)(l.aKT).nativeElement,this.destroyRef=(0,l.WQX)(l.abz),this._navigatingWithKeyboard=!1,this.activeIdChange=new l.bkB,this.animation=this._config.animation,this.destroyOnHide=this._config.destroyOnHide,this.orientation=this._config.orientation,this.roles=this._config.roles,this.keyboard=this._config.keyboard,this.shown=new l.bkB,this.hidden=new l.bkB,this.navItemChange$=new X.B,this.navChange=new l.bkB}click(f){f.disabled||this._updateActiveId(f.id)}onFocusout({relatedTarget:f}){this._nativeElement.contains(f)||(this._navigatingWithKeyboard=!1)}onKeyDown(f){if("tablist"!==this.roles||!this.keyboard)return;const _=f.which,w=this.links.filter(Tt=>!Tt.navItem.disabled),{length:_e}=w;let Ue=-1;if(w.forEach((Tt,Ut)=>{Tt.nativeElement===this._document.activeElement&&(Ue=Ut)}),_e){switch(_){case Pn.ArrowUp:case Pn.ArrowLeft:Ue=(Ue-1+_e)%_e;break;case Pn.ArrowRight:case Pn.ArrowDown:Ue=(Ue+1)%_e;break;case Pn.Home:Ue=0;break;case Pn.End:Ue=_e-1}"changeWithArrows"===this.keyboard&&this.select(w[Ue].navItem.id),w[Ue].nativeElement.focus(),this._navigatingWithKeyboard=!0,f.preventDefault()}}select(f){this._updateActiveId(f,!1)}ngAfterContentInit(){if(!Se(this.activeId)){const f=this.items.first?this.items.first.id:null;Ef(f)&&(this._updateActiveId(f,!1),this._cd.detectChanges())}this.items.changes.pipe((0,M.pQ)(this.destroyRef)).subscribe(()=>this._notifyItemChanged(this.activeId))}ngOnChanges({activeId:f}){f&&!f.firstChange&&this._notifyItemChanged(f.currentValue)}_updateActiveId(f,_=!0){if(this.activeId!==f){let w=!1;_&&this.navChange.emit({activeId:this.activeId,nextId:f,preventDefault:()=>{w=!0}}),w||(this.activeId=f,this.activeIdChange.emit(f),this._notifyItemChanged(f))}}_notifyItemChanged(f){this.navItemChange$.next(this._getItemById(f))}_getItemById(f){return this.items&&this.items.find(_=>_.id===f)||null}static{this.\u0275fac=function(_){return new(_||m)(l.kS0("role"))}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbNav",""]],contentQueries:function(_,w,_e){if(1&_&&(l.wni(_e,bh,4),l.wni(_e,ed,5)),2&_){let Ue;l.mGM(Ue=l.lsd())&&(w.items=Ue),l.mGM(Ue=l.lsd())&&(w.links=Ue)}},hostVars:6,hostBindings:function(_,w){1&_&&l.bIt("keydown.arrowLeft",function(Ue){return w.onKeyDown(Ue)})("keydown.arrowRight",function(Ue){return w.onKeyDown(Ue)})("keydown.arrowDown",function(Ue){return w.onKeyDown(Ue)})("keydown.arrowUp",function(Ue){return w.onKeyDown(Ue)})("keydown.Home",function(Ue){return w.onKeyDown(Ue)})("keydown.End",function(Ue){return w.onKeyDown(Ue)})("focusout",function(Ue){return w.onFocusout(Ue)}),2&_&&(l.BMQ("aria-orientation","vertical"===w.orientation&&"tablist"===w.roles?"vertical":void 0)("role",w.role?w.role:w.roles?"tablist":void 0),l.AVh("nav",!0)("flex-column","vertical"===w.orientation))},inputs:{activeId:"activeId",animation:"animation",destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard"},outputs:{activeIdChange:"activeIdChange",shown:"shown",hidden:"hidden",navChange:"navChange"},exportAs:["ngbNav"],standalone:!0,features:[l.OA$]})}}return m})(),ed=(()=>{class m{constructor(f){this.role=f,this.navItem=(0,l.WQX)(bh),this.nav=(0,l.WQX)(Ju),this.nativeElement=(0,l.WQX)(l.aKT).nativeElement}get tabindex(){return!1===this.nav.keyboard?this.navItem.disabled?-1:void 0:this.nav._navigatingWithKeyboard||this.navItem.disabled||!this.navItem.active?-1:void 0}static{this.\u0275fac=function(_){return new(_||m)(l.kS0("role"))}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbNavLink",""]],hostVars:14,hostBindings:function(_,w){2&_&&(l.Mr5("id",w.navItem.domId),l.BMQ("role",w.role?w.role:w.nav.roles?"tab":void 0)("tabindex",w.tabindex)("aria-controls",w.navItem.isPanelInDom()?w.navItem.panelDomId:null)("aria-selected",w.navItem.active)("aria-disabled",w.navItem.disabled),l.AVh("nav-link",!0)("nav-item",w.navItem.isNgContainer())("active",w.navItem.active)("disabled",w.navItem.disabled))},standalone:!0})}}return m})(),Mu=(()=>{class m extends ed{static{this.\u0275fac=(()=>{let f;return function(w){return(f||(f=l.xGo(m)))(w||m)}})()}static{this.\u0275dir=l.FsC({type:m,selectors:[["a","ngbNavLink",""]],hostAttrs:["href",""],hostBindings:function(_,w){1&_&&l.bIt("click",function(Ue){return w.nav.click(w.navItem),Ue.preventDefault()})},standalone:!0,features:[l.Vt3]})}}return m})();const Ra=({classList:m})=>(m.remove("show"),()=>m.remove("active")),ym=(m,N)=>{N&&Wt(m),m.classList.add("show")};let xh=(()=>{class m{constructor(){this.nativeElement=(0,l.WQX)(l.aKT).nativeElement}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(_,w){2&_&&(l.Mr5("id",w.item.panelDomId),l.BMQ("role",w.role?w.role:w.nav.roles?"tabpanel":void 0)("aria-labelledby",w.item.domId),l.AVh("fade",w.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0})}}return m})(),Eh=(()=>{class m{constructor(){this._cd=(0,l.WQX)(l.gRc),this._ngZone=(0,l.WQX)(l.SKi),this._activePane=null}isPanelTransitioning(f){return this._activePane?.item===f}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe((0,M.pQ)(this.nav.destroyRef),(0,rn.Z)(this._activePane?.item||null),function gn(m,N=ot.D){return m=m??Xt,(0,Pt.N)((f,_)=>{let w,_e=!0;f.subscribe((0,Ye._)(_,Ue=>{const Tt=N(Ue);(_e||!m(w,Tt))&&(_e=!1,w=Tt,_.next(Ue))}))})}(),function hn(m){return(0,Be.p)((N,f)=>m<=f)}(1)).subscribe(f=>{const _={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?vi(this._ngZone,this._activePane.nativeElement,Ra,_).subscribe(()=>{const w=this._activePane?.item;this._activePane=this._getPaneForItem(f),this._cd.markForCheck(),this._activePane&&(this._activePane.nativeElement.classList.add("active"),vi(this._ngZone,this._activePane.nativeElement,ym,_).subscribe(()=>{f&&(f.shown.emit(),this.nav.shown.emit(f.id))})),w&&(w.hidden.emit(),this.nav.hidden.emit(w.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.nativeElement.classList.add("show"),this._activePane?.nativeElement.classList.add("active")}_getPaneForItem(f){return this._panes&&this._panes.find(_=>_.item===f)||null}_getActivePane(){return this._panes&&this._panes.find(f=>f.item.active)||null}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275cmp=l.VBU({type:m,selectors:[["","ngbNavOutlet",""]],viewQuery:function(_,w){if(1&_&&l.GBs(xh,5),2&_){let _e;l.mGM(_e=l.lsd())&&(w._panes=_e)}},hostVars:2,hostBindings:function(_,w){2&_&&l.AVh("tab-content",!0)},inputs:{paneRole:"paneRole",nav:[l.Mj6.None,"ngbNavOutlet","nav"]},standalone:!0,features:[l.aNF],attrs:We,decls:2,vars:0,consts:[["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(_,w){1&_&&l.Z7z(0,Dr,1,1,null,null,l.fX1),2&_&&l.Dyx(w.nav.items)},dependencies:[xh,Ot.T3],encapsulation:2,changeDetection:0})}}return m})(),Sh=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Np=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})();const Pp={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};let Cm=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Bc=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Fp=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Cf=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Th=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Up=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Lv=(()=>{class m{constructor(){this._ngbConfig=(0,l.WQX)(re),this.autoClose=!0,this.placement="auto",this.popperOptions=f=>f,this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(f){this._animation=f}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),kv=0,Yl=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275cmp=l.VBU({type:m,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(_,w){2&_&&(l.Mr5("id",w.id),l.HbH("tooltip"+(w.tooltipClass?" "+w.tooltipClass:"")),l.AVh("fade",w.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},standalone:!0,features:[l.aNF],ngContentSelectors:cl,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(_,w){1&_&&(l.NAR(),l.nrm(0,"div",0),l.j41(1,"div",1),l.SdG(2),l.k0s())},styles:["ngb-tooltip-window{pointer-events:none;position:absolute}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-top,ngb-tooltip-window.bs-tooltip-bottom{padding-left:0;padding-right:0}ngb-tooltip-window.bs-tooltip-start,ngb-tooltip-window.bs-tooltip-end{padding-top:0;padding-bottom:0}\n"],encapsulation:2,changeDetection:0})}}return m})(),Vp=(()=>{class m{constructor(){this._config=(0,l.WQX)(Lv),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disableTooltip=this._config.disableTooltip,this.tooltipClass=this._config.tooltipClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new l.bkB,this.hidden=new l.bkB,this._nativeElement=(0,l.WQX)(l.aKT).nativeElement,this._ngZone=(0,l.WQX)(l.SKi),this._document=(0,l.WQX)(Ot.qQ),this._changeDetector=(0,l.WQX)(l.gRc),this._ngbTooltipWindowId="ngb-tooltip-"+kv++,this._popupService=new Cp(Yl),this._windowRef=null,this._positioning=function ms(){const m=(0,l.WQX)(Oi);let N=null;return{createPopper(f){if(!N){let w=(f.updatePopperOptions||Pc)(Oo(f,m));N=_a(f.hostElement,f.targetElement,w)}},update(){N&&N.update()},setOptions(f){if(N){let w=(f.updatePopperOptions||Pc)(Oo(f,m));N.setOptions(w)}},destroy(){N&&(N.destroy(),N=null)}}}()}set ngbTooltip(f){this._ngbTooltip=f,!f&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(f){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){const{windowRef:_,transition$:w}=this._popupService.open(this._ngbTooltip,f??this.tooltipContext,this.animation);this._windowRef=_,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("tooltipClass",this.tooltipClass),this._windowRef.setInput("id",this._ngbTooltipWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbTooltipWindowId),"body"===this.container&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-tooltip",updatePopperOptions:_e=>this.popperOptions(function Md(m){return N=>(N.modifiers.push(Ha,{name:"offset",options:{offset:()=>m}}),N)}([0,6])(_e))}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),lh(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement],[this._nativeElement]),w.subscribe(()=>this.shown.emit())}}close(f=this.animation){null!=this._windowRef&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(f).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function Em(m,N,f,_,w,_e=0,Ue=0){const Tt=function xm(m){const N=(m||"").trim();if(0===N.length)return[];const f=N.split(/\s+/).map(w=>w.split(":")).map(w=>Pp[w[0]]||w),_=f.filter(w=>w.includes("manual"));if(_.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===_.length&&f.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return _.length?[]:f}(N);if(0===Tt.length)return()=>{};const Ut=new Set,tn=[];let un;function Jn(ui,es){m.addEventListener(ui,es),tn.push(()=>m.removeEventListener(ui,es))}function si(ui,es){clearTimeout(un),es>0?un=setTimeout(ui,es):ui()}for(const[ui,es]of Tt)es?(Jn(ui,()=>{Ut.add(ui),si(()=>Ut.size>0&&_(),_e)}),Jn(es,()=>{Ut.delete(ui),si(()=>0===Ut.size&&w(),Ue)})):Jn(ui,()=>f()?si(w,Ue):si(_,_e));return()=>tn.forEach(ui=>ui())}(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:f}){f&&this.isOpen()&&this._windowRef.setInput("tooltipClass",f.currentValue)}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_getPositionTargetElement(){return(Yt(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",tooltipContext:"tooltipContext",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],standalone:!0,features:[l.OA$]})}}return m})(),Df=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})();new l.nKC("live announcer delay",{providedIn:"root",factory:()=>100});let Hp=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Hv=(()=>{class m{constructor(){this._ngbConfig=(0,l.WQX)(re),this.backdrop=!0,this.keyboard=!0,this.position="start",this.scroll=!1}get animation(){return this._animation??this._ngbConfig.animation}set animation(f){this._animation=f}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})();class If{close(N){}dismiss(N){}}class zv{get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,Ce.Q)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,Ce.Q)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._panelCmptRef.instance.shown.asObservable()}constructor(N,f,_,w){this._panelCmptRef=N,this._contentRef=f,this._backdropCmptRef=_,this._beforeDismiss=w,this._closed=new X.B,this._dismissed=new X.B,this._hidden=new X.B,N.instance.dismissEvent.subscribe(_e=>{this.dismiss(_e)}),_&&_.instance.dismissEvent.subscribe(_e=>{this.dismiss(_e)}),this.result=new Promise((_e,Ue)=>{this._resolve=_e,this._reject=Ue}),this.result.then(null,()=>{})}close(N){this._panelCmptRef&&(this._closed.next(N),this._resolve(N),this._removeOffcanvasElements())}_dismiss(N){this._dismissed.next(N),this._reject(N),this._removeOffcanvasElements()}dismiss(N){if(this._panelCmptRef)if(this._beforeDismiss){const f=this._beforeDismiss();ee(f)?f.then(_=>{!1!==_&&this._dismiss(N)},()=>{}):!1!==f&&this._dismiss(N)}else this._dismiss(N)}_removeOffcanvasElements(){const N=this._panelCmptRef.instance.hide(),f=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,W.of)(void 0);N.subscribe(()=>{const{nativeElement:_}=this._panelCmptRef.location;_.parentNode.removeChild(_),this._panelCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._panelCmptRef=null,this._contentRef=null}),f.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:_}=this._backdropCmptRef.location;_.parentNode.removeChild(_),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),K(N,f).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var zp=function(m){return m[m.BACKDROP_CLICK=0]="BACKDROP_CLICK",m[m.ESC=1]="ESC",m}(zp||{});let Gv=(()=>{class m{constructor(){this._nativeElement=(0,l.WQX)(l.aKT).nativeElement,this._zone=(0,l.WQX)(l.SKi),this.dismissEvent=new l.bkB}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Ne.s)(1)).subscribe(()=>{vi(this._zone,this._nativeElement,(f,_)=>{_&&Wt(f),f.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return vi(this._zone,this._nativeElement,({classList:f})=>f.remove("show"),{animation:this.animation,runningTransition:"stop"})}dismiss(){this.static||this.dismissEvent.emit(zp.BACKDROP_CLICK)}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275cmp=l.VBU({type:m,selectors:[["ngb-offcanvas-backdrop"]],hostVars:6,hostBindings:function(_,w){1&_&&l.bIt("mousedown",function(){return w.dismiss()}),2&_&&(l.HbH("offcanvas-backdrop"+(w.backdropClass?" "+w.backdropClass:"")),l.AVh("show",!w.animation)("fade",w.animation))},inputs:{animation:"animation",backdropClass:"backdropClass",static:"static"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[l.aNF],decls:0,vars:0,template:function(_,w){},encapsulation:2})}}return m})(),Wv=(()=>{class m{constructor(){this._document=(0,l.WQX)(Ot.qQ),this._elRef=(0,l.WQX)(l.aKT),this._zone=(0,l.WQX)(l.SKi),this._closed$=new X.B,this._elWithFocus=null,this.keyboard=!0,this.position="start",this.dismissEvent=new l.bkB,this.shown=new X.B,this.hidden=new X.B}dismiss(f){this.dismissEvent.emit(f)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Ne.s)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const _=vi(this._zone,this._elRef.nativeElement,w=>(w.classList.remove("showing"),w.classList.add("hiding"),()=>w.classList.remove("show","hiding")),{animation:this.animation,runningTransition:"stop"});return _.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),_}_show(){vi(this._zone,this._elRef.nativeElement,(w,_e)=>(_e&&Wt(w),w.classList.add("show","showing"),()=>w.classList.remove("showing")),{animation:this.animation,runningTransition:"continue"}).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:f}=this._elRef;this._zone.runOutsideAngular(()=>{he(f,"keydown").pipe((0,Ce.Q)(this._closed$),(0,Be.p)(_=>_.which===Pn.Escape)).subscribe(_=>{this.keyboard&&requestAnimationFrame(()=>{_.defaultPrevented||this._zone.run(()=>this.dismiss(zp.ESC))})})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:f}=this._elRef;if(!f.contains(document.activeElement)){const _=f.querySelector("[ngbAutofocus]"),w=Gu(f)[0];(_||w||f).focus()}}_restoreFocus(){const f=this._document.body,_=this._elWithFocus;let w;w=_&&_.focus&&f.contains(_)?_:f,this._zone.runOutsideAngular(()=>{setTimeout(()=>w.focus()),this._elWithFocus=null})}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275cmp=l.VBU({type:m,selectors:[["ngb-offcanvas-panel"]],hostAttrs:["role","dialog","tabindex","-1"],hostVars:5,hostBindings:function(_,w){2&_&&(l.BMQ("aria-modal",!0)("aria-labelledby",w.ariaLabelledBy)("aria-describedby",w.ariaDescribedBy),l.HbH("offcanvas offcanvas-"+w.position+(w.panelClass?" "+w.panelClass:"")))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",keyboard:"keyboard",panelClass:"panelClass",position:"position"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[l.aNF],ngContentSelectors:cl,decls:1,vars:0,template:function(_,w){1&_&&(l.NAR(),l.SdG(0))},encapsulation:2})}}return m})(),Nm=(()=>{class m{constructor(){this._applicationRef=(0,l.WQX)(l.o8S),this._injector=(0,l.WQX)(l.zZn),this._document=(0,l.WQX)(Ot.qQ),this._scrollBar=(0,l.WQX)(wp),this._activePanelCmptHasChanged=new X.B,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._panelAttributes=["animation","ariaDescribedBy","ariaLabelledBy","keyboard","panelClass","position"],this._activeInstance=new l.bkB;const f=(0,l.WQX)(l.SKi);this._activePanelCmptHasChanged.subscribe(()=>{this._panelCmpt&&Ll(f,this._panelCmpt.location.nativeElement,this._activePanelCmptHasChanged)})}_restoreScrollBar(){const f=this._scrollBarRestoreFn;f&&(this._scrollBarRestoreFn=null,f())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(f,_,w){const _e=w.container instanceof HTMLElement?w.container:Se(w.container)?this._document.querySelector(w.container):this._document.body;if(!_e)throw new Error(`The specified offcanvas container "${w.container||"body"}" was not found in the DOM.`);w.scroll||this._hideScrollBar();const Ue=new If,Tt=this._getContentRef(w.injector||f,_,Ue);let Ut=!1!==w.backdrop?this._attachBackdrop(_e):void 0,tn=this._attachWindowComponent(_e,Tt.nodes),un=new zv(tn,Tt,Ut,w.beforeDismiss);return this._registerOffcanvasRef(un),this._registerPanelCmpt(tn),un.hidden.pipe((0,ct.j)(()=>this._restoreScrollBar())).subscribe(),Ue.close=Jn=>{un.close(Jn)},Ue.dismiss=Jn=>{un.dismiss(Jn)},this._applyPanelOptions(tn.instance,w),Ut&&Ut.instance&&(this._applyBackdropOptions(Ut.instance,w),Ut.changeDetectorRef.detectChanges()),tn.changeDetectorRef.detectChanges(),un}get activeInstance(){return this._activeInstance}dismiss(f){this._offcanvasRef?.dismiss(f)}hasOpenOffcanvas(){return!!this._offcanvasRef}_attachBackdrop(f){let _=(0,l.a0P)(Gv,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(_.hostView),f.appendChild(_.location.nativeElement),_}_attachWindowComponent(f,_){let w=(0,l.a0P)(Wv,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:_});return this._applicationRef.attachView(w.hostView),f.appendChild(w.location.nativeElement),w}_applyPanelOptions(f,_){this._panelAttributes.forEach(w=>{Se(_[w])&&(f[w]=_[w])})}_applyBackdropOptions(f,_){this._backdropAttributes.forEach(w=>{Se(_[w])&&(f[w]=_[w])}),f.static="static"===_.backdrop}_getContentRef(f,_,w){return _?_ instanceof l.C4Q?this._createFromTemplateRef(_,w):Yt(_)?this._createFromString(_):this._createFromComponent(f,_,w):new lc([])}_createFromTemplateRef(f,_){const _e=f.createEmbeddedView({$implicit:_,close(Ue){_.close(Ue)},dismiss(Ue){_.dismiss(Ue)}});return this._applicationRef.attachView(_e),new lc([_e.rootNodes],_e)}_createFromString(f){const _=this._document.createTextNode(`${f}`);return new lc([[_]])}_createFromComponent(f,_,w){const _e=l.zZn.create({providers:[{provide:If,useValue:w}],parent:f}),Ue=(0,l.a0P)(_,{environmentInjector:this._applicationRef.injector,elementInjector:_e}),Tt=Ue.location.nativeElement;return this._applicationRef.attachView(Ue.hostView),new lc([[Tt]],Ue.hostView,Ue)}_registerOffcanvasRef(f){const _=()=>{this._offcanvasRef=void 0,this._activeInstance.emit(this._offcanvasRef)};this._offcanvasRef=f,this._activeInstance.emit(this._offcanvasRef),f.result.then(_,_)}_registerPanelCmpt(f){this._panelCmpt=f,this._activePanelCmptHasChanged.next(),f.onDestroy(()=>{this._panelCmpt=void 0,this._activePanelCmptHasChanged.next()})}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),Pm=(()=>{class m{constructor(){this._injector=(0,l.WQX)(l.zZn),this._offcanvasStack=(0,l.WQX)(Nm),this._config=(0,l.WQX)(Hv)}open(f,_={}){const w={...this._config,animation:this._config.animation,..._};return this._offcanvasStack.open(this._injector,f,w)}get activeInstance(){return this._offcanvasStack.activeInstance}dismiss(f){this._offcanvasStack.dismiss(f)}hasOpenOffcanvas(){return this._offcanvasStack.hasOpenOffcanvas()}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),Gp=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})();const rs=[sa,po,to,Sa,Ep,Rd,xf,Sh,Gp,Np,Cm,Bc,Fp,Cf,Th,Up,Df,Hp];let Ci=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({imports:[rs,sa,po,to,Sa,Ep,Rd,xf,Sh,Gp,Np,Cm,Bc,Fp,Cf,Th,Up,Df,Hp]})}}return m})()},4909:(Dt,qe,S)=>{"use strict";S.d(qe,{Wr:()=>ze,h:()=>gn,D9:()=>kt,c$:()=>$e});var l=S(4438),M=S(7673),h=S(4402),ge=S(7468),W=S(8793),X=S(9030),oe=S(6697),H=S(1413),G=S(6129);class k extends H.B{constructor(hn=1/0,ct=1/0,Ot=G.U){super(),this._bufferSize=hn,this._windowTime=ct,this._timestampProvider=Ot,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ct===1/0,this._bufferSize=Math.max(1,hn),this._windowTime=Math.max(1,ct)}next(hn){const{isStopped:ct,_buffer:Ot,_infiniteTimeWindow:It,_timestampProvider:an,_windowTime:Fn}=this;ct||(Ot.push(hn),!It&&Ot.push(an.now()+Fn)),this._trimBuffer(),super.next(hn)}_subscribe(hn){this._throwIfClosed(),this._trimBuffer();const ct=this._innerSubscribe(hn),{_infiniteTimeWindow:Ot,_buffer:It}=this,an=It.slice();for(let Fn=0;Fn<an.length&&!hn.closed;Fn+=Ot?1:2)hn.next(an[Fn]);return this._checkFinalizedStatuses(hn),ct}_trimBuffer(){const{_bufferSize:hn,_timestampProvider:ct,_buffer:Ot,_infiniteTimeWindow:It}=this,an=(It?1:2)*hn;if(hn<1/0&&an<Ot.length&&Ot.splice(0,Ot.length-an),!It){const Fn=ct.now();let Xn=0;for(let Zn=1;Zn<Ot.length&&Ot[Zn]<=Fn;Zn+=2)Xn=Zn;Xn&&Ot.splice(0,Xn+1)}}}var P=S(8750),q=S(7707),ne=S(9974);function he(Xt,hn,...ct){if(!0===hn)return void Xt();if(!1===hn)return;const Ot=new q.Ms({next:()=>{Ot.unsubscribe(),Xt()}});return(0,P.Tg)(hn(...ct)).subscribe(Ot)}function Ae(Xt,hn,ct){let Ot,It=!1;return Xt&&"object"==typeof Xt?({bufferSize:Ot=1/0,windowTime:hn=1/0,refCount:It=!1,scheduler:ct}=Xt):Ot=Xt??1/0,function ce(Xt={}){const{connector:hn=(()=>new H.B),resetOnError:ct=!0,resetOnComplete:Ot=!0,resetOnRefCountZero:It=!0}=Xt;return an=>{let Fn,Xn,Zn,Hr=0,Hn=!1,Dn=!1;const Un=()=>{Xn?.unsubscribe(),Xn=void 0},Pi=()=>{Un(),Fn=Zn=void 0,Hn=Dn=!1},Qi=()=>{const Rr=Fn;Pi(),Rr?.unsubscribe()};return(0,ne.N)((Rr,ii)=>{Hr++,!Dn&&!Hn&&Un();const yi=Zn=Zn??hn();ii.add(()=>{Hr--,0===Hr&&!Dn&&!Hn&&(Xn=he(Qi,It))}),yi.subscribe(ii),!Fn&&Hr>0&&(Fn=new q.Ms({next:uo=>yi.next(uo),error:uo=>{Dn=!0,Un(),Xn=he(Pi,ct,uo),yi.error(uo)},complete:()=>{Hn=!0,Un(),Xn=he(Pi,Ot),yi.complete()}}),(0,P.Tg)(Rr).subscribe(Fn))})(an)}}({connector:()=>new k(Ot,hn,ct),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:It})}var we=S(6354),de=S(274),Re=S(5558);class ze{}let Ge=(()=>{class Xt extends ze{getTranslation(ct){return(0,M.of)({})}static \u0275fac=(()=>{let ct;return function(It){return(ct||(ct=l.xGo(Xt)))(It||Xt)}})();static \u0275prov=l.jDH({token:Xt,factory:Xt.\u0275fac})}return Xt})();class Oe{}let Ye=(()=>{class Xt{handle(ct){return ct.key}static \u0275fac=function(Ot){return new(Ot||Xt)};static \u0275prov=l.jDH({token:Xt,factory:Xt.\u0275fac})}return Xt})();function yt(Xt,hn){if(Xt===hn)return!0;if(null===Xt||null===hn)return!1;if(Xt!=Xt&&hn!=hn)return!0;const ct=typeof Xt;let It,an,Fn;if(ct==typeof hn&&"object"==ct){if(!Array.isArray(Xt)){if(Array.isArray(hn))return!1;for(an in Fn=Object.create(null),Xt){if(!yt(Xt[an],hn[an]))return!1;Fn[an]=!0}for(an in hn)if(!(an in Fn)&&typeof hn[an]<"u")return!1;return!0}if(!Array.isArray(hn))return!1;if((It=Xt.length)==hn.length){for(an=0;an<It;an++)if(!yt(Xt[an],hn[an]))return!1;return!0}}return!1}function _t(Xt){return typeof Xt<"u"&&null!==Xt}function ut(Xt){return ae(Xt)&&!x(Xt)&&null!==Xt}function ae(Xt){return"object"==typeof Xt}function x(Xt){return Array.isArray(Xt)}function T(Xt){return"string"==typeof Xt}function te(Xt,hn){const ct=Object.assign({},Xt);return ae(Xt)?(ae(Xt)&&ae(hn)&&Object.keys(hn).forEach(Ot=>{ut(hn[Ot])?Ot in Xt?ct[Ot]=te(Xt[Ot],hn[Ot]):Object.assign(ct,{[Ot]:hn[Ot]}):Object.assign(ct,{[Ot]:hn[Ot]})}),ct):te({},hn)}function ve(Xt,hn){const ct=hn.split(".");hn="";do{hn+=ct.shift(),_t(Xt)&&_t(Xt[hn])&&(ut(Xt[hn])||x(Xt[hn])||!ct.length)?(Xt=Xt[hn],hn=""):ct.length?hn+=".":Xt=void 0}while(ct.length);return Xt}class Be{}let Ne=(()=>{class Xt extends Be{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(ct,Ot){return T(ct)?this.interpolateString(ct,Ot):function K(Xt){return"function"==typeof Xt}(ct)?this.interpolateFunction(ct,Ot):void 0}interpolateFunction(ct,Ot){return ct(Ot)}interpolateString(ct,Ot){return Ot?ct.replace(this.templateMatcher,(It,an)=>{const Fn=ve(Ot,an);return _t(Fn)?Fn:It}):ct}static \u0275fac=(()=>{let ct;return function(It){return(ct||(ct=l.xGo(Xt)))(It||Xt)}})();static \u0275prov=l.jDH({token:Xt,factory:Xt.\u0275fac})}return Xt})();class z{}let Fe=(()=>{class Xt extends z{compile(ct,Ot){return ct}compileTranslations(ct,Ot){return ct}static \u0275fac=(()=>{let ct;return function(It){return(ct||(ct=l.xGo(Xt)))(It||Xt)}})();static \u0275prov=l.jDH({token:Xt,factory:Xt.\u0275fac})}return Xt})();class Pt{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new l.bkB;onLangChange=new l.bkB;onDefaultLangChange=new l.bkB}const ot=new l.nKC("ISOLATE_TRANSLATE_SERVICE"),Vt=new l.nKC("USE_DEFAULT_LANG"),vt=new l.nKC("DEFAULT_LANGUAGE"),st=new l.nKC("USE_EXTEND"),Ft=Xt=>(0,h.A)(Xt)?Xt:(0,M.of)(Xt);let $e=(()=>{class Xt{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(ct){this.store.defaultLang=ct}get currentLang(){return this.store.currentLang}set currentLang(ct){this.store.currentLang=ct}get langs(){return this.store.langs}set langs(ct){this.store.langs=ct}get translations(){return this.store.translations}set translations(ct){this.store.translations=ct}constructor(ct,Ot,It,an,Fn,Xn=!0,Zn=!1,Hr=!1,Hn){this.store=ct,this.currentLoader=Ot,this.compiler=It,this.parser=an,this.missingTranslationHandler=Fn,this.useDefaultLang=Xn,this.extend=Hr,Zn&&(this.store=new Pt),Hn&&this.setDefaultLang(Hn)}setDefaultLang(ct){if(ct===this.defaultLang)return;const Ot=this.retrieveTranslations(ct);typeof Ot<"u"?(null==this.defaultLang&&(this.defaultLang=ct),Ot.pipe((0,oe.s)(1)).subscribe(()=>{this.changeDefaultLang(ct)})):this.changeDefaultLang(ct)}getDefaultLang(){return this.defaultLang}use(ct){if(this.lastUseLanguage=ct,ct===this.currentLang)return(0,M.of)(this.translations[ct]);this.currentLang||(this.currentLang=ct);const Ot=this.retrieveTranslations(ct);return(0,h.A)(Ot)?(Ot.pipe((0,oe.s)(1)).subscribe(()=>{this.changeLang(ct)}),Ot):(this.changeLang(ct),(0,M.of)(this.translations[ct]))}changeLang(ct){ct===this.lastUseLanguage&&(this.currentLang=ct,this.onLangChange.emit({lang:ct,translations:this.translations[ct]}),null==this.defaultLang&&this.changeDefaultLang(ct))}retrieveTranslations(ct){if(typeof this.translations[ct]>"u"||this.extend)return this._translationRequests[ct]=this._translationRequests[ct]||this.loadAndCompileTranslations(ct),this._translationRequests[ct]}getTranslation(ct){return this.loadAndCompileTranslations(ct)}loadAndCompileTranslations(ct){this.pending=!0;const Ot=this.currentLoader.getTranslation(ct).pipe(Ae(1),(0,oe.s)(1));return this.loadingTranslations=Ot.pipe((0,we.T)(It=>this.compiler.compileTranslations(It,ct)),Ae(1),(0,oe.s)(1)),this.loadingTranslations.subscribe({next:It=>{this.translations[ct]=this.extend&&this.translations[ct]?{...It,...this.translations[ct]}:It,this.updateLangs(),this.pending=!1},error:It=>{this.pending=!1}}),Ot}setTranslation(ct,Ot,It=!1){const an=this.compiler.compileTranslations(Ot,ct);this.translations[ct]=(It||this.extend)&&this.translations[ct]?te(this.translations[ct],an):an,this.updateLangs(),this.onTranslationChange.emit({lang:ct,translations:this.translations[ct]})}getLangs(){return this.langs}addLangs(ct){const Ot=ct.filter(It=>!this.langs.includes(It));Ot.length>0&&(this.langs=[...this.langs,...Ot])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(ct,Ot,It){let an;if(ct&&(an=this.runInterpolation(ve(ct,Ot),It)),void 0===an&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(an=this.runInterpolation(ve(this.translations[this.defaultLang],Ot),It)),void 0===an){const Fn={key:Ot,translateService:this};typeof It<"u"&&(Fn.interpolateParams=It),an=this.missingTranslationHandler.handle(Fn)}return void 0!==an?an:Ot}runInterpolation(ct,Ot){if(x(ct))return ct.map(It=>this.runInterpolation(It,Ot));if(ut(ct)){const It={};for(const an in ct){const Fn=this.runInterpolation(ct[an],Ot);void 0!==Fn&&(It[an]=Fn)}return It}return this.parser.interpolate(ct,Ot)}getParsedResult(ct,Ot,It){if(Ot instanceof Array){const an={};let Fn=!1;for(const Zn of Ot)an[Zn]=this.getParsedResultForKey(ct,Zn,It),Fn=Fn||(0,h.A)(an[Zn]);if(!Fn)return an;const Xn=Ot.map(Zn=>Ft(an[Zn]));return(0,ge.p)(Xn).pipe((0,we.T)(Zn=>{const Hr={};return Zn.forEach((Hn,Dn)=>{Hr[Ot[Dn]]=Hn}),Hr}))}return this.getParsedResultForKey(ct,Ot,It)}get(ct,Ot){if(!_t(ct)||!ct.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe((0,de.H)(It=>Ft(this.getParsedResult(It,ct,Ot)))):Ft(this.getParsedResult(this.translations[this.currentLang],ct,Ot))}getStreamOnTranslationChange(ct,Ot){if(!_t(ct)||!ct.length)throw new Error('Parameter "key" is required and cannot be empty');return(0,W.x)((0,X.v)(()=>this.get(ct,Ot)),this.onTranslationChange.pipe((0,Re.n)(It=>{const an=this.getParsedResult(It.translations,ct,Ot);return Ft(an)})))}stream(ct,Ot){if(!_t(ct)||!ct.length)throw new Error('Parameter "key" required');return(0,W.x)((0,X.v)(()=>this.get(ct,Ot)),this.onLangChange.pipe((0,Re.n)(It=>{const an=this.getParsedResult(It.translations,ct,Ot);return Ft(an)})))}instant(ct,Ot){if(!_t(ct)||0===ct.length)throw new Error('Parameter "key" is required and cannot be empty');const It=this.getParsedResult(this.translations[this.currentLang],ct,Ot);return(0,h.A)(It)?Array.isArray(ct)?ct.reduce((an,Fn)=>(an[Fn]=Fn,an),{}):ct:It}set(ct,Ot,It=this.currentLang){(function Ce(Xt,hn,ct){const Ot=hn.split(".");let It=Xt;for(let an=0;an<Ot.length;an++){const Fn=Ot[an];an===Ot.length-1?It[Fn]=ct:((!It[Fn]||!ut(It[Fn]))&&(It[Fn]={}),It=It[Fn])}})(this.translations[It],ct,T(Ot)?this.compiler.compile(Ot,It):this.compiler.compileTranslations(Ot,It)),this.updateLangs(),this.onTranslationChange.emit({lang:It,translations:this.translations[It]})}changeDefaultLang(ct){this.defaultLang=ct,this.onDefaultLangChange.emit({lang:ct,translations:this.translations[ct]})}reloadLang(ct){return this.resetLang(ct),this.loadAndCompileTranslations(ct)}resetLang(ct){delete this._translationRequests[ct],delete this.translations[ct]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;const ct=this.getBrowserCultureLang();return ct?ct.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(Ot){return new(Ot||Xt)(l.KVO(Pt),l.KVO(ze),l.KVO(z),l.KVO(Be),l.KVO(Oe),l.KVO(Vt),l.KVO(ot),l.KVO(st),l.KVO(vt))};static \u0275prov=l.jDH({token:Xt,factory:Xt.\u0275fac,providedIn:"root"})}return Xt})(),kt=(()=>{class Xt{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(ct,Ot){this.translate=ct,this._ref=Ot}updateValue(ct,Ot,It){const an=Fn=>{this.value=void 0!==Fn?Fn:ct,this.lastKey=ct,this._ref.markForCheck()};if(It){const Fn=this.translate.getParsedResult(It,ct,Ot);(0,h.A)(Fn)?Fn.subscribe(an):an(Fn)}this.translate.get(ct,Ot).subscribe(an)}transform(ct,...Ot){if(!ct||!ct.length)return ct;if(yt(ct,this.lastKey)&&yt(Ot,this.lastParams))return this.value;let It;if(_t(Ot[0])&&Ot.length)if(T(Ot[0])&&Ot[0].length){const an=Ot[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{It=JSON.parse(an)}catch(Fn){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${Ot[0]}`)}}else ut(Ot[0])&&(It=Ot[0]);return this.lastKey=ct,this.lastParams=Ot,this.updateValue(ct,It),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(an=>{this.lastKey&&an.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(ct,It,an.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(an=>{this.lastKey&&(this.lastKey=null,this.updateValue(ct,It,an.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(ct,It))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(Ot){return new(Ot||Xt)(l.rXU($e,16),l.rXU(l.gRc,16))};static \u0275pipe=l.EJ8({name:"translate",type:Xt,pure:!1,standalone:!0});static \u0275prov=l.jDH({token:Xt,factory:Xt.\u0275fac})}return Xt})(),gn=(()=>{class Xt{static forRoot(ct={}){return{ngModule:Xt,providers:[ct.loader||{provide:ze,useClass:Ge},ct.compiler||{provide:z,useClass:Fe},ct.parser||{provide:Be,useClass:Ne},ct.missingTranslationHandler||{provide:Oe,useClass:Ye},Pt,{provide:ot,useValue:ct.isolate},{provide:Vt,useValue:ct.useDefaultLang},{provide:st,useValue:ct.extend},{provide:vt,useValue:ct.defaultLanguage},$e]}}static forChild(ct={}){return{ngModule:Xt,providers:[ct.loader||{provide:ze,useClass:Ge},ct.compiler||{provide:z,useClass:Fe},ct.parser||{provide:Be,useClass:Ne},ct.missingTranslationHandler||{provide:Oe,useClass:Ye},{provide:ot,useValue:ct.isolate},{provide:Vt,useValue:ct.useDefaultLang},{provide:st,useValue:ct.extend},{provide:vt,useValue:ct.defaultLanguage},$e]}}static \u0275fac=function(Ot){return new(Ot||Xt)};static \u0275mod=l.$C({type:Xt});static \u0275inj=l.G2t({})}return Xt})()},9242:(Dt,qe,S)=>{"use strict";S.d(qe,{gq:()=>P,ob:()=>Oe,tA:()=>Ye});var l=S(4438),M=S(177),h=S(7673),ge=S(4412),W=S(1413),X=S(5964);const oe=new l.nKC("recaptcha-language"),H=new l.nKC("recaptcha-base-url"),G=new l.nKC("recaptcha-nonce-tag"),P=(new l.nKC("recaptcha-settings"),new l.nKC("recaptcha-v3-site-key")),q=new l.nKC("recaptcha-loader-options"),he={loadScript:function ne(ut,ae,x,{url:T,lang:K,nonce:te}={}){window.ng2recaptchaloaded=()=>{x(grecaptcha)};const ve=document.createElement("script");ve.innerHTML="";const{url:Ce,nonce:Be}=ae(new URL(T||"https://www.google.com/recaptcha/api.js"));Ce.searchParams.set("render","explicit"===ut?ut:ut.key),Ce.searchParams.set("onload","ng2recaptchaloaded"),Ce.searchParams.set("trustedtypes","true"),K&&Ce.searchParams.set("hl",K),ve.src=Ce.href;const Ne=Be||te;Ne&&ve.setAttribute("nonce",Ne),ve.async=!0,ve.defer=!0,document.head.appendChild(ve)},newLoadScript:function ce({v3SiteKey:ut,onBeforeLoad:ae,onLoaded:x}){he.loadScript(ut?{key:ut}:"explicit",ae,x)}};let we=(()=>{class ut{static{this.ready=null}constructor(x,T,K,te,ve,Ce){this.platformId=x,this.language=T,this.baseUrl=K,this.nonce=te,this.v3SiteKey=ve,this.options=Ce;const Be=this.init();this.ready=Be?function Ae(ut){return ut.asObservable().pipe((0,X.p)(ae=>null!==ae))}(Be):(0,h.of)()}init(){if(ut.ready)return ut.ready;if(!(0,M.UE)(this.platformId))return;const x=new ge.t(null);return ut.ready=x,he.newLoadScript({v3SiteKey:this.v3SiteKey,onBeforeLoad:T=>{if(this.options?.onBeforeLoad)return this.options.onBeforeLoad(T);const K=new URL(this.baseUrl??T);return this.language&&K.searchParams.set("hl",this.language),{url:K,nonce:this.nonce}},onLoaded:T=>{let K=T;this.options?.onLoaded&&(K=this.options.onLoaded(T)),x.next(K)}}),x}static{this.\u0275fac=function(T){return new(T||ut)(l.KVO(l.Agw),l.KVO(oe,8),l.KVO(H,8),l.KVO(G,8),l.KVO(P,8),l.KVO(q,8))}}static{this.\u0275prov=l.jDH({token:ut,factory:ut.\u0275fac})}}return ut})(),Oe=(()=>{class ut{constructor(x,T,K){this.recaptchaLoader=T,this.zone=x,this.siteKey=K,this.init()}get onExecute(){return this.onExecuteSubject||(this.onExecuteSubject=new W.B,this.onExecuteObservable=this.onExecuteSubject.asObservable()),this.onExecuteObservable}get onExecuteError(){return this.onExecuteErrorSubject||(this.onExecuteErrorSubject=new W.B,this.onExecuteErrorObservable=this.onExecuteErrorSubject.asObservable()),this.onExecuteErrorObservable}execute(x){const T=new W.B;return this.grecaptcha?this.executeActionWithSubject(x,T):(this.actionBacklog||(this.actionBacklog=[]),this.actionBacklog.push([x,T])),T.asObservable()}executeActionWithSubject(x,T){const K=te=>{this.zone.run(()=>{T.error(te),this.onExecuteErrorSubject&&this.onExecuteErrorSubject.next({action:x,error:te})})};this.zone.runOutsideAngular(()=>{try{this.grecaptcha.execute(this.siteKey,{action:x}).then(te=>{this.zone.run(()=>{T.next(te),T.complete(),this.onExecuteSubject&&this.onExecuteSubject.next({action:x,token:te})})},K)}catch(te){K(te)}})}init(){this.recaptchaLoader.ready.subscribe(x=>{this.grecaptcha=x,this.actionBacklog&&this.actionBacklog.length>0&&(this.actionBacklog.forEach(([T,K])=>this.executeActionWithSubject(T,K)),this.actionBacklog=void 0)})}static{this.\u0275fac=function(T){return new(T||ut)(l.KVO(l.SKi),l.KVO(we),l.KVO(P))}}static{this.\u0275prov=l.jDH({token:ut,factory:ut.\u0275fac})}}return ut})(),Ye=(()=>{class ut{static{this.\u0275fac=function(T){return new(T||ut)}}static{this.\u0275mod=l.$C({type:ut})}static{this.\u0275inj=l.G2t({providers:[Oe,we]})}}return ut})()},5794:(Dt,qe,S)=>{"use strict";S.d(qe,{DP:()=>Ce,tw:()=>K});var l=S(4438),M=S(9969),h=S(177),ge=S(1413),W=S(345);const X=["toast-component",""];function oe(ot,Vt){if(1&ot){const vt=l.RV6();l.j41(0,"button",5),l.bIt("click",function(){l.eBV(vt);const Ft=l.XpG();return l.Njj(Ft.remove())}),l.j41(1,"span",6),l.EFF(2,"\xd7"),l.k0s()()}}function H(ot,Vt){if(1&ot&&(l.qex(0),l.EFF(1),l.bVm()),2&ot){const vt=l.XpG(2);l.R7$(),l.SpI("[",vt.duplicatesCount+1,"]")}}function G(ot,Vt){if(1&ot&&(l.j41(0,"div"),l.EFF(1),l.DNE(2,H,2,1,"ng-container",4),l.k0s()),2&ot){const vt=l.XpG();l.HbH(vt.options.titleClass),l.BMQ("aria-label",vt.title),l.R7$(),l.SpI(" ",vt.title," "),l.R7$(),l.Y8G("ngIf",vt.duplicatesCount)}}function k(ot,Vt){if(1&ot&&l.nrm(0,"div",7),2&ot){const vt=l.XpG();l.HbH(vt.options.messageClass),l.Y8G("innerHTML",vt.message,l.npT)}}function P(ot,Vt){if(1&ot&&(l.j41(0,"div",8),l.EFF(1),l.k0s()),2&ot){const vt=l.XpG();l.HbH(vt.options.messageClass),l.BMQ("aria-label",vt.message),l.R7$(),l.SpI(" ",vt.message," ")}}function q(ot,Vt){if(1&ot&&(l.j41(0,"div"),l.nrm(1,"div",9),l.k0s()),2&ot){const vt=l.XpG();l.R7$(),l.xc7("width",vt.width()+"%")}}class ze{_attachedHost;component;viewContainerRef;injector;constructor(Vt,vt){this.component=Vt,this.injector=vt}attach(Vt,vt){return this._attachedHost=Vt,Vt.attach(this,vt)}detach(){const Vt=this._attachedHost;if(Vt)return this._attachedHost=void 0,Vt.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Vt){this._attachedHost=Vt}}class Ge{_attachedPortal;_disposeFn;attach(Vt,vt){return this._attachedPortal=Vt,this.attachComponentPortal(Vt,vt)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Vt){this._disposeFn=Vt}}class Oe{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new ge.B;_activate=new ge.B;_manualClose=new ge.B;_resetTimeout=new ge.B;_countDuplicate=new ge.B;constructor(Vt){this._overlayRef=Vt}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Vt,vt){Vt&&this._resetTimeout.next(),vt&&this._countDuplicate.next(++this.duplicatesCount)}}class Ye{toastId;config;message;title;toastType;toastRef;_onTap=new ge.B;_onAction=new ge.B;constructor(Vt,vt,st,Ft,$e,Xe){this.toastId=Vt,this.config=vt,this.message=st,this.title=Ft,this.toastType=$e,this.toastRef=Xe,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Vt){this._onAction.next(Vt)}onAction(){return this._onAction.asObservable()}}const _t=new l.nKC("ToastConfig");class ut extends Ge{_hostDomElement;_componentFactoryResolver;_appRef;constructor(Vt,vt,st){super(),this._hostDomElement=Vt,this._componentFactoryResolver=vt,this._appRef=st}attachComponentPortal(Vt,vt){const st=this._componentFactoryResolver.resolveComponentFactory(Vt.component);let Ft;return Ft=st.create(Vt.injector),this._appRef.attachView(Ft.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Ft.hostView),Ft.destroy()}),vt?this._hostDomElement.insertBefore(this._getComponentRootNode(Ft),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(Ft)),Ft}_getComponentRootNode(Vt){return Vt.hostView.rootNodes[0]}}let ae=(()=>{class ot{_document=(0,l.WQX)(h.qQ);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const vt=this._document.createElement("div");vt.classList.add("overlay-container"),vt.setAttribute("aria-live","polite"),this._document.body.appendChild(vt),this._containerElement=vt}static \u0275fac=function(st){return new(st||ot)};static \u0275prov=l.jDH({token:ot,factory:ot.\u0275fac,providedIn:"root"})}return ot})();class x{_portalHost;constructor(Vt){this._portalHost=Vt}attach(Vt,vt=!0){return this._portalHost.attach(Vt,vt)}detach(){return this._portalHost.detach()}}let T=(()=>{class ot{_overlayContainer=(0,l.WQX)(ae);_componentFactoryResolver=(0,l.WQX)(l.OM3);_appRef=(0,l.WQX)(l.o8S);_document=(0,l.WQX)(h.qQ);_paneElements=new Map;create(vt,st){return this._createOverlayRef(this.getPaneElement(vt,st))}getPaneElement(vt="",st){return this._paneElements.get(st)||this._paneElements.set(st,{}),this._paneElements.get(st)[vt]||(this._paneElements.get(st)[vt]=this._createPaneElement(vt,st)),this._paneElements.get(st)[vt]}_createPaneElement(vt,st){const Ft=this._document.createElement("div");return Ft.id="toast-container",Ft.classList.add(vt),Ft.classList.add("toast-container"),st?st.getContainerElement().appendChild(Ft):this._overlayContainer.getContainerElement().appendChild(Ft),Ft}_createPortalHost(vt){return new ut(vt,this._componentFactoryResolver,this._appRef)}_createOverlayRef(vt){return new x(this._createPortalHost(vt))}static \u0275fac=function(st){return new(st||ot)};static \u0275prov=l.jDH({token:ot,factory:ot.\u0275fac,providedIn:"root"})}return ot})(),K=(()=>{class ot{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(vt,st,Ft,$e,Xe){this.overlay=st,this._injector=Ft,this.sanitizer=$e,this.ngZone=Xe,this.toastrConfig={...vt.default,...vt.config},vt.config.iconClasses&&(this.toastrConfig.iconClasses={...vt.default.iconClasses,...vt.config.iconClasses})}show(vt,st,Ft={},$e=""){return this._preBuildNotification($e,vt,st,this.applyConfig(Ft))}success(vt,st,Ft={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",vt,st,this.applyConfig(Ft))}error(vt,st,Ft={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",vt,st,this.applyConfig(Ft))}info(vt,st,Ft={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",vt,st,this.applyConfig(Ft))}warning(vt,st,Ft={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",vt,st,this.applyConfig(Ft))}clear(vt){for(const st of this.toasts)if(void 0!==vt){if(st.toastId===vt)return void st.toastRef.manualClose()}else st.toastRef.manualClose()}remove(vt){const st=this._findToast(vt);if(!st||(st.activeToast.toastRef.close(),this.toasts.splice(st.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const Ft=this.toasts[this.currentlyActive].toastRef;Ft.isInactive()||(this.currentlyActive=this.currentlyActive+1,Ft.activate())}return!0}findDuplicate(vt="",st="",Ft,$e){const{includeTitleDuplicates:Xe}=this.toastrConfig;for(const kt of this.toasts)if((!Xe||Xe&&kt.title===vt)&&kt.message===st)return kt.toastRef.onDuplicate(Ft,$e),kt;return null}applyConfig(vt={}){return{...this.toastrConfig,...vt}}_findToast(vt){for(let st=0;st<this.toasts.length;st++)if(this.toasts[st].toastId===vt)return{index:st,activeToast:this.toasts[st]};return null}_preBuildNotification(vt,st,Ft,$e){return $e.onActivateTick?this.ngZone.run(()=>this._buildNotification(vt,st,Ft,$e)):this._buildNotification(vt,st,Ft,$e)}_buildNotification(vt,st,Ft,$e){if(!$e.toastComponent)throw new Error("toastComponent required");const Xe=this.findDuplicate(Ft,st,this.toastrConfig.resetTimeoutOnDuplicate&&$e.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&Ft||st)&&this.toastrConfig.preventDuplicates&&null!==Xe)return Xe;this.previousToastMessage=st;let kt=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(kt=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const cn=this.overlay.create($e.positionClass,this.overlayContainer);this.index=this.index+1;let rn=st;st&&$e.enableHtml&&(rn=this.sanitizer.sanitize(l.WPN.HTML,st));const gn=new Oe(cn),Xt=new Ye(this.index,$e,rn,Ft,vt,gn),ct=l.zZn.create({providers:[{provide:Ye,useValue:Xt}],parent:this._injector}),Ot=new ze($e.toastComponent,ct),It=cn.attach(Ot,$e.newestOnTop);gn.componentInstance=It.instance;const an={toastId:this.index,title:Ft||"",message:st||"",toastRef:gn,onShown:gn.afterActivate(),onHidden:gn.afterClosed(),onTap:Xt.onTap(),onAction:Xt.onAction(),portal:It};return kt||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{an.toastRef.activate()})),this.toasts.push(an),an}static \u0275fac=function(st){return new(st||ot)(l.KVO(_t),l.KVO(T),l.KVO(l.zZn),l.KVO(W.up),l.KVO(l.SKi))};static \u0275prov=l.jDH({token:ot,factory:ot.\u0275fac,providedIn:"root"})}return ot})();const ve={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class ot{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=(0,l.vPA)(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if("inactive"===this.state().value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(vt,st,Ft){this.toastrService=vt,this.toastPackage=st,this.ngZone=Ft,this.message=st.message,this.title=st.title,this.options=st.config,this.originalTimeout=st.config.timeOut,this.toastClasses=`${st.toastType} ${st.config.toastClass}`,this.sub=st.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=st.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=st.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=st.toastRef.countDuplicate().subscribe($e=>{this.duplicatesCount=$e}),this.state=(0,l.vPA)({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(vt=>({...vt,value:"active"})),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width()||100===this.width()||!this.options.timeOut)return;const vt=(new Date).getTime();this.width.set((this.hideTime-vt)/this.options.timeOut*100),"increasing"===this.options.progressAnimation&&this.width.update(Ft=>100-Ft),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(vt=>({...vt,value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state().value&&(clearTimeout(this.timeout),this.state.update(vt=>({...vt,value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state().value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state().value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state().value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(vt,st){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(vt),st)):this.timeout=setTimeout(()=>vt(),st)}outsideInterval(vt,st){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(vt),st)):this.intervalId=setInterval(()=>vt(),st)}runInsideAngular(vt){this.ngZone?this.ngZone.run(()=>vt()):vt()}static \u0275fac=function(st){return new(st||ot)(l.rXU(K),l.rXU(Ye),l.rXU(l.SKi))};static \u0275cmp=l.VBU({type:ot,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(st,Ft){1&st&&l.bIt("click",function(){return Ft.tapToast()})("mouseenter",function(){return Ft.stickAround()})("mouseleave",function(){return Ft.delayedHideToast()}),2&st&&(l.zvX("@flyInOut",Ft._state),l.HbH(Ft.toastClasses),l.xc7("display",Ft.displayStyle))},standalone:!0,features:[l.aNF],attrs:X,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(st,Ft){1&st&&l.DNE(0,oe,3,0,"button",0)(1,G,3,5,"div",1)(2,k,1,3,"div",2)(3,P,2,4,"div",3)(4,q,2,2,"div",4),2&st&&(l.Y8G("ngIf",Ft.options.closeButton),l.R7$(),l.Y8G("ngIf",Ft.title),l.R7$(),l.Y8G("ngIf",Ft.message&&Ft.options.enableHtml),l.R7$(),l.Y8G("ngIf",Ft.message&&!Ft.options.enableHtml),l.R7$(),l.Y8G("ngIf",Ft.options.progressBar))},dependencies:[h.bT],encapsulation:2,data:{animation:[(0,M.hZ)("flyInOut",[(0,M.wk)("inactive",(0,M.iF)({opacity:0})),(0,M.wk)("active",(0,M.iF)({opacity:1})),(0,M.wk)("removed",(0,M.iF)({opacity:0})),(0,M.kY)("inactive => active",(0,M.i0)("{{ easeTime }}ms {{ easing }}")),(0,M.kY)("active => removed",(0,M.i0)("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return ot})()},Ce=(ot={})=>(0,l.EmA)([{provide:_t,useValue:{default:ve,config:ot}}])},467:(Dt,qe,S)=>{"use strict";function l(h,ge,W,X,oe,H,G){try{var k=h[H](G),P=k.value}catch(q){return void W(q)}k.done?ge(P):Promise.resolve(P).then(X,oe)}function M(h){return function(){var ge=this,W=arguments;return new Promise(function(X,oe){var H=h.apply(ge,W);function G(P){l(H,X,oe,G,k,"next",P)}function k(P){l(H,X,oe,G,k,"throw",P)}G(void 0)})}}S.d(qe,{A:()=>M})},1636:Dt=>{"use strict";Dt.exports={rE:"6.5.7"}}},Dt=>{var qe=l=>Dt(Dt.s=l);qe(4073),qe(8802)}]);