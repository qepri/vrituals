

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>room 002</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://kordac.qepri.xyz/room_002/assets/js/aframe.js"></script>
    <script src="https://kordac.qepri.xyz/room_002/assets/js/xtras.js"></script>
    <script src="https://kordac.qepri.xyz/room_002/assets/js/hydra.js"></script>
    </head>

  <body>    <!--LOADsplash-->
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        document.querySelector("body").classList.add("loading");
        setTimeout(function() {
          document.querySelector("body").classList.remove("loading");
        }, 1273); // 5000 milliseconds = 5 seconds
      });
    </script>
    
    <style>
     .header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 50px;
  background-color:  #555555;
  color: white;
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Times New Roman', Times, serif;
  letter-spacing: 24px;
  padding-top: 10%;
  font-size: 24px;
  font-weight: bold;
}

.loading-screen {
  position: fixed;
  top: 50px;
  left: 0;
  width: 100%;
  height: calc(100% - 50px);
  background-color: #555555;
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 1;
  transition: opacity 0.5s ease-in-out;
}

.loading-screen.loading {
  opacity: 0;
}

.loading-icon {
  border: 2px solid #f3f3f3;
  border-top: 3px solid #b30000fc;
  border-radius: 50%;
  width: 80px;
  height: 80px;
  animation: spin 2s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* hide loading screen when page is loaded */
body:not(.loading) .loading-screen {
  display: none;
}


    </style>    
    <div class="loading-screen">
      <div class="header headerL">
        <h1>KORDAC UXMAT</h1>
      </div>
      <div class="loading-icon"></div>
    </div>
    <a-scene
      id="scene"
      background="color: #808080"
      vr-mode-ui="enabled: true"
      aframe-init=""
      renderer="colorManagement: true"
    >
   
      <a-assets>
      <img id="k2_oreek-12" src="assets/img/k2_oreek-12.jpg">
<img id="k2_oreek-4" src="assets/img/k2_oreek-4.jpg">
<img id="k2_oreek-3" src="assets/img/k2_oreek-3.jpg">
<img id="k2_oreek-9" src="assets/img/k2_oreek-9.jpg">
<img id="k2_oreek-14" src="assets/img/k2_oreek-14.jpg">
<img id="k2_oreek-11" src="assets/img/k2_oreek-11.jpg">
<img id="k2_oreek-6" src="assets/img/k2_oreek-6.jpg">
<img id="k2_oreek-2" src="assets/img/k2_oreek-2.jpg">
<img id="k2_oreek-7" src="assets/img/k2_oreek-7.jpg">
<img id="k2_oreek" src="assets/img/k2_oreek.jpg">
<img id="k2_oreek-10" src="assets/img/k2_oreek-10.jpg">
<img id="k2_oreek-8" src="assets/img/k2_oreek-8.jpg">
<img id="k2_oreek-5" src="assets/img/k2_oreek-5.jpg">
<img id="k2_oreek-15" src="assets/img/k2_oreek-15.jpg">
<img id="k2_oreek-13" src="assets/img/k2_oreek-13.jpg">
<img id="k2_oreek-16" src="assets/img/k2_oreek-16.jpg">

      </a-assets>
      
      <!--only for live visuals-->
      <a-plane side="double" position="0.427 2.328 37.27" scale="14 4 1"> </a-plane>
      <a-box position="6 2 6" scale="2 4 1"> </a-box>
      <!--only for live visuals-->


      <a-plane id="glry2"
      src="assets/img/" 
      normal-map="" normal-scale="6 6"
      side="double" 
      position="0 0 0"
      roughnes=".5"
      rotation="0 0 0" 
      width="100" height="100" color="#0000" 
      geometry="width: 100.58" 
      obj-model="obj: assets/obj/glry.obj"
     visible="" material="shader: phong; repeat: 12 12 2" 
     color="black" scale=".25 .25 .25"
     ></a-plane>

     
     <a-plane position="0 0 -5" rotation="-90 0 0" width="5" height="5" material="shader: flat; color: #ffffff; opacity: 0.5;"></a-plane>
     <a-animation attribute="material.opacity" from="0.5" to="0" dur="5000" easing="linear" repeat="indefinite"></a-animation>
     <a-glow color="#ffffff" strength="2" intensity="0.2" flickerSpeed="0"></a-glow>
   
      

      
  <a-plane
      position="4 1.73 -3"
      width="1"
      height="1"
      id="k2_oreek-12"
      src="#k2_oreek-12"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="-5 1.73 -5"
      width="1"
      height="1"
      id="k2_oreek-4"
      src="#k2_oreek-4"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="3 1.73 0"
      width="1"
      height="1"
      id="k2_oreek-3"
      src="#k2_oreek-3"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="4 1.73 0"
      width="1"
      height="1"
      id="k2_oreek-9"
      src="#k2_oreek-9"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="3 1.73 -5"
      width="1"
      height="1"
      id="k2_oreek-14"
      src="#k2_oreek-14"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="-2 1.73 1"
      width="1"
      height="1"
      id="k2_oreek-11"
      src="#k2_oreek-11"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="-4 1.73 -5"
      width="1"
      height="1"
      id="k2_oreek-6"
      src="#k2_oreek-6"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="-1 1.73 0"
      width="1"
      height="1"
      id="k2_oreek-2"
      src="#k2_oreek-2"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="-1 1.73 1"
      width="1"
      height="1"
      id="k2_oreek-7"
      src="#k2_oreek-7"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="0 1.73 3"
      width="1"
      height="1"
      id="k2_oreek"
      src="#k2_oreek"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="-3 1.73 -4"
      width="1"
      height="1"
      id="k2_oreek-10"
      src="#k2_oreek-10"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="1 1.73 1"
      width="1"
      height="1"
      id="k2_oreek-8"
      src="#k2_oreek-8"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="-2 1.73 2"
      width="1"
      height="1"
      id="k2_oreek-5"
      src="#k2_oreek-5"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="4 1.73 1"
      width="1"
      height="1"
      id="k2_oreek-15"
      src="#k2_oreek-15"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="-2 1.73 0"
      width="1"
      height="1"
      id="k2_oreek-13"
      src="#k2_oreek-13"
      material="shader:flat"
      side="double"
      ></a-plane>

  <a-plane
      position="1 1.73 2"
      width="1"
      height="1"
      id="k2_oreek-16"
      src="#k2_oreek-16"
      material="shader:flat"
      side="double"
      ></a-plane>

        <a-plane position="0 -.5 0" side="double" rotation="90 0 0" 
                  scale="4 4 4" width="60" height="60" 
                  displacementmap="src: assets/img/floor.png" 
             displacementbias="0.5" 
             displacementscale="3"
             segments-height="200"
             segments-width="200"
                  material="src: assets/img/floor.png;
                  shader: standard; roughness: 1; repeat: 33 33;   
                  transparent: true"></a-plane>
        
        <a-sky src="assets/img/sky.png"
               material="repeat:6 6" position="0 -3 1" 
               animation="property: rotation; to: 0 360 0; loop: true; dur: 70000" 
             ></a-sky>
        
      
     

      
      <a-entity id="camera"
      wasd-controls="acceleration: 10;"
      movement-controls="fly: false; speed: 0.05"
      camera="active: true"
      look-controls="pointerLockEnabled: true"
      cursor="rayOrigin: mouse; fuse: true" 
      raycaster="objects: raycastable"
      position="-2 1.7 39.579"
    ><a-cursor position="0 0 0" scale="0 0 0"></a-cursor>
    </a-entity>
    
    <!--fake sky for live code
    plane and box manual position, erase them if not needed for hydra to work-->

  

    <!-- <a-sphere id="fake_sky" scale="200 200 200" position="1 1 1" side="double" material="repeat: 1 3 0"
    animation="property: opacity; from: 1; to: 0; loop: true; dir: alternate; dur: 50000
    "></a-sphere> -->

    <a-sphere id="fake_sky" class="hydra-surface" scale="200 200 200" position="1 1 1" side="double" material="shader: flat; repeat: 1 3 0"></a-sphere>
    

      </a-scene>
            <script >0
          // Naoto Hieda
        let hydra, hydraCanvas;
        hydraCanvas = document.createElement("canvas");
        hydraCanvas.width = 512;
        hydraCanvas.height = 512;
        hydraCanvas.id = "hydraCanvas";
        document.querySelector("a-assets").appendChild(hydraCanvas);

        hydra = new Hydra({
          canvas: hydraCanvas,
          enableStreamCapture: false,
          detectAudio: false,
          width: 512,
          height: 512,
        });

        s0.initCam()
src(s0)
.modulate(noise(4),()=>a.fft[2])
.saturate( () => Math.sin(time) * 1 )
.out(o0)

        let delta = 0;
        AFRAME.registerComponent("canvas-updater", {
          dependencies: ["geometry", "material"],
    
          tick: function () {
            var el = this.el;
            var material;
    
            material = el.getObject3D("mesh").material;
            if (!material.map) {
              return;
            }
            material.map.needsUpdate = true;
          }
        });
    

        //select the geo
        // AFRAME.registerComponent("aframe-init", {
        //   init: function () {
        //     document.querySelector("a-box").setAttribute("canvas-updater", "");
        //     document.querySelector("a-box").setAttribute("material", "src:#hydraCanvas");
        //     document.querySelector("a-sphere").setAttribute("canvas-updater", "");
        //     document.querySelector("a-sphere").setAttribute("material", "src:#hydraCanvas");
        //     document.querySelector("a-plane").setAttribute("canvas-updater", "");
        //     document.querySelector("a-plane").setAttribute("material", "src:#hydraCanvas");
           
    
        //   },
        //   tick: function (time, deltaTime) {
        //     delta += deltaTime;
        //   }
        // });

        AFRAME.registerComponent("aframe-init", {
            init: function () {
                // Target fake_sky specifically for the hydra visuals
            let fakeSky = document.querySelector("#fake_sky");
            fakeSky.setAttribute("canvas-updater", "");
            fakeSky.setAttribute("material", "src:#hydraCanvas; shader: flat; side: double;");
            
            // Optional: Also apply to other specific elements you want the visuals on
            let hydraSurfaces = document.querySelectorAll(".hydra-surface");
            hydraSurfaces.forEach(surface => {
            surface.setAttribute("canvas-updater", "");
            surface.setAttribute("material", "src:#hydraCanvas; shader: flat;");
            });
            },
                tick: function (time, deltaTime) {
                    delta += deltaTime;
            }
        });
    
      </script>

<button id="music"  
style="
position:fixed;bottom:10px;left:15px;background-color: rgb(199, 199, 199);
border: none;font-size: medium; font-size: monospace; ">P L A Y 🔊</button>






<div style="background-color: black;"><pre style="background-color: BLACK;color: white;position:fixed;top:2px;left: 43%;">    ROOM2 - Oreek    </pre>
</div>

<div>
<img id="myButton" class="icon_kwh" src="assets\img\logo_t.png">
</div>
<script>
const audio = new Audio("assets/ku_2.mp3");
const buttons = document.querySelectorAll("button");

buttons.forEach(button => {
button.addEventListener("click", () => {
  audio.play();
});


});

</script>
</div> 
      </body>
      </html>
      
