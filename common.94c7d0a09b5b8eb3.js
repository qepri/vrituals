"use strict";(self.webpackChunkfront_simple=self.webpackChunkfront_simple||[]).push([[76],{3317:(f,d,a)=>{a.d(d,{AF:()=>g,fi:()=>u,gU:()=>l,ss:()=>e});var l=function(r){return r.DOCUMENTARY="documentary",r.FICTION="fiction",r.ANIMATION="animation",r.EXPERIMENTAL="experimental",r.VIDEO_ART="video_art",r.ESSAY="essay",r.HYBRID="hybrid",r}(l||{}),e=function(r){return r.COLOR="color",r.BLACK_AND_WHITE="black_and_white",r.MIXED="mixed",r}(e||{}),g=function(r){return r.DIRECTOR="director",r.WRITER="writer",r.PRODUCER="producer",r.KEY_CAST="key_cast",r}(g||{}),u=function(r){return r.SCREENING="screening",r.DISTRIBUTION="distribution",r}(u||{})},6717:(f,d,a)=>{a.d(d,{_r:()=>n,Cp:()=>r.C,_s:()=>u,a5:()=>m});var l=a(5312),e=a(1946),c=a(4438),g=a(1626);let u=(()=>{class i{constructor(t){this.http=t,this.apiUrl=l.c.apiUrl}create(t){return this.http.post(`${this.apiUrl}${e.F.FILMMAKERS}`,t)}getAll(){return this.http.get(`${this.apiUrl}${e.F.FILMMAKERS}`)}getMyProfile(){return this.http.get(`${this.apiUrl}${e.F.FILMMAKERS_ME}`)}getOne(t){return this.http.get(`${this.apiUrl}${e.F.FILMMAKERS}/${t}`)}update(t,o){return this.http.patch(`${this.apiUrl}${e.F.FILMMAKERS}/${t}`,o)}delete(t){return this.http.delete(`${this.apiUrl}${e.F.FILMMAKERS}/${t}`)}static{this.\u0275fac=function(o){return new(o||i)(c.KVO(g.Qq))}}static{this.\u0275prov=c.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var r=a(4680);let n=(()=>{class i{constructor(t){this.http=t,this.apiUrl=l.c.apiUrl}create(t){return this.http.post(`${this.apiUrl}${e.F.FILMS}`,t)}getAll(){return this.http.get(`${this.apiUrl}${e.F.FILMS}`)}getOne(t){return this.http.get(`${this.apiUrl}${e.F.FILMS}/${t}`)}getByFilmMaker(t){return this.http.get(`${this.apiUrl}${e.F.FILMS}/filmmaker/${t}`)}update(t,o){return this.http.patch(`${this.apiUrl}${e.F.FILMS}/${t}`,o)}delete(t){return this.http.delete(`${this.apiUrl}${e.F.FILMS}/${t}`)}incrementViews(t){return this.http.post(`${this.apiUrl}${e.F.FILMS}/${t}/view`,{})}static{this.\u0275fac=function(o){return new(o||i)(c.KVO(g.Qq))}}static{this.\u0275prov=c.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var s=a(467);let m=(()=>{class i{constructor(t){this.http=t,this.baseUrl=`${l.c.apiUrl}/film-uploads`,this.MAX_FILE_SIZE=5242880,this.TARGET_SIZE=1048576}uploadProfileImage(t,o){console.log("[ImageUploadService] uploadProfileImage called with file:",t),console.log("[ImageUploadService] File details:",{name:t?.name,size:t?.size,type:t?.type,lastModified:t?.lastModified}),console.log("[ImageUploadService] Director name:",o);const p=new FormData;p.append("file",t,t.name),p.append("directorName",o),console.log("[ImageUploadService] FormData created");for(const h of p.entries())console.log("[ImageUploadService] FormData entry:",h[0],h[1]);return this.http.post(`${this.baseUrl}/profile-image`,p)}uploadPosterImage(t,o,p){const h=new FormData;return h.append("file",t),h.append("filmTitle",o),p&&h.append("year",p),this.http.post(`${this.baseUrl}/poster-image`,h)}uploadStillImages(t,o,p){const h=new FormData;return t.forEach($=>{h.append("files",$)}),h.append("filmTitle",o),p&&h.append("year",p),this.http.post(`${this.baseUrl}/still-images`,h)}validateImage(t){if(!["image/jpeg","image/png"].includes(t.type))return{valid:!1,error:"Solo se permiten archivos .jpg y .png"};const p=t.name.toLowerCase();return p.endsWith(".jpg")||p.endsWith(".jpeg")||p.endsWith(".png")?t.size>this.MAX_FILE_SIZE?{valid:!1,error:`El archivo es demasiado grande (m\xe1x. ${this.MAX_FILE_SIZE/1048576}MB). Por favor, comprime la imagen antes de subirla.`}:{valid:!0}:{valid:!1,error:"Solo se permiten archivos .jpg y .png"}}compressImage(t,o=this.TARGET_SIZE){return(0,s.A)(function*(){return t.size<=o?t:new Promise((p,h)=>{const $=new FileReader;$.readAsDataURL(t),$.onload=F=>{const I=new Image;I.src=F.target.result,I.onload=()=>{const U=document.createElement("canvas"),D=U.getContext("2d");if(!D)return void h(new Error("No se pudo crear el contexto del canvas"));let E=I.width,_=I.height;if(E>1920||_>1080){const v=Math.min(1920/E,1080/_);E*=v,_*=v}U.width=E,U.height=_,D.drawImage(I,0,0,E,_);let A=.9;const O=()=>{U.toBlob(v=>{if(!v)return void h(new Error("Error al comprimir la imagen"));if(v.size>o&&A>.5)return A-=.1,void O();const y=new File([v],t.name,{type:t.type,lastModified:Date.now()});p(y)},t.type,A)};O()},I.onerror=()=>{h(new Error("Error al cargar la imagen"))}},$.onerror=()=>{h(new Error("Error al leer el archivo"))}})})()}prepareImage(t){var o=this;return(0,s.A)(function*(){const p=o.validateImage(t);if(!p.valid)return{file:t,error:p.error};try{return{file:yield o.compressImage(t)}}catch(h){return{file:t,error:h.message||"Error al procesar la imagen"}}})()}formatFileSize(t){return t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB"}static{this.\u0275fac=function(o){return new(o||i)(c.KVO(g.Qq))}}static{this.\u0275prov=c.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},9226:(f,d,a)=>{a.d(d,{O:()=>l});var l=function(e){return e.ARTIST_PROFILES="artist-profiles/public",e.KWALHIA_ART="kwalhia-art",e.GALLERIES="galleries",e.SERIES="series",e.VR_CONFIGS="public/vr-configs",e.TEXTURES="public/textures",e.HYDRA_SCRIPTS="public/hydra-scripts",e}(l||{})},7343:(f,d,a)=>{a.d(d,{v:()=>u});var l=a(9226),e=a(5312),c=a(4438),g=a(1626);let u=(()=>{class r{constructor(s){this.http=s,this.baseUrl=e.c.apiUrl}getPublicHydraScript(s){return this.http.get(`${this.baseUrl}/${l.O.HYDRA_SCRIPTS}/${s}`)}getRandomHydraScript(){return this.http.get(`${this.baseUrl}/public/hydra-scripts/random`)}static{this.\u0275fac=function(m){return new(m||r)(c.KVO(g.Qq))}}static{this.\u0275prov=c.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},6332:(f,d,a)=>{a.d(d,{e:()=>u});var l=a(9226),e=a(3373),c=a(4438),g=a(1626);let u=(()=>{class r extends e.vA{constructor(s){super(s),this.endpoint=l.O.KWALHIA_ART}getRandomArtwork(){return this.http.get(`${this.apiUrl}/public/kwalhia-art/random`)}getPublicArtists(){return this.http.get(`${this.apiUrl}/artist-profiles/public/artists`)}static{this.\u0275fac=function(m){return new(m||r)(c.KVO(g.Qq))}}static{this.\u0275prov=c.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},7023:(f,d,a)=>{a.d(d,{$:()=>g});var l=a(2010),e=a(4438),c=a(1626);let g=(()=>{class u extends l.v{constructor(n){super(n),this.http=n,this.endpoint="vr-base-configs"}publishVrConfig(n){return this.http.post(`${this.apiUrl}/${this.endpoint}/${n}/publish`,{})}getMyConfigs(n){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-configs`,{params:{...n}})}getRandomConfig(n,s){return this.http.get(`${this.apiUrl}/${this.endpoint}/${n}/random/${s}`)}findOne(n){return this.http.get(`${this.apiUrl}/${this.endpoint}/${n}`)}update(n,s){return this.http.patch(`${this.apiUrl}/${this.endpoint}/${n}`,s)}create(n){return this.http.post(`${this.apiUrl}/${this.endpoint}`,n)}remove(n){return this.http.delete(`${this.apiUrl}/${this.endpoint}/${n}`)}static{this.\u0275fac=function(s){return new(s||u)(e.KVO(c.Qq))}}static{this.\u0275prov=e.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()},8590:(f,d,a)=>{function c(r){const n=JSON.stringify(r);let s=0;for(let m=0;m<n.length;m++)s=(s<<5)-s+n.charCodeAt(m),s|=0;return Math.abs(s).toString(16)}a.d(d,{Jh:()=>c})}}]);