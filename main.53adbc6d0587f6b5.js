(self.webpackChunkfront_simple=self.webpackChunkfront_simple||[]).push([[792],{6707:(Rt,Je,M)=>{"use strict";M.d(Je,{i5:()=>ri,oL:()=>_u,Yo:()=>mo,n5:()=>Sn,_r:()=>de,Nu:()=>fn,Oo:()=>An});var l=M(1774),H=M(177),h=M(4438),fe=M(5823);let X=(()=>{class et{constructor(q){this.themeService=q,this.isDarkTheme=this.themeService.isDarkTheme}toggleTheme(){this.themeService.toggleTheme()}static{this.\u0275fac=function(me){return new(me||et)(h.rXU(fe.Fs))}}static{this.\u0275cmp=h.VBU({type:et,selectors:[["app-theme-toggle"]],standalone:!0,features:[h.aNF],decls:3,vars:4,consts:[[1,"theme-toggle-btn",3,"click"],[1,"theme-icon"]],template:function(me,Fe){1&me&&(h.j41(0,"button",0),h.bIt("click",function(){return Fe.toggleTheme()}),h.j41(1,"span",1),h.nrm(2,"i"),h.k0s()()),2&me&&(h.BMQ("aria-label",Fe.isDarkTheme()?"Switch to light theme":"Switch to dark theme"),h.R7$(2),h.ZvI("\n        ",Fe.isDarkTheme()?"fa-solid fa-sun":"fa-solid fa-moon","\n         "))},dependencies:[H.MD],styles:[".theme-toggle-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;border:0px;background-color:transparent;color:var(--text);cursor:pointer;transition:all .3s ease}.theme-icon[_ngcontent-%COMP%]{font-size:1.2rem}.theme-text[_ngcontent-%COMP%]{font-size:.9rem}"]})}}return et})();var ie=M(33);let de=(()=>{class et{constructor(q){this.router=q}navigateToHome(){this.router.navigate([l.S.HOME])}static{this.\u0275fac=function(me){return new(me||et)(h.rXU(ie.Ix))}}static{this.\u0275cmp=h.VBU({type:et,selectors:[["app-navbar"]],standalone:!0,features:[h.aNF],decls:7,vars:0,consts:[[1,"navbar","mb-3","fixed-top",2,"background-color","transparent"],[1,"container-fluid"],[1,"btn","navbar-brand","position-absolute","top-50","start-50","translate-middle",3,"click"],[1,"m-0","rainbow-text","text-lowercase"],[1,"ms-auto"]],template:function(me,Fe){1&me&&(h.j41(0,"nav",0)(1,"div",1)(2,"button",2),h.bIt("click",function(){return Fe.navigateToHome()}),h.j41(3,"h1",3),h.EFF(4,"kwalhia"),h.k0s()(),h.j41(5,"div",4),h.nrm(6,"app-theme-toggle"),h.k0s()()())},dependencies:[X],styles:["h1[_ngcontent-%COMP%]{font-size:var(--font-size-h3);color:var(--text);letter-spacing:5px}.bg-body-tertiary[_ngcontent-%COMP%]{background-color:var(--bg)!important}.rainbow-text[_ngcontent-%COMP%]{background:linear-gradient(to right,var(--text) 20%,color-mix(in srgb,var(--text) 80%,transparent) 40%,color-mix(in srgb,var(--text) 60%,transparent) 60%,var(--text) 80%);background-size:200% auto;color:transparent;-webkit-background-clip:text;background-clip:text;animation:_ngcontent-%COMP%_shine 8s ease-in-out infinite;opacity:.9}@keyframes _ngcontent-%COMP%_shine{0%{background-position:-200% center}to{background-position:200% center}}"]})}}return et})();var Q=M(4221),z=M(467),L=M(5794),I=M(4909);const K=(et,Se)=>Se.stripeInvoiceId;function te(et,Se){if(1&et&&(h.nrm(0,"i",16),h.j41(1,"div")(2,"h6",17),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.j41(5,"p",17),h.EFF(6),h.nI1(7,"translate"),h.j41(8,"b"),h.EFF(9),h.k0s(),h.EFF(10,"!"),h.nrm(11,"br"),h.EFF(12),h.nI1(13,"translate"),h.k0s()()),2&et){const q=h.XpG();h.R7$(3),h.JRh(h.bMT(4,4,"BILLING.PRO_MEMBER")),h.R7$(3),h.SpI("",h.bMT(7,6,"BILLING.WELCOME_BACK"),", "),h.R7$(3),h.JRh(q.userName()),h.R7$(3),h.JRh(h.bMT(13,8,"BILLING.ENJOY_PREMIUM"))}}function ee(et,Se){if(1&et&&(h.nrm(0,"i",18),h.j41(1,"div")(2,"h6",17),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.j41(5,"p",17),h.EFF(6),h.nI1(7,"translate"),h.j41(8,"b"),h.EFF(9),h.k0s(),h.EFF(10,"!"),h.k0s()()),2&et){const q=h.XpG();h.R7$(3),h.JRh(h.bMT(4,3,"BILLING.FREE_ACCOUNT")),h.R7$(3),h.SpI("",h.bMT(7,5,"BILLING.UNLOCK_FEATURES"),", "),h.R7$(3),h.JRh(q.userName())}}function ue(et,Se){1&et&&(h.nrm(0,"span",22),h.EFF(1),h.nI1(2,"translate")),2&et&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"COMMON.REDIRECTING")," "))}function Ce(et,Se){1&et&&(h.EFF(0),h.nI1(1,"translate")),2&et&&h.SpI(" ",h.bMT(1,1,"BILLING.BUTTONS.UPGRADE")," ")}function Re(et,Se){if(1&et){const q=h.RV6();h.j41(0,"div",5)(1,"div",3)(2,"div",19)(3,"small",20),h.EFF(4),h.nI1(5,"translate"),h.k0s(),h.j41(6,"button",21),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG();return h.Njj(Fe.upgradeNow())}),h.DNE(7,ue,3,3)(8,Ce,2,3),h.k0s()()()()}if(2&et){const q=h.XpG();h.R7$(4),h.JRh(h.bMT(5,3,"BILLING.MESSAGES.PREMIUM_DESC")),h.R7$(2),h.Y8G("disabled",q.isCancelling()),h.R7$(),h.vxM(7,q.isCancelling()?7:8)}}function ye(et,Se){if(1&et){const q=h.RV6();h.j41(0,"tr")(1,"td"),h.EFF(2),h.nI1(3,"date"),h.k0s(),h.j41(4,"td"),h.EFF(5),h.k0s(),h.j41(6,"td"),h.EFF(7),h.k0s(),h.j41(8,"td")(9,"button",23),h.bIt("click",function(){const Fe=h.eBV(q).$implicit,ut=h.XpG();return h.Njj(ut.viewInvoice(Fe.pdfUrl))}),h.EFF(10),h.nI1(11,"translate"),h.k0s()()()}if(2&et){const q=Se.$implicit;h.R7$(2),h.JRh(h.i5U(3,5,q.createdAt,"mediumDate")),h.R7$(3),h.JRh(q.subscriptionType),h.R7$(2),h.Lme("",q.currency," ",q.amount,""),h.R7$(3),h.SpI(" ",h.bMT(11,8,"BILLING.INVOICES.VIEW_PDF")," ")}}function Te(et,Se){1&et&&(h.j41(0,"tr")(1,"td",24),h.EFF(2),h.nI1(3,"translate"),h.k0s()()),2&et&&(h.R7$(2),h.JRh(h.bMT(3,1,"BILLING.INVOICES.NO_INVOICES")))}function We(et,Se){if(1&et){const q=h.RV6();h.j41(0,"div",13)(1,"div",25)(2,"div",26)(3,"small",20),h.EFF(4),h.nI1(5,"translate"),h.k0s(),h.j41(6,"span"),h.EFF(7),h.nI1(8,"date"),h.k0s()(),h.j41(9,"div",26)(10,"small",20),h.EFF(11),h.nI1(12,"translate"),h.k0s(),h.j41(13,"span"),h.EFF(14),h.k0s()(),h.j41(15,"div",26)(16,"small",20),h.EFF(17),h.nI1(18,"translate"),h.k0s(),h.j41(19,"span"),h.EFF(20),h.k0s()(),h.j41(21,"div",27)(22,"button",23),h.bIt("click",function(){const Fe=h.eBV(q).$implicit,ut=h.XpG();return h.Njj(ut.viewInvoice(Fe.pdfUrl))}),h.EFF(23),h.nI1(24,"translate"),h.k0s()()()()}if(2&et){const q=Se.$implicit;h.R7$(4),h.SpI("",h.bMT(5,8,"BILLING.INVOICES.DATE"),":"),h.R7$(3),h.JRh(h.i5U(8,10,q.createdAt,"mediumDate")),h.R7$(4),h.SpI("",h.bMT(12,13,"BILLING.INVOICES.TYPE"),":"),h.R7$(3),h.JRh(q.subscriptionType),h.R7$(3),h.SpI("",h.bMT(18,15,"BILLING.INVOICES.AMOUNT"),":"),h.R7$(3),h.Lme("",q.currency," ",q.amount,""),h.R7$(3),h.SpI(" ",h.bMT(24,17,"BILLING.INVOICES.VIEW_PDF")," ")}}function He(et,Se){1&et&&(h.j41(0,"div",14),h.EFF(1),h.nI1(2,"translate"),h.k0s()),2&et&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"BILLING.INVOICES.NO_INVOICES")," "))}function ke(et,Se){if(1&et){const q=h.RV6();h.j41(0,"div",15)(1,"button",28),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG(),ut=h.sdS(41);return h.Njj(Fe.openCancelModal(ut))}),h.EFF(2),h.k0s()()}if(2&et){const q=h.XpG();h.R7$(),h.Y8G("disabled",q.isCancelling()),h.R7$(),h.SpI(" ",q.isCancelling()?"Cancelling...":"Cancel Subscription"," ")}}function Ke(et,Se){if(1&et&&(h.j41(0,"div",15)(1,"p"),h.EFF(2),h.nI1(3,"translate"),h.nI1(4,"date"),h.k0s()()),2&et){let q;const me=h.XpG();h.R7$(2),h.Lme("",h.bMT(3,2,"BILLING.MESSAGES.SUBSCRIPTION_ENDS"),": ",h.i5U(4,4,null==(q=me.subscriptionStatus())?null:q.subscriptionEndDate,"mediumDate")," ")}}function St(et,Se){1&et&&(h.j41(0,"div",29)(1,"p"),h.EFF(2),h.nI1(3,"translate"),h.k0s()()),2&et&&(h.R7$(2),h.JRh(h.bMT(3,1,"BILLING.MESSAGES.NO_SUBSCRIPTION")))}function pt(et,Se){if(1&et){const q=h.RV6();h.j41(0,"div",30)(1,"h5",31),h.EFF(2),h.nI1(3,"translate"),h.k0s(),h.j41(4,"button",32),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG();return h.Njj(Fe.modal.dismiss())}),h.k0s()(),h.j41(5,"div",33)(6,"p"),h.EFF(7),h.nI1(8,"translate"),h.k0s()(),h.j41(9,"div",34)(10,"button",35),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG();return h.Njj(null==Fe.modalRef?null:Fe.modalRef.dismiss())}),h.EFF(11),h.nI1(12,"translate"),h.k0s(),h.j41(13,"button",36),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG();return Fe.cancelSubscription(),h.Njj(null==Fe.modalRef?null:Fe.modalRef.close())}),h.EFF(14),h.nI1(15,"translate"),h.k0s()()}if(2&et){const q=h.XpG();h.R7$(2),h.JRh(h.bMT(3,5,"BILLING.BUTTONS.CANCEL")),h.R7$(5),h.JRh(h.bMT(8,7,"BILLING.MESSAGES.CANCEL_CONFIRM")),h.R7$(4),h.SpI(" ",h.bMT(12,9,"COMMON.CANCEL")," "),h.R7$(2),h.Y8G("disabled",q.isCancelling()),h.R7$(),h.SpI(" ",q.isCancelling()?"COMMON.PROCESSING":h.bMT(15,11,"BILLING.MESSAGES.CONFIRM_CANCEL")," ")}}let ct=(()=>{class et{constructor(){this.paymentService=(0,h.WQX)(fe.WG),this.stripeBillingService=(0,h.WQX)(fe.aT),this.toastr=(0,h.WQX)(L.tw),this.router=(0,h.WQX)(ie.Ix),this.activeOffcanvas=(0,h.WQX)(Q.DI,{optional:!0}),this.modalService=(0,h.WQX)(Q.Bq),this.activeModal=(0,h.WQX)(Q.Lw,{optional:!0}),this.userName=(0,h.hFB)(""),this.userIsPro=(0,h.hFB)(!1),this.invoices=(0,h.hFB)([]),this.subscriptionStatus=(0,h.hFB)(null),this.isLoading=(0,h.hFB)(!1),this.error=(0,h.vPA)(null),this.isCancelling=(0,h.vPA)(!1),this.isProcessing=(0,h.vPA)(!1),this.modalRef=null,this.appRoutes=(0,h.vPA)(l.S),this.navigateTo=(q,me)=>{this.closeModal(),this.router.navigate([q],me)}}closeModal(){this.activeModal&&this.activeModal.close(),this.activeOffcanvas&&this.activeOffcanvas.dismiss()}cancelSubscription(){this.isCancelling.set(!0),this.stripeBillingService.cancelSubscription().subscribe({next:q=>{this.toastr.success(q.message)},error:q=>{this.toastr.error(q.message||"Failed to cancel subscription")},complete:()=>{this.isCancelling.set(!1)}})}updatePaymentMethod(){this.isProcessing.set(!0),this.paymentService.createCheckoutSession("month").subscribe({next:q=>{q?.url&&(window.location.href=q.url)},error:q=>{this.toastr.error("Failed to update payment method")},complete:()=>{this.isProcessing.set(!1)}})}viewInvoice(q){window.open(q,"_blank")}reactivateSubscription(){this.isProcessing.set(!0),this.paymentService.createCheckoutSession("month").subscribe({next:q=>{q?.url&&(window.location.href=q.url)},error:q=>{this.toastr.error("Failed to reactivate subscription")},complete:()=>{this.isProcessing.set(!1)}})}upgradeNow(){this.isProcessing.set(!0),this.paymentService.createCheckoutSession("month").subscribe({next:q=>{q?.url&&(window.location.href=q.url)},error:q=>{this.toastr.error("Failed to initiate upgrade")},complete:()=>{this.isProcessing.set(!1)}})}openCancelModal(q){this.modalRef=this.modalService.open(q,{centered:!0,backdrop:"static"}),this.modalRef.result.then(()=>{this.cancelSubscription()},()=>{})}static{this.\u0275fac=function(me){return new(me||et)}}static{this.\u0275cmp=h.VBU({type:et,selectors:[["app-billing"]],inputs:{userName:[h.Mj6.SignalBased,"userName"],userIsPro:[h.Mj6.SignalBased,"userIsPro"],invoices:[h.Mj6.SignalBased,"invoices"],subscriptionStatus:[h.Mj6.SignalBased,"subscriptionStatus"],isLoading:[h.Mj6.SignalBased,"isLoading"]},standalone:!0,features:[h.aNF],decls:42,vars:20,consts:[["cancelModal",""],[1,"container","p-3"],[1,"card","bg-primary","text-white","mb-4"],[1,"card-body"],[1,"d-flex","align-items-center"],[1,"card","my-3"],[1,"card","mb-4"],[1,"p-3"],[1,"mb-3"],[1,"d-none","d-md-block"],[1,"table-responsive"],[1,"table","mb-0"],[1,"d-md-none"],[1,"card","mb-2"],[1,"text-center","py-3"],[1,"d-flex","justify-content-end"],[1,"fas","fa-crown","me-2","p-md-5"],[1,"mb-0"],[1,"fas","fa-user","me-2","p-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted"],[1,"btn","btn-sm","btn-success",3,"click","disabled"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],["colspan","4",1,"text-center"],[1,"card-body","p-3",2,"border","none !important"],[1,"d-flex","justify-content-between","mb-2"],[1,"d-grid"],[1,"btn","btn-link","m-3",3,"click","disabled"],[1,"d-flex","justify-content-end","px-4"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"]],template:function(me,Fe){if(1&me&&(h.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),h.DNE(4,te,14,10)(5,ee,11,7),h.k0s()()(),h.DNE(6,Re,9,5,"div",5),h.j41(7,"div",6)(8,"div",7)(9,"h6",8),h.EFF(10),h.nI1(11,"translate"),h.k0s(),h.j41(12,"div",9)(13,"div",10)(14,"table",11)(15,"thead")(16,"tr")(17,"th"),h.EFF(18),h.nI1(19,"translate"),h.k0s(),h.j41(20,"th"),h.EFF(21),h.nI1(22,"translate"),h.k0s(),h.j41(23,"th"),h.EFF(24),h.nI1(25,"translate"),h.k0s(),h.j41(26,"th"),h.EFF(27),h.nI1(28,"translate"),h.k0s()()(),h.j41(29,"tbody"),h.Z7z(30,ye,12,10,"tr",null,K,!1,Te,4,3,"tr"),h.k0s()()()(),h.j41(33,"div",12),h.Z7z(34,We,25,19,"div",13,K,!1,He,3,3,"div",14),h.k0s()(),h.DNE(37,ke,3,2,"div",15)(38,Ke,5,7)(39,St,4,3)(40,pt,16,13,"ng-template",null,0,h.C5r),h.k0s()()),2&me){let ut;h.R7$(4),h.vxM(4,!0===Fe.userIsPro()?4:5),h.R7$(2),h.vxM(6,!0!==Fe.userIsPro()?6:-1),h.R7$(4),h.SpI(" ",h.bMT(11,10,"BILLING.INVOICES.TITLE")," "),h.R7$(8),h.JRh(h.bMT(19,12,"BILLING.INVOICES.DATE")),h.R7$(3),h.JRh(h.bMT(22,14,"BILLING.INVOICES.TYPE")),h.R7$(3),h.JRh(h.bMT(25,16,"BILLING.INVOICES.AMOUNT")),h.R7$(3),h.JRh(h.bMT(28,18,"BILLING.INVOICES.ACTIONS")),h.R7$(3),h.Dyx(Fe.invoices()),h.R7$(4),h.Dyx(Fe.invoices()),h.R7$(3),h.vxM(37,!0===(null==(ut=Fe.subscriptionStatus())?null:ut.isSubscribed)?37:!1===(null==(ut=Fe.subscriptionStatus())?null:ut.isSubscribed)&&!1!==(null==(ut=Fe.subscriptionStatus())?null:ut.cancelAtPeriodEnd)?38:!1===(null==(ut=Fe.subscriptionStatus())?null:ut.isSubscribed)?39:-1)}},dependencies:[H.vh,I.h,I.D9]})}}return et})();var le=M(4843),x=M(9417);let C=(()=>{class et{constructor(q,me,Fe){this.accountSettings=q,this.toastr=me,this.fb=Fe,this.settingsForm=this.fb.group({language:[this.accountSettings.currentLanguage()]})}ngOnInit(){this.settingsForm.patchValue({language:this.accountSettings.currentLanguage()})}onSubmit(){this.settingsForm.valid&&this.settingsForm.dirty&&(this.accountSettings.updateLanguage(this.settingsForm.value.language),this.toastr.success("Language updated"),this.settingsForm.markAsPristine())}static{this.\u0275fac=function(me){return new(me||et)(h.rXU(fe.Yf),h.rXU(L.tw),h.rXU(x.ok))}}static{this.\u0275cmp=h.VBU({type:et,selectors:[["app-account-settings"]],standalone:!0,features:[h.aNF],decls:18,vars:11,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","language",1,"form-label"],["id","language","formControlName","language",1,"form-select"],["value","en"],["value","es"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(me,Fe){1&me&&(h.j41(0,"div",0)(1,"div",1)(2,"h5",2),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.j41(5,"form",3),h.bIt("ngSubmit",function(){return Fe.onSubmit()}),h.j41(6,"div",4)(7,"label",5),h.EFF(8),h.nI1(9,"translate"),h.k0s(),h.j41(10,"select",6)(11,"option",7),h.EFF(12,"English"),h.k0s(),h.j41(13,"option",8),h.EFF(14,"Espa\xf1ol"),h.k0s()()(),h.j41(15,"button",9),h.EFF(16),h.nI1(17,"translate"),h.k0s()()()()),2&me&&(h.R7$(3),h.JRh(h.bMT(4,5,"SETTINGS.LANGUAGE.TITLE")),h.R7$(2),h.Y8G("formGroup",Fe.settingsForm),h.R7$(3),h.JRh(h.bMT(9,7,"SETTINGS.LANGUAGE.DISPLAY")),h.R7$(7),h.Y8G("disabled",Fe.settingsForm.pristine),h.R7$(),h.SpI(" ",h.bMT(17,9,"SETTINGS.LANGUAGE.SAVE")," "))},dependencies:[x.X1,x.qT,x.xH,x.y7,x.wz,x.BC,x.cb,x.j4,x.JD,I.h,I.D9,x.YN]})}}return et})();const j=(et,Se)=>Se.id;function J(et,Se){if(1&et){const q=h.RV6();h.j41(0,"button",7),h.bIt("click",function(){const Fe=h.eBV(q).$implicit,ut=h.XpG();return h.Njj(ut.setActiveSection(Fe.id))}),h.nrm(1,"i"),h.EFF(2),h.nI1(3,"translate"),h.k0s()}if(2&et){const q=Se.$implicit,me=h.XpG();h.AVh("active",me.activeSection()===q.id),h.R7$(),h.ZvI("p-2 fas ",q.icon,""),h.R7$(),h.SpI(" ",h.bMT(3,6,q.label)," ")}}function _e(et,Se){1&et&&(h.j41(0,"div",8)(1,"div",9)(2,"span",10),h.EFF(3," Initializing... "),h.k0s()()())}function Ee(et,Se){1&et&&(h.j41(0,"div",11)(1,"div",9)(2,"span",10),h.EFF(3," Loading... "),h.k0s()()())}function Ve(et,Se){if(1&et){const q=h.RV6();h.j41(0,"div",12),h.EFF(1),h.nI1(2,"translate"),h.j41(3,"button",13),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG();return h.Njj(Fe.refreshData())}),h.EFF(4),h.nI1(5,"translate"),h.k0s()()}2&et&&(h.R7$(),h.SpI(" ",h.bMT(2,2,"BILLING.MESSAGES.FAILED_LOAD")," "),h.R7$(3),h.SpI(" ",h.bMT(5,4,"COMMON.TRY")," "))}function Ne(et,Se){if(1&et&&(h.j41(0,"div",14)(1,"h3"),h.EFF(2),h.nI1(3,"translate"),h.k0s(),h.nrm(4,"app-billing",15),h.k0s()),2&et){const q=h.XpG(2);h.R7$(2),h.SpI(" ",h.bMT(3,6,"BILLING.TITLE")," "),h.R7$(2),h.Y8G("userName",q.userName())("userIsPro",q.userIsPro())("invoices",q.invoices())("subscriptionStatus",q.subscriptionStatus())("isLoading","loading"===q.requestState())}}function V(et,Se){1&et&&(h.j41(0,"div",16)(1,"h3"),h.EFF(2),h.nI1(3,"translate"),h.k0s(),h.nrm(4,"app-account-settings"),h.k0s()),2&et&&(h.R7$(2),h.SpI(" ",h.bMT(3,1,"SETTINGS.TITLE")," "))}function Oe(et,Se){1&et&&(h.j41(0,"div",16)(1,"h3"),h.EFF(2),h.nI1(3,"translate"),h.k0s(),h.j41(4,"p"),h.EFF(5),h.nI1(6,"translate"),h.k0s()()),2&et&&(h.R7$(2),h.SpI(" ",h.bMT(3,2,"SETTINGS.SELECT_OPTIONS")," "),h.R7$(3),h.SpI(" ",h.bMT(6,4,"SETTINGS.CHOSE_SECTION")," "))}function Ot(et,Se){if(1&et&&h.DNE(0,Ne,5,8)(1,V,5,3)(2,Oe,7,6),2&et){let q;const me=h.XpG();h.vxM(0,"billing"===(q=me.activeSection())?0:"settings"===q?1:2)}}function ot(et,Se){1&et&&(h.j41(0,"div",11)(1,"p"),h.EFF(2),h.nI1(3,"translate"),h.k0s()()),2&et&&(h.R7$(2),h.SpI(" ",h.bMT(3,1,"COMMON.NO_DATA")," "))}function Ut(et,Se){1&et&&(h.j41(0,"div",11)(1,"p"),h.EFF(2),h.nI1(3,"translate"),h.k0s()()),2&et&&(h.R7$(2),h.SpI(" ",h.bMT(3,1,"COMMON.LOAD_END")," "))}let ze=(()=>{class et{constructor(){this.stripeBillingService=(0,h.WQX)(fe.aT),this.toastr=(0,h.WQX)(L.tw),this.translate=(0,h.WQX)(I.c$),this.userName=(0,h.hFB)(""),this.userIsPro=(0,h.hFB)(!1),this.menuItems=[{id:"billing",label:"PROFILE_CONFIG.MENU_SIDE.BILLING",icon:"fa-credit-card"},{id:"settings",label:"PROFILE_CONFIG.MENU_SIDE.SETTINGS",icon:"fa-cog"}],this.activeSection=(0,h.vPA)("billing"),this.invoices=(0,h.vPA)([]),this.subscriptionStatus=(0,h.vPA)(null),this.requestState=(0,h.vPA)("no-result")}ngOnInit(){this.fetchInitialData()}fetchInitialData(){var q=this;return(0,z.A)(function*(){console.log("Starting fetch..."),q.requestState.set("starting");try{console.log("Loading..."),q.requestState.set("loading");const[me,Fe]=yield Promise.all([(0,le._)(q.stripeBillingService.getUserInvoices()),(0,le._)(q.stripeBillingService.getSubscriptionStatus())]);console.log("Responses:",{invoicesResponse:me,statusResponse:Fe}),me&&q.invoices.set(me),Fe&&q.subscriptionStatus.set(Fe),console.log("Success"),q.requestState.set("success")}catch(me){console.error("Error fetching billing data:",me),q.requestState.set("error")}finally{console.log("Finalized"),q.requestState.set("success")}})()}setActiveSection(q){this.activeSection.set(q)}refreshData(){this.fetchInitialData()}static{this.\u0275fac=function(me){return new(me||et)}}static{this.\u0275cmp=h.VBU({type:et,selectors:[["app-profile-config"]],inputs:{userName:[h.Mj6.SignalBased,"userName"],userIsPro:[h.Mj6.SignalBased,"userIsPro"]},standalone:!0,features:[h.aNF],decls:17,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-3","p-3","border-end"],[1,"mb-4"],[1,"list-group"],[1,"list-group-item","list-group-item-action","d-flex","align-items-center","gap-3","p-2",3,"active"],[1,"col-md-9"],[1,"list-group-item","list-group-item-action","d-flex","align-items-center","gap-3","p-2",3,"click"],[1,"p-1","text-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"p-4","text-center"],[1,"alert","alert-danger","m-3"],[1,"btn","btn-link",3,"click"],[1,"p-0"],[3,"userName","userIsPro","invoices","subscriptionStatus","isLoading"],[1,"p-1"]],template:function(me,Fe){if(1&me&&(h.j41(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h4",3),h.EFF(5),h.nI1(6,"translate"),h.k0s(),h.j41(7,"div",4),h.Z7z(8,J,4,8,"button",5,j),h.k0s()(),h.j41(10,"div",6),h.DNE(11,_e,4,0)(12,Ee,4,0)(13,Ve,6,6)(14,Ot,3,1)(15,ot,4,3)(16,Ut,4,3),h.k0s()()()()),2&me){let ut;h.R7$(5),h.JRh(h.bMT(6,2,"NAV.SETTINGS")),h.R7$(3),h.Dyx(Fe.menuItems),h.R7$(3),h.vxM(11,"starting"===(ut=Fe.requestState())?11:"loading"===ut?12:"error"===ut?13:"success"===ut?14:"no-result"===ut?15:16)}},dependencies:[H.MD,ct,C,I.h,I.D9]})}}return et})();const Mt=["profileConfigModal"],st=["profileConfigOffcanvas"];function je(et,Se){if(1&et){const q=h.RV6();h.j41(0,"button",21),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG();return h.Njj(Fe.navigateTo(Fe.appRoutes().UPGRADE))}),h.EFF(1),h.nI1(2,"translate"),h.k0s()}2&et&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"NAV.UPGRADE")," "))}function yt(et,Se){if(1&et){const q=h.RV6();h.j41(0,"button",21),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG();return h.Njj(Fe.navigateTo(Fe.appRoutes().CREATE))}),h.EFF(1),h.nI1(2,"translate"),h.k0s()}2&et&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"NAV.CREATE")," "))}function Yt(et,Se){if(1&et){const q=h.RV6();h.j41(0,"div",22)(1,"div",23)(2,"button",24),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG();return h.Njj(Fe.closeModal())}),h.k0s()(),h.j41(3,"div",25)(4,"app-profile-config",26),h.bIt("launchComponent",function(){h.eBV(q);const Fe=h.XpG();return h.Njj(Fe.openModal())}),h.k0s()()()}if(2&et){const q=h.XpG();h.R7$(4),h.Y8G("userName",q.userName())("userIsPro",q.userIsPro())}}function dn(et,Se){if(1&et){const q=h.RV6();h.j41(0,"div",27)(1,"div",28)(2,"button",29),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG();return h.Njj(Fe.closeOffcanvas())}),h.k0s()(),h.j41(3,"div",30)(4,"app-profile-config",31),h.bIt("launchComponent",function(){h.eBV(q);const Fe=h.XpG();return h.Njj(Fe.openOffCanvas())}),h.k0s()()()}}let fn=(()=>{class et{constructor(q,me,Fe){this.router=q,this.modalService=me,this.offcanvasService=Fe,this.userName=(0,h.hFB)(""),this.logout=(0,h.CGW)(),this.userIsPro=(0,h.hFB)(!1),this.profileConfigModal=(0,h.ebz)("profileConfigModal"),this.profileConfigOffcanvas=(0,h.ebz)("profileConfigOffcanvas"),this.appRoutes=(0,h.vPA)(l.S),this.isMenuCollapsed=!0,this.toggleSidebar=(0,h.CGW)(),this.navigateTo=(ut,kt)=>{this.router.navigate([ut],kt),this.isMenuCollapsed=!0},this.modalRef=null,this.offcanvasRef=null}onLogout(){this.logout.emit()}openModal(){const q=this.modalService.open(this.profileConfigModal(),{fullscreen:!0,keyboard:!0,backdrop:"static",centered:!0,animation:!0});return this.modalRef=q,this.isMenuCollapsed=!0,q}openOffCanvas(){this.offcanvasRef&&this.offcanvasRef.dismiss();const q=this.offcanvasService.open(this.profileConfigOffcanvas(),{position:"bottom",backdrop:"static"});return this.offcanvasRef=q,q}closeModal(){this.modalRef&&(this.modalRef.close(),this.modalRef=null)}closeOffcanvas(){this.offcanvasRef&&(this.offcanvasRef.dismiss(),this.offcanvasRef=null)}static{this.\u0275fac=function(me){return new(me||et)(h.rXU(ie.Ix),h.rXU(Q.Bq),h.rXU(Q.RS))}}static{this.\u0275cmp=h.VBU({type:et,selectors:[["app-private-navbar"]],viewQuery:function(me,Fe){1&me&&(h.wEZ(Fe.profileConfigModal,Mt,5),h.wEZ(Fe.profileConfigOffcanvas,st,5)),2&me&&h.NyB(2)},inputs:{userName:[h.Mj6.SignalBased,"userName"],userIsPro:[h.Mj6.SignalBased,"userIsPro"]},outputs:{logout:"logout",toggleSidebar:"toggleSidebar"},standalone:!0,features:[h.aNF],decls:32,vars:7,consts:[["profileConfigModal",""],["profileConfigOffcanvas",""],[1,"navbar","fixed-top","navbar-expand-md","bg-body-tertiary"],[1,"container-fluid"],[1,"d-flex","align-items-center"],[1,"btn","btn-link","me-2",3,"click"],[1,"fas","fa-bars"],[1,"position-absolute","start-50","translate-middle-x","d-none","d-md-block"],[1,"btn","navbar-brand",3,"click"],[1,"m-0","rainbow-text","text-lowercase"],[1,"d-md-none","mx-auto"],["type","button",1,"navbar-toggler",3,"click"],[1,"fa-solid","fa-hamsa","nav-icon"],["id","navbarText",1,"collapse","navbar-collapse",3,"ngbCollapse"],[1,"navbar-nav","me-auto","mb-lg-0"],[1,"nav-item","btn-nav"],[1,"navbar-text","d-flex","align-items-center","px-2"],[1,"btn","nav-link",3,"click"],[1,"vr","mx-2"],[1,"navbar-text","d-flex","align-items-center"],[1,"btn","btn-primary"],[1,"btn","btn-primary",3,"click"],[1,"modal-content"],[1,"modal-header","d-flex","justify-content-between","align-items-center"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","m-3"],[3,"launchComponent","userName","userIsPro"],[1,"offcanvas-content"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close",3,"click"],[1,"offcanvas-body","m-3"],[3,"launchComponent"]],template:function(me,Fe){if(1&me){const ut=h.RV6();h.j41(0,"nav",2)(1,"div",3)(2,"div",4)(3,"button",5),h.bIt("click",function(){return h.eBV(ut),h.Njj(Fe.toggleSidebar.emit())}),h.nrm(4,"i",6),h.k0s()(),h.j41(5,"div",7)(6,"button",8),h.bIt("click",function(){return h.eBV(ut),h.Njj(Fe.navigateTo(Fe.appRoutes().DASH))}),h.j41(7,"h1",9),h.EFF(8,"kwalhia"),h.k0s()()(),h.j41(9,"div",10)(10,"button",8),h.bIt("click",function(){return h.eBV(ut),h.Njj(Fe.navigateTo(Fe.appRoutes().DASH))}),h.j41(11,"h1",9),h.EFF(12,"kwalhia"),h.k0s()()(),h.j41(13,"button",11),h.bIt("click",function(){return h.eBV(ut),h.Njj(Fe.isMenuCollapsed=!Fe.isMenuCollapsed)}),h.nrm(14,"i",12),h.k0s(),h.j41(15,"div",13)(16,"ul",14),h.nrm(17,"li",15),h.k0s(),h.j41(18,"div",16)(19,"span")(20,"button",17),h.bIt("click",function(){return h.eBV(ut),h.Njj(Fe.openModal())}),h.EFF(21),h.nI1(22,"translate"),h.k0s()(),h.nrm(23,"div",18)(24,"app-theme-toggle"),h.k0s(),h.j41(25,"span",19),h.DNE(26,je,3,3,"button",20)(27,yt,3,3),h.k0s()()()(),h.DNE(28,Yt,5,2,"ng-template",null,0,h.C5r)(30,dn,5,0,"ng-template",null,1,h.C5r)}2&me&&(h.R7$(13),h.BMQ("aria-expanded",!Fe.isMenuCollapsed),h.R7$(2),h.Y8G("ngbCollapse",Fe.isMenuCollapsed),h.R7$(6),h.Lme(" ",h.bMT(22,5,"NAV.HI")," ",Fe.userName()," "),h.R7$(5),h.vxM(26,!1===Fe.userIsPro()?26:27))},dependencies:[X,Q.HC,Q.$G,I.h,I.D9,ze],styles:["h1[_ngcontent-%COMP%]{font-size:var(--font-size-h3);color:var(--text);letter-spacing:5px}.bg-body-tertiary[_ngcontent-%COMP%]{background-color:var(--bg)!important}.rainbow-text[_ngcontent-%COMP%]{background:linear-gradient(to right,var(--text) 20%,color-mix(in srgb,var(--text) 80%,transparent) 40%,color-mix(in srgb,var(--text) 60%,transparent) 60%,var(--text) 80%);background-size:200% auto;color:transparent;-webkit-background-clip:text;background-clip:text;animation:_ngcontent-%COMP%_shine 8s ease-in-out infinite;opacity:.9}@keyframes _ngcontent-%COMP%_shine{0%{background-position:-200% center}to{background-position:200% center}}"]})}}return et})(),Sn=(()=>{class et{static{this.\u0275fac=function(me){return new(me||et)}}static{this.\u0275cmp=h.VBU({type:et,selectors:[["app-footer"]],standalone:!0,features:[h.aNF],decls:10,vars:3,consts:[[1,"py-3","my-4"],[1,"text-center","text-body-secondary"],[1,"nav","justify-content-center","pb-3","mb-3"],[1,"nav-item"],["href","#",1,"nav-link","text-body-secondary"]],template:function(me,Fe){1&me&&(h.j41(0,"footer",0)(1,"p",1),h.EFF(2),h.nI1(3,"translate"),h.nrm(4,"br"),h.k0s(),h.nrm(5,"hr"),h.j41(6,"ul",2)(7,"li",3)(8,"a",4),h.EFF(9,"Symbolic transferences of isomorphic light "),h.k0s()()()()),2&me&&(h.R7$(2),h.JRh(h.bMT(3,1,"FOOTER.RIGHTS")))},dependencies:[I.h,I.D9],styles:["footer[_ngcontent-%COMP%]{position:relative}"]})}}return et})(),at=(()=>{class et{constructor(){this.id="",this.placeholder="",this.control=new x.MJ(""),this.showPassword=!1,this.onChange=()=>{},this.onTouched=()=>{},this.control.valueChanges.subscribe(q=>{this.onChange(q)})}togglePasswordVisibility(){this.showPassword=!this.showPassword}writeValue(q){this.control.setValue(q,{emitEvent:!1})}registerOnChange(q){this.onChange=q}registerOnTouched(q){this.onTouched=q}setDisabledState(q){q?this.control.disable():this.control.enable()}static{this.\u0275fac=function(me){return new(me||et)}}static{this.\u0275cmp=h.VBU({type:et,selectors:[["app-password-input"]],inputs:{id:"id",placeholder:"placeholder"},standalone:!0,features:[h.Jv_([{provide:x.kq,useExisting:(0,h.Rfq)(()=>et),multi:!0}]),h.aNF],decls:4,vars:8,consts:[[1,"position-relative"],[1,"form-control",3,"type","id","formControl","placeholder"],["type","button",1,"btn","btn-link","position-absolute","top-50","end-0","translate-middle-y","text-muted","pe-3",2,"border","none","background","none",3,"click"],[1,"fas"]],template:function(me,Fe){1&me&&(h.j41(0,"div",0),h.nrm(1,"input",1),h.j41(2,"button",2),h.bIt("click",function(){return Fe.togglePasswordVisibility()}),h.nrm(3,"i",3),h.k0s()()),2&me&&(h.R7$(),h.Y8G("type",Fe.showPassword?"text":"password")("id",Fe.id)("formControl",Fe.control)("placeholder",Fe.placeholder),h.R7$(2),h.AVh("fa-eye",Fe.showPassword)("fa-eye-slash",!Fe.showPassword))},dependencies:[H.MD,x.X1,x.me,x.BC,x.l_],encapsulation:2})}}return et})();var Dt=M(6101),Tt=M(9242),un=M(6697),Ln=M(5964),Yn=M(5558),Vn=M(9437),Yr=M(8810),Gn=M(1339);let An=(()=>{class et{constructor(q,me,Fe,ut){this.fb=q,this.router=me,this.authService=Fe,this.toastr=ut,this.token=(0,h.hFB)(null),this.resetForm=this.fb.group({newPassword:["",[x.k0.required,x.k0.minLength(8)]],confirmPassword:["",x.k0.required]},{validator:this.passwordMatchValidator})}ngOnInit(){this.token()||this.router.navigate(["/"])}onSubmit(){if(this.resetForm.valid){const q=this.token();if(q){const me=this.resetForm.get("newPassword")?.value;this.authService.resetPassword(q,me).subscribe({next:()=>{this.toastr.success("","Password reset successful. You may login"),this.navigateToHome()},error:Fe=>{alert("Password reset failed: "+(Fe.message||"Unknown error"))}})}else alert("Invalid or missing reset token."),this.navigateToHome()}}navigateToHome(){this.router.navigate(["/"],{queryParams:{}}).then(()=>{window.location.reload()})}passwordMatchValidator(q){const me=q.get("newPassword")?.value,Fe=q.get("confirmPassword")?.value;return me===Fe?null:{mismatch:!0}}static{this.\u0275fac=function(me){return new(me||et)(h.rXU(x.ok),h.rXU(ie.Ix),h.rXU(Gn.u),h.rXU(L.tw))}}static{this.\u0275cmp=h.VBU({type:et,selectors:[["app-reset-password"]],inputs:{token:[h.Mj6.SignalBased,"token"]},standalone:!0,features:[h.aNF],decls:14,vars:2,consts:[[1,"container","mt-5","pb-2"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","newPassword",1,"form-label"],["type","password","id","newPassword","formControlName","newPassword",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(me,Fe){1&me&&(h.j41(0,"div",0)(1,"h3"),h.EFF(2,"Reset Password"),h.k0s(),h.j41(3,"form",1),h.bIt("ngSubmit",function(){return Fe.onSubmit()}),h.j41(4,"div",2)(5,"label",3),h.EFF(6,"New Password"),h.k0s(),h.nrm(7,"input",4),h.k0s(),h.j41(8,"div",2)(9,"label",5),h.EFF(10,"Confirm Password"),h.k0s(),h.nrm(11,"input",6),h.k0s(),h.j41(12,"button",7),h.EFF(13,"Reset Password"),h.k0s()()()),2&me&&(h.R7$(3),h.Y8G("formGroup",Fe.resetForm),h.R7$(9),h.Y8G("disabled",!Fe.resetForm.valid))},dependencies:[H.MD,x.X1,x.qT,x.me,x.BC,x.cb,x.j4,x.JD]})}}return et})();function ii(et,Se){1&et&&(h.j41(0,"div",0),h.EFF(1),h.nI1(2,"translate"),h.k0s()),2&et&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"AUTH.MESSAGES.REGISTRATION_SUCCESS")," "))}function Si(et,Se){if(1&et&&h.nrm(0,"app-reset-password",1),2&et){const q=h.XpG();h.Y8G("token",q.resetToken())}}function $i(et,Se){1&et&&(h.nrm(0,"span",20),h.EFF(1),h.nI1(2,"translate")),2&et&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"COMMON.LOADING")," "))}function Ri(et,Se){1&et&&(h.EFF(0),h.nI1(1,"translate")),2&et&&h.SpI(" ",h.bMT(1,1,"AUTH.BUTTONS.LOGIN")," ")}function Ki(et,Se){if(1&et){const q=h.RV6();h.j41(0,"form",11),h.bIt("ngSubmit",function(){h.eBV(q);const Fe=h.XpG(2);return h.Njj(Fe.onLogin())}),h.j41(1,"div",12)(2,"label",13),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.nrm(5,"input",14),h.k0s(),h.j41(6,"div",12)(7,"label",15),h.EFF(8),h.nI1(9,"translate"),h.k0s(),h.nrm(10,"app-password-input",16),h.k0s(),h.j41(11,"div",17)(12,"button",18),h.DNE(13,$i,3,3)(14,Ri,2,3),h.k0s(),h.j41(15,"button",19),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG(2);return h.Njj(Fe.onForgotPassword())}),h.EFF(16),h.nI1(17,"translate"),h.k0s()()()}if(2&et){let q;const me=h.XpG(2);h.Y8G("formGroup",me.loginForm),h.R7$(3),h.JRh(h.bMT(4,7,"AUTH.EMAIL")),h.R7$(5),h.JRh(h.bMT(9,9,"AUTH.PASSWORD")),h.R7$(4),h.Y8G("disabled",!me.loginForm.valid||me.buttonLoading()),h.R7$(),h.vxM(13,me.buttonLoading()?13:14),h.R7$(2),h.Y8G("disabled",!(null!=(q=me.loginForm.get("email"))&&q.valid)),h.R7$(),h.SpI(" ",h.bMT(17,11,"AUTH.FORGOT_PASSWORD")," ")}}function Pi(et,Se){}function Ps(et,Se){if(1&et){const q=h.RV6();h.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"button",6),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG();return h.Njj(Fe.activeForm.set("login"))}),h.EFF(5),h.nI1(6,"translate"),h.k0s(),h.j41(7,"button",7),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG();return h.Njj(Fe.activeForm.set("register"))}),h.EFF(8),h.nI1(9,"translate"),h.k0s()()(),h.DNE(10,Ki,18,13,"form",8)(11,Pi,0,0),h.k0s(),h.nrm(12,"hr"),h.j41(13,"div",9),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG();return h.Njj(Fe.showTermsWarning())}),h.nrm(14,"div",10),h.k0s()()}if(2&et){const q=h.XpG();h.R7$(4),h.AVh("btn-primary","login"===q.activeForm())("btn-outline-primary","login"!==q.activeForm()),h.R7$(),h.SpI(" ",h.bMT(6,11,"AUTH.BUTTONS.LOGIN")," "),h.R7$(2),h.AVh("btn-primary","register"===q.activeForm())("btn-outline-primary","register"!==q.activeForm()),h.R7$(),h.SpI(" ",h.bMT(9,13,"AUTH.BUTTONS.REGISTER")," "),h.R7$(2),h.vxM(10,"login"===q.activeForm()?10:11)}}let ri=(()=>{class et{constructor(q,me,Fe,ut,kt,Dn,li,Zi){this.recaptchaV3Service=q,this.recaptchaManager=me,this.authService=Fe,this.router=ut,this.toastr=kt,this.route=Dn,this.googleAuthService=li,this.translate=Zi,this.fb=new x.ok,this.activeForm=(0,h.vPA)("login"),this.initialEmail=(0,h.hFB)(),this.initialTab=(0,h.hFB)(),this.jwtToken=(0,h.vPA)(""),this.buttonLoading=(0,h.vPA)(!1),this.registrationSuccess=(0,h.vPA)(!1),this.termsAccepted=(0,h.vPA)(!1),this.resetToken=(0,h.vPA)(null),this.registerFormStatus=(0,h.vPA)("INVALID"),this.loginFormStatus=(0,h.vPA)("INVALID"),this.loginForm=this.fb.group({email:["",[x.k0.required,(0,Dt.R7)()]],password:["",[x.k0.required,x.k0.minLength(8)]]}),this.registerForm=this.fb.group({name:["",{validators:[x.k0.required,(0,Dt.X1)("upper")]}],lastname:["",{validators:[x.k0.required,(0,Dt.X1)("upper")]}],email:["",{validators:[x.k0.required,(0,Dt.R7)()]}],birthdate:["",[x.k0.required]],password:["",[x.k0.required,x.k0.minLength(8)]],confirmPassword:["",[x.k0.required]]},{validators:this.passwordMatchValidator}),this.isRegisterFormValid=(0,h.EWP)(()=>"VALID"===this.registerFormStatus()&&this.termsAccepted()),this.resetPasswordForm=(0,h.vPA)(this.fb.group({token:["",x.k0.required],newPassword:["",x.k0.required]})),this.loginForm.statusChanges.subscribe(fi=>{this.loginFormStatus.set(fi)}),this.registerForm.statusChanges.subscribe(fi=>{this.registerFormStatus.set(fi)}),(0,h.QZP)(()=>{const fr="login"===this.activeForm()||this.termsAccepted();this.googleAuthService.renderGoogleButton("google-btn",fr)})}ngOnInit(){this.googleAuthService.loadGoogleScript().subscribe({next:q=>{q&&setTimeout(()=>{this.googleAuthService.renderGoogleButton("google-btn")},300)},error:q=>{console.error("Failed to load Google Sign-In:",q)}}),this.route.queryParams.subscribe(q=>{const me=q.email,Fe=q.action,ut=q.token;ut?this.resetToken.set(ut):me&&(this.loginForm.patchValue({email:me}),this.registerForm.patchValue({email:me})),this.activeForm.set("signup"===Fe?"register":"login")})}passwordMatchValidator(q){const me=q.get("password")?.value,Fe=q.get("confirmPassword")?.value;return me===Fe?null:{passwordMismatch:!0}}onLogin(){this.buttonLoading.set(!0),"VALID"===this.loginFormStatus()&&this.recaptchaV3Service.execute("login").pipe((0,un.s)(1),(0,Ln.p)(q=>!!q||(this.buttonLoading.set(!1),this.toastr.error(this.translate.instant("AUTH.MESSAGES.LOGIN_FAILED")),!1)),(0,Yn.n)(q=>{const me={email:this.loginForm.get("email")?.value||"",password:this.loginForm.get("password")?.value||"",recaptchaToken:q};return this.authService.login(me)}),(0,Vn.W)(q=>(console.error("Login error:",q),this.toastr.error(this.translate.instant("AUTH.MESSAGES.LOGIN_FAILED")),this.buttonLoading.set(!1),(0,Yr.$)(()=>q)))).subscribe({next:q=>{console.log("Login response:",q),q.accessToken?(this.handleSuccessfulLogin(q.accessToken),this.buttonLoading.set(!1)):(this.buttonLoading.set(!1),this.toastr.error("Login failed"))},error:q=>{console.error("Subscription error:",q)}})}handleSuccessfulLogin(q){this.jwtToken.set(q),localStorage.setItem("jwt",q),console.log("JWT token stored:",q),this.authService.updateAuthState(),this.recaptchaManager.hideBadge(),this.router.navigate([l.S.DASH]),this.toastr.success("","Login succesfull")}onRegister(){this.buttonLoading.set(!0),this.isRegisterFormValid()&&this.recaptchaV3Service.execute("register").subscribe({next:q=>{const me=this.registerForm.value;this.authService.register({name:me.name||"",lastname:me.lastname||"",email:me.email||"",birthdate:me.birthdate||"",password:me.password||"",recaptchaToken:q}).subscribe({next:()=>{this.registrationSuccess.set(!0),this.recaptchaManager.hideBadge(),this.toastr.success(this.translate.instant("AUTH.MESSAGES.REGISTRATION_SUCCESS")),this.buttonLoading.set(!1)},error:ut=>{this.buttonLoading.set(!1),this.toastr.error(ut.error?.message||ut.message||"Registration failed","Error")}})},error:q=>{console.error("reCAPTCHA error:",q),this.toastr.error("ReCAPTCHA verification failed","Error"),this.buttonLoading.set(!1)}})}onTermsChange(q){const me=q.target;this.termsAccepted.set(me.checked),me.checked&&this.googleAuthService.renderGoogleButton("google-btn")}isGoogleButtonEnabled(){return"login"===this.activeForm()||"register"===this.activeForm()&&this.termsAccepted()}renderGoogleButton(){setTimeout(()=>{const q=document.getElementById("google-btn");q&&(q.innerHTML="",this.googleAuthService.renderGoogleButton("google-btn"))},100)}handleGoogleClick(q){q.preventDefault(),q.stopPropagation()}showTermsWarning(){"register"===this.activeForm()&&!this.termsAccepted()&&this.toastr.warning("Please accept terms and conditions for Sign-in","Action Required")}onForgotPassword(){const q=this.loginForm.get("email")?.value;q?this.authService.forgotPassword(q).subscribe({next:()=>alert("If an account with that email exists, a password reset link has been sent."),error:me=>alert("Failed to send password reset email: "+(me.message||"Unknown error"))}):alert("Please enter your email in the login form first.")}onResetPassword(){if(this.resetPasswordForm().valid){const{token:q,newPassword:me}=this.resetPasswordForm().value;this.authService.resetPassword(q,me).subscribe({next:()=>{this.toastr.success("","You can now log with your new password")},error:Fe=>alert("Password reset failed: "+(Fe.message||"Unknown error"))})}}static{this.\u0275fac=function(me){return new(me||et)(h.rXU(Tt.ob),h.rXU(fe.gZ),h.rXU(Gn.u),h.rXU(ie.Ix),h.rXU(L.tw),h.rXU(ie.nX),h.rXU(fe.ni),h.rXU(I.c$))}}static{this.\u0275cmp=h.VBU({type:et,selectors:[["app-auth"]],inputs:{initialEmail:[h.Mj6.SignalBased,"initialEmail"],initialTab:[h.Mj6.SignalBased,"initialTab"]},standalone:!0,features:[h.aNF],decls:3,vars:1,consts:[["role","alert",1,"alert","alert-success"],[3,"token"],[1,"card"],[1,"card-body"],[1,"d-flex","justify-content-center","mb-4"],["role","group",1,"btn-group"],[1,"btn",3,"click"],[1,"btn","col-12",3,"click"],[3,"formGroup"],[1,"text-center",3,"click"],["id","google-btn",1,"d-flex","justify-content-center","pb-2","mb-2"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","login-email",1,"form-label"],["type","email","id","login-email","formControlName","email",1,"form-control"],["for","login-password",1,"form-label"],["id","login-password","formControlName","password","placeholder",""],[1,"d-flex","justify-content-between","align-items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-link",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(me,Fe){1&me&&h.DNE(0,ii,3,3,"div",0)(1,Si,1,1)(2,Ps,15,15),2&me&&h.vxM(0,Fe.registrationSuccess()?0:Fe.resetToken()?1:2)},dependencies:[H.MD,x.X1,x.qT,x.me,x.BC,x.cb,x.j4,x.JD,x.YN,Q.Pv,at,Tt.tA,An,I.h,I.D9]})}}return et})(),qi=(()=>{class et{constructor(){this.roleInfo=h.hFB.required(),this.defaultAvatarUrl="assets/img/chatbot-roles-profiles/zenia.jpg"}static{this.\u0275fac=function(me){return new(me||et)}}static{this.\u0275cmp=h.VBU({type:et,selectors:[["app-character-avatar"]],inputs:{roleInfo:[h.Mj6.SignalBased,"roleInfo"]},standalone:!0,features:[h.aNF],decls:8,vars:4,consts:[[1,"container","d-flex","flex-column","align-items-center","mx-2","py-2"],[1,"avatar-wrapper"],[1,"avatar-container","rounded-circle","overflow-hidden","mb-3"],[1,"img-fluid",3,"src","alt"],[1,"text-center","my-3","fade-in-delay"],[1,"text-center","fade-in-delay","text-muted"]],template:function(me,Fe){1&me&&(h.j41(0,"div",0)(1,"div",1)(2,"div",2),h.nrm(3,"img",3),h.k0s()(),h.j41(4,"h5",4),h.EFF(5),h.k0s(),h.j41(6,"p",5),h.EFF(7),h.k0s()()),2&me&&(h.R7$(3),h.Y8G("src",Fe.roleInfo().avatarPic||Fe.defaultAvatarUrl,h.B4B)("alt",Fe.roleInfo().name),h.R7$(2),h.JRh(Fe.roleInfo().name),h.R7$(2),h.JRh(Fe.roleInfo().description))},styles:[".avatar-wrapper[_ngcontent-%COMP%]{width:150px;height:150px;animation:_ngcontent-%COMP%_scaleIn .8s cubic-bezier(.17,.67,.45,1.32) forwards}.avatar-container[_ngcontent-%COMP%]{width:100%;height:100%;opacity:0;animation:_ngcontent-%COMP%_fadeIn .8s ease-in forwards}.fade-in-delay[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn .8s ease-in forwards;animation-delay:.4s}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.img-fluid[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}"]})}}return et})();const{entries:_r,setPrototypeOf:wi,isFrozen:Cr,getPrototypeOf:Wr,getOwnPropertyDescriptor:Lr}=Object;let{freeze:or,seal:Bs,create:Pr}=Object,{apply:At,construct:Ht}=typeof Reflect<"u"&&Reflect;or||(or=function(Se){return Se}),Bs||(Bs=function(Se){return Se}),At||(At=function(Se,q,me){return Se.apply(q,me)}),Ht||(Ht=function(Se,q){return new Se(...q)});const rt=Ir(Array.prototype.forEach),xt=Ir(Array.prototype.pop),on=Ir(Array.prototype.push),mn=Ir(String.prototype.toLowerCase),Un=Ir(String.prototype.toString),Qi=Ir(String.prototype.match),si=Ir(String.prototype.replace),Oi=Ir(String.prototype.indexOf),kr=Ir(String.prototype.trim),Pn=Ir(Object.prototype.hasOwnProperty),Hi=Ir(RegExp.prototype.test),Ds=function yi(et){return function(){for(var Se=arguments.length,q=new Array(Se),me=0;me<Se;me++)q[me]=arguments[me];return Ht(et,q)}}(TypeError);function Ir(et){return function(Se){for(var q=arguments.length,me=new Array(q>1?q-1:0),Fe=1;Fe<q;Fe++)me[Fe-1]=arguments[Fe];return At(et,Se,me)}}function Cn(et,Se){let q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mn;wi&&wi(et,null);let me=Se.length;for(;me--;){let Fe=Se[me];if("string"==typeof Fe){const ut=q(Fe);ut!==Fe&&(Cr(Se)||(Se[me]=ut),Fe=ut)}et[Fe]=!0}return et}function qr(et){for(let Se=0;Se<et.length;Se++)Pn(et,Se)||(et[Se]=null);return et}function yr(et){const Se=Pr(null);for(const[q,me]of _r(et))Pn(et,q)&&(Se[q]=Array.isArray(me)?qr(me):me&&"object"==typeof me&&me.constructor===Object?yr(me):me);return Se}function us(et,Se){for(;null!==et;){const me=Lr(et,Se);if(me){if(me.get)return Ir(me.get);if("function"==typeof me.value)return Ir(me.value)}et=Wr(et)}return function q(){return null}}const ao=or(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ms=or(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),sr=or(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ms=or(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),to=or(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Os=or(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Fs=or(["#text"]),lo=or(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Go=or(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ye=or(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),O=or(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),G=Bs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ce=Bs(/<%[\w\W]*|[\w\W]*%>/gm),qe=Bs(/\${[\w\W]*}/gm),ht=Bs(/^data-[\-\w.\u00B7-\uFFFF]/),tn=Bs(/^aria-[\-\w]+$/),hn=Bs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),zn=Bs(/^(?:\w+script|data):/i),Kn=Bs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qn=Bs(/^html$/i),Or=Bs(/^[a-z][.\w]*(-[.\w]+)+$/i);var Fr=Object.freeze({__proto__:null,MUSTACHE_EXPR:G,ERB_EXPR:ce,TMPLIT_EXPR:qe,DATA_ATTR:ht,ARIA_ATTR:tn,IS_ALLOWED_URI:hn,IS_SCRIPT_OR_DATA:zn,ATTR_WHITESPACE:Kn,DOCTYPE_NAME:qn,CUSTOM_ELEMENT:Or});var Ur=function Rr(){let et=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const Se=Li=>Rr(Li);if(Se.version="3.1.7",Se.removed=[],!et||!et.document||9!==et.document.nodeType)return Se.isSupported=!1,Se;let{document:q}=et;const me=q,Fe=me.currentScript,{DocumentFragment:ut,HTMLTemplateElement:kt,Node:Dn,Element:li,NodeFilter:Zi,NamedNodeMap:fi=et.NamedNodeMap||et.MozNamedAttrMap,HTMLFormElement:fr,DOMParser:ws,trustedTypes:Zs}=et,ds=li.prototype,xa=us(ds,"cloneNode"),da=us(ds,"remove"),To=us(ds,"nextSibling"),Tr=us(ds,"childNodes"),Gl=us(ds,"parentNode");if("function"==typeof kt){const Li=q.createElement("template");Li.content&&Li.content.ownerDocument&&(q=Li.content.ownerDocument)}let yn,ir="";const{implementation:il,createNodeIterator:Ka,createDocumentFragment:uc,getElementsByTagName:Ie}=q,{importNode:D}=me;let F={};Se.isSupported="function"==typeof _r&&"function"==typeof Gl&&il&&void 0!==il.createHTMLDocument;const{MUSTACHE_EXPR:oe,ERB_EXPR:De,TMPLIT_EXPR:nt,DATA_ATTR:vt,ARIA_ATTR:Pt,IS_SCRIPT_OR_DATA:Lt,ATTR_WHITESPACE:Jt,CUSTOM_ELEMENT:oi}=Fr;let{IS_ALLOWED_URI:pi}=Fr,bi=null;const xr=Cn({},[...ao,...ms,...sr,...to,...Fs]);let Zn=null;const Ji=Cn({},[...lo,...Go,...Ye,...O]);let xi=Object.seal(Pr(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),P=null,we=null,se=!0,be=!0,mt=!1,Xt=!0,Kt=!1,Qn=!0,Dr=!1,es=!1,hs=!1,ar=!1,Cs=!1,Fi=!1,lt=!0,Rn=!1,bn=!0,ui=!1,pr={},zr=null;const ts=Cn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let go=null;const lr=Cn({},["audio","video","img","source","image","track"]);let Is=null;const $s=Cn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vi="http://www.w3.org/1998/Math/MathML",Jo="http://www.w3.org/2000/svg",Js="http://www.w3.org/1999/xhtml";let io=Js,Ts=!1,dc=null;const Ac=Cn({},[vi,Jo,Js],Un);let Ea=null;const Wl=["application/xhtml+xml","text/html"];let rs=null,Va=null;const jl=q.createElement("form"),Er=function(zt){return zt instanceof RegExp||zt instanceof Function},hc=function(){let zt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Va||Va!==zt){if((!zt||"object"!=typeof zt)&&(zt={}),zt=yr(zt),Ea=-1===Wl.indexOf(zt.PARSER_MEDIA_TYPE)?"text/html":zt.PARSER_MEDIA_TYPE,rs="application/xhtml+xml"===Ea?Un:mn,bi=Pn(zt,"ALLOWED_TAGS")?Cn({},zt.ALLOWED_TAGS,rs):xr,Zn=Pn(zt,"ALLOWED_ATTR")?Cn({},zt.ALLOWED_ATTR,rs):Ji,dc=Pn(zt,"ALLOWED_NAMESPACES")?Cn({},zt.ALLOWED_NAMESPACES,Un):Ac,Is=Pn(zt,"ADD_URI_SAFE_ATTR")?Cn(yr($s),zt.ADD_URI_SAFE_ATTR,rs):$s,go=Pn(zt,"ADD_DATA_URI_TAGS")?Cn(yr(lr),zt.ADD_DATA_URI_TAGS,rs):lr,zr=Pn(zt,"FORBID_CONTENTS")?Cn({},zt.FORBID_CONTENTS,rs):ts,P=Pn(zt,"FORBID_TAGS")?Cn({},zt.FORBID_TAGS,rs):{},we=Pn(zt,"FORBID_ATTR")?Cn({},zt.FORBID_ATTR,rs):{},pr=!!Pn(zt,"USE_PROFILES")&&zt.USE_PROFILES,se=!1!==zt.ALLOW_ARIA_ATTR,be=!1!==zt.ALLOW_DATA_ATTR,mt=zt.ALLOW_UNKNOWN_PROTOCOLS||!1,Xt=!1!==zt.ALLOW_SELF_CLOSE_IN_ATTR,Kt=zt.SAFE_FOR_TEMPLATES||!1,Qn=!1!==zt.SAFE_FOR_XML,Dr=zt.WHOLE_DOCUMENT||!1,ar=zt.RETURN_DOM||!1,Cs=zt.RETURN_DOM_FRAGMENT||!1,Fi=zt.RETURN_TRUSTED_TYPE||!1,hs=zt.FORCE_BODY||!1,lt=!1!==zt.SANITIZE_DOM,Rn=zt.SANITIZE_NAMED_PROPS||!1,bn=!1!==zt.KEEP_CONTENT,ui=zt.IN_PLACE||!1,pi=zt.ALLOWED_URI_REGEXP||hn,io=zt.NAMESPACE||Js,xi=zt.CUSTOM_ELEMENT_HANDLING||{},zt.CUSTOM_ELEMENT_HANDLING&&Er(zt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(xi.tagNameCheck=zt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),zt.CUSTOM_ELEMENT_HANDLING&&Er(zt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(xi.attributeNameCheck=zt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),zt.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof zt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(xi.allowCustomizedBuiltInElements=zt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Kt&&(be=!1),Cs&&(ar=!0),pr&&(bi=Cn({},Fs),Zn=[],!0===pr.html&&(Cn(bi,ao),Cn(Zn,lo)),!0===pr.svg&&(Cn(bi,ms),Cn(Zn,Go),Cn(Zn,O)),!0===pr.svgFilters&&(Cn(bi,sr),Cn(Zn,Go),Cn(Zn,O)),!0===pr.mathMl&&(Cn(bi,to),Cn(Zn,Ye),Cn(Zn,O))),zt.ADD_TAGS&&(bi===xr&&(bi=yr(bi)),Cn(bi,zt.ADD_TAGS,rs)),zt.ADD_ATTR&&(Zn===Ji&&(Zn=yr(Zn)),Cn(Zn,zt.ADD_ATTR,rs)),zt.ADD_URI_SAFE_ATTR&&Cn(Is,zt.ADD_URI_SAFE_ATTR,rs),zt.FORBID_CONTENTS&&(zr===ts&&(zr=yr(zr)),Cn(zr,zt.FORBID_CONTENTS,rs)),bn&&(bi["#text"]=!0),Dr&&Cn(bi,["html","head","body"]),bi.table&&(Cn(bi,["tbody"]),delete P.tbody),zt.TRUSTED_TYPES_POLICY){if("function"!=typeof zt.TRUSTED_TYPES_POLICY.createHTML)throw Ds('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof zt.TRUSTED_TYPES_POLICY.createScriptURL)throw Ds('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');yn=zt.TRUSTED_TYPES_POLICY,ir=yn.createHTML("")}else void 0===yn&&(yn=function(Se,q){if("object"!=typeof Se||"function"!=typeof Se.createPolicy)return null;let me=null;const Fe="data-tt-policy-suffix";q&&q.hasAttribute(Fe)&&(me=q.getAttribute(Fe));const ut="dompurify"+(me?"#"+me:"");try{return Se.createPolicy(ut,{createHTML:kt=>kt,createScriptURL:kt=>kt})}catch{return console.warn("TrustedTypes policy "+ut+" could not be created."),null}}(Zs,Fe)),null!==yn&&"string"==typeof ir&&(ir=yn.createHTML(""));or&&or(zt),Va=zt}},fc=Cn({},["mi","mo","mn","ms","mtext"]),hl=Cn({},["annotation-xml"]),Ic=Cn({},["title","style","font","a","script"]),gr=Cn({},[...ms,...sr,...Ms]),ro=Cn({},[...to,...Os]),$r=function(zt){on(Se.removed,{element:zt});try{Gl(zt).removeChild(zt)}catch{da(zt)}},ea=function(zt,$n){try{on(Se.removed,{attribute:$n.getAttributeNode(zt),from:$n})}catch{on(Se.removed,{attribute:null,from:$n})}if($n.removeAttribute(zt),"is"===zt&&!Zn[zt])if(ar||Cs)try{$r($n)}catch{}else try{$n.setAttribute(zt,"")}catch{}},Qa=function(zt){let $n=null,er=null;if(hs)zt="<remove></remove>"+zt;else{const W=Qi(zt,/^[\r\n\t ]+/);er=W&&W[0]}"application/xhtml+xml"===Ea&&io===Js&&(zt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+zt+"</body></html>");const xo=yn?yn.createHTML(zt):zt;if(io===Js)try{$n=(new ws).parseFromString(xo,Ea)}catch{}if(!$n||!$n.documentElement){$n=il.createDocument(io,"template",null);try{$n.documentElement.innerHTML=Ts?ir:xo}catch{}}const T=$n.body||$n.documentElement;return zt&&er&&T.insertBefore(q.createTextNode(er),T.childNodes[0]||null),io===Js?Ie.call($n,Dr?"html":"body")[0]:Dr?$n.documentElement:T},Tl=function(zt){return Ka.call(zt.ownerDocument||zt,zt,Zi.SHOW_ELEMENT|Zi.SHOW_COMMENT|Zi.SHOW_TEXT|Zi.SHOW_PROCESSING_INSTRUCTION|Zi.SHOW_CDATA_SECTION,null)},ta=function(zt){return zt instanceof fr&&("string"!=typeof zt.nodeName||"string"!=typeof zt.textContent||"function"!=typeof zt.removeChild||!(zt.attributes instanceof fi)||"function"!=typeof zt.removeAttribute||"function"!=typeof zt.setAttribute||"string"!=typeof zt.namespaceURI||"function"!=typeof zt.insertBefore||"function"!=typeof zt.hasChildNodes)},rl=function(zt){return"function"==typeof Dn&&zt instanceof Dn},ga=function(zt,$n,er){F[zt]&&rt(F[zt],xo=>{xo.call(Se,$n,er,Va)})},Dl=function(zt){let $n=null;if(ga("beforeSanitizeElements",zt,null),ta(zt))return $r(zt),!0;const er=rs(zt.nodeName);if(ga("uponSanitizeElement",zt,{tagName:er,allowedTags:bi}),zt.hasChildNodes()&&!rl(zt.firstElementChild)&&Hi(/<[/\w]/g,zt.innerHTML)&&Hi(/<[/\w]/g,zt.textContent)||7===zt.nodeType||Qn&&8===zt.nodeType&&Hi(/<[/\w]/g,zt.data))return $r(zt),!0;if(!bi[er]||P[er]){if(!P[er]&&$c(er)&&(xi.tagNameCheck instanceof RegExp&&Hi(xi.tagNameCheck,er)||xi.tagNameCheck instanceof Function&&xi.tagNameCheck(er)))return!1;if(bn&&!zr[er]){const xo=Gl(zt)||zt.parentNode,T=Tr(zt)||zt.childNodes;if(T&&xo)for(let N=T.length-1;N>=0;--N){const Y=xa(T[N],!0);Y.__removalCount=(zt.__removalCount||0)+1,xo.insertBefore(Y,To(zt))}}return $r(zt),!0}return zt instanceof li&&!function(zt){let $n=Gl(zt);(!$n||!$n.tagName)&&($n={namespaceURI:io,tagName:"template"});const er=mn(zt.tagName),xo=mn($n.tagName);return!!dc[zt.namespaceURI]&&(zt.namespaceURI===Jo?$n.namespaceURI===Js?"svg"===er:$n.namespaceURI===vi?"svg"===er&&("annotation-xml"===xo||fc[xo]):!!gr[er]:zt.namespaceURI===vi?$n.namespaceURI===Js?"math"===er:$n.namespaceURI===Jo?"math"===er&&hl[xo]:!!ro[er]:zt.namespaceURI===Js?!($n.namespaceURI===Jo&&!hl[xo]||$n.namespaceURI===vi&&!fc[xo])&&!ro[er]&&(Ic[er]||!gr[er]):!("application/xhtml+xml"!==Ea||!dc[zt.namespaceURI]))}(zt)||("noscript"===er||"noembed"===er||"noframes"===er)&&Hi(/<\/no(script|embed|frames)/i,zt.innerHTML)?($r(zt),!0):(Kt&&3===zt.nodeType&&($n=zt.textContent,rt([oe,De,nt],xo=>{$n=si($n,xo," ")}),zt.textContent!==$n&&(on(Se.removed,{element:zt.cloneNode()}),zt.textContent=$n)),ga("afterSanitizeElements",zt,null),!1)},yu=function(zt,$n,er){if(lt&&("id"===$n||"name"===$n)&&(er in q||er in jl))return!1;if((!be||we[$n]||!Hi(vt,$n))&&(!se||!Hi(Pt,$n)))if(!Zn[$n]||we[$n]){if(!($c(zt)&&(xi.tagNameCheck instanceof RegExp&&Hi(xi.tagNameCheck,zt)||xi.tagNameCheck instanceof Function&&xi.tagNameCheck(zt))&&(xi.attributeNameCheck instanceof RegExp&&Hi(xi.attributeNameCheck,$n)||xi.attributeNameCheck instanceof Function&&xi.attributeNameCheck($n))||"is"===$n&&xi.allowCustomizedBuiltInElements&&(xi.tagNameCheck instanceof RegExp&&Hi(xi.tagNameCheck,er)||xi.tagNameCheck instanceof Function&&xi.tagNameCheck(er))))return!1}else if(!Is[$n]&&!Hi(pi,si(er,Jt,""))&&("src"!==$n&&"xlink:href"!==$n&&"href"!==$n||"script"===zt||0!==Oi(er,"data:")||!go[zt])&&(!mt||Hi(Lt,si(er,Jt,"")))&&er)return!1;return!0},$c=function(zt){return"annotation-xml"!==zt&&Qi(zt,oi)},Rc=function(zt){ga("beforeSanitizeAttributes",zt,null);const{attributes:$n}=zt;if(!$n)return;const er={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Zn};let xo=$n.length;for(;xo--;){const T=$n[xo],{name:W,namespaceURI:N,value:Y}=T,xe=rs(W);let Ge="value"===W?Y:kr(Y);if(er.attrName=xe,er.attrValue=Ge,er.keepAttr=!0,er.forceKeepAttr=void 0,ga("uponSanitizeAttribute",zt,er),Ge=er.attrValue,er.forceKeepAttr||(ea(W,zt),!er.keepAttr))continue;if(!Xt&&Hi(/\/>/i,Ge)){ea(W,zt);continue}Kt&&rt([oe,De,nt],Qt=>{Ge=si(Ge,Qt," ")});const _t=rs(zt.nodeName);if(yu(_t,xe,Ge)){if(Rn&&("id"===xe||"name"===xe)&&(ea(W,zt),Ge="user-content-"+Ge),Qn&&Hi(/((--!?|])>)|<\/(style|title)/i,Ge)){ea(W,zt);continue}if(yn&&"object"==typeof Zs&&"function"==typeof Zs.getAttributeType&&!N)switch(Zs.getAttributeType(_t,xe)){case"TrustedHTML":Ge=yn.createHTML(Ge);break;case"TrustedScriptURL":Ge=yn.createScriptURL(Ge)}try{N?zt.setAttributeNS(N,W,Ge):zt.setAttribute(W,Ge),ta(zt)?$r(zt):xt(Se.removed)}catch{}}}ga("afterSanitizeAttributes",zt,null)},pc=function Li(zt){let $n=null;const er=Tl(zt);for(ga("beforeSanitizeShadowDOM",zt,null);$n=er.nextNode();)ga("uponSanitizeShadowNode",$n,null),!Dl($n)&&($n.content instanceof ut&&Li($n.content),Rc($n));ga("afterSanitizeShadowDOM",zt,null)};return Se.sanitize=function(Li){let zt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},$n=null,er=null,xo=null,T=null;if(Ts=!Li,Ts&&(Li="\x3c!--\x3e"),"string"!=typeof Li&&!rl(Li)){if("function"!=typeof Li.toString)throw Ds("toString is not a function");if("string"!=typeof(Li=Li.toString()))throw Ds("dirty is not a string, aborting")}if(!Se.isSupported)return Li;if(es||hc(zt),Se.removed=[],"string"==typeof Li&&(ui=!1),ui){if(Li.nodeName){const Y=rs(Li.nodeName);if(!bi[Y]||P[Y])throw Ds("root node is forbidden and cannot be sanitized in-place")}}else if(Li instanceof Dn)$n=Qa("\x3c!----\x3e"),er=$n.ownerDocument.importNode(Li,!0),1===er.nodeType&&"BODY"===er.nodeName||"HTML"===er.nodeName?$n=er:$n.appendChild(er);else{if(!ar&&!Kt&&!Dr&&-1===Li.indexOf("<"))return yn&&Fi?yn.createHTML(Li):Li;if($n=Qa(Li),!$n)return ar?null:Fi?ir:""}$n&&hs&&$r($n.firstChild);const W=Tl(ui?Li:$n);for(;xo=W.nextNode();)Dl(xo)||(xo.content instanceof ut&&pc(xo.content),Rc(xo));if(ui)return Li;if(ar){if(Cs)for(T=uc.call($n.ownerDocument);$n.firstChild;)T.appendChild($n.firstChild);else T=$n;return(Zn.shadowroot||Zn.shadowrootmode)&&(T=D.call(me,T,!0)),T}let N=Dr?$n.outerHTML:$n.innerHTML;return Dr&&bi["!doctype"]&&$n.ownerDocument&&$n.ownerDocument.doctype&&$n.ownerDocument.doctype.name&&Hi(qn,$n.ownerDocument.doctype.name)&&(N="<!DOCTYPE "+$n.ownerDocument.doctype.name+">\n"+N),Kt&&rt([oe,De,nt],Y=>{N=si(N,Y," ")}),yn&&Fi?yn.createHTML(N):N},Se.setConfig=function(){hc(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),es=!0},Se.clearConfig=function(){Va=null,es=!1},Se.isValidAttribute=function(Li,zt,$n){Va||hc({});const er=rs(Li),xo=rs(zt);return yu(er,xo,$n)},Se.addHook=function(Li,zt){"function"==typeof zt&&(F[Li]=F[Li]||[],on(F[Li],zt))},Se.removeHook=function(Li){if(F[Li])return xt(F[Li])},Se.removeHooks=function(Li){F[Li]&&(F[Li]=[])},Se.removeAllHooks=function(){F={}},Se}();let Ws={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Qs(et){Ws=et}const As=/[&<>"']/,Po=new RegExp(As.source,"g"),Oo=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,zi=new RegExp(Oo.source,"g"),Hr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bl=et=>Hr[et];function ks(et,Se){if(Se){if(As.test(et))return et.replace(Po,Bl)}else if(Oo.test(et))return et.replace(zi,Bl);return et}const El=/(^|[^\[])\^/g;function ys(et,Se){let q="string"==typeof et?et:et.source;Se=Se||"";const me={replace:(Fe,ut)=>{let kt="string"==typeof ut?ut:ut.source;return kt=kt.replace(El,"$1"),q=q.replace(Fe,kt),me},getRegex:()=>new RegExp(q,Se)};return me}function Sl(et){try{et=encodeURI(et).replace(/%25/g,"%")}catch{return null}return et}const ca={exec:()=>null};function br(et,Se){const me=et.replace(/\|/g,(ut,kt,Dn)=>{let li=!1,Zi=kt;for(;--Zi>=0&&"\\"===Dn[Zi];)li=!li;return li?"|":" |"}).split(/ \|/);let Fe=0;if(me[0].trim()||me.shift(),me.length>0&&!me[me.length-1].trim()&&me.pop(),Se)if(me.length>Se)me.splice(Se);else for(;me.length<Se;)me.push("");for(;Fe<me.length;Fe++)me[Fe]=me[Fe].trim().replace(/\\\|/g,"|");return me}function ha(et,Se,q){const me=et.length;if(0===me)return"";let Fe=0;for(;Fe<me;){const ut=et.charAt(me-Fe-1);if(ut!==Se||q){if(ut===Se||!q)break;Fe++}else Fe++}return et.slice(0,me-Fe)}function js(et,Se,q,me){const Fe=Se.href,ut=Se.title?ks(Se.title):null,kt=et[1].replace(/\\([\[\]])/g,"$1");if("!"!==et[0].charAt(0)){me.state.inLink=!0;const Dn={type:"link",raw:q,href:Fe,title:ut,text:kt,tokens:me.inlineTokens(kt)};return me.state.inLink=!1,Dn}return{type:"image",raw:q,href:Fe,title:ut,text:ks(kt)}}class fa{options;rules;lexer;constructor(Se){this.options=Se||Ws}space(Se){const q=this.rules.block.newline.exec(Se);if(q&&q[0].length>0)return{type:"space",raw:q[0]}}code(Se){const q=this.rules.block.code.exec(Se);if(q){const me=q[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:q[0],codeBlockStyle:"indented",text:this.options.pedantic?me:ha(me,"\n")}}}fences(Se){const q=this.rules.block.fences.exec(Se);if(q){const me=q[0],Fe=function za(et,Se){const q=et.match(/^(\s+)(?:```)/);if(null===q)return Se;const me=q[1];return Se.split("\n").map(Fe=>{const ut=Fe.match(/^\s+/);if(null===ut)return Fe;const[kt]=ut;return kt.length>=me.length?Fe.slice(me.length):Fe}).join("\n")}(me,q[3]||"");return{type:"code",raw:me,lang:q[2]?q[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):q[2],text:Fe}}}heading(Se){const q=this.rules.block.heading.exec(Se);if(q){let me=q[2].trim();if(/#$/.test(me)){const Fe=ha(me,"#");(this.options.pedantic||!Fe||/ $/.test(Fe))&&(me=Fe.trim())}return{type:"heading",raw:q[0],depth:q[1].length,text:me,tokens:this.lexer.inline(me)}}}hr(Se){const q=this.rules.block.hr.exec(Se);if(q)return{type:"hr",raw:ha(q[0],"\n")}}blockquote(Se){const q=this.rules.block.blockquote.exec(Se);if(q){let me=ha(q[0],"\n").split("\n"),Fe="",ut="";const kt=[];for(;me.length>0;){let Dn=!1;const li=[];let Zi;for(Zi=0;Zi<me.length;Zi++)if(/^ {0,3}>/.test(me[Zi]))li.push(me[Zi]),Dn=!0;else{if(Dn)break;li.push(me[Zi])}me=me.slice(Zi);const fi=li.join("\n"),fr=fi.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");Fe=Fe?`${Fe}\n${fi}`:fi,ut=ut?`${ut}\n${fr}`:fr;const ws=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(fr,kt,!0),this.lexer.state.top=ws,0===me.length)break;const Zs=kt[kt.length-1];if("code"===Zs?.type)break;if("blockquote"===Zs?.type){const ds=Zs,xa=ds.raw+"\n"+me.join("\n"),da=this.blockquote(xa);kt[kt.length-1]=da,Fe=Fe.substring(0,Fe.length-ds.raw.length)+da.raw,ut=ut.substring(0,ut.length-ds.text.length)+da.text;break}if("list"!==Zs?.type);else{const ds=Zs,xa=ds.raw+"\n"+me.join("\n"),da=this.list(xa);kt[kt.length-1]=da,Fe=Fe.substring(0,Fe.length-Zs.raw.length)+da.raw,ut=ut.substring(0,ut.length-ds.raw.length)+da.raw,me=xa.substring(kt[kt.length-1].raw.length).split("\n")}}return{type:"blockquote",raw:Fe,tokens:kt,text:ut}}}list(Se){let q=this.rules.block.list.exec(Se);if(q){let me=q[1].trim();const Fe=me.length>1,ut={type:"list",raw:"",ordered:Fe,start:Fe?+me.slice(0,-1):"",loose:!1,items:[]};me=Fe?`\\d{1,9}\\${me.slice(-1)}`:`\\${me}`,this.options.pedantic&&(me=Fe?me:"[*+-]");const kt=new RegExp(`^( {0,3}${me})((?:[\t ][^\\n]*)?(?:\\n|$))`);let Dn=!1;for(;Se;){let li=!1,Zi="",fi="";if(!(q=kt.exec(Se))||this.rules.block.hr.test(Se))break;Zi=q[0],Se=Se.substring(Zi.length);let fr=q[2].split("\n",1)[0].replace(/^\t+/,To=>" ".repeat(3*To.length)),ws=Se.split("\n",1)[0],Zs=!fr.trim(),ds=0;if(this.options.pedantic?(ds=2,fi=fr.trimStart()):Zs?ds=q[1].length+1:(ds=q[2].search(/[^ ]/),ds=ds>4?1:ds,fi=fr.slice(ds),ds+=q[1].length),Zs&&/^[ \t]*$/.test(ws)&&(Zi+=ws+"\n",Se=Se.substring(ws.length+1),li=!0),!li){const To=new RegExp(`^ {0,${Math.min(3,ds-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),Tr=new RegExp(`^ {0,${Math.min(3,ds-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Gl=new RegExp(`^ {0,${Math.min(3,ds-1)}}(?:\`\`\`|~~~)`),yn=new RegExp(`^ {0,${Math.min(3,ds-1)}}#`),ir=new RegExp(`^ {0,${Math.min(3,ds-1)}}<[a-z].*>`,"i");for(;Se;){const il=Se.split("\n",1)[0];let Ka;if(ws=il,this.options.pedantic?(ws=ws.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "),Ka=ws):Ka=ws.replace(/\t/g,"    "),Gl.test(ws)||yn.test(ws)||ir.test(ws)||To.test(ws)||Tr.test(ws))break;if(Ka.search(/[^ ]/)>=ds||!ws.trim())fi+="\n"+Ka.slice(ds);else{if(Zs||fr.replace(/\t/g,"    ").search(/[^ ]/)>=4||Gl.test(fr)||yn.test(fr)||Tr.test(fr))break;fi+="\n"+ws}!Zs&&!ws.trim()&&(Zs=!0),Zi+=il+"\n",Se=Se.substring(il.length+1),fr=Ka.slice(ds)}}ut.loose||(Dn?ut.loose=!0:/\n[ \t]*\n[ \t]*$/.test(Zi)&&(Dn=!0));let da,xa=null;this.options.gfm&&(xa=/^\[[ xX]\] /.exec(fi),xa&&(da="[ ] "!==xa[0],fi=fi.replace(/^\[[ xX]\] +/,""))),ut.items.push({type:"list_item",raw:Zi,task:!!xa,checked:da,loose:!1,text:fi,tokens:[]}),ut.raw+=Zi}ut.items[ut.items.length-1].raw=ut.items[ut.items.length-1].raw.trimEnd(),ut.items[ut.items.length-1].text=ut.items[ut.items.length-1].text.trimEnd(),ut.raw=ut.raw.trimEnd();for(let li=0;li<ut.items.length;li++)if(this.lexer.state.top=!1,ut.items[li].tokens=this.lexer.blockTokens(ut.items[li].text,[]),!ut.loose){const Zi=ut.items[li].tokens.filter(fr=>"space"===fr.type),fi=Zi.length>0&&Zi.some(fr=>/\n.*\n/.test(fr.raw));ut.loose=fi}if(ut.loose)for(let li=0;li<ut.items.length;li++)ut.items[li].loose=!0;return ut}}html(Se){const q=this.rules.block.html.exec(Se);if(q)return{type:"html",block:!0,raw:q[0],pre:"pre"===q[1]||"script"===q[1]||"style"===q[1],text:q[0]}}def(Se){const q=this.rules.block.def.exec(Se);if(q){const me=q[1].toLowerCase().replace(/\s+/g," "),Fe=q[2]?q[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",ut=q[3]?q[3].substring(1,q[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):q[3];return{type:"def",tag:me,raw:q[0],href:Fe,title:ut}}}table(Se){const q=this.rules.block.table.exec(Se);if(!q||!/[:|]/.test(q[2]))return;const me=br(q[1]),Fe=q[2].replace(/^\||\| *$/g,"").split("|"),ut=q[3]&&q[3].trim()?q[3].replace(/\n[ \t]*$/,"").split("\n"):[],kt={type:"table",raw:q[0],header:[],align:[],rows:[]};if(me.length===Fe.length){for(const Dn of Fe)/^ *-+: *$/.test(Dn)?kt.align.push("right"):/^ *:-+: *$/.test(Dn)?kt.align.push("center"):/^ *:-+ *$/.test(Dn)?kt.align.push("left"):kt.align.push(null);for(let Dn=0;Dn<me.length;Dn++)kt.header.push({text:me[Dn],tokens:this.lexer.inline(me[Dn]),header:!0,align:kt.align[Dn]});for(const Dn of ut)kt.rows.push(br(Dn,kt.header.length).map((li,Zi)=>({text:li,tokens:this.lexer.inline(li),header:!1,align:kt.align[Zi]})));return kt}}lheading(Se){const q=this.rules.block.lheading.exec(Se);if(q)return{type:"heading",raw:q[0],depth:"="===q[2].charAt(0)?1:2,text:q[1],tokens:this.lexer.inline(q[1])}}paragraph(Se){const q=this.rules.block.paragraph.exec(Se);if(q){const me="\n"===q[1].charAt(q[1].length-1)?q[1].slice(0,-1):q[1];return{type:"paragraph",raw:q[0],text:me,tokens:this.lexer.inline(me)}}}text(Se){const q=this.rules.block.text.exec(Se);if(q)return{type:"text",raw:q[0],text:q[0],tokens:this.lexer.inline(q[0])}}escape(Se){const q=this.rules.inline.escape.exec(Se);if(q)return{type:"escape",raw:q[0],text:ks(q[1])}}tag(Se){const q=this.rules.inline.tag.exec(Se);if(q)return!this.lexer.state.inLink&&/^<a /i.test(q[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(q[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(q[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(q[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:q[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:q[0]}}link(Se){const q=this.rules.inline.link.exec(Se);if(q){const me=q[2].trim();if(!this.options.pedantic&&/^</.test(me)){if(!/>$/.test(me))return;const kt=ha(me.slice(0,-1),"\\");if((me.length-kt.length)%2==0)return}else{const kt=function Ra(et,Se){if(-1===et.indexOf(Se[1]))return-1;let q=0;for(let me=0;me<et.length;me++)if("\\"===et[me])me++;else if(et[me]===Se[0])q++;else if(et[me]===Se[1]&&(q--,q<0))return me;return-1}(q[2],"()");if(kt>-1){const li=(0===q[0].indexOf("!")?5:4)+q[1].length+kt;q[2]=q[2].substring(0,kt),q[0]=q[0].substring(0,li).trim(),q[3]=""}}let Fe=q[2],ut="";if(this.options.pedantic){const kt=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Fe);kt&&(Fe=kt[1],ut=kt[3])}else ut=q[3]?q[3].slice(1,-1):"";return Fe=Fe.trim(),/^</.test(Fe)&&(Fe=this.options.pedantic&&!/>$/.test(me)?Fe.slice(1):Fe.slice(1,-1)),js(q,{href:Fe&&Fe.replace(this.rules.inline.anyPunctuation,"$1"),title:ut&&ut.replace(this.rules.inline.anyPunctuation,"$1")},q[0],this.lexer)}}reflink(Se,q){let me;if((me=this.rules.inline.reflink.exec(Se))||(me=this.rules.inline.nolink.exec(Se))){const ut=q[(me[2]||me[1]).replace(/\s+/g," ").toLowerCase()];if(!ut){const kt=me[0].charAt(0);return{type:"text",raw:kt,text:kt}}return js(me,ut,me[0],this.lexer)}}emStrong(Se,q,me=""){let Fe=this.rules.inline.emStrongLDelim.exec(Se);if(!(!Fe||Fe[3]&&me.match(/[\p{L}\p{N}]/u))&&(!Fe[1]&&!Fe[2]||!me||this.rules.inline.punctuation.exec(me))){const kt=[...Fe[0]].length-1;let Dn,li,Zi=kt,fi=0;const fr="*"===Fe[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(fr.lastIndex=0,q=q.slice(-1*Se.length+kt);null!=(Fe=fr.exec(q));){if(Dn=Fe[1]||Fe[2]||Fe[3]||Fe[4]||Fe[5]||Fe[6],!Dn)continue;if(li=[...Dn].length,Fe[3]||Fe[4]){Zi+=li;continue}if((Fe[5]||Fe[6])&&kt%3&&!((kt+li)%3)){fi+=li;continue}if(Zi-=li,Zi>0)continue;li=Math.min(li,li+Zi+fi);const ws=[...Fe[0]][0].length,Zs=Se.slice(0,kt+Fe.index+ws+li);if(Math.min(kt,li)%2){const xa=Zs.slice(1,-1);return{type:"em",raw:Zs,text:xa,tokens:this.lexer.inlineTokens(xa)}}const ds=Zs.slice(2,-2);return{type:"strong",raw:Zs,text:ds,tokens:this.lexer.inlineTokens(ds)}}}}codespan(Se){const q=this.rules.inline.code.exec(Se);if(q){let me=q[2].replace(/\n/g," ");const Fe=/[^ ]/.test(me),ut=/^ /.test(me)&&/ $/.test(me);return Fe&&ut&&(me=me.substring(1,me.length-1)),me=ks(me,!0),{type:"codespan",raw:q[0],text:me}}}br(Se){const q=this.rules.inline.br.exec(Se);if(q)return{type:"br",raw:q[0]}}del(Se){const q=this.rules.inline.del.exec(Se);if(q)return{type:"del",raw:q[0],text:q[2],tokens:this.lexer.inlineTokens(q[2])}}autolink(Se){const q=this.rules.inline.autolink.exec(Se);if(q){let me,Fe;return"@"===q[2]?(me=ks(q[1]),Fe="mailto:"+me):(me=ks(q[1]),Fe=me),{type:"link",raw:q[0],text:me,href:Fe,tokens:[{type:"text",raw:me,text:me}]}}}url(Se){let q;if(q=this.rules.inline.url.exec(Se)){let me,Fe;if("@"===q[2])me=ks(q[0]),Fe="mailto:"+me;else{let ut;do{ut=q[0],q[0]=this.rules.inline._backpedal.exec(q[0])?.[0]??""}while(ut!==q[0]);me=ks(q[0]),Fe="www."===q[1]?"http://"+q[0]:q[0]}return{type:"link",raw:q[0],text:me,href:Fe,tokens:[{type:"text",raw:me,text:me}]}}}inlineText(Se){const q=this.rules.inline.text.exec(Se);if(q){let me;return me=this.lexer.state.inRawBlock?q[0]:ks(q[0]),{type:"text",raw:q[0],text:me}}}}const Qo=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ga=/(?:[*+-]|\d{1,9}[.)])/,pa=ys(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ga).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Na=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Pa=/(?!\s*\])(?:\\.|[^\[\]\\])+/,na=ys(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Pa).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Yl=ys(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ga).getRegex(),Vs="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",qo=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ur=ys("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",qo).replace("tag",Vs).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ua=ys(Na).replace("hr",Qo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Vs).getRegex(),Wo={blockquote:ys(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ua).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:na,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Qo,html:ur,lheading:pa,list:Yl,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:ua,table:ca,text:/^[^\n]+/},ba=ys("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Qo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Vs).getRegex(),wl={...Wo,table:ba,paragraph:ys(Na).replace("hr",Qo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ba).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Vs).getRegex()},ma={...Wo,html:ys("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",qo).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ca,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ys(Na).replace("hr",Qo).replace("heading"," *#{1,6} *[^\n]").replace("lheading",pa).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},lc=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Cl=/^( {2,}|\\)\n(?!\s*$)/,qa="\\p{P}\\p{S}",Za=ys(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,qa).getRegex(),Ys=ys(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,qa).getRegex(),Fa=ys("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,qa).getRegex(),La=ys("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,qa).getRegex(),vo=ys(/\\([punct])/,"gu").replace(/punct/g,qa).getRegex(),ia=ys(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ul=ys(qo).replace("(?:--\x3e|$)","--\x3e").getRegex(),as=ys("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ul).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ul=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,_o=ys(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ul).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),yo=ys(/^!?\[(label)\]\[(ref)\]/).replace("label",Ul).replace("ref",Pa).getRegex(),Ja=ys(/^!?\[(ref)\](?:\[\])?/).replace("ref",Pa).getRegex(),ql={_backpedal:ca,anyPunctuation:vo,autolink:ia,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:Cl,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:ca,emStrongLDelim:Ys,emStrongRDelimAst:Fa,emStrongRDelimUnd:La,escape:lc,link:_o,nolink:Ja,punctuation:Za,reflink:yo,reflinkSearch:ys("reflink|nolink(?!\\()","g").replace("reflink",yo).replace("nolink",Ja).getRegex(),tag:as,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:ca},Vl={...ql,link:ys(/^!?\[(label)\]\((.*?)\)/).replace("label",Ul).getRegex(),reflink:ys(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ul).getRegex()},ra={...ql,escape:ys(lc).replace("])","~|])").getRegex(),url:ys(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},jr={...ra,br:ys(Cl).replace("{2,}","*").getRegex(),text:ys(ra.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ja={normal:Wo,gfm:wl,pedantic:ma},ka={normal:ql,gfm:ra,breaks:jr,pedantic:Vl};class po{tokens;options;state;tokenizer;inlineQueue;constructor(Se){this.tokens=[],this.tokens.links=Object.create(null),this.options=Se||Ws,this.options.tokenizer=this.options.tokenizer||new fa,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const q={block:ja.normal,inline:ka.normal};this.options.pedantic?(q.block=ja.pedantic,q.inline=ka.pedantic):this.options.gfm&&(q.block=ja.gfm,q.inline=this.options.breaks?ka.breaks:ka.gfm),this.tokenizer.rules=q}static get rules(){return{block:ja,inline:ka}}static lex(Se,q){return new po(q).lex(Se)}static lexInline(Se,q){return new po(q).inlineTokens(Se)}lex(Se){Se=Se.replace(/\r\n|\r/g,"\n"),this.blockTokens(Se,this.tokens);for(let q=0;q<this.inlineQueue.length;q++){const me=this.inlineQueue[q];this.inlineTokens(me.src,me.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(Se,q=[],me=!1){let Fe,ut,kt;for(this.options.pedantic&&(Se=Se.replace(/\t/g,"    ").replace(/^ +$/gm,""));Se;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(Dn=>!!(Fe=Dn.call({lexer:this},Se,q))&&(Se=Se.substring(Fe.raw.length),q.push(Fe),!0)))){if(Fe=this.tokenizer.space(Se)){Se=Se.substring(Fe.raw.length),1===Fe.raw.length&&q.length>0?q[q.length-1].raw+="\n":q.push(Fe);continue}if(Fe=this.tokenizer.code(Se)){Se=Se.substring(Fe.raw.length),ut=q[q.length-1],!ut||"paragraph"!==ut.type&&"text"!==ut.type?q.push(Fe):(ut.raw+="\n"+Fe.raw,ut.text+="\n"+Fe.text,this.inlineQueue[this.inlineQueue.length-1].src=ut.text);continue}if(Fe=this.tokenizer.fences(Se)){Se=Se.substring(Fe.raw.length),q.push(Fe);continue}if(Fe=this.tokenizer.heading(Se)){Se=Se.substring(Fe.raw.length),q.push(Fe);continue}if(Fe=this.tokenizer.hr(Se)){Se=Se.substring(Fe.raw.length),q.push(Fe);continue}if(Fe=this.tokenizer.blockquote(Se)){Se=Se.substring(Fe.raw.length),q.push(Fe);continue}if(Fe=this.tokenizer.list(Se)){Se=Se.substring(Fe.raw.length),q.push(Fe);continue}if(Fe=this.tokenizer.html(Se)){Se=Se.substring(Fe.raw.length),q.push(Fe);continue}if(Fe=this.tokenizer.def(Se)){Se=Se.substring(Fe.raw.length),ut=q[q.length-1],!ut||"paragraph"!==ut.type&&"text"!==ut.type?this.tokens.links[Fe.tag]||(this.tokens.links[Fe.tag]={href:Fe.href,title:Fe.title}):(ut.raw+="\n"+Fe.raw,ut.text+="\n"+Fe.raw,this.inlineQueue[this.inlineQueue.length-1].src=ut.text);continue}if(Fe=this.tokenizer.table(Se)){Se=Se.substring(Fe.raw.length),q.push(Fe);continue}if(Fe=this.tokenizer.lheading(Se)){Se=Se.substring(Fe.raw.length),q.push(Fe);continue}if(kt=Se,this.options.extensions&&this.options.extensions.startBlock){let Dn=1/0;const li=Se.slice(1);let Zi;this.options.extensions.startBlock.forEach(fi=>{Zi=fi.call({lexer:this},li),"number"==typeof Zi&&Zi>=0&&(Dn=Math.min(Dn,Zi))}),Dn<1/0&&Dn>=0&&(kt=Se.substring(0,Dn+1))}if(this.state.top&&(Fe=this.tokenizer.paragraph(kt))){ut=q[q.length-1],me&&"paragraph"===ut?.type?(ut.raw+="\n"+Fe.raw,ut.text+="\n"+Fe.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ut.text):q.push(Fe),me=kt.length!==Se.length,Se=Se.substring(Fe.raw.length);continue}if(Fe=this.tokenizer.text(Se)){Se=Se.substring(Fe.raw.length),ut=q[q.length-1],ut&&"text"===ut.type?(ut.raw+="\n"+Fe.raw,ut.text+="\n"+Fe.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ut.text):q.push(Fe);continue}if(Se){const Dn="Infinite loop on byte: "+Se.charCodeAt(0);if(this.options.silent){console.error(Dn);break}throw new Error(Dn)}}return this.state.top=!0,q}inline(Se,q=[]){return this.inlineQueue.push({src:Se,tokens:q}),q}inlineTokens(Se,q=[]){let me,Fe,ut,Dn,li,Zi,kt=Se;if(this.tokens.links){const fi=Object.keys(this.tokens.links);if(fi.length>0)for(;null!=(Dn=this.tokenizer.rules.inline.reflinkSearch.exec(kt));)fi.includes(Dn[0].slice(Dn[0].lastIndexOf("[")+1,-1))&&(kt=kt.slice(0,Dn.index)+"["+"a".repeat(Dn[0].length-2)+"]"+kt.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(Dn=this.tokenizer.rules.inline.blockSkip.exec(kt));)kt=kt.slice(0,Dn.index)+"["+"a".repeat(Dn[0].length-2)+"]"+kt.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(Dn=this.tokenizer.rules.inline.anyPunctuation.exec(kt));)kt=kt.slice(0,Dn.index)+"++"+kt.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;Se;)if(li||(Zi=""),li=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(fi=>!!(me=fi.call({lexer:this},Se,q))&&(Se=Se.substring(me.raw.length),q.push(me),!0)))){if(me=this.tokenizer.escape(Se)){Se=Se.substring(me.raw.length),q.push(me);continue}if(me=this.tokenizer.tag(Se)){Se=Se.substring(me.raw.length),Fe=q[q.length-1],Fe&&"text"===me.type&&"text"===Fe.type?(Fe.raw+=me.raw,Fe.text+=me.text):q.push(me);continue}if(me=this.tokenizer.link(Se)){Se=Se.substring(me.raw.length),q.push(me);continue}if(me=this.tokenizer.reflink(Se,this.tokens.links)){Se=Se.substring(me.raw.length),Fe=q[q.length-1],Fe&&"text"===me.type&&"text"===Fe.type?(Fe.raw+=me.raw,Fe.text+=me.text):q.push(me);continue}if(me=this.tokenizer.emStrong(Se,kt,Zi)){Se=Se.substring(me.raw.length),q.push(me);continue}if(me=this.tokenizer.codespan(Se)){Se=Se.substring(me.raw.length),q.push(me);continue}if(me=this.tokenizer.br(Se)){Se=Se.substring(me.raw.length),q.push(me);continue}if(me=this.tokenizer.del(Se)){Se=Se.substring(me.raw.length),q.push(me);continue}if(me=this.tokenizer.autolink(Se)){Se=Se.substring(me.raw.length),q.push(me);continue}if(!this.state.inLink&&(me=this.tokenizer.url(Se))){Se=Se.substring(me.raw.length),q.push(me);continue}if(ut=Se,this.options.extensions&&this.options.extensions.startInline){let fi=1/0;const fr=Se.slice(1);let ws;this.options.extensions.startInline.forEach(Zs=>{ws=Zs.call({lexer:this},fr),"number"==typeof ws&&ws>=0&&(fi=Math.min(fi,ws))}),fi<1/0&&fi>=0&&(ut=Se.substring(0,fi+1))}if(me=this.tokenizer.inlineText(ut)){Se=Se.substring(me.raw.length),"_"!==me.raw.slice(-1)&&(Zi=me.raw.slice(-1)),li=!0,Fe=q[q.length-1],Fe&&"text"===Fe.type?(Fe.raw+=me.raw,Fe.text+=me.text):q.push(me);continue}if(Se){const fi="Infinite loop on byte: "+Se.charCodeAt(0);if(this.options.silent){console.error(fi);break}throw new Error(fi)}}return q}}class $a{options;parser;constructor(Se){this.options=Se||Ws}space(Se){return""}code({text:Se,lang:q,escaped:me}){const Fe=(q||"").match(/^\S*/)?.[0],ut=Se.replace(/\n$/,"")+"\n";return Fe?'<pre><code class="language-'+ks(Fe)+'">'+(me?ut:ks(ut,!0))+"</code></pre>\n":"<pre><code>"+(me?ut:ks(ut,!0))+"</code></pre>\n"}blockquote({tokens:Se}){return`<blockquote>\n${this.parser.parse(Se)}</blockquote>\n`}html({text:Se}){return Se}heading({tokens:Se,depth:q}){return`<h${q}>${this.parser.parseInline(Se)}</h${q}>\n`}hr(Se){return"<hr>\n"}list(Se){const q=Se.ordered,me=Se.start;let Fe="";for(let Dn=0;Dn<Se.items.length;Dn++)Fe+=this.listitem(Se.items[Dn]);const ut=q?"ol":"ul";return"<"+ut+(q&&1!==me?' start="'+me+'"':"")+">\n"+Fe+"</"+ut+">\n"}listitem(Se){let q="";if(Se.task){const me=this.checkbox({checked:!!Se.checked});Se.loose?Se.tokens.length>0&&"paragraph"===Se.tokens[0].type?(Se.tokens[0].text=me+" "+Se.tokens[0].text,Se.tokens[0].tokens&&Se.tokens[0].tokens.length>0&&"text"===Se.tokens[0].tokens[0].type&&(Se.tokens[0].tokens[0].text=me+" "+Se.tokens[0].tokens[0].text)):Se.tokens.unshift({type:"text",raw:me+" ",text:me+" "}):q+=me+" "}return q+=this.parser.parse(Se.tokens,!!Se.loose),`<li>${q}</li>\n`}checkbox({checked:Se}){return"<input "+(Se?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:Se}){return`<p>${this.parser.parseInline(Se)}</p>\n`}table(Se){let q="",me="";for(let ut=0;ut<Se.header.length;ut++)me+=this.tablecell(Se.header[ut]);q+=this.tablerow({text:me});let Fe="";for(let ut=0;ut<Se.rows.length;ut++){const kt=Se.rows[ut];me="";for(let Dn=0;Dn<kt.length;Dn++)me+=this.tablecell(kt[Dn]);Fe+=this.tablerow({text:me})}return Fe&&(Fe=`<tbody>${Fe}</tbody>`),"<table>\n<thead>\n"+q+"</thead>\n"+Fe+"</table>\n"}tablerow({text:Se}){return`<tr>\n${Se}</tr>\n`}tablecell(Se){const q=this.parser.parseInline(Se.tokens),me=Se.header?"th":"td";return(Se.align?`<${me} align="${Se.align}">`:`<${me}>`)+q+`</${me}>\n`}strong({tokens:Se}){return`<strong>${this.parser.parseInline(Se)}</strong>`}em({tokens:Se}){return`<em>${this.parser.parseInline(Se)}</em>`}codespan({text:Se}){return`<code>${Se}</code>`}br(Se){return"<br>"}del({tokens:Se}){return`<del>${this.parser.parseInline(Se)}</del>`}link({href:Se,title:q,tokens:me}){const Fe=this.parser.parseInline(me),ut=Sl(Se);if(null===ut)return Fe;let kt='<a href="'+(Se=ut)+'"';return q&&(kt+=' title="'+q+'"'),kt+=">"+Fe+"</a>",kt}image({href:Se,title:q,text:me}){const Fe=Sl(Se);if(null===Fe)return me;let ut=`<img src="${Se=Fe}" alt="${me}"`;return q&&(ut+=` title="${q}"`),ut+=">",ut}text(Se){return"tokens"in Se&&Se.tokens?this.parser.parseInline(Se.tokens):Se.text}}class dl{strong({text:Se}){return Se}em({text:Se}){return Se}codespan({text:Se}){return Se}del({text:Se}){return Se}html({text:Se}){return Se}text({text:Se}){return Se}link({text:Se}){return""+Se}image({text:Se}){return""+Se}br(){return""}}class qs{options;renderer;textRenderer;constructor(Se){this.options=Se||Ws,this.options.renderer=this.options.renderer||new $a,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new dl}static parse(Se,q){return new qs(q).parse(Se)}static parseInline(Se,q){return new qs(q).parseInline(Se)}parse(Se,q=!0){let me="";for(let Fe=0;Fe<Se.length;Fe++){const ut=Se[Fe];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ut.type]){const Dn=ut,li=this.options.extensions.renderers[Dn.type].call({parser:this},Dn);if(!1!==li||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Dn.type)){me+=li||"";continue}}const kt=ut;switch(kt.type){case"space":me+=this.renderer.space(kt);continue;case"hr":me+=this.renderer.hr(kt);continue;case"heading":me+=this.renderer.heading(kt);continue;case"code":me+=this.renderer.code(kt);continue;case"table":me+=this.renderer.table(kt);continue;case"blockquote":me+=this.renderer.blockquote(kt);continue;case"list":me+=this.renderer.list(kt);continue;case"html":me+=this.renderer.html(kt);continue;case"paragraph":me+=this.renderer.paragraph(kt);continue;case"text":{let Dn=kt,li=this.renderer.text(Dn);for(;Fe+1<Se.length&&"text"===Se[Fe+1].type;)Dn=Se[++Fe],li+="\n"+this.renderer.text(Dn);me+=q?this.renderer.paragraph({type:"paragraph",raw:li,text:li,tokens:[{type:"text",raw:li,text:li}]}):li;continue}default:{const Dn='Token with "'+kt.type+'" type was not found.';if(this.options.silent)return console.error(Dn),"";throw new Error(Dn)}}}return me}parseInline(Se,q){q=q||this.renderer;let me="";for(let Fe=0;Fe<Se.length;Fe++){const ut=Se[Fe];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ut.type]){const Dn=this.options.extensions.renderers[ut.type].call({parser:this},ut);if(!1!==Dn||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(ut.type)){me+=Dn||"";continue}}const kt=ut;switch(kt.type){case"escape":case"text":me+=q.text(kt);break;case"html":me+=q.html(kt);break;case"link":me+=q.link(kt);break;case"image":me+=q.image(kt);break;case"strong":me+=q.strong(kt);break;case"em":me+=q.em(kt);break;case"codespan":me+=q.codespan(kt);break;case"br":me+=q.br(kt);break;case"del":me+=q.del(kt);break;default:{const Dn='Token with "'+kt.type+'" type was not found.';if(this.options.silent)return console.error(Dn),"";throw new Error(Dn)}}}return me}}class Zo{options;block;constructor(Se){this.options=Se||Ws}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(Se){return Se}postprocess(Se){return Se}processAllTokens(Se){return Se}provideLexer(){return this.block?po.lex:po.lexInline}provideParser(){return this.block?qs.parse:qs.parseInline}}const sa=new class Tc{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=qs;Renderer=$a;TextRenderer=dl;Lexer=po;Tokenizer=fa;Hooks=Zo;constructor(...Se){this.use(...Se)}walkTokens(Se,q){let me=[];for(const Fe of Se)switch(me=me.concat(q.call(this,Fe)),Fe.type){case"table":{const ut=Fe;for(const kt of ut.header)me=me.concat(this.walkTokens(kt.tokens,q));for(const kt of ut.rows)for(const Dn of kt)me=me.concat(this.walkTokens(Dn.tokens,q));break}case"list":me=me.concat(this.walkTokens(Fe.items,q));break;default:{const ut=Fe;this.defaults.extensions?.childTokens?.[ut.type]?this.defaults.extensions.childTokens[ut.type].forEach(kt=>{const Dn=ut[kt].flat(1/0);me=me.concat(this.walkTokens(Dn,q))}):ut.tokens&&(me=me.concat(this.walkTokens(ut.tokens,q)))}}return me}use(...Se){const q=this.defaults.extensions||{renderers:{},childTokens:{}};return Se.forEach(me=>{const Fe={...me};if(Fe.async=this.defaults.async||Fe.async||!1,me.extensions&&(me.extensions.forEach(ut=>{if(!ut.name)throw new Error("extension name required");if("renderer"in ut){const kt=q.renderers[ut.name];q.renderers[ut.name]=kt?function(...Dn){let li=ut.renderer.apply(this,Dn);return!1===li&&(li=kt.apply(this,Dn)),li}:ut.renderer}if("tokenizer"in ut){if(!ut.level||"block"!==ut.level&&"inline"!==ut.level)throw new Error("extension level must be 'block' or 'inline'");const kt=q[ut.level];kt?kt.unshift(ut.tokenizer):q[ut.level]=[ut.tokenizer],ut.start&&("block"===ut.level?q.startBlock?q.startBlock.push(ut.start):q.startBlock=[ut.start]:"inline"===ut.level&&(q.startInline?q.startInline.push(ut.start):q.startInline=[ut.start]))}"childTokens"in ut&&ut.childTokens&&(q.childTokens[ut.name]=ut.childTokens)}),Fe.extensions=q),me.renderer){const ut=this.defaults.renderer||new $a(this.defaults);for(const kt in me.renderer){if(!(kt in ut))throw new Error(`renderer '${kt}' does not exist`);if(["options","parser"].includes(kt))continue;const li=me.renderer[kt],Zi=ut[kt];ut[kt]=(...fi)=>{let fr=li.apply(ut,fi);return!1===fr&&(fr=Zi.apply(ut,fi)),fr||""}}Fe.renderer=ut}if(me.tokenizer){const ut=this.defaults.tokenizer||new fa(this.defaults);for(const kt in me.tokenizer){if(!(kt in ut))throw new Error(`tokenizer '${kt}' does not exist`);if(["options","rules","lexer"].includes(kt))continue;const li=me.tokenizer[kt],Zi=ut[kt];ut[kt]=(...fi)=>{let fr=li.apply(ut,fi);return!1===fr&&(fr=Zi.apply(ut,fi)),fr}}Fe.tokenizer=ut}if(me.hooks){const ut=this.defaults.hooks||new Zo;for(const kt in me.hooks){if(!(kt in ut))throw new Error(`hook '${kt}' does not exist`);if(["options","block"].includes(kt))continue;const li=me.hooks[kt],Zi=ut[kt];ut[kt]=Zo.passThroughHooks.has(kt)?fi=>{if(this.defaults.async)return Promise.resolve(li.call(ut,fi)).then(ws=>Zi.call(ut,ws));const fr=li.call(ut,fi);return Zi.call(ut,fr)}:(...fi)=>{let fr=li.apply(ut,fi);return!1===fr&&(fr=Zi.apply(ut,fi)),fr}}Fe.hooks=ut}if(me.walkTokens){const ut=this.defaults.walkTokens,kt=me.walkTokens;Fe.walkTokens=function(Dn){let li=[];return li.push(kt.call(this,Dn)),ut&&(li=li.concat(ut.call(this,Dn))),li}}this.defaults={...this.defaults,...Fe}}),this}setOptions(Se){return this.defaults={...this.defaults,...Se},this}lexer(Se,q){return po.lex(Se,q??this.defaults)}parser(Se,q){return qs.parse(Se,q??this.defaults)}parseMarkdown(Se){return(me,Fe)=>{const ut={...Fe},kt={...this.defaults,...ut},Dn=this.onError(!!kt.silent,!!kt.async);if(!0===this.defaults.async&&!1===ut.async)return Dn(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof me>"u"||null===me)return Dn(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof me)return Dn(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(me)+", string expected"));kt.hooks&&(kt.hooks.options=kt,kt.hooks.block=Se);const li=kt.hooks?kt.hooks.provideLexer():Se?po.lex:po.lexInline,Zi=kt.hooks?kt.hooks.provideParser():Se?qs.parse:qs.parseInline;if(kt.async)return Promise.resolve(kt.hooks?kt.hooks.preprocess(me):me).then(fi=>li(fi,kt)).then(fi=>kt.hooks?kt.hooks.processAllTokens(fi):fi).then(fi=>kt.walkTokens?Promise.all(this.walkTokens(fi,kt.walkTokens)).then(()=>fi):fi).then(fi=>Zi(fi,kt)).then(fi=>kt.hooks?kt.hooks.postprocess(fi):fi).catch(Dn);try{kt.hooks&&(me=kt.hooks.preprocess(me));let fi=li(me,kt);kt.hooks&&(fi=kt.hooks.processAllTokens(fi)),kt.walkTokens&&this.walkTokens(fi,kt.walkTokens);let fr=Zi(fi,kt);return kt.hooks&&(fr=kt.hooks.postprocess(fr)),fr}catch(fi){return Dn(fi)}}}onError(Se,q){return me=>{if(me.message+="\nPlease report this to https://github.com/markedjs/marked.",Se){const Fe="<p>An error occurred:</p><pre>"+ks(me.message+"",!0)+"</pre>";return q?Promise.resolve(Fe):Fe}if(q)return Promise.reject(me);throw me}}};function pe(et,Se){return sa.parse(et,Se)}function Lo(et,Se){if(1&et&&(h.j41(0,"div",5)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"div",18)(6,"strong"),h.EFF(7),h.nI1(8,"translate"),h.k0s()(),h.nrm(9,"div",19),h.k0s()()()()()),2&et){const q=Se.$implicit,me=h.XpG();h.R7$(4),h.HbH("user"===q.role?"bg-primary text-white":"bg-secondary text-white"),h.R7$(3),h.JRh("user"===q.role?h.bMT(8,4,"CHAT.YOU"):me.getSelectedRoleName()),h.R7$(2),h.Y8G("innerHTML",me.formatMessage(q.content),h.npT)}}function tl(et,Se){if(1&et&&(h.j41(0,"div",6),h.EFF(1),h.nI1(2,"translate"),h.k0s()),2&et){let q;const me=h.XpG();h.R7$(),h.SpI(" ",h.bMT(2,1,null!==(q=me.errorMessage())&&void 0!==q?q:"")," ")}}function au(et,Se){1&et&&(h.nrm(0,"span",20),h.EFF(1),h.nI1(2,"translate")),2&et&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"CHAT.SENDING")," "))}function Wc(et,Se){1&et&&(h.nrm(0,"i",21),h.EFF(1),h.nI1(2,"translate")),2&et&&(h.R7$(),h.SpI(" ",h.bMT(2,1,"CHAT.SEND")," "))}pe.options=pe.setOptions=function(et){return sa.setOptions(et),Qs(pe.defaults=sa.defaults),pe},pe.getDefaults=function Ls(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},pe.defaults=Ws,pe.use=function(...et){return sa.use(...et),Qs(pe.defaults=sa.defaults),pe},pe.walkTokens=function(et,Se){return sa.walkTokens(et,Se)},pe.parseInline=sa.parseInline,pe.Parser=qs,pe.parser=qs.parse,pe.Renderer=$a,pe.TextRenderer=dl,pe.Lexer=po,pe.lexer=po.lex,pe.Tokenizer=fa,pe.Hooks=Zo,pe.parse=pe;let _u=(()=>{class et{constructor(){this.isLoading=(0,h.vPA)(!0),this.selectedRole=h.hFB.required(),this.roleInfo=h.hFB.required(),this.conversationId=(0,h.hFB)(),this.currentConversation=(0,h.hFB)(),this.conversationIdChange=(0,h.CGW)(),this.sendMessageEvent=(0,h.CGW)(),this.userMessage=(0,h.vPA)(localStorage.getItem("unsent_message")||""),this.chatHistory=(0,h.vPA)([]),this.isSending=(0,h.vPA)(!1),this.errorMessage=(0,h.vPA)(null),this.isLimitReached=(0,h.vPA)(!1),(0,h.QZP)(()=>{const q=this.currentConversation();q&&this.chatHistory.set(q.messages)},{allowSignalWrites:!0})}ngOnInit(){pe.setOptions({breaks:!0,gfm:!0})}sendMessage(){const q=this.userMessage().trim();q&&(localStorage.setItem("unsent_message",q),this.isSending.set(!0),this.errorMessage.set(null),this.chatHistory.update(me=>[...me,{role:"user",content:q}]),this.sendMessageEvent.emit(q))}addBotMessage(q,me=!1){this.chatHistory.update(Fe=>[...Fe,{role:"bot",content:q}]),this.isSending.set(!1),me||(localStorage.removeItem("unsent_message"),this.userMessage.set(""))}setErrorMessage(q){this.errorMessage.set(q),this.isSending.set(!1)}setLimitReached(q){this.isLimitReached.set(q),q&&this.errorMessage.set("CHAT.LIMIT_REACHED")}getSelectedRoleName(){return this.selectedRole()?.name||"Bot"}formatMessage(q){const me=pe.parse(q);return"string"==typeof me?Ur.sanitize(me):(console.warn("Markdown parsing returned a Promise. Using original message."),Ur.sanitize(q))}handleInput(q){this.userMessage.set(q.target.value)}static{this.\u0275fac=function(me){return new(me||et)}}static{this.\u0275cmp=h.VBU({type:et,selectors:[["app-chat-ui"]],inputs:{selectedRole:[h.Mj6.SignalBased,"selectedRole"],roleInfo:[h.Mj6.SignalBased,"roleInfo"],conversationId:[h.Mj6.SignalBased,"conversationId"],currentConversation:[h.Mj6.SignalBased,"currentConversation"]},outputs:{conversationIdChange:"conversationIdChange",sendMessageEvent:"sendMessageEvent"},standalone:!0,features:[h.aNF],decls:18,vars:9,consts:[[1,"d-flex","flex-column","h-100"],[1,"flex-grow-1","px-4","pb-5"],[1,"col-12","col-md-8","mx-auto","py-4","mb-5"],[1,"text-center","my-3"],[3,"roleInfo"],[1,""],[1,"alert","alert-warning","mt-3","text-center"],[1,"position-fixed","bottom-0","start-0","end-0","bg-dark","border-top","border-secondary"],[1,"container-xl","py-3"],[1,"row","justify-content-center"],[1,"col-12","col-lg-8"],[1,"input-group","px-sm-5"],["rows","2",1,"form-control","bg-dark","text-light","rounded-start","border-secondary",2,"min-height","60px","max-height","120px","resize","none","border-radius","0.5rem 0 0 0.5rem",3,"input","keydown.enter","value","placeholder","disabled"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",2,"min-width","100px","border-radius","0 0.5rem 0.5rem 0 !important",3,"click","disabled"],[1,"row","mb-3"],[1,"col-12","d-flex","justify-content-center"],[1,"col-12","col-sm-10","col-md-9"],[1,"rounded","p-3"],[1,"small","mb-1"],[3,"innerHTML"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"fa-solid","fa-paper-plane","me-2"]],template:function(me,Fe){1&me&&(h.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h.nrm(4,"app-character-avatar",4),h.k0s(),h.Z7z(5,Lo,10,6,"div",5,h.fX1),h.DNE(7,tl,3,3,"div",6),h.k0s()(),h.j41(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"textarea",12),h.nI1(14,"translate"),h.bIt("input",function(kt){return Fe.handleInput(kt)})("keydown.enter",function(kt){return kt.preventDefault(),Fe.sendMessage()}),h.k0s(),h.j41(15,"button",13),h.bIt("click",function(){return Fe.sendMessage()}),h.DNE(16,au,3,3)(17,Wc,3,3),h.k0s()()()()()()()),2&me&&(h.R7$(4),h.Y8G("roleInfo",Fe.selectedRole()),h.R7$(),h.Dyx(Fe.chatHistory()),h.R7$(2),h.vxM(7,Fe.errorMessage()?7:-1),h.R7$(6),h.Y8G("value",Fe.userMessage())("placeholder",h.bMT(14,7,"CHAT.PLACEHOLDER"))("disabled",Fe.isLimitReached()),h.R7$(2),h.Y8G("disabled",Fe.isSending()||Fe.isLimitReached()),h.R7$(),h.vxM(16,Fe.isSending()?16:17))},dependencies:[H.MD,x.YN,qi,I.h,I.D9],styles:["[_ngcontent-%COMP%]:deep(pre){background-color:#0000000d;padding:1rem;border-radius:.375rem;white-space:pre-wrap;word-break:break-word}[_ngcontent-%COMP%]:deep(code){background-color:#0000000d;padding:.2rem .4rem;border-radius:.25rem;font-family:monospace}[_ngcontent-%COMP%]:deep(p:last-child){margin-bottom:0}.loader[_ngcontent-%COMP%]{width:15px;aspect-ratio:1;border-radius:50%;animation:_ngcontent-%COMP%_l5 1s infinite linear alternate}@keyframes _ngcontent-%COMP%_l5{0%{box-shadow:20px 0 #000,-20px 0 #0002;background:#000}33%{box-shadow:20px 0 #000,-20px 0 #0002;background:#0002}66%{box-shadow:20px 0 #0002,-20px 0 #000;background:#0002}to{box-shadow:20px 0 #0002,-20px 0 #000;background:#000}}[_nghost-%COMP%]     .flex-grow-1{padding-bottom:100px}"]})}}return et})();const Hs=["scrollContainer"],zu=(et,Se)=>Se.id,jc=()=>[H.vh,Q.md];function nl(et,Se){if(1&et&&(h.j41(0,"div",12)(1,"div",13)(2,"span"),h.EFF(3),h.nI1(4,"date"),h.k0s(),h.nrm(5,"br"),h.j41(6,"span"),h.EFF(7),h.nI1(8,"date"),h.k0s()()()),2&et){const q=h.XpG(2).$implicit;h.R7$(3),h.SpI("Created: ",h.i5U(4,2,q.createdAt,"short"),""),h.R7$(4),h.SpI("Updated: ",h.i5U(8,5,q.updatedAt,"short"),"")}}function cc(et,Se){if(1&et){const q=h.RV6();h.j41(0,"button",8),h.bIt("click",function(){h.eBV(q);const Fe=h.XpG().$implicit,ut=h.XpG();return h.Njj(ut.onConversationClick(Fe))}),h.j41(1,"div",9)(2,"span",10),h.EFF(3),h.k0s(),h.j41(4,"span",11),h.EFF(5),h.k0s()()(),h.DNE(6,nl,9,8,"ng-template",null,1,h.C5r)}if(2&et){const q=h.sdS(7),me=h.XpG().$implicit,Fe=h.XpG();h.Y8G("ngbTooltip",q),h.R7$(3),h.JRh(me.role.name||"Bot"),h.R7$(2),h.SpI(" ",Fe.getCleanTitle(me.title,me.role.name)," ")}}function Ba(et,Se){1&et&&(h.j41(0,"div",6)(1,"div",14),h.nrm(2,"span",15),h.k0s()())}function Ao(et,Se){1&et&&(h.j41(0,"div",6)(1,"div",14),h.nrm(2,"span",15),h.k0s()())}function Dc(et,Se){1&et&&(h.DNE(0,cc,8,3)(1,Ba,3,0)(2,Ao,3,0),h.nv$(3,0,jc,1,2,null,2,null,h.T$4),h.qhs(0,-1))}function Ua(et,Se){1&et&&(h.j41(0,"p",6),h.EFF(1,"No conversations yet."),h.k0s())}function Xa(et,Se){1&et&&(h.j41(0,"div",7)(1,"div",16)(2,"span",17),h.EFF(3,"Loading..."),h.k0s()()())}let mo=(()=>{class et{constructor(){this.conversations=(0,h.hFB)([]),this.conversationSelected=(0,h.CGW)(),this.currentPage=(0,h.vPA)(1),this.isLoading=(0,h.vPA)(!1),this.visibleConversations=(0,h.EWP)(()=>this.conversations().slice(0,20*this.currentPage()))}ngOnInit(){this.loadMoreItems()}onConversationClick(q){this.conversationSelected.emit(q)}getCleanTitle(q,me){if(!me||!q)return q;const Fe=`${me} - `;return q.startsWith(Fe)?q.substring(Fe.length):q}getConversationTooltip(q){const me=new Date(q.createdAt).toLocaleString(),Fe=new Date(q.updatedAt).toLocaleString();return`\n        ${q.title}\n        ${me}\n        ${Fe}\n        `}onScroll(q){const me=q.target;me.scrollHeight-(me.scrollTop+me.clientHeight)<100&&!this.isLoading()&&this.loadMoreItems()}loadMoreItems(){const q=this.conversations();20*this.currentPage()<q.length&&(this.isLoading.set(!0),setTimeout(()=>{this.currentPage.update(Fe=>Fe+1),this.isLoading.set(!1)},500))}static{this.\u0275fac=function(me){return new(me||et)}}static{this.\u0275cmp=h.VBU({type:et,selectors:[["app-conversations-list"]],viewQuery:function(me,Fe){if(1&me&&h.GBs(Hs,5),2&me){let ut;h.mGM(ut=h.lsd())&&(Fe.scrollContainer=ut.first)}},inputs:{conversations:[h.Mj6.SignalBased,"conversations"]},outputs:{conversationSelected:"conversationSelected"},standalone:!0,features:[h.aNF],decls:8,vars:2,consts:[["scrollContainer",""],["tooltipTemplate",""],[500,null],[1,"container"],[1,"conversation-wrapper",3,"scroll"],[1,"list-group"],[1,"list-group-item"],[1,"text-center","py-3"],["placement","bottom","container","body",1,"list-group-item","list-group-item-action","py-2",3,"click","ngbTooltip"],[1,"d-flex","align-items-center","gap-2"],[1,"badge","bg-primary","text-wrap"],[1,"text-truncate"],[1,"tooltip-content"],[1,"tooltip-dates"],[1,"placeholder-glow"],[1,"placeholder","col-12"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(me,Fe){if(1&me){const ut=h.RV6();h.j41(0,"div",3)(1,"div",4,0),h.bIt("scroll",function(Dn){return h.eBV(ut),h.Njj(Fe.onScroll(Dn))}),h.j41(3,"div",5),h.Z7z(4,Dc,5,0,null,null,zu,!1,Ua,2,0,"p",6),h.k0s(),h.DNE(7,Xa,4,0,"div",7),h.k0s()()}2&me&&(h.R7$(4),h.Dyx(Fe.visibleConversations()),h.R7$(3),h.vxM(7,Fe.isLoading()?7:-1))},dependencies:[H.MD,Q.n8],styles:[".conversation-wrapper[_ngcontent-%COMP%]{height:65vh;overflow-y:auto;overflow-x:hidden}"]})}}return et})();M(2308)},2308:(Rt,Je,M)=>{"use strict";M.r(Je),M.d(Je,{default:()=>Te});var l=M(177),H=M(1626),h=M(4438),fe=M(467),X=M(5312),ie=M(1946),de=M(4843);let Q=(()=>{class We{constructor(ke){this.http=ke,this.baseUrl=X.c.apiUrl,this.uploadState=(0,h.vPA)({isUploading:!1,progress:0,error:null}),this.documents=(0,h.vPA)([]),this.loadDocuments()}uploadDocument(ke){const Ke=new H.Lr;return this.http.post(X.c.apiUrl+ie.F.UPLOAD_DOCUMENT,ke,{headers:Ke})}getDocuments(){return this.http.get(X.c.apiUrl+ie.F.GET_DOCUMENTS)}loadDocuments(){var ke=this;return(0,fe.A)(function*(){try{const Ke=yield(0,de._)(ke.getDocuments());ke.documents.set(Ke)}catch(Ke){console.error("Error loading documents:",Ke),ke.documents.set([])}})()}static{this.\u0275fac=function(Ke){return new(Ke||We)(h.KVO(H.Qq))}}static{this.\u0275prov=h.jDH({token:We,factory:We.\u0275fac,providedIn:"root"})}}return We})();var z=M(5794);const L=(We,He)=>He.id;function I(We,He){if(1&We&&(h.j41(0,"div",7)(1,"div",11),h.EFF(2),h.k0s()()),2&We){const ke=h.XpG();h.R7$(),h.xc7("width",ke.uploadService.uploadState().progress,"%"),h.R7$(),h.SpI(" ",ke.uploadService.uploadState().progress,"% ")}}function K(We,He){if(1&We){const ke=h.RV6();h.j41(0,"div",12),h.nrm(1,"i",13),h.k0s(),h.j41(2,"p",14),h.EFF(3,"Drag and drop your PDF here, or"),h.k0s(),h.j41(4,"input",15,0),h.bIt("change",function(St){h.eBV(ke);const pt=h.XpG();return h.Njj(pt.onFileSelected(St))}),h.k0s(),h.j41(6,"button",16),h.bIt("click",function(){h.eBV(ke);const St=h.sdS(5);return h.Njj(St.click())}),h.EFF(7," Browse Files "),h.k0s()}if(2&We){const ke=h.XpG();h.R7$(6),h.Y8G("disabled",ke.uploadService.uploadState().isUploading)}}function te(We,He){if(1&We&&(h.j41(0,"div",8),h.EFF(1),h.k0s()),2&We){let ke;const Ke=h.XpG();h.R7$(),h.SpI(" ",null!==(ke=null==(ke=Ke.uploadService.uploadState().error)?null:ke.message)&&void 0!==ke?ke:"An unknown error occurred"," ")}}function ee(We,He){1&We&&(h.j41(0,"p",10),h.EFF(1,"No documents uploaded yet"),h.k0s())}function ue(We,He){1&We&&(h.j41(0,"span",21),h.EFF(1,"Processed"),h.k0s())}function Ce(We,He){1&We&&(h.j41(0,"span",22),h.EFF(1,"Processing"),h.k0s())}function Re(We,He){if(1&We&&(h.j41(0,"div",18)(1,"div",19)(2,"div")(3,"h6",20),h.EFF(4),h.k0s(),h.j41(5,"small",5),h.EFF(6),h.nI1(7,"date"),h.k0s()(),h.j41(8,"div"),h.DNE(9,ue,2,0,"span",21)(10,Ce,2,0),h.k0s()()()),2&We){const ke=He.$implicit,Ke=h.XpG(2);h.R7$(4),h.JRh(ke.fileName),h.R7$(2),h.Lme(" ",Ke.formatSize(ke.size)," \u2022 ",h.i5U(7,4,ke.createdAt,"medium")," "),h.R7$(3),h.vxM(9,ke.isProcessed?9:10)}}function ye(We,He){if(1&We&&(h.j41(0,"div",17),h.Z7z(1,Re,11,7,"div",18,L),h.k0s()),2&We){const ke=h.XpG();h.R7$(),h.Dyx(ke.uploadService.documents())}}let Te=(()=>{class We{constructor(){this.toastr=(0,h.WQX)(z.tw),this.uploadService=(0,h.WQX)(Q),this.isDragOver=!1,this.MAX_FILE_SIZE=31457280}onDragOver(ke){ke.preventDefault(),ke.stopPropagation(),this.isDragOver=!0}onDrop(ke){ke.preventDefault(),ke.stopPropagation(),this.isDragOver=!1;const Ke=ke.dataTransfer?.files;Ke?.length&&this.uploadFile(Ke[0])}onFileSelected(ke){const Ke=ke.target.files?.[0];if(!Ke)return;if("application/pdf"!==Ke.type)return void this.toastr.error("Only PDF files are allowed");if(Ke.size>this.MAX_FILE_SIZE)return void this.toastr.error("File size must not exceed 10MB");const St=new FormData;St.append("file",Ke),this.uploadService.uploadDocument(St).subscribe({next:pt=>{this.toastr.success("File uploaded successfully"),this.uploadService.loadDocuments()},error:pt=>{console.error("Upload error:",pt),this.toastr.error(pt.message||"Upload failed")}})}formatSize(ke){if(0===ke)return"0 Bytes";const pt=Math.floor(Math.log(ke)/Math.log(1024));return parseFloat((ke/Math.pow(1024,pt)).toFixed(2))+" "+["Bytes","KB","MB","GB"][pt]}uploadFile(ke){try{if("application/pdf"!==ke.type)return void this.toastr.error("Only PDF files are allowed");if(ke.size>this.MAX_FILE_SIZE)return void this.toastr.error("File size must not exceed 10MB");const Ke=new FormData;Ke.append("file",ke),this.uploadService.uploadState.update(St=>({...St,isUploading:!0,progress:0,error:null})),console.log("Uploading file:",{name:ke.name,type:ke.type,size:ke.size}),this.uploadService.uploadDocument(Ke).subscribe({next:St=>{if(St.type===H.hv.UploadProgress&&St.total){const pt=Math.round(100*St.loaded/St.total);this.uploadService.uploadState.update(ct=>({...ct,progress:pt}))}else St.type===H.hv.Response&&(this.toastr.success("Document uploaded successfully"),this.uploadService.uploadState.update(pt=>({...pt,isUploading:!1,progress:100})),this.uploadService.loadDocuments())},error:St=>{console.error("Upload error:",St),this.toastr.error(St.error?.message||"Upload failed"),this.uploadService.uploadState.update(pt=>({...pt,isUploading:!1,error:{type:"server",message:St.error?.message||"Upload failed"}}))}})}catch(Ke){console.error("Client error:",Ke),this.toastr.error("Failed to process file"),this.uploadService.uploadState.update(St=>({...St,isUploading:!1,error:{type:"client",message:Ke.message}}))}}static{this.\u0275fac=function(Ke){return new(Ke||We)}}static{this.\u0275cmp=h.VBU({type:We,selectors:[["app-upload-document"]],standalone:!0,features:[h.aNF],decls:17,vars:5,consts:[["fileInput",""],[1,"container","py-4"],[1,"card","mb-4"],[1,"card-body"],[1,"card-title"],[1,"text-muted"],[1,"upload-area","p-4","border","rounded","text-center",3,"dragover","dragleave","drop"],[1,"progress","mb-3"],[1,"alert","alert-danger","mt-3"],[1,"card"],[1,"text-muted","text-center","py-4"],[1,"progress-bar"],[1,"mb-3"],[1,"fas","fa-cloud-upload-alt","fa-3x","text-primary"],[1,"mb-2"],["type","file","accept","application/pdf",1,"d-none",3,"change"],[1,"btn","btn-primary",3,"click","disabled"],[1,"list-group"],[1,"list-group-item"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-1"],[1,"badge","bg-success"],[1,"badge","bg-warning"]],template:function(Ke,St){1&Ke&&(h.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h5",4),h.EFF(4,"Upload Document"),h.k0s(),h.j41(5,"p",5),h.EFF(6,"Supported format: PDF (Max 10MB)"),h.k0s(),h.j41(7,"div",6),h.bIt("dragover",function(ct){return St.onDragOver(ct)})("dragleave",function(){return St.isDragOver=!1})("drop",function(ct){return St.onDrop(ct)}),h.DNE(8,I,3,3,"div",7)(9,K,8,1)(10,te,2,1,"div",8),h.k0s()()(),h.j41(11,"div",9)(12,"div",3)(13,"h5",4),h.EFF(14,"Uploaded Documents"),h.k0s(),h.DNE(15,ee,2,0,"p",10)(16,ye,3,0),h.k0s()()()),2&Ke&&(h.R7$(7),h.AVh("drag-over",St.isDragOver),h.R7$(),h.vxM(8,St.uploadService.uploadState().isUploading?8:9),h.R7$(2),h.vxM(10,St.uploadService.uploadState().error?10:-1),h.R7$(5),h.vxM(15,0===St.uploadService.documents().length?15:16))},dependencies:[l.MD,l.vh],styles:[".upload-area[_ngcontent-%COMP%]{transition:all .3s ease;cursor:pointer}.upload-area.drag-over[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.1);border-style:dashed!important}.progress[_ngcontent-%COMP%]{height:.5rem}"]})}}return We})()},7865:(Rt,Je,M)=>{"use strict";M.d(Je,{v:()=>fe,O:()=>EE});var l=M(6707),H=M(33),h=M(4438);let fe=(()=>{class c{static{this.\u0275fac=function(s){return new(s||c)}}static{this.\u0275cmp=h.VBU({type:c,selectors:[["app-main-layout"]],standalone:!0,features:[h.aNF],decls:4,vars:0,consts:[[1,"container","hue-rotating",2,"padding-top","10vh"]],template:function(s,a){1&s&&(h.nrm(0,"app-navbar"),h.j41(1,"main",0),h.nrm(2,"router-outlet"),h.k0s(),h.nrm(3,"app-footer"))},dependencies:[l._r,H.n3,l.n5]})}}return c})();var X=M(467);let ie=(()=>{class c{static{this.\u0275fac=function(s){return new(s||c)}}static{this.\u0275cmp=h.VBU({type:c,selectors:[["app-loader-dots"]],standalone:!0,features:[h.aNF],decls:1,vars:0,consts:[[1,"loader"]],template:function(s,a){1&s&&h.nrm(0,"span",0)},styles:['.loader[_ngcontent-%COMP%]{width:176px;height:176px;display:inline-block;position:relative}.loader[_ngcontent-%COMP%]:after, .loader[_ngcontent-%COMP%]:before{content:"";box-sizing:border-box;width:176px;height:176px;border-radius:50%;background:var(--primary);position:absolute;left:0;top:0;animation:_ngcontent-%COMP%_animloader 2s linear infinite;transition:background-color .3s ease}.loader[_ngcontent-%COMP%]:after{animation-delay:1s}@keyframes _ngcontent-%COMP%_animloader{0%{transform:scale(0);opacity:1}to{transform:scale(1);opacity:0}}.loader-contrast[_ngcontent-%COMP%]:after, .loader-contrast[_ngcontent-%COMP%]:before{background:var(--text)}.loader-light[_ngcontent-%COMP%]:after, .loader-light[_ngcontent-%COMP%]:before{background:var(--surface)}']})}}return c})();var de=M(177),Q=M(9417),z=M(5823);const L=()=>({"background-color":"rgba(0,0,0,0.5)"});function I(c,e){1&c&&(h.j41(0,"small"),h.EFF(1,"Birth date is required"),h.k0s())}function K(c,e){if(1&c&&(h.j41(0,"div",20),h.DNE(1,I,2,0,"small",21),h.k0s()),2&c){let n;const s=h.XpG();h.R7$(),h.Y8G("ngIf",null==(n=s.birthDateForm.get("birthdate"))||null==n.errors?null:n.errors.required)}}function te(c,e){1&c&&(h.j41(0,"small"),h.EFF(1,"You must accept the terms"),h.k0s())}function ee(c,e){if(1&c&&(h.j41(0,"div",20),h.DNE(1,te,2,0,"small",21),h.k0s()),2&c){let n;const s=h.XpG();h.R7$(),h.Y8G("ngIf",null==(n=s.birthDateForm.get("termsAccepted"))||null==n.errors?null:n.errors.required)}}function ue(c,e){if(1&c&&(h.j41(0,"div",22),h.EFF(1),h.k0s()),2&c){const n=h.XpG();h.R7$(),h.SpI(" ",n.errorMessage," ")}}function Ce(c,e){1&c&&h.nrm(0,"span",23)}let Re=(()=>{class c{constructor(n,s){this.fb=n,this.userService=s,this.birthdateUpdated=(0,h.CGW)(),this.errorMessage="",this.isLoading=!1;const a=new Date;a.setFullYear(a.getFullYear()-21),this.maxDate=a.toISOString().split("T")[0]}ngOnInit(){this.birthDateForm=this.fb.group({birthdate:["",Q.k0.required],termsAccepted:[!1,Q.k0.requiredTrue]})}updateBirthDate(){if(this.birthDateForm.valid){this.isLoading=!0,this.errorMessage="";const n=this.birthDateForm.get("birthdate").value,s=new Date(n),a=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")} 00:00:00+00`;this.userService.updateBirthDate(a).subscribe({next:u=>{this.birthdateUpdated.emit()},error:u=>{this.errorMessage=u.error?.message||"Update failed",this.isLoading=!1},complete:()=>{this.isLoading=!1}})}}static{this.\u0275fac=function(s){return new(s||c)(h.rXU(Q.ok),h.rXU(z.DL))}}static{this.\u0275cmp=h.VBU({type:c,selectors:[["app-birth-date-modal"]],outputs:{birthdateUpdated:"birthdateUpdated"},standalone:!0,features:[h.aNF],decls:28,vars:9,consts:[["tabindex","-1",1,"modal","show","d-block",3,"ngStyle"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[3,"formGroup"],[1,"mb-3"],["for","birthdate",1,"form-label"],["type","date","id","birthdate","formControlName","birthdate",1,"form-control",3,"max"],["class","text-danger",4,"ngIf"],[1,"mb-3","form-check"],["type","checkbox","id","terms","formControlName","termsAccepted",1,"form-check-input"],["for","terms",1,"form-check-label"],["href","https://zenia.cc/terms.html","target","_blank"],["href","https://zenia.cc/privacy.html","target","_blank"],["class","alert alert-danger",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(s,a){if(1&s&&(h.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),h.EFF(5,"Welcome \u{1f9d8}"),h.k0s()(),h.j41(6,"div",5)(7,"form",6)(8,"div",7)(9,"label",8),h.EFF(10,"Birth Date"),h.k0s(),h.nrm(11,"input",9),h.DNE(12,K,2,1,"div",10),h.k0s(),h.j41(13,"div",11),h.nrm(14,"input",12),h.j41(15,"label",13),h.EFF(16," I have read and accept "),h.j41(17,"a",14),h.EFF(18," terms and conditions "),h.k0s(),h.EFF(19," and "),h.j41(20,"a",15),h.EFF(21," privacy policy. "),h.k0s()(),h.DNE(22,ee,2,1,"div",10),h.k0s()(),h.DNE(23,ue,2,1,"div",16),h.k0s(),h.j41(24,"div",17)(25,"button",18),h.bIt("click",function(){return a.updateBirthDate()}),h.DNE(26,Ce,1,0,"span",19),h.EFF(27," Accept "),h.k0s()()()()()),2&s){let u,p;h.Y8G("ngStyle",h.lJ4(8,L)),h.R7$(7),h.Y8G("formGroup",a.birthDateForm),h.R7$(4),h.Y8G("max",a.maxDate),h.R7$(),h.Y8G("ngIf",(null==(u=a.birthDateForm.get("birthdate"))?null:u.touched)&&(null==(u=a.birthDateForm.get("birthdate"))?null:u.errors)),h.R7$(10),h.Y8G("ngIf",(null==(p=a.birthDateForm.get("termsAccepted"))?null:p.touched)&&(null==(p=a.birthDateForm.get("termsAccepted"))?null:p.errors)),h.R7$(),h.Y8G("ngIf",a.errorMessage),h.R7$(2),h.Y8G("disabled",!a.birthDateForm.valid||a.isLoading),h.R7$(),h.Y8G("ngIf",a.isLoading)}},dependencies:[de.MD,de.bT,de.B3,Q.X1,Q.qT,Q.me,Q.Zm,Q.BC,Q.cb,Q.j4,Q.JD]})}}return c})();var ye=M(4909);const le=1,x=2,C=3,Pi=0,Ps=1,ri=2,qi=0,_r=1,wi=2,Cr=3,Wr=4,Lr=5,or=6,Bs=7,rt=301,xt=302,Un=306,si=1001,kr=1003,yi=1006,yr=1008,ao=1009,ms=1010,sr=1011,Ms=1012,to=1013,Os=1014,Fs=1015,lo=1016,Go=1017,Ye=1018,O=1020,G=35902,ce=1021,qe=1022,ht=1023,tn=1024,hn=1025,zn=1026,Kn=1027,qn=1028,Or=1029,Fr=1030,Br=1031,co=1033,Rr=33776,Ur=33777,Ls=33778,Ws=33779,Qs=35840,As=35841,Po=35842,Oo=35843,zi=36196,Hr=37492,Bl=37496,ks=37808,El=37809,ys=37810,Sl=37811,ca=37812,br=37813,ha=37814,Ra=37815,js=37816,za=37817,fa=37818,cl=37819,no=37820,Fo=37821,Qo=36492,Ml=36494,Ga=36495,pa=36283,Na=36284,Yo=36285,Pa=36286,vo="srgb",ia="srgb-linear",ul="linear",as="srgb",_o=7680,jc="300 es",nl=2e3;class Ba{addEventListener(e,n){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[e]&&(s[e]=[]),-1===s[e].indexOf(n)&&s[e].push(n)}hasEventListener(e,n){if(void 0===this._listeners)return!1;const s=this._listeners;return void 0!==s[e]&&-1!==s[e].indexOf(n)}removeEventListener(e,n){if(void 0===this._listeners)return;const a=this._listeners[e];if(void 0!==a){const u=a.indexOf(n);-1!==u&&a.splice(u,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const s=this._listeners[e.type];if(void 0!==s){e.target=this;const a=s.slice(0);for(let u=0,p=a.length;u<p;u++)a[u].call(this,e);e.target=null}}}const Ao=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Ua=Math.PI/180,Xa=180/Math.PI;function bo(){const c=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(Ao[255&c]+Ao[c>>8&255]+Ao[c>>16&255]+Ao[c>>24&255]+"-"+Ao[255&e]+Ao[e>>8&255]+"-"+Ao[e>>16&15|64]+Ao[e>>24&255]+"-"+Ao[63&n|128]+Ao[n>>8&255]+"-"+Ao[n>>16&255]+Ao[n>>24&255]+Ao[255&s]+Ao[s>>8&255]+Ao[s>>16&255]+Ao[s>>24&255]).toLowerCase()}function mo(c,e,n){return Math.max(e,Math.min(n,c))}function q(c,e,n){return(1-n)*c+n*e}function To(c,e){switch(e.constructor){case Float32Array:return c;case Uint32Array:return c/4294967295;case Uint16Array:return c/65535;case Uint8Array:return c/255;case Int32Array:return Math.max(c/2147483647,-1);case Int16Array:return Math.max(c/32767,-1);case Int8Array:return Math.max(c/127,-1);default:throw new Error("Invalid component type.")}}function Tr(c,e){switch(e.constructor){case Float32Array:return c;case Uint32Array:return Math.round(4294967295*c);case Uint16Array:return Math.round(65535*c);case Uint8Array:return Math.round(255*c);case Int32Array:return Math.round(2147483647*c);case Int16Array:return Math.round(32767*c);case Int8Array:return Math.round(127*c);default:throw new Error("Invalid component type.")}}class yn{constructor(e=0,n=0){yn.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,s=this.y,a=e.elements;return this.x=a[0]*n+a[3]*s+a[6],this.y=a[1]*n+a[4]*s+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(n,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===n)return Math.PI/2;const s=this.dot(e)/n;return Math.acos(mo(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,s=this.y-e.y;return n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,s){return this.x=e.x+(n.x-e.x)*s,this.y=e.y+(n.y-e.y)*s,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const s=Math.cos(n),a=Math.sin(n),u=this.x-e.x,p=this.y-e.y;return this.x=u*s-p*a+e.x,this.y=u*a+p*s+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ir{constructor(e,n,s,a,u,p,v,b,E){ir.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,n,s,a,u,p,v,b,E)}set(e,n,s,a,u,p,v,b,E){const R=this.elements;return R[0]=e,R[1]=a,R[2]=v,R[3]=n,R[4]=u,R[5]=b,R[6]=s,R[7]=p,R[8]=E,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,s=e.elements;return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],this}extractBasis(e,n,s){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const s=e.elements,a=n.elements,u=this.elements,p=s[0],v=s[3],b=s[6],E=s[1],R=s[4],B=s[7],U=s[2],$=s[5],re=s[8],ve=a[0],ae=a[3],Z=a[6],Ue=a[1],Le=a[4],Pe=a[7],Ft=a[2],dt=a[5],gt=a[8];return u[0]=p*ve+v*Ue+b*Ft,u[3]=p*ae+v*Le+b*dt,u[6]=p*Z+v*Pe+b*gt,u[1]=E*ve+R*Ue+B*Ft,u[4]=E*ae+R*Le+B*dt,u[7]=E*Z+R*Pe+B*gt,u[2]=U*ve+$*Ue+re*Ft,u[5]=U*ae+$*Le+re*dt,u[8]=U*Z+$*Pe+re*gt,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],s=e[1],a=e[2],u=e[3],p=e[4],v=e[5],b=e[6],E=e[7],R=e[8];return n*p*R-n*v*E-s*u*R+s*v*b+a*u*E-a*p*b}invert(){const e=this.elements,n=e[0],s=e[1],a=e[2],u=e[3],p=e[4],v=e[5],b=e[6],E=e[7],R=e[8],B=R*p-v*E,U=v*b-R*u,$=E*u-p*b,re=n*B+s*U+a*$;if(0===re)return this.set(0,0,0,0,0,0,0,0,0);const ve=1/re;return e[0]=B*ve,e[1]=(a*E-R*s)*ve,e[2]=(v*s-a*p)*ve,e[3]=U*ve,e[4]=(R*n-a*b)*ve,e[5]=(a*u-v*n)*ve,e[6]=$*ve,e[7]=(s*b-E*n)*ve,e[8]=(p*n-s*u)*ve,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,s,a,u,p,v){const b=Math.cos(u),E=Math.sin(u);return this.set(s*b,s*E,-s*(b*p+E*v)+p+e,-a*E,a*b,-a*(-E*p+b*v)+v+n,0,0,1),this}scale(e,n){return this.premultiply(il.makeScale(e,n)),this}rotate(e){return this.premultiply(il.makeRotation(-e)),this}translate(e,n){return this.premultiply(il.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),s=Math.sin(e);return this.set(n,-s,0,s,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,s=e.elements;for(let a=0;a<9;a++)if(n[a]!==s[a])return!1;return!0}fromArray(e,n=0){for(let s=0;s<9;s++)this.elements[s]=e[s+n];return this}toArray(e=[],n=0){const s=this.elements;return e[n]=s[0],e[n+1]=s[1],e[n+2]=s[2],e[n+3]=s[3],e[n+4]=s[4],e[n+5]=s[5],e[n+6]=s[6],e[n+7]=s[7],e[n+8]=s[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const il=new ir;function Ka(c){for(let e=c.length-1;e>=0;--e)if(c[e]>=65535)return!0;return!1}function D(c){return document.createElementNS("http://www.w3.org/1999/xhtml",c)}function F(){const c=D("canvas");return c.style.display="block",c}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const oe={};function De(c){c in oe||(oe[c]=!0,console.warn(c))}const Lt={enabled:!0,workingColorSpace:ia,spaces:{},convert:function(c,e,n){return!1===this.enabled||e===n||!e||!n||(this.spaces[e].transfer===as&&(c.r=Jt(c.r),c.g=Jt(c.g),c.b=Jt(c.b)),this.spaces[e].primaries!==this.spaces[n].primaries&&(c.applyMatrix3(this.spaces[e].toXYZ),c.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===as&&(c.r=oi(c.r),c.g=oi(c.g),c.b=oi(c.b))),c},fromWorkingColorSpace:function(c,e){return this.convert(c,this.workingColorSpace,e)},toWorkingColorSpace:function(c,e){return this.convert(c,e,this.workingColorSpace)},getPrimaries:function(c){return this.spaces[c].primaries},getTransfer:function(c){return""===c?ul:this.spaces[c].transfer},getLuminanceCoefficients:function(c,e=this.workingColorSpace){return c.fromArray(this.spaces[e].luminanceCoefficients)},define:function(c){Object.assign(this.spaces,c)},_getMatrix:function(c,e,n){return c.copy(this.spaces[e].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(c){return this.spaces[c].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(c=this.workingColorSpace){return this.spaces[c].workingColorSpaceConfig.unpackColorSpace}};function Jt(c){return c<.04045?.0773993808*c:Math.pow(.9478672986*c+.0521327014,2.4)}function oi(c){return c<.0031308?12.92*c:1.055*Math.pow(c,.41666)-.055}const pi=[.64,.33,.3,.6,.15,.06],bi=[.2126,.7152,.0722],xr=[.3127,.329],Zn=(new ir).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Ji=(new ir).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);let xi;Lt.define({[ia]:{primaries:pi,whitePoint:xr,transfer:ul,toXYZ:Zn,fromXYZ:Ji,luminanceCoefficients:bi,workingColorSpaceConfig:{unpackColorSpace:vo},outputColorSpaceConfig:{drawingBufferColorSpace:vo}},[vo]:{primaries:pi,whitePoint:xr,transfer:as,toXYZ:Zn,fromXYZ:Ji,luminanceCoefficients:bi,outputColorSpaceConfig:{drawingBufferColorSpace:vo}}});class P{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{void 0===xi&&(xi=D("canvas")),xi.width=e.width,xi.height=e.height;const s=xi.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),n=xi}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=D("canvas");n.width=e.width,n.height=e.height;const s=n.getContext("2d");s.drawImage(e,0,0,e.width,e.height);const a=s.getImageData(0,0,e.width,e.height),u=a.data;for(let p=0;p<u.length;p++)u[p]=255*Jt(u[p]/255);return s.putImageData(a,0,0),n}if(e.data){const n=e.data.slice(0);for(let s=0;s<n.length;s++)n[s]=n instanceof Uint8Array||n instanceof Uint8ClampedArray?Math.floor(255*Jt(n[s]/255)):Jt(n[s]);return{data:n,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let we=0;class se{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:we++}),this.uuid=bo(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.images[this.uuid])return e.images[this.uuid];const s={uuid:this.uuid,url:""},a=this.data;if(null!==a){let u;if(Array.isArray(a)){u=[];for(let p=0,v=a.length;p<v;p++)u.push(be(a[p].isDataTexture?a[p].image:a[p]))}else u=be(a);s.url=u}return n||(e.images[this.uuid]=s),s}}function be(c){return typeof HTMLImageElement<"u"&&c instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&c instanceof ImageBitmap?P.getDataURL(c):c.data?{data:Array.from(c.data),width:c.width,height:c.height,type:c.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let mt=0,Xt=(()=>{class c extends Ba{constructor(n=c.DEFAULT_IMAGE,s=c.DEFAULT_MAPPING,a=si,u=si,p=yi,v=yr,b=ht,E=ao,R=c.DEFAULT_ANISOTROPY,B=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:mt++}),this.uuid=bo(),this.name="",this.source=new se(n),this.mipmaps=[],this.mapping=s,this.channel=0,this.wrapS=a,this.wrapT=u,this.magFilter=p,this.minFilter=v,this.anisotropy=R,this.format=b,this.internalFormat=null,this.type=E,this.offset=new yn(0,0),this.repeat=new yn(1,1),this.center=new yn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ir,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=B,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(n=null){this.source.data=n}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(n){return this.name=n.name,this.source=n.source,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.channel=n.channel,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.colorSpace=n.colorSpace,this.userData=JSON.parse(JSON.stringify(n.userData)),this.needsUpdate=!0,this}toJSON(n){const s=void 0===n||"string"==typeof n;if(!s&&void 0!==n.textures[this.uuid])return n.textures[this.uuid];const a={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(n).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(a.userData=this.userData),s||(n.textures[this.uuid]=a),a}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(n){if(300!==this.mapping)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case 1e3:n.x=n.x-Math.floor(n.x);break;case si:n.x=n.x<0?0:1;break;case 1002:n.x=1===Math.abs(Math.floor(n.x)%2)?Math.ceil(n.x)-n.x:n.x-Math.floor(n.x)}if(n.y<0||n.y>1)switch(this.wrapT){case 1e3:n.y=n.y-Math.floor(n.y);break;case si:n.y=n.y<0?0:1;break;case 1002:n.y=1===Math.abs(Math.floor(n.y)%2)?Math.ceil(n.y)-n.y:n.y-Math.floor(n.y)}return this.flipY&&(n.y=1-n.y),n}set needsUpdate(n){!0===n&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(n){!0===n&&this.pmremVersion++}}return c.DEFAULT_IMAGE=null,c.DEFAULT_MAPPING=300,c.DEFAULT_ANISOTROPY=1,c})();class Kt{constructor(e=0,n=0,s=0,a=1){Kt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=s,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,s,a){return this.x=e,this.y=n,this.z=s,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,s=this.y,a=this.z,u=this.w,p=e.elements;return this.x=p[0]*n+p[4]*s+p[8]*a+p[12]*u,this.y=p[1]*n+p[5]*s+p[9]*a+p[13]*u,this.z=p[2]*n+p[6]*s+p[10]*a+p[14]*u,this.w=p[3]*n+p[7]*s+p[11]*a+p[15]*u,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,s,a,u;const b=e.elements,E=b[0],R=b[4],B=b[8],U=b[1],$=b[5],re=b[9],ve=b[2],ae=b[6],Z=b[10];if(Math.abs(R-U)<.01&&Math.abs(B-ve)<.01&&Math.abs(re-ae)<.01){if(Math.abs(R+U)<.1&&Math.abs(B+ve)<.1&&Math.abs(re+ae)<.1&&Math.abs(E+$+Z-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const Le=(E+1)/2,Pe=($+1)/2,Ft=(Z+1)/2,dt=(R+U)/4,gt=(B+ve)/4,bt=(re+ae)/4;return Le>Pe&&Le>Ft?Le<.01?(s=0,a=.707106781,u=.707106781):(s=Math.sqrt(Le),a=dt/s,u=gt/s):Pe>Ft?Pe<.01?(s=.707106781,a=0,u=.707106781):(a=Math.sqrt(Pe),s=dt/a,u=bt/a):Ft<.01?(s=.707106781,a=.707106781,u=0):(u=Math.sqrt(Ft),s=gt/u,a=bt/u),this.set(s,a,u,n),this}let Ue=Math.sqrt((ae-re)*(ae-re)+(B-ve)*(B-ve)+(U-R)*(U-R));return Math.abs(Ue)<.001&&(Ue=1),this.x=(ae-re)/Ue,this.y=(B-ve)/Ue,this.z=(U-R)/Ue,this.w=Math.acos((E+$+Z-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(n,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,s){return this.x=e.x+(n.x-e.x)*s,this.y=e.y+(n.y-e.y)*s,this.z=e.z+(n.z-e.z)*s,this.w=e.w+(n.w-e.w)*s,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Qn extends Ba{constructor(e=1,n=1,s={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Kt(0,0,e,n),this.scissorTest=!1,this.viewport=new Kt(0,0,e,n);const a={width:e,height:n,depth:1};s=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:yi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},s);const u=new Xt(a,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.colorSpace);u.flipY=!1,u.generateMipmaps=s.generateMipmaps,u.internalFormat=s.internalFormat,this.textures=[];const p=s.count;for(let v=0;v<p;v++)this.textures[v]=u.clone(),this.textures[v].isRenderTargetTexture=!0;this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,this.resolveDepthBuffer=s.resolveDepthBuffer,this.resolveStencilBuffer=s.resolveStencilBuffer,this.depthTexture=s.depthTexture,this.samples=s.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,s=1){if(this.width!==e||this.height!==n||this.depth!==s){this.width=e,this.height=n,this.depth=s;for(let a=0,u=this.textures.length;a<u;a++)this.textures[a].image.width=e,this.textures[a].image.height=n,this.textures[a].image.depth=s;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let s=0,a=e.textures.length;s<a;s++)this.textures[s]=e.textures[s].clone(),this.textures[s].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new se(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Dr extends Qn{constructor(e=1,n=1,s={}){super(e,n,s),this.isWebGLRenderTarget=!0}}class es extends Xt{constructor(e=null,n=1,s=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:s,depth:a},this.magFilter=kr,this.minFilter=kr,this.wrapR=si,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ar extends Xt{constructor(e=null,n=1,s=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:s,depth:a},this.magFilter=kr,this.minFilter=kr,this.wrapR=si,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Fi{constructor(e=0,n=0,s=0,a=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=s,this._w=a}static slerpFlat(e,n,s,a,u,p,v){let b=s[a+0],E=s[a+1],R=s[a+2],B=s[a+3];const U=u[p+0],$=u[p+1],re=u[p+2],ve=u[p+3];if(0===v)return e[n+0]=b,e[n+1]=E,e[n+2]=R,void(e[n+3]=B);if(1===v)return e[n+0]=U,e[n+1]=$,e[n+2]=re,void(e[n+3]=ve);if(B!==ve||b!==U||E!==$||R!==re){let ae=1-v;const Z=b*U+E*$+R*re+B*ve,Ue=Z>=0?1:-1,Le=1-Z*Z;if(Le>Number.EPSILON){const Ft=Math.sqrt(Le),dt=Math.atan2(Ft,Z*Ue);ae=Math.sin(ae*dt)/Ft,v=Math.sin(v*dt)/Ft}const Pe=v*Ue;if(b=b*ae+U*Pe,E=E*ae+$*Pe,R=R*ae+re*Pe,B=B*ae+ve*Pe,ae===1-v){const Ft=1/Math.sqrt(b*b+E*E+R*R+B*B);b*=Ft,E*=Ft,R*=Ft,B*=Ft}}e[n]=b,e[n+1]=E,e[n+2]=R,e[n+3]=B}static multiplyQuaternionsFlat(e,n,s,a,u,p){const v=s[a],b=s[a+1],E=s[a+2],R=s[a+3],B=u[p],U=u[p+1],$=u[p+2],re=u[p+3];return e[n]=v*re+R*B+b*$-E*U,e[n+1]=b*re+R*U+E*B-v*$,e[n+2]=E*re+R*$+v*U-b*B,e[n+3]=R*re-v*B-b*U-E*$,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,s,a){return this._x=e,this._y=n,this._z=s,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const s=e._x,a=e._y,u=e._z,p=e._order,v=Math.cos,b=Math.sin,E=v(s/2),R=v(a/2),B=v(u/2),U=b(s/2),$=b(a/2),re=b(u/2);switch(p){case"XYZ":this._x=U*R*B+E*$*re,this._y=E*$*B-U*R*re,this._z=E*R*re+U*$*B,this._w=E*R*B-U*$*re;break;case"YXZ":this._x=U*R*B+E*$*re,this._y=E*$*B-U*R*re,this._z=E*R*re-U*$*B,this._w=E*R*B+U*$*re;break;case"ZXY":this._x=U*R*B-E*$*re,this._y=E*$*B+U*R*re,this._z=E*R*re+U*$*B,this._w=E*R*B-U*$*re;break;case"ZYX":this._x=U*R*B-E*$*re,this._y=E*$*B+U*R*re,this._z=E*R*re-U*$*B,this._w=E*R*B+U*$*re;break;case"YZX":this._x=U*R*B+E*$*re,this._y=E*$*B+U*R*re,this._z=E*R*re-U*$*B,this._w=E*R*B-U*$*re;break;case"XZY":this._x=U*R*B-E*$*re,this._y=E*$*B-U*R*re,this._z=E*R*re+U*$*B,this._w=E*R*B+U*$*re;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+p)}return!0===n&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const s=n/2,a=Math.sin(s);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,s=n[0],a=n[4],u=n[8],p=n[1],v=n[5],b=n[9],E=n[2],R=n[6],B=n[10],U=s+v+B;if(U>0){const $=.5/Math.sqrt(U+1);this._w=.25/$,this._x=(R-b)*$,this._y=(u-E)*$,this._z=(p-a)*$}else if(s>v&&s>B){const $=2*Math.sqrt(1+s-v-B);this._w=(R-b)/$,this._x=.25*$,this._y=(a+p)/$,this._z=(u+E)/$}else if(v>B){const $=2*Math.sqrt(1+v-s-B);this._w=(u-E)/$,this._x=(a+p)/$,this._y=.25*$,this._z=(b+R)/$}else{const $=2*Math.sqrt(1+B-s-v);this._w=(p-a)/$,this._x=(u+E)/$,this._y=(b+R)/$,this._z=.25*$}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let s=e.dot(n)+1;return s<Number.EPSILON?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(mo(this.dot(e),-1,1)))}rotateTowards(e,n){const s=this.angleTo(e);if(0===s)return this;const a=Math.min(1,n/s);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const s=e._x,a=e._y,u=e._z,p=e._w,v=n._x,b=n._y,E=n._z,R=n._w;return this._x=s*R+p*v+a*E-u*b,this._y=a*R+p*b+u*v-s*E,this._z=u*R+p*E+s*b-a*v,this._w=p*R-s*v-a*b-u*E,this._onChangeCallback(),this}slerp(e,n){if(0===n)return this;if(1===n)return this.copy(e);const s=this._x,a=this._y,u=this._z,p=this._w;let v=p*e._w+s*e._x+a*e._y+u*e._z;if(v<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,v=-v):this.copy(e),v>=1)return this._w=p,this._x=s,this._y=a,this._z=u,this;const b=1-v*v;if(b<=Number.EPSILON){const $=1-n;return this._w=$*p+n*this._w,this._x=$*s+n*this._x,this._y=$*a+n*this._y,this._z=$*u+n*this._z,this.normalize(),this}const E=Math.sqrt(b),R=Math.atan2(E,v),B=Math.sin((1-n)*R)/E,U=Math.sin(n*R)/E;return this._w=p*B+this._w*U,this._x=s*B+this._x*U,this._y=a*B+this._y*U,this._z=u*B+this._z*U,this._onChangeCallback(),this}slerpQuaternions(e,n,s){return this.copy(e).slerp(n,s)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),s=Math.random(),a=Math.sqrt(1-s),u=Math.sqrt(s);return this.set(a*Math.sin(e),a*Math.cos(e),u*Math.sin(n),u*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class lt{constructor(e=0,n=0,s=0){lt.prototype.isVector3=!0,this.x=e,this.y=n,this.z=s}set(e,n,s){return void 0===s&&(s=this.z),this.x=e,this.y=n,this.z=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(en.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(en.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,s=this.y,a=this.z,u=e.elements;return this.x=u[0]*n+u[3]*s+u[6]*a,this.y=u[1]*n+u[4]*s+u[7]*a,this.z=u[2]*n+u[5]*s+u[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,s=this.y,a=this.z,u=e.elements,p=1/(u[3]*n+u[7]*s+u[11]*a+u[15]);return this.x=(u[0]*n+u[4]*s+u[8]*a+u[12])*p,this.y=(u[1]*n+u[5]*s+u[9]*a+u[13])*p,this.z=(u[2]*n+u[6]*s+u[10]*a+u[14])*p,this}applyQuaternion(e){const n=this.x,s=this.y,a=this.z,u=e.x,p=e.y,v=e.z,b=e.w,E=2*(p*a-v*s),R=2*(v*n-u*a),B=2*(u*s-p*n);return this.x=n+b*E+p*B-v*R,this.y=s+b*R+v*E-u*B,this.z=a+b*B+u*R-p*E,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,s=this.y,a=this.z,u=e.elements;return this.x=u[0]*n+u[4]*s+u[8]*a,this.y=u[1]*n+u[5]*s+u[9]*a,this.z=u[2]*n+u[6]*s+u[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(n,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,s){return this.x=e.x+(n.x-e.x)*s,this.y=e.y+(n.y-e.y)*s,this.z=e.z+(n.z-e.z)*s,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const s=e.x,a=e.y,u=e.z,p=n.x,v=n.y,b=n.z;return this.x=a*b-u*v,this.y=u*p-s*b,this.z=s*v-a*p,this}projectOnVector(e){const n=e.lengthSq();if(0===n)return this.set(0,0,0);const s=e.dot(this)/n;return this.copy(e).multiplyScalar(s)}projectOnPlane(e){return Rn.copy(this).projectOnVector(e),this.sub(Rn)}reflect(e){return this.sub(Rn.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===n)return Math.PI/2;const s=this.dot(e)/n;return Math.acos(mo(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,s=this.y-e.y,a=this.z-e.z;return n*n+s*s+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,s){const a=Math.sin(n)*e;return this.x=a*Math.sin(s),this.y=Math.cos(n)*e,this.z=a*Math.cos(s),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,s){return this.x=e*Math.sin(n),this.y=s,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),s=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=s,this.z=a,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,4*n)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,3*n)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=2*Math.random()-1,s=Math.sqrt(1-n*n);return this.x=s*Math.cos(e),this.y=n,this.z=s*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Rn=new lt,en=new Fi;class bn{constructor(e=new lt(1/0,1/0,1/0),n=new lt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,s=e.length;n<s;n+=3)this.expandByPoint(pr.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,s=e.count;n<s;n++)this.expandByPoint(pr.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,s=e.length;n<s;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const s=pr.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const s=e.geometry;if(void 0!==s){const u=s.getAttribute("position");if(!0===n&&void 0!==u&&!0!==e.isInstancedMesh)for(let p=0,v=u.count;p<v;p++)!0===e.isMesh?e.getVertexPosition(p,pr):pr.fromBufferAttribute(u,p),pr.applyMatrix4(e.matrixWorld),this.expandByPoint(pr);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),zr.copy(e.boundingBox)):(null===s.boundingBox&&s.computeBoundingBox(),zr.copy(s.boundingBox)),zr.applyMatrix4(e.matrixWorld),this.union(zr)}const a=e.children;for(let u=0,p=a.length;u<p;u++)this.expandByObject(a[u],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,pr),pr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,s;return e.normal.x>0?(n=e.normal.x*this.min.x,s=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,s=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,s+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,s+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,s+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,s+=e.normal.z*this.min.z),n<=-e.constant&&s>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Jo),Js.subVectors(this.max,Jo),ts.subVectors(e.a,Jo),go.subVectors(e.b,Jo),lr.subVectors(e.c,Jo),Is.subVectors(go,ts),$s.subVectors(lr,go),vi.subVectors(ts,lr);let n=[0,-Is.z,Is.y,0,-$s.z,$s.y,0,-vi.z,vi.y,Is.z,0,-Is.x,$s.z,0,-$s.x,vi.z,0,-vi.x,-Is.y,Is.x,0,-$s.y,$s.x,0,-vi.y,vi.x,0];return!(!dc(n,ts,go,lr,Js)||(n=[1,0,0,0,1,0,0,0,1],!dc(n,ts,go,lr,Js)))&&(io.crossVectors(Is,$s),n=[io.x,io.y,io.z],dc(n,ts,go,lr,Js))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,pr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(pr).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(ui[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ui[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ui[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ui[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ui[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ui[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ui[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ui[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ui)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ui=[new lt,new lt,new lt,new lt,new lt,new lt,new lt,new lt],pr=new lt,zr=new bn,ts=new lt,go=new lt,lr=new lt,Is=new lt,$s=new lt,vi=new lt,Jo=new lt,Js=new lt,io=new lt,Ts=new lt;function dc(c,e,n,s,a){for(let u=0,p=c.length-3;u<=p;u+=3){Ts.fromArray(c,u);const v=a.x*Math.abs(Ts.x)+a.y*Math.abs(Ts.y)+a.z*Math.abs(Ts.z),b=e.dot(Ts),E=n.dot(Ts),R=s.dot(Ts);if(Math.max(-Math.max(b,E,R),Math.min(b,E,R))>v)return!1}return!0}const Ac=new bn,Ea=new lt,Wl=new lt;class oa{constructor(e=new lt,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const s=this.center;void 0!==n?s.copy(n):Ac.setFromPoints(e).getCenter(s);let a=0;for(let u=0,p=e.length;u<p;u++)a=Math.max(a,s.distanceToSquared(e[u]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const s=this.center.distanceToSquared(e);return n.copy(e),s>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ea.subVectors(e,this.center);const n=Ea.lengthSq();if(n>this.radius*this.radius){const s=Math.sqrt(n),a=.5*(s-this.radius);this.center.addScaledVector(Ea,a/s),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Wl.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ea.copy(e.center).add(Wl)),this.expandByPoint(Ea.copy(e.center).sub(Wl))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const rs=new lt,Va=new lt,jl=new lt,Er=new lt,hc=new lt,fc=new lt,hl=new lt;class Ic{constructor(e=new lt,n=new lt(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,rs)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const s=n.dot(this.direction);return s<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=rs.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(rs.copy(this.origin).addScaledVector(this.direction,n),rs.distanceToSquared(e))}distanceSqToSegment(e,n,s,a){Va.copy(e).add(n).multiplyScalar(.5),jl.copy(n).sub(e).normalize(),Er.copy(this.origin).sub(Va);const u=.5*e.distanceTo(n),p=-this.direction.dot(jl),v=Er.dot(this.direction),b=-Er.dot(jl),E=Er.lengthSq(),R=Math.abs(1-p*p);let B,U,$,re;if(R>0)if(B=p*b-v,U=p*v-b,re=u*R,B>=0)if(U>=-re)if(U<=re){const ve=1/R;B*=ve,U*=ve,$=B*(B+p*U+2*v)+U*(p*B+U+2*b)+E}else U=u,B=Math.max(0,-(p*U+v)),$=-B*B+U*(U+2*b)+E;else U=-u,B=Math.max(0,-(p*U+v)),$=-B*B+U*(U+2*b)+E;else U<=-re?(B=Math.max(0,-(-p*u+v)),U=B>0?-u:Math.min(Math.max(-u,-b),u),$=-B*B+U*(U+2*b)+E):U<=re?(B=0,U=Math.min(Math.max(-u,-b),u),$=U*(U+2*b)+E):(B=Math.max(0,-(p*u+v)),U=B>0?u:Math.min(Math.max(-u,-b),u),$=-B*B+U*(U+2*b)+E);else U=p>0?-u:u,B=Math.max(0,-(p*U+v)),$=-B*B+U*(U+2*b)+E;return s&&s.copy(this.origin).addScaledVector(this.direction,B),a&&a.copy(Va).addScaledVector(jl,U),$}intersectSphere(e,n){rs.subVectors(e.center,this.origin);const s=rs.dot(this.direction),a=rs.dot(rs)-s*s,u=e.radius*e.radius;if(a>u)return null;const p=Math.sqrt(u-a),v=s-p,b=s+p;return b<0?null:this.at(v<0?b:v,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(0===n)return 0===e.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(e.normal)+e.constant)/n;return s>=0?s:null}intersectPlane(e,n){const s=this.distanceToPlane(e);return null===s?null:this.at(s,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return 0===n||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let s,a,u,p,v,b;const E=1/this.direction.x,R=1/this.direction.y,B=1/this.direction.z,U=this.origin;return E>=0?(s=(e.min.x-U.x)*E,a=(e.max.x-U.x)*E):(s=(e.max.x-U.x)*E,a=(e.min.x-U.x)*E),R>=0?(u=(e.min.y-U.y)*R,p=(e.max.y-U.y)*R):(u=(e.max.y-U.y)*R,p=(e.min.y-U.y)*R),s>p||u>a||((u>s||isNaN(s))&&(s=u),(p<a||isNaN(a))&&(a=p),B>=0?(v=(e.min.z-U.z)*B,b=(e.max.z-U.z)*B):(v=(e.max.z-U.z)*B,b=(e.min.z-U.z)*B),s>b||v>a)||((v>s||s!=s)&&(s=v),(b<a||a!=a)&&(a=b),a<0)?null:this.at(s>=0?s:a,n)}intersectsBox(e){return null!==this.intersectBox(e,rs)}intersectTriangle(e,n,s,a,u){hc.subVectors(n,e),fc.subVectors(s,e),hl.crossVectors(hc,fc);let v,p=this.direction.dot(hl);if(p>0){if(a)return null;v=1}else{if(!(p<0))return null;v=-1,p=-p}Er.subVectors(this.origin,e);const b=v*this.direction.dot(fc.crossVectors(Er,fc));if(b<0)return null;const E=v*this.direction.dot(hc.cross(Er));if(E<0||b+E>p)return null;const R=-v*Er.dot(hl);return R<0?null:this.at(R/p,u)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class gr{constructor(e,n,s,a,u,p,v,b,E,R,B,U,$,re,ve,ae){gr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,n,s,a,u,p,v,b,E,R,B,U,$,re,ve,ae)}set(e,n,s,a,u,p,v,b,E,R,B,U,$,re,ve,ae){const Z=this.elements;return Z[0]=e,Z[4]=n,Z[8]=s,Z[12]=a,Z[1]=u,Z[5]=p,Z[9]=v,Z[13]=b,Z[2]=E,Z[6]=R,Z[10]=B,Z[14]=U,Z[3]=$,Z[7]=re,Z[11]=ve,Z[15]=ae,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new gr).fromArray(this.elements)}copy(e){const n=this.elements,s=e.elements;return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],this}copyPosition(e){const n=this.elements,s=e.elements;return n[12]=s[12],n[13]=s[13],n[14]=s[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,s){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(e,n,s){return this.set(e.x,n.x,s.x,0,e.y,n.y,s.y,0,e.z,n.z,s.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,s=e.elements,a=1/ro.setFromMatrixColumn(e,0).length(),u=1/ro.setFromMatrixColumn(e,1).length(),p=1/ro.setFromMatrixColumn(e,2).length();return n[0]=s[0]*a,n[1]=s[1]*a,n[2]=s[2]*a,n[3]=0,n[4]=s[4]*u,n[5]=s[5]*u,n[6]=s[6]*u,n[7]=0,n[8]=s[8]*p,n[9]=s[9]*p,n[10]=s[10]*p,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,s=e.x,a=e.y,u=e.z,p=Math.cos(s),v=Math.sin(s),b=Math.cos(a),E=Math.sin(a),R=Math.cos(u),B=Math.sin(u);if("XYZ"===e.order){const U=p*R,$=p*B,re=v*R,ve=v*B;n[0]=b*R,n[4]=-b*B,n[8]=E,n[1]=$+re*E,n[5]=U-ve*E,n[9]=-v*b,n[2]=ve-U*E,n[6]=re+$*E,n[10]=p*b}else if("YXZ"===e.order){const U=b*R,$=b*B,re=E*R,ve=E*B;n[0]=U+ve*v,n[4]=re*v-$,n[8]=p*E,n[1]=p*B,n[5]=p*R,n[9]=-v,n[2]=$*v-re,n[6]=ve+U*v,n[10]=p*b}else if("ZXY"===e.order){const U=b*R,$=b*B,re=E*R,ve=E*B;n[0]=U-ve*v,n[4]=-p*B,n[8]=re+$*v,n[1]=$+re*v,n[5]=p*R,n[9]=ve-U*v,n[2]=-p*E,n[6]=v,n[10]=p*b}else if("ZYX"===e.order){const U=p*R,$=p*B,re=v*R,ve=v*B;n[0]=b*R,n[4]=re*E-$,n[8]=U*E+ve,n[1]=b*B,n[5]=ve*E+U,n[9]=$*E-re,n[2]=-E,n[6]=v*b,n[10]=p*b}else if("YZX"===e.order){const U=p*b,$=p*E,re=v*b,ve=v*E;n[0]=b*R,n[4]=ve-U*B,n[8]=re*B+$,n[1]=B,n[5]=p*R,n[9]=-v*R,n[2]=-E*R,n[6]=$*B+re,n[10]=U-ve*B}else if("XZY"===e.order){const U=p*b,$=p*E,re=v*b,ve=v*E;n[0]=b*R,n[4]=-B,n[8]=E*R,n[1]=U*B+ve,n[5]=p*R,n[9]=$*B-re,n[2]=re*B-$,n[6]=v*R,n[10]=ve*B+U}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose($r,e,ea)}lookAt(e,n,s){const a=this.elements;return ta.subVectors(e,n),0===ta.lengthSq()&&(ta.z=1),ta.normalize(),Qa.crossVectors(s,ta),0===Qa.lengthSq()&&(1===Math.abs(s.z)?ta.x+=1e-4:ta.z+=1e-4,ta.normalize(),Qa.crossVectors(s,ta)),Qa.normalize(),Tl.crossVectors(ta,Qa),a[0]=Qa.x,a[4]=Tl.x,a[8]=ta.x,a[1]=Qa.y,a[5]=Tl.y,a[9]=ta.y,a[2]=Qa.z,a[6]=Tl.z,a[10]=ta.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const s=e.elements,a=n.elements,u=this.elements,p=s[0],v=s[4],b=s[8],E=s[12],R=s[1],B=s[5],U=s[9],$=s[13],re=s[2],ve=s[6],ae=s[10],Z=s[14],Ue=s[3],Le=s[7],Pe=s[11],Ft=s[15],dt=a[0],gt=a[4],bt=a[8],tt=a[12],$e=a[1],Nt=a[5],pn=a[9],rn=a[13],gn=a[2],kn=a[6],_n=a[10],ti=a[14],wn=a[3],Ci=a[7],Gi=a[11],_i=a[15];return u[0]=p*dt+v*$e+b*gn+E*wn,u[4]=p*gt+v*Nt+b*kn+E*Ci,u[8]=p*bt+v*pn+b*_n+E*Gi,u[12]=p*tt+v*rn+b*ti+E*_i,u[1]=R*dt+B*$e+U*gn+$*wn,u[5]=R*gt+B*Nt+U*kn+$*Ci,u[9]=R*bt+B*pn+U*_n+$*Gi,u[13]=R*tt+B*rn+U*ti+$*_i,u[2]=re*dt+ve*$e+ae*gn+Z*wn,u[6]=re*gt+ve*Nt+ae*kn+Z*Ci,u[10]=re*bt+ve*pn+ae*_n+Z*Gi,u[14]=re*tt+ve*rn+ae*ti+Z*_i,u[3]=Ue*dt+Le*$e+Pe*gn+Ft*wn,u[7]=Ue*gt+Le*Nt+Pe*kn+Ft*Ci,u[11]=Ue*bt+Le*pn+Pe*_n+Ft*Gi,u[15]=Ue*tt+Le*rn+Pe*ti+Ft*_i,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],s=e[4],a=e[8],u=e[12],p=e[1],v=e[5],b=e[9],E=e[13],R=e[2],B=e[6],U=e[10],$=e[14];return e[3]*(+u*b*B-a*E*B-u*v*U+s*E*U+a*v*$-s*b*$)+e[7]*(+n*b*$-n*E*U+u*p*U-a*p*$+a*E*R-u*b*R)+e[11]*(+n*E*B-n*v*$-u*p*B+s*p*$+u*v*R-s*E*R)+e[15]*(-a*v*R-n*b*B+n*v*U+a*p*B-s*p*U+s*b*R)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,s){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=n,a[14]=s),this}invert(){const e=this.elements,n=e[0],s=e[1],a=e[2],u=e[3],p=e[4],v=e[5],b=e[6],E=e[7],R=e[8],B=e[9],U=e[10],$=e[11],re=e[12],ve=e[13],ae=e[14],Z=e[15],Ue=B*ae*E-ve*U*E+ve*b*$-v*ae*$-B*b*Z+v*U*Z,Le=re*U*E-R*ae*E-re*b*$+p*ae*$+R*b*Z-p*U*Z,Pe=R*ve*E-re*B*E+re*v*$-p*ve*$-R*v*Z+p*B*Z,Ft=re*B*b-R*ve*b-re*v*U+p*ve*U+R*v*ae-p*B*ae,dt=n*Ue+s*Le+a*Pe+u*Ft;if(0===dt)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const gt=1/dt;return e[0]=Ue*gt,e[1]=(ve*U*u-B*ae*u-ve*a*$+s*ae*$+B*a*Z-s*U*Z)*gt,e[2]=(v*ae*u-ve*b*u+ve*a*E-s*ae*E-v*a*Z+s*b*Z)*gt,e[3]=(B*b*u-v*U*u-B*a*E+s*U*E+v*a*$-s*b*$)*gt,e[4]=Le*gt,e[5]=(R*ae*u-re*U*u+re*a*$-n*ae*$-R*a*Z+n*U*Z)*gt,e[6]=(re*b*u-p*ae*u-re*a*E+n*ae*E+p*a*Z-n*b*Z)*gt,e[7]=(p*U*u-R*b*u+R*a*E-n*U*E-p*a*$+n*b*$)*gt,e[8]=Pe*gt,e[9]=(re*B*u-R*ve*u-re*s*$+n*ve*$+R*s*Z-n*B*Z)*gt,e[10]=(p*ve*u-re*v*u+re*s*E-n*ve*E-p*s*Z+n*v*Z)*gt,e[11]=(R*v*u-p*B*u-R*s*E+n*B*E+p*s*$-n*v*$)*gt,e[12]=Ft*gt,e[13]=(R*ve*a-re*B*a+re*s*U-n*ve*U-R*s*ae+n*B*ae)*gt,e[14]=(re*v*a-p*ve*a-re*s*b+n*ve*b+p*s*ae-n*v*ae)*gt,e[15]=(p*B*a-R*v*a+R*s*b-n*B*b-p*s*U+n*v*U)*gt,this}scale(e){const n=this.elements,s=e.x,a=e.y,u=e.z;return n[0]*=s,n[4]*=a,n[8]*=u,n[1]*=s,n[5]*=a,n[9]*=u,n[2]*=s,n[6]*=a,n[10]*=u,n[3]*=s,n[7]*=a,n[11]*=u,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,n,s){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,s,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),s=Math.sin(e);return this.set(1,0,0,0,0,n,-s,0,0,s,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),s=Math.sin(e);return this.set(n,0,s,0,0,1,0,0,-s,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),s=Math.sin(e);return this.set(n,-s,0,0,s,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const s=Math.cos(n),a=Math.sin(n),u=1-s,p=e.x,v=e.y,b=e.z,E=u*p,R=u*v;return this.set(E*p+s,E*v-a*b,E*b+a*v,0,E*v+a*b,R*v+s,R*b-a*p,0,E*b-a*v,R*b+a*p,u*b*b+s,0,0,0,0,1),this}makeScale(e,n,s){return this.set(e,0,0,0,0,n,0,0,0,0,s,0,0,0,0,1),this}makeShear(e,n,s,a,u,p){return this.set(1,s,u,0,e,1,p,0,n,a,1,0,0,0,0,1),this}compose(e,n,s){const a=this.elements,u=n._x,p=n._y,v=n._z,b=n._w,E=u+u,R=p+p,B=v+v,U=u*E,$=u*R,re=u*B,ve=p*R,ae=p*B,Z=v*B,Ue=b*E,Le=b*R,Pe=b*B,Ft=s.x,dt=s.y,gt=s.z;return a[0]=(1-(ve+Z))*Ft,a[1]=($+Pe)*Ft,a[2]=(re-Le)*Ft,a[3]=0,a[4]=($-Pe)*dt,a[5]=(1-(U+Z))*dt,a[6]=(ae+Ue)*dt,a[7]=0,a[8]=(re+Le)*gt,a[9]=(ae-Ue)*gt,a[10]=(1-(U+ve))*gt,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,n,s){const a=this.elements;let u=ro.set(a[0],a[1],a[2]).length();const p=ro.set(a[4],a[5],a[6]).length(),v=ro.set(a[8],a[9],a[10]).length();this.determinant()<0&&(u=-u),e.x=a[12],e.y=a[13],e.z=a[14],Sa.copy(this);const E=1/u,R=1/p,B=1/v;return Sa.elements[0]*=E,Sa.elements[1]*=E,Sa.elements[2]*=E,Sa.elements[4]*=R,Sa.elements[5]*=R,Sa.elements[6]*=R,Sa.elements[8]*=B,Sa.elements[9]*=B,Sa.elements[10]*=B,n.setFromRotationMatrix(Sa),s.x=u,s.y=p,s.z=v,this}makePerspective(e,n,s,a,u,p,v=nl){const b=this.elements,E=2*u/(n-e),R=2*u/(s-a),B=(n+e)/(n-e),U=(s+a)/(s-a);let $,re;if(v===nl)$=-(p+u)/(p-u),re=-2*p*u/(p-u);else{if(2001!==v)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+v);$=-p/(p-u),re=-p*u/(p-u)}return b[0]=E,b[4]=0,b[8]=B,b[12]=0,b[1]=0,b[5]=R,b[9]=U,b[13]=0,b[2]=0,b[6]=0,b[10]=$,b[14]=re,b[3]=0,b[7]=0,b[11]=-1,b[15]=0,this}makeOrthographic(e,n,s,a,u,p,v=nl){const b=this.elements,E=1/(n-e),R=1/(s-a),B=1/(p-u),U=(n+e)*E,$=(s+a)*R;let re,ve;if(v===nl)re=(p+u)*B,ve=-2*B;else{if(2001!==v)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+v);re=u*B,ve=-1*B}return b[0]=2*E,b[4]=0,b[8]=0,b[12]=-U,b[1]=0,b[5]=2*R,b[9]=0,b[13]=-$,b[2]=0,b[6]=0,b[10]=ve,b[14]=-re,b[3]=0,b[7]=0,b[11]=0,b[15]=1,this}equals(e){const n=this.elements,s=e.elements;for(let a=0;a<16;a++)if(n[a]!==s[a])return!1;return!0}fromArray(e,n=0){for(let s=0;s<16;s++)this.elements[s]=e[s+n];return this}toArray(e=[],n=0){const s=this.elements;return e[n]=s[0],e[n+1]=s[1],e[n+2]=s[2],e[n+3]=s[3],e[n+4]=s[4],e[n+5]=s[5],e[n+6]=s[6],e[n+7]=s[7],e[n+8]=s[8],e[n+9]=s[9],e[n+10]=s[10],e[n+11]=s[11],e[n+12]=s[12],e[n+13]=s[13],e[n+14]=s[14],e[n+15]=s[15],e}}const ro=new lt,Sa=new gr,$r=new lt(0,0,0),ea=new lt(1,1,1),Qa=new lt,Tl=new lt,ta=new lt,rl=new gr,ga=new Fi;let Dl=(()=>{class c{constructor(n=0,s=0,a=0,u=c.DEFAULT_ORDER){this.isEuler=!0,this._x=n,this._y=s,this._z=a,this._order=u}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get order(){return this._order}set order(n){this._order=n,this._onChangeCallback()}set(n,s,a,u=this._order){return this._x=n,this._y=s,this._z=a,this._order=u,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}setFromRotationMatrix(n,s=this._order,a=!0){const u=n.elements,p=u[0],v=u[4],b=u[8],E=u[1],R=u[5],B=u[9],U=u[2],$=u[6],re=u[10];switch(s){case"XYZ":this._y=Math.asin(mo(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(-B,re),this._z=Math.atan2(-v,p)):(this._x=Math.atan2($,R),this._z=0);break;case"YXZ":this._x=Math.asin(-mo(B,-1,1)),Math.abs(B)<.9999999?(this._y=Math.atan2(b,re),this._z=Math.atan2(E,R)):(this._y=Math.atan2(-U,p),this._z=0);break;case"ZXY":this._x=Math.asin(mo($,-1,1)),Math.abs($)<.9999999?(this._y=Math.atan2(-U,re),this._z=Math.atan2(-v,R)):(this._y=0,this._z=Math.atan2(E,p));break;case"ZYX":this._y=Math.asin(-mo(U,-1,1)),Math.abs(U)<.9999999?(this._x=Math.atan2($,re),this._z=Math.atan2(E,p)):(this._x=0,this._z=Math.atan2(-v,R));break;case"YZX":this._z=Math.asin(mo(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(-B,R),this._y=Math.atan2(-U,p)):(this._x=0,this._y=Math.atan2(b,re));break;case"XZY":this._z=Math.asin(-mo(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2($,R),this._y=Math.atan2(b,p)):(this._x=Math.atan2(-B,re),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,!0===a&&this._onChangeCallback(),this}setFromQuaternion(n,s,a){return rl.makeRotationFromQuaternion(n),this.setFromRotationMatrix(rl,s,a)}setFromVector3(n,s=this._order){return this.set(n.x,n.y,n.z,s)}reorder(n){return ga.setFromEuler(this),this.setFromQuaternion(ga,n)}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}fromArray(n){return this._x=n[0],this._y=n[1],this._z=n[2],void 0!==n[3]&&(this._order=n[3]),this._onChangeCallback(),this}toArray(n=[],s=0){return n[s]=this._x,n[s+1]=this._y,n[s+2]=this._z,n[s+3]=this._order,n}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return c.DEFAULT_ORDER="XYZ",c})();class yu{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return!!(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let $c=0;const Rc=new lt,pc=new Fi,Li=new gr,zt=new lt,$n=new lt,er=new lt,xo=new Fi,T=new lt(1,0,0),W=new lt(0,1,0),N=new lt(0,0,1),Y={type:"added"},xe={type:"removed"},Ge={type:"childadded",child:null},_t={type:"childremoved",child:null};let Qt=(()=>{class c extends Ba{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$c++}),this.uuid=bo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=c.DEFAULT_UP.clone();const n=new lt,s=new Dl,a=new Fi,u=new lt(1,1,1);s._onChange(function p(){a.setFromEuler(s,!1)}),a._onChange(function v(){s.setFromQuaternion(a,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:u},modelViewMatrix:{value:new gr},normalMatrix:{value:new ir}}),this.matrix=new gr,this.matrixWorld=new gr,this.matrixAutoUpdate=c.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=c.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new yu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(n){return this.quaternion.premultiply(n),this}setRotationFromAxisAngle(n,s){this.quaternion.setFromAxisAngle(n,s)}setRotationFromEuler(n){this.quaternion.setFromEuler(n,!0)}setRotationFromMatrix(n){this.quaternion.setFromRotationMatrix(n)}setRotationFromQuaternion(n){this.quaternion.copy(n)}rotateOnAxis(n,s){return pc.setFromAxisAngle(n,s),this.quaternion.multiply(pc),this}rotateOnWorldAxis(n,s){return pc.setFromAxisAngle(n,s),this.quaternion.premultiply(pc),this}rotateX(n){return this.rotateOnAxis(T,n)}rotateY(n){return this.rotateOnAxis(W,n)}rotateZ(n){return this.rotateOnAxis(N,n)}translateOnAxis(n,s){return Rc.copy(n).applyQuaternion(this.quaternion),this.position.add(Rc.multiplyScalar(s)),this}translateX(n){return this.translateOnAxis(T,n)}translateY(n){return this.translateOnAxis(W,n)}translateZ(n){return this.translateOnAxis(N,n)}localToWorld(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(this.matrixWorld)}worldToLocal(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(Li.copy(this.matrixWorld).invert())}lookAt(n,s,a){n.isVector3?zt.copy(n):zt.set(n,s,a);const u=this.parent;this.updateWorldMatrix(!0,!1),$n.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Li.lookAt($n,zt,this.up):Li.lookAt(zt,$n,this.up),this.quaternion.setFromRotationMatrix(Li),u&&(Li.extractRotation(u.matrixWorld),pc.setFromRotationMatrix(Li),this.quaternion.premultiply(pc.invert()))}add(n){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.removeFromParent(),n.parent=this,this.children.push(n),n.dispatchEvent(Y),Ge.child=n,this.dispatchEvent(Ge),Ge.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)}remove(n){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.remove(arguments[a]);return this}const s=this.children.indexOf(n);return-1!==s&&(n.parent=null,this.children.splice(s,1),n.dispatchEvent(xe),_t.child=n,this.dispatchEvent(_t),_t.child=null),this}removeFromParent(){const n=this.parent;return null!==n&&n.remove(this),this}clear(){return this.remove(...this.children)}attach(n){return this.updateWorldMatrix(!0,!1),Li.copy(this.matrixWorld).invert(),null!==n.parent&&(n.parent.updateWorldMatrix(!0,!1),Li.multiply(n.parent.matrixWorld)),n.applyMatrix4(Li),n.removeFromParent(),n.parent=this,this.children.push(n),n.updateWorldMatrix(!1,!0),n.dispatchEvent(Y),Ge.child=n,this.dispatchEvent(Ge),Ge.child=null,this}getObjectById(n){return this.getObjectByProperty("id",n)}getObjectByName(n){return this.getObjectByProperty("name",n)}getObjectByProperty(n,s){if(this[n]===s)return this;for(let a=0,u=this.children.length;a<u;a++){const v=this.children[a].getObjectByProperty(n,s);if(void 0!==v)return v}}getObjectsByProperty(n,s,a=[]){this[n]===s&&a.push(this);const u=this.children;for(let p=0,v=u.length;p<v;p++)u[p].getObjectsByProperty(n,s,a);return a}getWorldPosition(n){return this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($n,n,er),n}getWorldScale(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($n,xo,n),n}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return n.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(n){n(this);const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].traverse(n)}traverseVisible(n){if(!1===this.visible)return;n(this);const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].traverseVisible(n)}traverseAncestors(n){const s=this.parent;null!==s&&(n(s),s.traverseAncestors(n))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,n=!0);const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].updateMatrixWorld(n)}updateWorldMatrix(n,s){const a=this.parent;if(!0===n&&null!==a&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===s){const u=this.children;for(let p=0,v=u.length;p<v;p++)u[p].updateWorldMatrix(!1,!0)}}toJSON(n){const s=void 0===n||"string"==typeof n,a={};s&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},a.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const u={};function p(b,E){return void 0===b[E.uuid]&&(b[E.uuid]=E.toJSON(n)),E.uuid}if(u.uuid=this.uuid,u.type=this.type,""!==this.name&&(u.name=this.name),!0===this.castShadow&&(u.castShadow=!0),!0===this.receiveShadow&&(u.receiveShadow=!0),!1===this.visible&&(u.visible=!1),!1===this.frustumCulled&&(u.frustumCulled=!1),0!==this.renderOrder&&(u.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(u.userData=this.userData),u.layers=this.layers.mask,u.matrix=this.matrix.toArray(),u.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(u.matrixAutoUpdate=!1),this.isInstancedMesh&&(u.type="InstancedMesh",u.count=this.count,u.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(u.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(u.type="BatchedMesh",u.perObjectFrustumCulled=this.perObjectFrustumCulled,u.sortObjects=this.sortObjects,u.drawRanges=this._drawRanges,u.reservedRanges=this._reservedRanges,u.visibility=this._visibility,u.active=this._active,u.bounds=this._bounds.map(b=>({boxInitialized:b.boxInitialized,boxMin:b.box.min.toArray(),boxMax:b.box.max.toArray(),sphereInitialized:b.sphereInitialized,sphereRadius:b.sphere.radius,sphereCenter:b.sphere.center.toArray()})),u.maxInstanceCount=this._maxInstanceCount,u.maxVertexCount=this._maxVertexCount,u.maxIndexCount=this._maxIndexCount,u.geometryInitialized=this._geometryInitialized,u.geometryCount=this._geometryCount,u.matricesTexture=this._matricesTexture.toJSON(n),null!==this._colorsTexture&&(u.colorsTexture=this._colorsTexture.toJSON(n)),null!==this.boundingSphere&&(u.boundingSphere={center:u.boundingSphere.center.toArray(),radius:u.boundingSphere.radius}),null!==this.boundingBox&&(u.boundingBox={min:u.boundingBox.min.toArray(),max:u.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?u.background=this.background.toJSON():this.background.isTexture&&(u.background=this.background.toJSON(n).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(u.environment=this.environment.toJSON(n).uuid);else if(this.isMesh||this.isLine||this.isPoints){u.geometry=p(n.geometries,this.geometry);const b=this.geometry.parameters;if(void 0!==b&&void 0!==b.shapes){const E=b.shapes;if(Array.isArray(E))for(let R=0,B=E.length;R<B;R++)p(n.shapes,E[R]);else p(n.shapes,E)}}if(this.isSkinnedMesh&&(u.bindMode=this.bindMode,u.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(p(n.skeletons,this.skeleton),u.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const b=[];for(let E=0,R=this.material.length;E<R;E++)b.push(p(n.materials,this.material[E]));u.material=b}else u.material=p(n.materials,this.material);if(this.children.length>0){u.children=[];for(let b=0;b<this.children.length;b++)u.children.push(this.children[b].toJSON(n).object)}if(this.animations.length>0){u.animations=[];for(let b=0;b<this.animations.length;b++)u.animations.push(p(n.animations,this.animations[b]))}if(s){const b=v(n.geometries),E=v(n.materials),R=v(n.textures),B=v(n.images),U=v(n.shapes),$=v(n.skeletons),re=v(n.animations),ve=v(n.nodes);b.length>0&&(a.geometries=b),E.length>0&&(a.materials=E),R.length>0&&(a.textures=R),B.length>0&&(a.images=B),U.length>0&&(a.shapes=U),$.length>0&&(a.skeletons=$),re.length>0&&(a.animations=re),ve.length>0&&(a.nodes=ve)}return a.object=u,a;function v(b){const E=[];for(const R in b){const B=b[R];delete B.metadata,E.push(B)}return E}}clone(n){return(new this.constructor).copy(this,n)}copy(n,s=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldAutoUpdate=n.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.animations=n.animations.slice(),this.userData=JSON.parse(JSON.stringify(n.userData)),!0===s)for(let a=0;a<n.children.length;a++)this.add(n.children[a].clone());return this}}return c.DEFAULT_UP=new lt(0,1,0),c.DEFAULT_MATRIX_AUTO_UPDATE=!0,c.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,c})();const jt=new lt,ei=new lt,Ai=new lt,Vr=new lt,Io=new lt,mc=new lt,lu=new lt,gc=new lt,Nc=new lt,Al=new lt,Gu=new Kt,oh=new Kt,ah=new Kt;class Il{constructor(e=new lt,n=new lt,s=new lt){this.a=e,this.b=n,this.c=s}static getNormal(e,n,s,a){a.subVectors(s,n),jt.subVectors(e,n),a.cross(jt);const u=a.lengthSq();return u>0?a.multiplyScalar(1/Math.sqrt(u)):a.set(0,0,0)}static getBarycoord(e,n,s,a,u){jt.subVectors(a,n),ei.subVectors(s,n),Ai.subVectors(e,n);const p=jt.dot(jt),v=jt.dot(ei),b=jt.dot(Ai),E=ei.dot(ei),R=ei.dot(Ai),B=p*E-v*v;if(0===B)return u.set(0,0,0),null;const U=1/B,$=(E*b-v*R)*U,re=(p*R-v*b)*U;return u.set(1-$-re,re,$)}static containsPoint(e,n,s,a){return null!==this.getBarycoord(e,n,s,a,Vr)&&Vr.x>=0&&Vr.y>=0&&Vr.x+Vr.y<=1}static getInterpolation(e,n,s,a,u,p,v,b){return null===this.getBarycoord(e,n,s,a,Vr)?(b.x=0,b.y=0,"z"in b&&(b.z=0),"w"in b&&(b.w=0),null):(b.setScalar(0),b.addScaledVector(u,Vr.x),b.addScaledVector(p,Vr.y),b.addScaledVector(v,Vr.z),b)}static getInterpolatedAttribute(e,n,s,a,u,p){return Gu.setScalar(0),oh.setScalar(0),ah.setScalar(0),Gu.fromBufferAttribute(e,n),oh.fromBufferAttribute(e,s),ah.fromBufferAttribute(e,a),p.setScalar(0),p.addScaledVector(Gu,u.x),p.addScaledVector(oh,u.y),p.addScaledVector(ah,u.z),p}static isFrontFacing(e,n,s,a){return jt.subVectors(s,n),ei.subVectors(e,n),jt.cross(ei).dot(a)<0}set(e,n,s){return this.a.copy(e),this.b.copy(n),this.c.copy(s),this}setFromPointsAndIndices(e,n,s,a){return this.a.copy(e[n]),this.b.copy(e[s]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,n,s,a){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,s),this.c.fromBufferAttribute(e,a),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return jt.subVectors(this.c,this.b),ei.subVectors(this.a,this.b),.5*jt.cross(ei).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Il.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Il.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,s,a,u){return Il.getInterpolation(e,this.a,this.b,this.c,n,s,a,u)}containsPoint(e){return Il.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Il.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const s=this.a,a=this.b,u=this.c;let p,v;Io.subVectors(a,s),mc.subVectors(u,s),gc.subVectors(e,s);const b=Io.dot(gc),E=mc.dot(gc);if(b<=0&&E<=0)return n.copy(s);Nc.subVectors(e,a);const R=Io.dot(Nc),B=mc.dot(Nc);if(R>=0&&B<=R)return n.copy(a);const U=b*B-R*E;if(U<=0&&b>=0&&R<=0)return p=b/(b-R),n.copy(s).addScaledVector(Io,p);Al.subVectors(e,u);const $=Io.dot(Al),re=mc.dot(Al);if(re>=0&&$<=re)return n.copy(u);const ve=$*E-b*re;if(ve<=0&&E>=0&&re<=0)return v=E/(E-re),n.copy(s).addScaledVector(mc,v);const ae=R*re-$*B;if(ae<=0&&B-R>=0&&$-re>=0)return lu.subVectors(u,a),v=(B-R)/(B-R+($-re)),n.copy(a).addScaledVector(lu,v);const Z=1/(ae+ve+U);return p=ve*Z,v=U*Z,n.copy(s).addScaledVector(Io,p).addScaledVector(mc,v)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const lh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vc={h:0,s:0,l:0},Wu={h:0,s:0,l:0};function Rl(c,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?c+6*(e-c)*n:n<.5?e:n<2/3?c+6*(e-c)*(2/3-n):c}class ki{constructor(e,n,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,s)}set(e,n,s){if(void 0===n&&void 0===s){const a=e;a&&a.isColor?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a)}else this.setRGB(e,n,s);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=vo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Lt.toWorkingColorSpace(this,n),this}setRGB(e,n,s,a=Lt.workingColorSpace){return this.r=e,this.g=n,this.b=s,Lt.toWorkingColorSpace(this,a),this}setHSL(e,n,s,a=Lt.workingColorSpace){if(e=function zl(c,e){return(c%e+e)%e}(e,1),n=mo(n,0,1),s=mo(s,0,1),0===n)this.r=this.g=this.b=s;else{const u=s<=.5?s*(1+n):s+n-s*n,p=2*s-u;this.r=Rl(p,u,e+1/3),this.g=Rl(p,u,e),this.b=Rl(p,u,e-1/3)}return Lt.toWorkingColorSpace(this,a),this}setStyle(e,n=vo){function s(u){void 0!==u&&parseFloat(u)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let u;const v=a[2];switch(a[1]){case"rgb":case"rgba":if(u=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(v))return s(u[4]),this.setRGB(Math.min(255,parseInt(u[1],10))/255,Math.min(255,parseInt(u[2],10))/255,Math.min(255,parseInt(u[3],10))/255,n);if(u=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(v))return s(u[4]),this.setRGB(Math.min(100,parseInt(u[1],10))/100,Math.min(100,parseInt(u[2],10))/100,Math.min(100,parseInt(u[3],10))/100,n);break;case"hsl":case"hsla":if(u=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(v))return s(u[4]),this.setHSL(parseFloat(u[1])/360,parseFloat(u[2])/100,parseFloat(u[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const u=a[1],p=u.length;if(3===p)return this.setRGB(parseInt(u.charAt(0),16)/15,parseInt(u.charAt(1),16)/15,parseInt(u.charAt(2),16)/15,n);if(6===p)return this.setHex(parseInt(u,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=vo){const s=lh[e.toLowerCase()];return void 0!==s?this.setHex(s,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Jt(e.r),this.g=Jt(e.g),this.b=Jt(e.b),this}copyLinearToSRGB(e){return this.r=oi(e.r),this.g=oi(e.g),this.b=oi(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=vo){return Lt.fromWorkingColorSpace(Ya.copy(this),e),65536*Math.round(mo(255*Ya.r,0,255))+256*Math.round(mo(255*Ya.g,0,255))+Math.round(mo(255*Ya.b,0,255))}getHexString(e=vo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Lt.workingColorSpace){Lt.fromWorkingColorSpace(Ya.copy(this),n);const s=Ya.r,a=Ya.g,u=Ya.b,p=Math.max(s,a,u),v=Math.min(s,a,u);let b,E;const R=(v+p)/2;if(v===p)b=0,E=0;else{const B=p-v;switch(E=R<=.5?B/(p+v):B/(2-p-v),p){case s:b=(a-u)/B+(a<u?6:0);break;case a:b=(u-s)/B+2;break;case u:b=(s-a)/B+4}b/=6}return e.h=b,e.s=E,e.l=R,e}getRGB(e,n=Lt.workingColorSpace){return Lt.fromWorkingColorSpace(Ya.copy(this),n),e.r=Ya.r,e.g=Ya.g,e.b=Ya.b,e}getStyle(e=vo){Lt.fromWorkingColorSpace(Ya.copy(this),e);const n=Ya.r,s=Ya.g,a=Ya.b;return e!==vo?`color(${e} ${n.toFixed(3)} ${s.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(255*n)},${Math.round(255*s)},${Math.round(255*a)})`}offsetHSL(e,n,s){return this.getHSL(vc),this.setHSL(vc.h+e,vc.s+n,vc.l+s)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,s){return this.r=e.r+(n.r-e.r)*s,this.g=e.g+(n.g-e.g)*s,this.b=e.b+(n.b-e.b)*s,this}lerpHSL(e,n){this.getHSL(vc),e.getHSL(Wu);const s=q(vc.h,Wu.h,n),a=q(vc.s,Wu.s,n),u=q(vc.l,Wu.l,n);return this.setHSL(s,a,u),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,s=this.g,a=this.b,u=e.elements;return this.r=u[0]*n+u[3]*s+u[6]*a,this.g=u[1]*n+u[4]*s+u[7]*a,this.b=u[2]*n+u[5]*s+u[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ya=new ki;ki.NAMES=lh;let pp=0;class sl extends Ba{static get type(){return"Material"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:pp++}),this.uuid=bo(),this.name="",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ki(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_o,this.stencilZFail=_o,this.stencilZPass=_o,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const n in e){const s=e[n];if(void 0===s){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const a=this[n];void 0!==a?a&&a.isColor?a.set(s):a&&a.isVector3&&s&&s.isVector3?a.copy(s):this[n]=s:console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`)}}toJSON(e){const n=void 0===e||"string"==typeof e;n&&(e={textures:{},images:{}});const s={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function a(u){const p=[];for(const v in u){const b=u[v];delete b.metadata,p.push(b)}return p}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),void 0!==this.sheen&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(s.dispersion=this.dispersion),void 0!==this.iridescence&&(s.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(s.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(s.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(s.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(s.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(e).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(e).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(e).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(e).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(e).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(s.combine=this.combine)),void 0!==this.envMapRotation&&(s.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(s.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(s.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(s.size=this.size),null!==this.shadowSide&&(s.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(s.blending=this.blending),0!==this.side&&(s.side=this.side),!0===this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=!0),204!==this.blendSrc&&(s.blendSrc=this.blendSrc),205!==this.blendDst&&(s.blendDst=this.blendDst),100!==this.blendEquation&&(s.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(s.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(s.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(s.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(s.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(s.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(s.depthFunc=this.depthFunc),!1===this.depthTest&&(s.depthTest=this.depthTest),!1===this.depthWrite&&(s.depthWrite=this.depthWrite),!1===this.colorWrite&&(s.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(s.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(s.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(s.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(s.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==_o&&(s.stencilFail=this.stencilFail),this.stencilZFail!==_o&&(s.stencilZFail=this.stencilZFail),this.stencilZPass!==_o&&(s.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(s.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.alphaHash&&(s.alphaHash=!0),!0===this.alphaToCoverage&&(s.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=!0),!0===this.forceSinglePass&&(s.forceSinglePass=!0),!0===this.wireframe&&(s.wireframe=!0),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(s.flatShading=!0),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),!1===this.fog&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData),n){const u=a(e.textures),p=a(e.images);u.length>0&&(s.textures=u),p.length>0&&(s.images=p)}return s}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let s=null;if(null!==n){const a=n.length;s=new Array(a);for(let u=0;u!==a;++u)s[u]=n[u].clone()}return this.clippingPlanes=s,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class ju extends sl{static get type(){return"MeshBasicMaterial"}constructor(e){super(),this.isMeshBasicMaterial=!0,this.color=new ki(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Dl,this.combine=Pi,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ko=new lt,Pc=new yn;class fs{constructor(e,n,s=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=void 0!==e?e.length/n:0,this.normalized=s,this.usage=35044,this.updateRanges=[],this.gpuType=Fs,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,s){e*=this.itemSize,s*=n.itemSize;for(let a=0,u=this.itemSize;a<u;a++)this.array[e+a]=n.array[s+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let n=0,s=this.count;n<s;n++)Pc.fromBufferAttribute(this,n),Pc.applyMatrix3(e),this.setXY(n,Pc.x,Pc.y);else if(3===this.itemSize)for(let n=0,s=this.count;n<s;n++)ko.fromBufferAttribute(this,n),ko.applyMatrix3(e),this.setXYZ(n,ko.x,ko.y,ko.z);return this}applyMatrix4(e){for(let n=0,s=this.count;n<s;n++)ko.fromBufferAttribute(this,n),ko.applyMatrix4(e),this.setXYZ(n,ko.x,ko.y,ko.z);return this}applyNormalMatrix(e){for(let n=0,s=this.count;n<s;n++)ko.fromBufferAttribute(this,n),ko.applyNormalMatrix(e),this.setXYZ(n,ko.x,ko.y,ko.z);return this}transformDirection(e){for(let n=0,s=this.count;n<s;n++)ko.fromBufferAttribute(this,n),ko.transformDirection(e),this.setXYZ(n,ko.x,ko.y,ko.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let s=this.array[e*this.itemSize+n];return this.normalized&&(s=To(s,this.array)),s}setComponent(e,n,s){return this.normalized&&(s=Tr(s,this.array)),this.array[e*this.itemSize+n]=s,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=To(n,this.array)),n}setX(e,n){return this.normalized&&(n=Tr(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=To(n,this.array)),n}setY(e,n){return this.normalized&&(n=Tr(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=To(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Tr(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=To(n,this.array)),n}setW(e,n){return this.normalized&&(n=Tr(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,s){return e*=this.itemSize,this.normalized&&(n=Tr(n,this.array),s=Tr(s,this.array)),this.array[e+0]=n,this.array[e+1]=s,this}setXYZ(e,n,s,a){return e*=this.itemSize,this.normalized&&(n=Tr(n,this.array),s=Tr(s,this.array),a=Tr(a,this.array)),this.array[e+0]=n,this.array[e+1]=s,this.array[e+2]=a,this}setXYZW(e,n,s,a,u){return e*=this.itemSize,this.normalized&&(n=Tr(n,this.array),s=Tr(s,this.array),a=Tr(a,this.array),u=Tr(u,this.array)),this.array[e+0]=n,this.array[e+1]=s,this.array[e+2]=a,this.array[e+3]=u,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class Cd extends fs{constructor(e,n,s){super(new Uint16Array(e),n,s)}}class mp extends fs{constructor(e,n,s){super(new Uint32Array(e),n,s)}}class rr extends fs{constructor(e,n,s){super(new Float32Array(e),n,s)}}let ch=0;const Nl=new gr,uh=new Qt,_c=new lt,cr=new bn,Td=new bn,ol=new lt;class bs extends Ba{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ch++}),this.uuid=bo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Ka(e)?mp:Cd)(e,1):e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,n,s=0){this.groups.push({start:e,count:n,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;void 0!==n&&(n.applyMatrix4(e),n.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const u=(new ir).getNormalMatrix(e);s.applyNormalMatrix(u),s.needsUpdate=!0}const a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(e),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Nl.makeRotationFromQuaternion(e),this.applyMatrix4(Nl),this}rotateX(e){return Nl.makeRotationX(e),this.applyMatrix4(Nl),this}rotateY(e){return Nl.makeRotationY(e),this.applyMatrix4(Nl),this}rotateZ(e){return Nl.makeRotationZ(e),this.applyMatrix4(Nl),this}translate(e,n,s){return Nl.makeTranslation(e,n,s),this.applyMatrix4(Nl),this}scale(e,n,s){return Nl.makeScale(e,n,s),this.applyMatrix4(Nl),this}lookAt(e){return uh.lookAt(e),uh.updateMatrix(),this.applyMatrix4(uh.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_c).negate(),this.translate(_c.x,_c.y,_c.z),this}setFromPoints(e){const n=this.getAttribute("position");if(void 0===n){const s=[];for(let a=0,u=e.length;a<u;a++){const p=e[a];s.push(p.x,p.y,p.z||0)}this.setAttribute("position",new rr(s,3))}else{for(let s=0,a=n.count;s<a;s++){const u=e[s];n.setXYZ(s,u.x,u.y,u.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new bn);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new lt(-1/0,-1/0,-1/0),new lt(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++)cr.setFromBufferAttribute(n[s]),this.morphTargetsRelative?(ol.addVectors(this.boundingBox.min,cr.min),this.boundingBox.expandByPoint(ol),ol.addVectors(this.boundingBox.max,cr.max),this.boundingBox.expandByPoint(ol)):(this.boundingBox.expandByPoint(cr.min),this.boundingBox.expandByPoint(cr.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new oa);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new lt,1/0);if(e){const s=this.boundingSphere.center;if(cr.setFromBufferAttribute(e),n)for(let u=0,p=n.length;u<p;u++)Td.setFromBufferAttribute(n[u]),this.morphTargetsRelative?(ol.addVectors(cr.min,Td.min),cr.expandByPoint(ol),ol.addVectors(cr.max,Td.max),cr.expandByPoint(ol)):(cr.expandByPoint(Td.min),cr.expandByPoint(Td.max));cr.getCenter(s);let a=0;for(let u=0,p=e.count;u<p;u++)ol.fromBufferAttribute(e,u),a=Math.max(a,s.distanceToSquared(ol));if(n)for(let u=0,p=n.length;u<p;u++){const v=n[u],b=this.morphTargetsRelative;for(let E=0,R=v.count;E<R;E++)ol.fromBufferAttribute(v,E),b&&(_c.fromBufferAttribute(e,E),ol.add(_c)),a=Math.max(a,s.distanceToSquared(ol))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(null===e||void 0===n.position||void 0===n.normal||void 0===n.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const s=n.position,a=n.normal,u=n.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new fs(new Float32Array(4*s.count),4));const p=this.getAttribute("tangent"),v=[],b=[];for(let bt=0;bt<s.count;bt++)v[bt]=new lt,b[bt]=new lt;const E=new lt,R=new lt,B=new lt,U=new yn,$=new yn,re=new yn,ve=new lt,ae=new lt;function Z(bt,tt,$e){E.fromBufferAttribute(s,bt),R.fromBufferAttribute(s,tt),B.fromBufferAttribute(s,$e),U.fromBufferAttribute(u,bt),$.fromBufferAttribute(u,tt),re.fromBufferAttribute(u,$e),R.sub(E),B.sub(E),$.sub(U),re.sub(U);const Nt=1/($.x*re.y-re.x*$.y);isFinite(Nt)&&(ve.copy(R).multiplyScalar(re.y).addScaledVector(B,-$.y).multiplyScalar(Nt),ae.copy(B).multiplyScalar($.x).addScaledVector(R,-re.x).multiplyScalar(Nt),v[bt].add(ve),v[tt].add(ve),v[$e].add(ve),b[bt].add(ae),b[tt].add(ae),b[$e].add(ae))}let Ue=this.groups;0===Ue.length&&(Ue=[{start:0,count:e.count}]);for(let bt=0,tt=Ue.length;bt<tt;++bt){const $e=Ue[bt],Nt=$e.start;for(let rn=Nt,gn=Nt+$e.count;rn<gn;rn+=3)Z(e.getX(rn+0),e.getX(rn+1),e.getX(rn+2))}const Le=new lt,Pe=new lt,Ft=new lt,dt=new lt;function gt(bt){Ft.fromBufferAttribute(a,bt),dt.copy(Ft);const tt=v[bt];Le.copy(tt),Le.sub(Ft.multiplyScalar(Ft.dot(tt))).normalize(),Pe.crossVectors(dt,tt);const Nt=Pe.dot(b[bt])<0?-1:1;p.setXYZW(bt,Le.x,Le.y,Le.z,Nt)}for(let bt=0,tt=Ue.length;bt<tt;++bt){const $e=Ue[bt],Nt=$e.start;for(let rn=Nt,gn=Nt+$e.count;rn<gn;rn+=3)gt(e.getX(rn+0)),gt(e.getX(rn+1)),gt(e.getX(rn+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(void 0!==n){let s=this.getAttribute("normal");if(void 0===s)s=new fs(new Float32Array(3*n.count),3),this.setAttribute("normal",s);else for(let U=0,$=s.count;U<$;U++)s.setXYZ(U,0,0,0);const a=new lt,u=new lt,p=new lt,v=new lt,b=new lt,E=new lt,R=new lt,B=new lt;if(e)for(let U=0,$=e.count;U<$;U+=3){const re=e.getX(U+0),ve=e.getX(U+1),ae=e.getX(U+2);a.fromBufferAttribute(n,re),u.fromBufferAttribute(n,ve),p.fromBufferAttribute(n,ae),R.subVectors(p,u),B.subVectors(a,u),R.cross(B),v.fromBufferAttribute(s,re),b.fromBufferAttribute(s,ve),E.fromBufferAttribute(s,ae),v.add(R),b.add(R),E.add(R),s.setXYZ(re,v.x,v.y,v.z),s.setXYZ(ve,b.x,b.y,b.z),s.setXYZ(ae,E.x,E.y,E.z)}else for(let U=0,$=n.count;U<$;U+=3)a.fromBufferAttribute(n,U+0),u.fromBufferAttribute(n,U+1),p.fromBufferAttribute(n,U+2),R.subVectors(p,u),B.subVectors(a,u),R.cross(B),s.setXYZ(U+0,R.x,R.y,R.z),s.setXYZ(U+1,R.x,R.y,R.z),s.setXYZ(U+2,R.x,R.y,R.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,s=e.count;n<s;n++)ol.fromBufferAttribute(e,n),ol.normalize(),e.setXYZ(n,ol.x,ol.y,ol.z)}toNonIndexed(){function e(v,b){const E=v.array,R=v.itemSize,B=v.normalized,U=new E.constructor(b.length*R);let $=0,re=0;for(let ve=0,ae=b.length;ve<ae;ve++){$=v.isInterleavedBufferAttribute?b[ve]*v.data.stride+v.offset:b[ve]*R;for(let Z=0;Z<R;Z++)U[re++]=E[$++]}return new fs(U,R,B)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new bs,s=this.index.array,a=this.attributes;for(const v in a){const E=e(a[v],s);n.setAttribute(v,E)}const u=this.morphAttributes;for(const v in u){const b=[],E=u[v];for(let R=0,B=E.length;R<B;R++){const $=e(E[R],s);b.push($)}n.morphAttributes[v]=b}n.morphTargetsRelative=this.morphTargetsRelative;const p=this.groups;for(let v=0,b=p.length;v<b;v++){const E=p[v];n.addGroup(E.start,E.count,E.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const b=this.parameters;for(const E in b)void 0!==b[E]&&(e[E]=b[E]);return e}e.data={attributes:{}};const n=this.index;null!==n&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const s=this.attributes;for(const b in s)e.data.attributes[b]=s[b].toJSON(e.data);const a={};let u=!1;for(const b in this.morphAttributes){const E=this.morphAttributes[b],R=[];for(let B=0,U=E.length;B<U;B++)R.push(E[B].toJSON(e.data));R.length>0&&(a[b]=R,u=!0)}u&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));const v=this.boundingSphere;return null!==v&&(e.data.boundingSphere={center:v.center.toArray(),radius:v.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const s=e.index;null!==s&&this.setIndex(s.clone(n));const a=e.attributes;for(const E in a)this.setAttribute(E,a[E].clone(n));const u=e.morphAttributes;for(const E in u){const R=[],B=u[E];for(let U=0,$=B.length;U<$;U++)R.push(B[U].clone(n));this.morphAttributes[E]=R}this.morphTargetsRelative=e.morphTargetsRelative;const p=e.groups;for(let E=0,R=p.length;E<R;E++){const B=p[E];this.addGroup(B.start,B.count,B.materialIndex)}const v=e.boundingBox;null!==v&&(this.boundingBox=v.clone());const b=e.boundingSphere;return null!==b&&(this.boundingSphere=b.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const cm=new gr,$u=new Ic,Dd=new oa,Xu=new lt,lf=new lt,cf=new lt,uf=new lt,gp=new lt,df=new lt,xn=new lt,xs=new lt;class so extends Qt{constructor(e=new bs,n=new ju){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,s=Object.keys(n);if(s.length>0){const a=n[s[0]];if(void 0!==a){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,p=a.length;u<p;u++){const v=a[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[v]=u}}}}getVertexPosition(e,n){const s=this.geometry,u=s.morphAttributes.position,p=s.morphTargetsRelative;n.fromBufferAttribute(s.attributes.position,e);const v=this.morphTargetInfluences;if(u&&v){df.set(0,0,0);for(let b=0,E=u.length;b<E;b++){const R=v[b];0!==R&&(gp.fromBufferAttribute(u[b],e),df.addScaledVector(p?gp:gp.sub(n),R))}n.add(df)}return n}raycast(e,n){const s=this.geometry,u=this.matrixWorld;void 0!==this.material&&(null===s.boundingSphere&&s.computeBoundingSphere(),Dd.copy(s.boundingSphere),Dd.applyMatrix4(u),$u.copy(e.ray).recast(e.near),(!1!==Dd.containsPoint($u.origin)||!(null===$u.intersectSphere(Dd,Xu)||$u.origin.distanceToSquared(Xu)>(e.far-e.near)**2))&&(cm.copy(u).invert(),$u.copy(e.ray).applyMatrix4(cm),(null===s.boundingBox||!1!==$u.intersectsBox(s.boundingBox))&&this._computeIntersections(e,n,$u)))}_computeIntersections(e,n,s){let a;const u=this.geometry,p=this.material,v=u.index,b=u.attributes.position,E=u.attributes.uv,R=u.attributes.uv1,B=u.attributes.normal,U=u.groups,$=u.drawRange;if(null!==v)if(Array.isArray(p))for(let re=0,ve=U.length;re<ve;re++){const ae=U[re],Z=p[ae.materialIndex];for(let Pe=Math.max(ae.start,$.start),Ft=Math.min(v.count,Math.min(ae.start+ae.count,$.start+$.count));Pe<Ft;Pe+=3)a=zs(this,Z,e,s,E,R,B,v.getX(Pe),v.getX(Pe+1),v.getX(Pe+2)),a&&(a.faceIndex=Math.floor(Pe/3),a.face.materialIndex=ae.materialIndex,n.push(a))}else for(let ae=Math.max(0,$.start),Z=Math.min(v.count,$.start+$.count);ae<Z;ae+=3)a=zs(this,p,e,s,E,R,B,v.getX(ae),v.getX(ae+1),v.getX(ae+2)),a&&(a.faceIndex=Math.floor(ae/3),n.push(a));else if(void 0!==b)if(Array.isArray(p))for(let re=0,ve=U.length;re<ve;re++){const ae=U[re],Z=p[ae.materialIndex];for(let Pe=Math.max(ae.start,$.start),Ft=Math.min(b.count,Math.min(ae.start+ae.count,$.start+$.count));Pe<Ft;Pe+=3)a=zs(this,Z,e,s,E,R,B,Pe,Pe+1,Pe+2),a&&(a.faceIndex=Math.floor(Pe/3),a.face.materialIndex=ae.materialIndex,n.push(a))}else for(let ae=Math.max(0,$.start),Z=Math.min(b.count,$.start+$.count);ae<Z;ae+=3)a=zs(this,p,e,s,E,R,B,ae,ae+1,ae+2),a&&(a.faceIndex=Math.floor(ae/3),n.push(a))}}function zs(c,e,n,s,a,u,p,v,b,E){c.getVertexPosition(v,lf),c.getVertexPosition(b,cf),c.getVertexPosition(E,uf);const R=function Bo(c,e,n,s,a,u,p,v){let b;if(b=1===e.side?s.intersectTriangle(p,u,a,!0,v):s.intersectTriangle(a,u,p,0===e.side,v),null===b)return null;xs.copy(v),xs.applyMatrix4(c.matrixWorld);const E=n.ray.origin.distanceTo(xs);return E<n.near||E>n.far?null:{distance:E,point:xs.clone(),object:c}}(c,e,n,s,lf,cf,uf,xn);if(R){const B=new lt;Il.getBarycoord(xn,lf,cf,uf,B),a&&(R.uv=Il.getInterpolatedAttribute(a,v,b,E,B,new yn)),u&&(R.uv1=Il.getInterpolatedAttribute(u,v,b,E,B,new yn)),p&&(R.normal=Il.getInterpolatedAttribute(p,v,b,E,B,new lt),R.normal.dot(s.direction)>0&&R.normal.multiplyScalar(-1));const U={a:v,b,c:E,normal:new lt,materialIndex:0};Il.getNormal(lf,cf,uf,U.normal),R.face=U,R.barycoord=B}return R}class cu extends bs{constructor(e=1,n=1,s=1,a=1,u=1,p=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:s,widthSegments:a,heightSegments:u,depthSegments:p};const v=this;a=Math.floor(a),u=Math.floor(u),p=Math.floor(p);const b=[],E=[],R=[],B=[];let U=0,$=0;function re(ve,ae,Z,Ue,Le,Pe,Ft,dt,gt,bt,tt){const $e=Pe/gt,Nt=Ft/bt,pn=Pe/2,rn=Ft/2,gn=dt/2,kn=gt+1,_n=bt+1;let ti=0,wn=0;const Ci=new lt;for(let Gi=0;Gi<_n;Gi++){const _i=Gi*Nt-rn;for(let ps=0;ps<kn;ps++)Ci[ve]=(ps*$e-pn)*Ue,Ci[ae]=_i*Le,Ci[Z]=gn,E.push(Ci.x,Ci.y,Ci.z),Ci[ve]=0,Ci[ae]=0,Ci[Z]=dt>0?1:-1,R.push(Ci.x,Ci.y,Ci.z),B.push(ps/gt),B.push(1-Gi/bt),ti+=1}for(let Gi=0;Gi<bt;Gi++)for(let _i=0;_i<gt;_i++){const Eo=U+_i+kn*(Gi+1),En=U+(_i+1)+kn*(Gi+1),ci=U+(_i+1)+kn*Gi;b.push(U+_i+kn*Gi,Eo,ci),b.push(Eo,En,ci),wn+=6}v.addGroup($,wn,tt),$+=wn,U+=ti}re("z","y","x",-1,-1,s,n,e,p,u,0),re("z","y","x",1,-1,s,n,-e,p,u,1),re("x","z","y",1,1,e,s,n,a,p,2),re("x","z","y",1,-1,e,s,-n,a,p,3),re("x","y","z",1,-1,e,n,s,a,u,4),re("x","y","z",-1,-1,e,n,-s,a,u,5),this.setIndex(b),this.setAttribute("position",new rr(E,3)),this.setAttribute("normal",new rr(R,3)),this.setAttribute("uv",new rr(B,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Zl(c){const e={};for(const n in c){e[n]={};for(const s in c[n]){const a=c[n][s];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][s]=null):e[n][s]=a.clone():e[n][s]=Array.isArray(a)?a.slice():a}}return e}function jo(c){const e={};for(let n=0;n<c.length;n++){const s=Zl(c[n]);for(const a in s)e[a]=s[a]}return e}function Ku(c){const e=c.getRenderTarget();return null===e?c.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:Lt.workingColorSpace}const vv={clone:Zl,merge:jo};class Uo extends sl{static get type(){return"ShaderMaterial"}constructor(e){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Zl(e.uniforms),this.uniformsGroups=function hf(c){const e=[];for(let n=0;n<c.length;n++)e.push(c[n].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const a in this.uniforms){const p=this.uniforms[a].value;n.uniforms[a]=p&&p.isTexture?{type:"t",value:p.toJSON(e).uuid}:p&&p.isColor?{type:"c",value:p.getHex()}:p&&p.isVector2?{type:"v2",value:p.toArray()}:p&&p.isVector3?{type:"v3",value:p.toArray()}:p&&p.isVector4?{type:"v4",value:p.toArray()}:p&&p.isMatrix3?{type:"m3",value:p.toArray()}:p&&p.isMatrix4?{type:"m4",value:p.toArray()}:{value:p}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const s={};for(const a in this.extensions)!0===this.extensions[a]&&(s[a]=!0);return Object.keys(s).length>0&&(n.extensions=s),n}}class yc extends Qt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new gr,this.projectionMatrix=new gr,this.projectionMatrixInverse=new gr,this.coordinateSystem=nl}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Xc=new lt,Jl=new yn,Fc=new yn;class aa extends yc{constructor(e=50,n=1,s=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=s,this.far=a,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=2*Xa*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ua*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Xa*Math.atan(Math.tan(.5*Ua*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,s){Xc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Xc.x,Xc.y).multiplyScalar(-e/Xc.z),Xc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(Xc.x,Xc.y).multiplyScalar(-e/Xc.z)}getViewSize(e,n){return this.getViewBounds(e,Jl,Fc),n.subVectors(Fc,Jl)}setViewOffset(e,n,s,a,u,p){this.aspect=e/n,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=s,this.view.offsetY=a,this.view.width=u,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(.5*Ua*this.fov)/this.zoom,s=2*n,a=this.aspect*s,u=-.5*a;const p=this.view;if(null!==this.view&&this.view.enabled){const b=p.fullWidth,E=p.fullHeight;u+=p.offsetX*a/b,n-=p.offsetY*s/E,a*=p.width/b,s*=p.height/E}const v=this.filmOffset;0!==v&&(u+=e*v/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+a,n,n-s,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,null!==this.view&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}class hh extends Qt{constructor(e,n,s){super(),this.type="CubeCamera",this.renderTarget=s,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new aa(-90,1,e,n);a.layers=this.layers,this.add(a);const u=new aa(-90,1,e,n);u.layers=this.layers,this.add(u);const p=new aa(-90,1,e,n);p.layers=this.layers,this.add(p);const v=new aa(-90,1,e,n);v.layers=this.layers,this.add(v);const b=new aa(-90,1,e,n);b.layers=this.layers,this.add(b);const E=new aa(-90,1,e,n);E.layers=this.layers,this.add(E)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[s,a,u,p,v,b]=n;for(const E of n)this.remove(E);if(e===nl)s.up.set(0,1,0),s.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),u.up.set(0,0,-1),u.lookAt(0,1,0),p.up.set(0,0,1),p.lookAt(0,-1,0),v.up.set(0,1,0),v.lookAt(0,0,1),b.up.set(0,1,0),b.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);s.up.set(0,-1,0),s.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),u.up.set(0,0,1),u.lookAt(0,1,0),p.up.set(0,0,-1),p.lookAt(0,-1,0),v.up.set(0,-1,0),v.lookAt(0,0,1),b.up.set(0,-1,0),b.lookAt(0,0,-1)}for(const E of n)this.add(E),E.updateMatrixWorld()}update(e,n){null===this.parent&&this.updateMatrixWorld();const{renderTarget:s,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[u,p,v,b,E,R]=this.children,B=e.getRenderTarget(),U=e.getActiveCubeFace(),$=e.getActiveMipmapLevel(),re=e.xr.enabled;e.xr.enabled=!1;const ve=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,e.setRenderTarget(s,0,a),e.render(n,u),e.setRenderTarget(s,1,a),e.render(n,p),e.setRenderTarget(s,2,a),e.render(n,v),e.setRenderTarget(s,3,a),e.render(n,b),e.setRenderTarget(s,4,a),e.render(n,E),s.texture.generateMipmaps=ve,e.setRenderTarget(s,5,a),e.render(n,R),e.setRenderTarget(B,U,$),e.xr.enabled=re,s.texture.needsPMREMUpdate=!0}}class bu extends Xt{constructor(e,n,s,a,u,p,v,b,E,R){super(e=void 0!==e?e:[],n=void 0!==n?n:rt,s,a,u,p,v,b,E,R),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Qu extends Dr{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const s={width:e,height:e,depth:1};this.texture=new bu([s,s,s,s,s,s],n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:yi}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const s_uniforms={tEquirect:{value:null}},s_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",s_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new cu(5,5,5),u=new Uo({name:"CubemapFromEquirect",uniforms:Zl(s_uniforms),vertexShader:s_vertexShader,fragmentShader:s_fragmentShader,side:1,blending:0});u.uniforms.tEquirect.value=n;const p=new so(a,u),v=n.minFilter;return n.minFilter===yr&&(n.minFilter=yi),new hh(1,10,this).update(e,p),n.minFilter=v,p.geometry.dispose(),p.material.dispose(),this}clear(e,n,s,a){const u=e.getRenderTarget();for(let p=0;p<6;p++)e.setRenderTarget(this,p),e.clear(n,s,a);e.setRenderTarget(u)}}const bc=new lt,Id=new lt,_v=new ir;class xu{constructor(e=new lt(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,s,a){return this.normal.set(e,n,s),this.constant=a,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,s){const a=bc.subVectors(s,n).cross(Id.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const s=e.delta(bc),a=this.normal.dot(s);if(0===a)return 0===this.distanceToPoint(e.start)?n.copy(e.start):null;const u=-(e.start.dot(this.normal)+this.constant)/a;return u<0||u>1?null:n.copy(e.start).addScaledVector(s,u)}intersectsLine(e){const n=this.distanceToPoint(e.start),s=this.distanceToPoint(e.end);return n<0&&s>0||s<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const s=n||_v.getNormalMatrix(e),a=this.coplanarPoint(bc).applyMatrix4(e),u=this.normal.applyMatrix3(s).normalize();return this.constant=-a.dot(u),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const uu=new oa,fh=new lt;class ph{constructor(e=new xu,n=new xu,s=new xu,a=new xu,u=new xu,p=new xu){this.planes=[e,n,s,a,u,p]}set(e,n,s,a,u,p){const v=this.planes;return v[0].copy(e),v[1].copy(n),v[2].copy(s),v[3].copy(a),v[4].copy(u),v[5].copy(p),this}copy(e){const n=this.planes;for(let s=0;s<6;s++)n[s].copy(e.planes[s]);return this}setFromProjectionMatrix(e,n=nl){const s=this.planes,a=e.elements,u=a[0],p=a[1],v=a[2],b=a[3],E=a[4],R=a[5],B=a[6],U=a[7],$=a[8],re=a[9],ve=a[10],ae=a[11],Z=a[12],Ue=a[13],Le=a[14],Pe=a[15];if(s[0].setComponents(b-u,U-E,ae-$,Pe-Z).normalize(),s[1].setComponents(b+u,U+E,ae+$,Pe+Z).normalize(),s[2].setComponents(b+p,U+R,ae+re,Pe+Ue).normalize(),s[3].setComponents(b-p,U-R,ae-re,Pe-Ue).normalize(),s[4].setComponents(b-v,U-B,ae-ve,Pe-Le).normalize(),n===nl)s[5].setComponents(b+v,U+B,ae+ve,Pe+Le).normalize();else{if(2001!==n)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);s[5].setComponents(v,B,ve,Le).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),uu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;null===n.boundingSphere&&n.computeBoundingSphere(),uu.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(uu)}intersectsSprite(e){return uu.center.set(0,0,0),uu.radius=.7071067811865476,uu.applyMatrix4(e.matrixWorld),this.intersectsSphere(uu)}intersectsSphere(e){const n=this.planes,s=e.center,a=-e.radius;for(let u=0;u<6;u++)if(n[u].distanceToPoint(s)<a)return!1;return!0}intersectsBox(e){const n=this.planes;for(let s=0;s<6;s++){const a=n[s];if(fh.x=a.normal.x>0?e.max.x:e.min.x,fh.y=a.normal.y>0?e.max.y:e.min.y,fh.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(fh)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let s=0;s<6;s++)if(n[s].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function vp(){let c=null,e=!1,n=null,s=null;function a(u,p){n(u,p),s=c.requestAnimationFrame(a)}return{start:function(){!0!==e&&null!==n&&(s=c.requestAnimationFrame(a),e=!0)},stop:function(){c.cancelAnimationFrame(s),e=!1},setAnimationLoop:function(u){n=u},setContext:function(u){c=u}}}function um(c){const e=new WeakMap;return{get:function a(v){return v.isInterleavedBufferAttribute&&(v=v.data),e.get(v)},remove:function u(v){v.isInterleavedBufferAttribute&&(v=v.data);const b=e.get(v);b&&(c.deleteBuffer(b.buffer),e.delete(v))},update:function p(v,b){if(v.isInterleavedBufferAttribute&&(v=v.data),v.isGLBufferAttribute){const R=e.get(v);return void((!R||R.version<v.version)&&e.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version}))}const E=e.get(v);if(void 0===E)e.set(v,function n(v,b){const E=v.array,R=v.usage,B=E.byteLength,U=c.createBuffer();let $;if(c.bindBuffer(b,U),c.bufferData(b,E,R),v.onUploadCallback(),E instanceof Float32Array)$=c.FLOAT;else if(E instanceof Uint16Array)$=v.isFloat16BufferAttribute?c.HALF_FLOAT:c.UNSIGNED_SHORT;else if(E instanceof Int16Array)$=c.SHORT;else if(E instanceof Uint32Array)$=c.UNSIGNED_INT;else if(E instanceof Int32Array)$=c.INT;else if(E instanceof Int8Array)$=c.BYTE;else if(E instanceof Uint8Array)$=c.UNSIGNED_BYTE;else{if(!(E instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+E);$=c.UNSIGNED_BYTE}return{buffer:U,type:$,bytesPerElement:E.BYTES_PER_ELEMENT,version:v.version,size:B}}(v,b));else if(E.version<v.version){if(E.size!==v.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function s(v,b,E){const R=b.array,B=b.updateRanges;if(c.bindBuffer(E,v),0===B.length)c.bufferSubData(E,0,R);else{B.sort(($,re)=>$.start-re.start);let U=0;for(let $=1;$<B.length;$++){const re=B[U],ve=B[$];ve.start<=re.start+re.count+1?re.count=Math.max(re.count,ve.start+ve.count-re.start):(++U,B[U]=ve)}B.length=U+1;for(let $=0,re=B.length;$<re;$++){const ve=B[$];c.bufferSubData(E,ve.start*R.BYTES_PER_ELEMENT,R,ve.start,ve.count)}b.clearUpdateRanges()}b.onUploadCallback()})(E.buffer,v,b),E.version=v.version}}}}class Yu extends bs{constructor(e=1,n=1,s=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:s,heightSegments:a};const u=e/2,p=n/2,v=Math.floor(s),b=Math.floor(a),E=v+1,R=b+1,B=e/v,U=n/b,$=[],re=[],ve=[],ae=[];for(let Z=0;Z<R;Z++){const Ue=Z*U-p;for(let Le=0;Le<E;Le++)re.push(Le*B-u,-Ue,0),ve.push(0,0,1),ae.push(Le/v),ae.push(1-Z/b)}for(let Z=0;Z<b;Z++)for(let Ue=0;Ue<v;Ue++){const Pe=Ue+E*(Z+1),Ft=Ue+1+E*(Z+1),dt=Ue+1+E*Z;$.push(Ue+E*Z,Pe,dt),$.push(Pe,Ft,dt)}this.setIndex($),this.setAttribute("position",new rr(re,3)),this.setAttribute("normal",new rr(ve,3)),this.setAttribute("uv",new rr(ae,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yu(e.width,e.height,e.widthSegments,e.heightSegments)}}const ss={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Mi={common:{diffuse:{value:new ki(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ir},alphaMap:{value:null},alphaMapTransform:{value:new ir},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ir}},envmap:{envMap:{value:null},envMapRotation:{value:new ir},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ir}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ir}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ir},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ir},normalScale:{value:new yn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ir},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ir}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ir}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ir}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ki(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ki(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ir},alphaTest:{value:0},uvTransform:{value:new ir}},sprite:{diffuse:{value:new ki(16777215)},opacity:{value:1},center:{value:new yn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ir},alphaMap:{value:null},alphaMapTransform:{value:new ir},alphaTest:{value:0}}},m={basic:{uniforms:jo([Mi.common,Mi.specularmap,Mi.envmap,Mi.aomap,Mi.lightmap,Mi.fog]),vertexShader:ss.meshbasic_vert,fragmentShader:ss.meshbasic_frag},lambert:{uniforms:jo([Mi.common,Mi.specularmap,Mi.envmap,Mi.aomap,Mi.lightmap,Mi.emissivemap,Mi.bumpmap,Mi.normalmap,Mi.displacementmap,Mi.fog,Mi.lights,{emissive:{value:new ki(0)}}]),vertexShader:ss.meshlambert_vert,fragmentShader:ss.meshlambert_frag},phong:{uniforms:jo([Mi.common,Mi.specularmap,Mi.envmap,Mi.aomap,Mi.lightmap,Mi.emissivemap,Mi.bumpmap,Mi.normalmap,Mi.displacementmap,Mi.fog,Mi.lights,{emissive:{value:new ki(0)},specular:{value:new ki(1118481)},shininess:{value:30}}]),vertexShader:ss.meshphong_vert,fragmentShader:ss.meshphong_frag},standard:{uniforms:jo([Mi.common,Mi.envmap,Mi.aomap,Mi.lightmap,Mi.emissivemap,Mi.bumpmap,Mi.normalmap,Mi.displacementmap,Mi.roughnessmap,Mi.metalnessmap,Mi.fog,Mi.lights,{emissive:{value:new ki(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ss.meshphysical_vert,fragmentShader:ss.meshphysical_frag},toon:{uniforms:jo([Mi.common,Mi.aomap,Mi.lightmap,Mi.emissivemap,Mi.bumpmap,Mi.normalmap,Mi.displacementmap,Mi.gradientmap,Mi.fog,Mi.lights,{emissive:{value:new ki(0)}}]),vertexShader:ss.meshtoon_vert,fragmentShader:ss.meshtoon_frag},matcap:{uniforms:jo([Mi.common,Mi.bumpmap,Mi.normalmap,Mi.displacementmap,Mi.fog,{matcap:{value:null}}]),vertexShader:ss.meshmatcap_vert,fragmentShader:ss.meshmatcap_frag},points:{uniforms:jo([Mi.points,Mi.fog]),vertexShader:ss.points_vert,fragmentShader:ss.points_frag},dashed:{uniforms:jo([Mi.common,Mi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ss.linedashed_vert,fragmentShader:ss.linedashed_frag},depth:{uniforms:jo([Mi.common,Mi.displacementmap]),vertexShader:ss.depth_vert,fragmentShader:ss.depth_frag},normal:{uniforms:jo([Mi.common,Mi.bumpmap,Mi.normalmap,Mi.displacementmap,{opacity:{value:1}}]),vertexShader:ss.meshnormal_vert,fragmentShader:ss.meshnormal_frag},sprite:{uniforms:jo([Mi.sprite,Mi.fog]),vertexShader:ss.sprite_vert,fragmentShader:ss.sprite_frag},background:{uniforms:{uvTransform:{value:new ir},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ss.background_vert,fragmentShader:ss.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ir}},vertexShader:ss.backgroundCube_vert,fragmentShader:ss.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ss.cube_vert,fragmentShader:ss.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ss.equirect_vert,fragmentShader:ss.equirect_frag},distanceRGBA:{uniforms:jo([Mi.common,Mi.displacementmap,{referencePosition:{value:new lt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ss.distanceRGBA_vert,fragmentShader:ss.distanceRGBA_frag},shadow:{uniforms:jo([Mi.lights,Mi.fog,{color:{value:new ki(0)},opacity:{value:1}}]),vertexShader:ss.shadow_vert,fragmentShader:ss.shadow_frag}};m.physical={uniforms:jo([m.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ir},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ir},clearcoatNormalScale:{value:new yn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ir},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ir},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ir},sheen:{value:0},sheenColor:{value:new ki(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ir},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ir},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ir},transmissionSamplerSize:{value:new yn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ir},attenuationDistance:{value:0},attenuationColor:{value:new ki(0)},specularColor:{value:new ki(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ir},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ir},anisotropyVector:{value:new yn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ir}}]),vertexShader:ss.meshphysical_vert,fragmentShader:ss.meshphysical_frag};const A={r:0,b:0,g:0},f=new Dl,_=new gr;function w(c,e,n,s,a,u,p){const v=new ki(0);let E,R,b=!0===u?0:1,B=null,U=0,$=null;function re(Ue){let Le=!0===Ue.isScene?Ue.background:null;return Le&&Le.isTexture&&(Le=(Ue.backgroundBlurriness>0?n:e).get(Le)),Le}function Z(Ue,Le){Ue.getRGB(A,Ku(c)),s.buffers.color.setClear(A.r,A.g,A.b,Le,p)}return{getClearColor:function(){return v},setClearColor:function(Ue,Le=1){v.set(Ue),b=Le,Z(v,b)},getClearAlpha:function(){return b},setClearAlpha:function(Ue){b=Ue,Z(v,b)},render:function ve(Ue){let Le=!1;const Pe=re(Ue);null===Pe?Z(v,b):Pe&&Pe.isColor&&(Z(Pe,1),Le=!0);const Ft=c.xr.getEnvironmentBlendMode();"additive"===Ft?s.buffers.color.setClear(0,0,0,1,p):"alpha-blend"===Ft&&s.buffers.color.setClear(0,0,0,0,p),(c.autoClear||Le)&&(s.buffers.depth.setTest(!0),s.buffers.depth.setMask(!0),s.buffers.color.setMask(!0),c.clear(c.autoClearColor,c.autoClearDepth,c.autoClearStencil))},addToRenderList:function ae(Ue,Le){const Pe=re(Le);Pe&&(Pe.isCubeTexture||Pe.mapping===Un)?(void 0===R&&(R=new so(new cu(1,1,1),new Uo({name:"BackgroundCubeMaterial",uniforms:Zl(m.backgroundCube.uniforms),vertexShader:m.backgroundCube.vertexShader,fragmentShader:m.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),R.geometry.deleteAttribute("normal"),R.geometry.deleteAttribute("uv"),R.onBeforeRender=function(Ft,dt,gt){this.matrixWorld.copyPosition(gt.matrixWorld)},Object.defineProperty(R.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(R)),f.copy(Le.backgroundRotation),f.x*=-1,f.y*=-1,f.z*=-1,Pe.isCubeTexture&&!1===Pe.isRenderTargetTexture&&(f.y*=-1,f.z*=-1),R.material.uniforms.envMap.value=Pe,R.material.uniforms.flipEnvMap.value=Pe.isCubeTexture&&!1===Pe.isRenderTargetTexture?-1:1,R.material.uniforms.backgroundBlurriness.value=Le.backgroundBlurriness,R.material.uniforms.backgroundIntensity.value=Le.backgroundIntensity,R.material.uniforms.backgroundRotation.value.setFromMatrix4(_.makeRotationFromEuler(f)),R.material.toneMapped=Lt.getTransfer(Pe.colorSpace)!==as,(B!==Pe||U!==Pe.version||$!==c.toneMapping)&&(R.material.needsUpdate=!0,B=Pe,U=Pe.version,$=c.toneMapping),R.layers.enableAll(),Ue.unshift(R,R.geometry,R.material,0,0,null)):Pe&&Pe.isTexture&&(void 0===E&&(E=new so(new Yu(2,2),new Uo({name:"BackgroundMaterial",uniforms:Zl(m.background.uniforms),vertexShader:m.background.vertexShader,fragmentShader:m.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),E.geometry.deleteAttribute("normal"),Object.defineProperty(E.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(E)),E.material.uniforms.t2D.value=Pe,E.material.uniforms.backgroundIntensity.value=Le.backgroundIntensity,E.material.toneMapped=Lt.getTransfer(Pe.colorSpace)!==as,!0===Pe.matrixAutoUpdate&&Pe.updateMatrix(),E.material.uniforms.uvTransform.value.copy(Pe.matrix),(B!==Pe||U!==Pe.version||$!==c.toneMapping)&&(E.material.needsUpdate=!0,B=Pe,U=Pe.version,$=c.toneMapping),E.layers.enableAll(),Ue.unshift(E,E.geometry,E.material,0,0,null))}}}function ge(c,e){const n=c.getParameter(c.MAX_VERTEX_ATTRIBS),s={},a=U(null);let u=a,p=!1;function E($e){return c.bindVertexArray($e)}function R($e){return c.deleteVertexArray($e)}function U($e){const Nt=[],pn=[],rn=[];for(let gn=0;gn<n;gn++)Nt[gn]=0,pn[gn]=0,rn[gn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Nt,enabledAttributes:pn,attributeDivisors:rn,object:$e,attributes:{},index:null}}function ve(){const $e=u.newAttributes;for(let Nt=0,pn=$e.length;Nt<pn;Nt++)$e[Nt]=0}function ae($e){Z($e,0)}function Z($e,Nt){const rn=u.enabledAttributes,gn=u.attributeDivisors;u.newAttributes[$e]=1,0===rn[$e]&&(c.enableVertexAttribArray($e),rn[$e]=1),gn[$e]!==Nt&&(c.vertexAttribDivisor($e,Nt),gn[$e]=Nt)}function Ue(){const $e=u.newAttributes,Nt=u.enabledAttributes;for(let pn=0,rn=Nt.length;pn<rn;pn++)Nt[pn]!==$e[pn]&&(c.disableVertexAttribArray(pn),Nt[pn]=0)}function Le($e,Nt,pn,rn,gn,kn,_n){!0===_n?c.vertexAttribIPointer($e,Nt,pn,gn,kn):c.vertexAttribPointer($e,Nt,pn,rn,gn,kn)}function bt(){tt(),p=!0,u!==a&&(u=a,E(u.object))}function tt(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:function v($e,Nt,pn,rn,gn){let kn=!1;const _n=function B($e,Nt,pn){const rn=!0===pn.wireframe;let gn=s[$e.id];void 0===gn&&(gn={},s[$e.id]=gn);let kn=gn[Nt.id];void 0===kn&&(kn={},gn[Nt.id]=kn);let _n=kn[rn];return void 0===_n&&(_n=U(function b(){return c.createVertexArray()}()),kn[rn]=_n),_n}(rn,pn,Nt);u!==_n&&(u=_n,E(u.object)),kn=function $($e,Nt,pn,rn){const gn=u.attributes,kn=Nt.attributes;let _n=0;const ti=pn.getAttributes();for(const wn in ti)if(ti[wn].location>=0){const Gi=gn[wn];let _i=kn[wn];if(void 0===_i&&("instanceMatrix"===wn&&$e.instanceMatrix&&(_i=$e.instanceMatrix),"instanceColor"===wn&&$e.instanceColor&&(_i=$e.instanceColor)),void 0===Gi||Gi.attribute!==_i||_i&&Gi.data!==_i.data)return!0;_n++}return u.attributesNum!==_n||u.index!==rn}($e,rn,pn,gn),kn&&function re($e,Nt,pn,rn){const gn={},kn=Nt.attributes;let _n=0;const ti=pn.getAttributes();for(const wn in ti)if(ti[wn].location>=0){let Gi=kn[wn];void 0===Gi&&("instanceMatrix"===wn&&$e.instanceMatrix&&(Gi=$e.instanceMatrix),"instanceColor"===wn&&$e.instanceColor&&(Gi=$e.instanceColor));const _i={};_i.attribute=Gi,Gi&&Gi.data&&(_i.data=Gi.data),gn[wn]=_i,_n++}u.attributes=gn,u.attributesNum=_n,u.index=rn}($e,rn,pn,gn),null!==gn&&e.update(gn,c.ELEMENT_ARRAY_BUFFER),(kn||p)&&(p=!1,function Pe($e,Nt,pn,rn){ve();const gn=rn.attributes,kn=pn.getAttributes(),_n=Nt.defaultAttributeValues;for(const ti in kn){const wn=kn[ti];if(wn.location>=0){let Ci=gn[ti];if(void 0===Ci&&("instanceMatrix"===ti&&$e.instanceMatrix&&(Ci=$e.instanceMatrix),"instanceColor"===ti&&$e.instanceColor&&(Ci=$e.instanceColor)),void 0!==Ci){const Gi=Ci.normalized,_i=Ci.itemSize,ps=e.get(Ci);if(void 0===ps)continue;const Eo=ps.buffer,En=ps.type,ci=ps.bytesPerElement,ji=En===c.INT||En===c.UNSIGNED_INT||Ci.gpuType===to;if(Ci.isInterleavedBufferAttribute){const gi=Ci.data,Sr=gi.stride,Xr=Ci.offset;if(gi.isInstancedInterleavedBuffer){for(let Jr=0;Jr<wn.locationSize;Jr++)Z(wn.location+Jr,gi.meshPerAttribute);!0!==$e.isInstancedMesh&&void 0===rn._maxInstanceCount&&(rn._maxInstanceCount=gi.meshPerAttribute*gi.count)}else for(let Jr=0;Jr<wn.locationSize;Jr++)ae(wn.location+Jr);c.bindBuffer(c.ARRAY_BUFFER,Eo);for(let Jr=0;Jr<wn.locationSize;Jr++)Le(wn.location+Jr,_i/wn.locationSize,En,Gi,Sr*ci,(Xr+_i/wn.locationSize*Jr)*ci,ji)}else{if(Ci.isInstancedBufferAttribute){for(let gi=0;gi<wn.locationSize;gi++)Z(wn.location+gi,Ci.meshPerAttribute);!0!==$e.isInstancedMesh&&void 0===rn._maxInstanceCount&&(rn._maxInstanceCount=Ci.meshPerAttribute*Ci.count)}else for(let gi=0;gi<wn.locationSize;gi++)ae(wn.location+gi);c.bindBuffer(c.ARRAY_BUFFER,Eo);for(let gi=0;gi<wn.locationSize;gi++)Le(wn.location+gi,_i/wn.locationSize,En,Gi,_i*ci,_i/wn.locationSize*gi*ci,ji)}}else if(void 0!==_n){const Gi=_n[ti];if(void 0!==Gi)switch(Gi.length){case 2:c.vertexAttrib2fv(wn.location,Gi);break;case 3:c.vertexAttrib3fv(wn.location,Gi);break;case 4:c.vertexAttrib4fv(wn.location,Gi);break;default:c.vertexAttrib1fv(wn.location,Gi)}}}}Ue()}($e,Nt,pn,rn),null!==gn&&c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,e.get(gn).buffer))},reset:bt,resetDefaultState:tt,dispose:function Ft(){bt();for(const $e in s){const Nt=s[$e];for(const pn in Nt){const rn=Nt[pn];for(const gn in rn)R(rn[gn].object),delete rn[gn];delete Nt[pn]}delete s[$e]}},releaseStatesOfGeometry:function dt($e){if(void 0===s[$e.id])return;const Nt=s[$e.id];for(const pn in Nt){const rn=Nt[pn];for(const gn in rn)R(rn[gn].object),delete rn[gn];delete Nt[pn]}delete s[$e.id]},releaseStatesOfProgram:function gt($e){for(const Nt in s){const pn=s[Nt];if(void 0===pn[$e.id])continue;const rn=pn[$e.id];for(const gn in rn)R(rn[gn].object),delete rn[gn];delete pn[$e.id]}},initAttributes:ve,enableAttribute:ae,disableUnusedAttributes:Ue}}function Be(c,e,n){let s;function p(E,R,B){0!==B&&(c.drawArraysInstanced(s,E,R,B),n.update(R,s,B))}this.setMode=function a(E){s=E},this.render=function u(E,R){c.drawArrays(s,E,R),n.update(R,s,1)},this.renderInstances=p,this.renderMultiDraw=function v(E,R,B){if(0===B)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(s,E,0,R,0,B);let $=0;for(let re=0;re<B;re++)$+=R[re];n.update($,s,1)},this.renderMultiDrawInstances=function b(E,R,B,U){if(0===B)return;const $=e.get("WEBGL_multi_draw");if(null===$)for(let re=0;re<E.length;re++)p(E[re],R[re],U[re]);else{$.multiDrawArraysInstancedWEBGL(s,E,0,R,0,U,0,B);let re=0;for(let ve=0;ve<B;ve++)re+=R[ve]*U[ve];n.update(re,s,1)}}}function wt(c,e,n,s){let a;function b(gt){if("highp"===gt){if(c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_FLOAT).precision>0&&c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT).precision>0)return"highp";gt="mediump"}return"mediump"===gt&&c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_FLOAT).precision>0&&c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let E=void 0!==n.precision?n.precision:"highp";const R=b(E);R!==E&&(console.warn("THREE.WebGLRenderer:",E,"not supported, using",R,"instead."),E=R);const B=!0===n.logarithmicDepthBuffer,U=!0===n.reverseDepthBuffer&&e.has("EXT_clip_control"),$=c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS),re=c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function u(){if(void 0!==a)return a;if(!0===e.has("EXT_texture_filter_anisotropic")){const gt=e.get("EXT_texture_filter_anisotropic");a=c.getParameter(gt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a},getMaxPrecision:b,textureFormatReadable:function p(gt){return!(gt!==ht&&s.convert(gt)!==c.getParameter(c.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function v(gt){const bt=gt===lo&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(gt!==ao&&s.convert(gt)!==c.getParameter(c.IMPLEMENTATION_COLOR_READ_TYPE)&&gt!==Fs&&!bt)},precision:E,logarithmicDepthBuffer:B,reverseDepthBuffer:U,maxTextures:$,maxVertexTextures:re,maxTextureSize:c.getParameter(c.MAX_TEXTURE_SIZE),maxCubemapSize:c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:c.getParameter(c.MAX_VERTEX_ATTRIBS),maxVertexUniforms:c.getParameter(c.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:c.getParameter(c.MAX_VARYING_VECTORS),maxFragmentUniforms:c.getParameter(c.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:re>0,maxSamples:c.getParameter(c.MAX_SAMPLES)}}function Vt(c){const e=this;let n=null,s=0,a=!1,u=!1;const p=new xu,v=new ir,b={value:null,needsUpdate:!1};function R(B,U,$,re){const ve=null!==B?B.length:0;let ae=null;if(0!==ve){if(ae=b.value,!0!==re||null===ae){const Z=$+4*ve,Ue=U.matrixWorldInverse;v.getNormalMatrix(Ue),(null===ae||ae.length<Z)&&(ae=new Float32Array(Z));for(let Le=0,Pe=$;Le!==ve;++Le,Pe+=4)p.copy(B[Le]).applyMatrix4(Ue,v),p.normal.toArray(ae,Pe),ae[Pe+3]=p.constant}b.value=ae,b.needsUpdate=!0}return e.numPlanes=ve,e.numIntersection=0,ae}this.uniform=b,this.numPlanes=0,this.numIntersection=0,this.init=function(B,U){const $=0!==B.length||U||0!==s||a;return a=U,s=B.length,$},this.beginShadows=function(){u=!0,R(null)},this.endShadows=function(){u=!1},this.setGlobalState=function(B,U){n=R(B,U,0)},this.setState=function(B,U,$){const re=B.clippingPlanes,ve=B.clipIntersection,ae=B.clipShadows,Z=c.get(B);if(!a||null===re||0===re.length||u&&!ae)u?R(null):function E(){b.value!==n&&(b.value=n,b.needsUpdate=s>0),e.numPlanes=s,e.numIntersection=0}();else{const Ue=u?0:s,Le=4*Ue;let Pe=Z.clippingState||null;b.value=Pe,Pe=R(re,U,Le,$);for(let Ft=0;Ft!==Le;++Ft)Pe[Ft]=n[Ft];Z.clippingState=Pe,this.numIntersection=ve?this.numPlanes:0,this.numPlanes+=Ue}}}function nn(c){let e=new WeakMap;function n(p,v){return 303===v?p.mapping=rt:304===v&&(p.mapping=xt),p}function a(p){const v=p.target;v.removeEventListener("dispose",a);const b=e.get(v);void 0!==b&&(e.delete(v),b.dispose())}return{get:function s(p){if(p&&p.isTexture){const v=p.mapping;if(303===v||304===v){if(e.has(p))return n(e.get(p).texture,p.mapping);{const b=p.image;if(b&&b.height>0){const E=new Qu(b.height);return E.fromEquirectangularTexture(c,p),e.set(p,E),p.addEventListener("dispose",a),n(E.texture,p.mapping)}return null}}}return p},dispose:function u(){e=new WeakMap}}}class ln extends yc{constructor(e=-1,n=1,s=1,a=-1,u=.1,p=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=s,this.bottom=a,this.near=u,this.far=p,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,n,s,a,u,p){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=s,this.view.offsetY=a,this.view.width=u,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let u=s-e,p=s+e,v=a+n,b=a-n;if(null!==this.view&&this.view.enabled){const E=(this.right-this.left)/this.view.fullWidth/this.zoom,R=(this.top-this.bottom)/this.view.fullHeight/this.zoom;u+=E*this.view.offsetX,p=u+E*this.view.width,v-=R*this.view.offsetY,b=v-R*this.view.height}this.projectionMatrix.makeOrthographic(u,p,v,b,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,null!==this.view&&(n.object.view=Object.assign({},this.view)),n}}const ai=[.125,.215,.35,.446,.526,.582],is=new ln,Ar=new ki;let ls=null,os=0,gs=0,Do=!1;const Zr=(1+Math.sqrt(5))/2,vs=1/Zr,oo=[new lt(-Zr,vs,0),new lt(Zr,vs,0),new lt(-vs,0,Zr),new lt(vs,0,Zr),new lt(0,Zr,-vs),new lt(0,Zr,vs),new lt(-1,1,-1),new lt(1,1,-1),new lt(-1,1,1),new lt(1,1,1)];class Ro{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,s=.1,a=100){ls=this._renderer.getRenderTarget(),os=this._renderer.getActiveCubeFace(),gs=this._renderer.getActiveMipmapLevel(),Do=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,s,a,u),n>0&&this._blur(u,0,0,n),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Ta(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=xc(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ls,os,gs),this._renderer.xr.enabled=Do,e.scissorTest=!1,la(e,0,0,e.width,e.height)}_fromTexture(e,n){this._setSize(e.mapping===rt||e.mapping===xt?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),ls=this._renderer.getRenderTarget(),os=this._renderer.getActiveCubeFace(),gs=this._renderer.getActiveMipmapLevel(),Do=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const s=n||this._allocateTargets();return this._textureToCubeUV(e,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,s={magFilter:yi,minFilter:yi,generateMipmaps:!1,type:lo,format:ht,colorSpace:ia,depthBuffer:!1},a=Ca(e,n,s);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Ca(e,n,s);const{_lodMax:u}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function No(c){const e=[],n=[],s=[];let a=c;const u=c-4+1+ai.length;for(let p=0;p<u;p++){const v=Math.pow(2,a);n.push(v);let b=1/v;p>c-4?b=ai[p-c+4-1]:0===p&&(b=0),s.push(b);const E=1/(v-2),R=-E,B=1+E,U=[R,R,B,R,B,B,R,R,B,B,R,B],$=6,re=6,ve=3,ae=2,Z=1,Ue=new Float32Array(ve*re*$),Le=new Float32Array(ae*re*$),Pe=new Float32Array(Z*re*$);for(let dt=0;dt<$;dt++){const gt=dt%3*2/3-1,bt=dt>2?0:-1;Ue.set([gt,bt,0,gt+2/3,bt,0,gt+2/3,bt+1,0,gt,bt,0,gt+2/3,bt+1,0,gt,bt+1,0],ve*re*dt),Le.set(U,ae*re*dt),Pe.set([dt,dt,dt,dt,dt,dt],Z*re*dt)}const Ft=new bs;Ft.setAttribute("position",new fs(Ue,ve)),Ft.setAttribute("uv",new fs(Le,ae)),Ft.setAttribute("faceIndex",new fs(Pe,Z)),e.push(Ft),a>4&&a--}return{lodPlanes:e,sizeLods:n,sigmas:s}}(u)),this._blurMaterial=function pl(c,e,n){const s=new Float32Array(20),a=new lt(0,1,0);return new Uo({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${c}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(u,e,n)}return a}_compileMaterial(e){const n=new so(this._lodPlanes[0],e);this._renderer.compile(n,is)}_sceneToCubeUV(e,n,s,a){const v=new aa(90,1,n,s),b=[1,-1,1,1,1,1],E=[1,1,1,-1,-1,-1],R=this._renderer,B=R.autoClear,U=R.toneMapping;R.getClearColor(Ar),R.toneMapping=qi,R.autoClear=!1;const $=new ju({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),re=new so(new cu,$);let ve=!1;const ae=e.background;ae?ae.isColor&&($.color.copy(ae),e.background=null,ve=!0):($.color.copy(Ar),ve=!0);for(let Z=0;Z<6;Z++){const Ue=Z%3;0===Ue?(v.up.set(0,b[Z],0),v.lookAt(E[Z],0,0)):1===Ue?(v.up.set(0,0,b[Z]),v.lookAt(0,E[Z],0)):(v.up.set(0,b[Z],0),v.lookAt(0,0,E[Z]));const Le=this._cubeSize;la(a,Ue*Le,Z>2?Le:0,Le,Le),R.setRenderTarget(a),ve&&R.render(re,v),R.render(e,v)}re.geometry.dispose(),re.material.dispose(),R.toneMapping=U,R.autoClear=B,e.background=ae}_textureToCubeUV(e,n){const s=this._renderer,a=e.mapping===rt||e.mapping===xt;a?(null===this._cubemapMaterial&&(this._cubemapMaterial=Ta()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=xc());const u=a?this._cubemapMaterial:this._equirectMaterial,p=new so(this._lodPlanes[0],u);u.uniforms.envMap.value=e;const b=this._cubeSize;la(n,0,0,3*b,2*b),s.setRenderTarget(n),s.render(p,is)}_applyPMREM(e){const n=this._renderer,s=n.autoClear;n.autoClear=!1;const a=this._lodPlanes.length;for(let u=1;u<a;u++){const p=Math.sqrt(this._sigmas[u]*this._sigmas[u]-this._sigmas[u-1]*this._sigmas[u-1]);this._blur(e,u-1,u,p,oo[(a-u-1)%oo.length])}n.autoClear=s}_blur(e,n,s,a,u){const p=this._pingPongRenderTarget;this._halfBlur(e,p,n,s,a,"latitudinal",u),this._halfBlur(p,e,s,s,a,"longitudinal",u)}_halfBlur(e,n,s,a,u,p,v){const b=this._renderer,E=this._blurMaterial;"latitudinal"!==p&&"longitudinal"!==p&&console.error("blur direction must be either latitudinal or longitudinal!");const B=new so(this._lodPlanes[a],E),U=E.uniforms,$=this._sizeLods[s]-1,re=isFinite(u)?Math.PI/(2*$):2*Math.PI/39,ve=u/re,ae=isFinite(u)?1+Math.floor(3*ve):20;ae>20&&console.warn(`sigmaRadians, ${u}, is too large and will clip, as it requested ${ae} samples when the maximum is set to 20`);const Z=[];let Ue=0;for(let gt=0;gt<20;++gt){const bt=gt/ve,tt=Math.exp(-bt*bt/2);Z.push(tt),0===gt?Ue+=tt:gt<ae&&(Ue+=2*tt)}for(let gt=0;gt<Z.length;gt++)Z[gt]=Z[gt]/Ue;U.envMap.value=e.texture,U.samples.value=ae,U.weights.value=Z,U.latitudinal.value="latitudinal"===p,v&&(U.poleAxis.value=v);const{_lodMax:Le}=this;U.dTheta.value=re,U.mipInt.value=Le-s;const Pe=this._sizeLods[a];la(n,3*Pe*(a>Le-4?a-Le+4:0),4*(this._cubeSize-Pe),3*Pe,2*Pe),b.setRenderTarget(n),b.render(B,is)}}function Ca(c,e,n){const s=new Dr(c,e,n);return s.texture.mapping=Un,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function la(c,e,n,s,a){c.viewport.set(e,n,s,a),c.scissor.set(e,n,s,a)}function xc(){return new Uo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Ta(){return new Uo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Yc(c){let e=new WeakMap,n=null;function u(v){const b=v.target;b.removeEventListener("dispose",u);const E=e.get(b);void 0!==E&&(e.delete(b),E.dispose())}return{get:function s(v){if(v&&v.isTexture){const b=v.mapping,E=303===b||304===b,R=b===rt||b===xt;if(E||R){let B=e.get(v);if(v.isRenderTargetTexture&&v.pmremVersion!==(void 0!==B?B.texture.pmremVersion:0))return null===n&&(n=new Ro(c)),B=E?n.fromEquirectangular(v,B):n.fromCubemap(v,B),B.texture.pmremVersion=v.pmremVersion,e.set(v,B),B.texture;if(void 0!==B)return B.texture;{const $=v.image;return E&&$&&$.height>0||R&&$&&function a(v){let b=0;for(let R=0;R<6;R++)void 0!==v[R]&&b++;return 6===b}($)?(null===n&&(n=new Ro(c)),B=E?n.fromEquirectangular(v):n.fromCubemap(v),B.texture.pmremVersion=v.pmremVersion,e.set(v,B),v.addEventListener("dispose",u),B.texture):null}}}return v},dispose:function p(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function ml(c){const e={};function n(s){if(void 0!==e[s])return e[s];let a;switch(s){case"WEBGL_depth_texture":a=c.getExtension("WEBGL_depth_texture")||c.getExtension("MOZ_WEBGL_depth_texture")||c.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=c.getExtension("WEBGL_compressed_texture_s3tc")||c.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=c.getExtension("WEBGL_compressed_texture_pvrtc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=c.getExtension(s)}return e[s]=a,a}return{has:function(s){return null!==n(s)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(s){const a=n(s);return null===a&&De("THREE.WebGLRenderer: "+s+" extension not supported."),a}}}function al(c,e,n,s){const a={},u=new WeakMap;function p(B){const U=B.target;null!==U.index&&e.remove(U.index);for(const re in U.attributes)e.remove(U.attributes[re]);for(const re in U.morphAttributes){const ve=U.morphAttributes[re];for(let ae=0,Z=ve.length;ae<Z;ae++)e.remove(ve[ae])}U.removeEventListener("dispose",p),delete a[U.id];const $=u.get(U);$&&(e.remove($),u.delete(U)),s.releaseStatesOfGeometry(U),!0===U.isInstancedBufferGeometry&&delete U._maxInstanceCount,n.memory.geometries--}function E(B){const U=[],$=B.index,re=B.attributes.position;let ve=0;if(null!==$){const Ue=$.array;ve=$.version;for(let Le=0,Pe=Ue.length;Le<Pe;Le+=3){const Ft=Ue[Le+0],dt=Ue[Le+1],gt=Ue[Le+2];U.push(Ft,dt,dt,gt,gt,Ft)}}else{if(void 0===re)return;ve=re.version;for(let Le=0,Pe=re.array.length/3-1;Le<Pe;Le+=3){const Ft=Le+0,dt=Le+1,gt=Le+2;U.push(Ft,dt,dt,gt,gt,Ft)}}const ae=new(Ka(U)?mp:Cd)(U,1);ae.version=ve;const Z=u.get(B);Z&&e.remove(Z),u.set(B,ae)}return{get:function v(B,U){return!0===a[U.id]||(U.addEventListener("dispose",p),a[U.id]=!0,n.memory.geometries++),U},update:function b(B){const U=B.attributes;for(const re in U)e.update(U[re],c.ARRAY_BUFFER);const $=B.morphAttributes;for(const re in $){const ve=$[re];for(let ae=0,Z=ve.length;ae<Z;ae++)e.update(ve[ae],c.ARRAY_BUFFER)}},getWireframeAttribute:function R(B){const U=u.get(B);if(U){const $=B.index;null!==$&&U.version<$.version&&E(B)}else E(B);return u.get(B)}}}function rd(c,e,n){let s,u,p;function E(U,$,re){0!==re&&(c.drawElementsInstanced(s,$,u,U*p,re),n.update($,s,re))}this.setMode=function a(U){s=U},this.setIndex=function v(U){u=U.type,p=U.bytesPerElement},this.render=function b(U,$){c.drawElements(s,$,u,U*p),n.update($,s,1)},this.renderInstances=E,this.renderMultiDraw=function R(U,$,re){if(0===re)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(s,$,0,u,U,0,re);let ae=0;for(let Z=0;Z<re;Z++)ae+=$[Z];n.update(ae,s,1)},this.renderMultiDrawInstances=function B(U,$,re,ve){if(0===re)return;const ae=e.get("WEBGL_multi_draw");if(null===ae)for(let Z=0;Z<U.length;Z++)E(U[Z]/p,$[Z],ve[Z]);else{ae.multiDrawElementsInstancedWEBGL(s,$,0,u,U,0,ve,0,re);let Z=0;for(let Ue=0;Ue<re;Ue++)Z+=$[Ue]*ve[Ue];n.update(Z,s,1)}}}function qc(c){const n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function a(){n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function s(u,p,v){switch(n.calls++,p){case c.TRIANGLES:n.triangles+=v*(u/3);break;case c.LINES:n.lines+=v*(u/2);break;case c.LINE_STRIP:n.lines+=v*(u-1);break;case c.LINE_LOOP:n.lines+=v*u;break;case c.POINTS:n.points+=v*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",p)}}}}function fu(c,e,n){const s=new WeakMap,a=new Kt;return{update:function u(p,v,b){const E=p.morphTargetInfluences,R=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,B=void 0!==R?R.length:0;let U=s.get(v);if(void 0===U||U.count!==B){let tt=function(){gt.dispose(),s.delete(v),v.removeEventListener("dispose",tt)};void 0!==U&&U.texture.dispose();const $=void 0!==v.morphAttributes.position,re=void 0!==v.morphAttributes.normal,ve=void 0!==v.morphAttributes.color,ae=v.morphAttributes.position||[],Z=v.morphAttributes.normal||[],Ue=v.morphAttributes.color||[];let Le=0;!0===$&&(Le=1),!0===re&&(Le=2),!0===ve&&(Le=3);let Pe=v.attributes.position.count*Le,Ft=1;Pe>e.maxTextureSize&&(Ft=Math.ceil(Pe/e.maxTextureSize),Pe=e.maxTextureSize);const dt=new Float32Array(Pe*Ft*4*B),gt=new es(dt,Pe,Ft,B);gt.type=Fs,gt.needsUpdate=!0;const bt=4*Le;for(let $e=0;$e<B;$e++){const Nt=ae[$e],pn=Z[$e],rn=Ue[$e],gn=Pe*Ft*4*$e;for(let kn=0;kn<Nt.count;kn++){const _n=kn*bt;!0===$&&(a.fromBufferAttribute(Nt,kn),dt[gn+_n+0]=a.x,dt[gn+_n+1]=a.y,dt[gn+_n+2]=a.z,dt[gn+_n+3]=0),!0===re&&(a.fromBufferAttribute(pn,kn),dt[gn+_n+4]=a.x,dt[gn+_n+5]=a.y,dt[gn+_n+6]=a.z,dt[gn+_n+7]=0),!0===ve&&(a.fromBufferAttribute(rn,kn),dt[gn+_n+8]=a.x,dt[gn+_n+9]=a.y,dt[gn+_n+10]=a.z,dt[gn+_n+11]=4===rn.itemSize?a.w:1)}}U={count:B,texture:gt,size:new yn(Pe,Ft)},s.set(v,U),v.addEventListener("dispose",tt)}if(!0===p.isInstancedMesh&&null!==p.morphTexture)b.getUniforms().setValue(c,"morphTexture",p.morphTexture,n);else{let $=0;for(let ve=0;ve<E.length;ve++)$+=E[ve];const re=v.morphTargetsRelative?1:1-$;b.getUniforms().setValue(c,"morphTargetBaseInfluence",re),b.getUniforms().setValue(c,"morphTargetInfluences",E)}b.getUniforms().setValue(c,"morphTargetsTexture",U.texture,n),b.getUniforms().setValue(c,"morphTargetsTextureSize",U.size)}}}function sd(c,e,n,s){let a=new WeakMap;function v(b){const E=b.target;E.removeEventListener("dispose",v),n.remove(E.instanceMatrix),null!==E.instanceColor&&n.remove(E.instanceColor)}return{update:function u(b){const E=s.render.frame,B=e.get(b,b.geometry);if(a.get(B)!==E&&(e.update(B),a.set(B,E)),b.isInstancedMesh&&(!1===b.hasEventListener("dispose",v)&&b.addEventListener("dispose",v),a.get(b)!==E&&(n.update(b.instanceMatrix,c.ARRAY_BUFFER),null!==b.instanceColor&&n.update(b.instanceColor,c.ARRAY_BUFFER),a.set(b,E))),b.isSkinnedMesh){const U=b.skeleton;a.get(U)!==E&&(U.update(),a.set(U,E))}return B},dispose:function p(){a=new WeakMap}}}class Ec extends Xt{constructor(e,n,s,a,u,p,v,b,E,R=zn){if(R!==zn&&R!==Kn)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&R===zn&&(s=Os),void 0===s&&R===Kn&&(s=O),super(null,a,u,p,v,b,R,s,E),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=void 0!==v?v:kr,this.minFilter=void 0!==b?b:kr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return null!==this.compareFunction&&(n.compareFunction=this.compareFunction),n}}const Mu=new Xt,Zc=new Ec(1,1),ic=new es,Ld=new ar,wu=new bu,rc=[],Dh=[],If=new Float32Array(16),Ah=new Float32Array(9),Gp=new Float32Array(4);function Jc(c,e,n){const s=c[0];if(s<=0||s>0)return c;const a=e*n;let u=rc[a];if(void 0===u&&(u=new Float32Array(a),rc[a]=u),0!==e){s.toArray(u,0);for(let p=1,v=0;p!==e;++p)v+=n,c[p].toArray(u,v)}return u}function va(c,e){if(c.length!==e.length)return!1;for(let n=0,s=c.length;n<s;n++)if(c[n]!==e[n])return!1;return!0}function Da(c,e){for(let n=0,s=e.length;n<s;n++)c[n]=e[n]}function kd(c,e){let n=Dh[e];void 0===n&&(n=new Int32Array(e),Dh[e]=n);for(let s=0;s!==e;++s)n[s]=c.allocateTextureUnit();return n}function od(c,e){const n=this.cache;n[0]!==e&&(c.uniform1f(this.addr,e),n[0]=e)}function Wp(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y)&&(c.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(va(n,e))return;c.uniform2fv(this.addr,e),Da(n,e)}}function Rf(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(c.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(c.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(va(n,e))return;c.uniform3fv(this.addr,e),Da(n,e)}}function Cu(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(c.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(va(n,e))return;c.uniform4fv(this.addr,e),Da(n,e)}}function Nf(c,e){const n=this.cache,s=e.elements;if(void 0===s){if(va(n,e))return;c.uniformMatrix2fv(this.addr,!1,e),Da(n,e)}else{if(va(n,s))return;Gp.set(s),c.uniformMatrix2fv(this.addr,!1,Gp),Da(n,s)}}function Om(c,e){const n=this.cache,s=e.elements;if(void 0===s){if(va(n,e))return;c.uniformMatrix3fv(this.addr,!1,e),Da(n,e)}else{if(va(n,s))return;Ah.set(s),c.uniformMatrix3fv(this.addr,!1,Ah),Da(n,s)}}function ad(c,e){const n=this.cache,s=e.elements;if(void 0===s){if(va(n,e))return;c.uniformMatrix4fv(this.addr,!1,e),Da(n,e)}else{if(va(n,s))return;If.set(s),c.uniformMatrix4fv(this.addr,!1,If),Da(n,s)}}function Pf(c,e){const n=this.cache;n[0]!==e&&(c.uniform1i(this.addr,e),n[0]=e)}function Bd(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y)&&(c.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(va(n,e))return;c.uniform2iv(this.addr,e),Da(n,e)}}function Ih(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(c.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(va(n,e))return;c.uniform3iv(this.addr,e),Da(n,e)}}function jp(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(c.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(va(n,e))return;c.uniform4iv(this.addr,e),Da(n,e)}}function Of(c,e){const n=this.cache;n[0]!==e&&(c.uniform1ui(this.addr,e),n[0]=e)}function Fm(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y)&&(c.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(va(n,e))return;c.uniform2uiv(this.addr,e),Da(n,e)}}function $p(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(c.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(va(n,e))return;c.uniform3uiv(this.addr,e),Da(n,e)}}function Xp(c,e){const n=this.cache;if(void 0!==e.x)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(c.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(va(n,e))return;c.uniform4uiv(this.addr,e),Da(n,e)}}function $v(c,e,n){const s=this.cache,a=n.allocateTextureUnit();let u;s[0]!==a&&(c.uniform1i(this.addr,a),s[0]=a),this.type===c.SAMPLER_2D_SHADOW?(Zc.compareFunction=515,u=Zc):u=Mu,n.setTexture2D(e||u,a)}function Xv(c,e,n){const s=this.cache,a=n.allocateTextureUnit();s[0]!==a&&(c.uniform1i(this.addr,a),s[0]=a),n.setTexture3D(e||Ld,a)}function Kv(c,e,n){const s=this.cache,a=n.allocateTextureUnit();s[0]!==a&&(c.uniform1i(this.addr,a),s[0]=a),n.setTextureCube(e||wu,a)}function Kp(c,e,n){const s=this.cache,a=n.allocateTextureUnit();s[0]!==a&&(c.uniform1i(this.addr,a),s[0]=a),n.setTexture2DArray(e||ic,a)}function Rh(c,e){c.uniform1fv(this.addr,e)}function a1(c,e){const n=Jc(e,this.size,2);c.uniform2fv(this.addr,n)}function l1(c,e){const n=Jc(e,this.size,3);c.uniform3fv(this.addr,n)}function $x(c,e){const n=Jc(e,this.size,4);c.uniform4fv(this.addr,n)}function Qp(c,e){const n=Jc(e,this.size,4);c.uniformMatrix2fv(this.addr,!1,n)}function km(c,e){const n=Jc(e,this.size,9);c.uniformMatrix3fv(this.addr,!1,n)}function Qv(c,e){const n=Jc(e,this.size,16);c.uniformMatrix4fv(this.addr,!1,n)}function Yv(c,e){c.uniform1iv(this.addr,e)}function qv(c,e){c.uniform2iv(this.addr,e)}function Ud(c,e){c.uniform3iv(this.addr,e)}function c1(c,e){c.uniform4iv(this.addr,e)}function u1(c,e){c.uniform1uiv(this.addr,e)}function d1(c,e){c.uniform2uiv(this.addr,e)}function h1(c,e){c.uniform3uiv(this.addr,e)}function f1(c,e){c.uniform4uiv(this.addr,e)}function Tu(c,e,n){const s=this.cache,a=e.length,u=kd(n,a);va(s,u)||(c.uniform1iv(this.addr,u),Da(s,u));for(let p=0;p!==a;++p)n.setTexture2D(e[p]||Mu,u[p])}function Nh(c,e,n){const s=this.cache,a=e.length,u=kd(n,a);va(s,u)||(c.uniform1iv(this.addr,u),Da(s,u));for(let p=0;p!==a;++p)n.setTexture3D(e[p]||Ld,u[p])}function p1(c,e,n){const s=this.cache,a=e.length,u=kd(n,a);va(s,u)||(c.uniform1iv(this.addr,u),Da(s,u));for(let p=0;p!==a;++p)n.setTextureCube(e[p]||wu,u[p])}function m1(c,e,n){const s=this.cache,a=e.length,u=kd(n,a);va(s,u)||(c.uniform1iv(this.addr,u),Da(s,u));for(let p=0;p!==a;++p)n.setTexture2DArray(e[p]||ic,u[p])}class v1{constructor(e,n,s){this.id=e,this.addr=s,this.cache=[],this.type=n.type,this.setValue=function Lm(c){switch(c){case 5126:return od;case 35664:return Wp;case 35665:return Rf;case 35666:return Cu;case 35674:return Nf;case 35675:return Om;case 35676:return ad;case 5124:case 35670:return Pf;case 35667:case 35671:return Bd;case 35668:case 35672:return Ih;case 35669:case 35673:return jp;case 5125:return Of;case 36294:return Fm;case 36295:return $p;case 36296:return Xp;case 35678:case 36198:case 36298:case 36306:case 35682:return $v;case 35679:case 36299:case 36307:return Xv;case 35680:case 36300:case 36308:case 36293:return Kv;case 36289:case 36303:case 36311:case 36292:return Kp}}(n.type)}}class _1{constructor(e,n,s){this.id=e,this.addr=s,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=function g1(c){switch(c){case 5126:return Rh;case 35664:return a1;case 35665:return l1;case 35666:return $x;case 35674:return Qp;case 35675:return km;case 35676:return Qv;case 5124:case 35670:return Yv;case 35667:case 35671:return qv;case 35668:case 35672:return Ud;case 35669:case 35673:return c1;case 5125:return u1;case 36294:return d1;case 36295:return h1;case 36296:return f1;case 35678:case 36198:case 36298:case 36306:case 35682:return Tu;case 35679:case 36299:case 36307:return Nh;case 35680:case 36300:case 36308:case 36293:return p1;case 36289:case 36303:case 36311:case 36292:return m1}}(n.type)}}class y1{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,s){const a=this.seq;for(let u=0,p=a.length;u!==p;++u){const v=a[u];v.setValue(e,n[v.id],s)}}}const Yp=/(\w+)(\])?(\[|\.)?/g;function Zv(c,e){c.seq.push(e),c.map[e.id]=e}function b1(c,e,n){const s=c.name,a=s.length;for(Yp.lastIndex=0;;){const u=Yp.exec(s);let v=u[1];const E=u[3];if("]"===u[2]&&(v|=0),void 0===E||"["===E&&Yp.lastIndex+2===a){Zv(n,void 0===E?new v1(v,c,e):new _1(v,c,e));break}{let B=n.map[v];void 0===B&&(B=new y1(v),Zv(n,B)),n=B}}}class qp{constructor(e,n){this.seq=[],this.map={};const s=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let a=0;a<s;++a){const u=e.getActiveUniform(n,a);b1(u,e.getUniformLocation(n,u.name),this)}}setValue(e,n,s,a){const u=this.map[n];void 0!==u&&u.setValue(e,s,a)}setOptional(e,n,s){const a=n[s];void 0!==a&&this.setValue(e,s,a)}static upload(e,n,s,a){for(let u=0,p=n.length;u!==p;++u){const v=n[u],b=s[v.id];!1!==b.needsUpdate&&v.setValue(e,b.value,a)}}static seqWithValue(e,n){const s=[];for(let a=0,u=e.length;a!==u;++a){const p=e[a];p.id in n&&s.push(p)}return s}}function Jv(c,e,n){const s=c.createShader(e);return c.shaderSource(s,n),c.compileShader(s),s}const Zp=37297;let Du=0;const Bm=new ir;function Um(c,e,n){const s=c.getShaderParameter(e,c.COMPILE_STATUS),a=c.getShaderInfoLog(e).trim();if(s&&""===a)return"";const u=/ERROR: 0:(\d+)/.exec(a);if(u){const p=parseInt(u[1]);return n.toUpperCase()+"\n\n"+a+"\n\n"+function Ff(c,e){const n=c.split("\n"),s=[],a=Math.max(e-6,0),u=Math.min(e+6,n.length);for(let p=a;p<u;p++){const v=p+1;s.push(`${v===e?">":" "} ${v}: ${n[p]}`)}return s.join("\n")}(c.getShaderSource(e),p)}return a}function Xx(c,e){const n=function e_(c){Lt._getMatrix(Bm,Lt.workingColorSpace,c);const e=`mat3( ${Bm.elements.map(n=>n.toFixed(4))} )`;switch(Lt.getTransfer(c)){case ul:return[e,"LinearTransferOETF"];case as:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",c),[e,"LinearTransferOETF"]}}(e);return[`vec4 ${c}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function Kx(c,e){let n;switch(e){case _r:n="Linear";break;case wi:n="Reinhard";break;case Cr:n="Cineon";break;case Wr:n="ACESFilmic";break;case or:n="AgX";break;case Bs:n="Neutral";break;case Lr:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+c+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const Vm=new lt;function Ph(c){return""!==c}function t_(c,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return c.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function n_(c,e){return c.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const x1=/^[ \t]*#include +<([\w\d./]+)>/gm;function Gm(c){return c.replace(x1,i_)}const E1=new Map;function i_(c,e){let n=ss[e];if(void 0===n){const s=E1.get(e);if(void 0===s)throw new Error("Can not resolve #include <"+e+">");n=ss[s],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,s)}return Gm(n)}const r_=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function s_(c){return c.replace(r_,S1)}function S1(c,e,n,s){let a="";for(let u=parseInt(e);u<parseInt(n);u++)a+=s.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return a}function Wm(c){let e=`precision ${c.precision} float;\n\tprecision ${c.precision} int;\n\tprecision ${c.precision} sampler2D;\n\tprecision ${c.precision} samplerCube;\n\tprecision ${c.precision} sampler3D;\n\tprecision ${c.precision} sampler2DArray;\n\tprecision ${c.precision} sampler2DShadow;\n\tprecision ${c.precision} samplerCubeShadow;\n\tprecision ${c.precision} sampler2DArrayShadow;\n\tprecision ${c.precision} isampler2D;\n\tprecision ${c.precision} isampler3D;\n\tprecision ${c.precision} isamplerCube;\n\tprecision ${c.precision} isampler2DArray;\n\tprecision ${c.precision} usampler2D;\n\tprecision ${c.precision} usampler3D;\n\tprecision ${c.precision} usamplerCube;\n\tprecision ${c.precision} usampler2DArray;\n\t`;return"highp"===c.precision?e+="\n#define HIGH_PRECISION":"mediump"===c.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===c.precision&&(e+="\n#define LOW_PRECISION"),e}function a_(c,e,n,s){const a=c.getContext(),u=n.defines;let p=n.vertexShader,v=n.fragmentShader;const b=function Jp(c){let e="SHADOWMAP_TYPE_BASIC";return c.shadowMapType===le?e="SHADOWMAP_TYPE_PCF":c.shadowMapType===x?e="SHADOWMAP_TYPE_PCF_SOFT":c.shadowMapType===C&&(e="SHADOWMAP_TYPE_VSM"),e}(n),E=function o_(c){let e="ENVMAP_TYPE_CUBE";if(c.envMap)switch(c.envMapMode){case rt:case xt:e="ENVMAP_TYPE_CUBE";break;case Un:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),R=function jm(c){let e="ENVMAP_MODE_REFLECTION";return c.envMap&&c.envMapMode===xt&&(e="ENVMAP_MODE_REFRACTION"),e}(n),B=function M1(c){let e="ENVMAP_BLENDING_NONE";if(c.envMap)switch(c.combine){case Pi:e="ENVMAP_BLENDING_MULTIPLY";break;case Ps:e="ENVMAP_BLENDING_MIX";break;case ri:e="ENVMAP_BLENDING_ADD"}return e}(n),U=function Vd(c){const e=c.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,s=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:s,maxMip:n}}(n),$=function zm(c){return[c.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",c.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ph).join("\n")}(n),re=function Qx(c){const e=[];for(const n in c){const s=c[n];!1!==s&&e.push("#define "+n+" "+s)}return e.join("\n")}(u),ve=a.createProgram();let ae,Z,Ue=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(ae=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,re].filter(Ph).join("\n"),ae.length>0&&(ae+="\n"),Z=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,re].filter(Ph).join("\n"),Z.length>0&&(Z+="\n")):(ae=[Wm(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,re,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+R:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+b:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ph).join("\n"),Z=[Wm(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,re,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+E:"",n.envMap?"#define "+R:"",n.envMap?"#define "+B:"",U?"#define CUBEUV_TEXEL_WIDTH "+U.texelWidth:"",U?"#define CUBEUV_TEXEL_HEIGHT "+U.texelHeight:"",U?"#define CUBEUV_MAX_MIP "+U.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+b:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==qi?"#define TONE_MAPPING":"",n.toneMapping!==qi?ss.tonemapping_pars_fragment:"",n.toneMapping!==qi?Kx("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ss.colorspace_pars_fragment,Xx("linearToOutputTexel",n.outputColorSpace),(Lt.getLuminanceCoefficients(Vm),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${Vm.x.toFixed(4)}, ${Vm.y.toFixed(4)}, ${Vm.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ph).join("\n")),p=Gm(p),p=t_(p,n),p=n_(p,n),v=Gm(v),v=t_(v,n),v=n_(v,n),p=s_(p),v=s_(v),!0!==n.isRawShaderMaterial&&(Ue="#version 300 es\n",ae=[$,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+ae,Z=["#define varying in",n.glslVersion===jc?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===jc?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+Z);const Pe=Ue+Z+v,Ft=Jv(a,a.VERTEX_SHADER,Ue+ae+p),dt=Jv(a,a.FRAGMENT_SHADER,Pe);function gt(Nt){if(c.debug.checkShaderErrors){const pn=a.getProgramInfoLog(ve).trim(),rn=a.getShaderInfoLog(Ft).trim(),gn=a.getShaderInfoLog(dt).trim();let kn=!0,_n=!0;if(!1===a.getProgramParameter(ve,a.LINK_STATUS))if(kn=!1,"function"==typeof c.debug.onShaderError)c.debug.onShaderError(a,ve,Ft,dt);else{const ti=Um(a,Ft,"vertex"),wn=Um(a,dt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(ve,a.VALIDATE_STATUS)+"\n\nMaterial Name: "+Nt.name+"\nMaterial Type: "+Nt.type+"\n\nProgram Info Log: "+pn+"\n"+ti+"\n"+wn)}else""!==pn?console.warn("THREE.WebGLProgram: Program Info Log:",pn):(""===rn||""===gn)&&(_n=!1);_n&&(Nt.diagnostics={runnable:kn,programLog:pn,vertexShader:{log:rn,prefix:ae},fragmentShader:{log:gn,prefix:Z}})}a.deleteShader(Ft),a.deleteShader(dt),bt=new qp(a,ve),tt=function Yx(c,e){const n={},s=c.getProgramParameter(e,c.ACTIVE_ATTRIBUTES);for(let a=0;a<s;a++){const u=c.getActiveAttrib(e,a),p=u.name;let v=1;u.type===c.FLOAT_MAT2&&(v=2),u.type===c.FLOAT_MAT3&&(v=3),u.type===c.FLOAT_MAT4&&(v=4),n[p]={type:u.type,location:c.getAttribLocation(e,p),locationSize:v}}return n}(a,ve)}let bt,tt;a.attachShader(ve,Ft),a.attachShader(ve,dt),void 0!==n.index0AttributeName?a.bindAttribLocation(ve,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(ve,0,"position"),a.linkProgram(ve),this.getUniforms=function(){return void 0===bt&&gt(this),bt},this.getAttributes=function(){return void 0===tt&&gt(this),tt};let $e=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===$e&&($e=a.getProgramParameter(ve,Zp)),$e},this.destroy=function(){s.releaseStatesOfProgram(this),a.deleteProgram(ve),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Du++,this.cacheKey=e,this.usedTimes=1,this.program=ve,this.vertexShader=Ft,this.fragmentShader=dt,this}let w1=0;class $m{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const s=e.fragmentShader,a=this._getShaderStage(e.vertexShader),u=this._getShaderStage(s),p=this._getShaderCacheForMaterial(e);return!1===p.has(a)&&(p.add(a),a.usedTimes++),!1===p.has(u)&&(p.add(u),u.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const s of n)s.usedTimes--,0===s.usedTimes&&this.shaderCache.delete(s.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let s=n.get(e);return void 0===s&&(s=new Set,n.set(e,s)),s}_getShaderStage(e){const n=this.shaderCache;let s=n.get(e);return void 0===s&&(s=new Xm(e),n.set(e,s)),s}}class Xm{constructor(e){this.id=w1++,this.code=e,this.usedTimes=0}}function C1(c,e,n,s,a,u,p){const v=new yu,b=new $m,E=new Set,R=[],B=a.logarithmicDepthBuffer,U=a.vertexTextures;let $=a.precision;const re={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function ve(tt){return E.add(tt),0===tt?"uv":`uv${tt}`}return{getParameters:function ae(tt,$e,Nt,pn,rn){const gn=pn.fog,kn=rn.geometry,ti=(tt.isMeshStandardMaterial?n:e).get(tt.envMap||(tt.isMeshStandardMaterial?pn.environment:null)),wn=ti&&ti.mapping===Un?ti.image.height:null,Ci=re[tt.type];null!==tt.precision&&($=a.getMaxPrecision(tt.precision),$!==tt.precision&&console.warn("THREE.WebGLProgram.getParameters:",tt.precision,"not supported, using",$,"instead."));const Gi=kn.morphAttributes.position||kn.morphAttributes.normal||kn.morphAttributes.color,_i=void 0!==Gi?Gi.length:0;let Eo,En,ci,ji,ps=0;if(void 0!==kn.morphAttributes.position&&(ps=1),void 0!==kn.morphAttributes.normal&&(ps=2),void 0!==kn.morphAttributes.color&&(ps=3),Ci){const So=m[Ci];Eo=So.vertexShader,En=So.fragmentShader}else Eo=tt.vertexShader,En=tt.fragmentShader,b.update(tt),ci=b.getVertexShaderID(tt),ji=b.getFragmentShaderID(tt);const gi=c.getRenderTarget(),Sr=c.state.buffers.depth.getReversed(),Xr=!0===rn.isInstancedMesh,Jr=!0===rn.isBatchedMesh,eo=!!tt.map,ni=!!ti,Et=!!tt.aoMap,vr=!!tt.lightMap,jn=!!tt.bumpMap,Bi=!!tt.normalMap,Ei=!!tt.displacementMap,dr=!!tt.emissiveMap,Xi=!!tt.metalnessMap,ft=!!tt.roughnessMap,Qe=tt.anisotropy>0,sn=tt.clearcoat>0,Hn=tt.iridescence>0,Nn=tt.sheen>0,mr=tt.transmission>0,Ti=Qe&&!!tt.anisotropyMap,Wi=sn&&!!tt.clearcoatMap,Ns=sn&&!!tt.clearcoatNormalMap,Xn=sn&&!!tt.clearcoatRoughnessMap,tr=Hn&&!!tt.iridescenceMap,Kr=Hn&&!!tt.iridescenceThicknessMap,Gr=Nn&&!!tt.sheenColorMap,Yi=Nn&&!!tt.sheenRoughnessMap,Gs=!!tt.specularMap,Es=!!tt.specularColorMap,zo=!!tt.specularIntensityMap,Wt=mr&&!!tt.transmissionMap,Ni=mr&&!!tt.thicknessMap,Fn=!!tt.alphaMap,Ss=!!tt.extensions;let ya=qi;tt.toneMapped&&(null===gi||!0===gi.isXRRenderTarget)&&(ya=c.toneMapping);const vl={shaderID:Ci,shaderType:tt.type,shaderName:tt.name,vertexShader:Eo,fragmentShader:En,defines:tt.defines,customVertexShaderID:ci,customFragmentShaderID:ji,isRawShaderMaterial:!0===tt.isRawShaderMaterial,glslVersion:tt.glslVersion,precision:$,batching:Jr,batchingColor:Jr&&null!==rn._colorsTexture,instancing:Xr,instancingColor:Xr&&null!==rn.instanceColor,instancingMorph:Xr&&null!==rn.morphTexture,supportsVertexTextures:U,outputColorSpace:null===gi?c.outputColorSpace:!0===gi.isXRRenderTarget?gi.texture.colorSpace:ia,alphaToCoverage:!!tt.alphaToCoverage,map:eo,matcap:!!tt.matcap,envMap:ni,envMapMode:ni&&ti.mapping,envMapCubeUVHeight:wn,aoMap:Et,lightMap:vr,bumpMap:jn,normalMap:Bi,displacementMap:U&&Ei,emissiveMap:dr,normalMapObjectSpace:Bi&&1===tt.normalMapType,normalMapTangentSpace:Bi&&0===tt.normalMapType,metalnessMap:Xi,roughnessMap:ft,anisotropy:Qe,anisotropyMap:Ti,clearcoat:sn,clearcoatMap:Wi,clearcoatNormalMap:Ns,clearcoatRoughnessMap:Xn,dispersion:tt.dispersion>0,iridescence:Hn,iridescenceMap:tr,iridescenceThicknessMap:Kr,sheen:Nn,sheenColorMap:Gr,sheenRoughnessMap:Yi,specularMap:Gs,specularColorMap:Es,specularIntensityMap:zo,transmission:mr,transmissionMap:Wt,thicknessMap:Ni,gradientMap:!!tt.gradientMap,opaque:!1===tt.transparent&&1===tt.blending&&!1===tt.alphaToCoverage,alphaMap:Fn,alphaTest:tt.alphaTest>0,alphaHash:!!tt.alphaHash,combine:tt.combine,mapUv:eo&&ve(tt.map.channel),aoMapUv:Et&&ve(tt.aoMap.channel),lightMapUv:vr&&ve(tt.lightMap.channel),bumpMapUv:jn&&ve(tt.bumpMap.channel),normalMapUv:Bi&&ve(tt.normalMap.channel),displacementMapUv:Ei&&ve(tt.displacementMap.channel),emissiveMapUv:dr&&ve(tt.emissiveMap.channel),metalnessMapUv:Xi&&ve(tt.metalnessMap.channel),roughnessMapUv:ft&&ve(tt.roughnessMap.channel),anisotropyMapUv:Ti&&ve(tt.anisotropyMap.channel),clearcoatMapUv:Wi&&ve(tt.clearcoatMap.channel),clearcoatNormalMapUv:Ns&&ve(tt.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Xn&&ve(tt.clearcoatRoughnessMap.channel),iridescenceMapUv:tr&&ve(tt.iridescenceMap.channel),iridescenceThicknessMapUv:Kr&&ve(tt.iridescenceThicknessMap.channel),sheenColorMapUv:Gr&&ve(tt.sheenColorMap.channel),sheenRoughnessMapUv:Yi&&ve(tt.sheenRoughnessMap.channel),specularMapUv:Gs&&ve(tt.specularMap.channel),specularColorMapUv:Es&&ve(tt.specularColorMap.channel),specularIntensityMapUv:zo&&ve(tt.specularIntensityMap.channel),transmissionMapUv:Wt&&ve(tt.transmissionMap.channel),thicknessMapUv:Ni&&ve(tt.thicknessMap.channel),alphaMapUv:Fn&&ve(tt.alphaMap.channel),vertexTangents:!!kn.attributes.tangent&&(Bi||Qe),vertexColors:tt.vertexColors,vertexAlphas:!0===tt.vertexColors&&!!kn.attributes.color&&4===kn.attributes.color.itemSize,pointsUvs:!0===rn.isPoints&&!!kn.attributes.uv&&(eo||Fn),fog:!!gn,useFog:!0===tt.fog,fogExp2:!!gn&&gn.isFogExp2,flatShading:!0===tt.flatShading,sizeAttenuation:!0===tt.sizeAttenuation,logarithmicDepthBuffer:B,reverseDepthBuffer:Sr,skinning:!0===rn.isSkinnedMesh,morphTargets:void 0!==kn.morphAttributes.position,morphNormals:void 0!==kn.morphAttributes.normal,morphColors:void 0!==kn.morphAttributes.color,morphTargetsCount:_i,morphTextureStride:ps,numDirLights:$e.directional.length,numPointLights:$e.point.length,numSpotLights:$e.spot.length,numSpotLightMaps:$e.spotLightMap.length,numRectAreaLights:$e.rectArea.length,numHemiLights:$e.hemi.length,numDirLightShadows:$e.directionalShadowMap.length,numPointLightShadows:$e.pointShadowMap.length,numSpotLightShadows:$e.spotShadowMap.length,numSpotLightShadowsWithMaps:$e.numSpotLightShadowsWithMaps,numLightProbes:$e.numLightProbes,numClippingPlanes:p.numPlanes,numClipIntersection:p.numIntersection,dithering:tt.dithering,shadowMapEnabled:c.shadowMap.enabled&&Nt.length>0,shadowMapType:c.shadowMap.type,toneMapping:ya,decodeVideoTexture:eo&&!0===tt.map.isVideoTexture&&Lt.getTransfer(tt.map.colorSpace)===as,decodeVideoTextureEmissive:dr&&!0===tt.emissiveMap.isVideoTexture&&Lt.getTransfer(tt.emissiveMap.colorSpace)===as,premultipliedAlpha:tt.premultipliedAlpha,doubleSided:2===tt.side,flipSided:1===tt.side,useDepthPacking:tt.depthPacking>=0,depthPacking:tt.depthPacking||0,index0AttributeName:tt.index0AttributeName,extensionClipCullDistance:Ss&&!0===tt.extensions.clipCullDistance&&s.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ss&&!0===tt.extensions.multiDraw||Jr)&&s.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:s.has("KHR_parallel_shader_compile"),customProgramCacheKey:tt.customProgramCacheKey()};return vl.vertexUv1s=E.has(1),vl.vertexUv2s=E.has(2),vl.vertexUv3s=E.has(3),E.clear(),vl},getProgramCacheKey:function Z(tt){const $e=[];if(tt.shaderID?$e.push(tt.shaderID):($e.push(tt.customVertexShaderID),$e.push(tt.customFragmentShaderID)),void 0!==tt.defines)for(const Nt in tt.defines)$e.push(Nt),$e.push(tt.defines[Nt]);return!1===tt.isRawShaderMaterial&&(function Ue(tt,$e){tt.push($e.precision),tt.push($e.outputColorSpace),tt.push($e.envMapMode),tt.push($e.envMapCubeUVHeight),tt.push($e.mapUv),tt.push($e.alphaMapUv),tt.push($e.lightMapUv),tt.push($e.aoMapUv),tt.push($e.bumpMapUv),tt.push($e.normalMapUv),tt.push($e.displacementMapUv),tt.push($e.emissiveMapUv),tt.push($e.metalnessMapUv),tt.push($e.roughnessMapUv),tt.push($e.anisotropyMapUv),tt.push($e.clearcoatMapUv),tt.push($e.clearcoatNormalMapUv),tt.push($e.clearcoatRoughnessMapUv),tt.push($e.iridescenceMapUv),tt.push($e.iridescenceThicknessMapUv),tt.push($e.sheenColorMapUv),tt.push($e.sheenRoughnessMapUv),tt.push($e.specularMapUv),tt.push($e.specularColorMapUv),tt.push($e.specularIntensityMapUv),tt.push($e.transmissionMapUv),tt.push($e.thicknessMapUv),tt.push($e.combine),tt.push($e.fogExp2),tt.push($e.sizeAttenuation),tt.push($e.morphTargetsCount),tt.push($e.morphAttributeCount),tt.push($e.numDirLights),tt.push($e.numPointLights),tt.push($e.numSpotLights),tt.push($e.numSpotLightMaps),tt.push($e.numHemiLights),tt.push($e.numRectAreaLights),tt.push($e.numDirLightShadows),tt.push($e.numPointLightShadows),tt.push($e.numSpotLightShadows),tt.push($e.numSpotLightShadowsWithMaps),tt.push($e.numLightProbes),tt.push($e.shadowMapType),tt.push($e.toneMapping),tt.push($e.numClippingPlanes),tt.push($e.numClipIntersection),tt.push($e.depthPacking)}($e,tt),function Le(tt,$e){v.disableAll(),$e.supportsVertexTextures&&v.enable(0),$e.instancing&&v.enable(1),$e.instancingColor&&v.enable(2),$e.instancingMorph&&v.enable(3),$e.matcap&&v.enable(4),$e.envMap&&v.enable(5),$e.normalMapObjectSpace&&v.enable(6),$e.normalMapTangentSpace&&v.enable(7),$e.clearcoat&&v.enable(8),$e.iridescence&&v.enable(9),$e.alphaTest&&v.enable(10),$e.vertexColors&&v.enable(11),$e.vertexAlphas&&v.enable(12),$e.vertexUv1s&&v.enable(13),$e.vertexUv2s&&v.enable(14),$e.vertexUv3s&&v.enable(15),$e.vertexTangents&&v.enable(16),$e.anisotropy&&v.enable(17),$e.alphaHash&&v.enable(18),$e.batching&&v.enable(19),$e.dispersion&&v.enable(20),$e.batchingColor&&v.enable(21),tt.push(v.mask),v.disableAll(),$e.fog&&v.enable(0),$e.useFog&&v.enable(1),$e.flatShading&&v.enable(2),$e.logarithmicDepthBuffer&&v.enable(3),$e.reverseDepthBuffer&&v.enable(4),$e.skinning&&v.enable(5),$e.morphTargets&&v.enable(6),$e.morphNormals&&v.enable(7),$e.morphColors&&v.enable(8),$e.premultipliedAlpha&&v.enable(9),$e.shadowMapEnabled&&v.enable(10),$e.doubleSided&&v.enable(11),$e.flipSided&&v.enable(12),$e.useDepthPacking&&v.enable(13),$e.dithering&&v.enable(14),$e.transmission&&v.enable(15),$e.sheen&&v.enable(16),$e.opaque&&v.enable(17),$e.pointsUvs&&v.enable(18),$e.decodeVideoTexture&&v.enable(19),$e.decodeVideoTextureEmissive&&v.enable(20),$e.alphaToCoverage&&v.enable(21),tt.push(v.mask)}($e,tt),$e.push(c.outputColorSpace)),$e.push(tt.customProgramCacheKey),$e.join()},getUniforms:function Pe(tt){const $e=re[tt.type];let Nt;return Nt=$e?vv.clone(m[$e].uniforms):tt.uniforms,Nt},acquireProgram:function Ft(tt,$e){let Nt;for(let pn=0,rn=R.length;pn<rn;pn++){const gn=R[pn];if(gn.cacheKey===$e){Nt=gn,++Nt.usedTimes;break}}return void 0===Nt&&(Nt=new a_(c,$e,tt,u),R.push(Nt)),Nt},releaseProgram:function dt(tt){if(0==--tt.usedTimes){const $e=R.indexOf(tt);R[$e]=R[R.length-1],R.pop(),tt.destroy()}},releaseShaderCache:function gt(tt){b.remove(tt)},programs:R,dispose:function bt(){b.dispose()}}}function T1(){let c=new WeakMap;return{has:function e(p){return c.has(p)},get:function n(p){let v=c.get(p);return void 0===v&&(v={},c.set(p,v)),v},remove:function s(p){c.delete(p)},update:function a(p,v,b){c.get(p)[v]=b},dispose:function u(){c=new WeakMap}}}function D1(c,e){return c.groupOrder!==e.groupOrder?c.groupOrder-e.groupOrder:c.renderOrder!==e.renderOrder?c.renderOrder-e.renderOrder:c.material.id!==e.material.id?c.material.id-e.material.id:c.z!==e.z?c.z-e.z:c.id-e.id}function l_(c,e){return c.groupOrder!==e.groupOrder?c.groupOrder-e.groupOrder:c.renderOrder!==e.renderOrder?c.renderOrder-e.renderOrder:c.z!==e.z?e.z-c.z:c.id-e.id}function Km(){const c=[];let e=0;const n=[],s=[],a=[];function p(B,U,$,re,ve,ae){let Z=c[e];return void 0===Z?(Z={id:B.id,object:B,geometry:U,material:$,groupOrder:re,renderOrder:B.renderOrder,z:ve,group:ae},c[e]=Z):(Z.id=B.id,Z.object=B,Z.geometry=U,Z.material=$,Z.groupOrder=re,Z.renderOrder=B.renderOrder,Z.z=ve,Z.group=ae),e++,Z}return{opaque:n,transmissive:s,transparent:a,init:function u(){e=0,n.length=0,s.length=0,a.length=0},push:function v(B,U,$,re,ve,ae){const Z=p(B,U,$,re,ve,ae);$.transmission>0?s.push(Z):!0===$.transparent?a.push(Z):n.push(Z)},unshift:function b(B,U,$,re,ve,ae){const Z=p(B,U,$,re,ve,ae);$.transmission>0?s.unshift(Z):!0===$.transparent?a.unshift(Z):n.unshift(Z)},finish:function R(){for(let B=e,U=c.length;B<U;B++){const $=c[B];if(null===$.id)break;$.id=null,$.object=null,$.geometry=null,$.material=null,$.group=null}},sort:function E(B,U){n.length>1&&n.sort(B||D1),s.length>1&&s.sort(U||l_),a.length>1&&a.sort(U||l_)}}}function qx(){let c=new WeakMap;return{get:function e(s,a){const u=c.get(s);let p;return void 0===u?(p=new Km,c.set(s,[p])):a>=u.length?(p=new Km,u.push(p)):p=u[a],p},dispose:function n(){c=new WeakMap}}}function Zx(){const c={};return{get:function(e){if(void 0!==c[e.id])return c[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new lt,color:new ki};break;case"SpotLight":n={position:new lt,direction:new lt,color:new ki,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new lt,color:new ki,distance:0,decay:0};break;case"HemisphereLight":n={direction:new lt,skyColor:new ki,groundColor:new ki};break;case"RectAreaLight":n={color:new ki,position:new lt,halfWidth:new lt,halfHeight:new lt}}return c[e.id]=n,n}}}let A1=0;function I1(c,e){return(e.castShadow?2:0)-(c.castShadow?2:0)+(e.map?1:0)-(c.map?1:0)}function R1(c){const e=new Zx,n=function Lf(){const c={};return{get:function(e){if(void 0!==c[e.id])return c[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yn};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yn,shadowCameraNear:1,shadowCameraFar:1e3}}return c[e.id]=n,n}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let E=0;E<9;E++)s.probe.push(new lt);const a=new lt,u=new gr,p=new gr;return{setup:function v(E){let R=0,B=0,U=0;for(let tt=0;tt<9;tt++)s.probe[tt].set(0,0,0);let $=0,re=0,ve=0,ae=0,Z=0,Ue=0,Le=0,Pe=0,Ft=0,dt=0,gt=0;E.sort(I1);for(let tt=0,$e=E.length;tt<$e;tt++){const Nt=E[tt],pn=Nt.color,rn=Nt.intensity,gn=Nt.distance,kn=Nt.shadow&&Nt.shadow.map?Nt.shadow.map.texture:null;if(Nt.isAmbientLight)R+=pn.r*rn,B+=pn.g*rn,U+=pn.b*rn;else if(Nt.isLightProbe){for(let _n=0;_n<9;_n++)s.probe[_n].addScaledVector(Nt.sh.coefficients[_n],rn);gt++}else if(Nt.isDirectionalLight){const _n=e.get(Nt);if(_n.color.copy(Nt.color).multiplyScalar(Nt.intensity),Nt.castShadow){const ti=Nt.shadow,wn=n.get(Nt);wn.shadowIntensity=ti.intensity,wn.shadowBias=ti.bias,wn.shadowNormalBias=ti.normalBias,wn.shadowRadius=ti.radius,wn.shadowMapSize=ti.mapSize,s.directionalShadow[$]=wn,s.directionalShadowMap[$]=kn,s.directionalShadowMatrix[$]=Nt.shadow.matrix,Ue++}s.directional[$]=_n,$++}else if(Nt.isSpotLight){const _n=e.get(Nt);_n.position.setFromMatrixPosition(Nt.matrixWorld),_n.color.copy(pn).multiplyScalar(rn),_n.distance=gn,_n.coneCos=Math.cos(Nt.angle),_n.penumbraCos=Math.cos(Nt.angle*(1-Nt.penumbra)),_n.decay=Nt.decay,s.spot[ve]=_n;const ti=Nt.shadow;if(Nt.map&&(s.spotLightMap[Ft]=Nt.map,Ft++,ti.updateMatrices(Nt),Nt.castShadow&&dt++),s.spotLightMatrix[ve]=ti.matrix,Nt.castShadow){const wn=n.get(Nt);wn.shadowIntensity=ti.intensity,wn.shadowBias=ti.bias,wn.shadowNormalBias=ti.normalBias,wn.shadowRadius=ti.radius,wn.shadowMapSize=ti.mapSize,s.spotShadow[ve]=wn,s.spotShadowMap[ve]=kn,Pe++}ve++}else if(Nt.isRectAreaLight){const _n=e.get(Nt);_n.color.copy(pn).multiplyScalar(rn),_n.halfWidth.set(.5*Nt.width,0,0),_n.halfHeight.set(0,.5*Nt.height,0),s.rectArea[ae]=_n,ae++}else if(Nt.isPointLight){const _n=e.get(Nt);if(_n.color.copy(Nt.color).multiplyScalar(Nt.intensity),_n.distance=Nt.distance,_n.decay=Nt.decay,Nt.castShadow){const ti=Nt.shadow,wn=n.get(Nt);wn.shadowIntensity=ti.intensity,wn.shadowBias=ti.bias,wn.shadowNormalBias=ti.normalBias,wn.shadowRadius=ti.radius,wn.shadowMapSize=ti.mapSize,wn.shadowCameraNear=ti.camera.near,wn.shadowCameraFar=ti.camera.far,s.pointShadow[re]=wn,s.pointShadowMap[re]=kn,s.pointShadowMatrix[re]=Nt.shadow.matrix,Le++}s.point[re]=_n,re++}else if(Nt.isHemisphereLight){const _n=e.get(Nt);_n.skyColor.copy(Nt.color).multiplyScalar(rn),_n.groundColor.copy(Nt.groundColor).multiplyScalar(rn),s.hemi[Z]=_n,Z++}}ae>0&&(!0===c.has("OES_texture_float_linear")?(s.rectAreaLTC1=Mi.LTC_FLOAT_1,s.rectAreaLTC2=Mi.LTC_FLOAT_2):(s.rectAreaLTC1=Mi.LTC_HALF_1,s.rectAreaLTC2=Mi.LTC_HALF_2)),s.ambient[0]=R,s.ambient[1]=B,s.ambient[2]=U;const bt=s.hash;(bt.directionalLength!==$||bt.pointLength!==re||bt.spotLength!==ve||bt.rectAreaLength!==ae||bt.hemiLength!==Z||bt.numDirectionalShadows!==Ue||bt.numPointShadows!==Le||bt.numSpotShadows!==Pe||bt.numSpotMaps!==Ft||bt.numLightProbes!==gt)&&(s.directional.length=$,s.spot.length=ve,s.rectArea.length=ae,s.point.length=re,s.hemi.length=Z,s.directionalShadow.length=Ue,s.directionalShadowMap.length=Ue,s.pointShadow.length=Le,s.pointShadowMap.length=Le,s.spotShadow.length=Pe,s.spotShadowMap.length=Pe,s.directionalShadowMatrix.length=Ue,s.pointShadowMatrix.length=Le,s.spotLightMatrix.length=Pe+Ft-dt,s.spotLightMap.length=Ft,s.numSpotLightShadowsWithMaps=dt,s.numLightProbes=gt,bt.directionalLength=$,bt.pointLength=re,bt.spotLength=ve,bt.rectAreaLength=ae,bt.hemiLength=Z,bt.numDirectionalShadows=Ue,bt.numPointShadows=Le,bt.numSpotShadows=Pe,bt.numSpotMaps=Ft,bt.numLightProbes=gt,s.version=A1++)},setupView:function b(E,R){let B=0,U=0,$=0,re=0,ve=0;const ae=R.matrixWorldInverse;for(let Z=0,Ue=E.length;Z<Ue;Z++){const Le=E[Z];if(Le.isDirectionalLight){const Pe=s.directional[B];Pe.direction.setFromMatrixPosition(Le.matrixWorld),a.setFromMatrixPosition(Le.target.matrixWorld),Pe.direction.sub(a),Pe.direction.transformDirection(ae),B++}else if(Le.isSpotLight){const Pe=s.spot[$];Pe.position.setFromMatrixPosition(Le.matrixWorld),Pe.position.applyMatrix4(ae),Pe.direction.setFromMatrixPosition(Le.matrixWorld),a.setFromMatrixPosition(Le.target.matrixWorld),Pe.direction.sub(a),Pe.direction.transformDirection(ae),$++}else if(Le.isRectAreaLight){const Pe=s.rectArea[re];Pe.position.setFromMatrixPosition(Le.matrixWorld),Pe.position.applyMatrix4(ae),p.identity(),u.copy(Le.matrixWorld),u.premultiply(ae),p.extractRotation(u),Pe.halfWidth.set(.5*Le.width,0,0),Pe.halfHeight.set(0,.5*Le.height,0),Pe.halfWidth.applyMatrix4(p),Pe.halfHeight.applyMatrix4(p),re++}else if(Le.isPointLight){const Pe=s.point[U];Pe.position.setFromMatrixPosition(Le.matrixWorld),Pe.position.applyMatrix4(ae),U++}else if(Le.isHemisphereLight){const Pe=s.hemi[ve];Pe.direction.setFromMatrixPosition(Le.matrixWorld),Pe.direction.transformDirection(ae),ve++}}},state:s}}function Qm(c){const e=new R1(c),n=[],s=[],E={lightsArray:n,shadowsArray:s,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function a(R){E.camera=R,n.length=0,s.length=0},state:E,setupLights:function v(){e.setup(n)},setupLightsView:function b(R){e.setupView(n,R)},pushLight:function u(R){n.push(R)},pushShadow:function p(R){s.push(R)}}}function N1(c){let e=new WeakMap;return{get:function n(a,u=0){const p=e.get(a);let v;return void 0===p?(v=new Qm(c),e.set(a,[v])):u>=p.length?(v=new Qm(c),p.push(v)):v=p[u],v},dispose:function s(){e=new WeakMap}}}class c_ extends sl{static get type(){return"MeshDepthMaterial"}constructor(e){super(),this.isMeshDepthMaterial=!0,this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class u_ extends sl{static get type(){return"MeshDistanceMaterial"}constructor(e){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function F1(c,e,n){let s=new ph;const a=new yn,u=new yn,p=new Kt,v=new c_({depthPacking:3201}),b=new u_,E={},R=n.maxTextureSize,B={0:1,1:0,2:2},U=new Uo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new yn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),$=U.clone();$.defines.HORIZONTAL_PASS=1;const re=new bs;re.setAttribute("position",new fs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ve=new so(re,U),ae=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=le;let Z=this.type;function Ue(dt,gt){const bt=e.update(ve);U.defines.VSM_SAMPLES!==dt.blurSamples&&(U.defines.VSM_SAMPLES=dt.blurSamples,$.defines.VSM_SAMPLES=dt.blurSamples,U.needsUpdate=!0,$.needsUpdate=!0),null===dt.mapPass&&(dt.mapPass=new Dr(a.x,a.y)),U.uniforms.shadow_pass.value=dt.map.texture,U.uniforms.resolution.value=dt.mapSize,U.uniforms.radius.value=dt.radius,c.setRenderTarget(dt.mapPass),c.clear(),c.renderBufferDirect(gt,null,bt,U,ve,null),$.uniforms.shadow_pass.value=dt.mapPass.texture,$.uniforms.resolution.value=dt.mapSize,$.uniforms.radius.value=dt.radius,c.setRenderTarget(dt.map),c.clear(),c.renderBufferDirect(gt,null,bt,$,ve,null)}function Le(dt,gt,bt,tt){let $e=null;const Nt=!0===bt.isPointLight?dt.customDistanceMaterial:dt.customDepthMaterial;if(void 0!==Nt)$e=Nt;else if($e=!0===bt.isPointLight?b:v,c.localClippingEnabled&&!0===gt.clipShadows&&Array.isArray(gt.clippingPlanes)&&0!==gt.clippingPlanes.length||gt.displacementMap&&0!==gt.displacementScale||gt.alphaMap&&gt.alphaTest>0||gt.map&&gt.alphaTest>0){const pn=$e.uuid,rn=gt.uuid;let gn=E[pn];void 0===gn&&(gn={},E[pn]=gn);let kn=gn[rn];void 0===kn&&(kn=$e.clone(),gn[rn]=kn,gt.addEventListener("dispose",Ft)),$e=kn}return $e.visible=gt.visible,$e.wireframe=gt.wireframe,$e.side=tt===C?null!==gt.shadowSide?gt.shadowSide:gt.side:null!==gt.shadowSide?gt.shadowSide:B[gt.side],$e.alphaMap=gt.alphaMap,$e.alphaTest=gt.alphaTest,$e.map=gt.map,$e.clipShadows=gt.clipShadows,$e.clippingPlanes=gt.clippingPlanes,$e.clipIntersection=gt.clipIntersection,$e.displacementMap=gt.displacementMap,$e.displacementScale=gt.displacementScale,$e.displacementBias=gt.displacementBias,$e.wireframeLinewidth=gt.wireframeLinewidth,$e.linewidth=gt.linewidth,!0===bt.isPointLight&&!0===$e.isMeshDistanceMaterial&&(c.properties.get($e).light=bt),$e}function Pe(dt,gt,bt,tt,$e){if(!1===dt.visible)return;if(dt.layers.test(gt.layers)&&(dt.isMesh||dt.isLine||dt.isPoints)&&(dt.castShadow||dt.receiveShadow&&$e===C)&&(!dt.frustumCulled||s.intersectsObject(dt))){dt.modelViewMatrix.multiplyMatrices(bt.matrixWorldInverse,dt.matrixWorld);const rn=e.update(dt),gn=dt.material;if(Array.isArray(gn)){const kn=rn.groups;for(let _n=0,ti=kn.length;_n<ti;_n++){const wn=kn[_n],Ci=gn[wn.materialIndex];if(Ci&&Ci.visible){const Gi=Le(dt,Ci,tt,$e);dt.onBeforeShadow(c,dt,gt,bt,rn,Gi,wn),c.renderBufferDirect(bt,null,rn,Gi,dt,wn),dt.onAfterShadow(c,dt,gt,bt,rn,Gi,wn)}}}else if(gn.visible){const kn=Le(dt,gn,tt,$e);dt.onBeforeShadow(c,dt,gt,bt,rn,kn,null),c.renderBufferDirect(bt,null,rn,kn,dt,null),dt.onAfterShadow(c,dt,gt,bt,rn,kn,null)}}const pn=dt.children;for(let rn=0,gn=pn.length;rn<gn;rn++)Pe(pn[rn],gt,bt,tt,$e)}function Ft(dt){dt.target.removeEventListener("dispose",Ft);for(const bt in E){const tt=E[bt],$e=dt.target.uuid;$e in tt&&(tt[$e].dispose(),delete tt[$e])}}this.render=function(dt,gt,bt){if(!1===ae.enabled||!1===ae.autoUpdate&&!1===ae.needsUpdate||0===dt.length)return;const tt=c.getRenderTarget(),$e=c.getActiveCubeFace(),Nt=c.getActiveMipmapLevel(),pn=c.state;pn.setBlending(0),pn.buffers.color.setClear(1,1,1,1),pn.buffers.depth.setTest(!0),pn.setScissorTest(!1);const rn=Z!==C&&this.type===C,gn=Z===C&&this.type!==C;for(let kn=0,_n=dt.length;kn<_n;kn++){const ti=dt[kn],wn=ti.shadow;if(void 0===wn){console.warn("THREE.WebGLShadowMap:",ti,"has no shadow.");continue}if(!1===wn.autoUpdate&&!1===wn.needsUpdate)continue;a.copy(wn.mapSize);const Ci=wn.getFrameExtents();if(a.multiply(Ci),u.copy(wn.mapSize),(a.x>R||a.y>R)&&(a.x>R&&(u.x=Math.floor(R/Ci.x),a.x=u.x*Ci.x,wn.mapSize.x=u.x),a.y>R&&(u.y=Math.floor(R/Ci.y),a.y=u.y*Ci.y,wn.mapSize.y=u.y)),null===wn.map||!0===rn||!0===gn){const _i=this.type!==C?{minFilter:kr,magFilter:kr}:{};null!==wn.map&&wn.map.dispose(),wn.map=new Dr(a.x,a.y,_i),wn.map.texture.name=ti.name+".shadowMap",wn.camera.updateProjectionMatrix()}c.setRenderTarget(wn.map),c.clear();const Gi=wn.getViewportCount();for(let _i=0;_i<Gi;_i++){const ps=wn.getViewport(_i);p.set(u.x*ps.x,u.y*ps.y,u.x*ps.z,u.y*ps.w),pn.viewport(p),wn.updateMatrices(ti,_i),s=wn.getFrustum(),Pe(gt,bt,wn.camera,ti,this.type)}!0!==wn.isPointLightShadow&&this.type===C&&Ue(wn,bt),wn.needsUpdate=!1}Z=this.type,ae.needsUpdate=!1,c.setRenderTarget(tt,$e,Nt)}}const Ym={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3};function Jx(c,e){const u=new function n(){let Wt=!1;const Ni=new Kt;let Tn=null;const Fn=new Kt(0,0,0,0);return{setMask:function(Ui){Tn!==Ui&&!Wt&&(c.colorMask(Ui,Ui,Ui,Ui),Tn=Ui)},setLocked:function(Ui){Wt=Ui},setClear:function(Ui,Vi,Ss,ya,vl){!0===vl&&(Ui*=ya,Vi*=ya,Ss*=ya),Ni.set(Ui,Vi,Ss,ya),!1===Fn.equals(Ni)&&(c.clearColor(Ui,Vi,Ss,ya),Fn.copy(Ni))},reset:function(){Wt=!1,Tn=null,Fn.set(-1,0,0,0)}}},p=new function s(){let Wt=!1,Ni=!1,Tn=null,Fn=null,Ui=null;return{setReversed:function(Vi){if(Ni!==Vi){const Ss=e.get("EXT_clip_control");Ss.clipControlEXT(Ss.LOWER_LEFT_EXT,Ni?Ss.ZERO_TO_ONE_EXT:Ss.NEGATIVE_ONE_TO_ONE_EXT);const ya=Ui;Ui=null,this.setClear(ya)}Ni=Vi},getReversed:function(){return Ni},setTest:function(Vi){Vi?gi(c.DEPTH_TEST):Sr(c.DEPTH_TEST)},setMask:function(Vi){Tn!==Vi&&!Wt&&(c.depthMask(Vi),Tn=Vi)},setFunc:function(Vi){if(Ni&&(Vi=Ym[Vi]),Fn!==Vi){switch(Vi){case 0:c.depthFunc(c.NEVER);break;case 1:c.depthFunc(c.ALWAYS);break;case 2:c.depthFunc(c.LESS);break;case 3:default:c.depthFunc(c.LEQUAL);break;case 4:c.depthFunc(c.EQUAL);break;case 5:c.depthFunc(c.GEQUAL);break;case 6:c.depthFunc(c.GREATER);break;case 7:c.depthFunc(c.NOTEQUAL)}Fn=Vi}},setLocked:function(Vi){Wt=Vi},setClear:function(Vi){Ui!==Vi&&(Ni&&(Vi=1-Vi),c.clearDepth(Vi),Ui=Vi)},reset:function(){Wt=!1,Tn=null,Fn=null,Ui=null,Ni=!1}}},v=new function a(){let Wt=!1,Ni=null,Tn=null,Fn=null,Ui=null,Vi=null,Ss=null,ya=null,vl=null;return{setTest:function(So){Wt||(So?gi(c.STENCIL_TEST):Sr(c.STENCIL_TEST))},setMask:function(So){Ni!==So&&!Wt&&(c.stencilMask(So),Ni=So)},setFunc:function(So,su,Sd){(Tn!==So||Fn!==su||Ui!==Sd)&&(c.stencilFunc(So,su,Sd),Tn=So,Fn=su,Ui=Sd)},setOp:function(So,su,Sd){(Vi!==So||Ss!==su||ya!==Sd)&&(c.stencilOp(So,su,Sd),Vi=So,Ss=su,ya=Sd)},setLocked:function(So){Wt=So},setClear:function(So){vl!==So&&(c.clearStencil(So),vl=So)},reset:function(){Wt=!1,Ni=null,Tn=null,Fn=null,Ui=null,Vi=null,Ss=null,ya=null,vl=null}}},b=new WeakMap,E=new WeakMap;let R={},B={},U=new WeakMap,$=[],re=null,ve=!1,ae=null,Z=null,Ue=null,Le=null,Pe=null,Ft=null,dt=null,gt=new ki(0,0,0),bt=0,tt=!1,$e=null,Nt=null,pn=null,rn=null,gn=null;const kn=c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let _n=!1,ti=0;const wn=c.getParameter(c.VERSION);-1!==wn.indexOf("WebGL")?(ti=parseFloat(/^WebGL (\d)/.exec(wn)[1]),_n=ti>=1):-1!==wn.indexOf("OpenGL ES")&&(ti=parseFloat(/^OpenGL ES (\d)/.exec(wn)[1]),_n=ti>=2);let Ci=null,Gi={};const _i=c.getParameter(c.SCISSOR_BOX),ps=c.getParameter(c.VIEWPORT),Eo=(new Kt).fromArray(_i),En=(new Kt).fromArray(ps);function ci(Wt,Ni,Tn,Fn){const Ui=new Uint8Array(4),Vi=c.createTexture();c.bindTexture(Wt,Vi),c.texParameteri(Wt,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(Wt,c.TEXTURE_MAG_FILTER,c.NEAREST);for(let Ss=0;Ss<Tn;Ss++)Wt===c.TEXTURE_3D||Wt===c.TEXTURE_2D_ARRAY?c.texImage3D(Ni,0,c.RGBA,1,1,Fn,0,c.RGBA,c.UNSIGNED_BYTE,Ui):c.texImage2D(Ni+Ss,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,Ui);return Vi}const ji={};function gi(Wt){!0!==R[Wt]&&(c.enable(Wt),R[Wt]=!0)}function Sr(Wt){!1!==R[Wt]&&(c.disable(Wt),R[Wt]=!1)}ji[c.TEXTURE_2D]=ci(c.TEXTURE_2D,c.TEXTURE_2D,1),ji[c.TEXTURE_CUBE_MAP]=ci(c.TEXTURE_CUBE_MAP,c.TEXTURE_CUBE_MAP_POSITIVE_X,6),ji[c.TEXTURE_2D_ARRAY]=ci(c.TEXTURE_2D_ARRAY,c.TEXTURE_2D_ARRAY,1,1),ji[c.TEXTURE_3D]=ci(c.TEXTURE_3D,c.TEXTURE_3D,1,1),u.setClear(0,0,0,1),p.setClear(1),v.setClear(0),gi(c.DEPTH_TEST),p.setFunc(3),jn(!1),Bi(1),gi(c.CULL_FACE),Et(0);const Bn={100:c.FUNC_ADD,101:c.FUNC_SUBTRACT,102:c.FUNC_REVERSE_SUBTRACT};Bn[103]=c.MIN,Bn[104]=c.MAX;const ni={200:c.ZERO,201:c.ONE,202:c.SRC_COLOR,204:c.SRC_ALPHA,210:c.SRC_ALPHA_SATURATE,208:c.DST_COLOR,206:c.DST_ALPHA,203:c.ONE_MINUS_SRC_COLOR,205:c.ONE_MINUS_SRC_ALPHA,209:c.ONE_MINUS_DST_COLOR,207:c.ONE_MINUS_DST_ALPHA,211:c.CONSTANT_COLOR,212:c.ONE_MINUS_CONSTANT_COLOR,213:c.CONSTANT_ALPHA,214:c.ONE_MINUS_CONSTANT_ALPHA};function Et(Wt,Ni,Tn,Fn,Ui,Vi,Ss,ya,vl,So){if(0!==Wt){if(!1===ve&&(gi(c.BLEND),ve=!0),5===Wt)Ui=Ui||Ni,Vi=Vi||Tn,Ss=Ss||Fn,(Ni!==Z||Ui!==Pe)&&(c.blendEquationSeparate(Bn[Ni],Bn[Ui]),Z=Ni,Pe=Ui),(Tn!==Ue||Fn!==Le||Vi!==Ft||Ss!==dt)&&(c.blendFuncSeparate(ni[Tn],ni[Fn],ni[Vi],ni[Ss]),Ue=Tn,Le=Fn,Ft=Vi,dt=Ss),(!1===ya.equals(gt)||vl!==bt)&&(c.blendColor(ya.r,ya.g,ya.b,vl),gt.copy(ya),bt=vl),ae=Wt,tt=!1;else if(Wt!==ae||So!==tt){if((100!==Z||100!==Pe)&&(c.blendEquation(c.FUNC_ADD),Z=100,Pe=100),So)switch(Wt){case 1:c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case 2:c.blendFunc(c.ONE,c.ONE);break;case 3:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case 4:c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ZERO,c.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Wt)}else switch(Wt){case 1:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case 2:c.blendFunc(c.SRC_ALPHA,c.ONE);break;case 3:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case 4:c.blendFunc(c.ZERO,c.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Wt)}Ue=null,Le=null,Ft=null,dt=null,gt.set(0,0,0),bt=0,ae=Wt,tt=So}}else!0===ve&&(Sr(c.BLEND),ve=!1)}function jn(Wt){$e!==Wt&&(c.frontFace(Wt?c.CW:c.CCW),$e=Wt)}function Bi(Wt){0!==Wt?(gi(c.CULL_FACE),Wt!==Nt&&c.cullFace(1===Wt?c.BACK:2===Wt?c.FRONT:c.FRONT_AND_BACK)):Sr(c.CULL_FACE),Nt=Wt}function dr(Wt,Ni,Tn){Wt?(gi(c.POLYGON_OFFSET_FILL),(rn!==Ni||gn!==Tn)&&(c.polygonOffset(Ni,Tn),rn=Ni,gn=Tn)):Sr(c.POLYGON_OFFSET_FILL)}return{buffers:{color:u,depth:p,stencil:v},enable:gi,disable:Sr,bindFramebuffer:function Xr(Wt,Ni){return B[Wt]!==Ni&&(c.bindFramebuffer(Wt,Ni),B[Wt]=Ni,Wt===c.DRAW_FRAMEBUFFER&&(B[c.FRAMEBUFFER]=Ni),Wt===c.FRAMEBUFFER&&(B[c.DRAW_FRAMEBUFFER]=Ni),!0)},drawBuffers:function Jr(Wt,Ni){let Tn=$,Fn=!1;if(Wt){Tn=U.get(Ni),void 0===Tn&&(Tn=[],U.set(Ni,Tn));const Ui=Wt.textures;if(Tn.length!==Ui.length||Tn[0]!==c.COLOR_ATTACHMENT0){for(let Vi=0,Ss=Ui.length;Vi<Ss;Vi++)Tn[Vi]=c.COLOR_ATTACHMENT0+Vi;Tn.length=Ui.length,Fn=!0}}else Tn[0]!==c.BACK&&(Tn[0]=c.BACK,Fn=!0);Fn&&c.drawBuffers(Tn)},useProgram:function eo(Wt){return re!==Wt&&(c.useProgram(Wt),re=Wt,!0)},setBlending:Et,setMaterial:function vr(Wt,Ni){2===Wt.side?Sr(c.CULL_FACE):gi(c.CULL_FACE);let Tn=1===Wt.side;Ni&&(Tn=!Tn),jn(Tn),1===Wt.blending&&!1===Wt.transparent?Et(0):Et(Wt.blending,Wt.blendEquation,Wt.blendSrc,Wt.blendDst,Wt.blendEquationAlpha,Wt.blendSrcAlpha,Wt.blendDstAlpha,Wt.blendColor,Wt.blendAlpha,Wt.premultipliedAlpha),p.setFunc(Wt.depthFunc),p.setTest(Wt.depthTest),p.setMask(Wt.depthWrite),u.setMask(Wt.colorWrite);const Fn=Wt.stencilWrite;v.setTest(Fn),Fn&&(v.setMask(Wt.stencilWriteMask),v.setFunc(Wt.stencilFunc,Wt.stencilRef,Wt.stencilFuncMask),v.setOp(Wt.stencilFail,Wt.stencilZFail,Wt.stencilZPass)),dr(Wt.polygonOffset,Wt.polygonOffsetFactor,Wt.polygonOffsetUnits),!0===Wt.alphaToCoverage?gi(c.SAMPLE_ALPHA_TO_COVERAGE):Sr(c.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:jn,setCullFace:Bi,setLineWidth:function Ei(Wt){Wt!==pn&&(_n&&c.lineWidth(Wt),pn=Wt)},setPolygonOffset:dr,setScissorTest:function Xi(Wt){Wt?gi(c.SCISSOR_TEST):Sr(c.SCISSOR_TEST)},activeTexture:function ft(Wt){void 0===Wt&&(Wt=c.TEXTURE0+kn-1),Ci!==Wt&&(c.activeTexture(Wt),Ci=Wt)},bindTexture:function Qe(Wt,Ni,Tn){void 0===Tn&&(Tn=null===Ci?c.TEXTURE0+kn-1:Ci);let Fn=Gi[Tn];void 0===Fn&&(Fn={type:void 0,texture:void 0},Gi[Tn]=Fn),(Fn.type!==Wt||Fn.texture!==Ni)&&(Ci!==Tn&&(c.activeTexture(Tn),Ci=Tn),c.bindTexture(Wt,Ni||ji[Wt]),Fn.type=Wt,Fn.texture=Ni)},unbindTexture:function sn(){const Wt=Gi[Ci];void 0!==Wt&&void 0!==Wt.type&&(c.bindTexture(Wt.type,null),Wt.type=void 0,Wt.texture=void 0)},compressedTexImage2D:function In(){try{c.compressedTexImage2D.apply(c,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}},compressedTexImage3D:function Hn(){try{c.compressedTexImage3D.apply(c,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}},texImage2D:function tr(){try{c.texImage2D.apply(c,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}},texImage3D:function Kr(){try{c.texImage3D.apply(c,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}},updateUBOMapping:function Gs(Wt,Ni){let Tn=E.get(Ni);void 0===Tn&&(Tn=new WeakMap,E.set(Ni,Tn));let Fn=Tn.get(Wt);void 0===Fn&&(Fn=c.getUniformBlockIndex(Ni,Wt.name),Tn.set(Wt,Fn))},uniformBlockBinding:function Es(Wt,Ni){const Fn=E.get(Ni).get(Wt);b.get(Ni)!==Fn&&(c.uniformBlockBinding(Ni,Fn,Wt.__bindingPointIndex),b.set(Ni,Fn))},texStorage2D:function Ns(){try{c.texStorage2D.apply(c,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}},texStorage3D:function Xn(){try{c.texStorage3D.apply(c,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}},texSubImage2D:function Nn(){try{c.texSubImage2D.apply(c,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}},texSubImage3D:function mr(){try{c.texSubImage3D.apply(c,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}},compressedTexSubImage2D:function Ti(){try{c.compressedTexSubImage2D.apply(c,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}},compressedTexSubImage3D:function Wi(){try{c.compressedTexSubImage3D.apply(c,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}},scissor:function Gr(Wt){!1===Eo.equals(Wt)&&(c.scissor(Wt.x,Wt.y,Wt.z,Wt.w),Eo.copy(Wt))},viewport:function Yi(Wt){!1===En.equals(Wt)&&(c.viewport(Wt.x,Wt.y,Wt.z,Wt.w),En.copy(Wt))},reset:function zo(){c.disable(c.BLEND),c.disable(c.CULL_FACE),c.disable(c.DEPTH_TEST),c.disable(c.POLYGON_OFFSET_FILL),c.disable(c.SCISSOR_TEST),c.disable(c.STENCIL_TEST),c.disable(c.SAMPLE_ALPHA_TO_COVERAGE),c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ZERO),c.blendFuncSeparate(c.ONE,c.ZERO,c.ONE,c.ZERO),c.blendColor(0,0,0,0),c.colorMask(!0,!0,!0,!0),c.clearColor(0,0,0,0),c.depthMask(!0),c.depthFunc(c.LESS),p.setReversed(!1),c.clearDepth(1),c.stencilMask(4294967295),c.stencilFunc(c.ALWAYS,0,4294967295),c.stencilOp(c.KEEP,c.KEEP,c.KEEP),c.clearStencil(0),c.cullFace(c.BACK),c.frontFace(c.CCW),c.polygonOffset(0,0),c.activeTexture(c.TEXTURE0),c.bindFramebuffer(c.FRAMEBUFFER,null),c.bindFramebuffer(c.DRAW_FRAMEBUFFER,null),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.useProgram(null),c.lineWidth(1),c.scissor(0,0,c.canvas.width,c.canvas.height),c.viewport(0,0,c.canvas.width,c.canvas.height),R={},Ci=null,Gi={},B={},U=new WeakMap,$=[],re=null,ve=!1,ae=null,Z=null,Ue=null,Le=null,Pe=null,Ft=null,dt=null,gt=new ki(0,0,0),bt=0,tt=!1,$e=null,Nt=null,pn=null,rn=null,gn=null,Eo.set(0,0,c.canvas.width,c.canvas.height),En.set(0,0,c.canvas.width,c.canvas.height),u.reset(),p.reset(),v.reset()}}}function d_(c,e,n,s){const a=function nE(c){switch(c){case ao:case ms:return{byteLength:1,components:1};case Ms:case sr:case lo:return{byteLength:2,components:1};case Go:case Ye:return{byteLength:2,components:4};case Os:case to:case Fs:return{byteLength:4,components:1};case G:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${c}.`)}(s);switch(n){case ce:case tn:return c*e;case hn:return c*e*2;case qn:case Or:return c*e/a.components*a.byteLength;case Fr:case Br:return c*e*2/a.components*a.byteLength;case qe:return c*e*3/a.components*a.byteLength;case ht:case co:return c*e*4/a.components*a.byteLength;case Rr:case Ur:return Math.floor((c+3)/4)*Math.floor((e+3)/4)*8;case Ls:case Ws:return Math.floor((c+3)/4)*Math.floor((e+3)/4)*16;case As:case Oo:return Math.max(c,16)*Math.max(e,8)/4;case Qs:case Po:return Math.max(c,8)*Math.max(e,8)/2;case zi:case Hr:return Math.floor((c+3)/4)*Math.floor((e+3)/4)*8;case Bl:case ks:return Math.floor((c+3)/4)*Math.floor((e+3)/4)*16;case El:return Math.floor((c+4)/5)*Math.floor((e+3)/4)*16;case ys:return Math.floor((c+4)/5)*Math.floor((e+4)/5)*16;case Sl:return Math.floor((c+5)/6)*Math.floor((e+4)/5)*16;case ca:return Math.floor((c+5)/6)*Math.floor((e+5)/6)*16;case br:return Math.floor((c+7)/8)*Math.floor((e+4)/5)*16;case ha:return Math.floor((c+7)/8)*Math.floor((e+5)/6)*16;case Ra:return Math.floor((c+7)/8)*Math.floor((e+7)/8)*16;case js:return Math.floor((c+9)/10)*Math.floor((e+4)/5)*16;case za:return Math.floor((c+9)/10)*Math.floor((e+5)/6)*16;case fa:return Math.floor((c+9)/10)*Math.floor((e+7)/8)*16;case cl:return Math.floor((c+9)/10)*Math.floor((e+9)/10)*16;case no:return Math.floor((c+11)/12)*Math.floor((e+9)/10)*16;case Fo:return Math.floor((c+11)/12)*Math.floor((e+11)/12)*16;case Qo:case Ml:case Ga:return Math.ceil(c/4)*Math.ceil(e/4)*16;case pa:case Na:return Math.ceil(c/4)*Math.ceil(e/4)*8;case Yo:case Pa:return Math.ceil(c/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function iE(c,e,n,s,a,u,p){const v=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,b=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),E=new yn,R=new WeakMap;let B;const U=new WeakMap;let $=!1;try{$=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function re(ft,Qe){return $?new OffscreenCanvas(ft,Qe):D("canvas")}function ve(ft,Qe,sn){let In=1;const Hn=Xi(ft);if((Hn.width>sn||Hn.height>sn)&&(In=sn/Math.max(Hn.width,Hn.height)),In<1){if(typeof HTMLImageElement<"u"&&ft instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ft instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ft instanceof ImageBitmap||typeof VideoFrame<"u"&&ft instanceof VideoFrame){const Nn=Math.floor(In*Hn.width),mr=Math.floor(In*Hn.height);void 0===B&&(B=re(Nn,mr));const Ti=Qe?re(Nn,mr):B;return Ti.width=Nn,Ti.height=mr,Ti.getContext("2d").drawImage(ft,0,0,Nn,mr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Hn.width+"x"+Hn.height+") to ("+Nn+"x"+mr+")."),Ti}return"data"in ft&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Hn.width+"x"+Hn.height+")."),ft}return ft}function ae(ft){return ft.generateMipmaps}function Z(ft){c.generateMipmap(ft)}function Ue(ft){return ft.isWebGLCubeRenderTarget?c.TEXTURE_CUBE_MAP:ft.isWebGL3DRenderTarget?c.TEXTURE_3D:ft.isWebGLArrayRenderTarget||ft.isCompressedArrayTexture?c.TEXTURE_2D_ARRAY:c.TEXTURE_2D}function Le(ft,Qe,sn,In,Hn=!1){if(null!==ft){if(void 0!==c[ft])return c[ft];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ft+"'")}let Nn=Qe;if(Qe===c.RED&&(sn===c.FLOAT&&(Nn=c.R32F),sn===c.HALF_FLOAT&&(Nn=c.R16F),sn===c.UNSIGNED_BYTE&&(Nn=c.R8)),Qe===c.RED_INTEGER&&(sn===c.UNSIGNED_BYTE&&(Nn=c.R8UI),sn===c.UNSIGNED_SHORT&&(Nn=c.R16UI),sn===c.UNSIGNED_INT&&(Nn=c.R32UI),sn===c.BYTE&&(Nn=c.R8I),sn===c.SHORT&&(Nn=c.R16I),sn===c.INT&&(Nn=c.R32I)),Qe===c.RG&&(sn===c.FLOAT&&(Nn=c.RG32F),sn===c.HALF_FLOAT&&(Nn=c.RG16F),sn===c.UNSIGNED_BYTE&&(Nn=c.RG8)),Qe===c.RG_INTEGER&&(sn===c.UNSIGNED_BYTE&&(Nn=c.RG8UI),sn===c.UNSIGNED_SHORT&&(Nn=c.RG16UI),sn===c.UNSIGNED_INT&&(Nn=c.RG32UI),sn===c.BYTE&&(Nn=c.RG8I),sn===c.SHORT&&(Nn=c.RG16I),sn===c.INT&&(Nn=c.RG32I)),Qe===c.RGB_INTEGER&&(sn===c.UNSIGNED_BYTE&&(Nn=c.RGB8UI),sn===c.UNSIGNED_SHORT&&(Nn=c.RGB16UI),sn===c.UNSIGNED_INT&&(Nn=c.RGB32UI),sn===c.BYTE&&(Nn=c.RGB8I),sn===c.SHORT&&(Nn=c.RGB16I),sn===c.INT&&(Nn=c.RGB32I)),Qe===c.RGBA_INTEGER&&(sn===c.UNSIGNED_BYTE&&(Nn=c.RGBA8UI),sn===c.UNSIGNED_SHORT&&(Nn=c.RGBA16UI),sn===c.UNSIGNED_INT&&(Nn=c.RGBA32UI),sn===c.BYTE&&(Nn=c.RGBA8I),sn===c.SHORT&&(Nn=c.RGBA16I),sn===c.INT&&(Nn=c.RGBA32I)),Qe===c.RGB&&sn===c.UNSIGNED_INT_5_9_9_9_REV&&(Nn=c.RGB9_E5),Qe===c.RGBA){const mr=Hn?ul:Lt.getTransfer(In);sn===c.FLOAT&&(Nn=c.RGBA32F),sn===c.HALF_FLOAT&&(Nn=c.RGBA16F),sn===c.UNSIGNED_BYTE&&(Nn=mr===as?c.SRGB8_ALPHA8:c.RGBA8),sn===c.UNSIGNED_SHORT_4_4_4_4&&(Nn=c.RGBA4),sn===c.UNSIGNED_SHORT_5_5_5_1&&(Nn=c.RGB5_A1)}return(Nn===c.R16F||Nn===c.R32F||Nn===c.RG16F||Nn===c.RG32F||Nn===c.RGBA16F||Nn===c.RGBA32F)&&e.get("EXT_color_buffer_float"),Nn}function Pe(ft,Qe){let sn;return ft?null===Qe||Qe===Os||Qe===O?sn=c.DEPTH24_STENCIL8:Qe===Fs?sn=c.DEPTH32F_STENCIL8:Qe===Ms&&(sn=c.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===Qe||Qe===Os||Qe===O?sn=c.DEPTH_COMPONENT24:Qe===Fs?sn=c.DEPTH_COMPONENT32F:Qe===Ms&&(sn=c.DEPTH_COMPONENT16),sn}function Ft(ft,Qe){return!0===ae(ft)||ft.isFramebufferTexture&&ft.minFilter!==kr&&ft.minFilter!==yi?Math.log2(Math.max(Qe.width,Qe.height))+1:void 0!==ft.mipmaps&&ft.mipmaps.length>0?ft.mipmaps.length:ft.isCompressedTexture&&Array.isArray(ft.image)?Qe.mipmaps.length:1}function dt(ft){const Qe=ft.target;Qe.removeEventListener("dispose",dt),function bt(ft){const Qe=s.get(ft);if(void 0===Qe.__webglInit)return;const sn=ft.source,In=U.get(sn);if(In){const Hn=In[Qe.__cacheKey];Hn.usedTimes--,0===Hn.usedTimes&&tt(ft),0===Object.keys(In).length&&U.delete(sn)}s.remove(ft)}(Qe),Qe.isVideoTexture&&R.delete(Qe)}function gt(ft){const Qe=ft.target;Qe.removeEventListener("dispose",gt),function $e(ft){const Qe=s.get(ft);if(ft.depthTexture&&(ft.depthTexture.dispose(),s.remove(ft.depthTexture)),ft.isWebGLCubeRenderTarget)for(let In=0;In<6;In++){if(Array.isArray(Qe.__webglFramebuffer[In]))for(let Hn=0;Hn<Qe.__webglFramebuffer[In].length;Hn++)c.deleteFramebuffer(Qe.__webglFramebuffer[In][Hn]);else c.deleteFramebuffer(Qe.__webglFramebuffer[In]);Qe.__webglDepthbuffer&&c.deleteRenderbuffer(Qe.__webglDepthbuffer[In])}else{if(Array.isArray(Qe.__webglFramebuffer))for(let In=0;In<Qe.__webglFramebuffer.length;In++)c.deleteFramebuffer(Qe.__webglFramebuffer[In]);else c.deleteFramebuffer(Qe.__webglFramebuffer);if(Qe.__webglDepthbuffer&&c.deleteRenderbuffer(Qe.__webglDepthbuffer),Qe.__webglMultisampledFramebuffer&&c.deleteFramebuffer(Qe.__webglMultisampledFramebuffer),Qe.__webglColorRenderbuffer)for(let In=0;In<Qe.__webglColorRenderbuffer.length;In++)Qe.__webglColorRenderbuffer[In]&&c.deleteRenderbuffer(Qe.__webglColorRenderbuffer[In]);Qe.__webglDepthRenderbuffer&&c.deleteRenderbuffer(Qe.__webglDepthRenderbuffer)}const sn=ft.textures;for(let In=0,Hn=sn.length;In<Hn;In++){const Nn=s.get(sn[In]);Nn.__webglTexture&&(c.deleteTexture(Nn.__webglTexture),p.memory.textures--),s.remove(sn[In])}s.remove(ft)}(Qe)}function tt(ft){const Qe=s.get(ft);c.deleteTexture(Qe.__webglTexture),delete U.get(ft.source)[Qe.__cacheKey],p.memory.textures--}let Nt=0;function kn(ft,Qe){const sn=s.get(ft);if(ft.isVideoTexture&&function Ei(ft){const Qe=p.render.frame;R.get(ft)!==Qe&&(R.set(ft,Qe),ft.update())}(ft),!1===ft.isRenderTargetTexture&&ft.version>0&&sn.__version!==ft.version){const In=ft.image;if(null===In)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==In.complete)return void En(sn,ft,Qe);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(c.TEXTURE_2D,sn.__webglTexture,c.TEXTURE0+Qe)}const Ci={1e3:c.REPEAT,[si]:c.CLAMP_TO_EDGE,1002:c.MIRRORED_REPEAT},Gi={[kr]:c.NEAREST,1004:c.NEAREST_MIPMAP_NEAREST,1005:c.NEAREST_MIPMAP_LINEAR,[yi]:c.LINEAR,1007:c.LINEAR_MIPMAP_NEAREST,[yr]:c.LINEAR_MIPMAP_LINEAR},_i={512:c.NEVER,519:c.ALWAYS,513:c.LESS,515:c.LEQUAL,514:c.EQUAL,518:c.GEQUAL,516:c.GREATER,517:c.NOTEQUAL};function ps(ft,Qe){if(Qe.type===Fs&&!1===e.has("OES_texture_float_linear")&&(Qe.magFilter===yi||1007===Qe.magFilter||1005===Qe.magFilter||Qe.magFilter===yr||Qe.minFilter===yi||1007===Qe.minFilter||1005===Qe.minFilter||Qe.minFilter===yr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),c.texParameteri(ft,c.TEXTURE_WRAP_S,Ci[Qe.wrapS]),c.texParameteri(ft,c.TEXTURE_WRAP_T,Ci[Qe.wrapT]),(ft===c.TEXTURE_3D||ft===c.TEXTURE_2D_ARRAY)&&c.texParameteri(ft,c.TEXTURE_WRAP_R,Ci[Qe.wrapR]),c.texParameteri(ft,c.TEXTURE_MAG_FILTER,Gi[Qe.magFilter]),c.texParameteri(ft,c.TEXTURE_MIN_FILTER,Gi[Qe.minFilter]),Qe.compareFunction&&(c.texParameteri(ft,c.TEXTURE_COMPARE_MODE,c.COMPARE_REF_TO_TEXTURE),c.texParameteri(ft,c.TEXTURE_COMPARE_FUNC,_i[Qe.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(Qe.magFilter===kr||1005!==Qe.minFilter&&Qe.minFilter!==yr||Qe.type===Fs&&!1===e.has("OES_texture_float_linear"))return;if(Qe.anisotropy>1||s.get(Qe).__currentAnisotropy){const sn=e.get("EXT_texture_filter_anisotropic");c.texParameterf(ft,sn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Qe.anisotropy,a.getMaxAnisotropy())),s.get(Qe).__currentAnisotropy=Qe.anisotropy}}}function Eo(ft,Qe){let sn=!1;void 0===ft.__webglInit&&(ft.__webglInit=!0,Qe.addEventListener("dispose",dt));const In=Qe.source;let Hn=U.get(In);void 0===Hn&&(Hn={},U.set(In,Hn));const Nn=function gn(ft){const Qe=[];return Qe.push(ft.wrapS),Qe.push(ft.wrapT),Qe.push(ft.wrapR||0),Qe.push(ft.magFilter),Qe.push(ft.minFilter),Qe.push(ft.anisotropy),Qe.push(ft.internalFormat),Qe.push(ft.format),Qe.push(ft.type),Qe.push(ft.generateMipmaps),Qe.push(ft.premultiplyAlpha),Qe.push(ft.flipY),Qe.push(ft.unpackAlignment),Qe.push(ft.colorSpace),Qe.join()}(Qe);if(Nn!==ft.__cacheKey){void 0===Hn[Nn]&&(Hn[Nn]={texture:c.createTexture(),usedTimes:0},p.memory.textures++,sn=!0),Hn[Nn].usedTimes++;const mr=Hn[ft.__cacheKey];void 0!==mr&&(Hn[ft.__cacheKey].usedTimes--,0===mr.usedTimes&&tt(Qe)),ft.__cacheKey=Nn,ft.__webglTexture=Hn[Nn].texture}return sn}function En(ft,Qe,sn){let In=c.TEXTURE_2D;(Qe.isDataArrayTexture||Qe.isCompressedArrayTexture)&&(In=c.TEXTURE_2D_ARRAY),Qe.isData3DTexture&&(In=c.TEXTURE_3D);const Hn=Eo(ft,Qe),Nn=Qe.source;n.bindTexture(In,ft.__webglTexture,c.TEXTURE0+sn);const mr=s.get(Nn);if(Nn.version!==mr.__version||!0===Hn){n.activeTexture(c.TEXTURE0+sn);const Ti=Lt.getPrimaries(Lt.workingColorSpace),Wi=""===Qe.colorSpace?null:Lt.getPrimaries(Qe.colorSpace),Ns=""===Qe.colorSpace||Ti===Wi?c.NONE:c.BROWSER_DEFAULT_WEBGL;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,Qe.flipY),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Qe.premultiplyAlpha),c.pixelStorei(c.UNPACK_ALIGNMENT,Qe.unpackAlignment),c.pixelStorei(c.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ns);let Xn=ve(Qe.image,!1,a.maxTextureSize);Xn=dr(Qe,Xn);const tr=u.convert(Qe.format,Qe.colorSpace),Kr=u.convert(Qe.type);let Yi,Gr=Le(Qe.internalFormat,tr,Kr,Qe.colorSpace,Qe.isVideoTexture);ps(In,Qe);const Gs=Qe.mipmaps,Es=!0!==Qe.isVideoTexture,zo=void 0===mr.__version||!0===Hn,Wt=Nn.dataReady,Ni=Ft(Qe,Xn);if(Qe.isDepthTexture)Gr=Pe(Qe.format===Kn,Qe.type),zo&&(Es?n.texStorage2D(c.TEXTURE_2D,1,Gr,Xn.width,Xn.height):n.texImage2D(c.TEXTURE_2D,0,Gr,Xn.width,Xn.height,0,tr,Kr,null));else if(Qe.isDataTexture)if(Gs.length>0){Es&&zo&&n.texStorage2D(c.TEXTURE_2D,Ni,Gr,Gs[0].width,Gs[0].height);for(let Tn=0,Fn=Gs.length;Tn<Fn;Tn++)Yi=Gs[Tn],Es?Wt&&n.texSubImage2D(c.TEXTURE_2D,Tn,0,0,Yi.width,Yi.height,tr,Kr,Yi.data):n.texImage2D(c.TEXTURE_2D,Tn,Gr,Yi.width,Yi.height,0,tr,Kr,Yi.data);Qe.generateMipmaps=!1}else Es?(zo&&n.texStorage2D(c.TEXTURE_2D,Ni,Gr,Xn.width,Xn.height),Wt&&n.texSubImage2D(c.TEXTURE_2D,0,0,0,Xn.width,Xn.height,tr,Kr,Xn.data)):n.texImage2D(c.TEXTURE_2D,0,Gr,Xn.width,Xn.height,0,tr,Kr,Xn.data);else if(Qe.isCompressedTexture)if(Qe.isCompressedArrayTexture){Es&&zo&&n.texStorage3D(c.TEXTURE_2D_ARRAY,Ni,Gr,Gs[0].width,Gs[0].height,Xn.depth);for(let Tn=0,Fn=Gs.length;Tn<Fn;Tn++)if(Yi=Gs[Tn],Qe.format!==ht)if(null!==tr)if(Es){if(Wt)if(Qe.layerUpdates.size>0){const Ui=d_(Yi.width,Yi.height,Qe.format,Qe.type);for(const Vi of Qe.layerUpdates){const Ss=Yi.data.subarray(Vi*Ui/Yi.data.BYTES_PER_ELEMENT,(Vi+1)*Ui/Yi.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(c.TEXTURE_2D_ARRAY,Tn,0,0,Vi,Yi.width,Yi.height,1,tr,Ss)}Qe.clearLayerUpdates()}else n.compressedTexSubImage3D(c.TEXTURE_2D_ARRAY,Tn,0,0,0,Yi.width,Yi.height,Xn.depth,tr,Yi.data)}else n.compressedTexImage3D(c.TEXTURE_2D_ARRAY,Tn,Gr,Yi.width,Yi.height,Xn.depth,0,Yi.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Es?Wt&&n.texSubImage3D(c.TEXTURE_2D_ARRAY,Tn,0,0,0,Yi.width,Yi.height,Xn.depth,tr,Kr,Yi.data):n.texImage3D(c.TEXTURE_2D_ARRAY,Tn,Gr,Yi.width,Yi.height,Xn.depth,0,tr,Kr,Yi.data)}else{Es&&zo&&n.texStorage2D(c.TEXTURE_2D,Ni,Gr,Gs[0].width,Gs[0].height);for(let Tn=0,Fn=Gs.length;Tn<Fn;Tn++)Yi=Gs[Tn],Qe.format!==ht?null!==tr?Es?Wt&&n.compressedTexSubImage2D(c.TEXTURE_2D,Tn,0,0,Yi.width,Yi.height,tr,Yi.data):n.compressedTexImage2D(c.TEXTURE_2D,Tn,Gr,Yi.width,Yi.height,0,Yi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Es?Wt&&n.texSubImage2D(c.TEXTURE_2D,Tn,0,0,Yi.width,Yi.height,tr,Kr,Yi.data):n.texImage2D(c.TEXTURE_2D,Tn,Gr,Yi.width,Yi.height,0,tr,Kr,Yi.data)}else if(Qe.isDataArrayTexture)if(Es){if(zo&&n.texStorage3D(c.TEXTURE_2D_ARRAY,Ni,Gr,Xn.width,Xn.height,Xn.depth),Wt)if(Qe.layerUpdates.size>0){const Tn=d_(Xn.width,Xn.height,Qe.format,Qe.type);for(const Fn of Qe.layerUpdates){const Ui=Xn.data.subarray(Fn*Tn/Xn.data.BYTES_PER_ELEMENT,(Fn+1)*Tn/Xn.data.BYTES_PER_ELEMENT);n.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,Fn,Xn.width,Xn.height,1,tr,Kr,Ui)}Qe.clearLayerUpdates()}else n.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,0,Xn.width,Xn.height,Xn.depth,tr,Kr,Xn.data)}else n.texImage3D(c.TEXTURE_2D_ARRAY,0,Gr,Xn.width,Xn.height,Xn.depth,0,tr,Kr,Xn.data);else if(Qe.isData3DTexture)Es?(zo&&n.texStorage3D(c.TEXTURE_3D,Ni,Gr,Xn.width,Xn.height,Xn.depth),Wt&&n.texSubImage3D(c.TEXTURE_3D,0,0,0,0,Xn.width,Xn.height,Xn.depth,tr,Kr,Xn.data)):n.texImage3D(c.TEXTURE_3D,0,Gr,Xn.width,Xn.height,Xn.depth,0,tr,Kr,Xn.data);else if(Qe.isFramebufferTexture){if(zo)if(Es)n.texStorage2D(c.TEXTURE_2D,Ni,Gr,Xn.width,Xn.height);else{let Tn=Xn.width,Fn=Xn.height;for(let Ui=0;Ui<Ni;Ui++)n.texImage2D(c.TEXTURE_2D,Ui,Gr,Tn,Fn,0,tr,Kr,null),Tn>>=1,Fn>>=1}}else if(Gs.length>0){if(Es&&zo){const Tn=Xi(Gs[0]);n.texStorage2D(c.TEXTURE_2D,Ni,Gr,Tn.width,Tn.height)}for(let Tn=0,Fn=Gs.length;Tn<Fn;Tn++)Yi=Gs[Tn],Es?Wt&&n.texSubImage2D(c.TEXTURE_2D,Tn,0,0,tr,Kr,Yi):n.texImage2D(c.TEXTURE_2D,Tn,Gr,tr,Kr,Yi);Qe.generateMipmaps=!1}else if(Es){if(zo){const Tn=Xi(Xn);n.texStorage2D(c.TEXTURE_2D,Ni,Gr,Tn.width,Tn.height)}Wt&&n.texSubImage2D(c.TEXTURE_2D,0,0,0,tr,Kr,Xn)}else n.texImage2D(c.TEXTURE_2D,0,Gr,tr,Kr,Xn);ae(Qe)&&Z(In),mr.__version=Nn.version,Qe.onUpdate&&Qe.onUpdate(Qe)}ft.__version=Qe.version}function ji(ft,Qe,sn,In,Hn,Nn){const mr=u.convert(sn.format,sn.colorSpace),Ti=u.convert(sn.type),Wi=Le(sn.internalFormat,mr,Ti,sn.colorSpace),Ns=s.get(Qe),Xn=s.get(sn);if(Xn.__renderTarget=Qe,!Ns.__hasExternalTextures){const tr=Math.max(1,Qe.width>>Nn),Kr=Math.max(1,Qe.height>>Nn);Hn===c.TEXTURE_3D||Hn===c.TEXTURE_2D_ARRAY?n.texImage3D(Hn,Nn,Wi,tr,Kr,Qe.depth,0,mr,Ti,null):n.texImage2D(Hn,Nn,Wi,tr,Kr,0,mr,Ti,null)}n.bindFramebuffer(c.FRAMEBUFFER,ft),Bi(Qe)?v.framebufferTexture2DMultisampleEXT(c.FRAMEBUFFER,In,Hn,Xn.__webglTexture,0,jn(Qe)):(Hn===c.TEXTURE_2D||Hn>=c.TEXTURE_CUBE_MAP_POSITIVE_X&&Hn<=c.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&c.framebufferTexture2D(c.FRAMEBUFFER,In,Hn,Xn.__webglTexture,Nn),n.bindFramebuffer(c.FRAMEBUFFER,null)}function gi(ft,Qe,sn){if(c.bindRenderbuffer(c.RENDERBUFFER,ft),Qe.depthBuffer){const In=Qe.depthTexture,Nn=Pe(Qe.stencilBuffer,In&&In.isDepthTexture?In.type:null),mr=Qe.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT,Ti=jn(Qe);Bi(Qe)?v.renderbufferStorageMultisampleEXT(c.RENDERBUFFER,Ti,Nn,Qe.width,Qe.height):sn?c.renderbufferStorageMultisample(c.RENDERBUFFER,Ti,Nn,Qe.width,Qe.height):c.renderbufferStorage(c.RENDERBUFFER,Nn,Qe.width,Qe.height),c.framebufferRenderbuffer(c.FRAMEBUFFER,mr,c.RENDERBUFFER,ft)}else{const In=Qe.textures;for(let Hn=0;Hn<In.length;Hn++){const Nn=In[Hn],mr=u.convert(Nn.format,Nn.colorSpace),Ti=u.convert(Nn.type),Wi=Le(Nn.internalFormat,mr,Ti,Nn.colorSpace),Ns=jn(Qe);sn&&!1===Bi(Qe)?c.renderbufferStorageMultisample(c.RENDERBUFFER,Ns,Wi,Qe.width,Qe.height):Bi(Qe)?v.renderbufferStorageMultisampleEXT(c.RENDERBUFFER,Ns,Wi,Qe.width,Qe.height):c.renderbufferStorage(c.RENDERBUFFER,Wi,Qe.width,Qe.height)}}c.bindRenderbuffer(c.RENDERBUFFER,null)}function Xr(ft){const Qe=s.get(ft),sn=!0===ft.isWebGLCubeRenderTarget;if(Qe.__boundDepthTexture!==ft.depthTexture){const In=ft.depthTexture;if(Qe.__depthDisposeCallback&&Qe.__depthDisposeCallback(),In){const Hn=()=>{delete Qe.__boundDepthTexture,delete Qe.__depthDisposeCallback,In.removeEventListener("dispose",Hn)};In.addEventListener("dispose",Hn),Qe.__depthDisposeCallback=Hn}Qe.__boundDepthTexture=In}if(ft.depthTexture&&!Qe.__autoAllocateDepthBuffer){if(sn)throw new Error("target.depthTexture not supported in Cube render targets");!function Sr(ft,Qe){if(Qe&&Qe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(c.FRAMEBUFFER,ft),!Qe.depthTexture||!Qe.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const In=s.get(Qe.depthTexture);In.__renderTarget=Qe,(!In.__webglTexture||Qe.depthTexture.image.width!==Qe.width||Qe.depthTexture.image.height!==Qe.height)&&(Qe.depthTexture.image.width=Qe.width,Qe.depthTexture.image.height=Qe.height,Qe.depthTexture.needsUpdate=!0),kn(Qe.depthTexture,0);const Hn=In.__webglTexture,Nn=jn(Qe);if(Qe.depthTexture.format===zn)Bi(Qe)?v.framebufferTexture2DMultisampleEXT(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.TEXTURE_2D,Hn,0,Nn):c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.TEXTURE_2D,Hn,0);else{if(Qe.depthTexture.format!==Kn)throw new Error("Unknown depthTexture format");Bi(Qe)?v.framebufferTexture2DMultisampleEXT(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,Hn,0,Nn):c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,Hn,0)}}(Qe.__webglFramebuffer,ft)}else if(sn){Qe.__webglDepthbuffer=[];for(let In=0;In<6;In++)if(n.bindFramebuffer(c.FRAMEBUFFER,Qe.__webglFramebuffer[In]),void 0===Qe.__webglDepthbuffer[In])Qe.__webglDepthbuffer[In]=c.createRenderbuffer(),gi(Qe.__webglDepthbuffer[In],ft,!1);else{const Hn=ft.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT,Nn=Qe.__webglDepthbuffer[In];c.bindRenderbuffer(c.RENDERBUFFER,Nn),c.framebufferRenderbuffer(c.FRAMEBUFFER,Hn,c.RENDERBUFFER,Nn)}}else if(n.bindFramebuffer(c.FRAMEBUFFER,Qe.__webglFramebuffer),void 0===Qe.__webglDepthbuffer)Qe.__webglDepthbuffer=c.createRenderbuffer(),gi(Qe.__webglDepthbuffer,ft,!1);else{const In=ft.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT,Hn=Qe.__webglDepthbuffer;c.bindRenderbuffer(c.RENDERBUFFER,Hn),c.framebufferRenderbuffer(c.FRAMEBUFFER,In,c.RENDERBUFFER,Hn)}n.bindFramebuffer(c.FRAMEBUFFER,null)}const ni=[],Et=[];function jn(ft){return Math.min(a.maxSamples,ft.samples)}function Bi(ft){const Qe=s.get(ft);return ft.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==Qe.__useRenderToTexture}function dr(ft,Qe){const sn=ft.colorSpace,In=ft.format,Hn=ft.type;return!0===ft.isCompressedTexture||!0===ft.isVideoTexture||sn!==ia&&""!==sn&&(Lt.getTransfer(sn)===as?(In!==ht||Hn!==ao)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",sn)),Qe}function Xi(ft){return typeof HTMLImageElement<"u"&&ft instanceof HTMLImageElement?(E.width=ft.naturalWidth||ft.width,E.height=ft.naturalHeight||ft.height):typeof VideoFrame<"u"&&ft instanceof VideoFrame?(E.width=ft.displayWidth,E.height=ft.displayHeight):(E.width=ft.width,E.height=ft.height),E}this.allocateTextureUnit=function rn(){const ft=Nt;return ft>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ft+" texture units while this GPU supports only "+a.maxTextures),Nt+=1,ft},this.resetTextureUnits=function pn(){Nt=0},this.setTexture2D=kn,this.setTexture2DArray=function _n(ft,Qe){const sn=s.get(ft);ft.version>0&&sn.__version!==ft.version?En(sn,ft,Qe):n.bindTexture(c.TEXTURE_2D_ARRAY,sn.__webglTexture,c.TEXTURE0+Qe)},this.setTexture3D=function ti(ft,Qe){const sn=s.get(ft);ft.version>0&&sn.__version!==ft.version?En(sn,ft,Qe):n.bindTexture(c.TEXTURE_3D,sn.__webglTexture,c.TEXTURE0+Qe)},this.setTextureCube=function wn(ft,Qe){const sn=s.get(ft);ft.version>0&&sn.__version!==ft.version?function ci(ft,Qe,sn){if(6!==Qe.image.length)return;const In=Eo(ft,Qe),Hn=Qe.source;n.bindTexture(c.TEXTURE_CUBE_MAP,ft.__webglTexture,c.TEXTURE0+sn);const Nn=s.get(Hn);if(Hn.version!==Nn.__version||!0===In){n.activeTexture(c.TEXTURE0+sn);const mr=Lt.getPrimaries(Lt.workingColorSpace),Ti=""===Qe.colorSpace?null:Lt.getPrimaries(Qe.colorSpace),Wi=""===Qe.colorSpace||mr===Ti?c.NONE:c.BROWSER_DEFAULT_WEBGL;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,Qe.flipY),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Qe.premultiplyAlpha),c.pixelStorei(c.UNPACK_ALIGNMENT,Qe.unpackAlignment),c.pixelStorei(c.UNPACK_COLORSPACE_CONVERSION_WEBGL,Wi);const Ns=Qe.isCompressedTexture||Qe.image[0].isCompressedTexture,Xn=Qe.image[0]&&Qe.image[0].isDataTexture,tr=[];for(let Fn=0;Fn<6;Fn++)tr[Fn]=Ns||Xn?Xn?Qe.image[Fn].image:Qe.image[Fn]:ve(Qe.image[Fn],!0,a.maxCubemapSize),tr[Fn]=dr(Qe,tr[Fn]);const Kr=tr[0],Gr=u.convert(Qe.format,Qe.colorSpace),Yi=u.convert(Qe.type),Gs=Le(Qe.internalFormat,Gr,Yi,Qe.colorSpace),Es=!0!==Qe.isVideoTexture,zo=void 0===Nn.__version||!0===In,Wt=Hn.dataReady;let Tn,Ni=Ft(Qe,Kr);if(ps(c.TEXTURE_CUBE_MAP,Qe),Ns){Es&&zo&&n.texStorage2D(c.TEXTURE_CUBE_MAP,Ni,Gs,Kr.width,Kr.height);for(let Fn=0;Fn<6;Fn++){Tn=tr[Fn].mipmaps;for(let Ui=0;Ui<Tn.length;Ui++){const Vi=Tn[Ui];Qe.format!==ht?null!==Gr?Es?Wt&&n.compressedTexSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Fn,Ui,0,0,Vi.width,Vi.height,Gr,Vi.data):n.compressedTexImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Fn,Ui,Gs,Vi.width,Vi.height,0,Vi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Es?Wt&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Fn,Ui,0,0,Vi.width,Vi.height,Gr,Yi,Vi.data):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Fn,Ui,Gs,Vi.width,Vi.height,0,Gr,Yi,Vi.data)}}}else{if(Tn=Qe.mipmaps,Es&&zo){Tn.length>0&&Ni++;const Fn=Xi(tr[0]);n.texStorage2D(c.TEXTURE_CUBE_MAP,Ni,Gs,Fn.width,Fn.height)}for(let Fn=0;Fn<6;Fn++)if(Xn){Es?Wt&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Fn,0,0,0,tr[Fn].width,tr[Fn].height,Gr,Yi,tr[Fn].data):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Fn,0,Gs,tr[Fn].width,tr[Fn].height,0,Gr,Yi,tr[Fn].data);for(let Ui=0;Ui<Tn.length;Ui++){const Ss=Tn[Ui].image[Fn].image;Es?Wt&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Fn,Ui+1,0,0,Ss.width,Ss.height,Gr,Yi,Ss.data):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Fn,Ui+1,Gs,Ss.width,Ss.height,0,Gr,Yi,Ss.data)}}else{Es?Wt&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Fn,0,0,0,Gr,Yi,tr[Fn]):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Fn,0,Gs,Gr,Yi,tr[Fn]);for(let Ui=0;Ui<Tn.length;Ui++){const Vi=Tn[Ui];Es?Wt&&n.texSubImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Fn,Ui+1,0,0,Gr,Yi,Vi.image[Fn]):n.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+Fn,Ui+1,Gs,Gr,Yi,Vi.image[Fn])}}}ae(Qe)&&Z(c.TEXTURE_CUBE_MAP),Nn.__version=Hn.version,Qe.onUpdate&&Qe.onUpdate(Qe)}ft.__version=Qe.version}(sn,ft,Qe):n.bindTexture(c.TEXTURE_CUBE_MAP,sn.__webglTexture,c.TEXTURE0+Qe)},this.rebindTextures=function Jr(ft,Qe,sn){const In=s.get(ft);void 0!==Qe&&ji(In.__webglFramebuffer,ft,ft.texture,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,0),void 0!==sn&&Xr(ft)},this.setupRenderTarget=function eo(ft){const Qe=ft.texture,sn=s.get(ft),In=s.get(Qe);ft.addEventListener("dispose",gt);const Hn=ft.textures,Nn=!0===ft.isWebGLCubeRenderTarget,mr=Hn.length>1;if(mr||(void 0===In.__webglTexture&&(In.__webglTexture=c.createTexture()),In.__version=Qe.version,p.memory.textures++),Nn){sn.__webglFramebuffer=[];for(let Ti=0;Ti<6;Ti++)if(Qe.mipmaps&&Qe.mipmaps.length>0){sn.__webglFramebuffer[Ti]=[];for(let Wi=0;Wi<Qe.mipmaps.length;Wi++)sn.__webglFramebuffer[Ti][Wi]=c.createFramebuffer()}else sn.__webglFramebuffer[Ti]=c.createFramebuffer()}else{if(Qe.mipmaps&&Qe.mipmaps.length>0){sn.__webglFramebuffer=[];for(let Ti=0;Ti<Qe.mipmaps.length;Ti++)sn.__webglFramebuffer[Ti]=c.createFramebuffer()}else sn.__webglFramebuffer=c.createFramebuffer();if(mr)for(let Ti=0,Wi=Hn.length;Ti<Wi;Ti++){const Ns=s.get(Hn[Ti]);void 0===Ns.__webglTexture&&(Ns.__webglTexture=c.createTexture(),p.memory.textures++)}if(ft.samples>0&&!1===Bi(ft)){sn.__webglMultisampledFramebuffer=c.createFramebuffer(),sn.__webglColorRenderbuffer=[],n.bindFramebuffer(c.FRAMEBUFFER,sn.__webglMultisampledFramebuffer);for(let Ti=0;Ti<Hn.length;Ti++){const Wi=Hn[Ti];sn.__webglColorRenderbuffer[Ti]=c.createRenderbuffer(),c.bindRenderbuffer(c.RENDERBUFFER,sn.__webglColorRenderbuffer[Ti]);const Ns=u.convert(Wi.format,Wi.colorSpace),Xn=u.convert(Wi.type),tr=Le(Wi.internalFormat,Ns,Xn,Wi.colorSpace,!0===ft.isXRRenderTarget),Kr=jn(ft);c.renderbufferStorageMultisample(c.RENDERBUFFER,Kr,tr,ft.width,ft.height),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0+Ti,c.RENDERBUFFER,sn.__webglColorRenderbuffer[Ti])}c.bindRenderbuffer(c.RENDERBUFFER,null),ft.depthBuffer&&(sn.__webglDepthRenderbuffer=c.createRenderbuffer(),gi(sn.__webglDepthRenderbuffer,ft,!0)),n.bindFramebuffer(c.FRAMEBUFFER,null)}}if(Nn){n.bindTexture(c.TEXTURE_CUBE_MAP,In.__webglTexture),ps(c.TEXTURE_CUBE_MAP,Qe);for(let Ti=0;Ti<6;Ti++)if(Qe.mipmaps&&Qe.mipmaps.length>0)for(let Wi=0;Wi<Qe.mipmaps.length;Wi++)ji(sn.__webglFramebuffer[Ti][Wi],ft,Qe,c.COLOR_ATTACHMENT0,c.TEXTURE_CUBE_MAP_POSITIVE_X+Ti,Wi);else ji(sn.__webglFramebuffer[Ti],ft,Qe,c.COLOR_ATTACHMENT0,c.TEXTURE_CUBE_MAP_POSITIVE_X+Ti,0);ae(Qe)&&Z(c.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(mr){for(let Ti=0,Wi=Hn.length;Ti<Wi;Ti++){const Ns=Hn[Ti],Xn=s.get(Ns);n.bindTexture(c.TEXTURE_2D,Xn.__webglTexture),ps(c.TEXTURE_2D,Ns),ji(sn.__webglFramebuffer,ft,Ns,c.COLOR_ATTACHMENT0+Ti,c.TEXTURE_2D,0),ae(Ns)&&Z(c.TEXTURE_2D)}n.unbindTexture()}else{let Ti=c.TEXTURE_2D;if((ft.isWebGL3DRenderTarget||ft.isWebGLArrayRenderTarget)&&(Ti=ft.isWebGL3DRenderTarget?c.TEXTURE_3D:c.TEXTURE_2D_ARRAY),n.bindTexture(Ti,In.__webglTexture),ps(Ti,Qe),Qe.mipmaps&&Qe.mipmaps.length>0)for(let Wi=0;Wi<Qe.mipmaps.length;Wi++)ji(sn.__webglFramebuffer[Wi],ft,Qe,c.COLOR_ATTACHMENT0,Ti,Wi);else ji(sn.__webglFramebuffer,ft,Qe,c.COLOR_ATTACHMENT0,Ti,0);ae(Qe)&&Z(Ti),n.unbindTexture()}ft.depthBuffer&&Xr(ft)},this.updateRenderTargetMipmap=function Bn(ft){const Qe=ft.textures;for(let sn=0,In=Qe.length;sn<In;sn++){const Hn=Qe[sn];if(ae(Hn)){const Nn=Ue(ft),mr=s.get(Hn).__webglTexture;n.bindTexture(Nn,mr),Z(Nn),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function vr(ft){if(ft.samples>0)if(!1===Bi(ft)){const Qe=ft.textures,sn=ft.width,In=ft.height;let Hn=c.COLOR_BUFFER_BIT;const Nn=ft.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT,mr=s.get(ft),Ti=Qe.length>1;if(Ti)for(let Wi=0;Wi<Qe.length;Wi++)n.bindFramebuffer(c.FRAMEBUFFER,mr.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0+Wi,c.RENDERBUFFER,null),n.bindFramebuffer(c.FRAMEBUFFER,mr.__webglFramebuffer),c.framebufferTexture2D(c.DRAW_FRAMEBUFFER,c.COLOR_ATTACHMENT0+Wi,c.TEXTURE_2D,null,0);n.bindFramebuffer(c.READ_FRAMEBUFFER,mr.__webglMultisampledFramebuffer),n.bindFramebuffer(c.DRAW_FRAMEBUFFER,mr.__webglFramebuffer);for(let Wi=0;Wi<Qe.length;Wi++){if(ft.resolveDepthBuffer&&(ft.depthBuffer&&(Hn|=c.DEPTH_BUFFER_BIT),ft.stencilBuffer&&ft.resolveStencilBuffer&&(Hn|=c.STENCIL_BUFFER_BIT)),Ti){c.framebufferRenderbuffer(c.READ_FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,mr.__webglColorRenderbuffer[Wi]);const Ns=s.get(Qe[Wi]).__webglTexture;c.framebufferTexture2D(c.DRAW_FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,Ns,0)}c.blitFramebuffer(0,0,sn,In,0,0,sn,In,Hn,c.NEAREST),!0===b&&(ni.length=0,Et.length=0,ni.push(c.COLOR_ATTACHMENT0+Wi),ft.depthBuffer&&!1===ft.resolveDepthBuffer&&(ni.push(Nn),Et.push(Nn),c.invalidateFramebuffer(c.DRAW_FRAMEBUFFER,Et)),c.invalidateFramebuffer(c.READ_FRAMEBUFFER,ni))}if(n.bindFramebuffer(c.READ_FRAMEBUFFER,null),n.bindFramebuffer(c.DRAW_FRAMEBUFFER,null),Ti)for(let Wi=0;Wi<Qe.length;Wi++){n.bindFramebuffer(c.FRAMEBUFFER,mr.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0+Wi,c.RENDERBUFFER,mr.__webglColorRenderbuffer[Wi]);const Ns=s.get(Qe[Wi]).__webglTexture;n.bindFramebuffer(c.FRAMEBUFFER,mr.__webglFramebuffer),c.framebufferTexture2D(c.DRAW_FRAMEBUFFER,c.COLOR_ATTACHMENT0+Wi,c.TEXTURE_2D,Ns,0)}n.bindFramebuffer(c.DRAW_FRAMEBUFFER,mr.__webglMultisampledFramebuffer)}else ft.depthBuffer&&!1===ft.resolveDepthBuffer&&b&&c.invalidateFramebuffer(c.DRAW_FRAMEBUFFER,[ft.stencilBuffer?c.DEPTH_STENCIL_ATTACHMENT:c.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=Xr,this.setupFrameBufferTexture=ji,this.useMultisampledRTT=Bi}function L1(c,e){return{convert:function n(s,a=""){let u;const p=Lt.getTransfer(a);if(s===ao)return c.UNSIGNED_BYTE;if(s===Go)return c.UNSIGNED_SHORT_4_4_4_4;if(s===Ye)return c.UNSIGNED_SHORT_5_5_5_1;if(s===G)return c.UNSIGNED_INT_5_9_9_9_REV;if(s===ms)return c.BYTE;if(s===sr)return c.SHORT;if(s===Ms)return c.UNSIGNED_SHORT;if(s===to)return c.INT;if(s===Os)return c.UNSIGNED_INT;if(s===Fs)return c.FLOAT;if(s===lo)return c.HALF_FLOAT;if(s===ce)return c.ALPHA;if(s===qe)return c.RGB;if(s===ht)return c.RGBA;if(s===tn)return c.LUMINANCE;if(s===hn)return c.LUMINANCE_ALPHA;if(s===zn)return c.DEPTH_COMPONENT;if(s===Kn)return c.DEPTH_STENCIL;if(s===qn)return c.RED;if(s===Or)return c.RED_INTEGER;if(s===Fr)return c.RG;if(s===Br)return c.RG_INTEGER;if(s===co)return c.RGBA_INTEGER;if(s===Rr||s===Ur||s===Ls||s===Ws)if(p===as){if(u=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===u)return null;if(s===Rr)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Ur)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Ls)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Ws)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(u=e.get("WEBGL_compressed_texture_s3tc"),null===u)return null;if(s===Rr)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Ur)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Ls)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Ws)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(s===Qs||s===As||s===Po||s===Oo){if(u=e.get("WEBGL_compressed_texture_pvrtc"),null===u)return null;if(s===Qs)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===As)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Po)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Oo)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===zi||s===Hr||s===Bl){if(u=e.get("WEBGL_compressed_texture_etc"),null===u)return null;if(s===zi||s===Hr)return p===as?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(s===Bl)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}if(s===ks||s===El||s===ys||s===Sl||s===ca||s===br||s===ha||s===Ra||s===js||s===za||s===fa||s===cl||s===no||s===Fo){if(u=e.get("WEBGL_compressed_texture_astc"),null===u)return null;if(s===ks)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===El)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===ys)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Sl)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===ca)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===br)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===ha)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Ra)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===js)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===za)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===fa)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===cl)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===no)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Fo)return p===as?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}if(s===Qo||s===Ml||s===Ga){if(u=e.get("EXT_texture_compression_bptc"),null===u)return null;if(s===Qo)return p===as?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===Ml)return u.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Ga)return u.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(s===pa||s===Na||s===Yo||s===Pa){if(u=e.get("EXT_texture_compression_rgtc"),null===u)return null;if(s===Qo)return u.COMPRESSED_RED_RGTC1_EXT;if(s===Na)return u.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Yo)return u.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Pa)return u.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===O?c.UNSIGNED_INT_24_8:void 0!==c[s]?c[s]:null}}}class e0 extends aa{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Au extends Qt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Zm={type:"move"};class t0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Au,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Au,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new lt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new lt),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Au,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new lt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new lt),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const s of e.hand.values())this._getHandJoint(n,s)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,n,s){let a=null,u=null,p=null;const v=this._targetRay,b=this._grip,E=this._hand;if(e&&"visible-blurred"!==n.session.visibilityState){if(E&&e.hand){p=!0;for(const ve of e.hand.values()){const ae=n.getJointPose(ve,s),Z=this._getHandJoint(E,ve);null!==ae&&(Z.matrix.fromArray(ae.transform.matrix),Z.matrix.decompose(Z.position,Z.rotation,Z.scale),Z.matrixWorldNeedsUpdate=!0,Z.jointRadius=ae.radius),Z.visible=null!==ae}const U=E.joints["index-finger-tip"].position.distanceTo(E.joints["thumb-tip"].position),$=.02,re=.005;E.inputState.pinching&&U>$+re?(E.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!E.inputState.pinching&&U<=$-re&&(E.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==b&&e.gripSpace&&(u=n.getPose(e.gripSpace,s),null!==u&&(b.matrix.fromArray(u.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,u.linearVelocity?(b.hasLinearVelocity=!0,b.linearVelocity.copy(u.linearVelocity)):b.hasLinearVelocity=!1,u.angularVelocity?(b.hasAngularVelocity=!0,b.angularVelocity.copy(u.angularVelocity)):b.hasAngularVelocity=!1));null!==v&&(a=n.getPose(e.targetRaySpace,s),null===a&&null!==u&&(a=u),null!==a&&(v.matrix.fromArray(a.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,a.linearVelocity?(v.hasLinearVelocity=!0,v.linearVelocity.copy(a.linearVelocity)):v.hasLinearVelocity=!1,a.angularVelocity?(v.hasAngularVelocity=!0,v.angularVelocity.copy(a.angularVelocity)):v.hasAngularVelocity=!1,this.dispatchEvent(Zm)))}return null!==v&&(v.visible=null!==a),null!==b&&(b.visible=null!==u),null!==E&&(E.visible=null!==p),this}_getHandJoint(e,n){if(void 0===e.joints[n.jointName]){const s=new Au;s.matrixAutoUpdate=!1,s.visible=!1,e.joints[n.jointName]=s,e.add(s)}return e.joints[n.jointName]}}class k1{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,s){if(null===this.texture){const a=new Xt;e.properties.get(a).__webglTexture=n.texture,(n.depthNear!=s.depthNear||n.depthFar!=s.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=a}}getMesh(e){if(null!==this.texture&&null===this.mesh){const n=e.cameras[0].viewport,s=new Uo({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new so(new Yu(20,20),s)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class p_ extends Ba{constructor(e,n){super();const s=this;let a=null,u=1,p=null,v="local-floor",b=1,E=null,R=null,B=null,U=null,$=null,re=null;const ve=new k1,ae=n.getContextAttributes();let Z=null,Ue=null;const Le=[],Pe=[],Ft=new yn;let dt=null;const gt=new aa;gt.viewport=new Kt;const bt=new aa;bt.viewport=new Kt;const tt=[gt,bt],$e=new e0;let Nt=null,pn=null;function rn(En){const ci=Pe.indexOf(En.inputSource);if(-1===ci)return;const ji=Le[ci];void 0!==ji&&(ji.update(En.inputSource,En.frame,E||p),ji.dispatchEvent({type:En.type,data:En.inputSource}))}function gn(){a.removeEventListener("select",rn),a.removeEventListener("selectstart",rn),a.removeEventListener("selectend",rn),a.removeEventListener("squeeze",rn),a.removeEventListener("squeezestart",rn),a.removeEventListener("squeezeend",rn),a.removeEventListener("end",gn),a.removeEventListener("inputsourceschange",kn);for(let En=0;En<Le.length;En++){const ci=Pe[En];null!==ci&&(Pe[En]=null,Le[En].disconnect(ci))}Nt=null,pn=null,ve.reset(),e.setRenderTarget(Z),$=null,U=null,B=null,a=null,Ue=null,Eo.stop(),s.isPresenting=!1,e.setPixelRatio(dt),e.setSize(Ft.width,Ft.height,!1),s.dispatchEvent({type:"sessionend"})}function kn(En){for(let ci=0;ci<En.removed.length;ci++){const ji=En.removed[ci],gi=Pe.indexOf(ji);gi>=0&&(Pe[gi]=null,Le[gi].disconnect(ji))}for(let ci=0;ci<En.added.length;ci++){const ji=En.added[ci];let gi=Pe.indexOf(ji);if(-1===gi){for(let Xr=0;Xr<Le.length;Xr++){if(Xr>=Pe.length){Pe.push(ji),gi=Xr;break}if(null===Pe[Xr]){Pe[Xr]=ji,gi=Xr;break}}if(-1===gi)break}const Sr=Le[gi];Sr&&Sr.connect(ji)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(En){let ci=Le[En];return void 0===ci&&(ci=new t0,Le[En]=ci),ci.getTargetRaySpace()},this.getControllerGrip=function(En){let ci=Le[En];return void 0===ci&&(ci=new t0,Le[En]=ci),ci.getGripSpace()},this.getHand=function(En){let ci=Le[En];return void 0===ci&&(ci=new t0,Le[En]=ci),ci.getHandSpace()},this.setFramebufferScaleFactor=function(En){u=En,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(En){v=En,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return E||p},this.setReferenceSpace=function(En){E=En},this.getBaseLayer=function(){return null!==U?U:$},this.getBinding=function(){return B},this.getFrame=function(){return re},this.getSession=function(){return a},this.setSession=function(){var En=(0,X.A)(function*(ci){if(a=ci,null!==a){if(Z=e.getRenderTarget(),a.addEventListener("select",rn),a.addEventListener("selectstart",rn),a.addEventListener("selectend",rn),a.addEventListener("squeeze",rn),a.addEventListener("squeezestart",rn),a.addEventListener("squeezeend",rn),a.addEventListener("end",gn),a.addEventListener("inputsourceschange",kn),!0!==ae.xrCompatible&&(yield n.makeXRCompatible()),dt=e.getPixelRatio(),e.getSize(Ft),void 0===a.renderState.layers)$=new XRWebGLLayer(a,n,{antialias:ae.antialias,alpha:!0,depth:ae.depth,stencil:ae.stencil,framebufferScaleFactor:u}),a.updateRenderState({baseLayer:$}),e.setPixelRatio(1),e.setSize($.framebufferWidth,$.framebufferHeight,!1),Ue=new Dr($.framebufferWidth,$.framebufferHeight,{format:ht,type:ao,colorSpace:e.outputColorSpace,stencilBuffer:ae.stencil});else{let ji=null,gi=null,Sr=null;ae.depth&&(Sr=ae.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ji=ae.stencil?Kn:zn,gi=ae.stencil?O:Os);const Xr={colorFormat:n.RGBA8,depthFormat:Sr,scaleFactor:u};B=new XRWebGLBinding(a,n),U=B.createProjectionLayer(Xr),a.updateRenderState({layers:[U]}),e.setPixelRatio(1),e.setSize(U.textureWidth,U.textureHeight,!1),Ue=new Dr(U.textureWidth,U.textureHeight,{format:ht,type:ao,depthTexture:new Ec(U.textureWidth,U.textureHeight,gi,void 0,void 0,void 0,void 0,void 0,void 0,ji),stencilBuffer:ae.stencil,colorSpace:e.outputColorSpace,samples:ae.antialias?4:0,resolveDepthBuffer:!1===U.ignoreDepthValues})}Ue.isXRRenderTarget=!0,this.setFoveation(b),E=null,p=yield a.requestReferenceSpace(v),Eo.setContext(a),Eo.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}});return function(ci){return En.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==a)return a.environmentBlendMode},this.getDepthTexture=function(){return ve.getDepthTexture()};const _n=new lt,ti=new lt;function Ci(En,ci){null===ci?En.matrixWorld.copy(En.matrix):En.matrixWorld.multiplyMatrices(ci.matrixWorld,En.matrix),En.matrixWorldInverse.copy(En.matrixWorld).invert()}this.updateCamera=function(En){if(null===a)return;let ci=En.near,ji=En.far;null!==ve.texture&&(ve.depthNear>0&&(ci=ve.depthNear),ve.depthFar>0&&(ji=ve.depthFar)),$e.near=bt.near=gt.near=ci,$e.far=bt.far=gt.far=ji,(Nt!==$e.near||pn!==$e.far)&&(a.updateRenderState({depthNear:$e.near,depthFar:$e.far}),Nt=$e.near,pn=$e.far),gt.layers.mask=2|En.layers.mask,bt.layers.mask=4|En.layers.mask,$e.layers.mask=gt.layers.mask|bt.layers.mask;const gi=En.parent,Sr=$e.cameras;Ci($e,gi);for(let Xr=0;Xr<Sr.length;Xr++)Ci(Sr[Xr],gi);2===Sr.length?function wn(En,ci,ji){_n.setFromMatrixPosition(ci.matrixWorld),ti.setFromMatrixPosition(ji.matrixWorld);const gi=_n.distanceTo(ti),Sr=ci.projectionMatrix.elements,Xr=ji.projectionMatrix.elements,Jr=Sr[14]/(Sr[10]-1),eo=Sr[14]/(Sr[10]+1),Bn=(Sr[9]+1)/Sr[5],ni=(Sr[9]-1)/Sr[5],Et=(Sr[8]-1)/Sr[0],vr=(Xr[8]+1)/Xr[0],jn=Jr*Et,Bi=Jr*vr,Ei=gi/(-Et+vr),dr=Ei*-Et;if(ci.matrixWorld.decompose(En.position,En.quaternion,En.scale),En.translateX(dr),En.translateZ(Ei),En.matrixWorld.compose(En.position,En.quaternion,En.scale),En.matrixWorldInverse.copy(En.matrixWorld).invert(),-1===Sr[10])En.projectionMatrix.copy(ci.projectionMatrix),En.projectionMatrixInverse.copy(ci.projectionMatrixInverse);else{const Xi=Jr+Ei,ft=eo+Ei;En.projectionMatrix.makePerspective(jn-dr,Bi+(gi-dr),Bn*eo/ft*Xi,ni*eo/ft*Xi,Xi,ft),En.projectionMatrixInverse.copy(En.projectionMatrix).invert()}}($e,gt,bt):$e.projectionMatrix.copy(gt.projectionMatrix),function Gi(En,ci,ji){null===ji?En.matrix.copy(ci.matrixWorld):(En.matrix.copy(ji.matrixWorld),En.matrix.invert(),En.matrix.multiply(ci.matrixWorld)),En.matrix.decompose(En.position,En.quaternion,En.scale),En.updateMatrixWorld(!0),En.projectionMatrix.copy(ci.projectionMatrix),En.projectionMatrixInverse.copy(ci.projectionMatrixInverse),En.isPerspectiveCamera&&(En.fov=2*Xa*Math.atan(1/En.projectionMatrix.elements[5]),En.zoom=1)}(En,$e,gi)},this.getCamera=function(){return $e},this.getFoveation=function(){if(null!==U||null!==$)return b},this.setFoveation=function(En){b=En,null!==U&&(U.fixedFoveation=En),null!==$&&void 0!==$.fixedFoveation&&($.fixedFoveation=En)},this.hasDepthSensing=function(){return null!==ve.texture},this.getDepthSensingMesh=function(){return ve.getMesh($e)};let _i=null;const Eo=new vp;Eo.setAnimationLoop(function ps(En,ci){if(R=ci.getViewerPose(E||p),re=ci,null!==R){const ji=R.views;null!==$&&(e.setRenderTargetFramebuffer(Ue,$.framebuffer),e.setRenderTarget(Ue));let gi=!1;ji.length!==$e.cameras.length&&($e.cameras.length=0,gi=!0);for(let Xr=0;Xr<ji.length;Xr++){const Jr=ji[Xr];let eo=null;if(null!==$)eo=$.getViewport(Jr);else{const ni=B.getViewSubImage(U,Jr);eo=ni.viewport,0===Xr&&(e.setRenderTargetTextures(Ue,ni.colorTexture,U.ignoreDepthValues?void 0:ni.depthStencilTexture),e.setRenderTarget(Ue))}let Bn=tt[Xr];void 0===Bn&&(Bn=new aa,Bn.layers.enable(Xr),Bn.viewport=new Kt,tt[Xr]=Bn),Bn.matrix.fromArray(Jr.transform.matrix),Bn.matrix.decompose(Bn.position,Bn.quaternion,Bn.scale),Bn.projectionMatrix.fromArray(Jr.projectionMatrix),Bn.projectionMatrixInverse.copy(Bn.projectionMatrix).invert(),Bn.viewport.set(eo.x,eo.y,eo.width,eo.height),0===Xr&&($e.matrix.copy(Bn.matrix),$e.matrix.decompose($e.position,$e.quaternion,$e.scale)),!0===gi&&$e.cameras.push(Bn)}const Sr=a.enabledFeatures;if(Sr&&Sr.includes("depth-sensing")){const Xr=B.getDepthInformation(ji[0]);Xr&&Xr.isValid&&Xr.texture&&ve.init(e,Xr,a.renderState)}}for(let ji=0;ji<Le.length;ji++){const gi=Pe[ji],Sr=Le[ji];null!==gi&&void 0!==Sr&&Sr.update(gi,ci,E||p)}_i&&_i(En,ci),ci.detectedPlanes&&s.dispatchEvent({type:"planesdetected",data:ci}),re=null}),this.setAnimationLoop=function(En){_i=En},this.dispose=function(){}}}const Uc=new Dl,Sc=new gr;function eu(c,e){function n(ae,Z){!0===ae.matrixAutoUpdate&&ae.updateMatrix(),Z.value.copy(ae.matrix)}function u(ae,Z){ae.opacity.value=Z.opacity,Z.color&&ae.diffuse.value.copy(Z.color),Z.emissive&&ae.emissive.value.copy(Z.emissive).multiplyScalar(Z.emissiveIntensity),Z.map&&(ae.map.value=Z.map,n(Z.map,ae.mapTransform)),Z.alphaMap&&(ae.alphaMap.value=Z.alphaMap,n(Z.alphaMap,ae.alphaMapTransform)),Z.bumpMap&&(ae.bumpMap.value=Z.bumpMap,n(Z.bumpMap,ae.bumpMapTransform),ae.bumpScale.value=Z.bumpScale,1===Z.side&&(ae.bumpScale.value*=-1)),Z.normalMap&&(ae.normalMap.value=Z.normalMap,n(Z.normalMap,ae.normalMapTransform),ae.normalScale.value.copy(Z.normalScale),1===Z.side&&ae.normalScale.value.negate()),Z.displacementMap&&(ae.displacementMap.value=Z.displacementMap,n(Z.displacementMap,ae.displacementMapTransform),ae.displacementScale.value=Z.displacementScale,ae.displacementBias.value=Z.displacementBias),Z.emissiveMap&&(ae.emissiveMap.value=Z.emissiveMap,n(Z.emissiveMap,ae.emissiveMapTransform)),Z.specularMap&&(ae.specularMap.value=Z.specularMap,n(Z.specularMap,ae.specularMapTransform)),Z.alphaTest>0&&(ae.alphaTest.value=Z.alphaTest);const Ue=e.get(Z),Le=Ue.envMap,Pe=Ue.envMapRotation;Le&&(ae.envMap.value=Le,Uc.copy(Pe),Uc.x*=-1,Uc.y*=-1,Uc.z*=-1,Le.isCubeTexture&&!1===Le.isRenderTargetTexture&&(Uc.y*=-1,Uc.z*=-1),ae.envMapRotation.value.setFromMatrix4(Sc.makeRotationFromEuler(Uc)),ae.flipEnvMap.value=Le.isCubeTexture&&!1===Le.isRenderTargetTexture?-1:1,ae.reflectivity.value=Z.reflectivity,ae.ior.value=Z.ior,ae.refractionRatio.value=Z.refractionRatio),Z.lightMap&&(ae.lightMap.value=Z.lightMap,ae.lightMapIntensity.value=Z.lightMapIntensity,n(Z.lightMap,ae.lightMapTransform)),Z.aoMap&&(ae.aoMap.value=Z.aoMap,ae.aoMapIntensity.value=Z.aoMapIntensity,n(Z.aoMap,ae.aoMapTransform))}return{refreshFogUniforms:function s(ae,Z){Z.color.getRGB(ae.fogColor.value,Ku(c)),Z.isFog?(ae.fogNear.value=Z.near,ae.fogFar.value=Z.far):Z.isFogExp2&&(ae.fogDensity.value=Z.density)},refreshMaterialUniforms:function a(ae,Z,Ue,Le,Pe){Z.isMeshBasicMaterial||Z.isMeshLambertMaterial?u(ae,Z):Z.isMeshToonMaterial?(u(ae,Z),function B(ae,Z){Z.gradientMap&&(ae.gradientMap.value=Z.gradientMap)}(ae,Z)):Z.isMeshPhongMaterial?(u(ae,Z),function R(ae,Z){ae.specular.value.copy(Z.specular),ae.shininess.value=Math.max(Z.shininess,1e-4)}(ae,Z)):Z.isMeshStandardMaterial?(u(ae,Z),function U(ae,Z){ae.metalness.value=Z.metalness,Z.metalnessMap&&(ae.metalnessMap.value=Z.metalnessMap,n(Z.metalnessMap,ae.metalnessMapTransform)),ae.roughness.value=Z.roughness,Z.roughnessMap&&(ae.roughnessMap.value=Z.roughnessMap,n(Z.roughnessMap,ae.roughnessMapTransform)),Z.envMap&&(ae.envMapIntensity.value=Z.envMapIntensity)}(ae,Z),Z.isMeshPhysicalMaterial&&function $(ae,Z,Ue){ae.ior.value=Z.ior,Z.sheen>0&&(ae.sheenColor.value.copy(Z.sheenColor).multiplyScalar(Z.sheen),ae.sheenRoughness.value=Z.sheenRoughness,Z.sheenColorMap&&(ae.sheenColorMap.value=Z.sheenColorMap,n(Z.sheenColorMap,ae.sheenColorMapTransform)),Z.sheenRoughnessMap&&(ae.sheenRoughnessMap.value=Z.sheenRoughnessMap,n(Z.sheenRoughnessMap,ae.sheenRoughnessMapTransform))),Z.clearcoat>0&&(ae.clearcoat.value=Z.clearcoat,ae.clearcoatRoughness.value=Z.clearcoatRoughness,Z.clearcoatMap&&(ae.clearcoatMap.value=Z.clearcoatMap,n(Z.clearcoatMap,ae.clearcoatMapTransform)),Z.clearcoatRoughnessMap&&(ae.clearcoatRoughnessMap.value=Z.clearcoatRoughnessMap,n(Z.clearcoatRoughnessMap,ae.clearcoatRoughnessMapTransform)),Z.clearcoatNormalMap&&(ae.clearcoatNormalMap.value=Z.clearcoatNormalMap,n(Z.clearcoatNormalMap,ae.clearcoatNormalMapTransform),ae.clearcoatNormalScale.value.copy(Z.clearcoatNormalScale),1===Z.side&&ae.clearcoatNormalScale.value.negate())),Z.dispersion>0&&(ae.dispersion.value=Z.dispersion),Z.iridescence>0&&(ae.iridescence.value=Z.iridescence,ae.iridescenceIOR.value=Z.iridescenceIOR,ae.iridescenceThicknessMinimum.value=Z.iridescenceThicknessRange[0],ae.iridescenceThicknessMaximum.value=Z.iridescenceThicknessRange[1],Z.iridescenceMap&&(ae.iridescenceMap.value=Z.iridescenceMap,n(Z.iridescenceMap,ae.iridescenceMapTransform)),Z.iridescenceThicknessMap&&(ae.iridescenceThicknessMap.value=Z.iridescenceThicknessMap,n(Z.iridescenceThicknessMap,ae.iridescenceThicknessMapTransform))),Z.transmission>0&&(ae.transmission.value=Z.transmission,ae.transmissionSamplerMap.value=Ue.texture,ae.transmissionSamplerSize.value.set(Ue.width,Ue.height),Z.transmissionMap&&(ae.transmissionMap.value=Z.transmissionMap,n(Z.transmissionMap,ae.transmissionMapTransform)),ae.thickness.value=Z.thickness,Z.thicknessMap&&(ae.thicknessMap.value=Z.thicknessMap,n(Z.thicknessMap,ae.thicknessMapTransform)),ae.attenuationDistance.value=Z.attenuationDistance,ae.attenuationColor.value.copy(Z.attenuationColor)),Z.anisotropy>0&&(ae.anisotropyVector.value.set(Z.anisotropy*Math.cos(Z.anisotropyRotation),Z.anisotropy*Math.sin(Z.anisotropyRotation)),Z.anisotropyMap&&(ae.anisotropyMap.value=Z.anisotropyMap,n(Z.anisotropyMap,ae.anisotropyMapTransform))),ae.specularIntensity.value=Z.specularIntensity,ae.specularColor.value.copy(Z.specularColor),Z.specularColorMap&&(ae.specularColorMap.value=Z.specularColorMap,n(Z.specularColorMap,ae.specularColorMapTransform)),Z.specularIntensityMap&&(ae.specularIntensityMap.value=Z.specularIntensityMap,n(Z.specularIntensityMap,ae.specularIntensityMapTransform))}(ae,Z,Pe)):Z.isMeshMatcapMaterial?(u(ae,Z),function re(ae,Z){Z.matcap&&(ae.matcap.value=Z.matcap)}(ae,Z)):Z.isMeshDepthMaterial?u(ae,Z):Z.isMeshDistanceMaterial?(u(ae,Z),function ve(ae,Z){const Ue=e.get(Z).light;ae.referencePosition.value.setFromMatrixPosition(Ue.matrixWorld),ae.nearDistance.value=Ue.shadow.camera.near,ae.farDistance.value=Ue.shadow.camera.far}(ae,Z)):Z.isMeshNormalMaterial?u(ae,Z):Z.isLineBasicMaterial?(function p(ae,Z){ae.diffuse.value.copy(Z.color),ae.opacity.value=Z.opacity,Z.map&&(ae.map.value=Z.map,n(Z.map,ae.mapTransform))}(ae,Z),Z.isLineDashedMaterial&&function v(ae,Z){ae.dashSize.value=Z.dashSize,ae.totalSize.value=Z.dashSize+Z.gapSize,ae.scale.value=Z.scale}(ae,Z)):Z.isPointsMaterial?function b(ae,Z,Ue,Le){ae.diffuse.value.copy(Z.color),ae.opacity.value=Z.opacity,ae.size.value=Z.size*Ue,ae.scale.value=.5*Le,Z.map&&(ae.map.value=Z.map,n(Z.map,ae.uvTransform)),Z.alphaMap&&(ae.alphaMap.value=Z.alphaMap,n(Z.alphaMap,ae.alphaMapTransform)),Z.alphaTest>0&&(ae.alphaTest.value=Z.alphaTest)}(ae,Z,Ue,Le):Z.isSpriteMaterial?function E(ae,Z){ae.diffuse.value.copy(Z.color),ae.opacity.value=Z.opacity,ae.rotation.value=Z.rotation,Z.map&&(ae.map.value=Z.map,n(Z.map,ae.mapTransform)),Z.alphaMap&&(ae.alphaMap.value=Z.alphaMap,n(Z.alphaMap,ae.alphaMapTransform)),Z.alphaTest>0&&(ae.alphaTest.value=Z.alphaTest)}(ae,Z):Z.isShadowMaterial?(ae.color.value.copy(Z.color),ae.opacity.value=Z.opacity):Z.isShaderMaterial&&(Z.uniformsNeedUpdate=!1)}}}function m_(c,e,n,s){let a={},u={},p=[];const v=c.getParameter(c.MAX_UNIFORM_BUFFER_BINDINGS);function $(Ue,Le,Pe,Ft){const dt=Ue.value,gt=Le+"_"+Pe;if(void 0===Ft[gt])return Ft[gt]="number"==typeof dt||"boolean"==typeof dt?dt:dt.clone(),!0;{const bt=Ft[gt];if("number"==typeof dt||"boolean"==typeof dt){if(bt!==dt)return Ft[gt]=dt,!0}else if(!1===bt.equals(dt))return bt.copy(dt),!0}return!1}function ve(Ue){const Le={boundary:0,storage:0};return"number"==typeof Ue||"boolean"==typeof Ue?(Le.boundary=4,Le.storage=4):Ue.isVector2?(Le.boundary=8,Le.storage=8):Ue.isVector3||Ue.isColor?(Le.boundary=16,Le.storage=12):Ue.isVector4?(Le.boundary=16,Le.storage=16):Ue.isMatrix3?(Le.boundary=48,Le.storage=48):Ue.isMatrix4?(Le.boundary=64,Le.storage=64):Ue.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Ue),Le}function ae(Ue){const Le=Ue.target;Le.removeEventListener("dispose",ae);const Pe=p.indexOf(Le.__bindingPointIndex);p.splice(Pe,1),c.deleteBuffer(a[Le.id]),delete a[Le.id],delete u[Le.id]}return{bind:function b(Ue,Le){s.uniformBlockBinding(Ue,Le.program)},update:function E(Ue,Le){let Pe=a[Ue.id];void 0===Pe&&(function re(Ue){const Le=Ue.uniforms;let Pe=0;for(let gt=0,bt=Le.length;gt<bt;gt++){const tt=Array.isArray(Le[gt])?Le[gt]:[Le[gt]];for(let $e=0,Nt=tt.length;$e<Nt;$e++){const pn=tt[$e],rn=Array.isArray(pn.value)?pn.value:[pn.value];for(let gn=0,kn=rn.length;gn<kn;gn++){const ti=ve(rn[gn]),wn=Pe%16,Ci=wn%ti.boundary,Gi=wn+Ci;Pe+=Ci,0!==Gi&&16-Gi<ti.storage&&(Pe+=16-Gi),pn.__data=new Float32Array(ti.storage/Float32Array.BYTES_PER_ELEMENT),pn.__offset=Pe,Pe+=ti.storage}}}const dt=Pe%16;dt>0&&(Pe+=16-dt),Ue.__size=Pe,Ue.__cache={}}(Ue),Pe=function R(Ue){const Le=function B(){for(let Ue=0;Ue<v;Ue++)if(-1===p.indexOf(Ue))return p.push(Ue),Ue;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();Ue.__bindingPointIndex=Le;const Pe=c.createBuffer(),Ft=Ue.__size,dt=Ue.usage;return c.bindBuffer(c.UNIFORM_BUFFER,Pe),c.bufferData(c.UNIFORM_BUFFER,Ft,dt),c.bindBuffer(c.UNIFORM_BUFFER,null),c.bindBufferBase(c.UNIFORM_BUFFER,Le,Pe),Pe}(Ue),a[Ue.id]=Pe,Ue.addEventListener("dispose",ae)),s.updateUBOMapping(Ue,Le.program);const dt=e.render.frame;u[Ue.id]!==dt&&(function U(Ue){const Pe=Ue.uniforms,Ft=Ue.__cache;c.bindBuffer(c.UNIFORM_BUFFER,a[Ue.id]);for(let dt=0,gt=Pe.length;dt<gt;dt++){const bt=Array.isArray(Pe[dt])?Pe[dt]:[Pe[dt]];for(let tt=0,$e=bt.length;tt<$e;tt++){const Nt=bt[tt];if(!0===$(Nt,dt,tt,Ft)){const pn=Nt.__offset,rn=Array.isArray(Nt.value)?Nt.value:[Nt.value];let gn=0;for(let kn=0;kn<rn.length;kn++){const _n=rn[kn],ti=ve(_n);"number"==typeof _n||"boolean"==typeof _n?(Nt.__data[0]=_n,c.bufferSubData(c.UNIFORM_BUFFER,pn+gn,Nt.__data)):_n.isMatrix3?(Nt.__data[0]=_n.elements[0],Nt.__data[1]=_n.elements[1],Nt.__data[2]=_n.elements[2],Nt.__data[3]=0,Nt.__data[4]=_n.elements[3],Nt.__data[5]=_n.elements[4],Nt.__data[6]=_n.elements[5],Nt.__data[7]=0,Nt.__data[8]=_n.elements[6],Nt.__data[9]=_n.elements[7],Nt.__data[10]=_n.elements[8],Nt.__data[11]=0):(_n.toArray(Nt.__data,gn),gn+=ti.storage/Float32Array.BYTES_PER_ELEMENT)}c.bufferSubData(c.UNIFORM_BUFFER,pn,Nt.__data)}}}c.bindBuffer(c.UNIFORM_BUFFER,null)}(Ue),u[Ue.id]=dt)},dispose:function Z(){for(const Ue in a)c.deleteBuffer(a[Ue]);p=[],a={},u={}}}}class rE{constructor(e={}){const{canvas:n=F(),context:s=null,depth:a=!0,stencil:u=!1,alpha:p=!1,antialias:v=!1,premultipliedAlpha:b=!0,preserveDrawingBuffer:E=!1,powerPreference:R="default",failIfMajorPerformanceCaveat:B=!1,reverseDepthBuffer:U=!1}=e;let $;if(this.isWebGLRenderer=!0,null!==s){if(typeof WebGLRenderingContext<"u"&&s instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");$=s.getContextAttributes().alpha}else $=p;const re=new Uint32Array(4),ve=new Int32Array(4);let ae=null,Z=null;const Ue=[],Le=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=vo,this.toneMapping=qi,this.toneMappingExposure=1;const Pe=this;let Ft=!1,dt=0,gt=0,bt=null,tt=-1,$e=null;const Nt=new Kt,pn=new Kt;let rn=null;const gn=new ki(0);let kn=0,_n=n.width,ti=n.height,wn=1,Ci=null,Gi=null;const _i=new Kt(0,0,_n,ti),ps=new Kt(0,0,_n,ti);let Eo=!1;const En=new ph;let ci=!1,ji=!1;const gi=new gr,Sr=new gr,Xr=new lt,Jr=new Kt,eo={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Bn=!1;function ni(){return null===bt?wn:1}let jn,Bi,Ei,dr,Xi,ft,Qe,sn,In,Hn,Nn,mr,Ti,Wi,Ns,Xn,tr,Kr,Gr,Yi,Gs,Es,zo,Wt,Et=s;function vr(it,$t){return n.getContext(it,$t)}try{const it={alpha:!0,depth:a,stencil:u,antialias:v,premultipliedAlpha:b,preserveDrawingBuffer:E,powerPreference:R,failIfMajorPerformanceCaveat:B};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r170"),n.addEventListener("webglcontextlost",Fn,!1),n.addEventListener("webglcontextrestored",Ui,!1),n.addEventListener("webglcontextcreationerror",Vi,!1),null===Et){const $t="webgl2";if(Et=vr($t,it),null===Et)throw vr($t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(it){throw console.error("THREE.WebGLRenderer: "+it.message),it}function Ni(){jn=new ml(Et),jn.init(),Es=new L1(Et,jn),Bi=new wt(Et,jn,e,Es),Ei=new Jx(Et,jn),Bi.reverseDepthBuffer&&U&&Ei.buffers.depth.setReversed(!0),dr=new qc(Et),Xi=new T1,ft=new iE(Et,jn,Ei,Xi,Bi,Es,dr),Qe=new nn(Pe),sn=new Yc(Pe),In=new um(Et),zo=new ge(Et,In),Hn=new al(Et,In,dr,zo),Nn=new sd(Et,Hn,In,dr),Gr=new fu(Et,Bi,ft),Xn=new Vt(Xi),mr=new C1(Pe,Qe,sn,jn,Bi,zo,Xn),Ti=new eu(Pe,Xi),Wi=new qx,Ns=new N1(jn),Kr=new w(Pe,Qe,sn,Ei,Nn,$,b),tr=new F1(Pe,Nn,Bi),Wt=new m_(Et,dr,Bi,Ei),Yi=new Be(Et,jn,dr),Gs=new rd(Et,jn,dr),dr.programs=mr.programs,Pe.capabilities=Bi,Pe.extensions=jn,Pe.properties=Xi,Pe.renderLists=Wi,Pe.shadowMap=tr,Pe.state=Ei,Pe.info=dr}Ni();const Tn=new p_(Pe,Et);function Fn(it){it.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Ft=!0}function Ui(){console.log("THREE.WebGLRenderer: Context Restored."),Ft=!1;const it=dr.autoReset,$t=tr.enabled,cn=tr.autoUpdate,an=tr.needsUpdate,qt=tr.type;Ni(),dr.autoReset=it,tr.enabled=$t,tr.autoUpdate=cn,tr.needsUpdate=an,tr.type=qt}function Vi(it){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",it.statusMessage)}function Ss(it){const $t=it.target;$t.removeEventListener("dispose",Ss),function ya(it){(function vl(it){const $t=Xi.get(it).programs;void 0!==$t&&($t.forEach(function(cn){mr.releaseProgram(cn)}),it.isShaderMaterial&&mr.releaseShaderCache(it))})(it),Xi.remove(it)}($t)}function So(it,$t,cn){!0===it.transparent&&2===it.side&&!1===it.forceSinglePass?(it.side=1,it.needsUpdate=!0,J0(it,$t,cn),it.side=0,it.needsUpdate=!0,J0(it,$t,cn),it.side=2):J0(it,$t,cn)}this.xr=Tn,this.getContext=function(){return Et},this.getContextAttributes=function(){return Et.getContextAttributes()},this.forceContextLoss=function(){const it=jn.get("WEBGL_lose_context");it&&it.loseContext()},this.forceContextRestore=function(){const it=jn.get("WEBGL_lose_context");it&&it.restoreContext()},this.getPixelRatio=function(){return wn},this.setPixelRatio=function(it){void 0!==it&&(wn=it,this.setSize(_n,ti,!1))},this.getSize=function(it){return it.set(_n,ti)},this.setSize=function(it,$t,cn=!0){Tn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(_n=it,ti=$t,n.width=Math.floor(it*wn),n.height=Math.floor($t*wn),!0===cn&&(n.style.width=it+"px",n.style.height=$t+"px"),this.setViewport(0,0,it,$t))},this.getDrawingBufferSize=function(it){return it.set(_n*wn,ti*wn).floor()},this.setDrawingBufferSize=function(it,$t,cn){_n=it,ti=$t,wn=cn,n.width=Math.floor(it*cn),n.height=Math.floor($t*cn),this.setViewport(0,0,it,$t)},this.getCurrentViewport=function(it){return it.copy(Nt)},this.getViewport=function(it){return it.copy(_i)},this.setViewport=function(it,$t,cn,an){it.isVector4?_i.set(it.x,it.y,it.z,it.w):_i.set(it,$t,cn,an),Ei.viewport(Nt.copy(_i).multiplyScalar(wn).round())},this.getScissor=function(it){return it.copy(ps)},this.setScissor=function(it,$t,cn,an){it.isVector4?ps.set(it.x,it.y,it.z,it.w):ps.set(it,$t,cn,an),Ei.scissor(pn.copy(ps).multiplyScalar(wn).round())},this.getScissorTest=function(){return Eo},this.setScissorTest=function(it){Ei.setScissorTest(Eo=it)},this.setOpaqueSort=function(it){Ci=it},this.setTransparentSort=function(it){Gi=it},this.getClearColor=function(it){return it.copy(Kr.getClearColor())},this.setClearColor=function(){Kr.setClearColor.apply(Kr,arguments)},this.getClearAlpha=function(){return Kr.getClearAlpha()},this.setClearAlpha=function(){Kr.setClearAlpha.apply(Kr,arguments)},this.clear=function(it=!0,$t=!0,cn=!0){let an=0;if(it){let qt=!1;if(null!==bt){const hi=bt.texture.format;qt=hi===co||hi===Br||hi===Or}if(qt){const hi=bt.texture.type,Ii=hi===ao||hi===Os||hi===Ms||hi===O||hi===Go||hi===Ye,nr=Kr.getClearColor(),hr=Kr.getClearAlpha(),cs=nr.r,_s=nr.g,Mr=nr.b;Ii?(re[0]=cs,re[1]=_s,re[2]=Mr,re[3]=hr,Et.clearBufferuiv(Et.COLOR,0,re)):(ve[0]=cs,ve[1]=_s,ve[2]=Mr,ve[3]=hr,Et.clearBufferiv(Et.COLOR,0,ve))}else an|=Et.COLOR_BUFFER_BIT}$t&&(an|=Et.DEPTH_BUFFER_BIT),cn&&(an|=Et.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Et.clear(an)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Fn,!1),n.removeEventListener("webglcontextrestored",Ui,!1),n.removeEventListener("webglcontextcreationerror",Vi,!1),Wi.dispose(),Ns.dispose(),Xi.dispose(),Qe.dispose(),sn.dispose(),Nn.dispose(),zo.dispose(),Wt.dispose(),mr.dispose(),Tn.dispose(),Tn.removeEventListener("sessionstart",Sy),Tn.removeEventListener("sessionend",Y0),Bu.stop()},this.renderBufferDirect=function(it,$t,cn,an,qt,hi){null===$t&&($t=eo);const Ii=qt.isMesh&&qt.matrixWorld.determinant()<0,nr=function Qb(it,$t,cn,an,qt){!0!==$t.isScene&&($t=eo),ft.resetTextureUnits();const hi=$t.fog,nr=null===bt?Pe.outputColorSpace:!0===bt.isXRRenderTarget?bt.texture.colorSpace:ia,hr=(an.isMeshStandardMaterial?sn:Qe).get(an.envMap||(an.isMeshStandardMaterial?$t.environment:null)),cs=!0===an.vertexColors&&!!cn.attributes.color&&4===cn.attributes.color.itemSize,_s=!!cn.attributes.tangent&&(!!an.normalMap||an.anisotropy>0),Mr=!!cn.morphAttributes.position,Xs=!!cn.morphAttributes.normal,Xo=!!cn.morphAttributes.color;let uo=qi;an.toneMapped&&(null===bt||!0===bt.isXRRenderTarget)&&(uo=Pe.toneMapping);const Ll=cn.morphAttributes.position||cn.morphAttributes.normal||cn.morphAttributes.color,Ks=void 0!==Ll?Ll.length:0,wr=Xi.get(an),ac=Z.state.lights;!0!==ci||!0!==ji&&it===$e||Xn.setState(an,it,it===$e&&an.id===tt);let ho=!1;an.version===wr.__version?(wr.needsLights&&wr.lightsStateVersion!==ac.state.version||wr.outputColorSpace!==nr||qt.isBatchedMesh&&!1===wr.batching||!qt.isBatchedMesh&&!0===wr.batching||qt.isBatchedMesh&&!0===wr.batchingColor&&null===qt.colorTexture||qt.isBatchedMesh&&!1===wr.batchingColor&&null!==qt.colorTexture||qt.isInstancedMesh&&!1===wr.instancing||!qt.isInstancedMesh&&!0===wr.instancing||qt.isSkinnedMesh&&!1===wr.skinning||!qt.isSkinnedMesh&&!0===wr.skinning||qt.isInstancedMesh&&!0===wr.instancingColor&&null===qt.instanceColor||qt.isInstancedMesh&&!1===wr.instancingColor&&null!==qt.instanceColor||qt.isInstancedMesh&&!0===wr.instancingMorph&&null===qt.morphTexture||qt.isInstancedMesh&&!1===wr.instancingMorph&&null!==qt.morphTexture||wr.envMap!==hr||!0===an.fog&&wr.fog!==hi||void 0!==wr.numClippingPlanes&&(wr.numClippingPlanes!==Xn.numPlanes||wr.numIntersection!==Xn.numIntersection)||wr.vertexAlphas!==cs||wr.vertexTangents!==_s||wr.morphTargets!==Mr||wr.morphNormals!==Xs||wr.morphColors!==Xo||wr.toneMapping!==uo||wr.morphTargetsCount!==Ks)&&(ho=!0):(ho=!0,wr.__version=an.version);let kl=wr.currentProgram;!0===ho&&(kl=J0(an,$t,qt));let ou=!1,ll=!1,gu=!1;const Mo=kl.getUniforms(),Ql=wr.uniforms;if(Ei.useProgram(kl.program)&&(ou=!0,ll=!0,gu=!0),an.id!==tt&&(tt=an.id,ll=!0),ou||$e!==it){Ei.buffers.depth.getReversed()?(gi.copy(it.projectionMatrix),function vt(c){const e=c.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}(gi),function Pt(c){const e=c.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}(gi),Mo.setValue(Et,"projectionMatrix",gi)):Mo.setValue(Et,"projectionMatrix",it.projectionMatrix),Mo.setValue(Et,"viewMatrix",it.matrixWorldInverse);const Mc=Mo.map.cameraPosition;void 0!==Mc&&Mc.setValue(Et,Xr.setFromMatrixPosition(it.matrixWorld)),Bi.logarithmicDepthBuffer&&Mo.setValue(Et,"logDepthBufFC",2/(Math.log(it.far+1)/Math.LN2)),(an.isMeshPhongMaterial||an.isMeshToonMaterial||an.isMeshLambertMaterial||an.isMeshBasicMaterial||an.isMeshStandardMaterial||an.isShaderMaterial)&&Mo.setValue(Et,"isOrthographic",!0===it.isOrthographicCamera),$e!==it&&($e=it,ll=!0,gu=!0)}if(qt.isSkinnedMesh){Mo.setOptional(Et,qt,"bindMatrix"),Mo.setOptional(Et,qt,"bindMatrixInverse");const _l=qt.skeleton;_l&&(null===_l.boneTexture&&_l.computeBoneTexture(),Mo.setValue(Et,"boneTexture",_l.boneTexture,ft))}qt.isBatchedMesh&&(Mo.setOptional(Et,qt,"batchingTexture"),Mo.setValue(Et,"batchingTexture",qt._matricesTexture,ft),Mo.setOptional(Et,qt,"batchingIdTexture"),Mo.setValue(Et,"batchingIdTexture",qt._indirectTexture,ft),Mo.setOptional(Et,qt,"batchingColorTexture"),null!==qt._colorsTexture&&Mo.setValue(Et,"batchingColorTexture",qt._colorsTexture,ft));const vu=cn.morphAttributes;if((void 0!==vu.position||void 0!==vu.normal||void 0!==vu.color)&&Gr.update(qt,cn,kl),(ll||wr.receiveShadow!==qt.receiveShadow)&&(wr.receiveShadow=qt.receiveShadow,Mo.setValue(Et,"receiveShadow",qt.receiveShadow)),an.isMeshGouraudMaterial&&null!==an.envMap&&(Ql.envMap.value=hr,Ql.flipEnvMap.value=hr.isCubeTexture&&!1===hr.isRenderTargetTexture?-1:1),an.isMeshStandardMaterial&&null===an.envMap&&null!==$t.environment&&(Ql.envMapIntensity.value=$t.environmentIntensity),ll&&(Mo.setValue(Et,"toneMappingExposure",Pe.toneMappingExposure),wr.needsLights&&function Yb(it,$t){it.ambientLightColor.needsUpdate=$t,it.lightProbe.needsUpdate=$t,it.directionalLights.needsUpdate=$t,it.directionalLightShadows.needsUpdate=$t,it.pointLights.needsUpdate=$t,it.pointLightShadows.needsUpdate=$t,it.spotLights.needsUpdate=$t,it.spotLightShadows.needsUpdate=$t,it.rectAreaLights.needsUpdate=$t,it.hemisphereLights.needsUpdate=$t}(Ql,gu),hi&&!0===an.fog&&Ti.refreshFogUniforms(Ql,hi),Ti.refreshMaterialUniforms(Ql,an,wn,ti,Z.state.transmissionRenderTarget[it.id]),qp.upload(Et,Cy(wr),Ql,ft)),an.isShaderMaterial&&!0===an.uniformsNeedUpdate&&(qp.upload(Et,Cy(wr),Ql,ft),an.uniformsNeedUpdate=!1),an.isSpriteMaterial&&Mo.setValue(Et,"center",qt.center),Mo.setValue(Et,"modelViewMatrix",qt.modelViewMatrix),Mo.setValue(Et,"normalMatrix",qt.normalMatrix),Mo.setValue(Et,"modelMatrix",qt.matrixWorld),an.isShaderMaterial||an.isRawShaderMaterial){const _l=an.uniformsGroups;for(let Mc=0,Uu=_l.length;Mc<Uu;Mc++){const Jg=_l[Mc];Wt.update(Jg,kl),Wt.bind(Jg,kl)}}return kl}(it,$t,cn,an,qt);Ei.setMaterial(an,Ii);let hr=cn.index,cs=1;if(!0===an.wireframe){if(hr=Hn.getWireframeAttribute(cn),void 0===hr)return;cs=2}const _s=cn.drawRange,Mr=cn.attributes.position;let Xs=_s.start*cs,Xo=(_s.start+_s.count)*cs;null!==hi&&(Xs=Math.max(Xs,hi.start*cs),Xo=Math.min(Xo,(hi.start+hi.count)*cs)),null!==hr?(Xs=Math.max(Xs,0),Xo=Math.min(Xo,hr.count)):null!=Mr&&(Xs=Math.max(Xs,0),Xo=Math.min(Xo,Mr.count));const uo=Xo-Xs;if(uo<0||uo===1/0)return;zo.setup(qt,an,nr,cn,hr);let Ll,Ks=Yi;if(null!==hr&&(Ll=In.get(hr),Ks=Gs,Ks.setIndex(Ll)),qt.isMesh)!0===an.wireframe?(Ei.setLineWidth(an.wireframeLinewidth*ni()),Ks.setMode(Et.LINES)):Ks.setMode(Et.TRIANGLES);else if(qt.isLine){let wr=an.linewidth;void 0===wr&&(wr=1),Ei.setLineWidth(wr*ni()),Ks.setMode(qt.isLineSegments?Et.LINES:qt.isLineLoop?Et.LINE_LOOP:Et.LINE_STRIP)}else qt.isPoints?Ks.setMode(Et.POINTS):qt.isSprite&&Ks.setMode(Et.TRIANGLES);if(qt.isBatchedMesh)if(null!==qt._multiDrawInstances)Ks.renderMultiDrawInstances(qt._multiDrawStarts,qt._multiDrawCounts,qt._multiDrawCount,qt._multiDrawInstances);else if(jn.get("WEBGL_multi_draw"))Ks.renderMultiDraw(qt._multiDrawStarts,qt._multiDrawCounts,qt._multiDrawCount);else{const wr=qt._multiDrawStarts,ac=qt._multiDrawCounts,ho=qt._multiDrawCount,kl=hr?In.get(hr).bytesPerElement:1,ou=Xi.get(an).currentProgram.getUniforms();for(let ll=0;ll<ho;ll++)ou.setValue(Et,"_gl_DrawID",ll),Ks.render(wr[ll]/kl,ac[ll])}else if(qt.isInstancedMesh)Ks.renderInstances(Xs,uo,qt.count);else if(cn.isInstancedBufferGeometry){const ac=Math.min(cn.instanceCount,void 0!==cn._maxInstanceCount?cn._maxInstanceCount:1/0);Ks.renderInstances(Xs,uo,ac)}else Ks.render(Xs,uo)},this.compile=function(it,$t,cn=null){null===cn&&(cn=it),Z=Ns.get(cn),Z.init($t),Le.push(Z),cn.traverseVisible(function(qt){qt.isLight&&qt.layers.test($t.layers)&&(Z.pushLight(qt),qt.castShadow&&Z.pushShadow(qt))}),it!==cn&&it.traverseVisible(function(qt){qt.isLight&&qt.layers.test($t.layers)&&(Z.pushLight(qt),qt.castShadow&&Z.pushShadow(qt))}),Z.setupLights();const an=new Set;return it.traverse(function(qt){if(!(qt.isMesh||qt.isPoints||qt.isLine||qt.isSprite))return;const hi=qt.material;if(hi)if(Array.isArray(hi))for(let Ii=0;Ii<hi.length;Ii++){const nr=hi[Ii];So(nr,cn,qt),an.add(nr)}else So(hi,cn,qt),an.add(hi)}),Le.pop(),Z=null,an},this.compileAsync=function(it,$t,cn=null){const an=this.compile(it,$t,cn);return new Promise(qt=>{function hi(){an.forEach(function(Ii){Xi.get(Ii).currentProgram.isReady()&&an.delete(Ii)}),0!==an.size?setTimeout(hi,10):qt(it)}null!==jn.get("KHR_parallel_shader_compile")?hi():setTimeout(hi,10)})};let su=null;function Sy(){Bu.stop()}function Y0(){Bu.start()}const Bu=new vp;function q0(it,$t,cn,an){if(!1===it.visible)return;if(it.layers.test($t.layers))if(it.isGroup)cn=it.renderOrder;else if(it.isLOD)!0===it.autoUpdate&&it.update($t);else if(it.isLight)Z.pushLight(it),it.castShadow&&Z.pushShadow(it);else if(it.isSprite){if(!it.frustumCulled||En.intersectsSprite(it)){an&&Jr.setFromMatrixPosition(it.matrixWorld).applyMatrix4(Sr);const Ii=Nn.update(it),nr=it.material;nr.visible&&ae.push(it,Ii,nr,cn,Jr.z,null)}}else if((it.isMesh||it.isLine||it.isPoints)&&(!it.frustumCulled||En.intersectsObject(it))){const Ii=Nn.update(it),nr=it.material;if(an&&(void 0!==it.boundingSphere?(null===it.boundingSphere&&it.computeBoundingSphere(),Jr.copy(it.boundingSphere.center)):(null===Ii.boundingSphere&&Ii.computeBoundingSphere(),Jr.copy(Ii.boundingSphere.center)),Jr.applyMatrix4(it.matrixWorld).applyMatrix4(Sr)),Array.isArray(nr)){const hr=Ii.groups;for(let cs=0,_s=hr.length;cs<_s;cs++){const Mr=hr[cs],Xs=nr[Mr.materialIndex];Xs&&Xs.visible&&ae.push(it,Ii,Xs,cn,Jr.z,Mr)}}else nr.visible&&ae.push(it,Ii,nr,cn,Jr.z,null)}const hi=it.children;for(let Ii=0,nr=hi.length;Ii<nr;Ii++)q0(hi[Ii],$t,cn,an)}function Zg(it,$t,cn,an){const qt=it.opaque,hi=it.transmissive,Ii=it.transparent;Z.setupLightsView(cn),!0===ci&&Xn.setGlobalState(Pe.clippingPlanes,cn),an&&Ei.viewport(Nt.copy(an)),qt.length>0&&Z0(qt,$t,cn),hi.length>0&&Z0(hi,$t,cn),Ii.length>0&&Z0(Ii,$t,cn),Ei.buffers.depth.setTest(!0),Ei.buffers.depth.setMask(!0),Ei.buffers.color.setMask(!0),Ei.setPolygonOffset(!1)}function My(it,$t,cn,an){if(null!==(!0===cn.isScene?cn.overrideMaterial:null))return;void 0===Z.state.transmissionRenderTarget[an.id]&&(Z.state.transmissionRenderTarget[an.id]=new Dr(1,1,{generateMipmaps:!0,type:jn.has("EXT_color_buffer_half_float")||jn.has("EXT_color_buffer_float")?lo:ao,minFilter:yr,samples:4,stencilBuffer:u,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Lt.workingColorSpace}));const hi=Z.state.transmissionRenderTarget[an.id],Ii=an.viewport||Nt;hi.setSize(Ii.z,Ii.w);const nr=Pe.getRenderTarget();Pe.setRenderTarget(hi),Pe.getClearColor(gn),kn=Pe.getClearAlpha(),kn<1&&Pe.setClearColor(16777215,.5),Pe.clear(),Bn&&Kr.render(cn);const hr=Pe.toneMapping;Pe.toneMapping=qi;const cs=an.viewport;if(void 0!==an.viewport&&(an.viewport=void 0),Z.setupLightsView(an),!0===ci&&Xn.setGlobalState(Pe.clippingPlanes,an),Z0(it,cn,an),ft.updateMultisampleRenderTarget(hi),ft.updateRenderTargetMipmap(hi),!1===jn.has("WEBGL_multisampled_render_to_texture")){let _s=!1;for(let Mr=0,Xs=$t.length;Mr<Xs;Mr++){const Xo=$t[Mr],uo=Xo.object,Ll=Xo.geometry,Ks=Xo.material,wr=Xo.group;if(2===Ks.side&&uo.layers.test(an.layers)){const ac=Ks.side;Ks.side=1,Ks.needsUpdate=!0,wy(uo,cn,an,Ll,Ks,wr),Ks.side=ac,Ks.needsUpdate=!0,_s=!0}}!0===_s&&(ft.updateMultisampleRenderTarget(hi),ft.updateRenderTargetMipmap(hi))}Pe.setRenderTarget(nr),Pe.setClearColor(gn,kn),void 0!==cs&&(an.viewport=cs),Pe.toneMapping=hr}function Z0(it,$t,cn){const an=!0===$t.isScene?$t.overrideMaterial:null;for(let qt=0,hi=it.length;qt<hi;qt++){const Ii=it[qt],nr=Ii.object,hr=Ii.geometry,cs=null===an?Ii.material:an,_s=Ii.group;nr.layers.test(cn.layers)&&wy(nr,$t,cn,hr,cs,_s)}}function wy(it,$t,cn,an,qt,hi){it.onBeforeRender(Pe,$t,cn,an,qt,hi),it.modelViewMatrix.multiplyMatrices(cn.matrixWorldInverse,it.matrixWorld),it.normalMatrix.getNormalMatrix(it.modelViewMatrix),qt.onBeforeRender(Pe,$t,cn,an,it,hi),!0===qt.transparent&&2===qt.side&&!1===qt.forceSinglePass?(qt.side=1,qt.needsUpdate=!0,Pe.renderBufferDirect(cn,$t,an,qt,it,hi),qt.side=0,qt.needsUpdate=!0,Pe.renderBufferDirect(cn,$t,an,qt,it,hi),qt.side=2):Pe.renderBufferDirect(cn,$t,an,qt,it,hi),it.onAfterRender(Pe,$t,cn,an,qt,hi)}function J0(it,$t,cn){!0!==$t.isScene&&($t=eo);const an=Xi.get(it),qt=Z.state.lights,Ii=qt.state.version,nr=mr.getParameters(it,qt.state,Z.state.shadowsArray,$t,cn),hr=mr.getProgramCacheKey(nr);let cs=an.programs;an.environment=it.isMeshStandardMaterial?$t.environment:null,an.fog=$t.fog,an.envMap=(it.isMeshStandardMaterial?sn:Qe).get(it.envMap||an.environment),an.envMapRotation=null!==an.environment&&null===it.envMap?$t.environmentRotation:it.envMapRotation,void 0===cs&&(it.addEventListener("dispose",Ss),cs=new Map,an.programs=cs);let _s=cs.get(hr);if(void 0!==_s){if(an.currentProgram===_s&&an.lightsStateVersion===Ii)return Ty(it,nr),_s}else nr.uniforms=mr.getUniforms(it),it.onBeforeCompile(nr,Pe),_s=mr.acquireProgram(nr,hr),cs.set(hr,_s),an.uniforms=nr.uniforms;const Mr=an.uniforms;return(!it.isShaderMaterial&&!it.isRawShaderMaterial||!0===it.clipping)&&(Mr.clippingPlanes=Xn.uniform),Ty(it,nr),an.needsLights=function qb(it){return it.isMeshLambertMaterial||it.isMeshToonMaterial||it.isMeshPhongMaterial||it.isMeshStandardMaterial||it.isShadowMaterial||it.isShaderMaterial&&!0===it.lights}(it),an.lightsStateVersion=Ii,an.needsLights&&(Mr.ambientLightColor.value=qt.state.ambient,Mr.lightProbe.value=qt.state.probe,Mr.directionalLights.value=qt.state.directional,Mr.directionalLightShadows.value=qt.state.directionalShadow,Mr.spotLights.value=qt.state.spot,Mr.spotLightShadows.value=qt.state.spotShadow,Mr.rectAreaLights.value=qt.state.rectArea,Mr.ltc_1.value=qt.state.rectAreaLTC1,Mr.ltc_2.value=qt.state.rectAreaLTC2,Mr.pointLights.value=qt.state.point,Mr.pointLightShadows.value=qt.state.pointShadow,Mr.hemisphereLights.value=qt.state.hemi,Mr.directionalShadowMap.value=qt.state.directionalShadowMap,Mr.directionalShadowMatrix.value=qt.state.directionalShadowMatrix,Mr.spotShadowMap.value=qt.state.spotShadowMap,Mr.spotLightMatrix.value=qt.state.spotLightMatrix,Mr.spotLightMap.value=qt.state.spotLightMap,Mr.pointShadowMap.value=qt.state.pointShadowMap,Mr.pointShadowMatrix.value=qt.state.pointShadowMatrix),an.currentProgram=_s,an.uniformsList=null,_s}function Cy(it){if(null===it.uniformsList){const $t=it.currentProgram.getUniforms();it.uniformsList=qp.seqWithValue($t.seq,it.uniforms)}return it.uniformsList}function Ty(it,$t){const cn=Xi.get(it);cn.outputColorSpace=$t.outputColorSpace,cn.batching=$t.batching,cn.batchingColor=$t.batchingColor,cn.instancing=$t.instancing,cn.instancingColor=$t.instancingColor,cn.instancingMorph=$t.instancingMorph,cn.skinning=$t.skinning,cn.morphTargets=$t.morphTargets,cn.morphNormals=$t.morphNormals,cn.morphColors=$t.morphColors,cn.morphTargetsCount=$t.morphTargetsCount,cn.numClippingPlanes=$t.numClippingPlanes,cn.numIntersection=$t.numClipIntersection,cn.vertexAlphas=$t.vertexAlphas,cn.vertexTangents=$t.vertexTangents,cn.toneMapping=$t.toneMapping}Bu.setAnimationLoop(function Sd(it){su&&su(it)}),typeof self<"u"&&Bu.setContext(self),this.setAnimationLoop=function(it){su=it,Tn.setAnimationLoop(it),null===it?Bu.stop():Bu.start()},Tn.addEventListener("sessionstart",Sy),Tn.addEventListener("sessionend",Y0),this.render=function(it,$t){if(void 0!==$t&&!0!==$t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===Ft)return;if(!0===it.matrixWorldAutoUpdate&&it.updateMatrixWorld(),null===$t.parent&&!0===$t.matrixWorldAutoUpdate&&$t.updateMatrixWorld(),!0===Tn.enabled&&!0===Tn.isPresenting&&(!0===Tn.cameraAutoUpdate&&Tn.updateCamera($t),$t=Tn.getCamera()),!0===it.isScene&&it.onBeforeRender(Pe,it,$t,bt),Z=Ns.get(it,Le.length),Z.init($t),Le.push(Z),Sr.multiplyMatrices($t.projectionMatrix,$t.matrixWorldInverse),En.setFromProjectionMatrix(Sr),ji=this.localClippingEnabled,ci=Xn.init(this.clippingPlanes,ji),ae=Wi.get(it,Ue.length),ae.init(),Ue.push(ae),!0===Tn.enabled&&!0===Tn.isPresenting){const hi=Pe.xr.getDepthSensingMesh();null!==hi&&q0(hi,$t,-1/0,Pe.sortObjects)}q0(it,$t,0,Pe.sortObjects),ae.finish(),!0===Pe.sortObjects&&ae.sort(Ci,Gi),Bn=!1===Tn.enabled||!1===Tn.isPresenting||!1===Tn.hasDepthSensing(),Bn&&Kr.addToRenderList(ae,it),this.info.render.frame++,!0===ci&&Xn.beginShadows(),tr.render(Z.state.shadowsArray,it,$t),!0===ci&&Xn.endShadows(),!0===this.info.autoReset&&this.info.reset();const an=ae.opaque,qt=ae.transmissive;if(Z.setupLights(),$t.isArrayCamera){const hi=$t.cameras;if(qt.length>0)for(let Ii=0,nr=hi.length;Ii<nr;Ii++)My(an,qt,it,hi[Ii]);Bn&&Kr.render(it);for(let Ii=0,nr=hi.length;Ii<nr;Ii++){const hr=hi[Ii];Zg(ae,it,hr,hr.viewport)}}else qt.length>0&&My(an,qt,it,$t),Bn&&Kr.render(it),Zg(ae,it,$t);null!==bt&&(ft.updateMultisampleRenderTarget(bt),ft.updateRenderTargetMipmap(bt)),!0===it.isScene&&it.onAfterRender(Pe,it,$t),zo.resetDefaultState(),tt=-1,$e=null,Le.pop(),Le.length>0?(Z=Le[Le.length-1],!0===ci&&Xn.setGlobalState(Pe.clippingPlanes,Z.state.camera)):Z=null,Ue.pop(),ae=Ue.length>0?Ue[Ue.length-1]:null},this.getActiveCubeFace=function(){return dt},this.getActiveMipmapLevel=function(){return gt},this.getRenderTarget=function(){return bt},this.setRenderTargetTextures=function(it,$t,cn){Xi.get(it.texture).__webglTexture=$t,Xi.get(it.depthTexture).__webglTexture=cn;const an=Xi.get(it);an.__hasExternalTextures=!0,an.__autoAllocateDepthBuffer=void 0===cn,an.__autoAllocateDepthBuffer||!0===jn.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),an.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(it,$t){const cn=Xi.get(it);cn.__webglFramebuffer=$t,cn.__useDefaultFramebuffer=void 0===$t},this.setRenderTarget=function(it,$t=0,cn=0){bt=it,dt=$t,gt=cn;let an=!0,qt=null,hi=!1,Ii=!1;if(it){const hr=Xi.get(it);if(void 0!==hr.__useDefaultFramebuffer)Ei.bindFramebuffer(Et.FRAMEBUFFER,null),an=!1;else if(void 0===hr.__webglFramebuffer)ft.setupRenderTarget(it);else if(hr.__hasExternalTextures)ft.rebindTextures(it,Xi.get(it.texture).__webglTexture,Xi.get(it.depthTexture).__webglTexture);else if(it.depthBuffer){const Mr=it.depthTexture;if(hr.__boundDepthTexture!==Mr){if(null!==Mr&&Xi.has(Mr)&&(it.width!==Mr.image.width||it.height!==Mr.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ft.setupDepthRenderbuffer(it)}}const cs=it.texture;(cs.isData3DTexture||cs.isDataArrayTexture||cs.isCompressedArrayTexture)&&(Ii=!0);const _s=Xi.get(it).__webglFramebuffer;it.isWebGLCubeRenderTarget?(qt=Array.isArray(_s[$t])?_s[$t][cn]:_s[$t],hi=!0):qt=it.samples>0&&!1===ft.useMultisampledRTT(it)?Xi.get(it).__webglMultisampledFramebuffer:Array.isArray(_s)?_s[cn]:_s,Nt.copy(it.viewport),pn.copy(it.scissor),rn=it.scissorTest}else Nt.copy(_i).multiplyScalar(wn).floor(),pn.copy(ps).multiplyScalar(wn).floor(),rn=Eo;if(Ei.bindFramebuffer(Et.FRAMEBUFFER,qt)&&an&&Ei.drawBuffers(it,qt),Ei.viewport(Nt),Ei.scissor(pn),Ei.setScissorTest(rn),hi){const hr=Xi.get(it.texture);Et.framebufferTexture2D(Et.FRAMEBUFFER,Et.COLOR_ATTACHMENT0,Et.TEXTURE_CUBE_MAP_POSITIVE_X+$t,hr.__webglTexture,cn)}else if(Ii){const hr=Xi.get(it.texture);Et.framebufferTextureLayer(Et.FRAMEBUFFER,Et.COLOR_ATTACHMENT0,hr.__webglTexture,cn||0,$t||0)}tt=-1},this.readRenderTargetPixels=function(it,$t,cn,an,qt,hi,Ii){if(!it||!it.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let nr=Xi.get(it).__webglFramebuffer;if(it.isWebGLCubeRenderTarget&&void 0!==Ii&&(nr=nr[Ii]),nr){Ei.bindFramebuffer(Et.FRAMEBUFFER,nr);try{const hr=it.texture,cs=hr.format,_s=hr.type;if(!Bi.textureFormatReadable(cs))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Bi.textureTypeReadable(_s))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");$t>=0&&$t<=it.width-an&&cn>=0&&cn<=it.height-qt&&Et.readPixels($t,cn,an,qt,Es.convert(cs),Es.convert(_s),hi)}finally{const hr=null!==bt?Xi.get(bt).__webglFramebuffer:null;Ei.bindFramebuffer(Et.FRAMEBUFFER,hr)}}},this.readRenderTargetPixelsAsync=function(){var it=(0,X.A)(function*($t,cn,an,qt,hi,Ii,nr){if(!$t||!$t.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let hr=Xi.get($t).__webglFramebuffer;if($t.isWebGLCubeRenderTarget&&void 0!==nr&&(hr=hr[nr]),hr){const cs=$t.texture,_s=cs.format,Mr=cs.type;if(!Bi.textureFormatReadable(_s))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Bi.textureTypeReadable(Mr))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(cn>=0&&cn<=$t.width-qt&&an>=0&&an<=$t.height-hi){Ei.bindFramebuffer(Et.FRAMEBUFFER,hr);const Xs=Et.createBuffer();Et.bindBuffer(Et.PIXEL_PACK_BUFFER,Xs),Et.bufferData(Et.PIXEL_PACK_BUFFER,Ii.byteLength,Et.STREAM_READ),Et.readPixels(cn,an,qt,hi,Es.convert(_s),Es.convert(Mr),0);const Xo=null!==bt?Xi.get(bt).__webglFramebuffer:null;Ei.bindFramebuffer(Et.FRAMEBUFFER,Xo);const uo=Et.fenceSync(Et.SYNC_GPU_COMMANDS_COMPLETE,0);return Et.flush(),yield function nt(c,e,n){return new Promise(function(s,a){setTimeout(function u(){switch(c.clientWaitSync(e,c.SYNC_FLUSH_COMMANDS_BIT,0)){case c.WAIT_FAILED:a();break;case c.TIMEOUT_EXPIRED:setTimeout(u,n);break;default:s()}},n)})}(Et,uo,4),Et.bindBuffer(Et.PIXEL_PACK_BUFFER,Xs),Et.getBufferSubData(Et.PIXEL_PACK_BUFFER,0,Ii),Et.deleteBuffer(Xs),Et.deleteSync(uo),Ii}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function($t,cn,an,qt,hi,Ii,nr){return it.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(it,$t=null,cn=0){!0!==it.isTexture&&(De("WebGLRenderer: copyFramebufferToTexture function signature has changed."),$t=arguments[0]||null,it=arguments[1]);const an=Math.pow(2,-cn),qt=Math.floor(it.image.width*an),hi=Math.floor(it.image.height*an),Ii=null!==$t?$t.x:0,nr=null!==$t?$t.y:0;ft.setTexture2D(it,0),Et.copyTexSubImage2D(Et.TEXTURE_2D,cn,0,0,Ii,nr,qt,hi),Ei.unbindTexture()},this.copyTextureToTexture=function(it,$t,cn=null,an=null,qt=0){let hi,Ii,nr,hr,cs,_s,Mr,Xs,Xo;!0!==it.isTexture&&(De("WebGLRenderer: copyTextureToTexture function signature has changed."),an=arguments[0]||null,it=arguments[1],$t=arguments[2],qt=arguments[3]||0,cn=null);const uo=it.isCompressedTexture?it.mipmaps[qt]:it.image;null!==cn?(hi=cn.max.x-cn.min.x,Ii=cn.max.y-cn.min.y,nr=cn.isBox3?cn.max.z-cn.min.z:1,hr=cn.min.x,cs=cn.min.y,_s=cn.isBox3?cn.min.z:0):(hi=uo.width,Ii=uo.height,nr=uo.depth||1,hr=0,cs=0,_s=0),null!==an?(Mr=an.x,Xs=an.y,Xo=an.z):(Mr=0,Xs=0,Xo=0);const Ll=Es.convert($t.format),Ks=Es.convert($t.type);let wr;$t.isData3DTexture?(ft.setTexture3D($t,0),wr=Et.TEXTURE_3D):$t.isDataArrayTexture||$t.isCompressedArrayTexture?(ft.setTexture2DArray($t,0),wr=Et.TEXTURE_2D_ARRAY):(ft.setTexture2D($t,0),wr=Et.TEXTURE_2D),Et.pixelStorei(Et.UNPACK_FLIP_Y_WEBGL,$t.flipY),Et.pixelStorei(Et.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$t.premultiplyAlpha),Et.pixelStorei(Et.UNPACK_ALIGNMENT,$t.unpackAlignment);const ac=Et.getParameter(Et.UNPACK_ROW_LENGTH),ho=Et.getParameter(Et.UNPACK_IMAGE_HEIGHT),kl=Et.getParameter(Et.UNPACK_SKIP_PIXELS),ou=Et.getParameter(Et.UNPACK_SKIP_ROWS),ll=Et.getParameter(Et.UNPACK_SKIP_IMAGES);Et.pixelStorei(Et.UNPACK_ROW_LENGTH,uo.width),Et.pixelStorei(Et.UNPACK_IMAGE_HEIGHT,uo.height),Et.pixelStorei(Et.UNPACK_SKIP_PIXELS,hr),Et.pixelStorei(Et.UNPACK_SKIP_ROWS,cs),Et.pixelStorei(Et.UNPACK_SKIP_IMAGES,_s);const gu=it.isDataArrayTexture||it.isData3DTexture,Mo=$t.isDataArrayTexture||$t.isData3DTexture;if(it.isRenderTargetTexture||it.isDepthTexture){const Ql=Xi.get(it),vu=Xi.get($t),_l=Xi.get(Ql.__renderTarget),Mc=Xi.get(vu.__renderTarget);Ei.bindFramebuffer(Et.READ_FRAMEBUFFER,_l.__webglFramebuffer),Ei.bindFramebuffer(Et.DRAW_FRAMEBUFFER,Mc.__webglFramebuffer);for(let Uu=0;Uu<nr;Uu++)gu&&Et.framebufferTextureLayer(Et.READ_FRAMEBUFFER,Et.COLOR_ATTACHMENT0,Xi.get(it).__webglTexture,qt,_s+Uu),it.isDepthTexture?(Mo&&Et.framebufferTextureLayer(Et.DRAW_FRAMEBUFFER,Et.COLOR_ATTACHMENT0,Xi.get($t).__webglTexture,qt,Xo+Uu),Et.blitFramebuffer(hr,cs,hi,Ii,Mr,Xs,hi,Ii,Et.DEPTH_BUFFER_BIT,Et.NEAREST)):Mo?Et.copyTexSubImage3D(wr,qt,Mr,Xs,Xo+Uu,hr,cs,hi,Ii):Et.copyTexSubImage2D(wr,qt,Mr,Xs,Xo+Uu,hr,cs,hi,Ii);Ei.bindFramebuffer(Et.READ_FRAMEBUFFER,null),Ei.bindFramebuffer(Et.DRAW_FRAMEBUFFER,null)}else Mo?it.isDataTexture||it.isData3DTexture?Et.texSubImage3D(wr,qt,Mr,Xs,Xo,hi,Ii,nr,Ll,Ks,uo.data):$t.isCompressedArrayTexture?Et.compressedTexSubImage3D(wr,qt,Mr,Xs,Xo,hi,Ii,nr,Ll,uo.data):Et.texSubImage3D(wr,qt,Mr,Xs,Xo,hi,Ii,nr,Ll,Ks,uo):it.isDataTexture?Et.texSubImage2D(Et.TEXTURE_2D,qt,Mr,Xs,hi,Ii,Ll,Ks,uo.data):it.isCompressedTexture?Et.compressedTexSubImage2D(Et.TEXTURE_2D,qt,Mr,Xs,uo.width,uo.height,Ll,uo.data):Et.texSubImage2D(Et.TEXTURE_2D,qt,Mr,Xs,hi,Ii,Ll,Ks,uo);Et.pixelStorei(Et.UNPACK_ROW_LENGTH,ac),Et.pixelStorei(Et.UNPACK_IMAGE_HEIGHT,ho),Et.pixelStorei(Et.UNPACK_SKIP_PIXELS,kl),Et.pixelStorei(Et.UNPACK_SKIP_ROWS,ou),Et.pixelStorei(Et.UNPACK_SKIP_IMAGES,ll),0===qt&&$t.generateMipmaps&&Et.generateMipmap(wr),Ei.unbindTexture()},this.copyTextureToTexture3D=function(it,$t,cn=null,an=null,qt=0){return!0!==it.isTexture&&(De("WebGLRenderer: copyTextureToTexture3D function signature has changed."),cn=arguments[0]||null,an=arguments[1]||null,it=arguments[2],$t=arguments[3],qt=arguments[4]||0),De('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(it,$t,cn,an,qt)},this.initRenderTarget=function(it){void 0===Xi.get(it).__webglFramebuffer&&ft.setupRenderTarget(it)},this.initTexture=function(it){it.isCubeTexture?ft.setTextureCube(it,0):it.isData3DTexture?ft.setTexture3D(it,0):it.isDataArrayTexture||it.isCompressedArrayTexture?ft.setTexture2DArray(it,0):ft.setTexture2D(it,0),Ei.unbindTexture()},this.resetState=function(){dt=0,gt=0,bt=null,Ei.reset(),zo.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return nl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorspace=Lt._getDrawingBufferColorSpace(e),n.unpackColorSpace=Lt._getUnpackColorSpace()}}class B1 extends Qt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Dl,this.environmentIntensity=1,this.environmentRotation=new Dl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return null!==this.fog&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class n0{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=void 0!==e?e.length/n:0,this.usage=35044,this.updateRanges=[],this.version=0,this.uuid=bo()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,s){e*=this.stride,s*=n.stride;for(let a=0,u=this.stride;a<u;a++)this.array[e+a]=n.array[s+a];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=bo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(n,this.stride);return s.setUsage(this.usage),s}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=bo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ol=new lt;class kf{constructor(e,n,s,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=s,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,s=this.data.count;n<s;n++)Ol.fromBufferAttribute(this,n),Ol.applyMatrix4(e),this.setXYZ(n,Ol.x,Ol.y,Ol.z);return this}applyNormalMatrix(e){for(let n=0,s=this.count;n<s;n++)Ol.fromBufferAttribute(this,n),Ol.applyNormalMatrix(e),this.setXYZ(n,Ol.x,Ol.y,Ol.z);return this}transformDirection(e){for(let n=0,s=this.count;n<s;n++)Ol.fromBufferAttribute(this,n),Ol.transformDirection(e),this.setXYZ(n,Ol.x,Ol.y,Ol.z);return this}getComponent(e,n){let s=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(s=To(s,this.array)),s}setComponent(e,n,s){return this.normalized&&(s=Tr(s,this.array)),this.data.array[e*this.data.stride+this.offset+n]=s,this}setX(e,n){return this.normalized&&(n=Tr(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Tr(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Tr(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Tr(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=To(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=To(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=To(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=To(n,this.array)),n}setXY(e,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Tr(n,this.array),s=Tr(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=s,this}setXYZ(e,n,s,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=Tr(n,this.array),s=Tr(s,this.array),a=Tr(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=s,this.data.array[e+2]=a,this}setXYZW(e,n,s,a,u){return e=e*this.data.stride+this.offset,this.normalized&&(n=Tr(n,this.array),s=Tr(s,this.array),a=Tr(a,this.array),u=Tr(u,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=s,this.data.array[e+2]=a,this.data.array[e+3]=u,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let s=0;s<this.count;s++){const a=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)n.push(this.data.array[a+u])}return new fs(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new kf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let s=0;s<this.count;s++){const a=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)n.push(this.data.array[a+u])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Oh extends sl{static get type(){return"SpriteMaterial"}constructor(e){super(),this.isSpriteMaterial=!0,this.color=new ki(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let ld;const Hd=new lt,Fh=new lt,tu=new lt,cd=new yn,Lh=new yn,r0=new gr,zd=new lt,Bf=new lt,s0=new lt,eg=new yn,tg=new yn,v_=new yn;class __ extends Qt{constructor(e=new Oh){if(super(),this.isSprite=!0,this.type="Sprite",void 0===ld){ld=new bs;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),s=new n0(n,5);ld.setIndex([0,1,2,0,2,3]),ld.setAttribute("position",new kf(s,3,0,!1)),ld.setAttribute("uv",new kf(s,2,3,!1))}this.geometry=ld,this.material=e,this.center=new yn(.5,.5)}raycast(e,n){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fh.setFromMatrixScale(this.matrixWorld),r0.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),tu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Fh.multiplyScalar(-tu.z);const s=this.material.rotation;let a,u;0!==s&&(u=Math.cos(s),a=Math.sin(s));const p=this.center;Uf(zd.set(-.5,-.5,0),tu,p,Fh,a,u),Uf(Bf.set(.5,-.5,0),tu,p,Fh,a,u),Uf(s0.set(.5,.5,0),tu,p,Fh,a,u),eg.set(0,0),tg.set(1,0),v_.set(1,1);let v=e.ray.intersectTriangle(zd,Bf,s0,!1,Hd);if(null===v&&(Uf(Bf.set(-.5,.5,0),tu,p,Fh,a,u),tg.set(0,1),v=e.ray.intersectTriangle(zd,s0,Bf,!1,Hd),null===v))return;const b=e.ray.origin.distanceTo(Hd);b<e.near||b>e.far||n.push({distance:b,point:Hd.clone(),uv:Il.getInterpolation(Hd,zd,Bf,s0,eg,tg,v_,new yn),face:null,object:this})}copy(e,n){return super.copy(e,n),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Uf(c,e,n,s,a,u){cd.subVectors(c,n).addScalar(.5).multiply(s),void 0!==a?(Lh.x=u*cd.x-a*cd.y,Lh.y=a*cd.x+u*cd.y):Lh.copy(cd),c.copy(e),c.x+=Lh.x,c.y+=Lh.y,c.applyMatrix4(r0)}class W1 extends Xt{constructor(e,n,s,a,u,p,v,b,E){super(e,n,s,a,u,p,v,b,E),this.isCanvasTexture=!0,this.needsUpdate=!0}}function vd(c,e,n){return!c||!n&&c.constructor===e?c:"number"==typeof e.BYTES_PER_ELEMENT?new e(c):Array.prototype.slice.call(c)}class tp{constructor(e,n,s,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new n.constructor(s),this.sampleValues=n,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let s=this._cachedIndex,a=n[s],u=n[s-1];e:{t:{let p;n:{i:if(!(e<a)){for(let v=s+2;;){if(void 0===a){if(e<u)break i;return s=n.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===v)break;if(u=a,a=n[++s],e<a)break t}p=n.length;break n}if(e>=u)break e;{const v=n[1];e<v&&(s=2,u=v);for(let b=s-2;;){if(void 0===u)return this._cachedIndex=0,this.copySampleValue_(0);if(s===b)break;if(a=u,u=n[--s-1],e>=u)break t}p=s,s=0}}for(;s<p;){const v=s+p>>>1;e<n[v]?p=v:s=v+1}if(a=n[s],u=n[s-1],void 0===u)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===a)return s=n.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,u,a)}return this.interpolate_(s,u,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=e*a;for(let p=0;p!==a;++p)n[p]=s[u+p];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class cE extends tp{constructor(e,n,s,a){super(e,n,s,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,n,s){const a=this.parameterPositions;let u=e-2,p=e+1,v=a[u],b=a[p];if(void 0===v)switch(this.getSettings_().endingStart){case 2401:u=e,v=2*n-s;break;case 2402:u=a.length-2,v=n+a[u]-a[u+1];break;default:u=e,v=s}if(void 0===b)switch(this.getSettings_().endingEnd){case 2401:p=e,b=2*s-n;break;case 2402:p=1,b=s+a[1]-a[0];break;default:p=e-1,b=n}const E=.5*(s-n),R=this.valueSize;this._weightPrev=E/(n-v),this._weightNext=E/(b-s),this._offsetPrev=u*R,this._offsetNext=p*R}interpolate_(e,n,s,a){const u=this.resultBuffer,p=this.sampleValues,v=this.valueSize,b=e*v,E=b-v,R=this._offsetPrev,B=this._offsetNext,U=this._weightPrev,$=this._weightNext,re=(s-n)/(a-n),ve=re*re,ae=ve*re,Z=-U*ae+2*U*ve-U*re,Ue=(1+U)*ae+(-1.5-2*U)*ve+(-.5+U)*re+1,Le=(-1-$)*ae+(1.5+$)*ve+.5*re,Pe=$*ae-$*ve;for(let Ft=0;Ft!==v;++Ft)u[Ft]=Z*p[R+Ft]+Ue*p[E+Ft]+Le*p[b+Ft]+Pe*p[B+Ft];return u}}class Q_ extends tp{constructor(e,n,s,a){super(e,n,s,a)}interpolate_(e,n,s,a){const u=this.resultBuffer,p=this.sampleValues,v=this.valueSize,b=e*v,E=b-v,R=(s-n)/(a-n),B=1-R;for(let U=0;U!==v;++U)u[U]=p[E+U]*B+p[b+U]*R;return u}}class np extends tp{constructor(e,n,s,a){super(e,n,s,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class ru{constructor(e,n,s,a){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=vd(n,this.TimeBufferType),this.values=vd(s,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let s;if(n.toJSON!==this.toJSON)s=n.toJSON(e);else{s={name:e.name,times:vd(e.times,Array),values:vd(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(s.interpolation=a)}return s.type=e.ValueTypeName,s}InterpolantFactoryMethodDiscrete(e){return new np(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Q_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new cE(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case 2300:n=this.InterpolantFactoryMethodDiscrete;break;case 2301:n=this.InterpolantFactoryMethodLinear;break;case 2302:n=this.InterpolantFactoryMethodSmooth}if(void 0===n){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(s);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const n=this.times;for(let s=0,a=n.length;s!==a;++s)n[s]+=e}return this}scale(e){if(1!==e){const n=this.times;for(let s=0,a=n.length;s!==a;++s)n[s]*=e}return this}trim(e,n){const s=this.times,a=s.length;let u=0,p=a-1;for(;u!==a&&s[u]<e;)++u;for(;-1!==p&&s[p]>n;)--p;if(++p,0!==u||p!==a){u>=p&&(p=Math.max(p,1),u=p-1);const v=this.getValueSize();this.times=s.slice(u,p),this.values=this.values.slice(u*v,p*v)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const s=this.times,a=this.values,u=s.length;0===u&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let p=null;for(let v=0;v!==u;v++){const b=s[v];if("number"==typeof b&&isNaN(b)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,v,b),e=!1;break}if(null!==p&&p>b){console.error("THREE.KeyframeTrack: Out of order keys.",this,v,b,p),e=!1;break}p=b}if(void 0!==a&&function $_(c){return ArrayBuffer.isView(c)&&!(c instanceof DataView)}(a))for(let v=0,b=a.length;v!==b;++v){const E=a[v];if(isNaN(E)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,v,E),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),s=this.getValueSize(),a=2302===this.getInterpolation(),u=e.length-1;let p=1;for(let v=1;v<u;++v){let b=!1;const E=e[v];if(E!==e[v+1]&&(1!==v||E!==e[0]))if(a)b=!0;else{const B=v*s,U=B-s,$=B+s;for(let re=0;re!==s;++re){const ve=n[B+re];if(ve!==n[U+re]||ve!==n[$+re]){b=!0;break}}}if(b){if(v!==p){e[p]=e[v];const B=v*s,U=p*s;for(let $=0;$!==s;++$)n[U+$]=n[B+$]}++p}}if(u>0){e[p]=e[u];for(let v=u*s,b=p*s,E=0;E!==s;++E)n[b+E]=n[v+E];++p}return p!==e.length?(this.times=e.slice(0,p),this.values=n.slice(0,p*s)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),a=new(0,this.constructor)(this.name,e,n);return a.createInterpolant=this.createInterpolant,a}}ru.prototype.TimeBufferType=Float32Array,ru.prototype.ValueBufferType=Float32Array,ru.prototype.DefaultInterpolation=2301;class Zh extends ru{constructor(e,n,s){super(e,n,s)}}Zh.prototype.ValueTypeName="bool",Zh.prototype.ValueBufferType=Array,Zh.prototype.DefaultInterpolation=2300,Zh.prototype.InterpolantFactoryMethodLinear=void 0,Zh.prototype.InterpolantFactoryMethodSmooth=void 0;(class Y_ extends ru{}).prototype.ValueTypeName="color";(class P0 extends ru{}).prototype.ValueTypeName="number";class Rg extends tp{constructor(e,n,s,a){super(e,n,s,a)}interpolate_(e,n,s,a){const u=this.resultBuffer,p=this.sampleValues,v=this.valueSize,b=(s-n)/(a-n);let E=e*v;for(let R=E+v;E!==R;E+=4)Fi.slerpFlat(u,0,p,E-v,p,E,b);return u}}class O0 extends ru{InterpolantFactoryMethodLinear(e){return new Rg(this.times,this.values,this.getValueSize(),e)}}O0.prototype.ValueTypeName="quaternion",O0.prototype.InterpolantFactoryMethodSmooth=void 0;class Jd extends ru{constructor(e,n,s){super(e,n,s)}}Jd.prototype.ValueTypeName="string",Jd.prototype.ValueBufferType=Array,Jd.prototype.DefaultInterpolation=2300,Jd.prototype.InterpolantFactoryMethodLinear=void 0,Jd.prototype.InterpolantFactoryMethodSmooth=void 0;(class oc extends ru{}).prototype.ValueTypeName="vector",Error;const ap="\\[\\]\\.:\\/",Hg=new RegExp("["+ap+"]","g"),zg="[^"+ap+"]",Mb="[^"+ap.replace("\\.","")+"]",Wg=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",zg)+/(WCOD+)?/.source.replace("WCOD",Mb)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",zg)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",zg)+"$"),dy=["material","materials","bones","map"];class hy{constructor(e,n,s){const a=s||$o.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,a)}getValue(e,n){this.bind();const a=this._bindings[this._targetGroup.nCachedObjects_];void 0!==a&&a.getValue(e,n)}setValue(e,n){const s=this._bindings;for(let a=this._targetGroup.nCachedObjects_,u=s.length;a!==u;++a)s[a].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=e.length;n!==s;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=e.length;n!==s;++n)e[n].unbind()}}let $o=(()=>{class c{constructor(n,s,a){this.path=s,this.parsedPath=a||c.parseTrackName(s),this.node=c.findNode(n,this.parsedPath.nodeName),this.rootNode=n,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(n,s,a){return n&&n.isAnimationObjectGroup?new c.Composite(n,s,a):new c(n,s,a)}static sanitizeNodeName(n){return n.replace(/\s/g,"_").replace(Hg,"")}static parseTrackName(n){const s=Wg.exec(n);if(null===s)throw new Error("PropertyBinding: Cannot parse trackName: "+n);const a={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},u=a.nodeName&&a.nodeName.lastIndexOf(".");if(void 0!==u&&-1!==u){const p=a.nodeName.substring(u+1);-1!==dy.indexOf(p)&&(a.nodeName=a.nodeName.substring(0,u),a.objectName=p)}if(null===a.propertyName||0===a.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return a}static findNode(n,s){if(void 0===s||""===s||"."===s||-1===s||s===n.name||s===n.uuid)return n;if(n.skeleton){const a=n.skeleton.getBoneByName(s);if(void 0!==a)return a}if(n.children){const a=function(p){for(let v=0;v<p.length;v++){const b=p[v];if(b.name===s||b.uuid===s)return b;const E=a(b.children);if(E)return E}return null},u=a(n.children);if(u)return u}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(n,s){n[s]=this.targetObject[this.propertyName]}_getValue_array(n,s){const a=this.resolvedProperty;for(let u=0,p=a.length;u!==p;++u)n[s++]=a[u]}_getValue_arrayElement(n,s){n[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(n,s){this.resolvedProperty.toArray(n,s)}_setValue_direct(n,s){this.targetObject[this.propertyName]=n[s]}_setValue_direct_setNeedsUpdate(n,s){this.targetObject[this.propertyName]=n[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(n,s){this.targetObject[this.propertyName]=n[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(n,s){const a=this.resolvedProperty;for(let u=0,p=a.length;u!==p;++u)a[u]=n[s++]}_setValue_array_setNeedsUpdate(n,s){const a=this.resolvedProperty;for(let u=0,p=a.length;u!==p;++u)a[u]=n[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(n,s){const a=this.resolvedProperty;for(let u=0,p=a.length;u!==p;++u)a[u]=n[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(n,s){this.resolvedProperty[this.propertyIndex]=n[s]}_setValue_arrayElement_setNeedsUpdate(n,s){this.resolvedProperty[this.propertyIndex]=n[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(n,s){this.resolvedProperty[this.propertyIndex]=n[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(n,s){this.resolvedProperty.fromArray(n,s)}_setValue_fromArray_setNeedsUpdate(n,s){this.resolvedProperty.fromArray(n,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(n,s){this.resolvedProperty.fromArray(n,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(n,s){this.bind(),this.getValue(n,s)}_setValue_unbound(n,s){this.bind(),this.setValue(n,s)}bind(){let n=this.node;const s=this.parsedPath,a=s.objectName,u=s.propertyName;let p=s.propertyIndex;if(n||(n=c.findNode(this.rootNode,s.nodeName),this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(a){let R=s.objectIndex;switch(a){case"materials":if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);n=n.material.materials;break;case"bones":if(!n.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);n=n.skeleton.bones;for(let B=0;B<n.length;B++)if(n[B].name===R){R=B;break}break;case"map":if("map"in n){n=n.map;break}if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);n=n.material.map;break;default:if(void 0===n[a])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);n=n[a]}if(void 0!==R){if(void 0===n[R])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);n=n[R]}}const v=n[u];if(void 0===v)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s.nodeName+"."+u+" but it wasn't found.",n);let b=this.Versioning.None;this.targetObject=n,void 0!==n.needsUpdate?b=this.Versioning.NeedsUpdate:void 0!==n.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate);let E=this.BindingType.Direct;if(void 0!==p){if("morphTargetInfluences"===u){if(!n.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!n.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==n.morphTargetDictionary[p]&&(p=n.morphTargetDictionary[p])}E=this.BindingType.ArrayElement,this.resolvedProperty=v,this.propertyIndex=p}else void 0!==v.fromArray&&void 0!==v.toArray?(E=this.BindingType.HasFromToArray,this.resolvedProperty=v):Array.isArray(v)?(E=this.BindingType.EntireArray,this.resolvedProperty=v):this.propertyName=u;this.getValue=this.GetterByBindingType[E],this.setValue=this.SetterByBindingTypeAndVersioning[E][b]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return c.Composite=hy,c})();$o.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},$o.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},$o.prototype.GetterByBindingType=[$o.prototype._getValue_direct,$o.prototype._getValue_array,$o.prototype._getValue_arrayElement,$o.prototype._getValue_toArray],$o.prototype.SetterByBindingTypeAndVersioning=[[$o.prototype._setValue_direct,$o.prototype._setValue_direct_setNeedsUpdate,$o.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$o.prototype._setValue_array,$o.prototype._setValue_array_setNeedsUpdate,$o.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$o.prototype._setValue_arrayElement,$o.prototype._setValue_arrayElement_setNeedsUpdate,$o.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$o.prototype._setValue_fromArray,$o.prototype._setValue_fromArray_setNeedsUpdate,$o.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"170"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="170");let _y=(()=>{class c{constructor(n){this.el=n,this.mouse={x:0,y:0},this.speed=.045,this.charChangeSpeed=.005,this.textures=[],this.charIndices=[],this.handleResize=()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},this.handleMouseMove=s=>{this.mouse.x=.1*(s.clientX/window.innerWidth*2-1),this.mouse.y=.1*-(s.clientY/window.innerHeight*2-1)}}ngOnInit(){this.initThree(),this.createTextures(),this.createParticles(),this.animate(),this.setupEventListeners()}initThree(){this.scene=new B1,this.camera=new aa(75,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.z=5,this.renderer=new rE({alpha:!0,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.el.nativeElement.appendChild(this.renderer.domElement)}createTextures(){"\u30a2\u30a1\u30ab\u30b5\u30bf\u30ca\u30cf\u30de\u30e4\u30e3\u30e9\u30ef\u30ac\u30b6\u30c0\u30d0\u30d1\u30a4\u30a3\u30ad\u30b7\u30c1\u30cb\u30d2\u30df\u30ea\u30f0\u30ae\u30b8\u30c2\u30d3\u30d4\u30a6\u30a5\u30af\u30b9\u30c4\u30cc\u30d5\u30e0\u30e6\u30e5\u30eb\u30b0\u30ba\u30d6\u30c5\u30d7\u30a8\u30a7\u30b1\u30bb\u30c6\u30cd\u30d8\u30e1\u30ec\u30f1\u30b2\u30bc\u30c7\u30d9\u30da\u30aa\u30a9\u30b3\u30bd\u30c8\u30ce\u30db\u30e2\u30e8\u30e7\u30ed\u30f2\u30b4\u30be\u30c9\u30dc\u30dd\u30f4\u30c3\u30f30123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\u2605\u2606\u2600\u2601\u2602\u2603\u2660\u2663\u2665\u2666\u266b\u20ac\xa5\xa3$\xa2%&*+-/<=>@#\xa7\u221e\u0430\u0431\u0432\u0433\u0434\u0435\u0451\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e\u044f\u0391\u0392\u0393\u0394\u0395\u0396\u0397\u0398\u0399\u039a\u039b\u039c\u039d\u039e\u039f\u03a0\u03a1\u03a3\u03a4\u03a5\u03a6\u03a7\u03a8\u03a9\u05d0\u05d1\u05d2\u05d3\u05d4\u05d5\u05d6\u05d7\u05d8\u05d9\u05db\u05da\u05dc\u05de\u05dd\u05e0\u05df\u05e1\u05e2\u05e4\u05e3\u05e6\u05e5\u05e7\u05e8\u05e9\u05ea".split("").forEach(s=>{const a=document.createElement("canvas");a.width=16,a.height=16;const u=a.getContext("2d");u.fillStyle="#00ff00",u.font="14px monospace",u.fillText(s,4,12),this.textures.push(new W1(a))})}createParticles(){this.particleGroup=new Au;for(let s=0;s<5e3;s++){const a=Math.random()*Math.PI*2,u=10+20*Math.random(),p=Math.cos(a)*u,v=Math.sin(a)*u,b=200*-Math.random(),E=new __(new Oh({map:this.textures[Math.floor(Math.random()*this.textures.length)],transparent:!0,opacity:.8,blending:2,color:65280}));E.position.set(p,v,b),E.scale.set(.5,.5,1),this.particleGroup.add(E),this.charIndices.push(Math.floor(Math.random()*this.textures.length))}this.scene.add(this.particleGroup)}animate(){this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.particleGroup.children.forEach((s,a)=>{if(s.position.z+=this.speed,s.position.z>5){s.position.z=-200;const u=Math.random()*Math.PI*2,p=10+20*Math.random();s.position.x=Math.cos(u)*p,s.position.y=Math.sin(u)*p}if(Math.random()<this.charChangeSpeed){const u=Math.floor(Math.random()*this.textures.length);this.charIndices[a]=u,s.material.map=this.textures[u]}});const n=Math.sqrt(this.mouse.x*this.mouse.x+this.mouse.y*this.mouse.y);this.particleGroup.children.forEach(s=>{s.material.opacity=.5+2*n}),this.camera.position.x=2*this.mouse.x,this.camera.position.y=2*this.mouse.y,this.renderer.render(this.scene,this.camera)}setupEventListeners(){window.addEventListener("resize",this.handleResize),document.addEventListener("mousemove",this.handleMouseMove)}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),window.removeEventListener("resize",this.handleResize),document.removeEventListener("mousemove",this.handleMouseMove),this.scene.traverse(s=>{s instanceof so&&(s.geometry.dispose(),s.material instanceof sl&&s.material.dispose())}),this.renderer.dispose();const n=this.renderer.domElement;n.parentNode?.removeChild(n)}static{this.\u0275fac=function(s){return new(s||c)(h.rXU(h.aKT))}}static{this.\u0275dir=h.FsC({type:c,selectors:[["","appMatrixField",""]],standalone:!0})}}return c})();var up=M(1774),yy=M(6101),qg=M(4843),Q0=M(7120);function zb(c,e){if(1&c){const n=h.RV6();h.j41(0,"app-birth-date-modal",5),h.bIt("birthdateUpdated",function(){h.eBV(n);const a=h.XpG();return h.Njj(a.handleBirthDateUpdate())}),h.k0s()}}function Gb(c,e){1&c&&h.nrm(0,"div",1)}function Wb(c,e){1&c&&(h.j41(0,"div",4),h.nrm(1,"app-loader-dots"),h.k0s())}function jb(c,e){if(1&c){const n=h.RV6();h.j41(0,"div",6)(1,"div",7),h.EFF(2),h.k0s(),h.j41(3,"button",8),h.bIt("click",function(){h.eBV(n);const a=h.XpG();return h.Njj(a.fetchData())}),h.nrm(4,"i",9),h.EFF(5),h.nI1(6,"translate"),h.k0s()()}if(2&c){const n=h.XpG();h.R7$(2),h.SpI(" ",n.dataError()," "),h.R7$(3),h.SpI(" ",h.bMT(6,2,"COMMON.RETRY")," ")}}function $b(c,e){1&c&&(h.j41(0,"div",10),h.nrm(1,"router-outlet"),h.k0s())}function Xb(c,e){if(1&c){const n=h.RV6();h.j41(0,"div",6),h.nrm(1,"app-loader-dots",11),h.j41(2,"button",8),h.bIt("click",function(){h.eBV(n);const a=h.XpG(2);return h.Njj(a.retryConnection())}),h.nrm(3,"i",9),h.EFF(4),h.nI1(5,"translate"),h.k0s()()}2&c&&(h.R7$(4),h.SpI(" ",h.bMT(5,1,"COMMON.RETRY")," "))}function by(c,e){1&c&&(h.j41(0,"div",4),h.nrm(1,"app-loader-dots"),h.k0s())}function xy(c,e){1&c&&(h.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"span",15),h.EFF(4,"Loading..."),h.k0s()(),h.j41(5,"p"),h.EFF(6),h.nI1(7,"translate"),h.k0s()()()),2&c&&(h.R7$(6),h.SpI(" ",h.bMT(7,1,"COMMON.STARTING")," "))}function Ey(c,e){if(1&c&&h.DNE(0,$b,2,0)(1,Xb,6,3)(2,by,2,0)(3,xy,8,3),2&c){let n;const s=h.XpG();h.vxM(0,"success"===(n=s.requestState())?0:"error"===n?1:"loading"===n?2:3)}}function Kb(c,e){1&c&&h.nrm(0,"app-footer")}let EE=(()=>{class c{constructor(n,s,a,u,p,v,b,E){this.authService=n,this.router=s,this.socketService=a,this.chatStateService=u,this.userService=p,this.recaptchaManagerService=v,this.encryptionService=b,this.keyManagerService=E,this.socketSubscription=null,this.connectionAttempted=!1,this.enableChatFeatures=!1,this.requestState=(0,h.vPA)("starting"),this.isConnected=(0,h.vPA)(!1),this.isSidebarOpen=(0,h.vPA)(!1),this.needsFetch=this.chatStateService?.getNeedsFetch()??(0,h.vPA)(!1),this.chatBotRoles=(0,h.vPA)([]),this.conversations=(0,h.vPA)([]),this.userName=(0,h.vPA)(""),this.userIsPro=(0,h.vPA)(!1),this.dataError=(0,h.vPA)(""),this.isDataLoading=(0,h.vPA)(!1),this.showBirthDateModal=(0,h.vPA)(!1),this.enableChatFeatures&&(this.chatDataManager=new yy.CN)}ngOnInit(){this.initializeAuth()}initializeAuth(){var n=this;return(0,X.A)(function*(){(yield n.authService.isAuthenticated())?(n.initializeWebSocket(),yield n.checkUserAge()):n.router.navigate([up.S.HOME])})()}checkUserAge(){var n=this;return(0,X.A)(function*(){n.isDataLoading.set(!0);const s=n.authService.getUserId();if(s)try{const a=yield(0,qg._)(n.userService.getUserInfo(s)),u=new Date("1832-01-18 00:00:00+00");if(a.birthdate&&new Date(a.birthdate).getTime()===u.getTime())return void n.showBirthDateModal.set(!0);yield n.fetchData(a)}catch(a){console.error("Error checking user age:",a),n.handleFetchError(a)}else n.router.navigate([up.S.HOME])})()}fetchData(n){var s=this;return(0,X.A)(function*(){s.isDataLoading.set(!0),s.dataError.set("");const a=`akashicRecords-${s.authService.getUserId()}`;try{const u=sessionStorage.getItem(a);if(u&&(!s.enableChatFeatures||!1===s.needsFetch()))try{const E=s.encryptionService.decryptFromStorage(u);return s.updateStateWithData(E),void s.isDataLoading.set(!1)}catch(E){console.warn("Cache decryption failed, fetching fresh data:",E),sessionStorage.removeItem(a)}yield s.keyManagerService.ensureKey();let v={};if(s.enableChatFeatures&&s.chatDataManager){const[E,R]=yield Promise.all([s.chatDataManager.fetchChatData(),n||(0,qg._)(s.userService.getUserInfo(s.authService.getUserId()))]);v={roles:E.roles,conversations:E.conversations,userInfo:R}}else v={roles:[],conversations:[],userInfo:n||(yield(0,qg._)(s.userService.getUserInfo(s.authService.getUserId())))};const b=s.encryptionService.encryptForStorage(v);sessionStorage.setItem(a,b),s.updateStateWithData(v)}catch(u){console.error("Fetch error:",u),s.handleFetchError(u)}finally{s.isDataLoading.set(!1)}})()}updateStateWithData(n){this.enableChatFeatures&&(this.chatBotRoles.set(n.roles),this.conversations.set(n.conversations)),this.userName.set(n.userInfo.fullName.split(" ")[0]),this.userIsPro.set(n.userInfo.isPro),this.recaptchaManagerService.hideBadge()}handleBirthDateUpdate(){this.showBirthDateModal.set(!1),this.fetchData()}handleFetchError(n){this.dataError.set(n instanceof Error?n.message:"An unexpected error occurred"),this.enableChatFeatures&&(this.chatBotRoles.set([]),this.conversations.set([])),this.userName.set(""),this.userIsPro.set(!1)}initializeWebSocket(){this.connectionAttempted?console.log("Connection already attempted, remaining in current state"):(this.connectionAttempted=!0,this.requestState.set("loading"),console.log("Initializing WebSocket connection..."),this.socketSubscription=this.socketService.isConnected().subscribe({next:n=>this.handleConnectionStatus(n),error:n=>this.handleConnectionError(n)}),this.connectSocket())}handleConnectionStatus(n){console.log("WebSocket connection status:",n),this.isConnected.set(n??!1),n?(console.log("Socket connection successful"),this.requestState.set("success")):"error"!==this.requestState()&&(console.error("Socket connection failed or lost"),this.requestState.set("error"))}handleConnectionError(n){console.error("WebSocket subscription error:",n),this.isConnected.set(!1),this.requestState.set("error")}connectSocket(){try{this.socketService.connect(),console.log("WebSocket connection initiated")}catch(n){console.error("Failed to initiate WebSocket connection:",n),this.handleConnectionError(n)}}retryConnection(){console.log("Retrying WebSocket connection..."),this.connectionAttempted=!1,this.initializeWebSocket()}toggleSidebar(){this.isSidebarOpen.update(n=>!n)}isOnChatRoute(){return this.router.url.includes("/chat/")}handleLogout(){const n=`akashicRecords-${this.authService.getUserId()}`;sessionStorage.removeItem(n),this.authService.logout(),console.log("Logout executed"),this.router.navigate([up.S.HOME])}toggleChatFeatures(n){this.enableChatFeatures=n,n&&!this.chatDataManager&&(this.chatDataManager=new yy.CN,this.fetchData())}isOnPreviewRoute(){return this.router.url.includes("/preview/")}ngOnDestroy(){this.socketSubscription?.unsubscribe(),this.socketService.disconnect(),console.log("Component destroyed, socket disconnected")}static{this.\u0275fac=function(s){return new(s||c)(h.rXU(z.uR),h.rXU(H.Ix),h.rXU(z.Cs),h.rXU(Q0.l),h.rXU(z.DL),h.rXU(z.gZ),h.rXU(z.LC),h.rXU(z.o2))}}static{this.\u0275cmp=h.VBU({type:c,selectors:[["app-private-layout"]],standalone:!0,features:[h.aNF],decls:9,vars:6,consts:[[1,"min-vh-100","d-flex","flex-column"],["appMatrixField","",1,"position-fixed","w-100","h-100","matrix-char",2,"z-index","-1"],[1,"mb-3",3,"logout","toggleSidebar","userName","userIsPro"],[1,"hue-rotating",2,"padding-top","60px"],[1,"flex-grow-1","d-flex","justify-content-center","align-items-center"],[3,"birthdateUpdated"],[1,"flex-grow-1","d-flex","flex-column","justify-content-center","align-items-center","p-4"],[1,"alert","alert-danger","text-center","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-sync-alt","me-2"],[1,"flex-grow-1","container-fluid","px-4"],[1,"mb-4"],[1,"flex-grow-1","d-flex","justify-content-center","align-items-center","text-muted"],[1,"text-center"],["role","status",1,"spinner-border","mb-3"],[1,"visually-hidden"]],template:function(s,a){1&s&&(h.DNE(0,zb,1,0,"app-birth-date-modal"),h.j41(1,"div",0),h.DNE(2,Gb,1,0,"div",1),h.j41(3,"app-private-navbar",2),h.bIt("logout",function(){return a.handleLogout()})("toggleSidebar",function(){return a.toggleSidebar()}),h.k0s(),h.j41(4,"main",3),h.DNE(5,Wb,2,0,"div",4)(6,jb,7,4)(7,Ey,4,1),h.k0s(),h.DNE(8,Kb,1,0,"app-footer"),h.k0s()),2&s&&(h.vxM(0,a.showBirthDateModal()?0:-1),h.R7$(2),h.vxM(2,a.isOnPreviewRoute()?-1:2),h.R7$(),h.Y8G("userName",a.userName())("userIsPro",a.userIsPro()),h.R7$(2),h.vxM(5,a.isDataLoading()?5:a.dataError()?6:7),h.R7$(3),h.vxM(8,a.isOnChatRoute()?-1:8))},dependencies:[l.Nu,l.n5,H.n3,ie,Re,ye.h,ye.D9,_y],styles:["main[_ngcontent-%COMP%]{transition:margin-left .3s ease;margin-left:0}main.with-sidebar[_ngcontent-%COMP%]{margin-left:30%;padding-left:5rem}@media (max-width: 768px){main.with-sidebar[_ngcontent-%COMP%]{margin-left:0}}.layout-container[_ngcontent-%COMP%]{position:relative;min-height:100vh}.three-background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1}"]})}}return c})()},1339:(Rt,Je,M)=>{"use strict";M.d(Je,{u:()=>ee});var l=M(467),H=M(1626),h=M(4412),fe=M(6648),X=M(8810),ie=M(5558),de=M(9437),Q=M(1774),z=M(5312),L=M(1946),I=M(4438),K=M(33),te=M(7036);let ee=(()=>{class ue{constructor(Re,ye,Te){this.http=Re,this.router=ye,this.clientSocketAuthService=Te,this.TOKEN_KEY="jwt",this.authState$=new h.t(!1),this.recaptchaToken=null,this.serverPublicKeyPromise=this.initializeEncryption(),this.updateAuthState()}initializeEncryption(){var Re=this;return(0,l.A)(function*(){try{const ye=yield Re.http.get(z.c.apiUrl+L.F.PUBLIC_KEY).toPromise();localStorage.setItem("serverPublicKey",ye.publicKey)}catch(ye){throw console.error("Failed to fetch server public key:",ye),ye}})()}sendRequest(Re,ye,Te){return(0,fe.H)(this.serverPublicKeyPromise).pipe((0,ie.n)(()=>"GET"===ye?this.http.get(Re):this.http.request(ye,Re,{body:Te})))}register(Re){return this.sendRequest(z.c.apiUrl+L.F.REGISTER,"POST",Re)}confirmEmail(Re){return this.sendRequest(z.c.apiUrl+L.F.CONFIRM,"POST",{token:Re})}setRecaptchaToken(Re){this.recaptchaToken=Re}login(Re){const ye=new H.Lr({"Content-Type":"application/json","X-Recaptcha-Token":Re.recaptchaToken||""});return(0,fe.H)(this.serverPublicKeyPromise).pipe((0,ie.n)(()=>this.http.post(z.c.apiUrl+L.F.LOGIN,Re,{headers:ye})),(0,de.W)(Te=>(console.error("Login error:",Te),(0,X.$)(()=>Te))))}logout(){localStorage.removeItem(this.TOKEN_KEY),this.updateAuthState(),this.router.navigate([Q.S.HOME]),console.log("bye bye, desconectao")}isAuthenticated(){return this.authState$.asObservable()}updateAuthState(){const Re=localStorage.getItem(this.TOKEN_KEY),ye=!!Re&&!this.isTokenExpired(Re);console.log("Auth state updated:",ye),this.authState$.next(ye)}isTokenExpired(Re){try{const{exp:ye}=JSON.parse(atob(Re.split(".")[1]));return Date.now()>=1e3*ye}catch{return console.log("bye bye, desconectao"),!0}}getUserId(){try{const Re=localStorage.getItem("jwt");return Re?this.decodeJwtToken(Re).sub:null}catch(Re){return console.error("Error decoding token:",Re),null}}forgotPassword(Re){return this.sendRequest(z.c.apiUrl+L.F.FORGOT_PASSWORD,"POST",{email:Re})}resetPassword(Re,ye){return this.sendRequest(z.c.apiUrl+L.F.RESET_PASSWORD,"POST",{token:Re,newPassword:ye})}decodeJwtToken(Re){try{const[,ye]=Re.split(".");return JSON.parse(this.base64UrlDecode(ye))}catch(ye){throw console.error("Error decoding JWT token:",ye),new Error("Invalid token format")}}base64UrlDecode(Re){const ye=Re.replace(/-/g,"+").replace(/_/g,"/"),Te="=".repeat((4-ye.length%4)%4);return decodeURIComponent(atob(ye+Te).split("").map(We=>"%"+("00"+We.charCodeAt(0).toString(16)).slice(-2)).join(""))}static{this.\u0275fac=function(ye){return new(ye||ue)(I.KVO(H.Qq),I.KVO(K.Ix),I.KVO(te.C))}}static{this.\u0275prov=I.jDH({token:ue,factory:ue.\u0275fac,providedIn:"root"})}}return ue})()},7036:(Rt,Je,M)=>{"use strict";M.d(Je,{C:()=>Go});var l={};M.r(l),M.d(l,{Decoder:()=>Ir,Encoder:()=>Hi,PacketType:()=>Pn,protocol:()=>kr});const H=Object.create(null);H.open="0",H.close="1",H.ping="2",H.pong="3",H.message="4",H.upgrade="5",H.noop="6";const h=Object.create(null);Object.keys(H).forEach(Ye=>{h[H[Ye]]=Ye});const fe={type:"error",data:"parser error"},X="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),ie="function"==typeof ArrayBuffer,de=Ye=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(Ye):Ye&&Ye.buffer instanceof ArrayBuffer,Q=({type:Ye,data:O},G,ce)=>X&&O instanceof Blob?G?ce(O):z(O,ce):ie&&(O instanceof ArrayBuffer||de(O))?G?ce(O):z(new Blob([O]),ce):ce(H[Ye]+(O||"")),z=(Ye,O)=>{const G=new FileReader;return G.onload=function(){const ce=G.result.split(",")[1];O("b"+(ce||""))},G.readAsDataURL(Ye)};function L(Ye){return Ye instanceof Uint8Array?Ye:Ye instanceof ArrayBuffer?new Uint8Array(Ye):new Uint8Array(Ye.buffer,Ye.byteOffset,Ye.byteLength)}let I;const ee=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let Ye=0;Ye<64;Ye++)ee["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Ye)]=Ye;const Re="function"==typeof ArrayBuffer,ye=(Ye,O)=>{if("string"!=typeof Ye)return{type:"message",data:We(Ye,O)};const G=Ye.charAt(0);return"b"===G?{type:"message",data:Te(Ye.substring(1),O)}:h[G]?Ye.length>1?{type:h[G],data:Ye.substring(1)}:{type:h[G]}:fe},Te=(Ye,O)=>{if(Re){const G=(Ye=>{let ce,ht,tn,hn,zn,O=.75*Ye.length,G=Ye.length,qe=0;"="===Ye[Ye.length-1]&&(O--,"="===Ye[Ye.length-2]&&O--);const Kn=new ArrayBuffer(O),qn=new Uint8Array(Kn);for(ce=0;ce<G;ce+=4)ht=ee[Ye.charCodeAt(ce)],tn=ee[Ye.charCodeAt(ce+1)],hn=ee[Ye.charCodeAt(ce+2)],zn=ee[Ye.charCodeAt(ce+3)],qn[qe++]=ht<<2|tn>>4,qn[qe++]=(15&tn)<<4|hn>>2,qn[qe++]=(3&hn)<<6|63&zn;return Kn})(Ye);return We(G,O)}return{base64:!0,data:Ye}},We=(Ye,O)=>"blob"===O?Ye instanceof Blob?Ye:new Blob([Ye]):Ye instanceof ArrayBuffer?Ye:Ye.buffer;let pt;function ct(Ye){return Ye.reduce((O,G)=>O+G.length,0)}function le(Ye,O){if(Ye[0].length===O)return Ye.shift();const G=new Uint8Array(O);let ce=0;for(let qe=0;qe<O;qe++)G[qe]=Ye[0][ce++],ce===Ye[0].length&&(Ye.shift(),ce=0);return Ye.length&&ce<Ye[0].length&&(Ye[0]=Ye[0].slice(ce)),G}function j(Ye){if(Ye)return function J(Ye){for(var O in j.prototype)Ye[O]=j.prototype[O];return Ye}(Ye)}j.prototype.on=j.prototype.addEventListener=function(Ye,O){return this._callbacks=this._callbacks||{},(this._callbacks["$"+Ye]=this._callbacks["$"+Ye]||[]).push(O),this},j.prototype.once=function(Ye,O){function G(){this.off(Ye,G),O.apply(this,arguments)}return G.fn=O,this.on(Ye,G),this},j.prototype.off=j.prototype.removeListener=j.prototype.removeAllListeners=j.prototype.removeEventListener=function(Ye,O){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var G=this._callbacks["$"+Ye];if(!G)return this;if(1==arguments.length)return delete this._callbacks["$"+Ye],this;for(var ce,qe=0;qe<G.length;qe++)if((ce=G[qe])===O||ce.fn===O){G.splice(qe,1);break}return 0===G.length&&delete this._callbacks["$"+Ye],this},j.prototype.emitReserved=j.prototype.emit=function(Ye){this._callbacks=this._callbacks||{};for(var O=new Array(arguments.length-1),G=this._callbacks["$"+Ye],ce=1;ce<arguments.length;ce++)O[ce-1]=arguments[ce];if(G){ce=0;for(var qe=(G=G.slice(0)).length;ce<qe;++ce)G[ce].apply(this,O)}return this},j.prototype.listeners=function(Ye){return this._callbacks=this._callbacks||{},this._callbacks["$"+Ye]||[]},j.prototype.hasListeners=function(Ye){return!!this.listeners(Ye).length};const _e="function"==typeof Promise&&"function"==typeof Promise.resolve?O=>Promise.resolve().then(O):(O,G)=>G(O,0),Ee=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function V(Ye,...O){return O.reduce((G,ce)=>(Ye.hasOwnProperty(ce)&&(G[ce]=Ye[ce]),G),{})}const Oe=Ee.setTimeout,Ot=Ee.clearTimeout;function ot(Ye,O){O.useNativeTimers?(Ye.setTimeoutFn=Oe.bind(Ee),Ye.clearTimeoutFn=Ot.bind(Ee)):(Ye.setTimeoutFn=Ee.setTimeout.bind(Ee),Ye.clearTimeoutFn=Ee.clearTimeout.bind(Ee))}function ze(Ye){return"string"==typeof Ye?function Mt(Ye){let O=0,G=0;for(let ce=0,qe=Ye.length;ce<qe;ce++)O=Ye.charCodeAt(ce),O<128?G+=1:O<2048?G+=2:O<55296||O>=57344?G+=3:(ce++,G+=4);return G}(Ye):Math.ceil(1.33*(Ye.byteLength||Ye.size))}function st(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Yt extends Error{constructor(O,G,ce){super(O),this.description=G,this.context=ce,this.type="TransportError"}}class dn extends j{constructor(O){super(),this.writable=!1,ot(this,O),this.opts=O,this.query=O.query,this.socket=O.socket,this.supportsBinary=!O.forceBase64}onError(O,G,ce){return super.emitReserved("error",new Yt(O,G,ce)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(O){"open"===this.readyState&&this.write(O)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(O){const G=ye(O,this.socket.binaryType);this.onPacket(G)}onPacket(O){super.emitReserved("packet",O)}onClose(O){this.readyState="closed",super.emitReserved("close",O)}pause(O){}createUri(O,G={}){return O+"://"+this._hostname()+this._port()+this.opts.path+this._query(G)}_hostname(){const O=this.opts.hostname;return-1===O.indexOf(":")?O:"["+O+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(O){const G=function je(Ye){let O="";for(let G in Ye)Ye.hasOwnProperty(G)&&(O.length&&(O+="&"),O+=encodeURIComponent(G)+"="+encodeURIComponent(Ye[G]));return O}(O);return G.length?"?"+G:""}}class fn extends dn{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(O){this.readyState="pausing";const G=()=>{this.readyState="paused",O()};if(this._polling||!this.writable){let ce=0;this._polling&&(ce++,this.once("pollComplete",function(){--ce||G()})),this.writable||(ce++,this.once("drain",function(){--ce||G()}))}else G()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(O){((Ye,O)=>{const G=Ye.split("\x1e"),ce=[];for(let qe=0;qe<G.length;qe++){const ht=ye(G[qe],O);if(ce.push(ht),"error"===ht.type)break}return ce})(O,this.socket.binaryType).forEach(ce=>{if("opening"===this.readyState&&"open"===ce.type&&this.onOpen(),"close"===ce.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(ce)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const O=()=>{this.write([{type:"close"}])};"open"===this.readyState?O():this.once("open",O)}write(O){this.writable=!1,((Ye,O)=>{const G=Ye.length,ce=new Array(G);let qe=0;Ye.forEach((ht,tn)=>{Q(ht,!1,hn=>{ce[tn]=hn,++qe===G&&O(ce.join("\x1e"))})})})(O,G=>{this.doWrite(G,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const O=this.opts.secure?"https":"http",G=this.query||{};return!1!==this.opts.timestampRequests&&(G[this.opts.timestampParam]=st()),!this.supportsBinary&&!G.sid&&(G.b64=1),this.createUri(O,G)}}let Sn=!1;try{Sn=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Gt=Sn;function vn(){}class at extends fn{constructor(O){if(super(O),typeof location<"u"){const G="https:"===location.protocol;let ce=location.port;ce||(ce=G?"443":"80"),this.xd=typeof location<"u"&&O.hostname!==location.hostname||ce!==O.port}}doWrite(O,G){const ce=this.request({method:"POST",data:O});ce.on("success",G),ce.on("error",(qe,ht)=>{this.onError("xhr post error",qe,ht)})}doPoll(){const O=this.request();O.on("data",this.onData.bind(this)),O.on("error",(G,ce)=>{this.onError("xhr poll error",G,ce)}),this.pollXhr=O}}let Dt=(()=>{class Ye extends j{constructor(G,ce,qe){super(),this.createRequest=G,ot(this,qe),this._opts=qe,this._method=qe.method||"GET",this._uri=ce,this._data=void 0!==qe.data?qe.data:null,this._create()}_create(){var G;const ce=V(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");ce.xdomain=!!this._opts.xd;const qe=this._xhr=this.createRequest(ce);try{qe.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){qe.setDisableHeaderCheck&&qe.setDisableHeaderCheck(!0);for(let ht in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(ht)&&qe.setRequestHeader(ht,this._opts.extraHeaders[ht])}}catch{}if("POST"===this._method)try{qe.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{qe.setRequestHeader("Accept","*/*")}catch{}null===(G=this._opts.cookieJar)||void 0===G||G.addCookies(qe),"withCredentials"in qe&&(qe.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(qe.timeout=this._opts.requestTimeout),qe.onreadystatechange=()=>{var ht;3===qe.readyState&&(null===(ht=this._opts.cookieJar)||void 0===ht||ht.parseCookies(qe.getResponseHeader("set-cookie"))),4===qe.readyState&&(200===qe.status||1223===qe.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof qe.status?qe.status:0)},0))},qe.send(this._data)}catch(ht){return void this.setTimeoutFn(()=>{this._onError(ht)},0)}typeof document<"u"&&(this._index=Ye.requestsCount++,Ye.requests[this._index]=this)}_onError(G){this.emitReserved("error",G,this._xhr),this._cleanup(!0)}_cleanup(G){if(!(typeof this._xhr>"u"||null===this._xhr)){if(this._xhr.onreadystatechange=vn,G)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ye.requests[this._index],this._xhr=null}}_onLoad(){const G=this._xhr.responseText;null!==G&&(this.emitReserved("data",G),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return Ye.requestsCount=0,Ye.requests={},Ye})();function Tt(){for(let Ye in Dt.requests)Dt.requests.hasOwnProperty(Ye)&&Dt.requests[Ye].abort()}typeof document<"u"&&("function"==typeof attachEvent?attachEvent("onunload",Tt):"function"==typeof addEventListener&&addEventListener("onpagehide"in Ee?"pagehide":"unload",Tt,!1));const un=function(){const Ye=Yn({xdomain:!1});return Ye&&null!==Ye.responseType}();function Yn(Ye){const O=Ye.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!O||Gt))return new XMLHttpRequest}catch{}if(!O)try{return new(Ee[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch{}}const Vn=typeof navigator<"u"&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class Yr extends dn{get name(){return"websocket"}doOpen(){const O=this.uri(),G=this.opts.protocols,ce=Vn?{}:V(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(ce.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(O,G,ce)}catch(qe){return this.emitReserved("error",qe)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=O=>this.onClose({description:"websocket connection closed",context:O}),this.ws.onmessage=O=>this.onData(O.data),this.ws.onerror=O=>this.onError("websocket error",O)}write(O){this.writable=!1;for(let G=0;G<O.length;G++){const ce=O[G],qe=G===O.length-1;Q(ce,this.supportsBinary,ht=>{try{this.doWrite(ce,ht)}catch{}qe&&_e(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const O=this.opts.secure?"wss":"ws",G=this.query||{};return this.opts.timestampRequests&&(G[this.opts.timestampParam]=st()),this.supportsBinary||(G.b64=1),this.createUri(O,G)}}const Gn=Ee.WebSocket||Ee.MozWebSocket,Si={websocket:class An extends Yr{createSocket(O,G,ce){return Vn?new Gn(O,G,ce):G?new Gn(O,G):new Gn(O)}doWrite(O,G){this.ws.send(G)}},webtransport:class ii extends dn{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(O){return this.emitReserved("error",O)}this._transport.closed.then(()=>{this.onClose()}).catch(O=>{this.onError("webtransport error",O)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(O=>{const G=function x(Ye,O){pt||(pt=new TextDecoder);const G=[];let ce=0,qe=-1,ht=!1;return new TransformStream({transform(tn,hn){for(G.push(tn);;){if(0===ce){if(ct(G)<1)break;const zn=le(G,1);ht=!(128&~zn[0]),qe=127&zn[0],ce=qe<126?3:126===qe?1:2}else if(1===ce){if(ct(G)<2)break;const zn=le(G,2);qe=new DataView(zn.buffer,zn.byteOffset,zn.length).getUint16(0),ce=3}else if(2===ce){if(ct(G)<8)break;const zn=le(G,8),Kn=new DataView(zn.buffer,zn.byteOffset,zn.length),qn=Kn.getUint32(0);if(qn>Math.pow(2,21)-1){hn.enqueue(fe);break}qe=qn*Math.pow(2,32)+Kn.getUint32(4),ce=3}else{if(ct(G)<qe)break;const zn=le(G,qe);hn.enqueue(ye(ht?zn:pt.decode(zn),O)),ce=0}if(0===qe||qe>Ye){hn.enqueue(fe);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),ce=O.readable.pipeThrough(G).getReader(),qe=function St(){return new TransformStream({transform(Ye,O){!function K(Ye,O){X&&Ye.data instanceof Blob?Ye.data.arrayBuffer().then(L).then(O):ie&&(Ye.data instanceof ArrayBuffer||de(Ye.data))?O(L(Ye.data)):Q(Ye,!1,G=>{I||(I=new TextEncoder),O(I.encode(G))})}(Ye,G=>{const ce=G.length;let qe;if(ce<126)qe=new Uint8Array(1),new DataView(qe.buffer).setUint8(0,ce);else if(ce<65536){qe=new Uint8Array(3);const ht=new DataView(qe.buffer);ht.setUint8(0,126),ht.setUint16(1,ce)}else{qe=new Uint8Array(9);const ht=new DataView(qe.buffer);ht.setUint8(0,127),ht.setBigUint64(1,BigInt(ce))}Ye.data&&"string"!=typeof Ye.data&&(qe[0]|=128),O.enqueue(qe),O.enqueue(G)})}})}();qe.readable.pipeTo(O.writable),this._writer=qe.writable.getWriter();const ht=()=>{ce.read().then(({done:hn,value:zn})=>{hn||(this.onPacket(zn),ht())}).catch(hn=>{})};ht();const tn={type:"open"};this.query.sid&&(tn.data=`{"sid":"${this.query.sid}"}`),this._writer.write(tn).then(()=>this.onOpen())})})}write(O){this.writable=!1;for(let G=0;G<O.length;G++){const qe=G===O.length-1;this._writer.write(O[G]).then(()=>{qe&&_e(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var O;null===(O=this._transport)||void 0===O||O.close()}},polling:class Ln extends at{constructor(O){super(O),this.supportsBinary=un&&!(O&&O.forceBase64)}request(O={}){return Object.assign(O,{xd:this.xd},this.opts),new Dt(Yn,this.uri(),O)}}},$i=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ri=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ki(Ye){if(Ye.length>8e3)throw"URI too long";const O=Ye,G=Ye.indexOf("["),ce=Ye.indexOf("]");-1!=G&&-1!=ce&&(Ye=Ye.substring(0,G)+Ye.substring(G,ce).replace(/:/g,";")+Ye.substring(ce,Ye.length));let qe=$i.exec(Ye||""),ht={},tn=14;for(;tn--;)ht[Ri[tn]]=qe[tn]||"";return-1!=G&&-1!=ce&&(ht.source=O,ht.host=ht.host.substring(1,ht.host.length-1).replace(/;/g,":"),ht.authority=ht.authority.replace("[","").replace("]","").replace(/;/g,":"),ht.ipv6uri=!0),ht.pathNames=function Pi(Ye,O){const ce=O.replace(/\/{2,9}/g,"/").split("/");return("/"==O.slice(0,1)||0===O.length)&&ce.splice(0,1),"/"==O.slice(-1)&&ce.splice(ce.length-1,1),ce}(0,ht.path),ht.queryKey=function Ps(Ye,O){const G={};return O.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(ce,qe,ht){qe&&(G[qe]=ht)}),G}(0,ht.query),ht}const ri="function"==typeof addEventListener&&"function"==typeof removeEventListener,qi=[];ri&&addEventListener("offline",()=>{qi.forEach(Ye=>Ye())},!1);let _r=(()=>{class Ye extends j{constructor(G,ce){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,G&&"object"==typeof G&&(ce=G,G=null),G){const qe=Ki(G);ce.hostname=qe.host,ce.secure="https"===qe.protocol||"wss"===qe.protocol,ce.port=qe.port,qe.query&&(ce.query=qe.query)}else ce.host&&(ce.hostname=Ki(ce.host).host);ot(this,ce),this.secure=null!=ce.secure?ce.secure:typeof location<"u"&&"https:"===location.protocol,ce.hostname&&!ce.port&&(ce.port=this.secure?"443":"80"),this.hostname=ce.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=ce.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},ce.transports.forEach(qe=>{const ht=qe.prototype.name;this.transports.push(ht),this._transportsByName[ht]=qe}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},ce),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function yt(Ye){let O={},G=Ye.split("&");for(let ce=0,qe=G.length;ce<qe;ce++){let ht=G[ce].split("=");O[decodeURIComponent(ht[0])]=decodeURIComponent(ht[1])}return O}(this.opts.query)),ri&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},qi.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(G){const ce=Object.assign({},this.opts.query);ce.EIO=4,ce.transport=G,this.id&&(ce.sid=this.id);const qe=Object.assign({},this.opts,{query:ce,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[G]);return new this._transportsByName[G](qe)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const G=this.opts.rememberUpgrade&&Ye.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const ce=this.createTransport(G);ce.open(),this.setTransport(ce)}setTransport(G){this.transport&&this.transport.removeAllListeners(),this.transport=G,G.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",ce=>this._onClose("transport close",ce))}onOpen(){this.readyState="open",Ye.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(G){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",G),this.emitReserved("heartbeat"),G.type){case"open":this.onHandshake(JSON.parse(G.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const ce=new Error("server error");ce.code=G.data,this._onError(ce);break;case"message":this.emitReserved("data",G.data),this.emitReserved("message",G.data)}}onHandshake(G){this.emitReserved("handshake",G),this.id=G.sid,this.transport.query.sid=G.sid,this._pingInterval=G.pingInterval,this._pingTimeout=G.pingTimeout,this._maxPayload=G.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const G=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+G,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},G),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const G=this._getWritablePackets();this.transport.send(G),this._prevBufferLen=G.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let ce=1;for(let qe=0;qe<this.writeBuffer.length;qe++){const ht=this.writeBuffer[qe].data;if(ht&&(ce+=ze(ht)),qe>0&&ce>this._maxPayload)return this.writeBuffer.slice(0,qe);ce+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const G=Date.now()>this._pingTimeoutTime;return G&&(this._pingTimeoutTime=0,_e(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),G}write(G,ce,qe){return this._sendPacket("message",G,ce,qe),this}send(G,ce,qe){return this._sendPacket("message",G,ce,qe),this}_sendPacket(G,ce,qe,ht){if("function"==typeof ce&&(ht=ce,ce=void 0),"function"==typeof qe&&(ht=qe,qe=null),"closing"===this.readyState||"closed"===this.readyState)return;(qe=qe||{}).compress=!1!==qe.compress;const tn={type:G,data:ce,options:qe};this.emitReserved("packetCreate",tn),this.writeBuffer.push(tn),ht&&this.once("flush",ht),this.flush()}close(){const G=()=>{this._onClose("forced close"),this.transport.close()},ce=()=>{this.off("upgrade",ce),this.off("upgradeError",ce),G()},qe=()=>{this.once("upgrade",ce),this.once("upgradeError",ce)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?qe():G()}):this.upgrading?qe():G()),this}_onError(G){if(Ye.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",G),this._onClose("transport error",G)}_onClose(G,ce){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ri&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const qe=qi.indexOf(this._offlineEventListener);-1!==qe&&qi.splice(qe,1)}this.readyState="closed",this.id=null,this.emitReserved("close",G,ce),this.writeBuffer=[],this._prevBufferLen=0}}}return Ye.protocol=4,Ye})();class wi extends _r{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let O=0;O<this._upgrades.length;O++)this._probe(this._upgrades[O])}_probe(O){let G=this.createTransport(O),ce=!1;_r.priorWebsocketSuccess=!1;const qe=()=>{ce||(G.send([{type:"ping",data:"probe"}]),G.once("packet",Or=>{if(!ce)if("pong"===Or.type&&"probe"===Or.data){if(this.upgrading=!0,this.emitReserved("upgrading",G),!G)return;_r.priorWebsocketSuccess="websocket"===G.name,this.transport.pause(()=>{ce||"closed"!==this.readyState&&(qn(),this.setTransport(G),G.send([{type:"upgrade"}]),this.emitReserved("upgrade",G),G=null,this.upgrading=!1,this.flush())})}else{const Fr=new Error("probe error");Fr.transport=G.name,this.emitReserved("upgradeError",Fr)}}))};function ht(){ce||(ce=!0,qn(),G.close(),G=null)}const tn=Or=>{const Fr=new Error("probe error: "+Or);Fr.transport=G.name,ht(),this.emitReserved("upgradeError",Fr)};function hn(){tn("transport closed")}function zn(){tn("socket closed")}function Kn(Or){G&&Or.name!==G.name&&ht()}const qn=()=>{G.removeListener("open",qe),G.removeListener("error",tn),G.removeListener("close",hn),this.off("close",zn),this.off("upgrading",Kn)};G.once("open",qe),G.once("error",tn),G.once("close",hn),this.once("close",zn),this.once("upgrading",Kn),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==O?this.setTimeoutFn(()=>{ce||G.open()},200):G.open()}onHandshake(O){this._upgrades=this._filterUpgrades(O.upgrades),super.onHandshake(O)}_filterUpgrades(O){const G=[];for(let ce=0;ce<O.length;ce++)~this.transports.indexOf(O[ce])&&G.push(O[ce]);return G}}class Cr extends wi{constructor(O,G={}){const ce="object"==typeof O?O:G;(!ce.transports||ce.transports&&"string"==typeof ce.transports[0])&&(ce.transports=(ce.transports||["polling","websocket","webtransport"]).map(qe=>Si[qe]).filter(qe=>!!qe)),super(O,ce)}}const Bs="function"==typeof ArrayBuffer,Pr=Ye=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(Ye):Ye.buffer instanceof ArrayBuffer,At=Object.prototype.toString,Ht="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===At.call(Blob),rt="function"==typeof File||typeof File<"u"&&"[object FileConstructor]"===At.call(File);function xt(Ye){return Bs&&(Ye instanceof ArrayBuffer||Pr(Ye))||Ht&&Ye instanceof Blob||rt&&Ye instanceof File}function on(Ye,O){if(!Ye||"object"!=typeof Ye)return!1;if(Array.isArray(Ye)){for(let G=0,ce=Ye.length;G<ce;G++)if(on(Ye[G]))return!0;return!1}if(xt(Ye))return!0;if(Ye.toJSON&&"function"==typeof Ye.toJSON&&1===arguments.length)return on(Ye.toJSON(),!0);for(const G in Ye)if(Object.prototype.hasOwnProperty.call(Ye,G)&&on(Ye[G]))return!0;return!1}function mn(Ye){const O=[],ce=Ye;return ce.data=Un(Ye.data,O),ce.attachments=O.length,{packet:ce,buffers:O}}function Un(Ye,O){if(!Ye)return Ye;if(xt(Ye)){const G={_placeholder:!0,num:O.length};return O.push(Ye),G}if(Array.isArray(Ye)){const G=new Array(Ye.length);for(let ce=0;ce<Ye.length;ce++)G[ce]=Un(Ye[ce],O);return G}if("object"==typeof Ye&&!(Ye instanceof Date)){const G={};for(const ce in Ye)Object.prototype.hasOwnProperty.call(Ye,ce)&&(G[ce]=Un(Ye[ce],O));return G}return Ye}function Qi(Ye,O){return Ye.data=si(Ye.data,O),delete Ye.attachments,Ye}function si(Ye,O){if(!Ye)return Ye;if(Ye&&!0===Ye._placeholder){if("number"==typeof Ye.num&&Ye.num>=0&&Ye.num<O.length)return O[Ye.num];throw new Error("illegal attachments")}if(Array.isArray(Ye))for(let G=0;G<Ye.length;G++)Ye[G]=si(Ye[G],O);else if("object"==typeof Ye)for(const G in Ye)Object.prototype.hasOwnProperty.call(Ye,G)&&(Ye[G]=si(Ye[G],O));return Ye}const Oi=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],kr=5;var Pn=function(Ye){return Ye[Ye.CONNECT=0]="CONNECT",Ye[Ye.DISCONNECT=1]="DISCONNECT",Ye[Ye.EVENT=2]="EVENT",Ye[Ye.ACK=3]="ACK",Ye[Ye.CONNECT_ERROR=4]="CONNECT_ERROR",Ye[Ye.BINARY_EVENT=5]="BINARY_EVENT",Ye[Ye.BINARY_ACK=6]="BINARY_ACK",Ye}(Pn||{});class Hi{constructor(O){this.replacer=O}encode(O){return O.type!==Pn.EVENT&&O.type!==Pn.ACK||!on(O)?[this.encodeAsString(O)]:this.encodeAsBinary({type:O.type===Pn.EVENT?Pn.BINARY_EVENT:Pn.BINARY_ACK,nsp:O.nsp,data:O.data,id:O.id})}encodeAsString(O){let G=""+O.type;return(O.type===Pn.BINARY_EVENT||O.type===Pn.BINARY_ACK)&&(G+=O.attachments+"-"),O.nsp&&"/"!==O.nsp&&(G+=O.nsp+","),null!=O.id&&(G+=O.id),null!=O.data&&(G+=JSON.stringify(O.data,this.replacer)),G}encodeAsBinary(O){const G=mn(O),ce=this.encodeAsString(G.packet),qe=G.buffers;return qe.unshift(ce),qe}}function Ds(Ye){return"[object Object]"===Object.prototype.toString.call(Ye)}class Ir extends j{constructor(O){super(),this.reviver=O}add(O){let G;if("string"==typeof O){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");G=this.decodeString(O);const ce=G.type===Pn.BINARY_EVENT;ce||G.type===Pn.BINARY_ACK?(G.type=ce?Pn.EVENT:Pn.ACK,this.reconstructor=new yi(G),0===G.attachments&&super.emitReserved("decoded",G)):super.emitReserved("decoded",G)}else{if(!xt(O)&&!O.base64)throw new Error("Unknown type: "+O);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");G=this.reconstructor.takeBinaryData(O),G&&(this.reconstructor=null,super.emitReserved("decoded",G))}}decodeString(O){let G=0;const ce={type:Number(O.charAt(0))};if(void 0===Pn[ce.type])throw new Error("unknown packet type "+ce.type);if(ce.type===Pn.BINARY_EVENT||ce.type===Pn.BINARY_ACK){const ht=G+1;for(;"-"!==O.charAt(++G)&&G!=O.length;);const tn=O.substring(ht,G);if(tn!=Number(tn)||"-"!==O.charAt(G))throw new Error("Illegal attachments");ce.attachments=Number(tn)}if("/"===O.charAt(G+1)){const ht=G+1;for(;++G&&","!==O.charAt(G)&&G!==O.length;);ce.nsp=O.substring(ht,G)}else ce.nsp="/";const qe=O.charAt(G+1);if(""!==qe&&Number(qe)==qe){const ht=G+1;for(;++G;){const tn=O.charAt(G);if(null==tn||Number(tn)!=tn){--G;break}if(G===O.length)break}ce.id=Number(O.substring(ht,G+1))}if(O.charAt(++G)){const ht=this.tryParse(O.substr(G));if(!Ir.isPayloadValid(ce.type,ht))throw new Error("invalid payload");ce.data=ht}return ce}tryParse(O){try{return JSON.parse(O,this.reviver)}catch{return!1}}static isPayloadValid(O,G){switch(O){case Pn.CONNECT:return Ds(G);case Pn.DISCONNECT:return void 0===G;case Pn.CONNECT_ERROR:return"string"==typeof G||Ds(G);case Pn.EVENT:case Pn.BINARY_EVENT:return Array.isArray(G)&&("number"==typeof G[0]||"string"==typeof G[0]&&-1===Oi.indexOf(G[0]));case Pn.ACK:case Pn.BINARY_ACK:return Array.isArray(G)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class yi{constructor(O){this.packet=O,this.buffers=[],this.reconPack=O}takeBinaryData(O){if(this.buffers.push(O),this.buffers.length===this.reconPack.attachments){const G=Qi(this.reconPack,this.buffers);return this.finishedReconstruction(),G}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Cn(Ye,O,G){return Ye.on(O,G),function(){Ye.off(O,G)}}const qr=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class yr extends j{constructor(O,G,ce){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=O,this.nsp=G,ce&&ce.auth&&(this.auth=ce.auth),this._opts=Object.assign({},ce),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const O=this.io;this.subs=[Cn(O,"open",this.onopen.bind(this)),Cn(O,"packet",this.onpacket.bind(this)),Cn(O,"error",this.onerror.bind(this)),Cn(O,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...O){return O.unshift("message"),this.emit.apply(this,O),this}emit(O,...G){var ce,qe,ht;if(qr.hasOwnProperty(O))throw new Error('"'+O.toString()+'" is a reserved event name');if(G.unshift(O),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(G),this;const tn={type:Pn.EVENT,data:G,options:{}};if(tn.options.compress=!1!==this.flags.compress,"function"==typeof G[G.length-1]){const qn=this.ids++,Or=G.pop();this._registerAckCallback(qn,Or),tn.id=qn}const hn=null===(qe=null===(ce=this.io.engine)||void 0===ce?void 0:ce.transport)||void 0===qe?void 0:qe.writable,zn=this.connected&&!(null!==(ht=this.io.engine)&&void 0!==ht&&ht._hasPingExpired());return this.flags.volatile&&!hn||(zn?(this.notifyOutgoingListeners(tn),this.packet(tn)):this.sendBuffer.push(tn)),this.flags={},this}_registerAckCallback(O,G){var ce;const qe=null!==(ce=this.flags.timeout)&&void 0!==ce?ce:this._opts.ackTimeout;if(void 0===qe)return void(this.acks[O]=G);const ht=this.io.setTimeoutFn(()=>{delete this.acks[O];for(let hn=0;hn<this.sendBuffer.length;hn++)this.sendBuffer[hn].id===O&&this.sendBuffer.splice(hn,1);G.call(this,new Error("operation has timed out"))},qe),tn=(...hn)=>{this.io.clearTimeoutFn(ht),G.apply(this,hn)};tn.withError=!0,this.acks[O]=tn}emitWithAck(O,...G){return new Promise((ce,qe)=>{const ht=(tn,hn)=>tn?qe(tn):ce(hn);ht.withError=!0,G.push(ht),this.emit(O,...G)})}_addToQueue(O){let G;"function"==typeof O[O.length-1]&&(G=O.pop());const ce={id:this._queueSeq++,tryCount:0,pending:!1,args:O,flags:Object.assign({fromQueue:!0},this.flags)};O.push((qe,...ht)=>ce!==this._queue[0]?void 0:(null!==qe?ce.tryCount>this._opts.retries&&(this._queue.shift(),G&&G(qe)):(this._queue.shift(),G&&G(null,...ht)),ce.pending=!1,this._drainQueue())),this._queue.push(ce),this._drainQueue()}_drainQueue(O=!1){if(!this.connected||0===this._queue.length)return;const G=this._queue[0];G.pending&&!O||(G.pending=!0,G.tryCount++,this.flags=G.flags,this.emit.apply(this,G.args))}packet(O){O.nsp=this.nsp,this.io._packet(O)}onopen(){"function"==typeof this.auth?this.auth(O=>{this._sendConnectPacket(O)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(O){this.packet({type:Pn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},O):O})}onerror(O){this.connected||this.emitReserved("connect_error",O)}onclose(O,G){this.connected=!1,delete this.id,this.emitReserved("disconnect",O,G),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(O=>{if(!this.sendBuffer.some(ce=>String(ce.id)===O)){const ce=this.acks[O];delete this.acks[O],ce.withError&&ce.call(this,new Error("socket has been disconnected"))}})}onpacket(O){if(O.nsp===this.nsp)switch(O.type){case Pn.CONNECT:O.data&&O.data.sid?this.onconnect(O.data.sid,O.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Pn.EVENT:case Pn.BINARY_EVENT:this.onevent(O);break;case Pn.ACK:case Pn.BINARY_ACK:this.onack(O);break;case Pn.DISCONNECT:this.ondisconnect();break;case Pn.CONNECT_ERROR:this.destroy();const ce=new Error(O.data.message);ce.data=O.data.data,this.emitReserved("connect_error",ce)}}onevent(O){const G=O.data||[];null!=O.id&&G.push(this.ack(O.id)),this.connected?this.emitEvent(G):this.receiveBuffer.push(Object.freeze(G))}emitEvent(O){if(this._anyListeners&&this._anyListeners.length){const G=this._anyListeners.slice();for(const ce of G)ce.apply(this,O)}super.emit.apply(this,O),this._pid&&O.length&&"string"==typeof O[O.length-1]&&(this._lastOffset=O[O.length-1])}ack(O){const G=this;let ce=!1;return function(...qe){ce||(ce=!0,G.packet({type:Pn.ACK,id:O,data:qe}))}}onack(O){const G=this.acks[O.id];"function"==typeof G&&(delete this.acks[O.id],G.withError&&O.data.unshift(null),G.apply(this,O.data))}onconnect(O,G){this.id=O,this.recovered=G&&this._pid===G,this._pid=G,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(O=>this.emitEvent(O)),this.receiveBuffer=[],this.sendBuffer.forEach(O=>{this.notifyOutgoingListeners(O),this.packet(O)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(O=>O()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Pn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(O){return this.flags.compress=O,this}get volatile(){return this.flags.volatile=!0,this}timeout(O){return this.flags.timeout=O,this}onAny(O){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(O),this}prependAny(O){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(O),this}offAny(O){if(!this._anyListeners)return this;if(O){const G=this._anyListeners;for(let ce=0;ce<G.length;ce++)if(O===G[ce])return G.splice(ce,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(O){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(O),this}prependAnyOutgoing(O){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(O),this}offAnyOutgoing(O){if(!this._anyOutgoingListeners)return this;if(O){const G=this._anyOutgoingListeners;for(let ce=0;ce<G.length;ce++)if(O===G[ce])return G.splice(ce,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(O){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const G=this._anyOutgoingListeners.slice();for(const ce of G)ce.apply(this,O.data)}}}function us(Ye){this.ms=(Ye=Ye||{}).min||100,this.max=Ye.max||1e4,this.factor=Ye.factor||2,this.jitter=Ye.jitter>0&&Ye.jitter<=1?Ye.jitter:0,this.attempts=0}us.prototype.duration=function(){var Ye=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var O=Math.random(),G=Math.floor(O*this.jitter*Ye);Ye=1&Math.floor(10*O)?Ye+G:Ye-G}return 0|Math.min(Ye,this.max)},us.prototype.reset=function(){this.attempts=0},us.prototype.setMin=function(Ye){this.ms=Ye},us.prototype.setMax=function(Ye){this.max=Ye},us.prototype.setJitter=function(Ye){this.jitter=Ye};class ao extends j{constructor(O,G){var ce;super(),this.nsps={},this.subs=[],O&&"object"==typeof O&&(G=O,O=void 0),(G=G||{}).path=G.path||"/socket.io",this.opts=G,ot(this,G),this.reconnection(!1!==G.reconnection),this.reconnectionAttempts(G.reconnectionAttempts||1/0),this.reconnectionDelay(G.reconnectionDelay||1e3),this.reconnectionDelayMax(G.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(ce=G.randomizationFactor)&&void 0!==ce?ce:.5),this.backoff=new us({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==G.timeout?2e4:G.timeout),this._readyState="closed",this.uri=O;const qe=G.parser||l;this.encoder=new qe.Encoder,this.decoder=new qe.Decoder,this._autoConnect=!1!==G.autoConnect,this._autoConnect&&this.open()}reconnection(O){return arguments.length?(this._reconnection=!!O,O||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(O){return void 0===O?this._reconnectionAttempts:(this._reconnectionAttempts=O,this)}reconnectionDelay(O){var G;return void 0===O?this._reconnectionDelay:(this._reconnectionDelay=O,null===(G=this.backoff)||void 0===G||G.setMin(O),this)}randomizationFactor(O){var G;return void 0===O?this._randomizationFactor:(this._randomizationFactor=O,null===(G=this.backoff)||void 0===G||G.setJitter(O),this)}reconnectionDelayMax(O){var G;return void 0===O?this._reconnectionDelayMax:(this._reconnectionDelayMax=O,null===(G=this.backoff)||void 0===G||G.setMax(O),this)}timeout(O){return arguments.length?(this._timeout=O,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(O){if(~this._readyState.indexOf("open"))return this;this.engine=new Cr(this.uri,this.opts);const G=this.engine,ce=this;this._readyState="opening",this.skipReconnect=!1;const qe=Cn(G,"open",function(){ce.onopen(),O&&O()}),ht=hn=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",hn),O?O(hn):this.maybeReconnectOnOpen()},tn=Cn(G,"error",ht);if(!1!==this._timeout){const zn=this.setTimeoutFn(()=>{qe(),ht(new Error("timeout")),G.close()},this._timeout);this.opts.autoUnref&&zn.unref(),this.subs.push(()=>{this.clearTimeoutFn(zn)})}return this.subs.push(qe),this.subs.push(tn),this}connect(O){return this.open(O)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const O=this.engine;this.subs.push(Cn(O,"ping",this.onping.bind(this)),Cn(O,"data",this.ondata.bind(this)),Cn(O,"error",this.onerror.bind(this)),Cn(O,"close",this.onclose.bind(this)),Cn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(O){try{this.decoder.add(O)}catch(G){this.onclose("parse error",G)}}ondecoded(O){_e(()=>{this.emitReserved("packet",O)},this.setTimeoutFn)}onerror(O){this.emitReserved("error",O)}socket(O,G){let ce=this.nsps[O];return ce?this._autoConnect&&!ce.active&&ce.connect():(ce=new yr(this,O,G),this.nsps[O]=ce),ce}_destroy(O){const G=Object.keys(this.nsps);for(const ce of G)if(this.nsps[ce].active)return;this._close()}_packet(O){const G=this.encoder.encode(O);for(let ce=0;ce<G.length;ce++)this.engine.write(G[ce],O.options)}cleanup(){this.subs.forEach(O=>O()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(O,G){var ce;this.cleanup(),null===(ce=this.engine)||void 0===ce||ce.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",O,G),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const O=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const G=this.backoff.duration();this._reconnecting=!0;const ce=this.setTimeoutFn(()=>{O.skipReconnect||(this.emitReserved("reconnect_attempt",O.backoff.attempts),!O.skipReconnect&&O.open(qe=>{qe?(O._reconnecting=!1,O.reconnect(),this.emitReserved("reconnect_error",qe)):O.onreconnect()}))},G);this.opts.autoUnref&&ce.unref(),this.subs.push(()=>{this.clearTimeoutFn(ce)})}}onreconnect(){const O=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",O)}}const ms={};function sr(Ye,O){"object"==typeof Ye&&(O=Ye,Ye=void 0);const G=function or(Ye,O="",G){let ce=Ye;G=G||typeof location<"u"&&location,null==Ye&&(Ye=G.protocol+"//"+G.host),"string"==typeof Ye&&("/"===Ye.charAt(0)&&(Ye="/"===Ye.charAt(1)?G.protocol+Ye:G.host+Ye),/^(https?|wss?):\/\//.test(Ye)||(Ye=typeof G<"u"?G.protocol+"//"+Ye:"https://"+Ye),ce=Ki(Ye)),ce.port||(/^(http|ws)$/.test(ce.protocol)?ce.port="80":/^(http|ws)s$/.test(ce.protocol)&&(ce.port="443")),ce.path=ce.path||"/";const ht=-1!==ce.host.indexOf(":")?"["+ce.host+"]":ce.host;return ce.id=ce.protocol+"://"+ht+":"+ce.port+O,ce.href=ce.protocol+"://"+ht+(G&&G.port===ce.port?"":":"+ce.port),ce}(Ye,(O=O||{}).path||"/socket.io"),ce=G.source,qe=G.id;let zn;return O.forceNew||O["force new connection"]||!1===O.multiplex||ms[qe]&&G.path in ms[qe].nsps?zn=new ao(ce,O):(ms[qe]||(ms[qe]=new ao(ce,O)),zn=ms[qe]),G.query&&!O.query&&(O.query=G.queryKey),zn.socket(G.path,O)}Object.assign(sr,{Manager:ao,Socket:yr,io:sr,connect:sr});var Ms=M(4412),to=M(1774),Os=M(5312),Fs=M(4438),lo=M(33);let Go=(()=>{class Ye{constructor(G){this.router=G,this.socket=null,this.connectionStatus=new Ms.t(null),this.reconnectAttempts=0,this.MAX_RETRIES=3,this.RECONNECT_DELAY=2e3,this.connectionStatus.subscribe(ce=>{console.log("Connection status changed:",ce)})}connect(){if(this.socket?.connected)return;const G=localStorage.getItem("jwt");G?(this.socket=sr(Os.c.wsUrl,{auth:{token:G},transports:["websocket"],reconnection:!1}),this.setupSocketListeners()):this.connectionStatus.next(!1)}setupSocketListeners(){this.socket&&(this.socket.on("connect",()=>{this.connectionStatus.next(!0),this.reconnectAttempts=0,clearTimeout(this.reconnectTimer)}),this.socket.on("disconnect",G=>{this.connectionStatus.next(!1),"io server disconnect"===G||"io client disconnect"===G?this.handleForcedDisconnect():this.tryReconnect()}),this.socket.on("invalidSession",()=>{this.handleInvalidSession()}),this.socket.on("connect_error",()=>{this.connectionStatus.next(!1),this.tryReconnect()}))}tryReconnect(){this.reconnectAttempts<this.MAX_RETRIES?(this.reconnectAttempts++,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>this.connect(),this.RECONNECT_DELAY)):this.connectionStatus.next(!1)}handleForcedDisconnect(){this.disconnect(),this.connectionStatus.next(!1)}handleInvalidSession(){this.disconnect(),localStorage.removeItem("jwt"),this.router.navigate([to.S.HOME])}disconnect(){clearTimeout(this.reconnectTimer),this.socket&&(this.socket.disconnect(),this.socket=null),this.connectionStatus.next(!1)}isConnected(){return this.connectionStatus.asObservable()}ngOnDestroy(){this.disconnect()}static{this.\u0275fac=function(ce){return new(ce||Ye)(Fs.KVO(lo.Ix))}}static{this.\u0275prov=Fs.jDH({token:Ye,factory:Ye.\u0275fac,providedIn:"root"})}}return Ye})()},65:(Rt,Je,M)=>{"use strict";M.d(Je,{L:()=>ie});var l=M(1471),h=M(518),X=M(4438);let ie=(()=>{class de{constructor(){this.ec=new h.ec("secp256k1"),this.clientKeyPair=this.ec.genKeyPair(),this.storageKey=this.getOrCreateStorageKey()}getOrCreateStorageKey(){let z=sessionStorage.getItem("encryption_storage_key");return z||(z=l.lib.WordArray.random(32).toString(),sessionStorage.setItem("encryption_storage_key",z)),z}getClientPublicKey(){return this.clientKeyPair.getPublic("hex")}packFnord(z,L,I,K){return`${z}:${L}:${I}:${K}`}unpackFnord(z){const[L,I,K,te]=z.split(":");return{iv:L,ephemPublicKey:I,ciphertext:K,mac:te}}encrypt(z,L){const I=this.ec.keyFromPublic(L,"hex"),K=this.ec.genKeyPair(),te=K.derive(I.getPublic()),ee=l.SHA256(l.enc.Hex.parse(te.toString("hex"))),ue=l.lib.WordArray.random(16),Re=l.AES.encrypt(z,ee,{iv:ue,mode:l.mode.CBC,padding:l.pad.Pkcs7}).ciphertext.toString(l.enc.Hex),ye=K.getPublic("hex"),Te=ue.toString(l.enc.Hex)+ye+Re,We=l.HmacSHA256(Te,ee).toString(l.enc.Hex);return{fnord:this.packFnord(ue.toString(l.enc.Hex),ye,Re,We)}}encryptForStorage(z){const L=JSON.stringify(z);return l.AES.encrypt(L,this.storageKey).toString()}decryptFromStorage(z){try{const L=l.AES.decrypt(z,this.storageKey);return JSON.parse(L.toString(l.enc.Utf8))}catch(L){throw console.error("Decryption error:",L),new Error("Failed to decrypt storage data")}}decrypt(z){const{iv:L,ephemPublicKey:I,ciphertext:K,mac:te}=this.unpackFnord(z.fnord),ee=this.ec.keyFromPublic(I,"hex"),ue=this.clientKeyPair.derive(ee.getPublic()),Ce=l.SHA256(l.enc.Hex.parse(ue.toString("hex")));if(l.HmacSHA256(L+I+K,Ce).toString(l.enc.Hex)!==te)throw new Error("Invalid MAC");const Te=l.enc.Hex.parse(L),We=l.enc.Hex.parse(K),He=l.AES.decrypt(l.lib.CipherParams.create({ciphertext:We}),Ce,{iv:Te,mode:l.mode.CBC,padding:l.pad.Pkcs7});return JSON.parse(He.toString(l.enc.Utf8))}static{this.\u0275fac=function(L){return new(L||de)}}static{this.\u0275prov=X.jDH({token:de,factory:de.\u0275fac,providedIn:"root"})}}return de})()},7120:(Rt,Je,M)=>{"use strict";M.d(Je,{l:()=>H});var l=M(4438);let H=(()=>{class h{constructor(){this.conversations=(0,l.vPA)([]),this.chatBotRoles=(0,l.vPA)([]),this.needsFetch=(0,l.vPA)("true"===sessionStorage.getItem("newData")),this.conversationCount=(0,l.EWP)(()=>this.conversations().length)}setNeedsFetch(X){sessionStorage.setItem("newData",X.toString()),this.needsFetch.set(X)}getNeedsFetch(){return this.needsFetch}updateConversations(X){this.conversations.set(X)}addConversation(X){this.conversations.update(ie=>[X,...ie])}updateChatBotRoles(X){this.chatBotRoles.set(X)}getConversations(){return this.conversations}getChatBotRoles(){return this.chatBotRoles}static{this.\u0275fac=function(ie){return new(ie||h)}}static{this.\u0275prov=l.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},5823:(Rt,Je,M)=>{"use strict";M.d(Je,{Yf:()=>ot,uR:()=>l.u,vc:()=>z,Cs:()=>h.C,rP:()=>C,LC:()=>H.L,ni:()=>Ne,vh:()=>Q,o2:()=>Oe,ov:()=>Ut,WG:()=>te,gZ:()=>j,aT:()=>ue,Fs:()=>ee,DL:()=>Re});var l=M(1339),H=M(65),h=M(7036),fe=M(5312),X=M(1946),ie=M(4438),de=M(1626);let Q=(()=>{class ze{constructor(st){this.http=st,this.baseUrl=fe.c.apiUrl}createChatbotRole(st){return this.http.post(this.baseUrl+X.F.CHATBOT_ROLES,st)}getChatBotRoles(){return this.http.post(this.baseUrl+X.F.ALL,{})}chat(st){return this.http.post(this.baseUrl+X.F.CHAT,st)}getConversations(){return this.http.post(this.baseUrl+X.F.CONVERSATIONS,{})}getConversation(st){return this.http.post(this.baseUrl+X.F.CONVERSATIONS+"/"+st,{})}deleteConversation(st){return this.http.delete(this.baseUrl+X.F.CONVERSATIONS+"/"+st)}static{this.\u0275fac=function(je){return new(je||ze)(ie.KVO(de.Qq))}}static{this.\u0275prov=ie.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})(),z=(()=>{class ze{constructor(){this.http=(0,ie.WQX)(de.Qq)}createChatbotRole(st){return this.http.post(fe.c.apiUrl+X.F.CHATBOT_ROLES,st)}static{this.\u0275fac=function(je){return new(je||ze)}}static{this.\u0275prov=ie.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})();var L=M(8810),I=M(9437);let K=(()=>{class ze{getToken(){return localStorage.getItem("jwt")}static{this.\u0275fac=function(je){return new(je||ze)}}static{this.\u0275prov=ie.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})(),te=(()=>{class ze{constructor(st,je){this.http=st,this.jwtService=je}createCheckoutSession(st){const je=this.jwtService.getToken();if(!je)return(0,L.$)(()=>new Error("No authentication token found"));const yt=new de.Lr({Authorization:`Bearer ${je}`});return this.http.post(fe.c.apiUrl+X.F.CREATE_CHECKOUT,{planType:"month"===st?"MONTHLY":"ANNUAL"},{headers:yt}).pipe((0,I.W)(Yt=>(console.error("Error creating checkout session:",Yt),(0,L.$)(()=>new Error("An error occurred while processing your request. Please try again.")))))}static{this.\u0275fac=function(je){return new(je||ze)(ie.KVO(de.Qq),ie.KVO(K))}}static{this.\u0275prov=ie.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})(),ee=(()=>{class ze{constructor(){this.THEME_KEY="preferred-theme",this.isDarkTheme=(0,ie.vPA)(this.getInitialTheme()),(0,ie.QZP)(()=>{this.updateDocumentTheme(this.isDarkTheme())})}getInitialTheme(){const st=localStorage.getItem(this.THEME_KEY);return st?"dark"===st:window.matchMedia("(prefers-color-scheme: dark)").matches}updateDocumentTheme(st){document.body.classList.toggle("dark-theme",st),document.documentElement.style.colorScheme=st?"dark":"light",document.documentElement.setAttribute("data-bs-theme",st?"dark":"light");const je=document.documentElement;st?(je.style.setProperty("--bs-body-color","var(--dark-text)"),je.style.setProperty("--bs-body-bg","var(--dark-background)"),je.style.setProperty("--bs-secondary-color","var(--dark-text-secondary)")):(je.style.setProperty("--bs-body-color","var(--light-text)"),je.style.setProperty("--bs-body-bg","var(--light-background)"),je.style.setProperty("--bs-secondary-color","var(--light-text-secondary)"))}toggleTheme(){this.isDarkTheme.update(st=>{const je=!st;return localStorage.setItem(this.THEME_KEY,je?"dark":"light"),je})}initializeTheme(){this.updateDocumentTheme(this.isDarkTheme())}static{this.\u0275fac=function(je){return new(je||ze)}}static{this.\u0275prov=ie.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})(),ue=(()=>{class ze{constructor(){this.http=(0,ie.WQX)(de.Qq),this.jwtService=(0,ie.WQX)(K),this.baseUrl=fe.c.apiUrl}getSubscriptionStatus(){return this.http.get(`${this.baseUrl}${X.F.SUBSCRIPTION_STATUS}`).pipe((0,I.W)(this.handleError))}getUserInvoices(){return this.http.get(`${this.baseUrl}${X.F.GET_INVOICES}`).pipe((0,I.W)(this.handleError))}cancelSubscription(){return this.http.post(`${this.baseUrl}${X.F.CANCEL_SUBSCRIPTION}`,{}).pipe((0,I.W)(this.handleError))}handleError(st){return console.error("An error occurred:",st),(0,L.$)(()=>new Error(st.error?.message||"An unexpected error occurred"))}static{this.\u0275fac=function(je){return new(je||ze)}}static{this.\u0275prov=ie.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})();var Ce=M(6354);let Re=(()=>{class ze{constructor(st){this.http=st}createUrl(st,je={}){let yt=fe.c.apiUrl+st;return Object.entries(je).forEach(([Yt,dn])=>{yt=yt.replace(`:${Yt}`,dn.toString())}),yt}getFullName(st){const je=this.createUrl(X.F.USER_NAME,{id:st});return this.http.get(je).pipe((0,Ce.T)(yt=>yt.fullName),(0,I.W)(this.handleError))}getUserInfo(st){const je=this.createUrl(X.F.USER_NAME,{id:st});return this.http.get(je)}handleError(st){let je="An error occurred";if(st.error instanceof ErrorEvent)je=`Error: ${st.error.message}`;else switch(st.status){case 404:je="User not found";break;case 401:je="Unauthorized access";break;default:je=`Error Code: ${st.status}\nMessage: ${st.message}`}return console.error(je),(0,L.$)(()=>new Error(je))}updateBirthDate(st){return this.http.patch(fe.c.apiUrl+X.F.UPDATE_BIRTHDATE,{birthdate:st})}static{this.\u0275fac=function(je){return new(je||ze)(ie.KVO(de.Qq))}}static{this.\u0275prov=ie.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})();const Te={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let We;const He=new Uint8Array(16);function ke(){if(!We&&(We=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!We))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return We(He)}const Ke=[];for(let ze=0;ze<256;++ze)Ke.push((ze+256).toString(16).slice(1));const x=function le(ze,Mt,st){if(Te.randomUUID&&!Mt&&!ze)return Te.randomUUID();const je=(ze=ze||{}).random||(ze.rng||ke)();if(je[6]=15&je[6]|64,je[8]=63&je[8]|128,Mt){st=st||0;for(let yt=0;yt<16;++yt)Mt[st+yt]=je[yt];return Mt}return function St(ze,Mt=0){return Ke[ze[Mt+0]]+Ke[ze[Mt+1]]+Ke[ze[Mt+2]]+Ke[ze[Mt+3]]+"-"+Ke[ze[Mt+4]]+Ke[ze[Mt+5]]+"-"+Ke[ze[Mt+6]]+Ke[ze[Mt+7]]+"-"+Ke[ze[Mt+8]]+Ke[ze[Mt+9]]+"-"+Ke[ze[Mt+10]]+Ke[ze[Mt+11]]+Ke[ze[Mt+12]]+Ke[ze[Mt+13]]+Ke[ze[Mt+14]]+Ke[ze[Mt+15]]}(je)};let C=(()=>{class ze{generateConversationId(){return x()}static{this.\u0275fac=function(je){return new(je||ze)}}static{this.\u0275prov=ie.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})(),j=(()=>{class ze{constructor(){this.showBadge=(0,ie.vPA)(!0)}hideBadge(){this.showBadge.set(!1);const st=document.querySelector(".grecaptcha-badge");st&&st.remove()}showBadgeAgain(){this.showBadge.set(!0)}static{this.\u0275fac=function(je){return new(je||ze)}}static{this.\u0275prov=ie.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})();var J=M(467),_e=M(6648),Ee=M(33),Ve=M(5794);let Ne=(()=>{class ze{constructor(st,je,yt,Yt,dn,fn){this.router=st,this.http=je,this.toastr=yt,this.authService=Yt,this.recaptchaManager=dn,this.clientSocketAuthService=fn,this.isScriptLoaded=(0,ie.vPA)(!1),this.loading=(0,ie.vPA)(!1)}ensureInitialized(){return new Promise(st=>{if(window.google)return void st();const je=setInterval(()=>{window.google&&(clearInterval(je),st())},100)})}loadGoogleScript(){if(!this.isScriptLoaded()){const st=document.createElement("script");st.src="https://accounts.google.com/gsi/client",st.async=!0,st.defer=!0,st.onload=()=>{this.isScriptLoaded.set(!0),this.initializeGoogleAuth()},st.onerror=()=>{console.error("Failed to load Google Sign-In script"),this.isScriptLoaded.set(!1)},document.head.appendChild(st)}return(0,_e.H)([this.isScriptLoaded()])}renderGoogleButton(st,je=!0){const yt=setInterval(()=>{const Yt=document.getElementById(st);if(Yt&&window.google?.accounts){clearInterval(yt);try{window.google.accounts.id.renderButton(Yt,{theme:"outline",size:"large",width:240,locale:"en",disabled:!je})}catch(dn){console.error("Error rendering Google button:",dn)}}},100);setTimeout(()=>clearInterval(yt),1e4)}initializeGoogleAuth(){try{window.google.accounts.id.initialize({client_id:fe.c.googleClientId,callback:this.handleCredentialResponse.bind(this),auto_select:!1,cancel_on_tap_outside:!0})}catch(st){console.error("Error initializing Google Auth:",st)}}handleCredentialResponse(st){var je=this;return(0,J.A)(function*(){if(!st.credential)return;const yt=je.decodeJwtToken(st.credential);if(!yt)return;const Yt={email:yt.email,firstName:yt.given_name,lastName:yt.family_name,photoUrl:yt.picture,provider:"GOOGLE",idToken:st.credential};yield je.authenticateWithBackend(Yt)})()}authenticateWithBackend(st){this.loading.set(!0),this.http.post(fe.c.apiUrl+X.F.GOOGLE_AUTH,{googleUser:st}).subscribe({next:je=>{je?.accessToken?(localStorage.setItem("jwt",je.accessToken),this.authService.updateAuthState(),this.clientSocketAuthService.connect(),this.recaptchaManager.hideBadge(),this.router.navigate([X.S.DASH]).then(()=>this.toastr.success("Successfully logged in with Google")).catch(yt=>{console.error("Navigation error:",yt),this.toastr.error("Failed to navigate to dashboard")})):this.toastr.error("Invalid server response")},error:je=>{console.error("Google authentication error:",je),this.toastr.error(je.error?.message||"Failed to authenticate with Google"),localStorage.removeItem("jwt"),this.authService.updateAuthState()},complete:()=>{this.loading.set(!1)}})}decodeJwtToken(st){try{const yt=st.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),Yt=decodeURIComponent(atob(yt).split("").map(dn=>"%"+("00"+dn.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(Yt)}catch(je){return console.error("Error decoding token:",je),null}}handleCustomGoogleLogin(){var st=this;return(0,J.A)(function*(){try{yield st.ensureInitialized(),window.google?.accounts.id.prompt(je=>{je.isNotDisplayed()?console.error("Google sign-in prompt not displayed:",je.getNotDisplayedReason()):je.isSkippedMoment()&&console.log("Google sign-in prompt skipped:",je.getSkippedReason())})}catch(je){console.error("Google authentication initialization failed:",je)}})()}isLoading(){return this.loading()}static{this.\u0275fac=function(je){return new(je||ze)(ie.KVO(Ee.Ix),ie.KVO(de.Qq),ie.KVO(Ve.tw),ie.KVO(l.u),ie.KVO(j),ie.KVO(h.C))}}static{this.\u0275prov=ie.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})();var V=M(4843);let Oe=(()=>{class ze{constructor(st){this.http=st,this.keyPromise=null,this.currentKey=null}ensureKey(){var st=this;return(0,J.A)(function*(){return st.currentKey?st.currentKey:(st.keyPromise||(st.keyPromise=(0,V._)(st.http.get(fe.c.apiUrl+X.F.PUBLIC_KEY)).then(je=>(st.currentKey=je.publicKey,je.publicKey)).finally(()=>{st.keyPromise=null})),st.keyPromise)})()}clearKey(){this.currentKey=null,this.keyPromise=null}static{this.\u0275fac=function(je){return new(je||ze)(ie.KVO(de.Qq))}}static{this.\u0275prov=ie.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})();var Ot=M(4909);let ot=(()=>{class ze{constructor(st){this.translate=st,this.LANGUAGE_KEY="preferred-language",this.currentLanguage=(0,ie.vPA)(this.getStoredLanguage()),this.initializeLanguage()}initializeLanguage(){const st=this.getStoredLanguage();this.translate.setDefaultLang("en"),this.translate.use(st)}getStoredLanguage(){return localStorage.getItem(this.LANGUAGE_KEY)||this.getBrowserLanguage()}getBrowserLanguage(){const st=navigator.language.split("-")[0];return["en","es"].includes(st)?st:"en"}updateLanguage(st){localStorage.setItem(this.LANGUAGE_KEY,st),this.currentLanguage.set(st),this.translate.use(st)}static{this.\u0275fac=function(je){return new(je||ze)(ie.KVO(Ot.c$))}}static{this.\u0275prov=ie.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})(),Ut=(()=>{class ze{constructor(st){this.translate=st}initializeLanguage(){const st=localStorage.getItem("preferred-language"),je=navigator.language.split("-")[0],yt=st||(["en","es"].includes(je)?je:"en");this.translate.setDefaultLang("en"),this.translate.use(yt),st||localStorage.setItem("preferred-language",yt)}static{this.\u0275fac=function(je){return new(je||ze)(ie.KVO(Ot.c$))}}static{this.\u0275prov=ie.jDH({token:ze,factory:ze.\u0275fac,providedIn:"root"})}}return ze})()},9373:(Rt,Je,M)=>{"use strict";M.d(Je,{S:()=>l});var l=function(H){return H.HOME="home",H.CONFIRM="confirm-email",H.DASH="dashboard",H.CREATE="create",H.CONVERSATIONS="conversations",H.ABOUT="about",H.CHAT="chat",H.UPGRADE="upgrade",H.UPLOAD="upload",H.ERROR="error",H.KWH="x",H.VR_GALLERY="vrGallery",H.ARTE="arte",H.GALLERY="glry",H.VR="vr",H}(l||{})},1946:(Rt,Je,M)=>{"use strict";M.d(Je,{F:()=>H,S:()=>l.S});var l=M(9373),H=function(h){return h.LOGIN="/auth/login",h.REGISTER="/auth/register",h.CONFIRM="/auth/confirm",h.FORGOT_PASSWORD="/auth/forgot-password",h.RESET_PASSWORD="/auth/reset-password",h.GOOGLE_AUTH="/auth/google",h.UPDATE_BIRTHDATE="/auth/update-birthdate",h.USER_NAME="/users/:id/full-name",h.ACCOUNT_CONFIG="/users/language",h.UPLOAD_DOCUMENT="/documents/upload",h.GET_DOCUMENTS="/documents",h.CHATBOT_ROLES="/chatbot-roles",h.ALL="/chatbot-roles/all",h.CHAT="/llm-groq/chat",h.CONVERSATIONS="/llm-groq/conversations",h.CREATE_CHECKOUT="/stripe/create-checkout-session",h.SUBSCRIPTION_STATUS="/stripe/subscription-status",h.CANCEL_SUBSCRIPTION="/stripe/cancel-subscription",h.STRIPE_WEBHOOKS="/stripe/webhook",h.GET_INVOICES="/stripe/invoices",h.PUBLIC_KEY="/public-key",h.GALLERIES="GALLERIES",h}(H||{})},1774:(Rt,Je,M)=>{"use strict";M.d(Je,{S:()=>l.S});var l=M(9373)},6101:(Rt,Je,M)=>{"use strict";function l(L){return I=>{if(!I.value)return null;const K="upper"===L?I.value.toUpperCase():I.value.toLowerCase();return I.value!==K&&I.setValue(K,{emitEvent:!1}),null}}function H(){return L=>{if(!L.value)return null;const I=L.value.toLowerCase();return L.value!==I&&L.setValue(I,{emitEvent:!1}),/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(I)?null:{email:!0}}}M.d(Je,{CN:()=>Q,X1:()=>l,R7:()=>H,R3:()=>z});var h=M(467),fe=M(4438),X=M(5823),ie=M(7120),de=M(4843);class Q{constructor(){this.groqChatService=(0,fe.WQX)(X.vh),this.chatStateService=(0,fe.WQX)(ie.l)}fetchChatData(){var I=this;return(0,h.A)(function*(){const[K,te]=yield Promise.all([(0,de._)(I.groqChatService.getChatBotRoles()),(0,de._)(I.groqChatService.getConversations())]),ee=I.transformRoles(K),ue=Array.isArray(te)?te:te.data;return I.chatStateService.updateChatBotRoles(ee),I.chatStateService.updateConversations(ue),I.chatStateService.setNeedsFetch(!1),{roles:ee,conversations:ue}})()}transformRoles(I){return(Array.isArray(I)?I:I.data)?.map(te=>({value:te.id,label:te.name,avatarUrl:te.avatarPic,fullRole:te}))||[]}}function z(L){const I=[...L];for(let K=I.length-1;K>0;K--){const te=Math.floor(Math.random()*(K+1));[I[K],I[te]]=[I[te],I[K]]}return I}},5312:(Rt,Je,M)=>{"use strict";M.d(Je,{c:()=>l});const l={apiUrl:"https://brains.zenia.cc",wsUrl:"https://brains.zenia.cc",jinaApiUrl:"https://api.jina.ai/v1/embeddings",jinaModel:"jina-embeddings-v3",googleClientId:"384183585746-omqh7fmidk92do1t3lbfjd1ka7hkhl17.apps.googleusercontent.com",appVersion:"v0.0.2",production:!0,recaptchaSiteKey:"6LcG7yYrAAAAALuRjSToUOkN2N3PRS2hl5prVVwu"}},8527:(Rt,Je,M)=>{"use strict";var l=M(345),H=M(4438),h=M(33),fe=M(5312),X=M(7865),ie=M(9373),de=M(8141),Q=M(5823);let z=(()=>{class Ie{constructor(F,oe){this.authService=F,this.router=oe}canActivate(F,oe){return this.authService.isAuthenticated().pipe((0,de.M)(De=>{De||this.router.navigate([ie.S.HOME],{queryParams:{returnUrl:oe.url}})}))}static{this.\u0275fac=function(oe){return new(oe||Ie)(H.KVO(Q.uR),H.KVO(h.Ix))}}static{this.\u0275prov=H.jDH({token:Ie,factory:Ie.\u0275fac,providedIn:"root"})}}return Ie})();var L=M(467);let I=(()=>{class Ie{constructor(F,oe){this.keyManager=F,this.router=oe}canActivate(){var F=this;return(0,L.A)(function*(){try{return yield F.keyManager.ensureKey(),!0}catch(oe){return console.error("Failed to ensure key:",oe),F.router.navigate([ie.S.ERROR],{queryParams:{message:"Failed to establish secure connection"}}),!1}})()}static{this.\u0275fac=function(oe){return new(oe||Ie)(H.KVO(Q.o2),H.KVO(h.Ix))}}static{this.\u0275prov=H.jDH({token:Ie,factory:Ie.\u0275fac,providedIn:"root"})}}return Ie})();const K=[{path:"",component:X.v,canActivate:[I],children:[{path:ie.S.HOME,loadComponent:()=>M.e(47).then(M.bind(M,5047)),data:{title:"Home"}},{path:ie.S.CONFIRM,loadComponent:()=>M.e(116).then(M.bind(M,8116)),data:{title:"Confirm Email"}},{path:"",redirectTo:ie.S.HOME,pathMatch:"full"}]},{path:"arte",canActivate:[I],children:[{path:":artistName",loadComponent:()=>M.e(116).then(M.bind(M,8116)),data:{title:"arte"}},{path:":artistName/"+ie.S.GALLERY,loadComponent:()=>M.e(116).then(M.bind(M,8116)),data:{title:"glry"}},{path:":artistName/"+ie.S.GALLERY+"/:seriesId",loadComponent:()=>M.e(116).then(M.bind(M,8116)),data:{title:"glry"}},{path:":artistName/"+ie.S.VR,loadComponent:()=>M.e(116).then(M.bind(M,8116)),data:{title:"vr"}},{path:":artistName/"+ie.S.VR+"/:idCondfig",loadComponent:()=>M.e(116).then(M.bind(M,8116)),data:{title:"vr"}},{path:"",redirectTo:ie.S.HOME,pathMatch:"full"}]},{path:"",component:X.O,canActivate:[z,I],children:[{path:ie.S.DASH,loadComponent:()=>M.e(273).then(M.bind(M,5273)),data:{title:"Dashboard"}},{path:ie.S.KWH,children:[{path:"new/profileConfig",loadComponent:()=>Promise.all([M.e(876),M.e(337)]).then(M.bind(M,8337)),data:{step:0,isNew:!0}},{path:"new/seriesConfig",loadComponent:()=>Promise.all([M.e(876),M.e(337)]).then(M.bind(M,8337)),data:{step:1,isNew:!0}},{path:"new/artworksConfig",loadComponent:()=>Promise.all([M.e(876),M.e(337)]).then(M.bind(M,8337)),data:{step:2,isNew:!0}},{path:"new/galleryConfig",loadComponent:()=>Promise.all([M.e(876),M.e(337)]).then(M.bind(M,8337)),data:{step:3,isNew:!0}},{path:"new/submit",loadComponent:()=>Promise.all([M.e(876),M.e(337)]).then(M.bind(M,8337)),data:{step:4,isNew:!0}},{path:":artistName/profileConfig",loadComponent:()=>Promise.all([M.e(876),M.e(337)]).then(M.bind(M,8337)),data:{step:0,isNew:!1}},{path:":artistName/seriesConfig",loadComponent:()=>Promise.all([M.e(876),M.e(337)]).then(M.bind(M,8337)),data:{step:1,isNew:!1}},{path:":artistName/artworksConfig",loadComponent:()=>Promise.all([M.e(876),M.e(337)]).then(M.bind(M,8337)),data:{step:2,isNew:!1}},{path:":artistName/galleryConfig",loadComponent:()=>Promise.all([M.e(876),M.e(337)]).then(M.bind(M,8337)),data:{step:3,isNew:!1}},{path:":artistName/submit",loadComponent:()=>Promise.all([M.e(876),M.e(337)]).then(M.bind(M,8337)),data:{step:4,isNew:!1}},{path:":artistName/vrGallery",loadComponent:()=>Promise.all([M.e(876),M.e(76),M.e(533)]).then(M.bind(M,9533)),data:{title:"VR Gallery Management"}},{path:":artistName/vrGallery/preview/:configId/:hash",loadComponent:()=>Promise.all([M.e(76),M.e(553)]).then(M.bind(M,4553)),data:{title:"VR Gallery Preview"}},{path:"",redirectTo:ie.S.DASH,pathMatch:"full"}]},{path:`${ie.S.CHAT}:roleId`,loadComponent:()=>M.e(78).then(M.bind(M,9078)),data:{title:"Chat"}},{path:`${ie.S.CHAT}:roleId:id`,loadComponent:()=>M.e(78).then(M.bind(M,9078)),data:{title:"Chat"}},{path:ie.S.CREATE,loadComponent:()=>M.e(464).then(M.bind(M,464)),data:{title:"Create Chatbot"}},{path:ie.S.UPGRADE,loadComponent:()=>M.e(579).then(M.bind(M,5579)),data:{title:"Create Chatbot"}},{path:ie.S.CONVERSATIONS,loadComponent:()=>M.e(338).then(M.bind(M,4338)),data:{title:"Create Chatbot"}},...fe.c.production?[]:[{path:ie.S.UPLOAD,loadComponent:()=>Promise.resolve().then(M.bind(M,2308)),data:{title:"Upload Documents"}}]]},{path:ie.S.ERROR,loadComponent:()=>M.e(939).then(M.bind(M,8939)),data:{title:"Error"}},{path:"**",redirectTo:"/"}];var te=M(1626),ee=M(9969);function Ce(Ie){return new H.wOt(3e3,!1)}function Dt(Ie){switch(Ie.length){case 0:return new ee.sf;case 1:return Ie[0];default:return new ee.ui(Ie)}}function Tt(Ie,D,F=new Map,oe=new Map){const De=[],nt=[];let vt=-1,Pt=null;if(D.forEach(Lt=>{const Jt=Lt.get("offset"),oi=Jt==vt,pi=oi&&Pt||new Map;Lt.forEach((bi,xr)=>{let Zn=xr,Ji=bi;if("offset"!==xr)switch(Zn=Ie.normalizePropertyName(Zn,De),Ji){case ee.FX:Ji=F.get(xr);break;case ee.kp:Ji=oe.get(xr);break;default:Ji=Ie.normalizeStyleValue(xr,Zn,Ji,De)}pi.set(Zn,Ji)}),oi||nt.push(pi),Pt=pi,vt=Jt}),De.length)throw function Ut(Ie){return new H.wOt(3502,!1)}();return nt}function un(Ie,D,F,oe){switch(D){case"start":Ie.onStart(()=>oe(F&&Ln(F,"start",Ie)));break;case"done":Ie.onDone(()=>oe(F&&Ln(F,"done",Ie)));break;case"destroy":Ie.onDestroy(()=>oe(F&&Ln(F,"destroy",Ie)))}}function Ln(Ie,D,F){const nt=Yn(Ie.element,Ie.triggerName,Ie.fromState,Ie.toState,D||Ie.phaseName,F.totalTime??Ie.totalTime,!!F.disabled),vt=Ie._data;return null!=vt&&(nt._data=vt),nt}function Yn(Ie,D,F,oe,De="",nt=0,vt){return{element:Ie,triggerName:D,fromState:F,toState:oe,phaseName:De,totalTime:nt,disabled:!!vt}}function Vn(Ie,D,F){let oe=Ie.get(D);return oe||Ie.set(D,oe=F),oe}function Yr(Ie){const D=Ie.indexOf(":");return[Ie.substring(1,D),Ie.slice(D+1)]}const Gn=typeof document>"u"?null:document.documentElement;function An(Ie){const D=Ie.parentNode||Ie.host||null;return D===Gn?null:D}let Si=null,$i=!1;function Ps(Ie,D){for(;D;){if(D===Ie)return!0;D=An(D)}return!1}function ri(Ie,D,F){if(F)return Array.from(Ie.querySelectorAll(D));const oe=Ie.querySelector(D);return oe?[oe]:[]}let _r=(()=>{class Ie{validateStyleProperty(F){return function Ri(Ie){Si||(Si=function Pi(){return typeof document<"u"?document.body:null}()||{},$i=!!Si.style&&"WebkitAppearance"in Si.style);let D=!0;return Si.style&&!function ii(Ie){return"ebkit"==Ie.substring(1,6)}(Ie)&&(D=Ie in Si.style,!D&&$i&&(D="Webkit"+Ie.charAt(0).toUpperCase()+Ie.slice(1)in Si.style)),D}(F)}matchesElement(F,oe){return!1}containsElement(F,oe){return Ps(F,oe)}getParentElement(F){return An(F)}query(F,oe,De){return ri(F,oe,De)}computeStyle(F,oe,De){return De||""}animate(F,oe,De,nt,vt,Pt=[],Lt){return new ee.sf(De,nt)}static{this.\u0275fac=function(oe){return new(oe||Ie)}}static{this.\u0275prov=H.jDH({token:Ie,factory:Ie.\u0275fac})}}return Ie})();class wi{static{this.NOOP=new _r}}class Cr{}const Lr=1e3,Pr="ng-enter",At="ng-leave",Ht="ng-trigger",rt=".ng-trigger",xt="ng-animating",on=".ng-animating";function mn(Ie){if("number"==typeof Ie)return Ie;const D=Ie.match(/^(-?[\.\d]+)(m?s)/);return!D||D.length<2?0:Un(parseFloat(D[1]),D[2])}function Un(Ie,D){return"s"===D?Ie*Lr:Ie}function Qi(Ie,D,F){return Ie.hasOwnProperty("duration")?Ie:function si(Ie,D,F){let De,nt=0,vt="";if("string"==typeof Ie){const Pt=Ie.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Pt)return D.push(Ce()),{duration:0,delay:0,easing:""};De=Un(parseFloat(Pt[1]),Pt[2]);const Lt=Pt[3];null!=Lt&&(nt=Un(parseFloat(Lt),Pt[4]));const Jt=Pt[5];Jt&&(vt=Jt)}else De=Ie;if(!F){let Pt=!1,Lt=D.length;De<0&&(D.push(function Re(){return new H.wOt(3100,!1)}()),Pt=!0),nt<0&&(D.push(function ye(){return new H.wOt(3101,!1)}()),Pt=!0),Pt&&D.splice(Lt,0,Ce())}return{duration:De,delay:nt,easing:vt}}(Ie,D,F)}function Pn(Ie,D,F){D.forEach((oe,De)=>{const nt=us(De);F&&!F.has(De)&&F.set(De,Ie.style[nt]),Ie.style[nt]=oe})}function Hi(Ie,D){D.forEach((F,oe)=>{const De=us(oe);Ie.style[De]=""})}function Ds(Ie){return Array.isArray(Ie)?1==Ie.length?Ie[0]:(0,ee.K2)(Ie):Ie}const yi=new RegExp("{{\\s*(.+?)\\s*}}","g");function Cn(Ie){let D=[];if("string"==typeof Ie){let F;for(;F=yi.exec(Ie);)D.push(F[1]);yi.lastIndex=0}return D}function qr(Ie,D,F){const oe=`${Ie}`,De=oe.replace(yi,(nt,vt)=>{let Pt=D[vt];return null==Pt&&(F.push(function We(Ie){return new H.wOt(3003,!1)}()),Pt=""),Pt.toString()});return De==oe?Ie:De}const yr=/-+([a-z0-9])/g;function us(Ie){return Ie.replace(yr,(...D)=>D[1].toUpperCase())}function Ms(Ie,D,F){switch(D.type){case ee.If.Trigger:return Ie.visitTrigger(D,F);case ee.If.State:return Ie.visitState(D,F);case ee.If.Transition:return Ie.visitTransition(D,F);case ee.If.Sequence:return Ie.visitSequence(D,F);case ee.If.Group:return Ie.visitGroup(D,F);case ee.If.Animate:return Ie.visitAnimate(D,F);case ee.If.Keyframes:return Ie.visitKeyframes(D,F);case ee.If.Style:return Ie.visitStyle(D,F);case ee.If.Reference:return Ie.visitReference(D,F);case ee.If.AnimateChild:return Ie.visitAnimateChild(D,F);case ee.If.AnimateRef:return Ie.visitAnimateRef(D,F);case ee.If.Query:return Ie.visitQuery(D,F);case ee.If.Stagger:return Ie.visitStagger(D,F);default:throw function He(Ie){return new H.wOt(3004,!1)}()}}function to(Ie,D){return window.getComputedStyle(Ie)[D]}const Os=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Fs extends Cr{normalizePropertyName(D,F){return us(D)}normalizeStyleValue(D,F,oe,De){let nt="";const vt=oe.toString().trim();if(Os.has(F)&&0!==oe&&"0"!==oe)if("number"==typeof oe)nt="px";else{const Pt=oe.match(/^[+-]?[\d\.]+([a-z]*)$/);Pt&&0==Pt[1].length&&De.push(function ke(Ie,D){return new H.wOt(3005,!1)}())}return vt+nt}}const qe="*";const zn=new Set(["true","1"]),Kn=new Set(["false","0"]);function qn(Ie,D){const F=zn.has(Ie)||Kn.has(Ie),oe=zn.has(D)||Kn.has(D);return(De,nt)=>{let vt=Ie==qe||Ie==De,Pt=D==qe||D==nt;return!vt&&F&&"boolean"==typeof De&&(vt=De?zn.has(Ie):Kn.has(Ie)),!Pt&&oe&&"boolean"==typeof nt&&(Pt=nt?zn.has(D):Kn.has(D)),vt&&Pt}}const Fr=new RegExp("s*:selfs*,?","g");function Br(Ie,D,F,oe){return new co(Ie).build(D,F,oe)}class co{constructor(D){this._driver=D}build(D,F,oe){const De=new Ls(F);return this._resetContextStyleTimingState(De),Ms(this,Ds(D),De)}_resetContextStyleTimingState(D){D.currentQuerySelector="",D.collectedStyles=new Map,D.collectedStyles.set("",new Map),D.currentTime=0}visitTrigger(D,F){let oe=F.queryCount=0,De=F.depCount=0;const nt=[],vt=[];return"@"==D.name.charAt(0)&&F.errors.push(function Ke(){return new H.wOt(3006,!1)}()),D.definitions.forEach(Pt=>{if(this._resetContextStyleTimingState(F),Pt.type==ee.If.State){const Lt=Pt,Jt=Lt.name;Jt.toString().split(/\s*,\s*/).forEach(oi=>{Lt.name=oi,nt.push(this.visitState(Lt,F))}),Lt.name=Jt}else if(Pt.type==ee.If.Transition){const Lt=this.visitTransition(Pt,F);oe+=Lt.queryCount,De+=Lt.depCount,vt.push(Lt)}else F.errors.push(function St(){return new H.wOt(3007,!1)}())}),{type:ee.If.Trigger,name:D.name,states:nt,transitions:vt,queryCount:oe,depCount:De,options:null}}visitState(D,F){const oe=this.visitStyle(D.styles,F),De=D.options&&D.options.params||null;if(oe.containsDynamicStyles){const nt=new Set,vt=De||{};oe.styles.forEach(Pt=>{Pt instanceof Map&&Pt.forEach(Lt=>{Cn(Lt).forEach(Jt=>{vt.hasOwnProperty(Jt)||nt.add(Jt)})})}),nt.size&&F.errors.push(function pt(Ie,D){return new H.wOt(3008,!1)}(0,nt.values()))}return{type:ee.If.State,name:D.name,style:oe,options:De?{params:De}:null}}visitTransition(D,F){F.queryCount=0,F.depCount=0;const oe=Ms(this,Ds(D.animation),F),De=function ht(Ie,D){const F=[];return"string"==typeof Ie?Ie.split(/\s*,\s*/).forEach(oe=>function tn(Ie,D,F){if(":"==Ie[0]){const Lt=function hn(Ie,D){switch(Ie){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(F,oe)=>parseFloat(oe)>parseFloat(F);case":decrement":return(F,oe)=>parseFloat(oe)<parseFloat(F);default:return D.push(function V(Ie){return new H.wOt(3016,!1)}()),"* => *"}}(Ie,F);if("function"==typeof Lt)return void D.push(Lt);Ie=Lt}const oe=Ie.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==oe||oe.length<4)return F.push(function Ne(Ie){return new H.wOt(3015,!1)}()),D;const De=oe[1],nt=oe[2],vt=oe[3];D.push(qn(De,vt)),"<"==nt[0]&&(De!=qe||vt!=qe)&&D.push(qn(vt,De))}(oe,F,D)):F.push(Ie),F}(D.expr,F.errors);return{type:ee.If.Transition,matchers:De,animation:oe,queryCount:F.queryCount,depCount:F.depCount,options:As(D.options)}}visitSequence(D,F){return{type:ee.If.Sequence,steps:D.steps.map(oe=>Ms(this,oe,F)),options:As(D.options)}}visitGroup(D,F){const oe=F.currentTime;let De=0;const nt=D.steps.map(vt=>{F.currentTime=oe;const Pt=Ms(this,vt,F);return De=Math.max(De,F.currentTime),Pt});return F.currentTime=De,{type:ee.If.Group,steps:nt,options:As(D.options)}}visitAnimate(D,F){const oe=function Qs(Ie,D){if(Ie.hasOwnProperty("duration"))return Ie;if("number"==typeof Ie)return Po(Qi(Ie,D).duration,0,"");const F=Ie;if(F.split(/\s+/).some(nt=>"{"==nt.charAt(0)&&"{"==nt.charAt(1))){const nt=Po(0,0,"");return nt.dynamic=!0,nt.strValue=F,nt}const De=Qi(F,D);return Po(De.duration,De.delay,De.easing)}(D.timings,F.errors);F.currentAnimateTimings=oe;let De,nt=D.styles?D.styles:(0,ee.iF)({});if(nt.type==ee.If.Keyframes)De=this.visitKeyframes(nt,F);else{let vt=D.styles,Pt=!1;if(!vt){Pt=!0;const Jt={};oe.easing&&(Jt.easing=oe.easing),vt=(0,ee.iF)(Jt)}F.currentTime+=oe.duration+oe.delay;const Lt=this.visitStyle(vt,F);Lt.isEmptyStep=Pt,De=Lt}return F.currentAnimateTimings=null,{type:ee.If.Animate,timings:oe,style:De,options:null}}visitStyle(D,F){const oe=this._makeStyleAst(D,F);return this._validateStyleAst(oe,F),oe}_makeStyleAst(D,F){const oe=[],De=Array.isArray(D.styles)?D.styles:[D.styles];for(let Pt of De)"string"==typeof Pt?Pt===ee.kp?oe.push(Pt):F.errors.push(new H.wOt(3002,!1)):oe.push(new Map(Object.entries(Pt)));let nt=!1,vt=null;return oe.forEach(Pt=>{if(Pt instanceof Map&&(Pt.has("easing")&&(vt=Pt.get("easing"),Pt.delete("easing")),!nt))for(let Lt of Pt.values())if(Lt.toString().indexOf("{{")>=0){nt=!0;break}}),{type:ee.If.Style,styles:oe,easing:vt,offset:D.offset,containsDynamicStyles:nt,options:null}}_validateStyleAst(D,F){const oe=F.currentAnimateTimings;let De=F.currentTime,nt=F.currentTime;oe&&nt>0&&(nt-=oe.duration+oe.delay),D.styles.forEach(vt=>{"string"!=typeof vt&&vt.forEach((Pt,Lt)=>{const Jt=F.collectedStyles.get(F.currentQuerySelector),oi=Jt.get(Lt);let pi=!0;oi&&(nt!=De&&nt>=oi.startTime&&De<=oi.endTime&&(F.errors.push(function x(Ie,D,F,oe,De){return new H.wOt(3010,!1)}()),pi=!1),nt=oi.startTime),pi&&Jt.set(Lt,{startTime:nt,endTime:De}),F.options&&function Ir(Ie,D,F){const oe=D.params||{},De=Cn(Ie);De.length&&De.forEach(nt=>{oe.hasOwnProperty(nt)||F.push(function Te(Ie){return new H.wOt(3001,!1)}())})}(Pt,F.options,F.errors)})})}visitKeyframes(D,F){const oe={type:ee.If.Keyframes,styles:[],options:null};if(!F.currentAnimateTimings)return F.errors.push(function C(){return new H.wOt(3011,!1)}()),oe;let nt=0;const vt=[];let Pt=!1,Lt=!1,Jt=0;const oi=D.steps.map(P=>{const we=this._makeStyleAst(P,F);let se=null!=we.offset?we.offset:function Ws(Ie){if("string"==typeof Ie)return null;let D=null;if(Array.isArray(Ie))Ie.forEach(F=>{if(F instanceof Map&&F.has("offset")){const oe=F;D=parseFloat(oe.get("offset")),oe.delete("offset")}});else if(Ie instanceof Map&&Ie.has("offset")){const F=Ie;D=parseFloat(F.get("offset")),F.delete("offset")}return D}(we.styles),be=0;return null!=se&&(nt++,be=we.offset=se),Lt=Lt||be<0||be>1,Pt=Pt||be<Jt,Jt=be,vt.push(be),we});Lt&&F.errors.push(function j(){return new H.wOt(3012,!1)}()),Pt&&F.errors.push(function J(){return new H.wOt(3200,!1)}());const pi=D.steps.length;let bi=0;nt>0&&nt<pi?F.errors.push(function _e(){return new H.wOt(3202,!1)}()):0==nt&&(bi=1/(pi-1));const xr=pi-1,Zn=F.currentTime,Ji=F.currentAnimateTimings,xi=Ji.duration;return oi.forEach((P,we)=>{const se=bi>0?we==xr?1:bi*we:vt[we],be=se*xi;F.currentTime=Zn+Ji.delay+be,Ji.duration=be,this._validateStyleAst(P,F),P.offset=se,oe.styles.push(P)}),oe}visitReference(D,F){return{type:ee.If.Reference,animation:Ms(this,Ds(D.animation),F),options:As(D.options)}}visitAnimateChild(D,F){return F.depCount++,{type:ee.If.AnimateChild,options:As(D.options)}}visitAnimateRef(D,F){return{type:ee.If.AnimateRef,animation:this.visitReference(D.animation,F),options:As(D.options)}}visitQuery(D,F){const oe=F.currentQuerySelector,De=D.options||{};F.queryCount++,F.currentQuery=D;const[nt,vt]=function Rr(Ie){const D=!!Ie.split(/\s*,\s*/).find(F=>":self"==F);return D&&(Ie=Ie.replace(Fr,"")),Ie=Ie.replace(/@\*/g,rt).replace(/@\w+/g,F=>rt+"-"+F.slice(1)).replace(/:animating/g,on),[Ie,D]}(D.selector);F.currentQuerySelector=oe.length?oe+" "+nt:nt,Vn(F.collectedStyles,F.currentQuerySelector,new Map);const Pt=Ms(this,Ds(D.animation),F);return F.currentQuery=null,F.currentQuerySelector=oe,{type:ee.If.Query,selector:nt,limit:De.limit||0,optional:!!De.optional,includeSelf:vt,animation:Pt,originalSelector:D.selector,options:As(D.options)}}visitStagger(D,F){F.currentQuery||F.errors.push(function Ee(){return new H.wOt(3013,!1)}());const oe="full"===D.timings?{duration:0,delay:0,easing:"full"}:Qi(D.timings,F.errors,!0);return{type:ee.If.Stagger,animation:Ms(this,Ds(D.animation),F),timings:oe,options:null}}}class Ls{constructor(D){this.errors=D,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function As(Ie){return Ie?(Ie={...Ie}).params&&(Ie.params=function Ur(Ie){return Ie?{...Ie}:null}(Ie.params)):Ie={},Ie}function Po(Ie,D,F){return{duration:Ie,delay:D,easing:F}}function Oo(Ie,D,F,oe,De,nt,vt=null,Pt=!1){return{type:1,element:Ie,keyframes:D,preStyleProps:F,postStyleProps:oe,duration:De,delay:nt,totalTime:De+nt,easing:vt,subTimeline:Pt}}class zi{constructor(){this._map=new Map}get(D){return this._map.get(D)||[]}append(D,F){let oe=this._map.get(D);oe||this._map.set(D,oe=[]),oe.push(...F)}has(D){return this._map.has(D)}clear(){this._map.clear()}}const ks=new RegExp(":enter","g"),ys=new RegExp(":leave","g");function Sl(Ie,D,F,oe,De,nt=new Map,vt=new Map,Pt,Lt,Jt=[]){return(new ca).buildKeyframes(Ie,D,F,oe,De,nt,vt,Pt,Lt,Jt)}class ca{buildKeyframes(D,F,oe,De,nt,vt,Pt,Lt,Jt,oi=[]){Jt=Jt||new zi;const pi=new ha(D,F,Jt,De,nt,oi,[]);pi.options=Lt;const bi=Lt.delay?mn(Lt.delay):0;pi.currentTimeline.delayNextStep(bi),pi.currentTimeline.setStyles([vt],null,pi.errors,Lt),Ms(this,oe,pi);const xr=pi.timelines.filter(Zn=>Zn.containsAnimation());if(xr.length&&Pt.size){let Zn;for(let Ji=xr.length-1;Ji>=0;Ji--){const xi=xr[Ji];if(xi.element===F){Zn=xi;break}}Zn&&!Zn.allowOnlyTimelineStyles()&&Zn.setStyles([Pt],null,pi.errors,Lt)}return xr.length?xr.map(Zn=>Zn.buildKeyframes()):[Oo(F,[],[],[],0,bi,"",!1)]}visitTrigger(D,F){}visitState(D,F){}visitTransition(D,F){}visitAnimateChild(D,F){const oe=F.subInstructions.get(F.element);if(oe){const De=F.createSubContext(D.options),nt=F.currentTimeline.currentTime,vt=this._visitSubInstructions(oe,De,De.options);nt!=vt&&F.transformIntoNewTimeline(vt)}F.previousNode=D}visitAnimateRef(D,F){const oe=F.createSubContext(D.options);oe.transformIntoNewTimeline(),this._applyAnimationRefDelays([D.options,D.animation.options],F,oe),this.visitReference(D.animation,oe),F.transformIntoNewTimeline(oe.currentTimeline.currentTime),F.previousNode=D}_applyAnimationRefDelays(D,F,oe){for(const De of D){const nt=De?.delay;if(nt){const vt="number"==typeof nt?nt:mn(qr(nt,De?.params??{},F.errors));oe.delayNextStep(vt)}}}_visitSubInstructions(D,F,oe){let nt=F.currentTimeline.currentTime;const vt=null!=oe.duration?mn(oe.duration):null,Pt=null!=oe.delay?mn(oe.delay):null;return 0!==vt&&D.forEach(Lt=>{const Jt=F.appendInstructionToTimeline(Lt,vt,Pt);nt=Math.max(nt,Jt.duration+Jt.delay)}),nt}visitReference(D,F){F.updateOptions(D.options,!0),Ms(this,D.animation,F),F.previousNode=D}visitSequence(D,F){const oe=F.subContextCount;let De=F;const nt=D.options;if(nt&&(nt.params||nt.delay)&&(De=F.createSubContext(nt),De.transformIntoNewTimeline(),null!=nt.delay)){De.previousNode.type==ee.If.Style&&(De.currentTimeline.snapshotCurrentStyles(),De.previousNode=br);const vt=mn(nt.delay);De.delayNextStep(vt)}D.steps.length&&(D.steps.forEach(vt=>Ms(this,vt,De)),De.currentTimeline.applyStylesToKeyframe(),De.subContextCount>oe&&De.transformIntoNewTimeline()),F.previousNode=D}visitGroup(D,F){const oe=[];let De=F.currentTimeline.currentTime;const nt=D.options&&D.options.delay?mn(D.options.delay):0;D.steps.forEach(vt=>{const Pt=F.createSubContext(D.options);nt&&Pt.delayNextStep(nt),Ms(this,vt,Pt),De=Math.max(De,Pt.currentTimeline.currentTime),oe.push(Pt.currentTimeline)}),oe.forEach(vt=>F.currentTimeline.mergeTimelineCollectedStyles(vt)),F.transformIntoNewTimeline(De),F.previousNode=D}_visitTiming(D,F){if(D.dynamic){const oe=D.strValue;return Qi(F.params?qr(oe,F.params,F.errors):oe,F.errors)}return{duration:D.duration,delay:D.delay,easing:D.easing}}visitAnimate(D,F){const oe=F.currentAnimateTimings=this._visitTiming(D.timings,F),De=F.currentTimeline;oe.delay&&(F.incrementTime(oe.delay),De.snapshotCurrentStyles());const nt=D.style;nt.type==ee.If.Keyframes?this.visitKeyframes(nt,F):(F.incrementTime(oe.duration),this.visitStyle(nt,F),De.applyStylesToKeyframe()),F.currentAnimateTimings=null,F.previousNode=D}visitStyle(D,F){const oe=F.currentTimeline,De=F.currentAnimateTimings;!De&&oe.hasCurrentStyleProperties()&&oe.forwardFrame();const nt=De&&De.easing||D.easing;D.isEmptyStep?oe.applyEmptyStep(nt):oe.setStyles(D.styles,nt,F.errors,F.options),F.previousNode=D}visitKeyframes(D,F){const oe=F.currentAnimateTimings,De=F.currentTimeline.duration,nt=oe.duration,Pt=F.createSubContext().currentTimeline;Pt.easing=oe.easing,D.styles.forEach(Lt=>{Pt.forwardTime((Lt.offset||0)*nt),Pt.setStyles(Lt.styles,Lt.easing,F.errors,F.options),Pt.applyStylesToKeyframe()}),F.currentTimeline.mergeTimelineCollectedStyles(Pt),F.transformIntoNewTimeline(De+nt),F.previousNode=D}visitQuery(D,F){const oe=F.currentTimeline.currentTime,De=D.options||{},nt=De.delay?mn(De.delay):0;nt&&(F.previousNode.type===ee.If.Style||0==oe&&F.currentTimeline.hasCurrentStyleProperties())&&(F.currentTimeline.snapshotCurrentStyles(),F.previousNode=br);let vt=oe;const Pt=F.invokeQuery(D.selector,D.originalSelector,D.limit,D.includeSelf,!!De.optional,F.errors);F.currentQueryTotal=Pt.length;let Lt=null;Pt.forEach((Jt,oi)=>{F.currentQueryIndex=oi;const pi=F.createSubContext(D.options,Jt);nt&&pi.delayNextStep(nt),Jt===F.element&&(Lt=pi.currentTimeline),Ms(this,D.animation,pi),pi.currentTimeline.applyStylesToKeyframe(),vt=Math.max(vt,pi.currentTimeline.currentTime)}),F.currentQueryIndex=0,F.currentQueryTotal=0,F.transformIntoNewTimeline(vt),Lt&&(F.currentTimeline.mergeTimelineCollectedStyles(Lt),F.currentTimeline.snapshotCurrentStyles()),F.previousNode=D}visitStagger(D,F){const oe=F.parentContext,De=F.currentTimeline,nt=D.timings,vt=Math.abs(nt.duration),Pt=vt*(F.currentQueryTotal-1);let Lt=vt*F.currentQueryIndex;switch(nt.duration<0?"reverse":nt.easing){case"reverse":Lt=Pt-Lt;break;case"full":Lt=oe.currentStaggerTime}const oi=F.currentTimeline;Lt&&oi.delayNextStep(Lt);const pi=oi.currentTime;Ms(this,D.animation,F),F.previousNode=D,oe.currentStaggerTime=De.currentTime-pi+(De.startTime-oe.currentTimeline.startTime)}}const br={};class ha{constructor(D,F,oe,De,nt,vt,Pt,Lt){this._driver=D,this.element=F,this.subInstructions=oe,this._enterClassName=De,this._leaveClassName=nt,this.errors=vt,this.timelines=Pt,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=br,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Lt||new Ra(this._driver,F,0),Pt.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(D,F){if(!D)return;const oe=D;let De=this.options;null!=oe.duration&&(De.duration=mn(oe.duration)),null!=oe.delay&&(De.delay=mn(oe.delay));const nt=oe.params;if(nt){let vt=De.params;vt||(vt=this.options.params={}),Object.keys(nt).forEach(Pt=>{(!F||!vt.hasOwnProperty(Pt))&&(vt[Pt]=qr(nt[Pt],vt,this.errors))})}}_copyOptions(){const D={};if(this.options){const F=this.options.params;if(F){const oe=D.params={};Object.keys(F).forEach(De=>{oe[De]=F[De]})}}return D}createSubContext(D=null,F,oe){const De=F||this.element,nt=new ha(this._driver,De,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(De,oe||0));return nt.previousNode=this.previousNode,nt.currentAnimateTimings=this.currentAnimateTimings,nt.options=this._copyOptions(),nt.updateOptions(D),nt.currentQueryIndex=this.currentQueryIndex,nt.currentQueryTotal=this.currentQueryTotal,nt.parentContext=this,this.subContextCount++,nt}transformIntoNewTimeline(D){return this.previousNode=br,this.currentTimeline=this.currentTimeline.fork(this.element,D),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(D,F,oe){const De={duration:F??D.duration,delay:this.currentTimeline.currentTime+(oe??0)+D.delay,easing:""},nt=new js(this._driver,D.element,D.keyframes,D.preStyleProps,D.postStyleProps,De,D.stretchStartingKeyframe);return this.timelines.push(nt),De}incrementTime(D){this.currentTimeline.forwardTime(this.currentTimeline.duration+D)}delayNextStep(D){D>0&&this.currentTimeline.delayNextStep(D)}invokeQuery(D,F,oe,De,nt,vt){let Pt=[];if(De&&Pt.push(this.element),D.length>0){D=(D=D.replace(ks,"."+this._enterClassName)).replace(ys,"."+this._leaveClassName);let Jt=this._driver.query(this.element,D,1!=oe);0!==oe&&(Jt=oe<0?Jt.slice(Jt.length+oe,Jt.length):Jt.slice(0,oe)),Pt.push(...Jt)}return!nt&&0==Pt.length&&vt.push(function Ve(Ie){return new H.wOt(3014,!1)}()),Pt}}class Ra{constructor(D,F,oe,De){this._driver=D,this.element=F,this.startTime=oe,this._elementTimelineStylesLookup=De,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(F),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(F,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(D){const F=1===this._keyframes.size&&this._pendingStyles.size;this.duration||F?(this.forwardTime(this.currentTime+D),F&&this.snapshotCurrentStyles()):this.startTime+=D}fork(D,F){return this.applyStylesToKeyframe(),new Ra(this._driver,D,F||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(D){this.applyStylesToKeyframe(),this.duration=D,this._loadKeyframe()}_updateStyle(D,F){this._localTimelineStyles.set(D,F),this._globalTimelineStyles.set(D,F),this._styleSummary.set(D,{time:this.currentTime,value:F})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(D){D&&this._previousKeyframe.set("easing",D);for(let[F,oe]of this._globalTimelineStyles)this._backFill.set(F,oe||ee.kp),this._currentKeyframe.set(F,ee.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(D,F,oe,De){F&&this._previousKeyframe.set("easing",F);const nt=De&&De.params||{},vt=function fa(Ie,D){const F=new Map;let oe;return Ie.forEach(De=>{if("*"===De){oe??=D.keys();for(let nt of oe)F.set(nt,ee.kp)}else for(let[nt,vt]of De)F.set(nt,vt)}),F}(D,this._globalTimelineStyles);for(let[Pt,Lt]of vt){const Jt=qr(Lt,nt,oe);this._pendingStyles.set(Pt,Jt),this._localTimelineStyles.has(Pt)||this._backFill.set(Pt,this._globalTimelineStyles.get(Pt)??ee.kp),this._updateStyle(Pt,Jt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((D,F)=>{this._currentKeyframe.set(F,D)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((D,F)=>{this._currentKeyframe.has(F)||this._currentKeyframe.set(F,D)}))}snapshotCurrentStyles(){for(let[D,F]of this._localTimelineStyles)this._pendingStyles.set(D,F),this._updateStyle(D,F)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const D=[];for(let F in this._currentKeyframe)D.push(F);return D}mergeTimelineCollectedStyles(D){D._styleSummary.forEach((F,oe)=>{const De=this._styleSummary.get(oe);(!De||F.time>De.time)&&this._updateStyle(oe,F.value)})}buildKeyframes(){this.applyStylesToKeyframe();const D=new Set,F=new Set,oe=1===this._keyframes.size&&0===this.duration;let De=[];this._keyframes.forEach((Pt,Lt)=>{const Jt=new Map([...this._backFill,...Pt]);Jt.forEach((oi,pi)=>{oi===ee.FX?D.add(pi):oi===ee.kp&&F.add(pi)}),oe||Jt.set("offset",Lt/this.duration),De.push(Jt)});const nt=[...D.values()],vt=[...F.values()];if(oe){const Pt=De[0],Lt=new Map(Pt);Pt.set("offset",0),Lt.set("offset",1),De=[Pt,Lt]}return Oo(this.element,De,nt,vt,this.duration,this.startTime,this.easing,!1)}}class js extends Ra{constructor(D,F,oe,De,nt,vt,Pt=!1){super(D,F,vt.delay),this.keyframes=oe,this.preStyleProps=De,this.postStyleProps=nt,this._stretchStartingKeyframe=Pt,this.timings={duration:vt.duration,delay:vt.delay,easing:vt.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let D=this.keyframes,{delay:F,duration:oe,easing:De}=this.timings;if(this._stretchStartingKeyframe&&F){const nt=[],vt=oe+F,Pt=F/vt,Lt=new Map(D[0]);Lt.set("offset",0),nt.push(Lt);const Jt=new Map(D[0]);Jt.set("offset",za(Pt)),nt.push(Jt);const oi=D.length-1;for(let pi=1;pi<=oi;pi++){let bi=new Map(D[pi]);const xr=bi.get("offset");bi.set("offset",za((F+xr*oe)/vt)),nt.push(bi)}oe=vt,F=0,De="",D=nt}return Oo(this.element,D,this.preStyleProps,this.postStyleProps,oe,F,De,!0)}}function za(Ie,D=3){const F=Math.pow(10,D-1);return Math.round(Ie*F)/F}function cl(Ie,D,F,oe,De,nt,vt,Pt,Lt,Jt,oi,pi,bi){return{type:0,element:Ie,triggerName:D,isRemovalTransition:De,fromState:F,fromStyles:nt,toState:oe,toStyles:vt,timelines:Pt,queriedElements:Lt,preStyleProps:Jt,postStyleProps:oi,totalTime:pi,errors:bi}}const no={};class Fo{constructor(D,F,oe){this._triggerName=D,this.ast=F,this._stateStyles=oe}match(D,F,oe,De){return function Ml(Ie,D,F,oe,De){return Ie.some(nt=>nt(D,F,oe,De))}(this.ast.matchers,D,F,oe,De)}buildStyles(D,F,oe){let De=this._stateStyles.get("*");return void 0!==D&&(De=this._stateStyles.get(D?.toString())||De),De?De.buildStyles(F,oe):new Map}build(D,F,oe,De,nt,vt,Pt,Lt,Jt,oi){const pi=[],bi=this.ast.options&&this.ast.options.params||no,Zn=this.buildStyles(oe,Pt&&Pt.params||no,pi),Ji=Lt&&Lt.params||no,xi=this.buildStyles(De,Ji,pi),P=new Set,we=new Map,se=new Map,be="void"===De,mt={params:Ga(Ji,bi),delay:this.ast.options?.delay},Xt=oi?[]:Sl(D,F,this.ast.animation,nt,vt,Zn,xi,mt,Jt,pi);let Kt=0;return Xt.forEach(Qn=>{Kt=Math.max(Qn.duration+Qn.delay,Kt)}),pi.length?cl(F,this._triggerName,oe,De,be,Zn,xi,[],[],we,se,Kt,pi):(Xt.forEach(Qn=>{const Dr=Qn.element,es=Vn(we,Dr,new Set);Qn.preStyleProps.forEach(ar=>es.add(ar));const hs=Vn(se,Dr,new Set);Qn.postStyleProps.forEach(ar=>hs.add(ar)),Dr!==F&&P.add(Dr)}),cl(F,this._triggerName,oe,De,be,Zn,xi,Xt,[...P.values()],we,se,Kt))}}function Ga(Ie,D){const F={...D};return Object.entries(Ie).forEach(([oe,De])=>{null!=De&&(F[oe]=De)}),F}class pa{constructor(D,F,oe){this.styles=D,this.defaultParams=F,this.normalizer=oe}buildStyles(D,F){const oe=new Map,De=Ga(D,this.defaultParams);return this.styles.styles.forEach(nt=>{"string"!=typeof nt&&nt.forEach((vt,Pt)=>{vt&&(vt=qr(vt,De,F));const Lt=this.normalizer.normalizePropertyName(Pt,F);vt=this.normalizer.normalizeStyleValue(Pt,Lt,vt,F),oe.set(Pt,vt)})}),oe}}class Yo{constructor(D,F,oe){this.name=D,this.ast=F,this._normalizer=oe,this.transitionFactories=[],this.states=new Map,F.states.forEach(De=>{this.states.set(De.name,new pa(De.style,De.options&&De.options.params||{},oe))}),na(this.states,"true","1"),na(this.states,"false","0"),F.transitions.forEach(De=>{this.transitionFactories.push(new Fo(D,De,this.states))}),this.fallbackTransition=function Pa(Ie,D,F){return new Fo(Ie,{type:ee.If.Transition,animation:{type:ee.If.Sequence,steps:[],options:null},matchers:[(vt,Pt)=>!0],options:null,queryCount:0,depCount:0},D)}(D,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(D,F,oe,De){return this.transitionFactories.find(vt=>vt.match(D,F,oe,De))||null}matchStyles(D,F,oe){return this.fallbackTransition.buildStyles(D,F,oe)}}function na(Ie,D,F){Ie.has(D)?Ie.has(F)||Ie.set(F,Ie.get(D)):Ie.has(F)&&Ie.set(D,Ie.get(F))}const Yl=new zi;class Vs{constructor(D,F,oe){this.bodyNode=D,this._driver=F,this._normalizer=oe,this._animations=new Map,this._playersById=new Map,this.players=[]}register(D,F){const oe=[],nt=Br(this._driver,F,oe,[]);if(oe.length)throw function ze(Ie){return new H.wOt(3503,!1)}();this._animations.set(D,nt)}_buildPlayer(D,F,oe){const De=D.element,nt=Tt(this._normalizer,D.keyframes,F,oe);return this._driver.animate(De,nt,D.duration,D.delay,D.easing,[],!0)}create(D,F,oe={}){const De=[],nt=this._animations.get(D);let vt;const Pt=new Map;if(nt?(vt=Sl(this._driver,F,nt,Pr,At,new Map,new Map,oe,Yl,De),vt.forEach(oi=>{const pi=Vn(Pt,oi.element,new Map);oi.postStyleProps.forEach(bi=>pi.set(bi,null))})):(De.push(function Mt(){return new H.wOt(3300,!1)}()),vt=[]),De.length)throw function st(Ie){return new H.wOt(3504,!1)}();Pt.forEach((oi,pi)=>{oi.forEach((bi,xr)=>{oi.set(xr,this._driver.computeStyle(pi,xr,ee.kp))})});const Jt=Dt(vt.map(oi=>{const pi=Pt.get(oi.element);return this._buildPlayer(oi,new Map,pi)}));return this._playersById.set(D,Jt),Jt.onDestroy(()=>this.destroy(D)),this.players.push(Jt),Jt}destroy(D){const F=this._getPlayer(D);F.destroy(),this._playersById.delete(D);const oe=this.players.indexOf(F);oe>=0&&this.players.splice(oe,1)}_getPlayer(D){const F=this._playersById.get(D);if(!F)throw function je(Ie){return new H.wOt(3301,!1)}();return F}listen(D,F,oe,De){const nt=Yn(F,"","","");return un(this._getPlayer(D),oe,nt,De),()=>{}}command(D,F,oe,De){if("register"==oe)return void this.register(D,De[0]);if("create"==oe)return void this.create(D,F,De[0]||{});const nt=this._getPlayer(D);switch(oe){case"play":nt.play();break;case"pause":nt.pause();break;case"reset":nt.reset();break;case"restart":nt.restart();break;case"finish":nt.finish();break;case"init":nt.init();break;case"setPosition":nt.setPosition(parseFloat(De[0]));break;case"destroy":this.destroy(D)}}}const qo="ng-animate-queued",ua="ng-animate-disabled",wl=[],ma={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},lc={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},wo="__ng_removed";class Cl{get params(){return this.options.params}constructor(D,F=""){this.namespaceId=F;const oe=D&&D.hasOwnProperty("value");if(this.value=function La(Ie){return Ie??null}(oe?D.value:D),oe){const{value:nt,...vt}=D;this.options=vt}else this.options={};this.options.params||(this.options.params={})}absorbOptions(D){const F=D.params;if(F){const oe=this.options.params;Object.keys(F).forEach(De=>{null==oe[De]&&(oe[De]=F[De])})}}}const Wa="void",qa=new Cl(Wa);class Za{constructor(D,F,oe){this.id=D,this.hostElement=F,this._engine=oe,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+D,_o(F,this._hostClassName)}listen(D,F,oe,De){if(!this._triggers.has(F))throw function yt(Ie,D){return new H.wOt(3302,!1)}();if(null==oe||0==oe.length)throw function Yt(Ie){return new H.wOt(3303,!1)}();if(!function ia(Ie){return"start"==Ie||"done"==Ie}(oe))throw function dn(Ie,D){return new H.wOt(3400,!1)}();const nt=Vn(this._elementListeners,D,[]),vt={name:F,phase:oe,callback:De};nt.push(vt);const Pt=Vn(this._engine.statesByElement,D,new Map);return Pt.has(F)||(_o(D,Ht),_o(D,Ht+"-"+F),Pt.set(F,qa)),()=>{this._engine.afterFlush(()=>{const Lt=nt.indexOf(vt);Lt>=0&&nt.splice(Lt,1),this._triggers.has(F)||Pt.delete(F)})}}register(D,F){return!this._triggers.has(D)&&(this._triggers.set(D,F),!0)}_getTrigger(D){const F=this._triggers.get(D);if(!F)throw function fn(Ie){return new H.wOt(3401,!1)}();return F}trigger(D,F,oe,De=!0){const nt=this._getTrigger(F),vt=new Ys(this.id,F,D);let Pt=this._engine.statesByElement.get(D);Pt||(_o(D,Ht),_o(D,Ht+"-"+F),this._engine.statesByElement.set(D,Pt=new Map));let Lt=Pt.get(F);const Jt=new Cl(oe,this.id);if(!(oe&&oe.hasOwnProperty("value"))&&Lt&&Jt.absorbOptions(Lt.options),Pt.set(F,Jt),Lt||(Lt=qa),Jt.value!==Wa&&Lt.value===Jt.value){if(!function Vl(Ie,D){const F=Object.keys(Ie),oe=Object.keys(D);if(F.length!=oe.length)return!1;for(let De=0;De<F.length;De++){const nt=F[De];if(!D.hasOwnProperty(nt)||Ie[nt]!==D[nt])return!1}return!0}(Lt.params,Jt.params)){const Ji=[],xi=nt.matchStyles(Lt.value,Lt.params,Ji),P=nt.matchStyles(Jt.value,Jt.params,Ji);Ji.length?this._engine.reportError(Ji):this._engine.afterFlush(()=>{Hi(D,xi),Pn(D,P)})}return}const bi=Vn(this._engine.playersByElement,D,[]);bi.forEach(Ji=>{Ji.namespaceId==this.id&&Ji.triggerName==F&&Ji.queued&&Ji.destroy()});let xr=nt.matchTransition(Lt.value,Jt.value,D,Jt.params),Zn=!1;if(!xr){if(!De)return;xr=nt.fallbackTransition,Zn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:D,triggerName:F,transition:xr,fromState:Lt,toState:Jt,player:vt,isFallbackTransition:Zn}),Zn||(_o(D,qo),vt.onStart(()=>{yo(D,qo)})),vt.onDone(()=>{let Ji=this.players.indexOf(vt);Ji>=0&&this.players.splice(Ji,1);const xi=this._engine.playersByElement.get(D);if(xi){let P=xi.indexOf(vt);P>=0&&xi.splice(P,1)}}),this.players.push(vt),bi.push(vt),vt}deregister(D){this._triggers.delete(D),this._engine.statesByElement.forEach(F=>F.delete(D)),this._elementListeners.forEach((F,oe)=>{this._elementListeners.set(oe,F.filter(De=>De.name!=D))})}clearElementCache(D){this._engine.statesByElement.delete(D),this._elementListeners.delete(D);const F=this._engine.playersByElement.get(D);F&&(F.forEach(oe=>oe.destroy()),this._engine.playersByElement.delete(D))}_signalRemovalForInnerTriggers(D,F){const oe=this._engine.driver.query(D,rt,!0);oe.forEach(De=>{if(De[wo])return;const nt=this._engine.fetchNamespacesByElement(De);nt.size?nt.forEach(vt=>vt.triggerLeaveAnimation(De,F,!1,!0)):this.clearElementCache(De)}),this._engine.afterFlushAnimationsDone(()=>oe.forEach(De=>this.clearElementCache(De)))}triggerLeaveAnimation(D,F,oe,De){const nt=this._engine.statesByElement.get(D),vt=new Map;if(nt){const Pt=[];if(nt.forEach((Lt,Jt)=>{if(vt.set(Jt,Lt.value),this._triggers.has(Jt)){const oi=this.trigger(D,Jt,Wa,De);oi&&Pt.push(oi)}}),Pt.length)return this._engine.markElementAsRemoved(this.id,D,!0,F,vt),oe&&Dt(Pt).onDone(()=>this._engine.processLeaveNode(D)),!0}return!1}prepareLeaveAnimationListeners(D){const F=this._elementListeners.get(D),oe=this._engine.statesByElement.get(D);if(F&&oe){const De=new Set;F.forEach(nt=>{const vt=nt.name;if(De.has(vt))return;De.add(vt);const Lt=this._triggers.get(vt).fallbackTransition,Jt=oe.get(vt)||qa,oi=new Cl(Wa),pi=new Ys(this.id,vt,D);this._engine.totalQueuedPlayers++,this._queue.push({element:D,triggerName:vt,transition:Lt,fromState:Jt,toState:oi,player:pi,isFallbackTransition:!0})})}}removeNode(D,F){const oe=this._engine;if(D.childElementCount&&this._signalRemovalForInnerTriggers(D,F),this.triggerLeaveAnimation(D,F,!0))return;let De=!1;if(oe.totalAnimations){const nt=oe.players.length?oe.playersByQueriedElement.get(D):[];if(nt&&nt.length)De=!0;else{let vt=D;for(;vt=vt.parentNode;)if(oe.statesByElement.get(vt)){De=!0;break}}}if(this.prepareLeaveAnimationListeners(D),De)oe.markElementAsRemoved(this.id,D,!1,F);else{const nt=D[wo];(!nt||nt===ma)&&(oe.afterFlush(()=>this.clearElementCache(D)),oe.destroyInnerAnimations(D),oe._onRemovalComplete(D,F))}}insertNode(D,F){_o(D,this._hostClassName)}drainQueuedTransitions(D){const F=[];return this._queue.forEach(oe=>{const De=oe.player;if(De.destroyed)return;const nt=oe.element,vt=this._elementListeners.get(nt);vt&&vt.forEach(Pt=>{if(Pt.name==oe.triggerName){const Lt=Yn(nt,oe.triggerName,oe.fromState.value,oe.toState.value);Lt._data=D,un(oe.player,Pt.phase,Lt,Pt.callback)}}),De.markedForDestroy?this._engine.afterFlush(()=>{De.destroy()}):F.push(oe)}),this._queue=[],F.sort((oe,De)=>{const nt=oe.transition.ast.depCount,vt=De.transition.ast.depCount;return 0==nt||0==vt?nt-vt:this._engine.driver.containsElement(oe.element,De.element)?1:-1})}destroy(D){this.players.forEach(F=>F.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,D)}}class Cc{_onRemovalComplete(D,F){this.onRemovalComplete(D,F)}constructor(D,F,oe,De){this.bodyNode=D,this.driver=F,this._normalizer=oe,this.scheduler=De,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(nt,vt)=>{}}get queuedPlayers(){const D=[];return this._namespaceList.forEach(F=>{F.players.forEach(oe=>{oe.queued&&D.push(oe)})}),D}createNamespace(D,F){const oe=new Za(D,F,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,F)?this._balanceNamespaceList(oe,F):(this.newHostElements.set(F,oe),this.collectEnterElement(F)),this._namespaceLookup[D]=oe}_balanceNamespaceList(D,F){const oe=this._namespaceList,De=this.namespacesByHostElement;if(oe.length-1>=0){let vt=!1,Pt=this.driver.getParentElement(F);for(;Pt;){const Lt=De.get(Pt);if(Lt){const Jt=oe.indexOf(Lt);oe.splice(Jt+1,0,D),vt=!0;break}Pt=this.driver.getParentElement(Pt)}vt||oe.unshift(D)}else oe.push(D);return De.set(F,D),D}register(D,F){let oe=this._namespaceLookup[D];return oe||(oe=this.createNamespace(D,F)),oe}registerTrigger(D,F,oe){let De=this._namespaceLookup[D];De&&De.register(F,oe)&&this.totalAnimations++}destroy(D,F){D&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const oe=this._fetchNamespace(D);this.namespacesByHostElement.delete(oe.hostElement);const De=this._namespaceList.indexOf(oe);De>=0&&this._namespaceList.splice(De,1),oe.destroy(F),delete this._namespaceLookup[D]}))}_fetchNamespace(D){return this._namespaceLookup[D]}fetchNamespacesByElement(D){const F=new Set,oe=this.statesByElement.get(D);if(oe)for(let De of oe.values())if(De.namespaceId){const nt=this._fetchNamespace(De.namespaceId);nt&&F.add(nt)}return F}trigger(D,F,oe,De){if(vo(F)){const nt=this._fetchNamespace(D);if(nt)return nt.trigger(F,oe,De),!0}return!1}insertNode(D,F,oe,De){if(!vo(F))return;const nt=F[wo];if(nt&&nt.setForRemoval){nt.setForRemoval=!1,nt.setForMove=!0;const vt=this.collectedLeaveElements.indexOf(F);vt>=0&&this.collectedLeaveElements.splice(vt,1)}if(D){const vt=this._fetchNamespace(D);vt&&vt.insertNode(F,oe)}De&&this.collectEnterElement(F)}collectEnterElement(D){this.collectedEnterElements.push(D)}markElementAsDisabled(D,F){F?this.disabledNodes.has(D)||(this.disabledNodes.add(D),_o(D,ua)):this.disabledNodes.has(D)&&(this.disabledNodes.delete(D),yo(D,ua))}removeNode(D,F,oe){if(vo(F)){this.scheduler?.notify();const De=D?this._fetchNamespace(D):null;De?De.removeNode(F,oe):this.markElementAsRemoved(D,F,!1,oe);const nt=this.namespacesByHostElement.get(F);nt&&nt.id!==D&&nt.removeNode(F,oe)}else this._onRemovalComplete(F,oe)}markElementAsRemoved(D,F,oe,De,nt){this.collectedLeaveElements.push(F),F[wo]={namespaceId:D,setForRemoval:De,hasAnimation:oe,removedBeforeQueried:!1,previousTriggersValues:nt}}listen(D,F,oe,De,nt){return vo(F)?this._fetchNamespace(D).listen(F,oe,De,nt):()=>{}}_buildInstruction(D,F,oe,De,nt){return D.transition.build(this.driver,D.element,D.fromState.value,D.toState.value,oe,De,D.fromState.options,D.toState.options,F,nt)}destroyInnerAnimations(D){let F=this.driver.query(D,rt,!0);F.forEach(oe=>this.destroyActiveAnimationsForElement(oe)),0!=this.playersByQueriedElement.size&&(F=this.driver.query(D,on,!0),F.forEach(oe=>this.finishActiveQueriedAnimationOnElement(oe)))}destroyActiveAnimationsForElement(D){const F=this.playersByElement.get(D);F&&F.forEach(oe=>{oe.queued?oe.markedForDestroy=!0:oe.destroy()})}finishActiveQueriedAnimationOnElement(D){const F=this.playersByQueriedElement.get(D);F&&F.forEach(oe=>oe.finish())}whenRenderingDone(){return new Promise(D=>{if(this.players.length)return Dt(this.players).onDone(()=>D());D()})}processLeaveNode(D){const F=D[wo];if(F&&F.setForRemoval){if(D[wo]=ma,F.namespaceId){this.destroyInnerAnimations(D);const oe=this._fetchNamespace(F.namespaceId);oe&&oe.clearElementCache(D)}this._onRemovalComplete(D,F.setForRemoval)}D.classList?.contains(ua)&&this.markElementAsDisabled(D,!1),this.driver.query(D,".ng-animate-disabled",!0).forEach(oe=>{this.markElementAsDisabled(oe,!1)})}flush(D=-1){let F=[];if(this.newHostElements.size&&(this.newHostElements.forEach((oe,De)=>this._balanceNamespaceList(oe,De)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let oe=0;oe<this.collectedEnterElements.length;oe++)_o(this.collectedEnterElements[oe],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const oe=[];try{F=this._flushAnimations(oe,D)}finally{for(let De=0;De<oe.length;De++)oe[De]()}}else for(let oe=0;oe<this.collectedLeaveElements.length;oe++)this.processLeaveNode(this.collectedLeaveElements[oe]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(oe=>oe()),this._flushFns=[],this._whenQuietFns.length){const oe=this._whenQuietFns;this._whenQuietFns=[],F.length?Dt(F).onDone(()=>{oe.forEach(De=>De())}):oe.forEach(De=>De())}}reportError(D){throw function Sn(Ie){return new H.wOt(3402,!1)}()}_flushAnimations(D,F){const oe=new zi,De=[],nt=new Map,vt=[],Pt=new Map,Lt=new Map,Jt=new Map,oi=new Set;this.disabledNodes.forEach(Rn=>{oi.add(Rn);const en=this.driver.query(Rn,".ng-animate-queued",!0);for(let bn=0;bn<en.length;bn++)oi.add(en[bn])});const pi=this.bodyNode,bi=Array.from(this.statesByElement.keys()),xr=Ul(bi,this.collectedEnterElements),Zn=new Map;let Ji=0;xr.forEach((Rn,en)=>{const bn=Pr+Ji++;Zn.set(en,bn),Rn.forEach(ui=>_o(ui,bn))});const xi=[],P=new Set,we=new Set;for(let Rn=0;Rn<this.collectedLeaveElements.length;Rn++){const en=this.collectedLeaveElements[Rn],bn=en[wo];bn&&bn.setForRemoval&&(xi.push(en),P.add(en),bn.hasAnimation?this.driver.query(en,".ng-star-inserted",!0).forEach(ui=>P.add(ui)):we.add(en))}const se=new Map,be=Ul(bi,Array.from(P));be.forEach((Rn,en)=>{const bn=At+Ji++;se.set(en,bn),Rn.forEach(ui=>_o(ui,bn))}),D.push(()=>{xr.forEach((Rn,en)=>{const bn=Zn.get(en);Rn.forEach(ui=>yo(ui,bn))}),be.forEach((Rn,en)=>{const bn=se.get(en);Rn.forEach(ui=>yo(ui,bn))}),xi.forEach(Rn=>{this.processLeaveNode(Rn)})});const mt=[],Xt=[];for(let Rn=this._namespaceList.length-1;Rn>=0;Rn--)this._namespaceList[Rn].drainQueuedTransitions(F).forEach(bn=>{const ui=bn.player,pr=bn.element;if(mt.push(ui),this.collectedEnterElements.length){const vi=pr[wo];if(vi&&vi.setForMove){if(vi.previousTriggersValues&&vi.previousTriggersValues.has(bn.triggerName)){const Jo=vi.previousTriggersValues.get(bn.triggerName),Js=this.statesByElement.get(bn.element);if(Js&&Js.has(bn.triggerName)){const io=Js.get(bn.triggerName);io.value=Jo,Js.set(bn.triggerName,io)}}return void ui.destroy()}}const zr=!pi||!this.driver.containsElement(pi,pr),ts=se.get(pr),go=Zn.get(pr),lr=this._buildInstruction(bn,oe,go,ts,zr);if(lr.errors&&lr.errors.length)return void Xt.push(lr);if(zr)return ui.onStart(()=>Hi(pr,lr.fromStyles)),ui.onDestroy(()=>Pn(pr,lr.toStyles)),void De.push(ui);if(bn.isFallbackTransition)return ui.onStart(()=>Hi(pr,lr.fromStyles)),ui.onDestroy(()=>Pn(pr,lr.toStyles)),void De.push(ui);const Is=[];lr.timelines.forEach(vi=>{vi.stretchStartingKeyframe=!0,this.disabledNodes.has(vi.element)||Is.push(vi)}),lr.timelines=Is,oe.append(pr,lr.timelines),vt.push({instruction:lr,player:ui,element:pr}),lr.queriedElements.forEach(vi=>Vn(Pt,vi,[]).push(ui)),lr.preStyleProps.forEach((vi,Jo)=>{if(vi.size){let Js=Lt.get(Jo);Js||Lt.set(Jo,Js=new Set),vi.forEach((io,Ts)=>Js.add(Ts))}}),lr.postStyleProps.forEach((vi,Jo)=>{let Js=Jt.get(Jo);Js||Jt.set(Jo,Js=new Set),vi.forEach((io,Ts)=>Js.add(Ts))})});if(Xt.length){const Rn=[];Xt.forEach(en=>{Rn.push(function vn(Ie,D){return new H.wOt(3505,!1)}())}),mt.forEach(en=>en.destroy()),this.reportError(Rn)}const Kt=new Map,Qn=new Map;vt.forEach(Rn=>{const en=Rn.element;oe.has(en)&&(Qn.set(en,en),this._beforeAnimationBuild(Rn.player.namespaceId,Rn.instruction,Kt))}),De.forEach(Rn=>{const en=Rn.element;this._getPreviousPlayers(en,!1,Rn.namespaceId,Rn.triggerName,null).forEach(ui=>{Vn(Kt,en,[]).push(ui),ui.destroy()})});const Dr=xi.filter(Rn=>ra(Rn,Lt,Jt)),es=new Map;as(es,this.driver,we,Jt,ee.kp).forEach(Rn=>{ra(Rn,Lt,Jt)&&Dr.push(Rn)});const ar=new Map;xr.forEach((Rn,en)=>{as(ar,this.driver,new Set(Rn),Lt,ee.FX)}),Dr.forEach(Rn=>{const en=es.get(Rn),bn=ar.get(Rn);es.set(Rn,new Map([...en?.entries()??[],...bn?.entries()??[]]))});const Cs=[],Fi=[],lt={};vt.forEach(Rn=>{const{element:en,player:bn,instruction:ui}=Rn;if(oe.has(en)){if(oi.has(en))return bn.onDestroy(()=>Pn(en,ui.toStyles)),bn.disabled=!0,bn.overrideTotalTime(ui.totalTime),void De.push(bn);let pr=lt;if(Qn.size>1){let ts=en;const go=[];for(;ts=ts.parentNode;){const lr=Qn.get(ts);if(lr){pr=lr;break}go.push(ts)}go.forEach(lr=>Qn.set(lr,pr))}const zr=this._buildAnimation(bn.namespaceId,ui,Kt,nt,ar,es);if(bn.setRealPlayer(zr),pr===lt)Cs.push(bn);else{const ts=this.playersByElement.get(pr);ts&&ts.length&&(bn.parentPlayer=Dt(ts)),De.push(bn)}}else Hi(en,ui.fromStyles),bn.onDestroy(()=>Pn(en,ui.toStyles)),Fi.push(bn),oi.has(en)&&De.push(bn)}),Fi.forEach(Rn=>{const en=nt.get(Rn.element);if(en&&en.length){const bn=Dt(en);Rn.setRealPlayer(bn)}}),De.forEach(Rn=>{Rn.parentPlayer?Rn.syncPlayerEvents(Rn.parentPlayer):Rn.destroy()});for(let Rn=0;Rn<xi.length;Rn++){const en=xi[Rn],bn=en[wo];if(yo(en,At),bn&&bn.hasAnimation)continue;let ui=[];if(Pt.size){let zr=Pt.get(en);zr&&zr.length&&ui.push(...zr);let ts=this.driver.query(en,on,!0);for(let go=0;go<ts.length;go++){let lr=Pt.get(ts[go]);lr&&lr.length&&ui.push(...lr)}}const pr=ui.filter(zr=>!zr.destroyed);pr.length?Ja(this,en,pr):this.processLeaveNode(en)}return xi.length=0,Cs.forEach(Rn=>{this.players.push(Rn),Rn.onDone(()=>{Rn.destroy();const en=this.players.indexOf(Rn);this.players.splice(en,1)}),Rn.play()}),Cs}afterFlush(D){this._flushFns.push(D)}afterFlushAnimationsDone(D){this._whenQuietFns.push(D)}_getPreviousPlayers(D,F,oe,De,nt){let vt=[];if(F){const Pt=this.playersByQueriedElement.get(D);Pt&&(vt=Pt)}else{const Pt=this.playersByElement.get(D);if(Pt){const Lt=!nt||nt==Wa;Pt.forEach(Jt=>{Jt.queued||!Lt&&Jt.triggerName!=De||vt.push(Jt)})}}return(oe||De)&&(vt=vt.filter(Pt=>!(oe&&oe!=Pt.namespaceId||De&&De!=Pt.triggerName))),vt}_beforeAnimationBuild(D,F,oe){const nt=F.element,vt=F.isRemovalTransition?void 0:D,Pt=F.isRemovalTransition?void 0:F.triggerName;for(const Lt of F.timelines){const Jt=Lt.element,oi=Jt!==nt,pi=Vn(oe,Jt,[]);this._getPreviousPlayers(Jt,oi,vt,Pt,F.toState).forEach(xr=>{const Zn=xr.getRealPlayer();Zn.beforeDestroy&&Zn.beforeDestroy(),xr.destroy(),pi.push(xr)})}Hi(nt,F.fromStyles)}_buildAnimation(D,F,oe,De,nt,vt){const Pt=F.triggerName,Lt=F.element,Jt=[],oi=new Set,pi=new Set,bi=F.timelines.map(Zn=>{const Ji=Zn.element;oi.add(Ji);const xi=Ji[wo];if(xi&&xi.removedBeforeQueried)return new ee.sf(Zn.duration,Zn.delay);const P=Ji!==Lt,we=function Co(Ie){const D=[];return ql(Ie,D),D}((oe.get(Ji)||wl).map(Kt=>Kt.getRealPlayer())).filter(Kt=>!!Kt.element&&Kt.element===Ji),se=nt.get(Ji),be=vt.get(Ji),mt=Tt(this._normalizer,Zn.keyframes,se,be),Xt=this._buildPlayer(Zn,mt,we);if(Zn.subTimeline&&De&&pi.add(Ji),P){const Kt=new Ys(D,Pt,Ji);Kt.setRealPlayer(Xt),Jt.push(Kt)}return Xt});Jt.forEach(Zn=>{Vn(this.playersByQueriedElement,Zn.element,[]).push(Zn),Zn.onDone(()=>function Fa(Ie,D,F){let oe=Ie.get(D);if(oe){if(oe.length){const De=oe.indexOf(F);oe.splice(De,1)}0==oe.length&&Ie.delete(D)}return oe}(this.playersByQueriedElement,Zn.element,Zn))}),oi.forEach(Zn=>_o(Zn,xt));const xr=Dt(bi);return xr.onDestroy(()=>{oi.forEach(Zn=>yo(Zn,xt)),Pn(Lt,F.toStyles)}),pi.forEach(Zn=>{Vn(De,Zn,[]).push(xr)}),xr}_buildPlayer(D,F,oe){return F.length>0?this.driver.animate(D.element,F,D.duration,D.delay,D.easing,oe):new ee.sf(D.duration,D.delay)}}class Ys{constructor(D,F,oe){this.namespaceId=D,this.triggerName=F,this.element=oe,this._player=new ee.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(D){this._containsRealPlayer||(this._player=D,this._queuedCallbacks.forEach((F,oe)=>{F.forEach(De=>un(D,oe,void 0,De))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(D.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(D){this.totalTime=D}syncPlayerEvents(D){const F=this._player;F.triggerCallback&&D.onStart(()=>F.triggerCallback("start")),D.onDone(()=>this.finish()),D.onDestroy(()=>this.destroy())}_queueEvent(D,F){Vn(this._queuedCallbacks,D,[]).push(F)}onDone(D){this.queued&&this._queueEvent("done",D),this._player.onDone(D)}onStart(D){this.queued&&this._queueEvent("start",D),this._player.onStart(D)}onDestroy(D){this.queued&&this._queueEvent("destroy",D),this._player.onDestroy(D)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(D){this.queued||this._player.setPosition(D)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(D){const F=this._player;F.triggerCallback&&F.triggerCallback(D)}}function vo(Ie){return Ie&&1===Ie.nodeType}function ul(Ie,D){const F=Ie.style.display;return Ie.style.display=D??"none",F}function as(Ie,D,F,oe,De){const nt=[];F.forEach(Lt=>nt.push(ul(Lt)));const vt=[];oe.forEach((Lt,Jt)=>{const oi=new Map;Lt.forEach(pi=>{const bi=D.computeStyle(Jt,pi,De);oi.set(pi,bi),(!bi||0==bi.length)&&(Jt[wo]=lc,vt.push(Jt))}),Ie.set(Jt,oi)});let Pt=0;return F.forEach(Lt=>ul(Lt,nt[Pt++])),vt}function Ul(Ie,D){const F=new Map;if(Ie.forEach(Pt=>F.set(Pt,[])),0==D.length)return F;const De=new Set(D),nt=new Map;function vt(Pt){if(!Pt)return 1;let Lt=nt.get(Pt);if(Lt)return Lt;const Jt=Pt.parentNode;return Lt=F.has(Jt)?Jt:De.has(Jt)?1:vt(Jt),nt.set(Pt,Lt),Lt}return D.forEach(Pt=>{const Lt=vt(Pt);1!==Lt&&F.get(Lt).push(Pt)}),F}function _o(Ie,D){Ie.classList?.add(D)}function yo(Ie,D){Ie.classList?.remove(D)}function Ja(Ie,D,F){Dt(F).onDone(()=>Ie.processLeaveNode(D))}function ql(Ie,D){for(let F=0;F<Ie.length;F++){const oe=Ie[F];oe instanceof ee.ui?ql(oe.players,D):D.push(oe)}}function ra(Ie,D,F){const oe=F.get(Ie);if(!oe)return!1;let De=D.get(Ie);return De?oe.forEach(nt=>De.add(nt)):D.set(Ie,oe),F.delete(Ie),!0}class jr{constructor(D,F,oe,De){this._driver=F,this._normalizer=oe,this._triggerCache={},this.onRemovalComplete=(nt,vt)=>{},this._transitionEngine=new Cc(D.body,F,oe,De),this._timelineEngine=new Vs(D.body,F,oe),this._transitionEngine.onRemovalComplete=(nt,vt)=>this.onRemovalComplete(nt,vt)}registerTrigger(D,F,oe,De,nt){const vt=D+"-"+De;let Pt=this._triggerCache[vt];if(!Pt){const Lt=[],oi=Br(this._driver,nt,Lt,[]);if(Lt.length)throw function ot(Ie,D){return new H.wOt(3404,!1)}();Pt=function Na(Ie,D,F){return new Yo(Ie,D,F)}(De,oi,this._normalizer),this._triggerCache[vt]=Pt}this._transitionEngine.registerTrigger(F,De,Pt)}register(D,F){this._transitionEngine.register(D,F)}destroy(D,F){this._transitionEngine.destroy(D,F)}onInsert(D,F,oe,De){this._transitionEngine.insertNode(D,F,oe,De)}onRemove(D,F,oe){this._transitionEngine.removeNode(D,F,oe)}disableAnimations(D,F){this._transitionEngine.markElementAsDisabled(D,F)}process(D,F,oe,De){if("@"==oe.charAt(0)){const[nt,vt]=Yr(oe);this._timelineEngine.command(nt,F,vt,De)}else this._transitionEngine.trigger(D,F,oe,De)}listen(D,F,oe,De,nt){if("@"==oe.charAt(0)){const[vt,Pt]=Yr(oe);return this._timelineEngine.listen(vt,F,Pt,nt)}return this._transitionEngine.listen(D,F,oe,De,nt)}flush(D=-1){this._transitionEngine.flush(D)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(D){this._transitionEngine.afterFlushAnimationsDone(D)}}class ka{static{this.initialStylesByElement=new WeakMap}constructor(D,F,oe){this._element=D,this._startStyles=F,this._endStyles=oe,this._state=0;let De=ka.initialStylesByElement.get(D);De||ka.initialStylesByElement.set(D,De=new Map),this._initialStyles=De}start(){this._state<1&&(this._startStyles&&Pn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Pn(this._element,this._initialStyles),this._endStyles&&(Pn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ka.initialStylesByElement.delete(this._element),this._startStyles&&(Hi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hi(this._element,this._endStyles),this._endStyles=null),Pn(this._element,this._initialStyles),this._state=3)}}function po(Ie){let D=null;return Ie.forEach((F,oe)=>{(function $a(Ie){return"display"===Ie||"position"===Ie})(oe)&&(D=D||new Map,D.set(oe,F))}),D}class dl{constructor(D,F,oe,De){this.element=D,this.keyframes=F,this.options=oe,this._specialStyles=De,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=oe.duration,this._delay=oe.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(D=>D()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const D=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,D,this.options),this._finalKeyframe=D.length?D[D.length-1]:new Map;const F=()=>this._onFinish();this.domPlayer.addEventListener("finish",F),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",F)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(D){const F=[];return D.forEach(oe=>{F.push(Object.fromEntries(oe))}),F}_triggerWebAnimation(D,F,oe){return D.animate(this._convertKeyframesToObject(F),oe)}onStart(D){this._originalOnStartFns.push(D),this._onStartFns.push(D)}onDone(D){this._originalOnDoneFns.push(D),this._onDoneFns.push(D)}onDestroy(D){this._onDestroyFns.push(D)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(D=>D()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(D=>D()),this._onDestroyFns=[])}setPosition(D){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=D*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const D=new Map;this.hasStarted()&&this._finalKeyframe.forEach((oe,De)=>{"offset"!==De&&D.set(De,this._finished?oe:to(this.element,De))}),this.currentSnapshot=D}triggerCallback(D){const F="start"===D?this._onStartFns:this._onDoneFns;F.forEach(oe=>oe()),F.length=0}}class qs{validateStyleProperty(D){return!0}validateAnimatableStyleProperty(D){return!0}matchesElement(D,F){return!1}containsElement(D,F){return Ps(D,F)}getParentElement(D){return An(D)}query(D,F,oe){return ri(D,F,oe)}computeStyle(D,F,oe){return to(D,F)}animate(D,F,oe,De,nt,vt=[]){const Lt={duration:oe,delay:De,fill:0==De?"both":"forwards"};nt&&(Lt.easing=nt);const Jt=new Map,oi=vt.filter(xr=>xr instanceof dl);(function ms(Ie,D){return 0===Ie||0===D})(oe,De)&&oi.forEach(xr=>{xr.currentSnapshot.forEach((Zn,Ji)=>Jt.set(Ji,Zn))});let pi=function Oi(Ie){return Ie.length?Ie[0]instanceof Map?Ie:Ie.map(D=>new Map(Object.entries(D))):[]}(F).map(xr=>new Map(xr));pi=function sr(Ie,D,F){if(F.size&&D.length){let oe=D[0],De=[];if(F.forEach((nt,vt)=>{oe.has(vt)||De.push(vt),oe.set(vt,nt)}),De.length)for(let nt=1;nt<D.length;nt++){let vt=D[nt];De.forEach(Pt=>vt.set(Pt,to(Ie,Pt)))}}return D}(D,pi,Jt);const bi=function ja(Ie,D){let F=null,oe=null;return Array.isArray(D)&&D.length?(F=po(D[0]),D.length>1&&(oe=po(D[D.length-1]))):D instanceof Map&&(F=po(D)),F||oe?new ka(Ie,F,oe):null}(D,pi);return new dl(D,pi,Lt,bi)}}const pe="@.disabled";class Me{constructor(D,F,oe,De){this.namespaceId=D,this.delegate=F,this.engine=oe,this._onDestroy=De,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(D){this.delegate.destroyNode?.(D)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(D,F){return this.delegate.createElement(D,F)}createComment(D){return this.delegate.createComment(D)}createText(D){return this.delegate.createText(D)}appendChild(D,F){this.delegate.appendChild(D,F),this.engine.onInsert(this.namespaceId,F,D,!1)}insertBefore(D,F,oe,De=!0){this.delegate.insertBefore(D,F,oe),this.engine.onInsert(this.namespaceId,F,D,De)}removeChild(D,F,oe){this.engine.onRemove(this.namespaceId,F,this.delegate)}selectRootElement(D,F){return this.delegate.selectRootElement(D,F)}parentNode(D){return this.delegate.parentNode(D)}nextSibling(D){return this.delegate.nextSibling(D)}setAttribute(D,F,oe,De){this.delegate.setAttribute(D,F,oe,De)}removeAttribute(D,F,oe){this.delegate.removeAttribute(D,F,oe)}addClass(D,F){this.delegate.addClass(D,F)}removeClass(D,F){this.delegate.removeClass(D,F)}setStyle(D,F,oe,De){this.delegate.setStyle(D,F,oe,De)}removeStyle(D,F,oe){this.delegate.removeStyle(D,F,oe)}setProperty(D,F,oe){"@"==F.charAt(0)&&F==pe?this.disableAnimations(D,!!oe):this.delegate.setProperty(D,F,oe)}setValue(D,F){this.delegate.setValue(D,F)}listen(D,F,oe){return this.delegate.listen(D,F,oe)}disableAnimations(D,F){this.engine.disableAnimations(D,F)}}class ne extends Me{constructor(D,F,oe,De,nt){super(F,oe,De,nt),this.factory=D,this.namespaceId=F}setProperty(D,F,oe){"@"==F.charAt(0)?"."==F.charAt(1)&&F==pe?this.disableAnimations(D,oe=void 0===oe||!!oe):this.engine.process(this.namespaceId,D,F.slice(1),oe):this.delegate.setProperty(D,F,oe)}listen(D,F,oe){if("@"==F.charAt(0)){const De=function Xe(Ie){switch(Ie){case"body":return document.body;case"document":return document;case"window":return window;default:return Ie}}(D);let nt=F.slice(1),vt="";return"@"!=nt.charAt(0)&&([nt,vt]=function Ct(Ie){const D=Ie.indexOf(".");return[Ie.substring(0,D),Ie.slice(D+1)]}(nt)),this.engine.listen(this.namespaceId,De,nt,vt,Pt=>{this.factory.scheduleListenerCallback(Pt._data||-1,oe,Pt)})}return this.delegate.listen(D,F,oe)}}class Di{constructor(D,F,oe){this.delegate=D,this.engine=F,this._zone=oe,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,F.onRemovalComplete=(De,nt)=>{const vt=nt?.parentNode(De);vt&&nt.removeChild(vt,De)}}createRenderer(D,F){const De=this.delegate.createRenderer(D,F);if(!D||!F?.data?.animation){const Jt=this._rendererCache;let oi=Jt.get(De);return oi||(oi=new Me("",De,this.engine,()=>Jt.delete(De)),Jt.set(De,oi)),oi}const nt=F.id,vt=F.id+"-"+this._currentId;this._currentId++,this.engine.register(vt,D);const Pt=Jt=>{Array.isArray(Jt)?Jt.forEach(Pt):this.engine.registerTrigger(nt,vt,D,Jt.name,Jt)};return F.data.animation.forEach(Pt),new ne(this,vt,De,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(D,F,oe){if(D>=0&&D<this._microtaskId)return void this._zone.run(()=>F(oe));const De=this._animationCallbacksBuffer;0==De.length&&queueMicrotask(()=>{this._zone.run(()=>{De.forEach(nt=>{const[vt,Pt]=nt;vt(Pt)}),this._animationCallbacksBuffer=[]})}),De.push([F,oe])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}var Nr=M(177);const tl=[{provide:Cr,useFactory:function Hl(){return new Fs}},{provide:jr,useClass:(()=>{class Ie extends jr{constructor(F,oe,De){super(F,oe,De,(0,H.WQX)(H.An2,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(oe){return new(oe||Ie)(H.KVO(Nr.qQ),H.KVO(wi),H.KVO(Cr))}}static{this.\u0275prov=H.jDH({token:Ie,factory:Ie.\u0275fac})}}return Ie})()},{provide:H._9s,useFactory:function Lo(Ie,D,F){return new Di(Ie,D,F)},deps:[l.B7,jr,H.SKi]}],au=[{provide:wi,useFactory:()=>new qs},{provide:H.bc$,useValue:"BrowserAnimations"},...tl];function Hs(){return(0,H.ngT)("NgEagerAnimations"),[...au]}var nl=M(65),Ba=M(1946),Ao=M(6648),Dc=M(8810),Ua=M(5558),Xa=M(6354),bo=M(9437),mo=M(9974),zl=M(4360),et=M(3669),Se=M(1584),q=M(8750),fr=M(5794),da=M(9242),To=M(4909);let Tr=(()=>{class Ie{http;prefix;suffix;constructor(F,oe="/assets/i18n/",De=".json"){this.http=F,this.prefix=oe,this.suffix=De}getTranslation(F){return this.http.get(`${this.prefix}${F}${this.suffix}`)}static \u0275fac=function(oe){return new(oe||Ie)(H.KVO(te.Qq),H.KVO(String),H.KVO(String))};static \u0275prov=H.jDH({token:Ie,factory:Ie.\u0275fac})}return Ie})();const yn={providers:[Hs(),(0,h.lh)(K,(0,h.qQ)({skipInitialTransition:!0,onViewTransitionCreated(Ie){document.documentElement.style.setProperty("--view-transition-old-opacity","0"),document.documentElement.style.setProperty("--view-transition-new-opacity","1")}})),(0,te.$R)((0,te.ZZ)(),(0,te.b$)([(Ie,D)=>{const oe=(0,H.WQX)(Nr.qQ).defaultView,De=(0,H.WQX)(nl.L);if(oe){const nt=oe.localStorage.getItem("jwt");let vt=Ie.headers;return nt&&(vt=vt.set("Authorization",`Bearer ${nt}`)),"POST"===Ie.method&&(vt=vt.set("X-Client-Public-Key",De.getClientPublicKey())),D(Ie.clone({headers:vt}))}return D(Ie)},(Ie,D)=>{if(!fe.c.production){console.group(`API Call: ${Ie.method} ${Ie.url}`),console.log("Request Payload:",Ie.body);const F=Date.now();return D(Ie).pipe((0,de.M)({next:oe=>{if(oe instanceof te.cS){const De=Date.now();console.log("Response:",oe.body),console.log(`Duration: ${De-F}ms`),console.groupEnd()}},error:oe=>{console.error("Error:",oe),console.groupEnd()}}))}return D(Ie)},(Ie,D)=>{const F=(0,H.WQX)(Q.LC),oe=(0,H.WQX)(Q.o2);return function ut(Ie){return Ie.url.includes(Ba.F.UPLOAD_DOCUMENT)||Ie.url.includes(Ba.F.STRIPE_WEBHOOKS)||Ie.url.includes("/kwalhia-art")||Ie.url.includes("/artist-profiles")||Ie.url.includes("/vr-base-configs")||Ie.url.includes("/textures")||Ie.url.includes("/three-d-objects")||"GET"===Ie.method}(Ie)?D(Ie):(0,Ao.H)(oe.ensureKey()).pipe((0,Ua.n)(De=>{const nt=function kt(Ie,D,F){const oe=D.encrypt(JSON.stringify(Ie.body),F);return Ie.clone({body:{encryptedData:oe},headers:Ie.headers.set("X-Client-Public-Key",D.getClientPublicKey())})}(Ie,F,De);return D(nt).pipe((0,Xa.T)(vt=>function Dn(Ie,D){if(!(Ie instanceof te.cS))return Ie;const F=Ie.body;if(!function fi(Ie){return Ie&&"object"==typeof Ie&&void 0!==Ie.encryptedData&&(void 0===Ie.accessToken||"string"==typeof Ie.accessToken)}(F))return Ie;try{const oe=D.decrypt(F.encryptedData),De="string"==typeof oe?JSON.parse(oe):oe,nt=F.accessToken?{...De,accessToken:F.accessToken}:De;return Ie.clone({body:nt})}catch(oe){throw console.error("Decryption error:",oe),oe}}(vt,F)),(0,bo.W)(vt=>function li(Ie,D,F,oe){return Ie instanceof te.yz&&(function Zi(Ie){return Ie.error?.message?.includes("MAC")||"Invalid MAC"===Ie.error?.error}(Ie)||Ie.message?.includes("Decryption error"))?(console.log("Encryption error detected, refreshing keys and retrying..."),oe.clearKey(),(0,Ao.H)(oe.ensureKey()).pipe((0,Ua.n)(()=>F(D)))):(0,Dc.$)(()=>Ie)}(vt,Ie,D,oe)),function me(Ie=1/0){let D;D=Ie&&"object"==typeof Ie?Ie:{count:Ie};const{count:F=1/0,delay:oe,resetOnSuccess:De=!1}=D;return F<=0?et.D:(0,mo.N)((nt,vt)=>{let Lt,Pt=0;const Jt=()=>{let oi=!1;Lt=nt.subscribe((0,zl._)(vt,pi=>{De&&(Pt=0),vt.next(pi)},void 0,pi=>{if(Pt++<F){const bi=()=>{Lt?(Lt.unsubscribe(),Lt=null,Jt()):oi=!0};if(null!=oe){const xr="number"==typeof oe?(0,Se.O)(oe):(0,q.Tg)(oe(pi,Pt)),Zn=(0,zl._)(vt,()=>{Zn.unsubscribe(),bi()},()=>{vt.complete()});xr.subscribe(Zn)}else bi()}else vt.error(pi)})),oi&&(Lt.unsubscribe(),Lt=null,Jt())};Jt()})}({count:1,delay:500}))}))},(Ie,D)=>{const F=(0,H.WQX)(h.Ix),oe=(0,H.WQX)(fr.tw);return D(Ie).pipe((0,bo.W)(De=>(401===De.status&&F.navigate([Ba.S.HOME]),oe.error(function ds(Ie){switch(Ie.status){case 401:return"Please login again.";case 403:return"Access denied.";case 0:return"Network error. Please check your connection.";default:return"An unexpected error occurred."}}(De)),(0,Dc.$)(()=>De))))}])),(0,H.oKB)(da.tA),{provide:da.gq,useValue:fe.c.recaptchaSiteKey},(0,H.oKB)(te.q1,To.h.forRoot({defaultLanguage:"en",useDefaultLang:!0,loader:{provide:To.Wr,useFactory:function Gl(Ie){return new Tr(Ie,"./assets/i18n/",".json")},deps:[te.Qq]}}))]};var ir=M(4221);let il=(()=>{class Ie{constructor(F,oe){this.authService=F,this.themeService=oe,this.title="Kwalhia",this.recaptchaManager=(0,H.WQX)(Q.gZ),this.languageInit=(0,H.WQX)(Q.ov),this.keyManagerService=(0,H.WQX)(Q.o2),this.showRecaptchaBadge=(0,H.EWP)(()=>this.recaptchaManager.showBadge()),this.recaptchaManager.showBadge()||this.recaptchaManager.hideBadge()}ngOnInit(){this.themeService.initializeTheme(),this.languageInit.initializeLanguage(),this.keyManagerService.ensureKey().then(()=>{console.log("Encryption key ready")}),fe.c.production&&(window.productionLog("%cStop!","color: red; font-size: 40px; font-weight: bold; background-color: black; border-radius:30px; padding: 9px;"),window.productionLog("%c\n      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n      @@@@@@@@@@@@*             .@@@@@@@@@@@@@@\n      &@@@@@@@@@@@                  @@@@@@@@@@@@@\n      @@@@@@@@@.                      .@@@@@@@@@@@@@\n      @@%                               @@@@@@@@@@@@@@@@@/.\n                                            .@@@@@@@@@@@@@@@@@@@@@@@@@\n                     .@@@@@@@@@@@@@@@%\n               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.\n          &@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n       @@@@@@*    @@@@@@@@@@@@@@@@@@@@@@@@@       @@@@@@@@@.\n      @@@@@@        @@@@@@@@@@@@@@@@@@@@@@@@@            @@@@@@@@@&\n      &@@@@           @@@@@@@@@@@@@@@@@@@@@@@@@             .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n      @@@@              @@@@@@@@@@@@@@@@@@@@@@@           @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n      /@@@@@@@@@*           #@@@@@@@@@@@@@@@@@@@       &@@@@@@@@@.                      *&@@@@\n              (@@@@@@@@@@@&(.  @@@@@@@@@@@@@@@@@@@@@@@@@@@@\n                   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*\n                     @@@@@@@@@@@@@@@@@@@@%\n                     @@@@@@@@@   @@@@@@@@@@@\n                     @@@@@@@@*      @@@@@@@@@@@\n                    @@@@@@@@@          @@@@@@@@@@#                                .@@@@@@@@@\n                   @@@@@@@@@@              @@@@@@@@@@                            @@        #@@\n                  @@@@@@@@@@@                 .@@@@@@@@@/                        @@  @* @&  #@,\n                   @@@@@@@@@%                      @@@@@@@@@/                     @@   .@.   @&\n                    @@@@@@@@                           @@@@@@@@@@                           @@\n                     @@@@@@@                               *@@@@@@@@@%                     @@,\n                     (@@@@@@                                    &@@@@@@@@@%              @@@\n                      @@@@@@                                         .@@@@@@@@@@&    @@@@,\n                      .@@@@@                                                &@@@@@@@@@@@@@@@\n                       @@@@@                                                         .#@@@@@@@&.\n                        (@&","color:rgb(187, 177, 255); font-size: 1.2vh; line-height: 1.1; font-family: monospace; white-space: pre;"),window.productionLog("%c\u26a0\ufe0f Warning: This is a developer-only area. If anyone instructed you to paste code here, STOP! This is likely a scam attempt to steal your personal information or hack your account. Never paste code you dont fully understand into the developer console","font-size: 16px;")),console.log("App component started, on development")}static{this.\u0275fac=function(oe){return new(oe||Ie)(H.rXU(Q.uR),H.rXU(Q.Fs))}}static{this.\u0275cmp=H.VBU({type:Ie,selectors:[["app-root"]],standalone:!0,features:[H.aNF],decls:2,vars:2,template:function(oe,De){1&oe&&(H.j41(0,"div"),H.nrm(1,"router-outlet"),H.k0s()),2&oe&&H.AVh("hide-recaptcha",!De.showRecaptchaBadge())},dependencies:[h.n3,ir.UN],styles:[".hide-recaptcha[_ngcontent-%COMP%]   .grecaptcha-badge[_ngcontent-%COMP%]{visibility:hidden!important;opacity:0!important;transition:visibility 0s,opacity .5s linear}"]})}}return Ie})();const Ka=console.log;fe.c.production&&(console.log=function(){},console.warn=function(){},console.error=function(){},console.info=function(){},console.debug=function(){},window.productionLog=function(...Ie){Ka.apply(console,Ie)});const uc={...yn,providers:[...yn.providers||[],Hs(),(0,fr.DP)({timeOut:5e3,positionClass:"toast-bottom-right",preventDuplicates:!0,progressBar:!0})]};(0,l.B8)(il,uc).catch(Ie=>console.error(Ie))},917:function(Rt,Je,M){!function(l,H){"use strict";function h(le,x){if(!le)throw new Error(x||"Assertion failed")}function fe(le,x){le.super_=x;var C=function(){};C.prototype=x.prototype,le.prototype=new C,le.prototype.constructor=le}function X(le,x,C){if(X.isBN(le))return le;this.negative=0,this.words=null,this.length=0,this.red=null,null!==le&&(("le"===x||"be"===x)&&(C=x,x=10),this._init(le||0,x||10,C||"be"))}var ie;"object"==typeof l?l.exports=X:H.BN=X,X.BN=X,X.wordSize=26;try{ie=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:M(7790).Buffer}catch{}function de(le,x){var C=le.charCodeAt(x);return C>=65&&C<=70?C-55:C>=97&&C<=102?C-87:C-48&15}function Q(le,x,C){var j=de(le,C);return C-1>=x&&(j|=de(le,C-1)<<4),j}function z(le,x,C,j){for(var J=0,_e=Math.min(le.length,C),Ee=x;Ee<_e;Ee++){var Ve=le.charCodeAt(Ee)-48;J*=j,J+=Ve>=49?Ve-49+10:Ve>=17?Ve-17+10:Ve}return J}X.isBN=function(x){return x instanceof X||null!==x&&"object"==typeof x&&x.constructor.wordSize===X.wordSize&&Array.isArray(x.words)},X.max=function(x,C){return x.cmp(C)>0?x:C},X.min=function(x,C){return x.cmp(C)<0?x:C},X.prototype._init=function(x,C,j){if("number"==typeof x)return this._initNumber(x,C,j);if("object"==typeof x)return this._initArray(x,C,j);"hex"===C&&(C=16),h(C===(0|C)&&C>=2&&C<=36);var J=0;"-"===(x=x.toString().replace(/\s+/g,""))[0]&&(J++,this.negative=1),J<x.length&&(16===C?this._parseHex(x,J,j):(this._parseBase(x,C,J),"le"===j&&this._initArray(this.toArray(),C,j)))},X.prototype._initNumber=function(x,C,j){x<0&&(this.negative=1,x=-x),x<67108864?(this.words=[67108863&x],this.length=1):x<4503599627370496?(this.words=[67108863&x,x/67108864&67108863],this.length=2):(h(x<9007199254740992),this.words=[67108863&x,x/67108864&67108863,1],this.length=3),"le"===j&&this._initArray(this.toArray(),C,j)},X.prototype._initArray=function(x,C,j){if(h("number"==typeof x.length),x.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(x.length/3),this.words=new Array(this.length);for(var J=0;J<this.length;J++)this.words[J]=0;var _e,Ee,Ve=0;if("be"===j)for(J=x.length-1,_e=0;J>=0;J-=3)this.words[_e]|=(Ee=x[J]|x[J-1]<<8|x[J-2]<<16)<<Ve&67108863,this.words[_e+1]=Ee>>>26-Ve&67108863,(Ve+=24)>=26&&(Ve-=26,_e++);else if("le"===j)for(J=0,_e=0;J<x.length;J+=3)this.words[_e]|=(Ee=x[J]|x[J+1]<<8|x[J+2]<<16)<<Ve&67108863,this.words[_e+1]=Ee>>>26-Ve&67108863,(Ve+=24)>=26&&(Ve-=26,_e++);return this.strip()},X.prototype._parseHex=function(x,C,j){this.length=Math.ceil((x.length-C)/6),this.words=new Array(this.length);for(var J=0;J<this.length;J++)this.words[J]=0;var Ve,_e=0,Ee=0;if("be"===j)for(J=x.length-1;J>=C;J-=2)Ve=Q(x,C,J)<<_e,this.words[Ee]|=67108863&Ve,_e>=18?(_e-=18,this.words[Ee+=1]|=Ve>>>26):_e+=8;else for(J=(x.length-C)%2==0?C+1:C;J<x.length;J+=2)Ve=Q(x,C,J)<<_e,this.words[Ee]|=67108863&Ve,_e>=18?(_e-=18,this.words[Ee+=1]|=Ve>>>26):_e+=8;this.strip()},X.prototype._parseBase=function(x,C,j){this.words=[0],this.length=1;for(var J=0,_e=1;_e<=67108863;_e*=C)J++;J--,_e=_e/C|0;for(var Ee=x.length-j,Ve=Ee%J,Ne=Math.min(Ee,Ee-Ve)+j,V=0,Oe=j;Oe<Ne;Oe+=J)V=z(x,Oe,Oe+J,C),this.imuln(_e),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V);if(0!==Ve){var Ot=1;for(V=z(x,Oe,x.length,C),Oe=0;Oe<Ve;Oe++)Ot*=C;this.imuln(Ot),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V)}this.strip()},X.prototype.copy=function(x){x.words=new Array(this.length);for(var C=0;C<this.length;C++)x.words[C]=this.words[C];x.length=this.length,x.negative=this.negative,x.red=this.red},X.prototype.clone=function(){var x=new X(null);return this.copy(x),x},X.prototype._expand=function(x){for(;this.length<x;)this.words[this.length++]=0;return this},X.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},X.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},X.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var L=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],K=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function ee(le,x,C){C.negative=x.negative^le.negative;var j=le.length+x.length|0;C.length=j,j=j-1|0;var J=0|le.words[0],_e=0|x.words[0],Ee=J*_e,Ne=Ee/67108864|0;C.words[0]=67108863&Ee;for(var V=1;V<j;V++){for(var Oe=Ne>>>26,Ot=67108863&Ne,ot=Math.min(V,x.length-1),Ut=Math.max(0,V-le.length+1);Ut<=ot;Ut++)Oe+=(Ee=(J=0|le.words[V-Ut|0])*(_e=0|x.words[Ut])+Ot)/67108864|0,Ot=67108863&Ee;C.words[V]=0|Ot,Ne=0|Oe}return 0!==Ne?C.words[V]=0|Ne:C.length--,C.strip()}X.prototype.toString=function(x,C){var j;if(C=0|C||1,16===(x=x||10)||"hex"===x){j="";for(var J=0,_e=0,Ee=0;Ee<this.length;Ee++){var Ve=this.words[Ee],Ne=(16777215&(Ve<<J|_e)).toString(16);_e=Ve>>>24-J&16777215,(J+=2)>=26&&(J-=26,Ee--),j=0!==_e||Ee!==this.length-1?L[6-Ne.length]+Ne+j:Ne+j}for(0!==_e&&(j=_e.toString(16)+j);j.length%C!=0;)j="0"+j;return 0!==this.negative&&(j="-"+j),j}if(x===(0|x)&&x>=2&&x<=36){var V=I[x],Oe=K[x];j="";var Ot=this.clone();for(Ot.negative=0;!Ot.isZero();){var ot=Ot.modn(Oe).toString(x);j=(Ot=Ot.idivn(Oe)).isZero()?ot+j:L[V-ot.length]+ot+j}for(this.isZero()&&(j="0"+j);j.length%C!=0;)j="0"+j;return 0!==this.negative&&(j="-"+j),j}h(!1,"Base should be between 2 and 36")},X.prototype.toNumber=function(){var x=this.words[0];return 2===this.length?x+=67108864*this.words[1]:3===this.length&&1===this.words[2]?x+=4503599627370496+67108864*this.words[1]:this.length>2&&h(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-x:x},X.prototype.toJSON=function(){return this.toString(16)},X.prototype.toBuffer=function(x,C){return h(typeof ie<"u"),this.toArrayLike(ie,x,C)},X.prototype.toArray=function(x,C){return this.toArrayLike(Array,x,C)},X.prototype.toArrayLike=function(x,C,j){var J=this.byteLength(),_e=j||Math.max(1,J);h(J<=_e,"byte array longer than desired length"),h(_e>0,"Requested array length <= 0"),this.strip();var Ne,V,Ee="le"===C,Ve=new x(_e),Oe=this.clone();if(Ee){for(V=0;!Oe.isZero();V++)Ne=Oe.andln(255),Oe.iushrn(8),Ve[V]=Ne;for(;V<_e;V++)Ve[V]=0}else{for(V=0;V<_e-J;V++)Ve[V]=0;for(V=0;!Oe.isZero();V++)Ne=Oe.andln(255),Oe.iushrn(8),Ve[_e-V-1]=Ne}return Ve},X.prototype._countBits=Math.clz32?function(x){return 32-Math.clz32(x)}:function(x){var C=x,j=0;return C>=4096&&(j+=13,C>>>=13),C>=64&&(j+=7,C>>>=7),C>=8&&(j+=4,C>>>=4),C>=2&&(j+=2,C>>>=2),j+C},X.prototype._zeroBits=function(x){if(0===x)return 26;var C=x,j=0;return 8191&C||(j+=13,C>>>=13),127&C||(j+=7,C>>>=7),15&C||(j+=4,C>>>=4),3&C||(j+=2,C>>>=2),1&C||j++,j},X.prototype.bitLength=function(){var C=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+C},X.prototype.zeroBits=function(){if(this.isZero())return 0;for(var x=0,C=0;C<this.length;C++){var j=this._zeroBits(this.words[C]);if(x+=j,26!==j)break}return x},X.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},X.prototype.toTwos=function(x){return 0!==this.negative?this.abs().inotn(x).iaddn(1):this.clone()},X.prototype.fromTwos=function(x){return this.testn(x-1)?this.notn(x).iaddn(1).ineg():this.clone()},X.prototype.isNeg=function(){return 0!==this.negative},X.prototype.neg=function(){return this.clone().ineg()},X.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},X.prototype.iuor=function(x){for(;this.length<x.length;)this.words[this.length++]=0;for(var C=0;C<x.length;C++)this.words[C]=this.words[C]|x.words[C];return this.strip()},X.prototype.ior=function(x){return h(!(this.negative|x.negative)),this.iuor(x)},X.prototype.or=function(x){return this.length>x.length?this.clone().ior(x):x.clone().ior(this)},X.prototype.uor=function(x){return this.length>x.length?this.clone().iuor(x):x.clone().iuor(this)},X.prototype.iuand=function(x){var C;C=this.length>x.length?x:this;for(var j=0;j<C.length;j++)this.words[j]=this.words[j]&x.words[j];return this.length=C.length,this.strip()},X.prototype.iand=function(x){return h(!(this.negative|x.negative)),this.iuand(x)},X.prototype.and=function(x){return this.length>x.length?this.clone().iand(x):x.clone().iand(this)},X.prototype.uand=function(x){return this.length>x.length?this.clone().iuand(x):x.clone().iuand(this)},X.prototype.iuxor=function(x){var C,j;this.length>x.length?(C=this,j=x):(C=x,j=this);for(var J=0;J<j.length;J++)this.words[J]=C.words[J]^j.words[J];if(this!==C)for(;J<C.length;J++)this.words[J]=C.words[J];return this.length=C.length,this.strip()},X.prototype.ixor=function(x){return h(!(this.negative|x.negative)),this.iuxor(x)},X.prototype.xor=function(x){return this.length>x.length?this.clone().ixor(x):x.clone().ixor(this)},X.prototype.uxor=function(x){return this.length>x.length?this.clone().iuxor(x):x.clone().iuxor(this)},X.prototype.inotn=function(x){h("number"==typeof x&&x>=0);var C=0|Math.ceil(x/26),j=x%26;this._expand(C),j>0&&C--;for(var J=0;J<C;J++)this.words[J]=67108863&~this.words[J];return j>0&&(this.words[J]=~this.words[J]&67108863>>26-j),this.strip()},X.prototype.notn=function(x){return this.clone().inotn(x)},X.prototype.setn=function(x,C){h("number"==typeof x&&x>=0);var j=x/26|0,J=x%26;return this._expand(j+1),this.words[j]=C?this.words[j]|1<<J:this.words[j]&~(1<<J),this.strip()},X.prototype.iadd=function(x){var C,j,J;if(0!==this.negative&&0===x.negative)return this.negative=0,C=this.isub(x),this.negative^=1,this._normSign();if(0===this.negative&&0!==x.negative)return x.negative=0,C=this.isub(x),x.negative=1,C._normSign();this.length>x.length?(j=this,J=x):(j=x,J=this);for(var _e=0,Ee=0;Ee<J.length;Ee++)this.words[Ee]=67108863&(C=(0|j.words[Ee])+(0|J.words[Ee])+_e),_e=C>>>26;for(;0!==_e&&Ee<j.length;Ee++)this.words[Ee]=67108863&(C=(0|j.words[Ee])+_e),_e=C>>>26;if(this.length=j.length,0!==_e)this.words[this.length]=_e,this.length++;else if(j!==this)for(;Ee<j.length;Ee++)this.words[Ee]=j.words[Ee];return this},X.prototype.add=function(x){var C;return 0!==x.negative&&0===this.negative?(x.negative=0,C=this.sub(x),x.negative^=1,C):0===x.negative&&0!==this.negative?(this.negative=0,C=x.sub(this),this.negative=1,C):this.length>x.length?this.clone().iadd(x):x.clone().iadd(this)},X.prototype.isub=function(x){if(0!==x.negative){x.negative=0;var C=this.iadd(x);return x.negative=1,C._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(x),this.negative=1,this._normSign();var J,_e,j=this.cmp(x);if(0===j)return this.negative=0,this.length=1,this.words[0]=0,this;j>0?(J=this,_e=x):(J=x,_e=this);for(var Ee=0,Ve=0;Ve<_e.length;Ve++)Ee=(C=(0|J.words[Ve])-(0|_e.words[Ve])+Ee)>>26,this.words[Ve]=67108863&C;for(;0!==Ee&&Ve<J.length;Ve++)Ee=(C=(0|J.words[Ve])+Ee)>>26,this.words[Ve]=67108863&C;if(0===Ee&&Ve<J.length&&J!==this)for(;Ve<J.length;Ve++)this.words[Ve]=J.words[Ve];return this.length=Math.max(this.length,Ve),J!==this&&(this.negative=1),this.strip()},X.prototype.sub=function(x){return this.clone().isub(x)};var ue=function(x,C,j){var Ne,V,Oe,J=x.words,_e=C.words,Ee=j.words,Ve=0,Ot=0|J[0],ot=8191&Ot,Ut=Ot>>>13,ze=0|J[1],Mt=8191&ze,st=ze>>>13,je=0|J[2],yt=8191&je,Yt=je>>>13,dn=0|J[3],fn=8191&dn,Sn=dn>>>13,Gt=0|J[4],vn=8191&Gt,at=Gt>>>13,Dt=0|J[5],Tt=8191&Dt,un=Dt>>>13,Ln=0|J[6],Yn=8191&Ln,Vn=Ln>>>13,Yr=0|J[7],Gn=8191&Yr,An=Yr>>>13,ii=0|J[8],Si=8191&ii,$i=ii>>>13,Ri=0|J[9],Ki=8191&Ri,Pi=Ri>>>13,Ps=0|_e[0],ri=8191&Ps,qi=Ps>>>13,_r=0|_e[1],wi=8191&_r,Cr=_r>>>13,Wr=0|_e[2],Lr=8191&Wr,or=Wr>>>13,Bs=0|_e[3],Pr=8191&Bs,At=Bs>>>13,Ht=0|_e[4],rt=8191&Ht,xt=Ht>>>13,on=0|_e[5],mn=8191&on,Un=on>>>13,Qi=0|_e[6],si=8191&Qi,Oi=Qi>>>13,kr=0|_e[7],Pn=8191&kr,Hi=kr>>>13,Ds=0|_e[8],Ir=8191&Ds,yi=Ds>>>13,Cn=0|_e[9],qr=8191&Cn,yr=Cn>>>13;j.negative=x.negative^C.negative,j.length=19;var us=(Ve+(Ne=Math.imul(ot,ri))|0)+((8191&(V=(V=Math.imul(ot,qi))+Math.imul(Ut,ri)|0))<<13)|0;Ve=((Oe=Math.imul(Ut,qi))+(V>>>13)|0)+(us>>>26)|0,us&=67108863,Ne=Math.imul(Mt,ri),V=(V=Math.imul(Mt,qi))+Math.imul(st,ri)|0,Oe=Math.imul(st,qi);var ao=(Ve+(Ne=Ne+Math.imul(ot,wi)|0)|0)+((8191&(V=(V=V+Math.imul(ot,Cr)|0)+Math.imul(Ut,wi)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(Ut,Cr)|0)+(V>>>13)|0)+(ao>>>26)|0,ao&=67108863,Ne=Math.imul(yt,ri),V=(V=Math.imul(yt,qi))+Math.imul(Yt,ri)|0,Oe=Math.imul(Yt,qi),Ne=Ne+Math.imul(Mt,wi)|0,V=(V=V+Math.imul(Mt,Cr)|0)+Math.imul(st,wi)|0,Oe=Oe+Math.imul(st,Cr)|0;var ms=(Ve+(Ne=Ne+Math.imul(ot,Lr)|0)|0)+((8191&(V=(V=V+Math.imul(ot,or)|0)+Math.imul(Ut,Lr)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(Ut,or)|0)+(V>>>13)|0)+(ms>>>26)|0,ms&=67108863,Ne=Math.imul(fn,ri),V=(V=Math.imul(fn,qi))+Math.imul(Sn,ri)|0,Oe=Math.imul(Sn,qi),Ne=Ne+Math.imul(yt,wi)|0,V=(V=V+Math.imul(yt,Cr)|0)+Math.imul(Yt,wi)|0,Oe=Oe+Math.imul(Yt,Cr)|0,Ne=Ne+Math.imul(Mt,Lr)|0,V=(V=V+Math.imul(Mt,or)|0)+Math.imul(st,Lr)|0,Oe=Oe+Math.imul(st,or)|0;var sr=(Ve+(Ne=Ne+Math.imul(ot,Pr)|0)|0)+((8191&(V=(V=V+Math.imul(ot,At)|0)+Math.imul(Ut,Pr)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(Ut,At)|0)+(V>>>13)|0)+(sr>>>26)|0,sr&=67108863,Ne=Math.imul(vn,ri),V=(V=Math.imul(vn,qi))+Math.imul(at,ri)|0,Oe=Math.imul(at,qi),Ne=Ne+Math.imul(fn,wi)|0,V=(V=V+Math.imul(fn,Cr)|0)+Math.imul(Sn,wi)|0,Oe=Oe+Math.imul(Sn,Cr)|0,Ne=Ne+Math.imul(yt,Lr)|0,V=(V=V+Math.imul(yt,or)|0)+Math.imul(Yt,Lr)|0,Oe=Oe+Math.imul(Yt,or)|0,Ne=Ne+Math.imul(Mt,Pr)|0,V=(V=V+Math.imul(Mt,At)|0)+Math.imul(st,Pr)|0,Oe=Oe+Math.imul(st,At)|0;var Ms=(Ve+(Ne=Ne+Math.imul(ot,rt)|0)|0)+((8191&(V=(V=V+Math.imul(ot,xt)|0)+Math.imul(Ut,rt)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(Ut,xt)|0)+(V>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,Ne=Math.imul(Tt,ri),V=(V=Math.imul(Tt,qi))+Math.imul(un,ri)|0,Oe=Math.imul(un,qi),Ne=Ne+Math.imul(vn,wi)|0,V=(V=V+Math.imul(vn,Cr)|0)+Math.imul(at,wi)|0,Oe=Oe+Math.imul(at,Cr)|0,Ne=Ne+Math.imul(fn,Lr)|0,V=(V=V+Math.imul(fn,or)|0)+Math.imul(Sn,Lr)|0,Oe=Oe+Math.imul(Sn,or)|0,Ne=Ne+Math.imul(yt,Pr)|0,V=(V=V+Math.imul(yt,At)|0)+Math.imul(Yt,Pr)|0,Oe=Oe+Math.imul(Yt,At)|0,Ne=Ne+Math.imul(Mt,rt)|0,V=(V=V+Math.imul(Mt,xt)|0)+Math.imul(st,rt)|0,Oe=Oe+Math.imul(st,xt)|0;var to=(Ve+(Ne=Ne+Math.imul(ot,mn)|0)|0)+((8191&(V=(V=V+Math.imul(ot,Un)|0)+Math.imul(Ut,mn)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(Ut,Un)|0)+(V>>>13)|0)+(to>>>26)|0,to&=67108863,Ne=Math.imul(Yn,ri),V=(V=Math.imul(Yn,qi))+Math.imul(Vn,ri)|0,Oe=Math.imul(Vn,qi),Ne=Ne+Math.imul(Tt,wi)|0,V=(V=V+Math.imul(Tt,Cr)|0)+Math.imul(un,wi)|0,Oe=Oe+Math.imul(un,Cr)|0,Ne=Ne+Math.imul(vn,Lr)|0,V=(V=V+Math.imul(vn,or)|0)+Math.imul(at,Lr)|0,Oe=Oe+Math.imul(at,or)|0,Ne=Ne+Math.imul(fn,Pr)|0,V=(V=V+Math.imul(fn,At)|0)+Math.imul(Sn,Pr)|0,Oe=Oe+Math.imul(Sn,At)|0,Ne=Ne+Math.imul(yt,rt)|0,V=(V=V+Math.imul(yt,xt)|0)+Math.imul(Yt,rt)|0,Oe=Oe+Math.imul(Yt,xt)|0,Ne=Ne+Math.imul(Mt,mn)|0,V=(V=V+Math.imul(Mt,Un)|0)+Math.imul(st,mn)|0,Oe=Oe+Math.imul(st,Un)|0;var Os=(Ve+(Ne=Ne+Math.imul(ot,si)|0)|0)+((8191&(V=(V=V+Math.imul(ot,Oi)|0)+Math.imul(Ut,si)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(Ut,Oi)|0)+(V>>>13)|0)+(Os>>>26)|0,Os&=67108863,Ne=Math.imul(Gn,ri),V=(V=Math.imul(Gn,qi))+Math.imul(An,ri)|0,Oe=Math.imul(An,qi),Ne=Ne+Math.imul(Yn,wi)|0,V=(V=V+Math.imul(Yn,Cr)|0)+Math.imul(Vn,wi)|0,Oe=Oe+Math.imul(Vn,Cr)|0,Ne=Ne+Math.imul(Tt,Lr)|0,V=(V=V+Math.imul(Tt,or)|0)+Math.imul(un,Lr)|0,Oe=Oe+Math.imul(un,or)|0,Ne=Ne+Math.imul(vn,Pr)|0,V=(V=V+Math.imul(vn,At)|0)+Math.imul(at,Pr)|0,Oe=Oe+Math.imul(at,At)|0,Ne=Ne+Math.imul(fn,rt)|0,V=(V=V+Math.imul(fn,xt)|0)+Math.imul(Sn,rt)|0,Oe=Oe+Math.imul(Sn,xt)|0,Ne=Ne+Math.imul(yt,mn)|0,V=(V=V+Math.imul(yt,Un)|0)+Math.imul(Yt,mn)|0,Oe=Oe+Math.imul(Yt,Un)|0,Ne=Ne+Math.imul(Mt,si)|0,V=(V=V+Math.imul(Mt,Oi)|0)+Math.imul(st,si)|0,Oe=Oe+Math.imul(st,Oi)|0;var Fs=(Ve+(Ne=Ne+Math.imul(ot,Pn)|0)|0)+((8191&(V=(V=V+Math.imul(ot,Hi)|0)+Math.imul(Ut,Pn)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(Ut,Hi)|0)+(V>>>13)|0)+(Fs>>>26)|0,Fs&=67108863,Ne=Math.imul(Si,ri),V=(V=Math.imul(Si,qi))+Math.imul($i,ri)|0,Oe=Math.imul($i,qi),Ne=Ne+Math.imul(Gn,wi)|0,V=(V=V+Math.imul(Gn,Cr)|0)+Math.imul(An,wi)|0,Oe=Oe+Math.imul(An,Cr)|0,Ne=Ne+Math.imul(Yn,Lr)|0,V=(V=V+Math.imul(Yn,or)|0)+Math.imul(Vn,Lr)|0,Oe=Oe+Math.imul(Vn,or)|0,Ne=Ne+Math.imul(Tt,Pr)|0,V=(V=V+Math.imul(Tt,At)|0)+Math.imul(un,Pr)|0,Oe=Oe+Math.imul(un,At)|0,Ne=Ne+Math.imul(vn,rt)|0,V=(V=V+Math.imul(vn,xt)|0)+Math.imul(at,rt)|0,Oe=Oe+Math.imul(at,xt)|0,Ne=Ne+Math.imul(fn,mn)|0,V=(V=V+Math.imul(fn,Un)|0)+Math.imul(Sn,mn)|0,Oe=Oe+Math.imul(Sn,Un)|0,Ne=Ne+Math.imul(yt,si)|0,V=(V=V+Math.imul(yt,Oi)|0)+Math.imul(Yt,si)|0,Oe=Oe+Math.imul(Yt,Oi)|0,Ne=Ne+Math.imul(Mt,Pn)|0,V=(V=V+Math.imul(Mt,Hi)|0)+Math.imul(st,Pn)|0,Oe=Oe+Math.imul(st,Hi)|0;var lo=(Ve+(Ne=Ne+Math.imul(ot,Ir)|0)|0)+((8191&(V=(V=V+Math.imul(ot,yi)|0)+Math.imul(Ut,Ir)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(Ut,yi)|0)+(V>>>13)|0)+(lo>>>26)|0,lo&=67108863,Ne=Math.imul(Ki,ri),V=(V=Math.imul(Ki,qi))+Math.imul(Pi,ri)|0,Oe=Math.imul(Pi,qi),Ne=Ne+Math.imul(Si,wi)|0,V=(V=V+Math.imul(Si,Cr)|0)+Math.imul($i,wi)|0,Oe=Oe+Math.imul($i,Cr)|0,Ne=Ne+Math.imul(Gn,Lr)|0,V=(V=V+Math.imul(Gn,or)|0)+Math.imul(An,Lr)|0,Oe=Oe+Math.imul(An,or)|0,Ne=Ne+Math.imul(Yn,Pr)|0,V=(V=V+Math.imul(Yn,At)|0)+Math.imul(Vn,Pr)|0,Oe=Oe+Math.imul(Vn,At)|0,Ne=Ne+Math.imul(Tt,rt)|0,V=(V=V+Math.imul(Tt,xt)|0)+Math.imul(un,rt)|0,Oe=Oe+Math.imul(un,xt)|0,Ne=Ne+Math.imul(vn,mn)|0,V=(V=V+Math.imul(vn,Un)|0)+Math.imul(at,mn)|0,Oe=Oe+Math.imul(at,Un)|0,Ne=Ne+Math.imul(fn,si)|0,V=(V=V+Math.imul(fn,Oi)|0)+Math.imul(Sn,si)|0,Oe=Oe+Math.imul(Sn,Oi)|0,Ne=Ne+Math.imul(yt,Pn)|0,V=(V=V+Math.imul(yt,Hi)|0)+Math.imul(Yt,Pn)|0,Oe=Oe+Math.imul(Yt,Hi)|0,Ne=Ne+Math.imul(Mt,Ir)|0,V=(V=V+Math.imul(Mt,yi)|0)+Math.imul(st,Ir)|0,Oe=Oe+Math.imul(st,yi)|0;var Go=(Ve+(Ne=Ne+Math.imul(ot,qr)|0)|0)+((8191&(V=(V=V+Math.imul(ot,yr)|0)+Math.imul(Ut,qr)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(Ut,yr)|0)+(V>>>13)|0)+(Go>>>26)|0,Go&=67108863,Ne=Math.imul(Ki,wi),V=(V=Math.imul(Ki,Cr))+Math.imul(Pi,wi)|0,Oe=Math.imul(Pi,Cr),Ne=Ne+Math.imul(Si,Lr)|0,V=(V=V+Math.imul(Si,or)|0)+Math.imul($i,Lr)|0,Oe=Oe+Math.imul($i,or)|0,Ne=Ne+Math.imul(Gn,Pr)|0,V=(V=V+Math.imul(Gn,At)|0)+Math.imul(An,Pr)|0,Oe=Oe+Math.imul(An,At)|0,Ne=Ne+Math.imul(Yn,rt)|0,V=(V=V+Math.imul(Yn,xt)|0)+Math.imul(Vn,rt)|0,Oe=Oe+Math.imul(Vn,xt)|0,Ne=Ne+Math.imul(Tt,mn)|0,V=(V=V+Math.imul(Tt,Un)|0)+Math.imul(un,mn)|0,Oe=Oe+Math.imul(un,Un)|0,Ne=Ne+Math.imul(vn,si)|0,V=(V=V+Math.imul(vn,Oi)|0)+Math.imul(at,si)|0,Oe=Oe+Math.imul(at,Oi)|0,Ne=Ne+Math.imul(fn,Pn)|0,V=(V=V+Math.imul(fn,Hi)|0)+Math.imul(Sn,Pn)|0,Oe=Oe+Math.imul(Sn,Hi)|0,Ne=Ne+Math.imul(yt,Ir)|0,V=(V=V+Math.imul(yt,yi)|0)+Math.imul(Yt,Ir)|0,Oe=Oe+Math.imul(Yt,yi)|0;var Ye=(Ve+(Ne=Ne+Math.imul(Mt,qr)|0)|0)+((8191&(V=(V=V+Math.imul(Mt,yr)|0)+Math.imul(st,qr)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(st,yr)|0)+(V>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,Ne=Math.imul(Ki,Lr),V=(V=Math.imul(Ki,or))+Math.imul(Pi,Lr)|0,Oe=Math.imul(Pi,or),Ne=Ne+Math.imul(Si,Pr)|0,V=(V=V+Math.imul(Si,At)|0)+Math.imul($i,Pr)|0,Oe=Oe+Math.imul($i,At)|0,Ne=Ne+Math.imul(Gn,rt)|0,V=(V=V+Math.imul(Gn,xt)|0)+Math.imul(An,rt)|0,Oe=Oe+Math.imul(An,xt)|0,Ne=Ne+Math.imul(Yn,mn)|0,V=(V=V+Math.imul(Yn,Un)|0)+Math.imul(Vn,mn)|0,Oe=Oe+Math.imul(Vn,Un)|0,Ne=Ne+Math.imul(Tt,si)|0,V=(V=V+Math.imul(Tt,Oi)|0)+Math.imul(un,si)|0,Oe=Oe+Math.imul(un,Oi)|0,Ne=Ne+Math.imul(vn,Pn)|0,V=(V=V+Math.imul(vn,Hi)|0)+Math.imul(at,Pn)|0,Oe=Oe+Math.imul(at,Hi)|0,Ne=Ne+Math.imul(fn,Ir)|0,V=(V=V+Math.imul(fn,yi)|0)+Math.imul(Sn,Ir)|0,Oe=Oe+Math.imul(Sn,yi)|0;var O=(Ve+(Ne=Ne+Math.imul(yt,qr)|0)|0)+((8191&(V=(V=V+Math.imul(yt,yr)|0)+Math.imul(Yt,qr)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(Yt,yr)|0)+(V>>>13)|0)+(O>>>26)|0,O&=67108863,Ne=Math.imul(Ki,Pr),V=(V=Math.imul(Ki,At))+Math.imul(Pi,Pr)|0,Oe=Math.imul(Pi,At),Ne=Ne+Math.imul(Si,rt)|0,V=(V=V+Math.imul(Si,xt)|0)+Math.imul($i,rt)|0,Oe=Oe+Math.imul($i,xt)|0,Ne=Ne+Math.imul(Gn,mn)|0,V=(V=V+Math.imul(Gn,Un)|0)+Math.imul(An,mn)|0,Oe=Oe+Math.imul(An,Un)|0,Ne=Ne+Math.imul(Yn,si)|0,V=(V=V+Math.imul(Yn,Oi)|0)+Math.imul(Vn,si)|0,Oe=Oe+Math.imul(Vn,Oi)|0,Ne=Ne+Math.imul(Tt,Pn)|0,V=(V=V+Math.imul(Tt,Hi)|0)+Math.imul(un,Pn)|0,Oe=Oe+Math.imul(un,Hi)|0,Ne=Ne+Math.imul(vn,Ir)|0,V=(V=V+Math.imul(vn,yi)|0)+Math.imul(at,Ir)|0,Oe=Oe+Math.imul(at,yi)|0;var G=(Ve+(Ne=Ne+Math.imul(fn,qr)|0)|0)+((8191&(V=(V=V+Math.imul(fn,yr)|0)+Math.imul(Sn,qr)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(Sn,yr)|0)+(V>>>13)|0)+(G>>>26)|0,G&=67108863,Ne=Math.imul(Ki,rt),V=(V=Math.imul(Ki,xt))+Math.imul(Pi,rt)|0,Oe=Math.imul(Pi,xt),Ne=Ne+Math.imul(Si,mn)|0,V=(V=V+Math.imul(Si,Un)|0)+Math.imul($i,mn)|0,Oe=Oe+Math.imul($i,Un)|0,Ne=Ne+Math.imul(Gn,si)|0,V=(V=V+Math.imul(Gn,Oi)|0)+Math.imul(An,si)|0,Oe=Oe+Math.imul(An,Oi)|0,Ne=Ne+Math.imul(Yn,Pn)|0,V=(V=V+Math.imul(Yn,Hi)|0)+Math.imul(Vn,Pn)|0,Oe=Oe+Math.imul(Vn,Hi)|0,Ne=Ne+Math.imul(Tt,Ir)|0,V=(V=V+Math.imul(Tt,yi)|0)+Math.imul(un,Ir)|0,Oe=Oe+Math.imul(un,yi)|0;var ce=(Ve+(Ne=Ne+Math.imul(vn,qr)|0)|0)+((8191&(V=(V=V+Math.imul(vn,yr)|0)+Math.imul(at,qr)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(at,yr)|0)+(V>>>13)|0)+(ce>>>26)|0,ce&=67108863,Ne=Math.imul(Ki,mn),V=(V=Math.imul(Ki,Un))+Math.imul(Pi,mn)|0,Oe=Math.imul(Pi,Un),Ne=Ne+Math.imul(Si,si)|0,V=(V=V+Math.imul(Si,Oi)|0)+Math.imul($i,si)|0,Oe=Oe+Math.imul($i,Oi)|0,Ne=Ne+Math.imul(Gn,Pn)|0,V=(V=V+Math.imul(Gn,Hi)|0)+Math.imul(An,Pn)|0,Oe=Oe+Math.imul(An,Hi)|0,Ne=Ne+Math.imul(Yn,Ir)|0,V=(V=V+Math.imul(Yn,yi)|0)+Math.imul(Vn,Ir)|0,Oe=Oe+Math.imul(Vn,yi)|0;var qe=(Ve+(Ne=Ne+Math.imul(Tt,qr)|0)|0)+((8191&(V=(V=V+Math.imul(Tt,yr)|0)+Math.imul(un,qr)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(un,yr)|0)+(V>>>13)|0)+(qe>>>26)|0,qe&=67108863,Ne=Math.imul(Ki,si),V=(V=Math.imul(Ki,Oi))+Math.imul(Pi,si)|0,Oe=Math.imul(Pi,Oi),Ne=Ne+Math.imul(Si,Pn)|0,V=(V=V+Math.imul(Si,Hi)|0)+Math.imul($i,Pn)|0,Oe=Oe+Math.imul($i,Hi)|0,Ne=Ne+Math.imul(Gn,Ir)|0,V=(V=V+Math.imul(Gn,yi)|0)+Math.imul(An,Ir)|0,Oe=Oe+Math.imul(An,yi)|0;var ht=(Ve+(Ne=Ne+Math.imul(Yn,qr)|0)|0)+((8191&(V=(V=V+Math.imul(Yn,yr)|0)+Math.imul(Vn,qr)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(Vn,yr)|0)+(V>>>13)|0)+(ht>>>26)|0,ht&=67108863,Ne=Math.imul(Ki,Pn),V=(V=Math.imul(Ki,Hi))+Math.imul(Pi,Pn)|0,Oe=Math.imul(Pi,Hi),Ne=Ne+Math.imul(Si,Ir)|0,V=(V=V+Math.imul(Si,yi)|0)+Math.imul($i,Ir)|0,Oe=Oe+Math.imul($i,yi)|0;var tn=(Ve+(Ne=Ne+Math.imul(Gn,qr)|0)|0)+((8191&(V=(V=V+Math.imul(Gn,yr)|0)+Math.imul(An,qr)|0))<<13)|0;Ve=((Oe=Oe+Math.imul(An,yr)|0)+(V>>>13)|0)+(tn>>>26)|0,tn&=67108863,Ne=Math.imul(Ki,Ir),V=(V=Math.imul(Ki,yi))+Math.imul(Pi,Ir)|0,Oe=Math.imul(Pi,yi);var hn=(Ve+(Ne=Ne+Math.imul(Si,qr)|0)|0)+((8191&(V=(V=V+Math.imul(Si,yr)|0)+Math.imul($i,qr)|0))<<13)|0;Ve=((Oe=Oe+Math.imul($i,yr)|0)+(V>>>13)|0)+(hn>>>26)|0,hn&=67108863;var zn=(Ve+(Ne=Math.imul(Ki,qr))|0)+((8191&(V=(V=Math.imul(Ki,yr))+Math.imul(Pi,qr)|0))<<13)|0;return Ve=((Oe=Math.imul(Pi,yr))+(V>>>13)|0)+(zn>>>26)|0,zn&=67108863,Ee[0]=us,Ee[1]=ao,Ee[2]=ms,Ee[3]=sr,Ee[4]=Ms,Ee[5]=to,Ee[6]=Os,Ee[7]=Fs,Ee[8]=lo,Ee[9]=Go,Ee[10]=Ye,Ee[11]=O,Ee[12]=G,Ee[13]=ce,Ee[14]=qe,Ee[15]=ht,Ee[16]=tn,Ee[17]=hn,Ee[18]=zn,0!==Ve&&(Ee[19]=Ve,j.length++),j};function Re(le,x,C){return(new ye).mulp(le,x,C)}function ye(le,x){this.x=le,this.y=x}Math.imul||(ue=ee),X.prototype.mulTo=function(x,C){var j,J=this.length+x.length;return j=10===this.length&&10===x.length?ue(this,x,C):J<63?ee(this,x,C):J<1024?function Ce(le,x,C){C.negative=x.negative^le.negative,C.length=le.length+x.length;for(var j=0,J=0,_e=0;_e<C.length-1;_e++){var Ee=J;J=0;for(var Ve=67108863&j,Ne=Math.min(_e,x.length-1),V=Math.max(0,_e-le.length+1);V<=Ne;V++){var Ut=(0|le.words[_e-V])*(0|x.words[V]),ze=67108863&Ut;Ve=67108863&(ze=ze+Ve|0),J+=(Ee=(Ee=Ee+(Ut/67108864|0)|0)+(ze>>>26)|0)>>>26,Ee&=67108863}C.words[_e]=Ve,j=Ee,Ee=J}return 0!==j?C.words[_e]=j:C.length--,C.strip()}(this,x,C):Re(this,x,C),j},ye.prototype.makeRBT=function(x){for(var C=new Array(x),j=X.prototype._countBits(x)-1,J=0;J<x;J++)C[J]=this.revBin(J,j,x);return C},ye.prototype.revBin=function(x,C,j){if(0===x||x===j-1)return x;for(var J=0,_e=0;_e<C;_e++)J|=(1&x)<<C-_e-1,x>>=1;return J},ye.prototype.permute=function(x,C,j,J,_e,Ee){for(var Ve=0;Ve<Ee;Ve++)J[Ve]=C[x[Ve]],_e[Ve]=j[x[Ve]]},ye.prototype.transform=function(x,C,j,J,_e,Ee){this.permute(Ee,x,C,j,J,_e);for(var Ve=1;Ve<_e;Ve<<=1)for(var Ne=Ve<<1,V=Math.cos(2*Math.PI/Ne),Oe=Math.sin(2*Math.PI/Ne),Ot=0;Ot<_e;Ot+=Ne)for(var ot=V,Ut=Oe,ze=0;ze<Ve;ze++){var Mt=j[Ot+ze],st=J[Ot+ze],je=j[Ot+ze+Ve],yt=J[Ot+ze+Ve],Yt=ot*je-Ut*yt;yt=ot*yt+Ut*je,j[Ot+ze]=Mt+(je=Yt),J[Ot+ze]=st+yt,j[Ot+ze+Ve]=Mt-je,J[Ot+ze+Ve]=st-yt,ze!==Ne&&(Yt=V*ot-Oe*Ut,Ut=V*Ut+Oe*ot,ot=Yt)}},ye.prototype.guessLen13b=function(x,C){var j=1|Math.max(C,x),J=1&j,_e=0;for(j=j/2|0;j;j>>>=1)_e++;return 1<<_e+1+J},ye.prototype.conjugate=function(x,C,j){if(!(j<=1))for(var J=0;J<j/2;J++){var _e=x[J];x[J]=x[j-J-1],x[j-J-1]=_e,_e=C[J],C[J]=-C[j-J-1],C[j-J-1]=-_e}},ye.prototype.normalize13b=function(x,C){for(var j=0,J=0;J<C/2;J++){var _e=8192*Math.round(x[2*J+1]/C)+Math.round(x[2*J]/C)+j;x[J]=67108863&_e,j=_e<67108864?0:_e/67108864|0}return x},ye.prototype.convert13b=function(x,C,j,J){for(var _e=0,Ee=0;Ee<C;Ee++)j[2*Ee]=8191&(_e+=0|x[Ee]),j[2*Ee+1]=8191&(_e>>>=13),_e>>>=13;for(Ee=2*C;Ee<J;++Ee)j[Ee]=0;h(0===_e),h(!(-8192&_e))},ye.prototype.stub=function(x){for(var C=new Array(x),j=0;j<x;j++)C[j]=0;return C},ye.prototype.mulp=function(x,C,j){var J=2*this.guessLen13b(x.length,C.length),_e=this.makeRBT(J),Ee=this.stub(J),Ve=new Array(J),Ne=new Array(J),V=new Array(J),Oe=new Array(J),Ot=new Array(J),ot=new Array(J),Ut=j.words;Ut.length=J,this.convert13b(x.words,x.length,Ve,J),this.convert13b(C.words,C.length,Oe,J),this.transform(Ve,Ee,Ne,V,J,_e),this.transform(Oe,Ee,Ot,ot,J,_e);for(var ze=0;ze<J;ze++){var Mt=Ne[ze]*Ot[ze]-V[ze]*ot[ze];V[ze]=Ne[ze]*ot[ze]+V[ze]*Ot[ze],Ne[ze]=Mt}return this.conjugate(Ne,V,J),this.transform(Ne,V,Ut,Ee,J,_e),this.conjugate(Ut,Ee,J),this.normalize13b(Ut,J),j.negative=x.negative^C.negative,j.length=x.length+C.length,j.strip()},X.prototype.mul=function(x){var C=new X(null);return C.words=new Array(this.length+x.length),this.mulTo(x,C)},X.prototype.mulf=function(x){var C=new X(null);return C.words=new Array(this.length+x.length),Re(this,x,C)},X.prototype.imul=function(x){return this.clone().mulTo(x,this)},X.prototype.imuln=function(x){h("number"==typeof x),h(x<67108864);for(var C=0,j=0;j<this.length;j++){var J=(0|this.words[j])*x,_e=(67108863&J)+(67108863&C);C>>=26,C+=J/67108864|0,C+=_e>>>26,this.words[j]=67108863&_e}return 0!==C&&(this.words[j]=C,this.length++),this},X.prototype.muln=function(x){return this.clone().imuln(x)},X.prototype.sqr=function(){return this.mul(this)},X.prototype.isqr=function(){return this.imul(this.clone())},X.prototype.pow=function(x){var C=function te(le){for(var x=new Array(le.bitLength()),C=0;C<x.length;C++){var J=C%26;x[C]=(le.words[C/26|0]&1<<J)>>>J}return x}(x);if(0===C.length)return new X(1);for(var j=this,J=0;J<C.length&&0===C[J];J++,j=j.sqr());if(++J<C.length)for(var _e=j.sqr();J<C.length;J++,_e=_e.sqr())0!==C[J]&&(j=j.mul(_e));return j},X.prototype.iushln=function(x){h("number"==typeof x&&x>=0);var _e,C=x%26,j=(x-C)/26,J=67108863>>>26-C<<26-C;if(0!==C){var Ee=0;for(_e=0;_e<this.length;_e++){var Ve=this.words[_e]&J;this.words[_e]=(0|this.words[_e])-Ve<<C|Ee,Ee=Ve>>>26-C}Ee&&(this.words[_e]=Ee,this.length++)}if(0!==j){for(_e=this.length-1;_e>=0;_e--)this.words[_e+j]=this.words[_e];for(_e=0;_e<j;_e++)this.words[_e]=0;this.length+=j}return this.strip()},X.prototype.ishln=function(x){return h(0===this.negative),this.iushln(x)},X.prototype.iushrn=function(x,C,j){var J;h("number"==typeof x&&x>=0),J=C?(C-C%26)/26:0;var _e=x%26,Ee=Math.min((x-_e)/26,this.length),Ve=67108863^67108863>>>_e<<_e,Ne=j;if(J-=Ee,J=Math.max(0,J),Ne){for(var V=0;V<Ee;V++)Ne.words[V]=this.words[V];Ne.length=Ee}if(0!==Ee)if(this.length>Ee)for(this.length-=Ee,V=0;V<this.length;V++)this.words[V]=this.words[V+Ee];else this.words[0]=0,this.length=1;var Oe=0;for(V=this.length-1;V>=0&&(0!==Oe||V>=J);V--){var Ot=0|this.words[V];this.words[V]=Oe<<26-_e|Ot>>>_e,Oe=Ot&Ve}return Ne&&0!==Oe&&(Ne.words[Ne.length++]=Oe),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},X.prototype.ishrn=function(x,C,j){return h(0===this.negative),this.iushrn(x,C,j)},X.prototype.shln=function(x){return this.clone().ishln(x)},X.prototype.ushln=function(x){return this.clone().iushln(x)},X.prototype.shrn=function(x){return this.clone().ishrn(x)},X.prototype.ushrn=function(x){return this.clone().iushrn(x)},X.prototype.testn=function(x){h("number"==typeof x&&x>=0);var C=x%26,j=(x-C)/26;return!(this.length<=j||!(this.words[j]&1<<C))},X.prototype.imaskn=function(x){h("number"==typeof x&&x>=0);var C=x%26,j=(x-C)/26;return h(0===this.negative,"imaskn works only with positive numbers"),this.length<=j?this:(0!==C&&j++,this.length=Math.min(j,this.length),0!==C&&(this.words[this.length-1]&=67108863^67108863>>>C<<C),this.strip())},X.prototype.maskn=function(x){return this.clone().imaskn(x)},X.prototype.iaddn=function(x){return h("number"==typeof x),h(x<67108864),x<0?this.isubn(-x):0!==this.negative?1===this.length&&(0|this.words[0])<x?(this.words[0]=x-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(x),this.negative=1,this):this._iaddn(x)},X.prototype._iaddn=function(x){this.words[0]+=x;for(var C=0;C<this.length&&this.words[C]>=67108864;C++)this.words[C]-=67108864,C===this.length-1?this.words[C+1]=1:this.words[C+1]++;return this.length=Math.max(this.length,C+1),this},X.prototype.isubn=function(x){if(h("number"==typeof x),h(x<67108864),x<0)return this.iaddn(-x);if(0!==this.negative)return this.negative=0,this.iaddn(x),this.negative=1,this;if(this.words[0]-=x,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var C=0;C<this.length&&this.words[C]<0;C++)this.words[C]+=67108864,this.words[C+1]-=1;return this.strip()},X.prototype.addn=function(x){return this.clone().iaddn(x)},X.prototype.subn=function(x){return this.clone().isubn(x)},X.prototype.iabs=function(){return this.negative=0,this},X.prototype.abs=function(){return this.clone().iabs()},X.prototype._ishlnsubmul=function(x,C,j){var _e;this._expand(x.length+j);var Ee,Ve=0;for(_e=0;_e<x.length;_e++){Ee=(0|this.words[_e+j])+Ve;var Ne=(0|x.words[_e])*C;Ve=((Ee-=67108863&Ne)>>26)-(Ne/67108864|0),this.words[_e+j]=67108863&Ee}for(;_e<this.length-j;_e++)Ve=(Ee=(0|this.words[_e+j])+Ve)>>26,this.words[_e+j]=67108863&Ee;if(0===Ve)return this.strip();for(h(-1===Ve),Ve=0,_e=0;_e<this.length;_e++)Ve=(Ee=-(0|this.words[_e])+Ve)>>26,this.words[_e]=67108863&Ee;return this.negative=1,this.strip()},X.prototype._wordDiv=function(x,C){var j,J=this.clone(),_e=x,Ee=0|_e.words[_e.length-1];0!=(j=26-this._countBits(Ee))&&(_e=_e.ushln(j),J.iushln(j),Ee=0|_e.words[_e.length-1]);var V,Ne=J.length-_e.length;if("mod"!==C){(V=new X(null)).length=Ne+1,V.words=new Array(V.length);for(var Oe=0;Oe<V.length;Oe++)V.words[Oe]=0}var Ot=J.clone()._ishlnsubmul(_e,1,Ne);0===Ot.negative&&(J=Ot,V&&(V.words[Ne]=1));for(var ot=Ne-1;ot>=0;ot--){var Ut=67108864*(0|J.words[_e.length+ot])+(0|J.words[_e.length+ot-1]);for(Ut=Math.min(Ut/Ee|0,67108863),J._ishlnsubmul(_e,Ut,ot);0!==J.negative;)Ut--,J.negative=0,J._ishlnsubmul(_e,1,ot),J.isZero()||(J.negative^=1);V&&(V.words[ot]=Ut)}return V&&V.strip(),J.strip(),"div"!==C&&0!==j&&J.iushrn(j),{div:V||null,mod:J}},X.prototype.divmod=function(x,C,j){return h(!x.isZero()),this.isZero()?{div:new X(0),mod:new X(0)}:0!==this.negative&&0===x.negative?(Ee=this.neg().divmod(x,C),"mod"!==C&&(J=Ee.div.neg()),"div"!==C&&(_e=Ee.mod.neg(),j&&0!==_e.negative&&_e.iadd(x)),{div:J,mod:_e}):0===this.negative&&0!==x.negative?(Ee=this.divmod(x.neg(),C),"mod"!==C&&(J=Ee.div.neg()),{div:J,mod:Ee.mod}):this.negative&x.negative?(Ee=this.neg().divmod(x.neg(),C),"div"!==C&&(_e=Ee.mod.neg(),j&&0!==_e.negative&&_e.isub(x)),{div:Ee.div,mod:_e}):x.length>this.length||this.cmp(x)<0?{div:new X(0),mod:this}:1===x.length?"div"===C?{div:this.divn(x.words[0]),mod:null}:"mod"===C?{div:null,mod:new X(this.modn(x.words[0]))}:{div:this.divn(x.words[0]),mod:new X(this.modn(x.words[0]))}:this._wordDiv(x,C);var J,_e,Ee},X.prototype.div=function(x){return this.divmod(x,"div",!1).div},X.prototype.mod=function(x){return this.divmod(x,"mod",!1).mod},X.prototype.umod=function(x){return this.divmod(x,"mod",!0).mod},X.prototype.divRound=function(x){var C=this.divmod(x);if(C.mod.isZero())return C.div;var j=0!==C.div.negative?C.mod.isub(x):C.mod,J=x.ushrn(1),_e=x.andln(1),Ee=j.cmp(J);return Ee<0||1===_e&&0===Ee?C.div:0!==C.div.negative?C.div.isubn(1):C.div.iaddn(1)},X.prototype.modn=function(x){h(x<=67108863);for(var C=(1<<26)%x,j=0,J=this.length-1;J>=0;J--)j=(C*j+(0|this.words[J]))%x;return j},X.prototype.idivn=function(x){h(x<=67108863);for(var C=0,j=this.length-1;j>=0;j--){var J=(0|this.words[j])+67108864*C;this.words[j]=J/x|0,C=J%x}return this.strip()},X.prototype.divn=function(x){return this.clone().idivn(x)},X.prototype.egcd=function(x){h(0===x.negative),h(!x.isZero());var C=this,j=x.clone();C=0!==C.negative?C.umod(x):C.clone();for(var J=new X(1),_e=new X(0),Ee=new X(0),Ve=new X(1),Ne=0;C.isEven()&&j.isEven();)C.iushrn(1),j.iushrn(1),++Ne;for(var V=j.clone(),Oe=C.clone();!C.isZero();){for(var Ot=0,ot=1;!(C.words[0]&ot)&&Ot<26;++Ot,ot<<=1);if(Ot>0)for(C.iushrn(Ot);Ot-- >0;)(J.isOdd()||_e.isOdd())&&(J.iadd(V),_e.isub(Oe)),J.iushrn(1),_e.iushrn(1);for(var Ut=0,ze=1;!(j.words[0]&ze)&&Ut<26;++Ut,ze<<=1);if(Ut>0)for(j.iushrn(Ut);Ut-- >0;)(Ee.isOdd()||Ve.isOdd())&&(Ee.iadd(V),Ve.isub(Oe)),Ee.iushrn(1),Ve.iushrn(1);C.cmp(j)>=0?(C.isub(j),J.isub(Ee),_e.isub(Ve)):(j.isub(C),Ee.isub(J),Ve.isub(_e))}return{a:Ee,b:Ve,gcd:j.iushln(Ne)}},X.prototype._invmp=function(x){h(0===x.negative),h(!x.isZero());var Ot,C=this,j=x.clone();C=0!==C.negative?C.umod(x):C.clone();for(var J=new X(1),_e=new X(0),Ee=j.clone();C.cmpn(1)>0&&j.cmpn(1)>0;){for(var Ve=0,Ne=1;!(C.words[0]&Ne)&&Ve<26;++Ve,Ne<<=1);if(Ve>0)for(C.iushrn(Ve);Ve-- >0;)J.isOdd()&&J.iadd(Ee),J.iushrn(1);for(var V=0,Oe=1;!(j.words[0]&Oe)&&V<26;++V,Oe<<=1);if(V>0)for(j.iushrn(V);V-- >0;)_e.isOdd()&&_e.iadd(Ee),_e.iushrn(1);C.cmp(j)>=0?(C.isub(j),J.isub(_e)):(j.isub(C),_e.isub(J))}return(Ot=0===C.cmpn(1)?J:_e).cmpn(0)<0&&Ot.iadd(x),Ot},X.prototype.gcd=function(x){if(this.isZero())return x.abs();if(x.isZero())return this.abs();var C=this.clone(),j=x.clone();C.negative=0,j.negative=0;for(var J=0;C.isEven()&&j.isEven();J++)C.iushrn(1),j.iushrn(1);for(;;){for(;C.isEven();)C.iushrn(1);for(;j.isEven();)j.iushrn(1);var _e=C.cmp(j);if(_e<0){var Ee=C;C=j,j=Ee}else if(0===_e||0===j.cmpn(1))break;C.isub(j)}return j.iushln(J)},X.prototype.invm=function(x){return this.egcd(x).a.umod(x)},X.prototype.isEven=function(){return!(1&this.words[0])},X.prototype.isOdd=function(){return!(1&~this.words[0])},X.prototype.andln=function(x){return this.words[0]&x},X.prototype.bincn=function(x){h("number"==typeof x);var C=x%26,j=(x-C)/26,J=1<<C;if(this.length<=j)return this._expand(j+1),this.words[j]|=J,this;for(var _e=J,Ee=j;0!==_e&&Ee<this.length;Ee++){var Ve=0|this.words[Ee];_e=(Ve+=_e)>>>26,this.words[Ee]=Ve&=67108863}return 0!==_e&&(this.words[Ee]=_e,this.length++),this},X.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},X.prototype.cmpn=function(x){var j,C=x<0;if(0!==this.negative&&!C)return-1;if(0===this.negative&&C)return 1;if(this.strip(),this.length>1)j=1;else{C&&(x=-x),h(x<=67108863,"Number is too big");var J=0|this.words[0];j=J===x?0:J<x?-1:1}return 0!==this.negative?0|-j:j},X.prototype.cmp=function(x){if(0!==this.negative&&0===x.negative)return-1;if(0===this.negative&&0!==x.negative)return 1;var C=this.ucmp(x);return 0!==this.negative?0|-C:C},X.prototype.ucmp=function(x){if(this.length>x.length)return 1;if(this.length<x.length)return-1;for(var C=0,j=this.length-1;j>=0;j--){var J=0|this.words[j],_e=0|x.words[j];if(J!==_e){J<_e?C=-1:J>_e&&(C=1);break}}return C},X.prototype.gtn=function(x){return 1===this.cmpn(x)},X.prototype.gt=function(x){return 1===this.cmp(x)},X.prototype.gten=function(x){return this.cmpn(x)>=0},X.prototype.gte=function(x){return this.cmp(x)>=0},X.prototype.ltn=function(x){return-1===this.cmpn(x)},X.prototype.lt=function(x){return-1===this.cmp(x)},X.prototype.lten=function(x){return this.cmpn(x)<=0},X.prototype.lte=function(x){return this.cmp(x)<=0},X.prototype.eqn=function(x){return 0===this.cmpn(x)},X.prototype.eq=function(x){return 0===this.cmp(x)},X.red=function(x){return new pt(x)},X.prototype.toRed=function(x){return h(!this.red,"Already a number in reduction context"),h(0===this.negative,"red works only with positives"),x.convertTo(this)._forceRed(x)},X.prototype.fromRed=function(){return h(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},X.prototype._forceRed=function(x){return this.red=x,this},X.prototype.forceRed=function(x){return h(!this.red,"Already a number in reduction context"),this._forceRed(x)},X.prototype.redAdd=function(x){return h(this.red,"redAdd works only with red numbers"),this.red.add(this,x)},X.prototype.redIAdd=function(x){return h(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,x)},X.prototype.redSub=function(x){return h(this.red,"redSub works only with red numbers"),this.red.sub(this,x)},X.prototype.redISub=function(x){return h(this.red,"redISub works only with red numbers"),this.red.isub(this,x)},X.prototype.redShl=function(x){return h(this.red,"redShl works only with red numbers"),this.red.shl(this,x)},X.prototype.redMul=function(x){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.mul(this,x)},X.prototype.redIMul=function(x){return h(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.imul(this,x)},X.prototype.redSqr=function(){return h(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},X.prototype.redISqr=function(){return h(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},X.prototype.redSqrt=function(){return h(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},X.prototype.redInvm=function(){return h(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},X.prototype.redNeg=function(){return h(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},X.prototype.redPow=function(x){return h(this.red&&!x.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,x)};var Te={k256:null,p224:null,p192:null,p25519:null};function We(le,x){this.name=le,this.p=new X(x,16),this.n=this.p.bitLength(),this.k=new X(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function He(){We.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function ke(){We.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Ke(){We.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function St(){We.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function pt(le){if("string"==typeof le){var x=X._prime(le);this.m=x.p,this.prime=x}else h(le.gtn(1),"modulus must be greater than 1"),this.m=le,this.prime=null}function ct(le){pt.call(this,le),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new X(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}We.prototype._tmp=function(){var x=new X(null);return x.words=new Array(Math.ceil(this.n/13)),x},We.prototype.ireduce=function(x){var j,C=x;do{this.split(C,this.tmp),j=(C=(C=this.imulK(C)).iadd(this.tmp)).bitLength()}while(j>this.n);var J=j<this.n?-1:C.ucmp(this.p);return 0===J?(C.words[0]=0,C.length=1):J>0?C.isub(this.p):void 0!==C.strip?C.strip():C._strip(),C},We.prototype.split=function(x,C){x.iushrn(this.n,0,C)},We.prototype.imulK=function(x){return x.imul(this.k)},fe(He,We),He.prototype.split=function(x,C){for(var j=4194303,J=Math.min(x.length,9),_e=0;_e<J;_e++)C.words[_e]=x.words[_e];if(C.length=J,x.length<=9)return x.words[0]=0,void(x.length=1);var Ee=x.words[9];for(C.words[C.length++]=Ee&j,_e=10;_e<x.length;_e++){var Ve=0|x.words[_e];x.words[_e-10]=(Ve&j)<<4|Ee>>>22,Ee=Ve}x.words[_e-10]=Ee>>>=22,x.length-=0===Ee&&x.length>10?10:9},He.prototype.imulK=function(x){x.words[x.length]=0,x.words[x.length+1]=0,x.length+=2;for(var C=0,j=0;j<x.length;j++){var J=0|x.words[j];x.words[j]=67108863&(C+=977*J),C=64*J+(C/67108864|0)}return 0===x.words[x.length-1]&&(x.length--,0===x.words[x.length-1]&&x.length--),x},fe(ke,We),fe(Ke,We),fe(St,We),St.prototype.imulK=function(x){for(var C=0,j=0;j<x.length;j++){var J=19*(0|x.words[j])+C,_e=67108863&J;J>>>=26,x.words[j]=_e,C=J}return 0!==C&&(x.words[x.length++]=C),x},X._prime=function(x){if(Te[x])return Te[x];var C;if("k256"===x)C=new He;else if("p224"===x)C=new ke;else if("p192"===x)C=new Ke;else{if("p25519"!==x)throw new Error("Unknown prime "+x);C=new St}return Te[x]=C,C},pt.prototype._verify1=function(x){h(0===x.negative,"red works only with positives"),h(x.red,"red works only with red numbers")},pt.prototype._verify2=function(x,C){h(!(x.negative|C.negative),"red works only with positives"),h(x.red&&x.red===C.red,"red works only with red numbers")},pt.prototype.imod=function(x){return this.prime?this.prime.ireduce(x)._forceRed(this):x.umod(this.m)._forceRed(this)},pt.prototype.neg=function(x){return x.isZero()?x.clone():this.m.sub(x)._forceRed(this)},pt.prototype.add=function(x,C){this._verify2(x,C);var j=x.add(C);return j.cmp(this.m)>=0&&j.isub(this.m),j._forceRed(this)},pt.prototype.iadd=function(x,C){this._verify2(x,C);var j=x.iadd(C);return j.cmp(this.m)>=0&&j.isub(this.m),j},pt.prototype.sub=function(x,C){this._verify2(x,C);var j=x.sub(C);return j.cmpn(0)<0&&j.iadd(this.m),j._forceRed(this)},pt.prototype.isub=function(x,C){this._verify2(x,C);var j=x.isub(C);return j.cmpn(0)<0&&j.iadd(this.m),j},pt.prototype.shl=function(x,C){return this._verify1(x),this.imod(x.ushln(C))},pt.prototype.imul=function(x,C){return this._verify2(x,C),this.imod(x.imul(C))},pt.prototype.mul=function(x,C){return this._verify2(x,C),this.imod(x.mul(C))},pt.prototype.isqr=function(x){return this.imul(x,x.clone())},pt.prototype.sqr=function(x){return this.mul(x,x)},pt.prototype.sqrt=function(x){if(x.isZero())return x.clone();var C=this.m.andln(3);if(h(C%2==1),3===C){var j=this.m.add(new X(1)).iushrn(2);return this.pow(x,j)}for(var J=this.m.subn(1),_e=0;!J.isZero()&&0===J.andln(1);)_e++,J.iushrn(1);h(!J.isZero());var Ee=new X(1).toRed(this),Ve=Ee.redNeg(),Ne=this.m.subn(1).iushrn(1),V=this.m.bitLength();for(V=new X(2*V*V).toRed(this);0!==this.pow(V,Ne).cmp(Ve);)V.redIAdd(Ve);for(var Oe=this.pow(V,J),Ot=this.pow(x,J.addn(1).iushrn(1)),ot=this.pow(x,J),Ut=_e;0!==ot.cmp(Ee);){for(var ze=ot,Mt=0;0!==ze.cmp(Ee);Mt++)ze=ze.redSqr();h(Mt<Ut);var st=this.pow(Oe,new X(1).iushln(Ut-Mt-1));Ot=Ot.redMul(st),Oe=st.redSqr(),ot=ot.redMul(Oe),Ut=Mt}return Ot},pt.prototype.invm=function(x){var C=x._invmp(this.m);return 0!==C.negative?(C.negative=0,this.imod(C).redNeg()):this.imod(C)},pt.prototype.pow=function(x,C){if(C.isZero())return new X(1).toRed(this);if(0===C.cmpn(1))return x.clone();var J=new Array(16);J[0]=new X(1).toRed(this),J[1]=x;for(var _e=2;_e<J.length;_e++)J[_e]=this.mul(J[_e-1],x);var Ee=J[0],Ve=0,Ne=0,V=C.bitLength()%26;for(0===V&&(V=26),_e=C.length-1;_e>=0;_e--){for(var Oe=C.words[_e],Ot=V-1;Ot>=0;Ot--){var ot=Oe>>Ot&1;Ee!==J[0]&&(Ee=this.sqr(Ee)),0!==ot||0!==Ve?(Ve<<=1,Ve|=ot,(4==++Ne||0===_e&&0===Ot)&&(Ee=this.mul(Ee,J[Ve]),Ne=0,Ve=0)):Ne=0}V=26}return Ee},pt.prototype.convertTo=function(x){var C=x.umod(this.m);return C===x?C.clone():C},pt.prototype.convertFrom=function(x){var C=x.clone();return C.red=null,C},X.mont=function(x){return new ct(x)},fe(ct,pt),ct.prototype.convertTo=function(x){return this.imod(x.ushln(this.shift))},ct.prototype.convertFrom=function(x){var C=this.imod(x.mul(this.rinv));return C.red=null,C},ct.prototype.imul=function(x,C){if(x.isZero()||C.isZero())return x.words[0]=0,x.length=1,x;var j=x.imul(C),J=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_e=j.isub(J).iushrn(this.shift),Ee=_e;return _e.cmp(this.m)>=0?Ee=_e.isub(this.m):_e.cmpn(0)<0&&(Ee=_e.iadd(this.m)),Ee._forceRed(this)},ct.prototype.mul=function(x,C){if(x.isZero()||C.isZero())return new X(0)._forceRed(this);var j=x.mul(C),J=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_e=j.isub(J).iushrn(this.shift),Ee=_e;return _e.cmp(this.m)>=0?Ee=_e.isub(this.m):_e.cmpn(0)<0&&(Ee=_e.iadd(this.m)),Ee._forceRed(this)},ct.prototype.invm=function(x){return this.imod(x._invmp(this.m).mul(this.r2))._forceRed(this)}}(Rt=M.nmd(Rt),this)},5294:(Rt,Je,M)=>{var l;function H(fe){this.rand=fe}if(Rt.exports=function(X){return l||(l=new H(null)),l.generate(X)},Rt.exports.Rand=H,H.prototype.generate=function(X){return this._rand(X)},H.prototype._rand=function(X){if(this.rand.getBytes)return this.rand.getBytes(X);for(var ie=new Uint8Array(X),de=0;de<ie.length;de++)ie[de]=this.rand.getByte();return ie},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?H.prototype._rand=function(X){var ie=new Uint8Array(X);return self.crypto.getRandomValues(ie),ie}:self.msCrypto&&self.msCrypto.getRandomValues?H.prototype._rand=function(X){var ie=new Uint8Array(X);return self.msCrypto.getRandomValues(ie),ie}:"object"==typeof window&&(H.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var h=M(3776);if("function"!=typeof h.randomBytes)throw new Error("Not supported");H.prototype._rand=function(X){return h.randomBytes(X)}}catch{}},3188:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(8891),M(8855),M(4147),M(2414),function(){var H=l,fe=H.lib.BlockCipher,X=H.algo,ie=[],de=[],Q=[],z=[],L=[],I=[],K=[],te=[],ee=[],ue=[];!function(){for(var ye=[],Te=0;Te<256;Te++)ye[Te]=Te<128?Te<<1:Te<<1^283;var We=0,He=0;for(Te=0;Te<256;Te++){var ke=He^He<<1^He<<2^He<<3^He<<4;ie[We]=ke=ke>>>8^255&ke^99,de[ke]=We;var ct,Ke=ye[We],St=ye[Ke],pt=ye[St];Q[We]=(ct=257*ye[ke]^16843008*ke)<<24|ct>>>8,z[We]=ct<<16|ct>>>16,L[We]=ct<<8|ct>>>24,I[We]=ct,K[ke]=(ct=16843009*pt^65537*St^257*Ke^16843008*We)<<24|ct>>>8,te[ke]=ct<<16|ct>>>16,ee[ke]=ct<<8|ct>>>24,ue[ke]=ct,We?(We=Ke^ye[ye[ye[pt^Ke]]],He^=ye[ye[He]]):We=He=1}}();var Ce=[0,1,2,4,8,16,32,64,128,27,54],Re=X.AES=fe.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var Te=this._keyPriorReset=this._key,We=Te.words,He=Te.sigBytes/4,Ke=4*((this._nRounds=He+6)+1),St=this._keySchedule=[],pt=0;pt<Ke;pt++)pt<He?St[pt]=We[pt]:(ye=St[pt-1],pt%He?He>6&&pt%He==4&&(ye=ie[ye>>>24]<<24|ie[ye>>>16&255]<<16|ie[ye>>>8&255]<<8|ie[255&ye]):(ye=ie[(ye=ye<<8|ye>>>24)>>>24]<<24|ie[ye>>>16&255]<<16|ie[ye>>>8&255]<<8|ie[255&ye],ye^=Ce[pt/He|0]<<24),St[pt]=St[pt-He]^ye);for(var ct=this._invKeySchedule=[],le=0;le<Ke;le++){if(pt=Ke-le,le%4)var ye=St[pt];else ye=St[pt-4];ct[le]=le<4||pt<=4?ye:K[ie[ye>>>24]]^te[ie[ye>>>16&255]]^ee[ie[ye>>>8&255]]^ue[ie[255&ye]]}}},encryptBlock:function(ye,Te){this._doCryptBlock(ye,Te,this._keySchedule,Q,z,L,I,ie)},decryptBlock:function(ye,Te){var We=ye[Te+1];ye[Te+1]=ye[Te+3],ye[Te+3]=We,this._doCryptBlock(ye,Te,this._invKeySchedule,K,te,ee,ue,de),We=ye[Te+1],ye[Te+1]=ye[Te+3],ye[Te+3]=We},_doCryptBlock:function(ye,Te,We,He,ke,Ke,St,pt){for(var ct=this._nRounds,le=ye[Te]^We[0],x=ye[Te+1]^We[1],C=ye[Te+2]^We[2],j=ye[Te+3]^We[3],J=4,_e=1;_e<ct;_e++){var Ee=He[le>>>24]^ke[x>>>16&255]^Ke[C>>>8&255]^St[255&j]^We[J++],Ve=He[x>>>24]^ke[C>>>16&255]^Ke[j>>>8&255]^St[255&le]^We[J++],Ne=He[C>>>24]^ke[j>>>16&255]^Ke[le>>>8&255]^St[255&x]^We[J++],V=He[j>>>24]^ke[le>>>16&255]^Ke[x>>>8&255]^St[255&C]^We[J++];le=Ee,x=Ve,C=Ne,j=V}Ee=(pt[le>>>24]<<24|pt[x>>>16&255]<<16|pt[C>>>8&255]<<8|pt[255&j])^We[J++],Ve=(pt[x>>>24]<<24|pt[C>>>16&255]<<16|pt[j>>>8&255]<<8|pt[255&le])^We[J++],Ne=(pt[C>>>24]<<24|pt[j>>>16&255]<<16|pt[le>>>8&255]<<8|pt[255&x])^We[J++],V=(pt[j>>>24]<<24|pt[le>>>16&255]<<16|pt[x>>>8&255]<<8|pt[255&C])^We[J++],ye[Te]=Ee,ye[Te+1]=Ve,ye[Te+2]=Ne,ye[Te+3]=V},keySize:8});H.AES=fe._createHelper(Re)}(),l.AES)},5269:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(8891),M(8855),M(4147),M(2414),function(){var H=l,fe=H.lib.BlockCipher;const ie=16,de=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Q=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var z={pbox:[],sbox:[]};function L(ue,Ce){let He=ue.sbox[0][Ce>>24&255]+ue.sbox[1][Ce>>16&255];return He^=ue.sbox[2][Ce>>8&255],He+=ue.sbox[3][255&Ce],He}function I(ue,Ce,Re){let We,ye=Ce,Te=Re;for(let He=0;He<ie;++He)ye^=ue.pbox[He],Te=L(ue,ye)^Te,We=ye,ye=Te,Te=We;return We=ye,ye=Te,Te=We,Te^=ue.pbox[ie],ye^=ue.pbox[ie+1],{left:ye,right:Te}}var ee=H.algo.Blowfish=fe.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var ue=this._keyPriorReset=this._key;!function te(ue,Ce,Re){for(let ke=0;ke<4;ke++){ue.sbox[ke]=[];for(let Ke=0;Ke<256;Ke++)ue.sbox[ke][Ke]=Q[ke][Ke]}let ye=0;for(let ke=0;ke<ie+2;ke++)ue.pbox[ke]=de[ke]^Ce[ye],ye++,ye>=Re&&(ye=0);let Te=0,We=0,He=0;for(let ke=0;ke<ie+2;ke+=2)He=I(ue,Te,We),Te=He.left,We=He.right,ue.pbox[ke]=Te,ue.pbox[ke+1]=We;for(let ke=0;ke<4;ke++)for(let Ke=0;Ke<256;Ke+=2)He=I(ue,Te,We),Te=He.left,We=He.right,ue.sbox[ke][Ke]=Te,ue.sbox[ke][Ke+1]=We;return!0}(z,ue.words,ue.sigBytes/4)}},encryptBlock:function(ue,Ce){var Re=I(z,ue[Ce],ue[Ce+1]);ue[Ce]=Re.left,ue[Ce+1]=Re.right},decryptBlock:function(ue,Ce){var Re=function K(ue,Ce,Re){let We,ye=Ce,Te=Re;for(let He=ie+1;He>1;--He)ye^=ue.pbox[He],Te=L(ue,ye)^Te,We=ye,ye=Te,Te=We;return We=ye,ye=Te,Te=We,Te^=ue.pbox[1],ye^=ue.pbox[0],{left:ye,right:Te}}(z,ue[Ce],ue[Ce+1]);ue[Ce]=Re.left,ue[Ce+1]=Re.right},blockSize:2,keySize:4,ivSize:2});H.Blowfish=fe._createHelper(ee)}(),l.Blowfish)},2414:function(Rt,Je,M){var h,fe,X,ie,de,Q,L,K,te,ue,Ce,Re,Te,He,Ke,St,ct,le,l;Rt.exports=(l=M(7656),M(4147),void(l.lib.Cipher||(h=l,fe=h.lib,X=fe.Base,ie=fe.WordArray,de=fe.BufferedBlockAlgorithm,Q=h.enc,L=Q.Base64,K=h.algo.EvpKDF,te=fe.Cipher=de.extend({cfg:X.extend(),createEncryptor:function(x,C){return this.create(this._ENC_XFORM_MODE,x,C)},createDecryptor:function(x,C){return this.create(this._DEC_XFORM_MODE,x,C)},init:function(x,C,j){this.cfg=this.cfg.extend(j),this._xformMode=x,this._key=C,this.reset()},reset:function(){de.reset.call(this),this._doReset()},process:function(x){return this._append(x),this._process()},finalize:function(x){return x&&this._append(x),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function x(C){return"string"==typeof C?le:St}return function(C){return{encrypt:function(j,J,_e){return x(J).encrypt(C,j,J,_e)},decrypt:function(j,J,_e){return x(J).decrypt(C,j,J,_e)}}}}()}),fe.StreamCipher=te.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),ue=h.mode={},Ce=fe.BlockCipherMode=X.extend({createEncryptor:function(x,C){return this.Encryptor.create(x,C)},createDecryptor:function(x,C){return this.Decryptor.create(x,C)},init:function(x,C){this._cipher=x,this._iv=C}}),Re=ue.CBC=function(){var x=Ce.extend();function C(j,J,_e){var Ee,Ve=this._iv;Ve?(Ee=Ve,this._iv=undefined):Ee=this._prevBlock;for(var Ne=0;Ne<_e;Ne++)j[J+Ne]^=Ee[Ne]}return x.Encryptor=x.extend({processBlock:function(j,J){var _e=this._cipher,Ee=_e.blockSize;C.call(this,j,J,Ee),_e.encryptBlock(j,J),this._prevBlock=j.slice(J,J+Ee)}}),x.Decryptor=x.extend({processBlock:function(j,J){var _e=this._cipher,Ee=_e.blockSize,Ve=j.slice(J,J+Ee);_e.decryptBlock(j,J),C.call(this,j,J,Ee),this._prevBlock=Ve}}),x}(),Te=(h.pad={}).Pkcs7={pad:function(x,C){for(var j=4*C,J=j-x.sigBytes%j,_e=J<<24|J<<16|J<<8|J,Ee=[],Ve=0;Ve<J;Ve+=4)Ee.push(_e);var Ne=ie.create(Ee,J);x.concat(Ne)},unpad:function(x){x.sigBytes-=255&x.words[x.sigBytes-1>>>2]}},fe.BlockCipher=te.extend({cfg:te.cfg.extend({mode:Re,padding:Te}),reset:function(){var x;te.reset.call(this);var C=this.cfg,j=C.iv,J=C.mode;this._xformMode==this._ENC_XFORM_MODE?x=J.createEncryptor:(x=J.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==x?this._mode.init(this,j&&j.words):(this._mode=x.call(J,this,j&&j.words),this._mode.__creator=x)},_doProcessBlock:function(x,C){this._mode.processBlock(x,C)},_doFinalize:function(){var x,C=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(C.pad(this._data,this.blockSize),x=this._process(!0)):(x=this._process(!0),C.unpad(x)),x},blockSize:4}),He=fe.CipherParams=X.extend({init:function(x){this.mixIn(x)},toString:function(x){return(x||this.formatter).stringify(this)}}),Ke=(h.format={}).OpenSSL={stringify:function(x){var j=x.ciphertext,J=x.salt;return(J?ie.create([1398893684,1701076831]).concat(J).concat(j):j).toString(L)},parse:function(x){var C,j=L.parse(x),J=j.words;return 1398893684==J[0]&&1701076831==J[1]&&(C=ie.create(J.slice(2,4)),J.splice(0,4),j.sigBytes-=16),He.create({ciphertext:j,salt:C})}},St=fe.SerializableCipher=X.extend({cfg:X.extend({format:Ke}),encrypt:function(x,C,j,J){J=this.cfg.extend(J);var _e=x.createEncryptor(j,J),Ee=_e.finalize(C),Ve=_e.cfg;return He.create({ciphertext:Ee,key:j,iv:Ve.iv,algorithm:x,mode:Ve.mode,padding:Ve.padding,blockSize:x.blockSize,formatter:J.format})},decrypt:function(x,C,j,J){return J=this.cfg.extend(J),C=this._parse(C,J.format),x.createDecryptor(j,J).finalize(C.ciphertext)},_parse:function(x,C){return"string"==typeof x?C.parse(x,this):x}}),ct=(h.kdf={}).OpenSSL={execute:function(x,C,j,J,_e){if(J||(J=ie.random(8)),_e)var Ee=K.create({keySize:C+j,hasher:_e}).compute(x,J);else Ee=K.create({keySize:C+j}).compute(x,J);var Ve=ie.create(Ee.words.slice(C),4*j);return Ee.sigBytes=4*C,He.create({key:Ee,iv:Ve,salt:J})}},le=fe.PasswordBasedCipher=St.extend({cfg:St.cfg.extend({kdf:ct}),encrypt:function(x,C,j,J){var _e=(J=this.cfg.extend(J)).kdf.execute(j,x.keySize,x.ivSize,J.salt,J.hasher);J.iv=_e.iv;var Ee=St.encrypt.call(this,x,C,_e.key,J);return Ee.mixIn(_e),Ee},decrypt:function(x,C,j,J){J=this.cfg.extend(J),C=this._parse(C,J.format);var _e=J.kdf.execute(j,x.keySize,x.ivSize,C.salt,J.hasher);return J.iv=_e.iv,St.decrypt.call(this,x,C,_e.key,J)}}))))},7656:function(Rt,Je,M){var l;Rt.exports=(l=l||function(H,h){var fe;if(typeof window<"u"&&window.crypto&&(fe=window.crypto),typeof self<"u"&&self.crypto&&(fe=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(fe=globalThis.crypto),!fe&&typeof window<"u"&&window.msCrypto&&(fe=window.msCrypto),!fe&&typeof global<"u"&&global.crypto&&(fe=global.crypto),!fe)try{fe=M(477)}catch{}var X=function(){if(fe){if("function"==typeof fe.getRandomValues)try{return fe.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof fe.randomBytes)try{return fe.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},ie=Object.create||function(){function ye(){}return function(Te){var We;return ye.prototype=Te,We=new ye,ye.prototype=null,We}}(),de={},Q=de.lib={},z=Q.Base=function(){return{extend:function(ye){var Te=ie(this);return ye&&Te.mixIn(ye),(!Te.hasOwnProperty("init")||this.init===Te.init)&&(Te.init=function(){Te.$super.init.apply(this,arguments)}),Te.init.prototype=Te,Te.$super=this,Te},create:function(){var ye=this.extend();return ye.init.apply(ye,arguments),ye},init:function(){},mixIn:function(ye){for(var Te in ye)ye.hasOwnProperty(Te)&&(this[Te]=ye[Te]);ye.hasOwnProperty("toString")&&(this.toString=ye.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),L=Q.WordArray=z.extend({init:function(ye,Te){ye=this.words=ye||[],this.sigBytes=null!=Te?Te:4*ye.length},toString:function(ye){return(ye||K).stringify(this)},concat:function(ye){var Te=this.words,We=ye.words,He=this.sigBytes,ke=ye.sigBytes;if(this.clamp(),He%4)for(var Ke=0;Ke<ke;Ke++)Te[He+Ke>>>2]|=(We[Ke>>>2]>>>24-Ke%4*8&255)<<24-(He+Ke)%4*8;else for(var pt=0;pt<ke;pt+=4)Te[He+pt>>>2]=We[pt>>>2];return this.sigBytes+=ke,this},clamp:function(){var ye=this.words,Te=this.sigBytes;ye[Te>>>2]&=4294967295<<32-Te%4*8,ye.length=H.ceil(Te/4)},clone:function(){var ye=z.clone.call(this);return ye.words=this.words.slice(0),ye},random:function(ye){for(var Te=[],We=0;We<ye;We+=4)Te.push(X());return new L.init(Te,ye)}}),I=de.enc={},K=I.Hex={stringify:function(ye){for(var Te=ye.words,We=ye.sigBytes,He=[],ke=0;ke<We;ke++){var Ke=Te[ke>>>2]>>>24-ke%4*8&255;He.push((Ke>>>4).toString(16)),He.push((15&Ke).toString(16))}return He.join("")},parse:function(ye){for(var Te=ye.length,We=[],He=0;He<Te;He+=2)We[He>>>3]|=parseInt(ye.substr(He,2),16)<<24-He%8*4;return new L.init(We,Te/2)}},te=I.Latin1={stringify:function(ye){for(var Te=ye.words,We=ye.sigBytes,He=[],ke=0;ke<We;ke++)He.push(String.fromCharCode(Te[ke>>>2]>>>24-ke%4*8&255));return He.join("")},parse:function(ye){for(var Te=ye.length,We=[],He=0;He<Te;He++)We[He>>>2]|=(255&ye.charCodeAt(He))<<24-He%4*8;return new L.init(We,Te)}},ee=I.Utf8={stringify:function(ye){try{return decodeURIComponent(escape(te.stringify(ye)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(ye){return te.parse(unescape(encodeURIComponent(ye)))}},ue=Q.BufferedBlockAlgorithm=z.extend({reset:function(){this._data=new L.init,this._nDataBytes=0},_append:function(ye){"string"==typeof ye&&(ye=ee.parse(ye)),this._data.concat(ye),this._nDataBytes+=ye.sigBytes},_process:function(ye){var Te,We=this._data,He=We.words,ke=We.sigBytes,Ke=this.blockSize,pt=ke/(4*Ke),ct=(pt=ye?H.ceil(pt):H.max((0|pt)-this._minBufferSize,0))*Ke,le=H.min(4*ct,ke);if(ct){for(var x=0;x<ct;x+=Ke)this._doProcessBlock(He,x);Te=He.splice(0,ct),We.sigBytes-=le}return new L.init(Te,le)},clone:function(){var ye=z.clone.call(this);return ye._data=this._data.clone(),ye},_minBufferSize:0}),Re=(Q.Hasher=ue.extend({cfg:z.extend(),init:function(ye){this.cfg=this.cfg.extend(ye),this.reset()},reset:function(){ue.reset.call(this),this._doReset()},update:function(ye){return this._append(ye),this._process(),this},finalize:function(ye){return ye&&this._append(ye),this._doFinalize()},blockSize:16,_createHelper:function(ye){return function(Te,We){return new ye.init(We).finalize(Te)}},_createHmacHelper:function(ye){return function(Te,We){return new Re.HMAC.init(ye,We).finalize(Te)}}}),de.algo={});return de}(Math),l)},8891:function(Rt,Je,M){var l,fe;Rt.exports=(l=M(7656),fe=l.lib.WordArray,l.enc.Base64={stringify:function(Q){var z=Q.words,L=Q.sigBytes,I=this._map;Q.clamp();for(var K=[],te=0;te<L;te+=3)for(var Re=(z[te>>>2]>>>24-te%4*8&255)<<16|(z[te+1>>>2]>>>24-(te+1)%4*8&255)<<8|z[te+2>>>2]>>>24-(te+2)%4*8&255,ye=0;ye<4&&te+.75*ye<L;ye++)K.push(I.charAt(Re>>>6*(3-ye)&63));var Te=I.charAt(64);if(Te)for(;K.length%4;)K.push(Te);return K.join("")},parse:function(Q){var z=Q.length,L=this._map,I=this._reverseMap;if(!I){I=this._reverseMap=[];for(var K=0;K<L.length;K++)I[L.charCodeAt(K)]=K}var te=L.charAt(64);if(te){var ee=Q.indexOf(te);-1!==ee&&(z=ee)}return function de(Q,z,L){for(var I=[],K=0,te=0;te<z;te++)if(te%4){var ee=L[Q.charCodeAt(te-1)]<<te%4*2,ue=L[Q.charCodeAt(te)]>>>6-te%4*2;I[K>>>2]|=(ee|ue)<<24-K%4*8,K++}return fe.create(I,K)}(Q,z,I)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},l.enc.Base64)},6598:function(Rt,Je,M){var l,fe;Rt.exports=(l=M(7656),fe=l.lib.WordArray,l.enc.Base64url={stringify:function(Q,z){void 0===z&&(z=!0);var L=Q.words,I=Q.sigBytes,K=z?this._safe_map:this._map;Q.clamp();for(var te=[],ee=0;ee<I;ee+=3)for(var ye=(L[ee>>>2]>>>24-ee%4*8&255)<<16|(L[ee+1>>>2]>>>24-(ee+1)%4*8&255)<<8|L[ee+2>>>2]>>>24-(ee+2)%4*8&255,Te=0;Te<4&&ee+.75*Te<I;Te++)te.push(K.charAt(ye>>>6*(3-Te)&63));var We=K.charAt(64);if(We)for(;te.length%4;)te.push(We);return te.join("")},parse:function(Q,z){void 0===z&&(z=!0);var L=Q.length,I=z?this._safe_map:this._map,K=this._reverseMap;if(!K){K=this._reverseMap=[];for(var te=0;te<I.length;te++)K[I.charCodeAt(te)]=te}var ee=I.charAt(64);if(ee){var ue=Q.indexOf(ee);-1!==ue&&(L=ue)}return function de(Q,z,L){for(var I=[],K=0,te=0;te<z;te++)if(te%4){var ee=L[Q.charCodeAt(te-1)]<<te%4*2,ue=L[Q.charCodeAt(te)]>>>6-te%4*2;I[K>>>2]|=(ee|ue)<<24-K%4*8,K++}return fe.create(I,K)}(Q,L,K)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},l.enc.Base64url)},5304:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),function(){var fe=l.lib.WordArray,X=l.enc;function de(Q){return Q<<8&4278255360|Q>>>8&16711935}X.Utf16=X.Utf16BE={stringify:function(Q){for(var z=Q.words,L=Q.sigBytes,I=[],K=0;K<L;K+=2)I.push(String.fromCharCode(z[K>>>2]>>>16-K%4*8&65535));return I.join("")},parse:function(Q){for(var z=Q.length,L=[],I=0;I<z;I++)L[I>>>1]|=Q.charCodeAt(I)<<16-I%2*16;return fe.create(L,2*z)}},X.Utf16LE={stringify:function(Q){for(var z=Q.words,L=Q.sigBytes,I=[],K=0;K<L;K+=2){var te=de(z[K>>>2]>>>16-K%4*8&65535);I.push(String.fromCharCode(te))}return I.join("")},parse:function(Q){for(var z=Q.length,L=[],I=0;I<z;I++)L[I>>>1]|=de(Q.charCodeAt(I)<<16-I%2*16);return fe.create(L,2*z)}}}(),l.enc.Utf16)},4147:function(Rt,Je,M){var H,h,fe,X,ie,Q,l;Rt.exports=(l=M(7656),M(9986),M(7868),X=(h=(H=l).lib).WordArray,Q=(ie=H.algo).EvpKDF=(fe=h.Base).extend({cfg:fe.extend({keySize:4,hasher:ie.MD5,iterations:1}),init:function(z){this.cfg=this.cfg.extend(z)},compute:function(z,L){for(var I,K=this.cfg,te=K.hasher.create(),ee=X.create(),ue=ee.words,Ce=K.keySize,Re=K.iterations;ue.length<Ce;){I&&te.update(I),I=te.update(z).finalize(L),te.reset();for(var ye=1;ye<Re;ye++)I=te.finalize(I),te.reset();ee.concat(I)}return ee.sigBytes=4*Ce,ee}}),H.EvpKDF=function(z,L,I){return Q.create(I).compute(z,L)},l.EvpKDF)},4564:function(Rt,Je,M){var l,X,de;Rt.exports=(l=M(7656),M(2414),X=l.lib.CipherParams,de=l.enc.Hex,l.format.Hex={stringify:function(L){return L.ciphertext.toString(de)},parse:function(L){var I=de.parse(L);return X.create({ciphertext:I})}},l.format.Hex)},7868:function(Rt,Je,M){var l,ie;Rt.exports=(l=M(7656),ie=l.enc.Utf8,void(l.algo.HMAC=l.lib.Base.extend({init:function(z,L){z=this._hasher=new z.init,"string"==typeof L&&(L=ie.parse(L));var I=z.blockSize,K=4*I;L.sigBytes>K&&(L=z.finalize(L)),L.clamp();for(var te=this._oKey=L.clone(),ee=this._iKey=L.clone(),ue=te.words,Ce=ee.words,Re=0;Re<I;Re++)ue[Re]^=1549556828,Ce[Re]^=909522486;te.sigBytes=ee.sigBytes=K,this.reset()},reset:function(){var z=this._hasher;z.reset(),z.update(this._iKey)},update:function(z){return this._hasher.update(z),this},finalize:function(z){var L=this._hasher,I=L.finalize(z);return L.reset(),L.finalize(this._oKey.clone().concat(I))}})))},1471:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(4501),M(8823),M(5304),M(8891),M(6598),M(8855),M(9986),M(5168),M(9225),M(885),M(4068),M(3752),M(447),M(7868),M(7738),M(4147),M(2414),M(4152),M(9098),M(1057),M(6700),M(6115),M(332),M(7516),M(9047),M(6964),M(2599),M(4564),M(3188),M(2515),M(5350),M(2795),M(2923),M(5269),l)},8823:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),function(){if("function"==typeof ArrayBuffer){var fe=l.lib.WordArray,X=fe.init,ie=fe.init=function(de){if(de instanceof ArrayBuffer&&(de=new Uint8Array(de)),(de instanceof Int8Array||typeof Uint8ClampedArray<"u"&&de instanceof Uint8ClampedArray||de instanceof Int16Array||de instanceof Uint16Array||de instanceof Int32Array||de instanceof Uint32Array||de instanceof Float32Array||de instanceof Float64Array)&&(de=new Uint8Array(de.buffer,de.byteOffset,de.byteLength)),de instanceof Uint8Array){for(var Q=de.byteLength,z=[],L=0;L<Q;L++)z[L>>>2]|=de[L]<<24-L%4*8;X.call(this,z,Q)}else X.apply(this,arguments)};ie.prototype=fe}}(),l.lib.WordArray)},8855:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),function(H){var h=l,fe=h.lib,X=fe.WordArray,ie=fe.Hasher,de=h.algo,Q=[];!function(){for(var ee=0;ee<64;ee++)Q[ee]=4294967296*H.abs(H.sin(ee+1))|0}();var z=de.MD5=ie.extend({_doReset:function(){this._hash=new X.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(ee,ue){for(var Ce=0;Ce<16;Ce++){var Re=ue+Ce,ye=ee[Re];ee[Re]=16711935&(ye<<8|ye>>>24)|4278255360&(ye<<24|ye>>>8)}var Te=this._hash.words,We=ee[ue+0],He=ee[ue+1],ke=ee[ue+2],Ke=ee[ue+3],St=ee[ue+4],pt=ee[ue+5],ct=ee[ue+6],le=ee[ue+7],x=ee[ue+8],C=ee[ue+9],j=ee[ue+10],J=ee[ue+11],_e=ee[ue+12],Ee=ee[ue+13],Ve=ee[ue+14],Ne=ee[ue+15],V=Te[0],Oe=Te[1],Ot=Te[2],ot=Te[3];V=L(V,Oe,Ot,ot,We,7,Q[0]),ot=L(ot,V,Oe,Ot,He,12,Q[1]),Ot=L(Ot,ot,V,Oe,ke,17,Q[2]),Oe=L(Oe,Ot,ot,V,Ke,22,Q[3]),V=L(V,Oe,Ot,ot,St,7,Q[4]),ot=L(ot,V,Oe,Ot,pt,12,Q[5]),Ot=L(Ot,ot,V,Oe,ct,17,Q[6]),Oe=L(Oe,Ot,ot,V,le,22,Q[7]),V=L(V,Oe,Ot,ot,x,7,Q[8]),ot=L(ot,V,Oe,Ot,C,12,Q[9]),Ot=L(Ot,ot,V,Oe,j,17,Q[10]),Oe=L(Oe,Ot,ot,V,J,22,Q[11]),V=L(V,Oe,Ot,ot,_e,7,Q[12]),ot=L(ot,V,Oe,Ot,Ee,12,Q[13]),Ot=L(Ot,ot,V,Oe,Ve,17,Q[14]),V=I(V,Oe=L(Oe,Ot,ot,V,Ne,22,Q[15]),Ot,ot,He,5,Q[16]),ot=I(ot,V,Oe,Ot,ct,9,Q[17]),Ot=I(Ot,ot,V,Oe,J,14,Q[18]),Oe=I(Oe,Ot,ot,V,We,20,Q[19]),V=I(V,Oe,Ot,ot,pt,5,Q[20]),ot=I(ot,V,Oe,Ot,j,9,Q[21]),Ot=I(Ot,ot,V,Oe,Ne,14,Q[22]),Oe=I(Oe,Ot,ot,V,St,20,Q[23]),V=I(V,Oe,Ot,ot,C,5,Q[24]),ot=I(ot,V,Oe,Ot,Ve,9,Q[25]),Ot=I(Ot,ot,V,Oe,Ke,14,Q[26]),Oe=I(Oe,Ot,ot,V,x,20,Q[27]),V=I(V,Oe,Ot,ot,Ee,5,Q[28]),ot=I(ot,V,Oe,Ot,ke,9,Q[29]),Ot=I(Ot,ot,V,Oe,le,14,Q[30]),V=K(V,Oe=I(Oe,Ot,ot,V,_e,20,Q[31]),Ot,ot,pt,4,Q[32]),ot=K(ot,V,Oe,Ot,x,11,Q[33]),Ot=K(Ot,ot,V,Oe,J,16,Q[34]),Oe=K(Oe,Ot,ot,V,Ve,23,Q[35]),V=K(V,Oe,Ot,ot,He,4,Q[36]),ot=K(ot,V,Oe,Ot,St,11,Q[37]),Ot=K(Ot,ot,V,Oe,le,16,Q[38]),Oe=K(Oe,Ot,ot,V,j,23,Q[39]),V=K(V,Oe,Ot,ot,Ee,4,Q[40]),ot=K(ot,V,Oe,Ot,We,11,Q[41]),Ot=K(Ot,ot,V,Oe,Ke,16,Q[42]),Oe=K(Oe,Ot,ot,V,ct,23,Q[43]),V=K(V,Oe,Ot,ot,C,4,Q[44]),ot=K(ot,V,Oe,Ot,_e,11,Q[45]),Ot=K(Ot,ot,V,Oe,Ne,16,Q[46]),V=te(V,Oe=K(Oe,Ot,ot,V,ke,23,Q[47]),Ot,ot,We,6,Q[48]),ot=te(ot,V,Oe,Ot,le,10,Q[49]),Ot=te(Ot,ot,V,Oe,Ve,15,Q[50]),Oe=te(Oe,Ot,ot,V,pt,21,Q[51]),V=te(V,Oe,Ot,ot,_e,6,Q[52]),ot=te(ot,V,Oe,Ot,Ke,10,Q[53]),Ot=te(Ot,ot,V,Oe,j,15,Q[54]),Oe=te(Oe,Ot,ot,V,He,21,Q[55]),V=te(V,Oe,Ot,ot,x,6,Q[56]),ot=te(ot,V,Oe,Ot,Ne,10,Q[57]),Ot=te(Ot,ot,V,Oe,ct,15,Q[58]),Oe=te(Oe,Ot,ot,V,Ee,21,Q[59]),V=te(V,Oe,Ot,ot,St,6,Q[60]),ot=te(ot,V,Oe,Ot,J,10,Q[61]),Ot=te(Ot,ot,V,Oe,ke,15,Q[62]),Oe=te(Oe,Ot,ot,V,C,21,Q[63]),Te[0]=Te[0]+V|0,Te[1]=Te[1]+Oe|0,Te[2]=Te[2]+Ot|0,Te[3]=Te[3]+ot|0},_doFinalize:function(){var ee=this._data,ue=ee.words,Ce=8*this._nDataBytes,Re=8*ee.sigBytes;ue[Re>>>5]|=128<<24-Re%32;var ye=H.floor(Ce/4294967296),Te=Ce;ue[15+(Re+64>>>9<<4)]=16711935&(ye<<8|ye>>>24)|4278255360&(ye<<24|ye>>>8),ue[14+(Re+64>>>9<<4)]=16711935&(Te<<8|Te>>>24)|4278255360&(Te<<24|Te>>>8),ee.sigBytes=4*(ue.length+1),this._process();for(var We=this._hash,He=We.words,ke=0;ke<4;ke++){var Ke=He[ke];He[ke]=16711935&(Ke<<8|Ke>>>24)|4278255360&(Ke<<24|Ke>>>8)}return We},clone:function(){var ee=ie.clone.call(this);return ee._hash=this._hash.clone(),ee}});function L(ee,ue,Ce,Re,ye,Te,We){var He=ee+(ue&Ce|~ue&Re)+ye+We;return(He<<Te|He>>>32-Te)+ue}function I(ee,ue,Ce,Re,ye,Te,We){var He=ee+(ue&Re|Ce&~Re)+ye+We;return(He<<Te|He>>>32-Te)+ue}function K(ee,ue,Ce,Re,ye,Te,We){var He=ee+(ue^Ce^Re)+ye+We;return(He<<Te|He>>>32-Te)+ue}function te(ee,ue,Ce,Re,ye,Te,We){var He=ee+(Ce^(ue|~Re))+ye+We;return(He<<Te|He>>>32-Te)+ue}h.MD5=ie._createHelper(z),h.HmacMD5=ie._createHmacHelper(z)}(Math),l.MD5)},4152:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(2414),l.mode.CFB=function(){var H=l.lib.BlockCipherMode.extend();function h(fe,X,ie,de){var Q,z=this._iv;z?(Q=z.slice(0),this._iv=void 0):Q=this._prevBlock,de.encryptBlock(Q,0);for(var L=0;L<ie;L++)fe[X+L]^=Q[L]}return H.Encryptor=H.extend({processBlock:function(fe,X){var ie=this._cipher,de=ie.blockSize;h.call(this,fe,X,de,ie),this._prevBlock=fe.slice(X,X+de)}}),H.Decryptor=H.extend({processBlock:function(fe,X){var ie=this._cipher,de=ie.blockSize,Q=fe.slice(X,X+de);h.call(this,fe,X,de,ie),this._prevBlock=Q}}),H}(),l.mode.CFB)},1057:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(2414),l.mode.CTRGladman=function(){var H=l.lib.BlockCipherMode.extend();function h(ie){if(255&~(ie>>24))ie+=1<<24;else{var de=ie>>16&255,Q=ie>>8&255,z=255&ie;255===de?(de=0,255===Q?(Q=0,255===z?z=0:++z):++Q):++de,ie=0,ie+=de<<16,ie+=Q<<8,ie+=z}return ie}var X=H.Encryptor=H.extend({processBlock:function(ie,de){var Q=this._cipher,z=Q.blockSize,L=this._iv,I=this._counter;L&&(I=this._counter=L.slice(0),this._iv=void 0),function fe(ie){return 0===(ie[0]=h(ie[0]))&&(ie[1]=h(ie[1])),ie}(I);var K=I.slice(0);Q.encryptBlock(K,0);for(var te=0;te<z;te++)ie[de+te]^=K[te]}});return H.Decryptor=X,H}(),l.mode.CTRGladman)},9098:function(Rt,Je,M){var H,h,l;Rt.exports=(l=M(7656),M(2414),l.mode.CTR=(h=(H=l.lib.BlockCipherMode.extend()).Encryptor=H.extend({processBlock:function(fe,X){var ie=this._cipher,de=ie.blockSize,Q=this._iv,z=this._counter;Q&&(z=this._counter=Q.slice(0),this._iv=void 0);var L=z.slice(0);ie.encryptBlock(L,0),z[de-1]=z[de-1]+1|0;for(var I=0;I<de;I++)fe[X+I]^=L[I]}}),H.Decryptor=h,H),l.mode.CTR)},6115:function(Rt,Je,M){var H,l;Rt.exports=(l=M(7656),M(2414),l.mode.ECB=((H=l.lib.BlockCipherMode.extend()).Encryptor=H.extend({processBlock:function(h,fe){this._cipher.encryptBlock(h,fe)}}),H.Decryptor=H.extend({processBlock:function(h,fe){this._cipher.decryptBlock(h,fe)}}),H),l.mode.ECB)},6700:function(Rt,Je,M){var H,h,l;Rt.exports=(l=M(7656),M(2414),l.mode.OFB=(h=(H=l.lib.BlockCipherMode.extend()).Encryptor=H.extend({processBlock:function(fe,X){var ie=this._cipher,de=ie.blockSize,Q=this._iv,z=this._keystream;Q&&(z=this._keystream=Q.slice(0),this._iv=void 0),ie.encryptBlock(z,0);for(var L=0;L<de;L++)fe[X+L]^=z[L]}}),H.Decryptor=h,H),l.mode.OFB)},332:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(2414),l.pad.AnsiX923={pad:function(H,h){var fe=H.sigBytes,X=4*h,ie=X-fe%X,de=fe+ie-1;H.clamp(),H.words[de>>>2]|=ie<<24-de%4*8,H.sigBytes+=ie},unpad:function(H){H.sigBytes-=255&H.words[H.sigBytes-1>>>2]}},l.pad.Ansix923)},7516:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(2414),l.pad.Iso10126={pad:function(H,h){var fe=4*h,X=fe-H.sigBytes%fe;H.concat(l.lib.WordArray.random(X-1)).concat(l.lib.WordArray.create([X<<24],1))},unpad:function(H){H.sigBytes-=255&H.words[H.sigBytes-1>>>2]}},l.pad.Iso10126)},9047:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(2414),l.pad.Iso97971={pad:function(H,h){H.concat(l.lib.WordArray.create([2147483648],1)),l.pad.ZeroPadding.pad(H,h)},unpad:function(H){l.pad.ZeroPadding.unpad(H),H.sigBytes--}},l.pad.Iso97971)},2599:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(2414),l.pad.NoPadding={pad:function(){},unpad:function(){}},l.pad.NoPadding)},6964:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(2414),l.pad.ZeroPadding={pad:function(H,h){var fe=4*h;H.clamp(),H.sigBytes+=fe-(H.sigBytes%fe||fe)},unpad:function(H){var h=H.words,fe=H.sigBytes-1;for(fe=H.sigBytes-1;fe>=0;fe--)if(h[fe>>>2]>>>24-fe%4*8&255){H.sigBytes=fe+1;break}}},l.pad.ZeroPadding)},7738:function(Rt,Je,M){var H,h,fe,X,ie,Q,z,l;Rt.exports=(l=M(7656),M(5168),M(7868),X=(h=(H=l).lib).WordArray,Q=(ie=H.algo).HMAC,z=ie.PBKDF2=(fe=h.Base).extend({cfg:fe.extend({keySize:4,hasher:ie.SHA256,iterations:25e4}),init:function(L){this.cfg=this.cfg.extend(L)},compute:function(L,I){for(var K=this.cfg,te=Q.create(K.hasher,L),ee=X.create(),ue=X.create([1]),Ce=ee.words,Re=ue.words,ye=K.keySize,Te=K.iterations;Ce.length<ye;){var We=te.update(I).finalize(ue);te.reset();for(var He=We.words,ke=He.length,Ke=We,St=1;St<Te;St++){Ke=te.finalize(Ke),te.reset();for(var pt=Ke.words,ct=0;ct<ke;ct++)He[ct]^=pt[ct]}ee.concat(We),Re[0]++}return ee.sigBytes=4*ye,ee}}),H.PBKDF2=function(L,I,K){return z.create(K).compute(L,I)},l.PBKDF2)},2923:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(8891),M(8855),M(4147),M(2414),function(){var H=l,fe=H.lib.StreamCipher,ie=[],de=[],Q=[],z=H.algo.RabbitLegacy=fe.extend({_doReset:function(){var I=this._key.words,K=this.cfg.iv,te=this._X=[I[0],I[3]<<16|I[2]>>>16,I[1],I[0]<<16|I[3]>>>16,I[2],I[1]<<16|I[0]>>>16,I[3],I[2]<<16|I[1]>>>16],ee=this._C=[I[2]<<16|I[2]>>>16,4294901760&I[0]|65535&I[1],I[3]<<16|I[3]>>>16,4294901760&I[1]|65535&I[2],I[0]<<16|I[0]>>>16,4294901760&I[2]|65535&I[3],I[1]<<16|I[1]>>>16,4294901760&I[3]|65535&I[0]];this._b=0;for(var ue=0;ue<4;ue++)L.call(this);for(ue=0;ue<8;ue++)ee[ue]^=te[ue+4&7];if(K){var Ce=K.words,Re=Ce[0],ye=Ce[1],Te=16711935&(Re<<8|Re>>>24)|4278255360&(Re<<24|Re>>>8),We=16711935&(ye<<8|ye>>>24)|4278255360&(ye<<24|ye>>>8),He=Te>>>16|4294901760&We,ke=We<<16|65535&Te;for(ee[0]^=Te,ee[1]^=He,ee[2]^=We,ee[3]^=ke,ee[4]^=Te,ee[5]^=He,ee[6]^=We,ee[7]^=ke,ue=0;ue<4;ue++)L.call(this)}},_doProcessBlock:function(I,K){var te=this._X;L.call(this),ie[0]=te[0]^te[5]>>>16^te[3]<<16,ie[1]=te[2]^te[7]>>>16^te[5]<<16,ie[2]=te[4]^te[1]>>>16^te[7]<<16,ie[3]=te[6]^te[3]>>>16^te[1]<<16;for(var ee=0;ee<4;ee++)ie[ee]=16711935&(ie[ee]<<8|ie[ee]>>>24)|4278255360&(ie[ee]<<24|ie[ee]>>>8),I[K+ee]^=ie[ee]},blockSize:4,ivSize:2});function L(){for(var I=this._X,K=this._C,te=0;te<8;te++)de[te]=K[te];for(K[0]=K[0]+1295307597+this._b|0,K[1]=K[1]+3545052371+(K[0]>>>0<de[0]>>>0?1:0)|0,K[2]=K[2]+886263092+(K[1]>>>0<de[1]>>>0?1:0)|0,K[3]=K[3]+1295307597+(K[2]>>>0<de[2]>>>0?1:0)|0,K[4]=K[4]+3545052371+(K[3]>>>0<de[3]>>>0?1:0)|0,K[5]=K[5]+886263092+(K[4]>>>0<de[4]>>>0?1:0)|0,K[6]=K[6]+1295307597+(K[5]>>>0<de[5]>>>0?1:0)|0,K[7]=K[7]+3545052371+(K[6]>>>0<de[6]>>>0?1:0)|0,this._b=K[7]>>>0<de[7]>>>0?1:0,te=0;te<8;te++){var ee=I[te]+K[te],ue=65535&ee,Ce=ee>>>16;Q[te]=((ue*ue>>>17)+ue*Ce>>>15)+Ce*Ce^((4294901760&ee)*ee|0)+((65535&ee)*ee|0)}I[0]=Q[0]+(Q[7]<<16|Q[7]>>>16)+(Q[6]<<16|Q[6]>>>16)|0,I[1]=Q[1]+(Q[0]<<8|Q[0]>>>24)+Q[7]|0,I[2]=Q[2]+(Q[1]<<16|Q[1]>>>16)+(Q[0]<<16|Q[0]>>>16)|0,I[3]=Q[3]+(Q[2]<<8|Q[2]>>>24)+Q[1]|0,I[4]=Q[4]+(Q[3]<<16|Q[3]>>>16)+(Q[2]<<16|Q[2]>>>16)|0,I[5]=Q[5]+(Q[4]<<8|Q[4]>>>24)+Q[3]|0,I[6]=Q[6]+(Q[5]<<16|Q[5]>>>16)+(Q[4]<<16|Q[4]>>>16)|0,I[7]=Q[7]+(Q[6]<<8|Q[6]>>>24)+Q[5]|0}H.RabbitLegacy=fe._createHelper(z)}(),l.RabbitLegacy)},2795:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(8891),M(8855),M(4147),M(2414),function(){var H=l,fe=H.lib.StreamCipher,ie=[],de=[],Q=[],z=H.algo.Rabbit=fe.extend({_doReset:function(){for(var I=this._key.words,K=this.cfg.iv,te=0;te<4;te++)I[te]=16711935&(I[te]<<8|I[te]>>>24)|4278255360&(I[te]<<24|I[te]>>>8);var ee=this._X=[I[0],I[3]<<16|I[2]>>>16,I[1],I[0]<<16|I[3]>>>16,I[2],I[1]<<16|I[0]>>>16,I[3],I[2]<<16|I[1]>>>16],ue=this._C=[I[2]<<16|I[2]>>>16,4294901760&I[0]|65535&I[1],I[3]<<16|I[3]>>>16,4294901760&I[1]|65535&I[2],I[0]<<16|I[0]>>>16,4294901760&I[2]|65535&I[3],I[1]<<16|I[1]>>>16,4294901760&I[3]|65535&I[0]];for(this._b=0,te=0;te<4;te++)L.call(this);for(te=0;te<8;te++)ue[te]^=ee[te+4&7];if(K){var Ce=K.words,Re=Ce[0],ye=Ce[1],Te=16711935&(Re<<8|Re>>>24)|4278255360&(Re<<24|Re>>>8),We=16711935&(ye<<8|ye>>>24)|4278255360&(ye<<24|ye>>>8),He=Te>>>16|4294901760&We,ke=We<<16|65535&Te;for(ue[0]^=Te,ue[1]^=He,ue[2]^=We,ue[3]^=ke,ue[4]^=Te,ue[5]^=He,ue[6]^=We,ue[7]^=ke,te=0;te<4;te++)L.call(this)}},_doProcessBlock:function(I,K){var te=this._X;L.call(this),ie[0]=te[0]^te[5]>>>16^te[3]<<16,ie[1]=te[2]^te[7]>>>16^te[5]<<16,ie[2]=te[4]^te[1]>>>16^te[7]<<16,ie[3]=te[6]^te[3]>>>16^te[1]<<16;for(var ee=0;ee<4;ee++)ie[ee]=16711935&(ie[ee]<<8|ie[ee]>>>24)|4278255360&(ie[ee]<<24|ie[ee]>>>8),I[K+ee]^=ie[ee]},blockSize:4,ivSize:2});function L(){for(var I=this._X,K=this._C,te=0;te<8;te++)de[te]=K[te];for(K[0]=K[0]+1295307597+this._b|0,K[1]=K[1]+3545052371+(K[0]>>>0<de[0]>>>0?1:0)|0,K[2]=K[2]+886263092+(K[1]>>>0<de[1]>>>0?1:0)|0,K[3]=K[3]+1295307597+(K[2]>>>0<de[2]>>>0?1:0)|0,K[4]=K[4]+3545052371+(K[3]>>>0<de[3]>>>0?1:0)|0,K[5]=K[5]+886263092+(K[4]>>>0<de[4]>>>0?1:0)|0,K[6]=K[6]+1295307597+(K[5]>>>0<de[5]>>>0?1:0)|0,K[7]=K[7]+3545052371+(K[6]>>>0<de[6]>>>0?1:0)|0,this._b=K[7]>>>0<de[7]>>>0?1:0,te=0;te<8;te++){var ee=I[te]+K[te],ue=65535&ee,Ce=ee>>>16;Q[te]=((ue*ue>>>17)+ue*Ce>>>15)+Ce*Ce^((4294901760&ee)*ee|0)+((65535&ee)*ee|0)}I[0]=Q[0]+(Q[7]<<16|Q[7]>>>16)+(Q[6]<<16|Q[6]>>>16)|0,I[1]=Q[1]+(Q[0]<<8|Q[0]>>>24)+Q[7]|0,I[2]=Q[2]+(Q[1]<<16|Q[1]>>>16)+(Q[0]<<16|Q[0]>>>16)|0,I[3]=Q[3]+(Q[2]<<8|Q[2]>>>24)+Q[1]|0,I[4]=Q[4]+(Q[3]<<16|Q[3]>>>16)+(Q[2]<<16|Q[2]>>>16)|0,I[5]=Q[5]+(Q[4]<<8|Q[4]>>>24)+Q[3]|0,I[6]=Q[6]+(Q[5]<<16|Q[5]>>>16)+(Q[4]<<16|Q[4]>>>16)|0,I[7]=Q[7]+(Q[6]<<8|Q[6]>>>24)+Q[5]|0}H.Rabbit=fe._createHelper(z)}(),l.Rabbit)},5350:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(8891),M(8855),M(4147),M(2414),function(){var H=l,fe=H.lib.StreamCipher,X=H.algo,ie=X.RC4=fe.extend({_doReset:function(){for(var z=this._key,L=z.words,I=z.sigBytes,K=this._S=[],te=0;te<256;te++)K[te]=te;te=0;for(var ee=0;te<256;te++){var ue=te%I,Re=K[te];K[te]=K[ee=(ee+K[te]+(L[ue>>>2]>>>24-ue%4*8&255))%256],K[ee]=Re}this._i=this._j=0},_doProcessBlock:function(z,L){z[L]^=de.call(this)},keySize:8,ivSize:0});function de(){for(var z=this._S,L=this._i,I=this._j,K=0,te=0;te<4;te++){var ee=z[L=(L+1)%256];z[L]=z[I=(I+z[L])%256],z[I]=ee,K|=z[(z[L]+z[I])%256]<<24-8*te}return this._i=L,this._j=I,K}H.RC4=fe._createHelper(ie);var Q=X.RC4Drop=ie.extend({cfg:ie.cfg.extend({drop:192}),_doReset:function(){ie._doReset.call(this);for(var z=this.cfg.drop;z>0;z--)de.call(this)}});H.RC4Drop=fe._createHelper(Q)}(),l.RC4)},447:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),function(H){var h=l,fe=h.lib,X=fe.WordArray,ie=fe.Hasher,de=h.algo,Q=X.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),z=X.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),L=X.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),I=X.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),K=X.create([0,1518500249,1859775393,2400959708,2840853838]),te=X.create([1352829926,1548603684,1836072691,2053994217,0]),ee=de.RIPEMD160=ie.extend({_doReset:function(){this._hash=X.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(He,ke){for(var Ke=0;Ke<16;Ke++){var St=ke+Ke,pt=He[St];He[St]=16711935&(pt<<8|pt>>>24)|4278255360&(pt<<24|pt>>>8)}var Ee,Ve,Ne,V,Oe,Ot,ot,Ut,ze,Mt,st,ct=this._hash.words,le=K.words,x=te.words,C=Q.words,j=z.words,J=L.words,_e=I.words;for(Ot=Ee=ct[0],ot=Ve=ct[1],Ut=Ne=ct[2],ze=V=ct[3],Mt=Oe=ct[4],Ke=0;Ke<80;Ke+=1)st=Ee+He[ke+C[Ke]]|0,st+=Ke<16?ue(Ve,Ne,V)+le[0]:Ke<32?Ce(Ve,Ne,V)+le[1]:Ke<48?Re(Ve,Ne,V)+le[2]:Ke<64?ye(Ve,Ne,V)+le[3]:Te(Ve,Ne,V)+le[4],st=(st=We(st|=0,J[Ke]))+Oe|0,Ee=Oe,Oe=V,V=We(Ne,10),Ne=Ve,Ve=st,st=Ot+He[ke+j[Ke]]|0,st+=Ke<16?Te(ot,Ut,ze)+x[0]:Ke<32?ye(ot,Ut,ze)+x[1]:Ke<48?Re(ot,Ut,ze)+x[2]:Ke<64?Ce(ot,Ut,ze)+x[3]:ue(ot,Ut,ze)+x[4],st=(st=We(st|=0,_e[Ke]))+Mt|0,Ot=Mt,Mt=ze,ze=We(Ut,10),Ut=ot,ot=st;st=ct[1]+Ne+ze|0,ct[1]=ct[2]+V+Mt|0,ct[2]=ct[3]+Oe+Ot|0,ct[3]=ct[4]+Ee+ot|0,ct[4]=ct[0]+Ve+Ut|0,ct[0]=st},_doFinalize:function(){var He=this._data,ke=He.words,Ke=8*this._nDataBytes,St=8*He.sigBytes;ke[St>>>5]|=128<<24-St%32,ke[14+(St+64>>>9<<4)]=16711935&(Ke<<8|Ke>>>24)|4278255360&(Ke<<24|Ke>>>8),He.sigBytes=4*(ke.length+1),this._process();for(var pt=this._hash,ct=pt.words,le=0;le<5;le++){var x=ct[le];ct[le]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8)}return pt},clone:function(){var He=ie.clone.call(this);return He._hash=this._hash.clone(),He}});function ue(He,ke,Ke){return He^ke^Ke}function Ce(He,ke,Ke){return He&ke|~He&Ke}function Re(He,ke,Ke){return(He|~ke)^Ke}function ye(He,ke,Ke){return He&Ke|ke&~Ke}function Te(He,ke,Ke){return He^(ke|~Ke)}function We(He,ke){return He<<ke|He>>>32-ke}h.RIPEMD160=ie._createHelper(ee),h.HmacRIPEMD160=ie._createHmacHelper(ee)}(Math),l.RIPEMD160)},9986:function(Rt,Je,M){var H,h,fe,X,de,Q,l;Rt.exports=(l=M(7656),fe=(h=(H=l).lib).WordArray,de=[],Q=H.algo.SHA1=(X=h.Hasher).extend({_doReset:function(){this._hash=new fe.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(z,L){for(var I=this._hash.words,K=I[0],te=I[1],ee=I[2],ue=I[3],Ce=I[4],Re=0;Re<80;Re++){if(Re<16)de[Re]=0|z[L+Re];else{var ye=de[Re-3]^de[Re-8]^de[Re-14]^de[Re-16];de[Re]=ye<<1|ye>>>31}var Te=(K<<5|K>>>27)+Ce+de[Re];Te+=Re<20?1518500249+(te&ee|~te&ue):Re<40?1859775393+(te^ee^ue):Re<60?(te&ee|te&ue|ee&ue)-1894007588:(te^ee^ue)-899497514,Ce=ue,ue=ee,ee=te<<30|te>>>2,te=K,K=Te}I[0]=I[0]+K|0,I[1]=I[1]+te|0,I[2]=I[2]+ee|0,I[3]=I[3]+ue|0,I[4]=I[4]+Ce|0},_doFinalize:function(){var z=this._data,L=z.words,I=8*this._nDataBytes,K=8*z.sigBytes;return L[K>>>5]|=128<<24-K%32,L[14+(K+64>>>9<<4)]=Math.floor(I/4294967296),L[15+(K+64>>>9<<4)]=I,z.sigBytes=4*L.length,this._process(),this._hash},clone:function(){var z=X.clone.call(this);return z._hash=this._hash.clone(),z}}),H.SHA1=X._createHelper(Q),H.HmacSHA1=X._createHmacHelper(Q),l.SHA1)},9225:function(Rt,Je,M){var H,fe,X,ie,de,l;Rt.exports=(l=M(7656),M(5168),fe=(H=l).lib.WordArray,de=(X=H.algo).SHA224=(ie=X.SHA256).extend({_doReset:function(){this._hash=new fe.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var Q=ie._doFinalize.call(this);return Q.sigBytes-=4,Q}}),H.SHA224=ie._createHelper(de),H.HmacSHA224=ie._createHmacHelper(de),l.SHA224)},5168:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),function(H){var h=l,fe=h.lib,X=fe.WordArray,ie=fe.Hasher,de=h.algo,Q=[],z=[];!function(){function K(Ce){for(var Re=H.sqrt(Ce),ye=2;ye<=Re;ye++)if(!(Ce%ye))return!1;return!0}function te(Ce){return 4294967296*(Ce-(0|Ce))|0}for(var ee=2,ue=0;ue<64;)K(ee)&&(ue<8&&(Q[ue]=te(H.pow(ee,.5))),z[ue]=te(H.pow(ee,1/3)),ue++),ee++}();var L=[],I=de.SHA256=ie.extend({_doReset:function(){this._hash=new X.init(Q.slice(0))},_doProcessBlock:function(K,te){for(var ee=this._hash.words,ue=ee[0],Ce=ee[1],Re=ee[2],ye=ee[3],Te=ee[4],We=ee[5],He=ee[6],ke=ee[7],Ke=0;Ke<64;Ke++){if(Ke<16)L[Ke]=0|K[te+Ke];else{var St=L[Ke-15],ct=L[Ke-2];L[Ke]=((St<<25|St>>>7)^(St<<14|St>>>18)^St>>>3)+L[Ke-7]+((ct<<15|ct>>>17)^(ct<<13|ct>>>19)^ct>>>10)+L[Ke-16]}var C=ue&Ce^ue&Re^Ce&Re,_e=ke+((Te<<26|Te>>>6)^(Te<<21|Te>>>11)^(Te<<7|Te>>>25))+(Te&We^~Te&He)+z[Ke]+L[Ke];ke=He,He=We,We=Te,Te=ye+_e|0,ye=Re,Re=Ce,Ce=ue,ue=_e+(((ue<<30|ue>>>2)^(ue<<19|ue>>>13)^(ue<<10|ue>>>22))+C)|0}ee[0]=ee[0]+ue|0,ee[1]=ee[1]+Ce|0,ee[2]=ee[2]+Re|0,ee[3]=ee[3]+ye|0,ee[4]=ee[4]+Te|0,ee[5]=ee[5]+We|0,ee[6]=ee[6]+He|0,ee[7]=ee[7]+ke|0},_doFinalize:function(){var K=this._data,te=K.words,ee=8*this._nDataBytes,ue=8*K.sigBytes;return te[ue>>>5]|=128<<24-ue%32,te[14+(ue+64>>>9<<4)]=H.floor(ee/4294967296),te[15+(ue+64>>>9<<4)]=ee,K.sigBytes=4*te.length,this._process(),this._hash},clone:function(){var K=ie.clone.call(this);return K._hash=this._hash.clone(),K}});h.SHA256=ie._createHelper(I),h.HmacSHA256=ie._createHmacHelper(I)}(Math),l.SHA256)},3752:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(4501),function(H){var h=l,fe=h.lib,X=fe.WordArray,ie=fe.Hasher,Q=h.x64.Word,z=h.algo,L=[],I=[],K=[];!function(){for(var ue=1,Ce=0,Re=0;Re<24;Re++){L[ue+5*Ce]=(Re+1)*(Re+2)/2%64;var Te=(2*ue+3*Ce)%5;ue=Ce%5,Ce=Te}for(ue=0;ue<5;ue++)for(Ce=0;Ce<5;Ce++)I[ue+5*Ce]=Ce+(2*ue+3*Ce)%5*5;for(var We=1,He=0;He<24;He++){for(var ke=0,Ke=0,St=0;St<7;St++){if(1&We){var pt=(1<<St)-1;pt<32?Ke^=1<<pt:ke^=1<<pt-32}128&We?We=We<<1^113:We<<=1}K[He]=Q.create(ke,Ke)}}();var te=[];!function(){for(var ue=0;ue<25;ue++)te[ue]=Q.create()}();var ee=z.SHA3=ie.extend({cfg:ie.cfg.extend({outputLength:512}),_doReset:function(){for(var ue=this._state=[],Ce=0;Ce<25;Ce++)ue[Ce]=new Q.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(ue,Ce){for(var Re=this._state,ye=this.blockSize/2,Te=0;Te<ye;Te++){var We=ue[Ce+2*Te],He=ue[Ce+2*Te+1];We=16711935&(We<<8|We>>>24)|4278255360&(We<<24|We>>>8),(ke=Re[Te]).high^=He=16711935&(He<<8|He>>>24)|4278255360&(He<<24|He>>>8),ke.low^=We}for(var Ke=0;Ke<24;Ke++){for(var St=0;St<5;St++){for(var pt=0,ct=0,le=0;le<5;le++)pt^=(ke=Re[St+5*le]).high,ct^=ke.low;var x=te[St];x.high=pt,x.low=ct}for(St=0;St<5;St++){var C=te[(St+4)%5],j=te[(St+1)%5],J=j.high,_e=j.low;for(pt=C.high^(J<<1|_e>>>31),ct=C.low^(_e<<1|J>>>31),le=0;le<5;le++)(ke=Re[St+5*le]).high^=pt,ke.low^=ct}for(var Ee=1;Ee<25;Ee++){var Ve=(ke=Re[Ee]).high,Ne=ke.low,V=L[Ee];V<32?(pt=Ve<<V|Ne>>>32-V,ct=Ne<<V|Ve>>>32-V):(pt=Ne<<V-32|Ve>>>64-V,ct=Ve<<V-32|Ne>>>64-V);var Oe=te[I[Ee]];Oe.high=pt,Oe.low=ct}var Ot=te[0],ot=Re[0];for(Ot.high=ot.high,Ot.low=ot.low,St=0;St<5;St++)for(le=0;le<5;le++){var Ut=te[Ee=St+5*le],ze=te[(St+1)%5+5*le],Mt=te[(St+2)%5+5*le];(ke=Re[Ee]).high=Ut.high^~ze.high&Mt.high,ke.low=Ut.low^~ze.low&Mt.low}var ke,st=K[Ke];(ke=Re[0]).high^=st.high,ke.low^=st.low}},_doFinalize:function(){var ue=this._data,Ce=ue.words,ye=8*ue.sigBytes,Te=32*this.blockSize;Ce[ye>>>5]|=1<<24-ye%32,Ce[(H.ceil((ye+1)/Te)*Te>>>5)-1]|=128,ue.sigBytes=4*Ce.length,this._process();for(var We=this._state,He=this.cfg.outputLength/8,ke=He/8,Ke=[],St=0;St<ke;St++){var pt=We[St],ct=pt.high,le=pt.low;ct=16711935&(ct<<8|ct>>>24)|4278255360&(ct<<24|ct>>>8),Ke.push(le=16711935&(le<<8|le>>>24)|4278255360&(le<<24|le>>>8)),Ke.push(ct)}return new X.init(Ke,He)},clone:function(){for(var ue=ie.clone.call(this),Ce=ue._state=this._state.slice(0),Re=0;Re<25;Re++)Ce[Re]=Ce[Re].clone();return ue}});h.SHA3=ie._createHelper(ee),h.HmacSHA3=ie._createHmacHelper(ee)}(Math),l.SHA3)},4068:function(Rt,Je,M){var H,h,fe,X,ie,de,Q,l;Rt.exports=(l=M(7656),M(4501),M(885),fe=(h=(H=l).x64).Word,X=h.WordArray,Q=(ie=H.algo).SHA384=(de=ie.SHA512).extend({_doReset:function(){this._hash=new X.init([new fe.init(3418070365,3238371032),new fe.init(1654270250,914150663),new fe.init(2438529370,812702999),new fe.init(355462360,4144912697),new fe.init(1731405415,4290775857),new fe.init(2394180231,1750603025),new fe.init(3675008525,1694076839),new fe.init(1203062813,3204075428)])},_doFinalize:function(){var z=de._doFinalize.call(this);return z.sigBytes-=16,z}}),H.SHA384=de._createHelper(Q),H.HmacSHA384=de._createHmacHelper(Q),l.SHA384)},885:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(4501),function(){var H=l,fe=H.lib.Hasher,X=H.x64,ie=X.Word,de=X.WordArray,Q=H.algo;function z(){return ie.create.apply(ie,arguments)}var L=[z(1116352408,3609767458),z(1899447441,602891725),z(3049323471,3964484399),z(3921009573,2173295548),z(961987163,4081628472),z(1508970993,3053834265),z(2453635748,2937671579),z(2870763221,3664609560),z(3624381080,2734883394),z(310598401,1164996542),z(607225278,1323610764),z(1426881987,3590304994),z(1925078388,4068182383),z(2162078206,991336113),z(2614888103,633803317),z(3248222580,3479774868),z(3835390401,2666613458),z(4022224774,944711139),z(264347078,2341262773),z(604807628,2007800933),z(770255983,1495990901),z(1249150122,1856431235),z(1555081692,3175218132),z(1996064986,2198950837),z(2554220882,3999719339),z(2821834349,766784016),z(2952996808,2566594879),z(3210313671,3203337956),z(3336571891,1034457026),z(3584528711,2466948901),z(113926993,3758326383),z(338241895,168717936),z(666307205,1188179964),z(773529912,1546045734),z(1294757372,1522805485),z(1396182291,2643833823),z(1695183700,2343527390),z(1986661051,1014477480),z(2177026350,1206759142),z(2456956037,344077627),z(2730485921,1290863460),z(2820302411,3158454273),z(3259730800,3505952657),z(3345764771,106217008),z(3516065817,3606008344),z(3600352804,1432725776),z(4094571909,1467031594),z(275423344,851169720),z(430227734,3100823752),z(506948616,1363258195),z(659060556,3750685593),z(883997877,3785050280),z(958139571,3318307427),z(1322822218,3812723403),z(1537002063,2003034995),z(1747873779,3602036899),z(1955562222,1575990012),z(2024104815,1125592928),z(2227730452,2716904306),z(2361852424,442776044),z(2428436474,593698344),z(2756734187,3733110249),z(3204031479,2999351573),z(3329325298,3815920427),z(3391569614,3928383900),z(3515267271,566280711),z(3940187606,3454069534),z(4118630271,4000239992),z(116418474,1914138554),z(174292421,2731055270),z(289380356,3203993006),z(460393269,320620315),z(685471733,587496836),z(852142971,1086792851),z(1017036298,365543100),z(1126000580,2618297676),z(1288033470,3409855158),z(1501505948,4234509866),z(1607167915,987167468),z(1816402316,1246189591)],I=[];!function(){for(var te=0;te<80;te++)I[te]=z()}();var K=Q.SHA512=fe.extend({_doReset:function(){this._hash=new de.init([new ie.init(1779033703,4089235720),new ie.init(3144134277,2227873595),new ie.init(1013904242,4271175723),new ie.init(2773480762,1595750129),new ie.init(1359893119,2917565137),new ie.init(2600822924,725511199),new ie.init(528734635,4215389547),new ie.init(1541459225,327033209)])},_doProcessBlock:function(te,ee){for(var ue=this._hash.words,Ce=ue[0],Re=ue[1],ye=ue[2],Te=ue[3],We=ue[4],He=ue[5],ke=ue[6],Ke=ue[7],St=Ce.high,pt=Ce.low,ct=Re.high,le=Re.low,x=ye.high,C=ye.low,j=Te.high,J=Te.low,_e=We.high,Ee=We.low,Ve=He.high,Ne=He.low,V=ke.high,Oe=ke.low,Ot=Ke.high,ot=Ke.low,Ut=St,ze=pt,Mt=ct,st=le,je=x,yt=C,Yt=j,dn=J,fn=_e,Sn=Ee,Gt=Ve,vn=Ne,at=V,Dt=Oe,Tt=Ot,un=ot,Ln=0;Ln<80;Ln++){var Yn,Vn,Yr=I[Ln];if(Ln<16)Vn=Yr.high=0|te[ee+2*Ln],Yn=Yr.low=0|te[ee+2*Ln+1];else{var Gn=I[Ln-15],An=Gn.high,ii=Gn.low,$i=(ii>>>1|An<<31)^(ii>>>8|An<<24)^(ii>>>7|An<<25),Ri=I[Ln-2],Ki=Ri.high,Pi=Ri.low,ri=(Pi>>>19|Ki<<13)^(Pi<<3|Ki>>>29)^(Pi>>>6|Ki<<26),qi=I[Ln-7],Cr=I[Ln-16],Lr=Cr.low;Yr.high=Vn=(Vn=(Vn=((An>>>1|ii<<31)^(An>>>8|ii<<24)^An>>>7)+qi.high+((Yn=$i+qi.low)>>>0<$i>>>0?1:0))+((Ki>>>19|Pi<<13)^(Ki<<3|Pi>>>29)^Ki>>>6)+((Yn+=ri)>>>0<ri>>>0?1:0))+Cr.high+((Yn+=Lr)>>>0<Lr>>>0?1:0),Yr.low=Yn}var si,or=fn&Gt^~fn&at,Bs=Sn&vn^~Sn&Dt,Pr=Ut&Mt^Ut&je^Mt&je,rt=(ze>>>28|Ut<<4)^(ze<<30|Ut>>>2)^(ze<<25|Ut>>>7),mn=L[Ln],Qi=mn.low,Oi=Tt+((fn>>>14|Sn<<18)^(fn>>>18|Sn<<14)^(fn<<23|Sn>>>9))+((si=un+((Sn>>>14|fn<<18)^(Sn>>>18|fn<<14)^(Sn<<23|fn>>>9)))>>>0<un>>>0?1:0),kr=rt+(ze&st^ze&yt^st&yt);Tt=at,un=Dt,at=Gt,Dt=vn,Gt=fn,vn=Sn,fn=Yt+(Oi=(Oi=(Oi=Oi+or+((si+=Bs)>>>0<Bs>>>0?1:0))+mn.high+((si+=Qi)>>>0<Qi>>>0?1:0))+Vn+((si+=Yn)>>>0<Yn>>>0?1:0))+((Sn=dn+si|0)>>>0<dn>>>0?1:0)|0,Yt=je,dn=yt,je=Mt,yt=st,Mt=Ut,st=ze,Ut=Oi+(((Ut>>>28|ze<<4)^(Ut<<30|ze>>>2)^(Ut<<25|ze>>>7))+Pr+(kr>>>0<rt>>>0?1:0))+((ze=si+kr|0)>>>0<si>>>0?1:0)|0}pt=Ce.low=pt+ze,Ce.high=St+Ut+(pt>>>0<ze>>>0?1:0),le=Re.low=le+st,Re.high=ct+Mt+(le>>>0<st>>>0?1:0),C=ye.low=C+yt,ye.high=x+je+(C>>>0<yt>>>0?1:0),J=Te.low=J+dn,Te.high=j+Yt+(J>>>0<dn>>>0?1:0),Ee=We.low=Ee+Sn,We.high=_e+fn+(Ee>>>0<Sn>>>0?1:0),Ne=He.low=Ne+vn,He.high=Ve+Gt+(Ne>>>0<vn>>>0?1:0),Oe=ke.low=Oe+Dt,ke.high=V+at+(Oe>>>0<Dt>>>0?1:0),ot=Ke.low=ot+un,Ke.high=Ot+Tt+(ot>>>0<un>>>0?1:0)},_doFinalize:function(){var te=this._data,ee=te.words,ue=8*this._nDataBytes,Ce=8*te.sigBytes;return ee[Ce>>>5]|=128<<24-Ce%32,ee[30+(Ce+128>>>10<<5)]=Math.floor(ue/4294967296),ee[31+(Ce+128>>>10<<5)]=ue,te.sigBytes=4*ee.length,this._process(),this._hash.toX32()},clone:function(){var te=fe.clone.call(this);return te._hash=this._hash.clone(),te},blockSize:32});H.SHA512=fe._createHelper(K),H.HmacSHA512=fe._createHmacHelper(K)}(),l.SHA512)},2515:function(Rt,Je,M){var l;Rt.exports=(l=M(7656),M(8891),M(8855),M(4147),M(2414),function(){var H=l,h=H.lib,fe=h.WordArray,X=h.BlockCipher,ie=H.algo,de=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],Q=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],z=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],L=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],I=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],K=ie.DES=X.extend({_doReset:function(){for(var Re=this._key.words,ye=[],Te=0;Te<56;Te++){var We=de[Te]-1;ye[Te]=Re[We>>>5]>>>31-We%32&1}for(var He=this._subKeys=[],ke=0;ke<16;ke++){var Ke=He[ke]=[],St=z[ke];for(Te=0;Te<24;Te++)Ke[Te/6|0]|=ye[(Q[Te]-1+St)%28]<<31-Te%6,Ke[4+(Te/6|0)]|=ye[28+(Q[Te+24]-1+St)%28]<<31-Te%6;for(Ke[0]=Ke[0]<<1|Ke[0]>>>31,Te=1;Te<7;Te++)Ke[Te]=Ke[Te]>>>4*(Te-1)+3;Ke[7]=Ke[7]<<5|Ke[7]>>>27}var pt=this._invSubKeys=[];for(Te=0;Te<16;Te++)pt[Te]=He[15-Te]},encryptBlock:function(Ce,Re){this._doCryptBlock(Ce,Re,this._subKeys)},decryptBlock:function(Ce,Re){this._doCryptBlock(Ce,Re,this._invSubKeys)},_doCryptBlock:function(Ce,Re,ye){this._lBlock=Ce[Re],this._rBlock=Ce[Re+1],te.call(this,4,252645135),te.call(this,16,65535),ee.call(this,2,858993459),ee.call(this,8,16711935),te.call(this,1,1431655765);for(var Te=0;Te<16;Te++){for(var We=ye[Te],He=this._lBlock,ke=this._rBlock,Ke=0,St=0;St<8;St++)Ke|=L[St][((ke^We[St])&I[St])>>>0];this._lBlock=ke,this._rBlock=He^Ke}var pt=this._lBlock;this._lBlock=this._rBlock,this._rBlock=pt,te.call(this,1,1431655765),ee.call(this,8,16711935),ee.call(this,2,858993459),te.call(this,16,65535),te.call(this,4,252645135),Ce[Re]=this._lBlock,Ce[Re+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function te(Ce,Re){var ye=(this._lBlock>>>Ce^this._rBlock)&Re;this._rBlock^=ye,this._lBlock^=ye<<Ce}function ee(Ce,Re){var ye=(this._rBlock>>>Ce^this._lBlock)&Re;this._lBlock^=ye,this._rBlock^=ye<<Ce}H.DES=X._createHelper(K);var ue=ie.TripleDES=X.extend({_doReset:function(){var Re=this._key.words;if(2!==Re.length&&4!==Re.length&&Re.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var ye=Re.slice(0,2),Te=Re.length<4?Re.slice(0,2):Re.slice(2,4),We=Re.length<6?Re.slice(0,2):Re.slice(4,6);this._des1=K.createEncryptor(fe.create(ye)),this._des2=K.createEncryptor(fe.create(Te)),this._des3=K.createEncryptor(fe.create(We))},encryptBlock:function(Ce,Re){this._des1.encryptBlock(Ce,Re),this._des2.decryptBlock(Ce,Re),this._des3.encryptBlock(Ce,Re)},decryptBlock:function(Ce,Re){this._des3.decryptBlock(Ce,Re),this._des2.encryptBlock(Ce,Re),this._des1.decryptBlock(Ce,Re)},keySize:6,ivSize:2,blockSize:2});H.TripleDES=X._createHelper(ue)}(),l.TripleDES)},4501:function(Rt,Je,M){var fe,X,ie,de,l;Rt.exports=(l=M(7656),X=(fe=l.lib).Base,ie=fe.WordArray,(de=l.x64={}).Word=X.extend({init:function(L,I){this.high=L,this.low=I}}),de.WordArray=X.extend({init:function(L,I){L=this.words=L||[],this.sigBytes=null!=I?I:8*L.length},toX32:function(){for(var L=this.words,I=L.length,K=[],te=0;te<I;te++){var ee=L[te];K.push(ee.high),K.push(ee.low)}return ie.create(K,this.sigBytes)},clone:function(){for(var L=X.clone.call(this),I=L.words=this.words.slice(0),K=I.length,te=0;te<K;te++)I[te]=I[te].clone();return L}}),l)},518:(Rt,Je,M)=>{"use strict";var l=Je;l.version=M(1636).rE,l.utils=M(3136),l.rand=M(5294),l.curve=M(8729),l.curves=M(3401),l.ec=M(9042),l.eddsa=M(3045)},8828:(Rt,Je,M)=>{"use strict";var l=M(917),H=M(3136),h=H.getNAF,fe=H.getJSF,X=H.assert;function ie(Q,z){this.type=Q,this.p=new l(z.p,16),this.red=z.prime?l.red(z.prime):l.mont(this.p),this.zero=new l(0).toRed(this.red),this.one=new l(1).toRed(this.red),this.two=new l(2).toRed(this.red),this.n=z.n&&new l(z.n,16),this.g=z.g&&this.pointFromJSON(z.g,z.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var L=this.n&&this.p.div(this.n);!L||L.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function de(Q,z){this.curve=Q,this.type=z,this.precomputed=null}Rt.exports=ie,ie.prototype.point=function(){throw new Error("Not implemented")},ie.prototype.validate=function(){throw new Error("Not implemented")},ie.prototype._fixedNafMul=function(z,L){X(z.precomputed);var I=z._getDoubles(),K=h(L,1,this._bitLength),te=(1<<I.step+1)-(I.step%2==0?2:1);te/=3;var ue,Ce,ee=[];for(ue=0;ue<K.length;ue+=I.step){Ce=0;for(var Re=ue+I.step-1;Re>=ue;Re--)Ce=(Ce<<1)+K[Re];ee.push(Ce)}for(var ye=this.jpoint(null,null,null),Te=this.jpoint(null,null,null),We=te;We>0;We--){for(ue=0;ue<ee.length;ue++)(Ce=ee[ue])===We?Te=Te.mixedAdd(I.points[ue]):Ce===-We&&(Te=Te.mixedAdd(I.points[ue].neg()));ye=ye.add(Te)}return ye.toP()},ie.prototype._wnafMul=function(z,L){for(var I=4,K=z._getNAFPoints(I),te=K.points,ee=h(L,I=K.wnd,this._bitLength),ue=this.jpoint(null,null,null),Ce=ee.length-1;Ce>=0;Ce--){for(var Re=0;Ce>=0&&0===ee[Ce];Ce--)Re++;if(Ce>=0&&Re++,ue=ue.dblp(Re),Ce<0)break;var ye=ee[Ce];X(0!==ye),ue="affine"===z.type?ue.mixedAdd(ye>0?te[ye-1>>1]:te[-ye-1>>1].neg()):ue.add(ye>0?te[ye-1>>1]:te[-ye-1>>1].neg())}return"affine"===z.type?ue.toP():ue},ie.prototype._wnafMulAdd=function(z,L,I,K,te){var ye,Te,We,ee=this._wnafT1,ue=this._wnafT2,Ce=this._wnafT3,Re=0;for(ye=0;ye<K;ye++){var He=(We=L[ye])._getNAFPoints(z);ee[ye]=He.wnd,ue[ye]=He.points}for(ye=K-1;ye>=1;ye-=2){var ke=ye-1,Ke=ye;if(1===ee[ke]&&1===ee[Ke]){var St=[L[ke],null,null,L[Ke]];0===L[ke].y.cmp(L[Ke].y)?(St[1]=L[ke].add(L[Ke]),St[2]=L[ke].toJ().mixedAdd(L[Ke].neg())):0===L[ke].y.cmp(L[Ke].y.redNeg())?(St[1]=L[ke].toJ().mixedAdd(L[Ke]),St[2]=L[ke].add(L[Ke].neg())):(St[1]=L[ke].toJ().mixedAdd(L[Ke]),St[2]=L[ke].toJ().mixedAdd(L[Ke].neg()));var pt=[-3,-1,-5,-7,0,7,5,1,3],ct=fe(I[ke],I[Ke]);for(Re=Math.max(ct[0].length,Re),Ce[ke]=new Array(Re),Ce[Ke]=new Array(Re),Te=0;Te<Re;Te++)Ce[ke][Te]=pt[3*(1+(0|ct[0][Te]))+(1+(0|ct[1][Te]))],Ce[Ke][Te]=0,ue[ke]=St}else Ce[ke]=h(I[ke],ee[ke],this._bitLength),Ce[Ke]=h(I[Ke],ee[Ke],this._bitLength),Re=Math.max(Ce[ke].length,Re),Re=Math.max(Ce[Ke].length,Re)}var C=this.jpoint(null,null,null),j=this._wnafT4;for(ye=Re;ye>=0;ye--){for(var J=0;ye>=0;){var _e=!0;for(Te=0;Te<K;Te++)j[Te]=0|Ce[Te][ye],0!==j[Te]&&(_e=!1);if(!_e)break;J++,ye--}if(ye>=0&&J++,C=C.dblp(J),ye<0)break;for(Te=0;Te<K;Te++){var Ee=j[Te];0!==Ee&&(Ee>0?We=ue[Te][Ee-1>>1]:Ee<0&&(We=ue[Te][-Ee-1>>1].neg()),C="affine"===We.type?C.mixedAdd(We):C.add(We))}}for(ye=0;ye<K;ye++)ue[ye]=null;return te?C:C.toP()},ie.BasePoint=de,de.prototype.eq=function(){throw new Error("Not implemented")},de.prototype.validate=function(){return this.curve.validate(this)},ie.prototype.decodePoint=function(z,L){z=H.toArray(z,L);var I=this.p.byteLength();if((4===z[0]||6===z[0]||7===z[0])&&z.length-1==2*I)return 6===z[0]?X(z[z.length-1]%2==0):7===z[0]&&X(z[z.length-1]%2==1),this.point(z.slice(1,1+I),z.slice(1+I,1+2*I));if((2===z[0]||3===z[0])&&z.length-1===I)return this.pointFromX(z.slice(1,1+I),3===z[0]);throw new Error("Unknown point format")},de.prototype.encodeCompressed=function(z){return this.encode(z,!0)},de.prototype._encode=function(z){var L=this.curve.p.byteLength(),I=this.getX().toArray("be",L);return z?[this.getY().isEven()?2:3].concat(I):[4].concat(I,this.getY().toArray("be",L))},de.prototype.encode=function(z,L){return H.encode(this._encode(L),z)},de.prototype.precompute=function(z){if(this.precomputed)return this;var L={doubles:null,naf:null,beta:null};return L.naf=this._getNAFPoints(8),L.doubles=this._getDoubles(4,z),L.beta=this._getBeta(),this.precomputed=L,this},de.prototype._hasDoubles=function(z){if(!this.precomputed)return!1;var L=this.precomputed.doubles;return!!L&&L.points.length>=Math.ceil((z.bitLength()+1)/L.step)},de.prototype._getDoubles=function(z,L){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var I=[this],K=this,te=0;te<L;te+=z){for(var ee=0;ee<z;ee++)K=K.dbl();I.push(K)}return{step:z,points:I}},de.prototype._getNAFPoints=function(z){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var L=[this],I=(1<<z)-1,K=1===I?null:this.dbl(),te=1;te<I;te++)L[te]=L[te-1].add(K);return{wnd:z,points:L}},de.prototype._getBeta=function(){return null},de.prototype.dblp=function(z){for(var L=this,I=0;I<z;I++)L=L.dbl();return L}},5537:(Rt,Je,M)=>{"use strict";var l=M(3136),H=M(917),h=M(1993),fe=M(8828),X=l.assert;function ie(Q){this.twisted=1!=(0|Q.a),this.mOneA=this.twisted&&-1==(0|Q.a),this.extended=this.mOneA,fe.call(this,"edwards",Q),this.a=new H(Q.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new H(Q.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new H(Q.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),X(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|Q.c)}function de(Q,z,L,I,K){fe.BasePoint.call(this,Q,"projective"),null===z&&null===L&&null===I?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new H(z,16),this.y=new H(L,16),this.z=I?new H(I,16):this.curve.one,this.t=K&&new H(K,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}h(ie,fe),Rt.exports=ie,ie.prototype._mulA=function(z){return this.mOneA?z.redNeg():this.a.redMul(z)},ie.prototype._mulC=function(z){return this.oneC?z:this.c.redMul(z)},ie.prototype.jpoint=function(z,L,I,K){return this.point(z,L,I,K)},ie.prototype.pointFromX=function(z,L){(z=new H(z,16)).red||(z=z.toRed(this.red));var I=z.redSqr(),K=this.c2.redSub(this.a.redMul(I)),te=this.one.redSub(this.c2.redMul(this.d).redMul(I)),ee=K.redMul(te.redInvm()),ue=ee.redSqrt();if(0!==ue.redSqr().redSub(ee).cmp(this.zero))throw new Error("invalid point");var Ce=ue.fromRed().isOdd();return(L&&!Ce||!L&&Ce)&&(ue=ue.redNeg()),this.point(z,ue)},ie.prototype.pointFromY=function(z,L){(z=new H(z,16)).red||(z=z.toRed(this.red));var I=z.redSqr(),K=I.redSub(this.c2),te=I.redMul(this.d).redMul(this.c2).redSub(this.a),ee=K.redMul(te.redInvm());if(0===ee.cmp(this.zero)){if(L)throw new Error("invalid point");return this.point(this.zero,z)}var ue=ee.redSqrt();if(0!==ue.redSqr().redSub(ee).cmp(this.zero))throw new Error("invalid point");return ue.fromRed().isOdd()!==L&&(ue=ue.redNeg()),this.point(ue,z)},ie.prototype.validate=function(z){if(z.isInfinity())return!0;z.normalize();var L=z.x.redSqr(),I=z.y.redSqr(),K=L.redMul(this.a).redAdd(I),te=this.c2.redMul(this.one.redAdd(this.d.redMul(L).redMul(I)));return 0===K.cmp(te)},h(de,fe.BasePoint),ie.prototype.pointFromJSON=function(z){return de.fromJSON(this,z)},ie.prototype.point=function(z,L,I,K){return new de(this,z,L,I,K)},de.fromJSON=function(z,L){return new de(z,L[0],L[1],L[2])},de.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},de.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},de.prototype._extDbl=function(){var z=this.x.redSqr(),L=this.y.redSqr(),I=this.z.redSqr();I=I.redIAdd(I);var K=this.curve._mulA(z),te=this.x.redAdd(this.y).redSqr().redISub(z).redISub(L),ee=K.redAdd(L),ue=ee.redSub(I),Ce=K.redSub(L),Re=te.redMul(ue),ye=ee.redMul(Ce),Te=te.redMul(Ce),We=ue.redMul(ee);return this.curve.point(Re,ye,We,Te)},de.prototype._projDbl=function(){var K,te,ee,ue,Ce,Re,z=this.x.redAdd(this.y).redSqr(),L=this.x.redSqr(),I=this.y.redSqr();if(this.curve.twisted){var ye=(ue=this.curve._mulA(L)).redAdd(I);this.zOne?(K=z.redSub(L).redSub(I).redMul(ye.redSub(this.curve.two)),te=ye.redMul(ue.redSub(I)),ee=ye.redSqr().redSub(ye).redSub(ye)):(Ce=this.z.redSqr(),Re=ye.redSub(Ce).redISub(Ce),K=z.redSub(L).redISub(I).redMul(Re),te=ye.redMul(ue.redSub(I)),ee=ye.redMul(Re))}else ue=L.redAdd(I),Ce=this.curve._mulC(this.z).redSqr(),Re=ue.redSub(Ce).redSub(Ce),K=this.curve._mulC(z.redISub(ue)).redMul(Re),te=this.curve._mulC(ue).redMul(L.redISub(I)),ee=ue.redMul(Re);return this.curve.point(K,te,ee)},de.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},de.prototype._extAdd=function(z){var L=this.y.redSub(this.x).redMul(z.y.redSub(z.x)),I=this.y.redAdd(this.x).redMul(z.y.redAdd(z.x)),K=this.t.redMul(this.curve.dd).redMul(z.t),te=this.z.redMul(z.z.redAdd(z.z)),ee=I.redSub(L),ue=te.redSub(K),Ce=te.redAdd(K),Re=I.redAdd(L),ye=ee.redMul(ue),Te=Ce.redMul(Re),We=ee.redMul(Re),He=ue.redMul(Ce);return this.curve.point(ye,Te,He,We)},de.prototype._projAdd=function(z){var Te,We,L=this.z.redMul(z.z),I=L.redSqr(),K=this.x.redMul(z.x),te=this.y.redMul(z.y),ee=this.curve.d.redMul(K).redMul(te),ue=I.redSub(ee),Ce=I.redAdd(ee),Re=this.x.redAdd(this.y).redMul(z.x.redAdd(z.y)).redISub(K).redISub(te),ye=L.redMul(ue).redMul(Re);return this.curve.twisted?(Te=L.redMul(Ce).redMul(te.redSub(this.curve._mulA(K))),We=ue.redMul(Ce)):(Te=L.redMul(Ce).redMul(te.redSub(K)),We=this.curve._mulC(ue).redMul(Ce)),this.curve.point(ye,Te,We)},de.prototype.add=function(z){return this.isInfinity()?z:z.isInfinity()?this:this.curve.extended?this._extAdd(z):this._projAdd(z)},de.prototype.mul=function(z){return this._hasDoubles(z)?this.curve._fixedNafMul(this,z):this.curve._wnafMul(this,z)},de.prototype.mulAdd=function(z,L,I){return this.curve._wnafMulAdd(1,[this,L],[z,I],2,!1)},de.prototype.jmulAdd=function(z,L,I){return this.curve._wnafMulAdd(1,[this,L],[z,I],2,!0)},de.prototype.normalize=function(){if(this.zOne)return this;var z=this.z.redInvm();return this.x=this.x.redMul(z),this.y=this.y.redMul(z),this.t&&(this.t=this.t.redMul(z)),this.z=this.curve.one,this.zOne=!0,this},de.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},de.prototype.getX=function(){return this.normalize(),this.x.fromRed()},de.prototype.getY=function(){return this.normalize(),this.y.fromRed()},de.prototype.eq=function(z){return this===z||0===this.getX().cmp(z.getX())&&0===this.getY().cmp(z.getY())},de.prototype.eqXToP=function(z){var L=z.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(L))return!0;for(var I=z.clone(),K=this.curve.redN.redMul(this.z);;){if(I.iadd(this.curve.n),I.cmp(this.curve.p)>=0)return!1;if(L.redIAdd(K),0===this.x.cmp(L))return!0}},de.prototype.toP=de.prototype.normalize,de.prototype.mixedAdd=de.prototype.add},8729:(Rt,Je,M)=>{"use strict";var l=Je;l.base=M(8828),l.short=M(8075),l.mont=M(4947),l.edwards=M(5537)},4947:(Rt,Je,M)=>{"use strict";var l=M(917),H=M(1993),h=M(8828),fe=M(3136);function X(de){h.call(this,"mont",de),this.a=new l(de.a,16).toRed(this.red),this.b=new l(de.b,16).toRed(this.red),this.i4=new l(4).toRed(this.red).redInvm(),this.two=new l(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function ie(de,Q,z){h.BasePoint.call(this,de,"projective"),null===Q&&null===z?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new l(Q,16),this.z=new l(z,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}H(X,h),Rt.exports=X,X.prototype.validate=function(Q){var z=Q.normalize().x,L=z.redSqr(),I=L.redMul(z).redAdd(L.redMul(this.a)).redAdd(z);return 0===I.redSqrt().redSqr().cmp(I)},H(ie,h.BasePoint),X.prototype.decodePoint=function(Q,z){return this.point(fe.toArray(Q,z),1)},X.prototype.point=function(Q,z){return new ie(this,Q,z)},X.prototype.pointFromJSON=function(Q){return ie.fromJSON(this,Q)},ie.prototype.precompute=function(){},ie.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},ie.fromJSON=function(Q,z){return new ie(Q,z[0],z[1]||Q.one)},ie.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},ie.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},ie.prototype.dbl=function(){var z=this.x.redAdd(this.z).redSqr(),I=this.x.redSub(this.z).redSqr(),K=z.redSub(I),te=z.redMul(I),ee=K.redMul(I.redAdd(this.curve.a24.redMul(K)));return this.curve.point(te,ee)},ie.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},ie.prototype.diffAdd=function(Q,z){var L=this.x.redAdd(this.z),I=this.x.redSub(this.z),K=Q.x.redAdd(Q.z),ee=Q.x.redSub(Q.z).redMul(L),ue=K.redMul(I),Ce=z.z.redMul(ee.redAdd(ue).redSqr()),Re=z.x.redMul(ee.redISub(ue).redSqr());return this.curve.point(Ce,Re)},ie.prototype.mul=function(Q){for(var z=Q.clone(),L=this,I=this.curve.point(null,null),te=[];0!==z.cmpn(0);z.iushrn(1))te.push(z.andln(1));for(var ee=te.length-1;ee>=0;ee--)0===te[ee]?(L=L.diffAdd(I,this),I=I.dbl()):(I=L.diffAdd(I,this),L=L.dbl());return I},ie.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},ie.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},ie.prototype.eq=function(Q){return 0===this.getX().cmp(Q.getX())},ie.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},ie.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},8075:(Rt,Je,M)=>{"use strict";var l=M(3136),H=M(917),h=M(1993),fe=M(8828),X=l.assert;function ie(z){fe.call(this,"short",z),this.a=new H(z.a,16).toRed(this.red),this.b=new H(z.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(z),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function de(z,L,I,K){fe.BasePoint.call(this,z,"affine"),null===L&&null===I?(this.x=null,this.y=null,this.inf=!0):(this.x=new H(L,16),this.y=new H(I,16),K&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Q(z,L,I,K){fe.BasePoint.call(this,z,"jacobian"),null===L&&null===I&&null===K?(this.x=this.curve.one,this.y=this.curve.one,this.z=new H(0)):(this.x=new H(L,16),this.y=new H(I,16),this.z=new H(K,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}h(ie,fe),Rt.exports=ie,ie.prototype._getEndomorphism=function(L){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var I,K;if(L.beta)I=new H(L.beta,16).toRed(this.red);else{var te=this._getEndoRoots(this.p);I=(I=te[0].cmp(te[1])<0?te[0]:te[1]).toRed(this.red)}if(L.lambda)K=new H(L.lambda,16);else{var ee=this._getEndoRoots(this.n);0===this.g.mul(ee[0]).x.cmp(this.g.x.redMul(I))?K=ee[0]:X(0===this.g.mul(K=ee[1]).x.cmp(this.g.x.redMul(I)))}return{beta:I,lambda:K,basis:L.basis?L.basis.map(function(Ce){return{a:new H(Ce.a,16),b:new H(Ce.b,16)}}):this._getEndoBasis(K)}}},ie.prototype._getEndoRoots=function(L){var I=L===this.p?this.red:H.mont(L),K=new H(2).toRed(I).redInvm(),te=K.redNeg(),ee=new H(3).toRed(I).redNeg().redSqrt().redMul(K);return[te.redAdd(ee).fromRed(),te.redSub(ee).fromRed()]},ie.prototype._getEndoBasis=function(L){for(var ye,Te,We,He,ke,Ke,St,ct,le,I=this.n.ushrn(Math.floor(this.n.bitLength()/2)),K=L,te=this.n.clone(),ee=new H(1),ue=new H(0),Ce=new H(0),Re=new H(1),pt=0;0!==K.cmpn(0);){var x=te.div(K);ct=te.sub(x.mul(K)),le=Ce.sub(x.mul(ee));var C=Re.sub(x.mul(ue));if(!We&&ct.cmp(I)<0)ye=St.neg(),Te=ee,We=ct.neg(),He=le;else if(We&&2==++pt)break;St=ct,te=K,K=ct,Ce=ee,ee=le,Re=ue,ue=C}ke=ct.neg(),Ke=le;var j=We.sqr().add(He.sqr());return ke.sqr().add(Ke.sqr()).cmp(j)>=0&&(ke=ye,Ke=Te),We.negative&&(We=We.neg(),He=He.neg()),ke.negative&&(ke=ke.neg(),Ke=Ke.neg()),[{a:We,b:He},{a:ke,b:Ke}]},ie.prototype._endoSplit=function(L){var I=this.endo.basis,K=I[0],te=I[1],ee=te.b.mul(L).divRound(this.n),ue=K.b.neg().mul(L).divRound(this.n),Ce=ee.mul(K.a),Re=ue.mul(te.a),ye=ee.mul(K.b),Te=ue.mul(te.b);return{k1:L.sub(Ce).sub(Re),k2:ye.add(Te).neg()}},ie.prototype.pointFromX=function(L,I){(L=new H(L,16)).red||(L=L.toRed(this.red));var K=L.redSqr().redMul(L).redIAdd(L.redMul(this.a)).redIAdd(this.b),te=K.redSqrt();if(0!==te.redSqr().redSub(K).cmp(this.zero))throw new Error("invalid point");var ee=te.fromRed().isOdd();return(I&&!ee||!I&&ee)&&(te=te.redNeg()),this.point(L,te)},ie.prototype.validate=function(L){if(L.inf)return!0;var I=L.x,K=L.y,te=this.a.redMul(I),ee=I.redSqr().redMul(I).redIAdd(te).redIAdd(this.b);return 0===K.redSqr().redISub(ee).cmpn(0)},ie.prototype._endoWnafMulAdd=function(L,I,K){for(var te=this._endoWnafT1,ee=this._endoWnafT2,ue=0;ue<L.length;ue++){var Ce=this._endoSplit(I[ue]),Re=L[ue],ye=Re._getBeta();Ce.k1.negative&&(Ce.k1.ineg(),Re=Re.neg(!0)),Ce.k2.negative&&(Ce.k2.ineg(),ye=ye.neg(!0)),te[2*ue]=Re,te[2*ue+1]=ye,ee[2*ue]=Ce.k1,ee[2*ue+1]=Ce.k2}for(var Te=this._wnafMulAdd(1,te,ee,2*ue,K),We=0;We<2*ue;We++)te[We]=null,ee[We]=null;return Te},h(de,fe.BasePoint),ie.prototype.point=function(L,I,K){return new de(this,L,I,K)},ie.prototype.pointFromJSON=function(L,I){return de.fromJSON(this,L,I)},de.prototype._getBeta=function(){if(this.curve.endo){var L=this.precomputed;if(L&&L.beta)return L.beta;var I=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(L){var K=this.curve,te=function(ee){return K.point(ee.x.redMul(K.endo.beta),ee.y)};L.beta=I,I.precomputed={beta:null,naf:L.naf&&{wnd:L.naf.wnd,points:L.naf.points.map(te)},doubles:L.doubles&&{step:L.doubles.step,points:L.doubles.points.map(te)}}}return I}},de.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},de.fromJSON=function(L,I,K){"string"==typeof I&&(I=JSON.parse(I));var te=L.point(I[0],I[1],K);if(!I[2])return te;function ee(Ce){return L.point(Ce[0],Ce[1],K)}var ue=I[2];return te.precomputed={beta:null,doubles:ue.doubles&&{step:ue.doubles.step,points:[te].concat(ue.doubles.points.map(ee))},naf:ue.naf&&{wnd:ue.naf.wnd,points:[te].concat(ue.naf.points.map(ee))}},te},de.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},de.prototype.isInfinity=function(){return this.inf},de.prototype.add=function(L){if(this.inf)return L;if(L.inf)return this;if(this.eq(L))return this.dbl();if(this.neg().eq(L))return this.curve.point(null,null);if(0===this.x.cmp(L.x))return this.curve.point(null,null);var I=this.y.redSub(L.y);0!==I.cmpn(0)&&(I=I.redMul(this.x.redSub(L.x).redInvm()));var K=I.redSqr().redISub(this.x).redISub(L.x),te=I.redMul(this.x.redSub(K)).redISub(this.y);return this.curve.point(K,te)},de.prototype.dbl=function(){if(this.inf)return this;var L=this.y.redAdd(this.y);if(0===L.cmpn(0))return this.curve.point(null,null);var I=this.curve.a,K=this.x.redSqr(),te=L.redInvm(),ee=K.redAdd(K).redIAdd(K).redIAdd(I).redMul(te),ue=ee.redSqr().redISub(this.x.redAdd(this.x)),Ce=ee.redMul(this.x.redSub(ue)).redISub(this.y);return this.curve.point(ue,Ce)},de.prototype.getX=function(){return this.x.fromRed()},de.prototype.getY=function(){return this.y.fromRed()},de.prototype.mul=function(L){return L=new H(L,16),this.isInfinity()?this:this._hasDoubles(L)?this.curve._fixedNafMul(this,L):this.curve.endo?this.curve._endoWnafMulAdd([this],[L]):this.curve._wnafMul(this,L)},de.prototype.mulAdd=function(L,I,K){var te=[this,I],ee=[L,K];return this.curve.endo?this.curve._endoWnafMulAdd(te,ee):this.curve._wnafMulAdd(1,te,ee,2)},de.prototype.jmulAdd=function(L,I,K){var te=[this,I],ee=[L,K];return this.curve.endo?this.curve._endoWnafMulAdd(te,ee,!0):this.curve._wnafMulAdd(1,te,ee,2,!0)},de.prototype.eq=function(L){return this===L||this.inf===L.inf&&(this.inf||0===this.x.cmp(L.x)&&0===this.y.cmp(L.y))},de.prototype.neg=function(L){if(this.inf)return this;var I=this.curve.point(this.x,this.y.redNeg());if(L&&this.precomputed){var K=this.precomputed,te=function(ee){return ee.neg()};I.precomputed={naf:K.naf&&{wnd:K.naf.wnd,points:K.naf.points.map(te)},doubles:K.doubles&&{step:K.doubles.step,points:K.doubles.points.map(te)}}}return I},de.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},h(Q,fe.BasePoint),ie.prototype.jpoint=function(L,I,K){return new Q(this,L,I,K)},Q.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var L=this.z.redInvm(),I=L.redSqr(),K=this.x.redMul(I),te=this.y.redMul(I).redMul(L);return this.curve.point(K,te)},Q.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Q.prototype.add=function(L){if(this.isInfinity())return L;if(L.isInfinity())return this;var I=L.z.redSqr(),K=this.z.redSqr(),te=this.x.redMul(I),ee=L.x.redMul(K),ue=this.y.redMul(I.redMul(L.z)),Ce=L.y.redMul(K.redMul(this.z)),Re=te.redSub(ee),ye=ue.redSub(Ce);if(0===Re.cmpn(0))return 0!==ye.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var Te=Re.redSqr(),We=Te.redMul(Re),He=te.redMul(Te),ke=ye.redSqr().redIAdd(We).redISub(He).redISub(He),Ke=ye.redMul(He.redISub(ke)).redISub(ue.redMul(We)),St=this.z.redMul(L.z).redMul(Re);return this.curve.jpoint(ke,Ke,St)},Q.prototype.mixedAdd=function(L){if(this.isInfinity())return L.toJ();if(L.isInfinity())return this;var I=this.z.redSqr(),K=this.x,te=L.x.redMul(I),ee=this.y,ue=L.y.redMul(I).redMul(this.z),Ce=K.redSub(te),Re=ee.redSub(ue);if(0===Ce.cmpn(0))return 0!==Re.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var ye=Ce.redSqr(),Te=ye.redMul(Ce),We=K.redMul(ye),He=Re.redSqr().redIAdd(Te).redISub(We).redISub(We),ke=Re.redMul(We.redISub(He)).redISub(ee.redMul(Te)),Ke=this.z.redMul(Ce);return this.curve.jpoint(He,ke,Ke)},Q.prototype.dblp=function(L){if(0===L)return this;if(this.isInfinity())return this;if(!L)return this.dbl();var I;if(this.curve.zeroA||this.curve.threeA){var K=this;for(I=0;I<L;I++)K=K.dbl();return K}var te=this.curve.a,ee=this.curve.tinv,ue=this.x,Ce=this.y,Re=this.z,ye=Re.redSqr().redSqr(),Te=Ce.redAdd(Ce);for(I=0;I<L;I++){var We=ue.redSqr(),He=Te.redSqr(),ke=He.redSqr(),Ke=We.redAdd(We).redIAdd(We).redIAdd(te.redMul(ye)),St=ue.redMul(He),pt=Ke.redSqr().redISub(St.redAdd(St)),ct=St.redISub(pt),le=Ke.redMul(ct);le=le.redIAdd(le).redISub(ke);var x=Te.redMul(Re);I+1<L&&(ye=ye.redMul(ke)),ue=pt,Re=x,Te=le}return this.curve.jpoint(ue,Te.redMul(ee),Re)},Q.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Q.prototype._zeroDbl=function(){var L,I,K;if(this.zOne){var te=this.x.redSqr(),ee=this.y.redSqr(),ue=ee.redSqr(),Ce=this.x.redAdd(ee).redSqr().redISub(te).redISub(ue);Ce=Ce.redIAdd(Ce);var Re=te.redAdd(te).redIAdd(te),ye=Re.redSqr().redISub(Ce).redISub(Ce),Te=ue.redIAdd(ue);Te=(Te=Te.redIAdd(Te)).redIAdd(Te),L=ye,I=Re.redMul(Ce.redISub(ye)).redISub(Te),K=this.y.redAdd(this.y)}else{var We=this.x.redSqr(),He=this.y.redSqr(),ke=He.redSqr(),Ke=this.x.redAdd(He).redSqr().redISub(We).redISub(ke);Ke=Ke.redIAdd(Ke);var St=We.redAdd(We).redIAdd(We),pt=St.redSqr(),ct=ke.redIAdd(ke);ct=(ct=ct.redIAdd(ct)).redIAdd(ct),L=pt.redISub(Ke).redISub(Ke),I=St.redMul(Ke.redISub(L)).redISub(ct),K=(K=this.y.redMul(this.z)).redIAdd(K)}return this.curve.jpoint(L,I,K)},Q.prototype._threeDbl=function(){var L,I,K;if(this.zOne){var te=this.x.redSqr(),ee=this.y.redSqr(),ue=ee.redSqr(),Ce=this.x.redAdd(ee).redSqr().redISub(te).redISub(ue);Ce=Ce.redIAdd(Ce);var Re=te.redAdd(te).redIAdd(te).redIAdd(this.curve.a),ye=Re.redSqr().redISub(Ce).redISub(Ce);L=ye;var Te=ue.redIAdd(ue);Te=(Te=Te.redIAdd(Te)).redIAdd(Te),I=Re.redMul(Ce.redISub(ye)).redISub(Te),K=this.y.redAdd(this.y)}else{var We=this.z.redSqr(),He=this.y.redSqr(),ke=this.x.redMul(He),Ke=this.x.redSub(We).redMul(this.x.redAdd(We));Ke=Ke.redAdd(Ke).redIAdd(Ke);var St=ke.redIAdd(ke),pt=(St=St.redIAdd(St)).redAdd(St);L=Ke.redSqr().redISub(pt),K=this.y.redAdd(this.z).redSqr().redISub(He).redISub(We);var ct=He.redSqr();ct=(ct=(ct=ct.redIAdd(ct)).redIAdd(ct)).redIAdd(ct),I=Ke.redMul(St.redISub(L)).redISub(ct)}return this.curve.jpoint(L,I,K)},Q.prototype._dbl=function(){var L=this.curve.a,I=this.x,K=this.y,te=this.z,ee=te.redSqr().redSqr(),ue=I.redSqr(),Ce=K.redSqr(),Re=ue.redAdd(ue).redIAdd(ue).redIAdd(L.redMul(ee)),ye=I.redAdd(I),Te=(ye=ye.redIAdd(ye)).redMul(Ce),We=Re.redSqr().redISub(Te.redAdd(Te)),He=Te.redISub(We),ke=Ce.redSqr();ke=(ke=(ke=ke.redIAdd(ke)).redIAdd(ke)).redIAdd(ke);var Ke=Re.redMul(He).redISub(ke),St=K.redAdd(K).redMul(te);return this.curve.jpoint(We,Ke,St)},Q.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var L=this.x.redSqr(),I=this.y.redSqr(),K=this.z.redSqr(),te=I.redSqr(),ee=L.redAdd(L).redIAdd(L),ue=ee.redSqr(),Ce=this.x.redAdd(I).redSqr().redISub(L).redISub(te),Re=(Ce=(Ce=(Ce=Ce.redIAdd(Ce)).redAdd(Ce).redIAdd(Ce)).redISub(ue)).redSqr(),ye=te.redIAdd(te);ye=(ye=(ye=ye.redIAdd(ye)).redIAdd(ye)).redIAdd(ye);var Te=ee.redIAdd(Ce).redSqr().redISub(ue).redISub(Re).redISub(ye),We=I.redMul(Te);We=(We=We.redIAdd(We)).redIAdd(We);var He=this.x.redMul(Re).redISub(We);He=(He=He.redIAdd(He)).redIAdd(He);var ke=this.y.redMul(Te.redMul(ye.redISub(Te)).redISub(Ce.redMul(Re)));ke=(ke=(ke=ke.redIAdd(ke)).redIAdd(ke)).redIAdd(ke);var Ke=this.z.redAdd(Ce).redSqr().redISub(K).redISub(Re);return this.curve.jpoint(He,ke,Ke)},Q.prototype.mul=function(L,I){return L=new H(L,I),this.curve._wnafMul(this,L)},Q.prototype.eq=function(L){if("affine"===L.type)return this.eq(L.toJ());if(this===L)return!0;var I=this.z.redSqr(),K=L.z.redSqr();if(0!==this.x.redMul(K).redISub(L.x.redMul(I)).cmpn(0))return!1;var te=I.redMul(this.z),ee=K.redMul(L.z);return 0===this.y.redMul(ee).redISub(L.y.redMul(te)).cmpn(0)},Q.prototype.eqXToP=function(L){var I=this.z.redSqr(),K=L.toRed(this.curve.red).redMul(I);if(0===this.x.cmp(K))return!0;for(var te=L.clone(),ee=this.curve.redN.redMul(I);;){if(te.iadd(this.curve.n),te.cmp(this.curve.p)>=0)return!1;if(K.redIAdd(ee),0===this.x.cmp(K))return!0}},Q.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Q.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},3401:(Rt,Je,M)=>{"use strict";var Q,l=Je,H=M(2529),h=M(8729),X=M(3136).assert;function ie(z){this.curve="short"===z.type?new h.short(z):"edwards"===z.type?new h.edwards(z):new h.mont(z),this.g=this.curve.g,this.n=this.curve.n,this.hash=z.hash,X(this.g.validate(),"Invalid curve"),X(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function de(z,L){Object.defineProperty(l,z,{configurable:!0,enumerable:!0,get:function(){var I=new ie(L);return Object.defineProperty(l,z,{configurable:!0,enumerable:!0,value:I}),I}})}l.PresetCurve=ie,de("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:H.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),de("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:H.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),de("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:H.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),de("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:H.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),de("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:H.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),de("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:H.sha256,gRed:!1,g:["9"]}),de("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:H.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{Q=M(1416)}catch{Q=void 0}de("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:H.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",Q]})},9042:(Rt,Je,M)=>{"use strict";var l=M(917),H=M(3556),h=M(3136),fe=M(3401),X=M(5294),ie=h.assert,de=M(541),Q=M(484);function z(L){if(!(this instanceof z))return new z(L);"string"==typeof L&&(ie(Object.prototype.hasOwnProperty.call(fe,L),"Unknown curve "+L),L=fe[L]),L instanceof fe.PresetCurve&&(L={curve:L}),this.curve=L.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=L.curve.g,this.g.precompute(L.curve.n.bitLength()+1),this.hash=L.hash||L.curve.hash}Rt.exports=z,z.prototype.keyPair=function(I){return new de(this,I)},z.prototype.keyFromPrivate=function(I,K){return de.fromPrivate(this,I,K)},z.prototype.keyFromPublic=function(I,K){return de.fromPublic(this,I,K)},z.prototype.genKeyPair=function(I){I||(I={});for(var K=new H({hash:this.hash,pers:I.pers,persEnc:I.persEnc||"utf8",entropy:I.entropy||X(this.hash.hmacStrength),entropyEnc:I.entropy&&I.entropyEnc||"utf8",nonce:this.n.toArray()}),te=this.n.byteLength(),ee=this.n.sub(new l(2));;){var ue=new l(K.generate(te));if(!(ue.cmp(ee)>0))return ue.iaddn(1),this.keyFromPrivate(ue)}},z.prototype._truncateToN=function(I,K){var te=8*I.byteLength()-this.n.bitLength();return te>0&&(I=I.ushrn(te)),!K&&I.cmp(this.n)>=0?I.sub(this.n):I},z.prototype.sign=function(I,K,te,ee){"object"==typeof te&&(ee=te,te=null),ee||(ee={}),K=this.keyFromPrivate(K,te),I=this._truncateToN(new l(I,16));for(var ue=this.n.byteLength(),Ce=K.getPrivate().toArray("be",ue),Re=I.toArray("be",ue),ye=new H({hash:this.hash,entropy:Ce,nonce:Re,pers:ee.pers,persEnc:ee.persEnc||"utf8"}),Te=this.n.sub(new l(1)),We=0;;We++){var He=ee.k?ee.k(We):new l(ye.generate(this.n.byteLength()));if(!((He=this._truncateToN(He,!0)).cmpn(1)<=0||He.cmp(Te)>=0)){var ke=this.g.mul(He);if(!ke.isInfinity()){var Ke=ke.getX(),St=Ke.umod(this.n);if(0!==St.cmpn(0)){var pt=He.invm(this.n).mul(St.mul(K.getPrivate()).iadd(I));if(0!==(pt=pt.umod(this.n)).cmpn(0)){var ct=(ke.getY().isOdd()?1:0)|(0!==Ke.cmp(St)?2:0);return ee.canonical&&pt.cmp(this.nh)>0&&(pt=this.n.sub(pt),ct^=1),new Q({r:St,s:pt,recoveryParam:ct})}}}}}},z.prototype.verify=function(I,K,te,ee){I=this._truncateToN(new l(I,16)),te=this.keyFromPublic(te,ee);var ue=(K=new Q(K,"hex")).r,Ce=K.s;if(ue.cmpn(1)<0||ue.cmp(this.n)>=0||Ce.cmpn(1)<0||Ce.cmp(this.n)>=0)return!1;var We,Re=Ce.invm(this.n),ye=Re.mul(I).umod(this.n),Te=Re.mul(ue).umod(this.n);return this.curve._maxwellTrick?!(We=this.g.jmulAdd(ye,te.getPublic(),Te)).isInfinity()&&We.eqXToP(ue):!(We=this.g.mulAdd(ye,te.getPublic(),Te)).isInfinity()&&0===We.getX().umod(this.n).cmp(ue)},z.prototype.recoverPubKey=function(L,I,K,te){ie((3&K)===K,"The recovery param is more than two bits"),I=new Q(I,te);var ee=this.n,ue=new l(L),Ce=I.r,Re=I.s,ye=1&K,Te=K>>1;if(Ce.cmp(this.curve.p.umod(this.curve.n))>=0&&Te)throw new Error("Unable to find sencond key candinate");Ce=this.curve.pointFromX(Te?Ce.add(this.curve.n):Ce,ye);var We=I.r.invm(ee),He=ee.sub(ue).mul(We).umod(ee),ke=Re.mul(We).umod(ee);return this.g.mulAdd(He,Ce,ke)},z.prototype.getKeyRecoveryParam=function(L,I,K,te){if(null!==(I=new Q(I,te)).recoveryParam)return I.recoveryParam;for(var ee=0;ee<4;ee++){var ue;try{ue=this.recoverPubKey(L,I,ee)}catch{continue}if(ue.eq(K))return ee}throw new Error("Unable to find valid recovery factor")}},541:(Rt,Je,M)=>{"use strict";var l=M(917),h=M(3136).assert;function fe(X,ie){this.ec=X,this.priv=null,this.pub=null,ie.priv&&this._importPrivate(ie.priv,ie.privEnc),ie.pub&&this._importPublic(ie.pub,ie.pubEnc)}Rt.exports=fe,fe.fromPublic=function(ie,de,Q){return de instanceof fe?de:new fe(ie,{pub:de,pubEnc:Q})},fe.fromPrivate=function(ie,de,Q){return de instanceof fe?de:new fe(ie,{priv:de,privEnc:Q})},fe.prototype.validate=function(){var ie=this.getPublic();return ie.isInfinity()?{result:!1,reason:"Invalid public key"}:ie.validate()?ie.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},fe.prototype.getPublic=function(ie,de){return"string"==typeof ie&&(de=ie,ie=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),de?this.pub.encode(de,ie):this.pub},fe.prototype.getPrivate=function(ie){return"hex"===ie?this.priv.toString(16,2):this.priv},fe.prototype._importPrivate=function(ie,de){this.priv=new l(ie,de||16),this.priv=this.priv.umod(this.ec.curve.n)},fe.prototype._importPublic=function(ie,de){if(ie.x||ie.y)return"mont"===this.ec.curve.type?h(ie.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&h(ie.x&&ie.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(ie.x,ie.y));this.pub=this.ec.curve.decodePoint(ie,de)},fe.prototype.derive=function(ie){return ie.validate()||h(ie.validate(),"public point not validated"),ie.mul(this.priv).getX()},fe.prototype.sign=function(ie,de,Q){return this.ec.sign(ie,this,de,Q)},fe.prototype.verify=function(ie,de){return this.ec.verify(ie,de,this)},fe.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},484:(Rt,Je,M)=>{"use strict";var l=M(917),H=M(3136),h=H.assert;function fe(z,L){if(z instanceof fe)return z;this._importDER(z,L)||(h(z.r&&z.s,"Signature without r or s"),this.r=new l(z.r,16),this.s=new l(z.s,16),this.recoveryParam=void 0===z.recoveryParam?null:z.recoveryParam)}function X(){this.place=0}function ie(z,L){var I=z[L.place++];if(!(128&I))return I;var K=15&I;if(0===K||K>4||0===z[L.place])return!1;for(var te=0,ee=0,ue=L.place;ee<K;ee++,ue++)te<<=8,te|=z[ue],te>>>=0;return!(te<=127)&&(L.place=ue,te)}function de(z){for(var L=0,I=z.length-1;!z[L]&&!(128&z[L+1])&&L<I;)L++;return 0===L?z:z.slice(L)}function Q(z,L){if(L<128)z.push(L);else{var I=1+(Math.log(L)/Math.LN2>>>3);for(z.push(128|I);--I;)z.push(L>>>(I<<3)&255);z.push(L)}}Rt.exports=fe,fe.prototype._importDER=function(L,I){L=H.toArray(L,I);var K=new X;if(48!==L[K.place++])return!1;var te=ie(L,K);if(!1===te||te+K.place!==L.length||2!==L[K.place++])return!1;var ee=ie(L,K);if(!1===ee||128&L[K.place])return!1;var ue=L.slice(K.place,ee+K.place);if(K.place+=ee,2!==L[K.place++])return!1;var Ce=ie(L,K);if(!1===Ce||L.length!==Ce+K.place||128&L[K.place])return!1;var Re=L.slice(K.place,Ce+K.place);if(0===ue[0]){if(!(128&ue[1]))return!1;ue=ue.slice(1)}if(0===Re[0]){if(!(128&Re[1]))return!1;Re=Re.slice(1)}return this.r=new l(ue),this.s=new l(Re),this.recoveryParam=null,!0},fe.prototype.toDER=function(L){var I=this.r.toArray(),K=this.s.toArray();for(128&I[0]&&(I=[0].concat(I)),128&K[0]&&(K=[0].concat(K)),I=de(I),K=de(K);!(K[0]||128&K[1]);)K=K.slice(1);var te=[2];Q(te,I.length),(te=te.concat(I)).push(2),Q(te,K.length);var ee=te.concat(K),ue=[48];return Q(ue,ee.length),ue=ue.concat(ee),H.encode(ue,L)}},3045:(Rt,Je,M)=>{"use strict";var l=M(2529),H=M(3401),h=M(3136),fe=h.assert,X=h.parseBytes,ie=M(7222),de=M(5451);function Q(z){if(fe("ed25519"===z,"only tested with ed25519 so far"),!(this instanceof Q))return new Q(z);this.curve=z=H[z].curve,this.g=z.g,this.g.precompute(z.n.bitLength()+1),this.pointClass=z.point().constructor,this.encodingLength=Math.ceil(z.n.bitLength()/8),this.hash=l.sha512}Rt.exports=Q,Q.prototype.sign=function(L,I){L=X(L);var K=this.keyFromSecret(I),te=this.hashInt(K.messagePrefix(),L),ee=this.g.mul(te),ue=this.encodePoint(ee),Ce=this.hashInt(ue,K.pubBytes(),L).mul(K.priv()),Re=te.add(Ce).umod(this.curve.n);return this.makeSignature({R:ee,S:Re,Rencoded:ue})},Q.prototype.verify=function(L,I,K){if(L=X(L),(I=this.makeSignature(I)).S().gte(I.eddsa.curve.n)||I.S().isNeg())return!1;var te=this.keyFromPublic(K),ee=this.hashInt(I.Rencoded(),te.pubBytes(),L),ue=this.g.mul(I.S());return I.R().add(te.pub().mul(ee)).eq(ue)},Q.prototype.hashInt=function(){for(var L=this.hash(),I=0;I<arguments.length;I++)L.update(arguments[I]);return h.intFromLE(L.digest()).umod(this.curve.n)},Q.prototype.keyFromPublic=function(L){return ie.fromPublic(this,L)},Q.prototype.keyFromSecret=function(L){return ie.fromSecret(this,L)},Q.prototype.makeSignature=function(L){return L instanceof de?L:new de(this,L)},Q.prototype.encodePoint=function(L){var I=L.getY().toArray("le",this.encodingLength);return I[this.encodingLength-1]|=L.getX().isOdd()?128:0,I},Q.prototype.decodePoint=function(L){var I=(L=h.parseBytes(L)).length-1,K=L.slice(0,I).concat(-129&L[I]),te=!!(128&L[I]),ee=h.intFromLE(K);return this.curve.pointFromY(ee,te)},Q.prototype.encodeInt=function(L){return L.toArray("le",this.encodingLength)},Q.prototype.decodeInt=function(L){return h.intFromLE(L)},Q.prototype.isPoint=function(L){return L instanceof this.pointClass}},7222:(Rt,Je,M)=>{"use strict";var l=M(3136),H=l.assert,h=l.parseBytes,fe=l.cachedProperty;function X(ie,de){this.eddsa=ie,this._secret=h(de.secret),ie.isPoint(de.pub)?this._pub=de.pub:this._pubBytes=h(de.pub)}X.fromPublic=function(de,Q){return Q instanceof X?Q:new X(de,{pub:Q})},X.fromSecret=function(de,Q){return Q instanceof X?Q:new X(de,{secret:Q})},X.prototype.secret=function(){return this._secret},fe(X,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),fe(X,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),fe(X,"privBytes",function(){var de=this.eddsa,Q=this.hash(),z=de.encodingLength-1,L=Q.slice(0,de.encodingLength);return L[0]&=248,L[z]&=127,L[z]|=64,L}),fe(X,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),fe(X,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),fe(X,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),X.prototype.sign=function(de){return H(this._secret,"KeyPair can only verify"),this.eddsa.sign(de,this)},X.prototype.verify=function(de,Q){return this.eddsa.verify(de,Q,this)},X.prototype.getSecret=function(de){return H(this._secret,"KeyPair is public only"),l.encode(this.secret(),de)},X.prototype.getPublic=function(de){return l.encode(this.pubBytes(),de)},Rt.exports=X},5451:(Rt,Je,M)=>{"use strict";var l=M(917),H=M(3136),h=H.assert,fe=H.cachedProperty,X=H.parseBytes;function ie(de,Q){this.eddsa=de,"object"!=typeof Q&&(Q=X(Q)),Array.isArray(Q)&&(h(Q.length===2*de.encodingLength,"Signature has invalid size"),Q={R:Q.slice(0,de.encodingLength),S:Q.slice(de.encodingLength)}),h(Q.R&&Q.S,"Signature without R or S"),de.isPoint(Q.R)&&(this._R=Q.R),Q.S instanceof l&&(this._S=Q.S),this._Rencoded=Array.isArray(Q.R)?Q.R:Q.Rencoded,this._Sencoded=Array.isArray(Q.S)?Q.S:Q.Sencoded}fe(ie,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),fe(ie,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),fe(ie,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),fe(ie,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),ie.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},ie.prototype.toHex=function(){return H.encode(this.toBytes(),"hex").toUpperCase()},Rt.exports=ie},1416:Rt=>{Rt.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},3136:(Rt,Je,M)=>{"use strict";var l=Je,H=M(917),h=M(9210),fe=M(1832);l.assert=h,l.toArray=fe.toArray,l.zero2=fe.zero2,l.toHex=fe.toHex,l.encode=fe.encode,l.getNAF=function X(L,I,K){var ee,te=new Array(Math.max(L.bitLength(),K)+1);for(ee=0;ee<te.length;ee+=1)te[ee]=0;var ue=1<<I+1,Ce=L.clone();for(ee=0;ee<te.length;ee++){var Re,ye=Ce.andln(ue-1);Ce.isOdd()?Ce.isubn(Re=ye>(ue>>1)-1?(ue>>1)-ye:ye):Re=0,te[ee]=Re,Ce.iushrn(1)}return te},l.getJSF=function ie(L,I){var K=[[],[]];L=L.clone(),I=I.clone();for(var ue,te=0,ee=0;L.cmpn(-te)>0||I.cmpn(-ee)>0;){var ye,Te,Ce=L.andln(3)+te&3,Re=I.andln(3)+ee&3;3===Ce&&(Ce=-1),3===Re&&(Re=-1),ye=1&Ce?3!=(ue=L.andln(7)+te&7)&&5!==ue||2!==Re?Ce:-Ce:0,K[0].push(ye),Te=1&Re?3!=(ue=I.andln(7)+ee&7)&&5!==ue||2!==Ce?Re:-Re:0,K[1].push(Te),2*te===ye+1&&(te=1-te),2*ee===Te+1&&(ee=1-ee),L.iushrn(1),I.iushrn(1)}return K},l.cachedProperty=function de(L,I,K){var te="_"+I;L.prototype[I]=function(){return void 0!==this[te]?this[te]:this[te]=K.call(this)}},l.parseBytes=function Q(L){return"string"==typeof L?l.toArray(L,"hex"):L},l.intFromLE=function z(L){return new H(L,"hex","le")}},2529:(Rt,Je,M)=>{var l=Je;l.utils=M(8283),l.common=M(2901),l.sha=M(8528),l.ripemd=M(5283),l.hmac=M(7163),l.sha1=l.sha.sha1,l.sha256=l.sha.sha256,l.sha224=l.sha.sha224,l.sha384=l.sha.sha384,l.sha512=l.sha.sha512,l.ripemd160=l.ripemd.ripemd160},2901:(Rt,Je,M)=>{"use strict";var l=M(8283),H=M(9210);function h(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Je.BlockHash=h,h.prototype.update=function(X,ie){if(X=l.toArray(X,ie),this.pending=this.pending?this.pending.concat(X):X,this.pendingTotal+=X.length,this.pending.length>=this._delta8){var de=(X=this.pending).length%this._delta8;this.pending=X.slice(X.length-de,X.length),0===this.pending.length&&(this.pending=null),X=l.join32(X,0,X.length-de,this.endian);for(var Q=0;Q<X.length;Q+=this._delta32)this._update(X,Q,Q+this._delta32)}return this},h.prototype.digest=function(X){return this.update(this._pad()),H(null===this.pending),this._digest(X)},h.prototype._pad=function(){var X=this.pendingTotal,ie=this._delta8,de=ie-(X+this.padLength)%ie,Q=new Array(de+this.padLength);Q[0]=128;for(var z=1;z<de;z++)Q[z]=0;if(X<<=3,"big"===this.endian){for(var L=8;L<this.padLength;L++)Q[z++]=0;Q[z++]=0,Q[z++]=0,Q[z++]=0,Q[z++]=0,Q[z++]=X>>>24&255,Q[z++]=X>>>16&255,Q[z++]=X>>>8&255,Q[z++]=255&X}else for(Q[z++]=255&X,Q[z++]=X>>>8&255,Q[z++]=X>>>16&255,Q[z++]=X>>>24&255,Q[z++]=0,Q[z++]=0,Q[z++]=0,Q[z++]=0,L=8;L<this.padLength;L++)Q[z++]=0;return Q}},7163:(Rt,Je,M)=>{"use strict";var l=M(8283),H=M(9210);function h(fe,X,ie){if(!(this instanceof h))return new h(fe,X,ie);this.Hash=fe,this.blockSize=fe.blockSize/8,this.outSize=fe.outSize/8,this.inner=null,this.outer=null,this._init(l.toArray(X,ie))}Rt.exports=h,h.prototype._init=function(X){X.length>this.blockSize&&(X=(new this.Hash).update(X).digest()),H(X.length<=this.blockSize);for(var ie=X.length;ie<this.blockSize;ie++)X.push(0);for(ie=0;ie<X.length;ie++)X[ie]^=54;for(this.inner=(new this.Hash).update(X),ie=0;ie<X.length;ie++)X[ie]^=106;this.outer=(new this.Hash).update(X)},h.prototype.update=function(X,ie){return this.inner.update(X,ie),this},h.prototype.digest=function(X){return this.outer.update(this.inner.digest()),this.outer.digest(X)}},5283:(Rt,Je,M)=>{"use strict";var l=M(8283),H=M(2901),h=l.rotl32,fe=l.sum32,X=l.sum32_3,ie=l.sum32_4,de=H.BlockHash;function Q(){if(!(this instanceof Q))return new Q;de.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function z(Ce,Re,ye,Te){return Ce<=15?Re^ye^Te:Ce<=31?Re&ye|~Re&Te:Ce<=47?(Re|~ye)^Te:Ce<=63?Re&Te|ye&~Te:Re^(ye|~Te)}function I(Ce){return Ce<=15?1352829926:Ce<=31?1548603684:Ce<=47?1836072691:Ce<=63?2053994217:0}l.inherits(Q,de),Je.ripemd160=Q,Q.blockSize=512,Q.outSize=160,Q.hmacStrength=192,Q.padLength=64,Q.prototype._update=function(Re,ye){for(var Te=this.h[0],We=this.h[1],He=this.h[2],ke=this.h[3],Ke=this.h[4],St=Te,pt=We,ct=He,le=ke,x=Ke,C=0;C<80;C++){var j=fe(h(ie(Te,z(C,We,He,ke),Re[K[C]+ye],(Ce=C)<=15?0:Ce<=31?1518500249:Ce<=47?1859775393:Ce<=63?2400959708:2840853838),ee[C]),Ke);Te=Ke,Ke=ke,ke=h(He,10),He=We,We=j,j=fe(h(ie(St,z(79-C,pt,ct,le),Re[te[C]+ye],I(C)),ue[C]),x),St=x,x=le,le=h(ct,10),ct=pt,pt=j}var Ce;j=X(this.h[1],He,le),this.h[1]=X(this.h[2],ke,x),this.h[2]=X(this.h[3],Ke,St),this.h[3]=X(this.h[4],Te,pt),this.h[4]=X(this.h[0],We,ct),this.h[0]=j},Q.prototype._digest=function(Re){return"hex"===Re?l.toHex32(this.h,"little"):l.split32(this.h,"little")};var K=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],te=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],ee=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],ue=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},8528:(Rt,Je,M)=>{"use strict";Je.sha1=M(3468),Je.sha224=M(5563),Je.sha256=M(7138),Je.sha384=M(3898),Je.sha512=M(827)},3468:(Rt,Je,M)=>{"use strict";var l=M(8283),H=M(2901),h=M(5542),fe=l.rotl32,X=l.sum32,ie=l.sum32_5,de=h.ft_1,Q=H.BlockHash,z=[1518500249,1859775393,2400959708,3395469782];function L(){if(!(this instanceof L))return new L;Q.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}l.inherits(L,Q),Rt.exports=L,L.blockSize=512,L.outSize=160,L.hmacStrength=80,L.padLength=64,L.prototype._update=function(K,te){for(var ee=this.W,ue=0;ue<16;ue++)ee[ue]=K[te+ue];for(;ue<ee.length;ue++)ee[ue]=fe(ee[ue-3]^ee[ue-8]^ee[ue-14]^ee[ue-16],1);var Ce=this.h[0],Re=this.h[1],ye=this.h[2],Te=this.h[3],We=this.h[4];for(ue=0;ue<ee.length;ue++){var He=~~(ue/20),ke=ie(fe(Ce,5),de(He,Re,ye,Te),We,ee[ue],z[He]);We=Te,Te=ye,ye=fe(Re,30),Re=Ce,Ce=ke}this.h[0]=X(this.h[0],Ce),this.h[1]=X(this.h[1],Re),this.h[2]=X(this.h[2],ye),this.h[3]=X(this.h[3],Te),this.h[4]=X(this.h[4],We)},L.prototype._digest=function(K){return"hex"===K?l.toHex32(this.h,"big"):l.split32(this.h,"big")}},5563:(Rt,Je,M)=>{"use strict";var l=M(8283),H=M(7138);function h(){if(!(this instanceof h))return new h;H.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}l.inherits(h,H),Rt.exports=h,h.blockSize=512,h.outSize=224,h.hmacStrength=192,h.padLength=64,h.prototype._digest=function(X){return"hex"===X?l.toHex32(this.h.slice(0,7),"big"):l.split32(this.h.slice(0,7),"big")}},7138:(Rt,Je,M)=>{"use strict";var l=M(8283),H=M(2901),h=M(5542),fe=M(9210),X=l.sum32,ie=l.sum32_4,de=l.sum32_5,Q=h.ch32,z=h.maj32,L=h.s0_256,I=h.s1_256,K=h.g0_256,te=h.g1_256,ee=H.BlockHash,ue=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ce(){if(!(this instanceof Ce))return new Ce;ee.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=ue,this.W=new Array(64)}l.inherits(Ce,ee),Rt.exports=Ce,Ce.blockSize=512,Ce.outSize=256,Ce.hmacStrength=192,Ce.padLength=64,Ce.prototype._update=function(ye,Te){for(var We=this.W,He=0;He<16;He++)We[He]=ye[Te+He];for(;He<We.length;He++)We[He]=ie(te(We[He-2]),We[He-7],K(We[He-15]),We[He-16]);var ke=this.h[0],Ke=this.h[1],St=this.h[2],pt=this.h[3],ct=this.h[4],le=this.h[5],x=this.h[6],C=this.h[7];for(fe(this.k.length===We.length),He=0;He<We.length;He++){var j=de(C,I(ct),Q(ct,le,x),this.k[He],We[He]),J=X(L(ke),z(ke,Ke,St));C=x,x=le,le=ct,ct=X(pt,j),pt=St,St=Ke,Ke=ke,ke=X(j,J)}this.h[0]=X(this.h[0],ke),this.h[1]=X(this.h[1],Ke),this.h[2]=X(this.h[2],St),this.h[3]=X(this.h[3],pt),this.h[4]=X(this.h[4],ct),this.h[5]=X(this.h[5],le),this.h[6]=X(this.h[6],x),this.h[7]=X(this.h[7],C)},Ce.prototype._digest=function(ye){return"hex"===ye?l.toHex32(this.h,"big"):l.split32(this.h,"big")}},3898:(Rt,Je,M)=>{"use strict";var l=M(8283),H=M(827);function h(){if(!(this instanceof h))return new h;H.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}l.inherits(h,H),Rt.exports=h,h.blockSize=1024,h.outSize=384,h.hmacStrength=192,h.padLength=128,h.prototype._digest=function(X){return"hex"===X?l.toHex32(this.h.slice(0,12),"big"):l.split32(this.h.slice(0,12),"big")}},827:(Rt,Je,M)=>{"use strict";var l=M(8283),H=M(2901),h=M(9210),fe=l.rotr64_hi,X=l.rotr64_lo,ie=l.shr64_hi,de=l.shr64_lo,Q=l.sum64,z=l.sum64_hi,L=l.sum64_lo,I=l.sum64_4_hi,K=l.sum64_4_lo,te=l.sum64_5_hi,ee=l.sum64_5_lo,ue=H.BlockHash,Ce=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Re(){if(!(this instanceof Re))return new Re;ue.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Ce,this.W=new Array(160)}function ye(j,J,_e,Ee,Ve){var Ne=j&_e^~j&Ve;return Ne<0&&(Ne+=4294967296),Ne}function Te(j,J,_e,Ee,Ve,Ne){var V=J&Ee^~J&Ne;return V<0&&(V+=4294967296),V}function We(j,J,_e,Ee,Ve){var Ne=j&_e^j&Ve^_e&Ve;return Ne<0&&(Ne+=4294967296),Ne}function He(j,J,_e,Ee,Ve,Ne){var V=J&Ee^J&Ne^Ee&Ne;return V<0&&(V+=4294967296),V}function ke(j,J){var Ne=fe(j,J,28)^fe(J,j,2)^fe(J,j,7);return Ne<0&&(Ne+=4294967296),Ne}function Ke(j,J){var Ne=X(j,J,28)^X(J,j,2)^X(J,j,7);return Ne<0&&(Ne+=4294967296),Ne}function St(j,J){var Ne=fe(j,J,14)^fe(j,J,18)^fe(J,j,9);return Ne<0&&(Ne+=4294967296),Ne}function pt(j,J){var Ne=X(j,J,14)^X(j,J,18)^X(J,j,9);return Ne<0&&(Ne+=4294967296),Ne}function ct(j,J){var Ne=fe(j,J,1)^fe(j,J,8)^ie(j,J,7);return Ne<0&&(Ne+=4294967296),Ne}function le(j,J){var Ne=X(j,J,1)^X(j,J,8)^de(j,J,7);return Ne<0&&(Ne+=4294967296),Ne}function x(j,J){var Ne=fe(j,J,19)^fe(J,j,29)^ie(j,J,6);return Ne<0&&(Ne+=4294967296),Ne}function C(j,J){var Ne=X(j,J,19)^X(J,j,29)^de(j,J,6);return Ne<0&&(Ne+=4294967296),Ne}l.inherits(Re,ue),Rt.exports=Re,Re.blockSize=1024,Re.outSize=512,Re.hmacStrength=192,Re.padLength=128,Re.prototype._prepareBlock=function(J,_e){for(var Ee=this.W,Ve=0;Ve<32;Ve++)Ee[Ve]=J[_e+Ve];for(;Ve<Ee.length;Ve+=2){var Ne=x(Ee[Ve-4],Ee[Ve-3]),V=C(Ee[Ve-4],Ee[Ve-3]),Oe=Ee[Ve-14],Ot=Ee[Ve-13],ot=ct(Ee[Ve-30],Ee[Ve-29]),Ut=le(Ee[Ve-30],Ee[Ve-29]),ze=Ee[Ve-32],Mt=Ee[Ve-31];Ee[Ve]=I(Ne,V,Oe,Ot,ot,Ut,ze,Mt),Ee[Ve+1]=K(Ne,V,Oe,Ot,ot,Ut,ze,Mt)}},Re.prototype._update=function(J,_e){this._prepareBlock(J,_e);var Ee=this.W,Ve=this.h[0],Ne=this.h[1],V=this.h[2],Oe=this.h[3],Ot=this.h[4],ot=this.h[5],Ut=this.h[6],ze=this.h[7],Mt=this.h[8],st=this.h[9],je=this.h[10],yt=this.h[11],Yt=this.h[12],dn=this.h[13],fn=this.h[14],Sn=this.h[15];h(this.k.length===Ee.length);for(var Gt=0;Gt<Ee.length;Gt+=2){var vn=fn,at=Sn,Dt=St(Mt,st),Tt=pt(Mt,st),un=ye(Mt,0,je,0,Yt),Ln=Te(0,st,0,yt,0,dn),Yn=this.k[Gt],Vn=this.k[Gt+1],Yr=Ee[Gt],Gn=Ee[Gt+1],An=te(vn,at,Dt,Tt,un,Ln,Yn,Vn,Yr,Gn),ii=ee(vn,at,Dt,Tt,un,Ln,Yn,Vn,Yr,Gn);vn=ke(Ve,Ne),at=Ke(Ve,Ne),Dt=We(Ve,0,V,0,Ot),Tt=He(0,Ne,0,Oe,0,ot);var Si=z(vn,at,Dt,Tt),$i=L(vn,at,Dt,Tt);fn=Yt,Sn=dn,Yt=je,dn=yt,je=Mt,yt=st,Mt=z(Ut,ze,An,ii),st=L(ze,ze,An,ii),Ut=Ot,ze=ot,Ot=V,ot=Oe,V=Ve,Oe=Ne,Ve=z(An,ii,Si,$i),Ne=L(An,ii,Si,$i)}Q(this.h,0,Ve,Ne),Q(this.h,2,V,Oe),Q(this.h,4,Ot,ot),Q(this.h,6,Ut,ze),Q(this.h,8,Mt,st),Q(this.h,10,je,yt),Q(this.h,12,Yt,dn),Q(this.h,14,fn,Sn)},Re.prototype._digest=function(J){return"hex"===J?l.toHex32(this.h,"big"):l.split32(this.h,"big")}},5542:(Rt,Je,M)=>{"use strict";var H=M(8283).rotr32;function fe(I,K,te){return I&K^~I&te}function X(I,K,te){return I&K^I&te^K&te}function ie(I,K,te){return I^K^te}Je.ft_1=function h(I,K,te,ee){return 0===I?fe(K,te,ee):1===I||3===I?ie(K,te,ee):2===I?X(K,te,ee):void 0},Je.ch32=fe,Je.maj32=X,Je.p32=ie,Je.s0_256=function de(I){return H(I,2)^H(I,13)^H(I,22)},Je.s1_256=function Q(I){return H(I,6)^H(I,11)^H(I,25)},Je.g0_256=function z(I){return H(I,7)^H(I,18)^I>>>3},Je.g1_256=function L(I){return H(I,17)^H(I,19)^I>>>10}},8283:(Rt,Je,M)=>{"use strict";var l=M(9210),H=M(1993);function h(C,j){return!(55296!=(64512&C.charCodeAt(j))||j<0||j+1>=C.length)&&56320==(64512&C.charCodeAt(j+1))}function ie(C){return(C>>>24|C>>>8&65280|C<<8&16711680|(255&C)<<24)>>>0}function Q(C){return 1===C.length?"0"+C:C}function z(C){return 7===C.length?"0"+C:6===C.length?"00"+C:5===C.length?"000"+C:4===C.length?"0000"+C:3===C.length?"00000"+C:2===C.length?"000000"+C:1===C.length?"0000000"+C:C}Je.inherits=H,Je.toArray=function fe(C,j){if(Array.isArray(C))return C.slice();if(!C)return[];var J=[];if("string"==typeof C)if(j){if("hex"===j)for((C=C.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(C="0"+C),Ee=0;Ee<C.length;Ee+=2)J.push(parseInt(C[Ee]+C[Ee+1],16))}else for(var _e=0,Ee=0;Ee<C.length;Ee++){var Ve=C.charCodeAt(Ee);Ve<128?J[_e++]=Ve:Ve<2048?(J[_e++]=Ve>>6|192,J[_e++]=63&Ve|128):h(C,Ee)?(Ve=65536+((1023&Ve)<<10)+(1023&C.charCodeAt(++Ee)),J[_e++]=Ve>>18|240,J[_e++]=Ve>>12&63|128,J[_e++]=Ve>>6&63|128,J[_e++]=63&Ve|128):(J[_e++]=Ve>>12|224,J[_e++]=Ve>>6&63|128,J[_e++]=63&Ve|128)}else for(Ee=0;Ee<C.length;Ee++)J[Ee]=0|C[Ee];return J},Je.toHex=function X(C){for(var j="",J=0;J<C.length;J++)j+=Q(C[J].toString(16));return j},Je.htonl=ie,Je.toHex32=function de(C,j){for(var J="",_e=0;_e<C.length;_e++){var Ee=C[_e];"little"===j&&(Ee=ie(Ee)),J+=z(Ee.toString(16))}return J},Je.zero2=Q,Je.zero8=z,Je.join32=function L(C,j,J,_e){var Ee=J-j;l(Ee%4==0);for(var Ve=new Array(Ee/4),Ne=0,V=j;Ne<Ve.length;Ne++,V+=4)Ve[Ne]=("big"===_e?C[V]<<24|C[V+1]<<16|C[V+2]<<8|C[V+3]:C[V+3]<<24|C[V+2]<<16|C[V+1]<<8|C[V])>>>0;return Ve},Je.split32=function I(C,j){for(var J=new Array(4*C.length),_e=0,Ee=0;_e<C.length;_e++,Ee+=4){var Ve=C[_e];"big"===j?(J[Ee]=Ve>>>24,J[Ee+1]=Ve>>>16&255,J[Ee+2]=Ve>>>8&255,J[Ee+3]=255&Ve):(J[Ee+3]=Ve>>>24,J[Ee+2]=Ve>>>16&255,J[Ee+1]=Ve>>>8&255,J[Ee]=255&Ve)}return J},Je.rotr32=function K(C,j){return C>>>j|C<<32-j},Je.rotl32=function te(C,j){return C<<j|C>>>32-j},Je.sum32=function ee(C,j){return C+j>>>0},Je.sum32_3=function ue(C,j,J){return C+j+J>>>0},Je.sum32_4=function Ce(C,j,J,_e){return C+j+J+_e>>>0},Je.sum32_5=function Re(C,j,J,_e,Ee){return C+j+J+_e+Ee>>>0},Je.sum64=function ye(C,j,J,_e){var Ne=_e+C[j+1]>>>0;C[j]=(Ne<_e?1:0)+J+C[j]>>>0,C[j+1]=Ne},Je.sum64_hi=function Te(C,j,J,_e){return(j+_e>>>0<j?1:0)+C+J>>>0},Je.sum64_lo=function We(C,j,J,_e){return j+_e>>>0},Je.sum64_4_hi=function He(C,j,J,_e,Ee,Ve,Ne,V){var Oe=0,Ot=j;return Oe+=(Ot=Ot+_e>>>0)<j?1:0,Oe+=(Ot=Ot+Ve>>>0)<Ve?1:0,C+J+Ee+Ne+(Oe+=(Ot=Ot+V>>>0)<V?1:0)>>>0},Je.sum64_4_lo=function ke(C,j,J,_e,Ee,Ve,Ne,V){return j+_e+Ve+V>>>0},Je.sum64_5_hi=function Ke(C,j,J,_e,Ee,Ve,Ne,V,Oe,Ot){var ot=0,Ut=j;return ot+=(Ut=Ut+_e>>>0)<j?1:0,ot+=(Ut=Ut+Ve>>>0)<Ve?1:0,ot+=(Ut=Ut+V>>>0)<V?1:0,C+J+Ee+Ne+Oe+(ot+=(Ut=Ut+Ot>>>0)<Ot?1:0)>>>0},Je.sum64_5_lo=function St(C,j,J,_e,Ee,Ve,Ne,V,Oe,Ot){return j+_e+Ve+V+Ot>>>0},Je.rotr64_hi=function pt(C,j,J){return(j<<32-J|C>>>J)>>>0},Je.rotr64_lo=function ct(C,j,J){return(C<<32-J|j>>>J)>>>0},Je.shr64_hi=function le(C,j,J){return C>>>J},Je.shr64_lo=function x(C,j,J){return(C<<32-J|j>>>J)>>>0}},3556:(Rt,Je,M)=>{"use strict";var l=M(2529),H=M(1832),h=M(9210);function fe(X){if(!(this instanceof fe))return new fe(X);this.hash=X.hash,this.predResist=!!X.predResist,this.outLen=this.hash.outSize,this.minEntropy=X.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var ie=H.toArray(X.entropy,X.entropyEnc||"hex"),de=H.toArray(X.nonce,X.nonceEnc||"hex"),Q=H.toArray(X.pers,X.persEnc||"hex");h(ie.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(ie,de,Q)}Rt.exports=fe,fe.prototype._init=function(ie,de,Q){var z=ie.concat(de).concat(Q);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var L=0;L<this.V.length;L++)this.K[L]=0,this.V[L]=1;this._update(z),this._reseed=1,this.reseedInterval=281474976710656},fe.prototype._hmac=function(){return new l.hmac(this.hash,this.K)},fe.prototype._update=function(ie){var de=this._hmac().update(this.V).update([0]);ie&&(de=de.update(ie)),this.K=de.digest(),this.V=this._hmac().update(this.V).digest(),ie&&(this.K=this._hmac().update(this.V).update([1]).update(ie).digest(),this.V=this._hmac().update(this.V).digest())},fe.prototype.reseed=function(ie,de,Q,z){"string"!=typeof de&&(z=Q,Q=de,de=null),ie=H.toArray(ie,de),Q=H.toArray(Q,z),h(ie.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(ie.concat(Q||[])),this._reseed=1},fe.prototype.generate=function(ie,de,Q,z){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof de&&(z=Q,Q=de,de=null),Q&&(Q=H.toArray(Q,z||"hex"),this._update(Q));for(var L=[];L.length<ie;)this.V=this._hmac().update(this.V).digest(),L=L.concat(this.V);var I=L.slice(0,ie);return this._update(Q),this._reseed++,H.encode(I,de)}},1993:Rt=>{Rt.exports="function"==typeof Object.create?function(M,l){l&&(M.super_=l,M.prototype=Object.create(l.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}))}:function(M,l){if(l){M.super_=l;var H=function(){};H.prototype=l.prototype,M.prototype=new H,M.prototype.constructor=M}}},9210:Rt=>{function Je(M,l){if(!M)throw new Error(l||"Assertion failed")}Rt.exports=Je,Je.equal=function(l,H,h){if(l!=H)throw new Error(h||"Assertion failed: "+l+" != "+H)}},1832:(Rt,Je)=>{"use strict";var M=Je;function H(fe){return 1===fe.length?"0"+fe:fe}function h(fe){for(var X="",ie=0;ie<fe.length;ie++)X+=H(fe[ie].toString(16));return X}M.toArray=function l(fe,X){if(Array.isArray(fe))return fe.slice();if(!fe)return[];var ie=[];if("string"!=typeof fe){for(var de=0;de<fe.length;de++)ie[de]=0|fe[de];return ie}if("hex"===X)for((fe=fe.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(fe="0"+fe),de=0;de<fe.length;de+=2)ie.push(parseInt(fe[de]+fe[de+1],16));else for(de=0;de<fe.length;de++){var Q=fe.charCodeAt(de),z=Q>>8,L=255&Q;z?ie.push(z,L):ie.push(L)}return ie},M.zero2=H,M.toHex=h,M.encode=function(X,ie){return"hex"===ie?h(X):X}},4412:(Rt,Je,M)=>{"use strict";M.d(Je,{t:()=>H});var l=M(1413);class H extends l.B{constructor(fe){super(),this._value=fe}get value(){return this.getValue()}_subscribe(fe){const X=super._subscribe(fe);return!X.closed&&fe.next(this._value),X}getValue(){const{hasError:fe,thrownError:X,_value:ie}=this;if(fe)throw X;return this._throwIfClosed(),ie}next(fe){super.next(this._value=fe)}}},1985:(Rt,Je,M)=>{"use strict";M.d(Je,{c:()=>Q});var l=M(7707),H=M(8359),h=M(3494),fe=M(1203),X=M(1026),ie=M(8071),de=M(9786);let Q=(()=>{class K{constructor(ee){ee&&(this._subscribe=ee)}lift(ee){const ue=new K;return ue.source=this,ue.operator=ee,ue}subscribe(ee,ue,Ce){const Re=function I(K){return K&&K instanceof l.vU||function L(K){return K&&(0,ie.T)(K.next)&&(0,ie.T)(K.error)&&(0,ie.T)(K.complete)}(K)&&(0,H.Uv)(K)}(ee)?ee:new l.Ms(ee,ue,Ce);return(0,de.Y)(()=>{const{operator:ye,source:Te}=this;Re.add(ye?ye.call(Re,Te):Te?this._subscribe(Re):this._trySubscribe(Re))}),Re}_trySubscribe(ee){try{return this._subscribe(ee)}catch(ue){ee.error(ue)}}forEach(ee,ue){return new(ue=z(ue))((Ce,Re)=>{const ye=new l.Ms({next:Te=>{try{ee(Te)}catch(We){Re(We),ye.unsubscribe()}},error:Re,complete:Ce});this.subscribe(ye)})}_subscribe(ee){var ue;return null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(ee)}[h.s](){return this}pipe(...ee){return(0,fe.m)(ee)(this)}toPromise(ee){return new(ee=z(ee))((ue,Ce)=>{let Re;this.subscribe(ye=>Re=ye,ye=>Ce(ye),()=>ue(Re))})}}return K.create=te=>new K(te),K})();function z(K){var te;return null!==(te=K??X.$.Promise)&&void 0!==te?te:Promise}},1413:(Rt,Je,M)=>{"use strict";M.d(Je,{B:()=>de});var l=M(1985),H=M(8359);const fe=(0,M(1853).L)(z=>function(){z(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=M(7908),ie=M(9786);let de=(()=>{class z extends l.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(I){const K=new Q(this,this);return K.operator=I,K}_throwIfClosed(){if(this.closed)throw new fe}next(I){(0,ie.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(I)}})}error(I){(0,ie.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=I;const{observers:K}=this;for(;K.length;)K.shift().error(I)}})}complete(){(0,ie.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:I}=this;for(;I.length;)I.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var I;return(null===(I=this.observers)||void 0===I?void 0:I.length)>0}_trySubscribe(I){return this._throwIfClosed(),super._trySubscribe(I)}_subscribe(I){return this._throwIfClosed(),this._checkFinalizedStatuses(I),this._innerSubscribe(I)}_innerSubscribe(I){const{hasError:K,isStopped:te,observers:ee}=this;return K||te?H.Kn:(this.currentObservers=null,ee.push(I),new H.yU(()=>{this.currentObservers=null,(0,X.o)(ee,I)}))}_checkFinalizedStatuses(I){const{hasError:K,thrownError:te,isStopped:ee}=this;K?I.error(te):ee&&I.complete()}asObservable(){const I=new l.c;return I.source=this,I}}return z.create=(L,I)=>new Q(L,I),z})();class Q extends de{constructor(L,I){super(),this.destination=L,this.source=I}next(L){var I,K;null===(K=null===(I=this.destination)||void 0===I?void 0:I.next)||void 0===K||K.call(I,L)}error(L){var I,K;null===(K=null===(I=this.destination)||void 0===I?void 0:I.error)||void 0===K||K.call(I,L)}complete(){var L,I;null===(I=null===(L=this.destination)||void 0===L?void 0:L.complete)||void 0===I||I.call(L)}_subscribe(L){var I,K;return null!==(K=null===(I=this.source)||void 0===I?void 0:I.subscribe(L))&&void 0!==K?K:H.Kn}}},7707:(Rt,Je,M)=>{"use strict";M.d(Je,{Ms:()=>Ce,vU:()=>K});var l=M(8071),H=M(8359),h=M(1026),fe=M(5334),X=M(5343);const ie=z("C",void 0,void 0);function z(He,ke,Ke){return{kind:He,value:ke,error:Ke}}var L=M(9270),I=M(9786);class K extends H.yU{constructor(ke){super(),this.isStopped=!1,ke?(this.destination=ke,(0,H.Uv)(ke)&&ke.add(this)):this.destination=We}static create(ke,Ke,St){return new Ce(ke,Ke,St)}next(ke){this.isStopped?Te(function Q(He){return z("N",He,void 0)}(ke),this):this._next(ke)}error(ke){this.isStopped?Te(function de(He){return z("E",void 0,He)}(ke),this):(this.isStopped=!0,this._error(ke))}complete(){this.isStopped?Te(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ke){this.destination.next(ke)}_error(ke){try{this.destination.error(ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const te=Function.prototype.bind;function ee(He,ke){return te.call(He,ke)}class ue{constructor(ke){this.partialObserver=ke}next(ke){const{partialObserver:Ke}=this;if(Ke.next)try{Ke.next(ke)}catch(St){Re(St)}}error(ke){const{partialObserver:Ke}=this;if(Ke.error)try{Ke.error(ke)}catch(St){Re(St)}else Re(ke)}complete(){const{partialObserver:ke}=this;if(ke.complete)try{ke.complete()}catch(Ke){Re(Ke)}}}class Ce extends K{constructor(ke,Ke,St){let pt;if(super(),(0,l.T)(ke)||!ke)pt={next:ke??void 0,error:Ke??void 0,complete:St??void 0};else{let ct;this&&h.$.useDeprecatedNextContext?(ct=Object.create(ke),ct.unsubscribe=()=>this.unsubscribe(),pt={next:ke.next&&ee(ke.next,ct),error:ke.error&&ee(ke.error,ct),complete:ke.complete&&ee(ke.complete,ct)}):pt=ke}this.destination=new ue(pt)}}function Re(He){h.$.useDeprecatedSynchronousErrorHandling?(0,I.l)(He):(0,fe.m)(He)}function Te(He,ke){const{onStoppedNotification:Ke}=h.$;Ke&&L.f.setTimeout(()=>Ke(He,ke))}const We={closed:!0,next:X.l,error:function ye(He){throw He},complete:X.l}},8359:(Rt,Je,M)=>{"use strict";M.d(Je,{Kn:()=>ie,yU:()=>X,Uv:()=>de});var l=M(8071);const h=(0,M(1853).L)(z=>function(I){z(this),this.message=I?`${I.length} errors occurred during unsubscription:\n${I.map((K,te)=>`${te+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=I});var fe=M(7908);class X{constructor(L){this.initialTeardown=L,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let L;if(!this.closed){this.closed=!0;const{_parentage:I}=this;if(I)if(this._parentage=null,Array.isArray(I))for(const ee of I)ee.remove(this);else I.remove(this);const{initialTeardown:K}=this;if((0,l.T)(K))try{K()}catch(ee){L=ee instanceof h?ee.errors:[ee]}const{_finalizers:te}=this;if(te){this._finalizers=null;for(const ee of te)try{Q(ee)}catch(ue){L=L??[],ue instanceof h?L=[...L,...ue.errors]:L.push(ue)}}if(L)throw new h(L)}}add(L){var I;if(L&&L!==this)if(this.closed)Q(L);else{if(L instanceof X){if(L.closed||L._hasParent(this))return;L._addParent(this)}(this._finalizers=null!==(I=this._finalizers)&&void 0!==I?I:[]).push(L)}}_hasParent(L){const{_parentage:I}=this;return I===L||Array.isArray(I)&&I.includes(L)}_addParent(L){const{_parentage:I}=this;this._parentage=Array.isArray(I)?(I.push(L),I):I?[I,L]:L}_removeParent(L){const{_parentage:I}=this;I===L?this._parentage=null:Array.isArray(I)&&(0,fe.o)(I,L)}remove(L){const{_finalizers:I}=this;I&&(0,fe.o)(I,L),L instanceof X&&L._removeParent(this)}}X.EMPTY=(()=>{const z=new X;return z.closed=!0,z})();const ie=X.EMPTY;function de(z){return z instanceof X||z&&"closed"in z&&(0,l.T)(z.remove)&&(0,l.T)(z.add)&&(0,l.T)(z.unsubscribe)}function Q(z){(0,l.T)(z)?z():z.unsubscribe()}},1026:(Rt,Je,M)=>{"use strict";M.d(Je,{$:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4843:(Rt,Je,M)=>{"use strict";M.d(Je,{_:()=>h});var l=M(9350),H=M(7707);function h(fe,X){const ie="object"==typeof X;return new Promise((de,Q)=>{const z=new H.Ms({next:L=>{de(L),z.unsubscribe()},error:Q,complete:()=>{ie?de(X.defaultValue):Q(new l.G)}});fe.subscribe(z)})}},4572:(Rt,Je,M)=>{"use strict";M.d(Je,{z:()=>L});var l=M(1985),H=M(3073),h=M(6648),fe=M(3669),X=M(6450),ie=M(9326),de=M(8496),Q=M(4360),z=M(5225);function L(...te){const ee=(0,ie.lI)(te),ue=(0,ie.ms)(te),{args:Ce,keys:Re}=(0,H.D)(te);if(0===Ce.length)return(0,h.H)([],ee);const ye=new l.c(function I(te,ee,ue=fe.D){return Ce=>{K(ee,()=>{const{length:Re}=te,ye=new Array(Re);let Te=Re,We=Re;for(let He=0;He<Re;He++)K(ee,()=>{const ke=(0,h.H)(te[He],ee);let Ke=!1;ke.subscribe((0,Q._)(Ce,St=>{ye[He]=St,Ke||(Ke=!0,We--),We||Ce.next(ue(ye.slice()))},()=>{--Te||Ce.complete()}))},Ce)},Ce)}}(Ce,ee,Re?Te=>(0,de.e)(Re,Te):fe.D));return ue?ye.pipe((0,X.I)(ue)):ye}function K(te,ee,ue){te?(0,z.N)(ue,te,ee):ee()}},8793:(Rt,Je,M)=>{"use strict";M.d(Je,{x:()=>X});var l=M(6365),h=M(9326),fe=M(6648);function X(...ie){return function H(){return(0,l.U)(1)}()((0,fe.H)(ie,(0,h.lI)(ie)))}},9030:(Rt,Je,M)=>{"use strict";M.d(Je,{v:()=>h});var l=M(1985),H=M(8750);function h(fe){return new l.c(X=>{(0,H.Tg)(fe()).subscribe(X)})}},983:(Rt,Je,M)=>{"use strict";M.d(Je,{w:()=>H});const H=new(M(1985).c)(X=>X.complete())},7468:(Rt,Je,M)=>{"use strict";M.d(Je,{p:()=>Q});var l=M(1985),H=M(3073),h=M(8750),fe=M(9326),X=M(4360),ie=M(6450),de=M(8496);function Q(...z){const L=(0,fe.ms)(z),{args:I,keys:K}=(0,H.D)(z),te=new l.c(ee=>{const{length:ue}=I;if(!ue)return void ee.complete();const Ce=new Array(ue);let Re=ue,ye=ue;for(let Te=0;Te<ue;Te++){let We=!1;(0,h.Tg)(I[Te]).subscribe((0,X._)(ee,He=>{We||(We=!0,ye--),Ce[Te]=He},()=>Re--,void 0,()=>{(!Re||!We)&&(ye||ee.next(K?(0,de.e)(K,Ce):Ce),ee.complete())}))}});return L?te.pipe((0,ie.I)(L)):te}},6648:(Rt,Je,M)=>{"use strict";M.d(Je,{H:()=>St});var l=M(8750),H=M(5225),h=M(9974),fe=M(4360);function X(pt,ct=0){return(0,h.N)((le,x)=>{le.subscribe((0,fe._)(x,C=>(0,H.N)(x,pt,()=>x.next(C),ct),()=>(0,H.N)(x,pt,()=>x.complete(),ct),C=>(0,H.N)(x,pt,()=>x.error(C),ct)))})}function ie(pt,ct=0){return(0,h.N)((le,x)=>{x.add(pt.schedule(()=>le.subscribe(x),ct))})}var z=M(1985),I=M(4761),K=M(8071);function ee(pt,ct){if(!pt)throw new Error("Iterable cannot be null");return new z.c(le=>{(0,H.N)(le,ct,()=>{const x=pt[Symbol.asyncIterator]();(0,H.N)(le,ct,()=>{x.next().then(C=>{C.done?le.complete():le.next(C.value)})},0,!0)})})}var ue=M(5055),Ce=M(9858),Re=M(7441),ye=M(5397),Te=M(7953),We=M(591),He=M(5196);function St(pt,ct){return ct?function Ke(pt,ct){if(null!=pt){if((0,ue.l)(pt))return function de(pt,ct){return(0,l.Tg)(pt).pipe(ie(ct),X(ct))}(pt,ct);if((0,Re.X)(pt))return function L(pt,ct){return new z.c(le=>{let x=0;return ct.schedule(function(){x===pt.length?le.complete():(le.next(pt[x++]),le.closed||this.schedule())})})}(pt,ct);if((0,Ce.y)(pt))return function Q(pt,ct){return(0,l.Tg)(pt).pipe(ie(ct),X(ct))}(pt,ct);if((0,Te.T)(pt))return ee(pt,ct);if((0,ye.x)(pt))return function te(pt,ct){return new z.c(le=>{let x;return(0,H.N)(le,ct,()=>{x=pt[I.l](),(0,H.N)(le,ct,()=>{let C,j;try{({value:C,done:j}=x.next())}catch(J){return void le.error(J)}j?le.complete():le.next(C)},0,!0)}),()=>(0,K.T)(x?.return)&&x.return()})}(pt,ct);if((0,He.U)(pt))return function ke(pt,ct){return ee((0,He.C)(pt),ct)}(pt,ct)}throw(0,We.L)(pt)}(pt,ct):(0,l.Tg)(pt)}},8750:(Rt,Je,M)=>{"use strict";M.d(Je,{Tg:()=>te});var l=M(5215),H=M(7441),h=M(9858),fe=M(1985),X=M(5055),ie=M(7953),de=M(591),Q=M(5397),z=M(5196),L=M(8071),I=M(5334),K=M(3494);function te(He){if(He instanceof fe.c)return He;if(null!=He){if((0,X.l)(He))return function ee(He){return new fe.c(ke=>{const Ke=He[K.s]();if((0,L.T)(Ke.subscribe))return Ke.subscribe(ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(He);if((0,H.X)(He))return function ue(He){return new fe.c(ke=>{for(let Ke=0;Ke<He.length&&!ke.closed;Ke++)ke.next(He[Ke]);ke.complete()})}(He);if((0,h.y)(He))return function Ce(He){return new fe.c(ke=>{He.then(Ke=>{ke.closed||(ke.next(Ke),ke.complete())},Ke=>ke.error(Ke)).then(null,I.m)})}(He);if((0,ie.T)(He))return ye(He);if((0,Q.x)(He))return function Re(He){return new fe.c(ke=>{for(const Ke of He)if(ke.next(Ke),ke.closed)return;ke.complete()})}(He);if((0,z.U)(He))return function Te(He){return ye((0,z.C)(He))}(He)}throw(0,de.L)(He)}function ye(He){return new fe.c(ke=>{(function We(He,ke){var Ke,St,pt,ct;return(0,l.sH)(this,void 0,void 0,function*(){try{for(Ke=(0,l.xN)(He);!(St=yield Ke.next()).done;)if(ke.next(St.value),ke.closed)return}catch(le){pt={error:le}}finally{try{St&&!St.done&&(ct=Ke.return)&&(yield ct.call(Ke))}finally{if(pt)throw pt.error}}ke.complete()})})(He,ke).catch(Ke=>ke.error(Ke))})}},7673:(Rt,Je,M)=>{"use strict";M.d(Je,{of:()=>h});var l=M(9326),H=M(6648);function h(...fe){const X=(0,l.lI)(fe);return(0,H.H)(fe,X)}},8810:(Rt,Je,M)=>{"use strict";M.d(Je,{$:()=>h});var l=M(1985),H=M(8071);function h(fe,X){const ie=(0,H.T)(fe)?fe:()=>fe,de=Q=>Q.error(ie());return new l.c(X?Q=>X.schedule(de,0,Q):de)}},1584:(Rt,Je,M)=>{"use strict";M.d(Je,{O:()=>X});var l=M(1985),H=M(8839),h=M(9470);function X(ie=0,de,Q=H.b){let z=-1;return null!=de&&((0,h.m)(de)?Q=de:z=de),new l.c(L=>{let I=function fe(ie){return ie instanceof Date&&!isNaN(ie)}(ie)?+ie-Q.now():ie;I<0&&(I=0);let K=0;return Q.schedule(function(){L.closed||(L.next(K++),0<=z?this.schedule(void 0,z):L.complete())},I)})}},4360:(Rt,Je,M)=>{"use strict";M.d(Je,{_:()=>H});var l=M(7707);function H(fe,X,ie,de,Q){return new h(fe,X,ie,de,Q)}class h extends l.vU{constructor(X,ie,de,Q,z,L){super(X),this.onFinalize=z,this.shouldUnsubscribe=L,this._next=ie?function(I){try{ie(I)}catch(K){X.error(K)}}:super._next,this._error=Q?function(I){try{Q(I)}catch(K){X.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(I){X.error(I)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},9437:(Rt,Je,M)=>{"use strict";M.d(Je,{W:()=>fe});var l=M(8750),H=M(4360),h=M(9974);function fe(X){return(0,h.N)((ie,de)=>{let L,Q=null,z=!1;Q=ie.subscribe((0,H._)(de,void 0,void 0,I=>{L=(0,l.Tg)(X(I,fe(X)(ie))),Q?(Q.unsubscribe(),Q=null,L.subscribe(de)):z=!0})),z&&(Q.unsubscribe(),Q=null,L.subscribe(de))})}},274:(Rt,Je,M)=>{"use strict";M.d(Je,{H:()=>h});var l=M(1397),H=M(8071);function h(fe,X){return(0,H.T)(X)?(0,l.Z)(fe,X,1):(0,l.Z)(fe,1)}},5964:(Rt,Je,M)=>{"use strict";M.d(Je,{p:()=>h});var l=M(9974),H=M(4360);function h(fe,X){return(0,l.N)((ie,de)=>{let Q=0;ie.subscribe((0,H._)(de,z=>fe.call(X,z,Q++)&&de.next(z)))})}},980:(Rt,Je,M)=>{"use strict";M.d(Je,{j:()=>H});var l=M(9974);function H(h){return(0,l.N)((fe,X)=>{try{fe.subscribe(X)}finally{X.add(h)}})}},6354:(Rt,Je,M)=>{"use strict";M.d(Je,{T:()=>h});var l=M(9974),H=M(4360);function h(fe,X){return(0,l.N)((ie,de)=>{let Q=0;ie.subscribe((0,H._)(de,z=>{de.next(fe.call(X,z,Q++))}))})}},3703:(Rt,Je,M)=>{"use strict";M.d(Je,{u:()=>H});var l=M(6354);function H(h){return(0,l.T)(()=>h)}},6365:(Rt,Je,M)=>{"use strict";M.d(Je,{U:()=>h});var l=M(1397),H=M(3669);function h(fe=1/0){return(0,l.Z)(H.D,fe)}},1397:(Rt,Je,M)=>{"use strict";M.d(Je,{Z:()=>Q});var l=M(6354),H=M(8750),h=M(9974),fe=M(5225),X=M(4360),de=M(8071);function Q(z,L,I=1/0){return(0,de.T)(L)?Q((K,te)=>(0,l.T)((ee,ue)=>L(K,ee,te,ue))((0,H.Tg)(z(K,te))),I):("number"==typeof L&&(I=L),(0,h.N)((K,te)=>function ie(z,L,I,K,te,ee,ue,Ce){const Re=[];let ye=0,Te=0,We=!1;const He=()=>{We&&!Re.length&&!ye&&L.complete()},ke=St=>ye<K?Ke(St):Re.push(St),Ke=St=>{ee&&L.next(St),ye++;let pt=!1;(0,H.Tg)(I(St,Te++)).subscribe((0,X._)(L,ct=>{te?.(ct),ee?ke(ct):L.next(ct)},()=>{pt=!0},void 0,()=>{if(pt)try{for(ye--;Re.length&&ye<K;){const ct=Re.shift();ue?(0,fe.N)(L,ue,()=>Ke(ct)):Ke(ct)}He()}catch(ct){L.error(ct)}}))};return z.subscribe((0,X._)(L,ke,()=>{We=!0,He()})),()=>{Ce?.()}}(K,te,z,I)))}},9172:(Rt,Je,M)=>{"use strict";M.d(Je,{Z:()=>fe});var l=M(8793),H=M(9326),h=M(9974);function fe(...X){const ie=(0,H.lI)(X);return(0,h.N)((de,Q)=>{(ie?(0,l.x)(X,de,ie):(0,l.x)(X,de)).subscribe(Q)})}},5558:(Rt,Je,M)=>{"use strict";M.d(Je,{n:()=>fe});var l=M(8750),H=M(9974),h=M(4360);function fe(X,ie){return(0,H.N)((de,Q)=>{let z=null,L=0,I=!1;const K=()=>I&&!z&&Q.complete();de.subscribe((0,h._)(Q,te=>{z?.unsubscribe();let ee=0;const ue=L++;(0,l.Tg)(X(te,ue)).subscribe(z=(0,h._)(Q,Ce=>Q.next(ie?ie(te,Ce,ue,ee++):Ce),()=>{z=null,K()}))},()=>{I=!0,K()}))})}},6697:(Rt,Je,M)=>{"use strict";M.d(Je,{s:()=>fe});var l=M(983),H=M(9974),h=M(4360);function fe(X){return X<=0?()=>l.w:(0,H.N)((ie,de)=>{let Q=0;ie.subscribe((0,h._)(de,z=>{++Q<=X&&(de.next(z),X<=Q&&de.complete())}))})}},6977:(Rt,Je,M)=>{"use strict";M.d(Je,{Q:()=>X});var l=M(9974),H=M(4360),h=M(8750),fe=M(5343);function X(ie){return(0,l.N)((de,Q)=>{(0,h.Tg)(ie).subscribe((0,H._)(Q,()=>Q.complete(),fe.l)),!Q.closed&&de.subscribe(Q)})}},8141:(Rt,Je,M)=>{"use strict";M.d(Je,{M:()=>X});var l=M(8071),H=M(9974),h=M(4360),fe=M(3669);function X(ie,de,Q){const z=(0,l.T)(ie)||de||Q?{next:ie,error:de,complete:Q}:ie;return z?(0,H.N)((L,I)=>{var K;null===(K=z.subscribe)||void 0===K||K.call(z);let te=!0;L.subscribe((0,h._)(I,ee=>{var ue;null===(ue=z.next)||void 0===ue||ue.call(z,ee),I.next(ee)},()=>{var ee;te=!1,null===(ee=z.complete)||void 0===ee||ee.call(z),I.complete()},ee=>{var ue;te=!1,null===(ue=z.error)||void 0===ue||ue.call(z,ee),I.error(ee)},()=>{var ee,ue;te&&(null===(ee=z.unsubscribe)||void 0===ee||ee.call(z)),null===(ue=z.finalize)||void 0===ue||ue.call(z)}))}):fe.D}},8839:(Rt,Je,M)=>{"use strict";M.d(Je,{b:()=>L,E:()=>z});var l=M(8359);class H extends l.yU{constructor(K,te){super()}schedule(K,te=0){return this}}const h={setInterval(I,K,...te){const{delegate:ee}=h;return ee?.setInterval?ee.setInterval(I,K,...te):setInterval(I,K,...te)},clearInterval(I){const{delegate:K}=h;return(K?.clearInterval||clearInterval)(I)},delegate:void 0};var fe=M(7908),ie=M(6129);class de{constructor(K,te=de.now){this.schedulerActionCtor=K,this.now=te}schedule(K,te=0,ee){return new this.schedulerActionCtor(this,K).schedule(ee,te)}}de.now=ie.U.now;const z=new class Q extends de{constructor(K,te=de.now){super(K,te),this.actions=[],this._active=!1}flush(K){const{actions:te}=this;if(this._active)return void te.push(K);let ee;this._active=!0;do{if(ee=K.execute(K.state,K.delay))break}while(K=te.shift());if(this._active=!1,ee){for(;K=te.shift();)K.unsubscribe();throw ee}}}(class X extends H{constructor(K,te){super(K,te),this.scheduler=K,this.work=te,this.pending=!1}schedule(K,te=0){var ee;if(this.closed)return this;this.state=K;const ue=this.id,Ce=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(Ce,ue,te)),this.pending=!0,this.delay=te,this.id=null!==(ee=this.id)&&void 0!==ee?ee:this.requestAsyncId(Ce,this.id,te),this}requestAsyncId(K,te,ee=0){return h.setInterval(K.flush.bind(K,this),ee)}recycleAsyncId(K,te,ee=0){if(null!=ee&&this.delay===ee&&!1===this.pending)return te;null!=te&&h.clearInterval(te)}execute(K,te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ee=this._execute(K,te);if(ee)return ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(K,te){let ue,ee=!1;try{this.work(K)}catch(Ce){ee=!0,ue=Ce||new Error("Scheduled action threw falsy error")}if(ee)return this.unsubscribe(),ue}unsubscribe(){if(!this.closed){const{id:K,scheduler:te}=this,{actions:ee}=te;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.o)(ee,this),null!=K&&(this.id=this.recycleAsyncId(te,K,null)),this.delay=null,super.unsubscribe()}}}),L=z},6129:(Rt,Je,M)=>{"use strict";M.d(Je,{U:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},9270:(Rt,Je,M)=>{"use strict";M.d(Je,{f:()=>l});const l={setTimeout(H,h,...fe){const{delegate:X}=l;return X?.setTimeout?X.setTimeout(H,h,...fe):setTimeout(H,h,...fe)},clearTimeout(H){const{delegate:h}=l;return(h?.clearTimeout||clearTimeout)(H)},delegate:void 0}},4761:(Rt,Je,M)=>{"use strict";M.d(Je,{l:()=>H});const H=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Rt,Je,M)=>{"use strict";M.d(Je,{s:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(Rt,Je,M)=>{"use strict";M.d(Je,{G:()=>H});const H=(0,M(1853).L)(h=>function(){h(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(Rt,Je,M)=>{"use strict";M.d(Je,{R0:()=>ie,lI:()=>X,ms:()=>fe});var l=M(8071),H=M(9470);function h(de){return de[de.length-1]}function fe(de){return(0,l.T)(h(de))?de.pop():void 0}function X(de){return(0,H.m)(h(de))?de.pop():void 0}function ie(de,Q){return"number"==typeof h(de)?de.pop():Q}},3073:(Rt,Je,M)=>{"use strict";M.d(Je,{D:()=>X});const{isArray:l}=Array,{getPrototypeOf:H,prototype:h,keys:fe}=Object;function X(de){if(1===de.length){const Q=de[0];if(l(Q))return{args:Q,keys:null};if(function ie(de){return de&&"object"==typeof de&&H(de)===h}(Q)){const z=fe(Q);return{args:z.map(L=>Q[L]),keys:z}}}return{args:de,keys:null}}},7908:(Rt,Je,M)=>{"use strict";function l(H,h){if(H){const fe=H.indexOf(h);0<=fe&&H.splice(fe,1)}}M.d(Je,{o:()=>l})},1853:(Rt,Je,M)=>{"use strict";function l(H){const fe=H(X=>{Error.call(X),X.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}M.d(Je,{L:()=>l})},8496:(Rt,Je,M)=>{"use strict";function l(H,h){return H.reduce((fe,X,ie)=>(fe[X]=h[ie],fe),{})}M.d(Je,{e:()=>l})},9786:(Rt,Je,M)=>{"use strict";M.d(Je,{Y:()=>h,l:()=>fe});var l=M(1026);let H=null;function h(X){if(l.$.useDeprecatedSynchronousErrorHandling){const ie=!H;if(ie&&(H={errorThrown:!1,error:null}),X(),ie){const{errorThrown:de,error:Q}=H;if(H=null,de)throw Q}}else X()}function fe(X){l.$.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=X)}},5225:(Rt,Je,M)=>{"use strict";function l(H,h,fe,X=0,ie=!1){const de=h.schedule(function(){fe(),ie?H.add(this.schedule(null,X)):this.unsubscribe()},X);if(H.add(de),!ie)return de}M.d(Je,{N:()=>l})},3669:(Rt,Je,M)=>{"use strict";function l(H){return H}M.d(Je,{D:()=>l})},7441:(Rt,Je,M)=>{"use strict";M.d(Je,{X:()=>l});const l=H=>H&&"number"==typeof H.length&&"function"!=typeof H},7953:(Rt,Je,M)=>{"use strict";M.d(Je,{T:()=>H});var l=M(8071);function H(h){return Symbol.asyncIterator&&(0,l.T)(h?.[Symbol.asyncIterator])}},8071:(Rt,Je,M)=>{"use strict";function l(H){return"function"==typeof H}M.d(Je,{T:()=>l})},5055:(Rt,Je,M)=>{"use strict";M.d(Je,{l:()=>h});var l=M(3494),H=M(8071);function h(fe){return(0,H.T)(fe[l.s])}},5397:(Rt,Je,M)=>{"use strict";M.d(Je,{x:()=>h});var l=M(4761),H=M(8071);function h(fe){return(0,H.T)(fe?.[l.l])}},4402:(Rt,Je,M)=>{"use strict";M.d(Je,{A:()=>h});var l=M(1985),H=M(8071);function h(fe){return!!fe&&(fe instanceof l.c||(0,H.T)(fe.lift)&&(0,H.T)(fe.subscribe))}},9858:(Rt,Je,M)=>{"use strict";M.d(Je,{y:()=>H});var l=M(8071);function H(h){return(0,l.T)(h?.then)}},5196:(Rt,Je,M)=>{"use strict";M.d(Je,{C:()=>h,U:()=>fe});var l=M(5215),H=M(8071);function h(X){return(0,l.AQ)(this,arguments,function*(){const de=X.getReader();try{for(;;){const{value:Q,done:z}=yield(0,l.N3)(de.read());if(z)return yield(0,l.N3)(void 0);yield yield(0,l.N3)(Q)}}finally{de.releaseLock()}})}function fe(X){return(0,H.T)(X?.getReader)}},9470:(Rt,Je,M)=>{"use strict";M.d(Je,{m:()=>H});var l=M(8071);function H(h){return h&&(0,l.T)(h.schedule)}},9974:(Rt,Je,M)=>{"use strict";M.d(Je,{N:()=>h,S:()=>H});var l=M(8071);function H(fe){return(0,l.T)(fe?.lift)}function h(fe){return X=>{if(H(X))return X.lift(function(ie){try{return fe(ie,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(Rt,Je,M)=>{"use strict";M.d(Je,{I:()=>fe});var l=M(6354);const{isArray:H}=Array;function fe(X){return(0,l.T)(ie=>function h(X,ie){return H(ie)?X(...ie):X(ie)}(X,ie))}},5343:(Rt,Je,M)=>{"use strict";function l(){}M.d(Je,{l:()=>l})},1203:(Rt,Je,M)=>{"use strict";M.d(Je,{F:()=>H,m:()=>h});var l=M(3669);function H(...fe){return h(fe)}function h(fe){return 0===fe.length?l.D:1===fe.length?fe[0]:function(ie){return fe.reduce((de,Q)=>Q(de),ie)}}},5334:(Rt,Je,M)=>{"use strict";M.d(Je,{m:()=>h});var l=M(1026),H=M(9270);function h(fe){H.f.setTimeout(()=>{const{onUnhandledError:X}=l.$;if(!X)throw fe;X(fe)})}},591:(Rt,Je,M)=>{"use strict";function l(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(Je,{L:()=>l})},5215:(Rt,Je,M)=>{"use strict";function Q(le,x,C,j){return new(C||(C=Promise))(function(_e,Ee){function Ve(Oe){try{V(j.next(Oe))}catch(Ot){Ee(Ot)}}function Ne(Oe){try{V(j.throw(Oe))}catch(Ot){Ee(Ot)}}function V(Oe){Oe.done?_e(Oe.value):function J(_e){return _e instanceof C?_e:new C(function(Ee){Ee(_e)})}(Oe.value).then(Ve,Ne)}V((j=j.apply(le,x||[])).next())})}function Re(le){return this instanceof Re?(this.v=le,this):new Re(le)}function ye(le,x,C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J,j=C.apply(le,x||[]),_e=[];return J={},Ee("next"),Ee("throw"),Ee("return"),J[Symbol.asyncIterator]=function(){return this},J;function Ee(ot){j[ot]&&(J[ot]=function(Ut){return new Promise(function(ze,Mt){_e.push([ot,Ut,ze,Mt])>1||Ve(ot,Ut)})})}function Ve(ot,Ut){try{!function Ne(ot){ot.value instanceof Re?Promise.resolve(ot.value.v).then(V,Oe):Ot(_e[0][2],ot)}(j[ot](Ut))}catch(ze){Ot(_e[0][3],ze)}}function V(ot){Ve("next",ot)}function Oe(ot){Ve("throw",ot)}function Ot(ot,Ut){ot(Ut),_e.shift(),_e.length&&Ve(_e[0][0],_e[0][1])}}function We(le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C,x=le[Symbol.asyncIterator];return x?x.call(le):(le=function K(le){var x="function"==typeof Symbol&&Symbol.iterator,C=x&&le[x],j=0;if(C)return C.call(le);if(le&&"number"==typeof le.length)return{next:function(){return le&&j>=le.length&&(le=void 0),{value:le&&le[j++],done:!le}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")}(le),C={},j("next"),j("throw"),j("return"),C[Symbol.asyncIterator]=function(){return this},C);function j(_e){C[_e]=le[_e]&&function(Ee){return new Promise(function(Ve,Ne){!function J(_e,Ee,Ve,Ne){Promise.resolve(Ne).then(function(V){_e({value:V,done:Ve})},Ee)}(Ve,Ne,(Ee=le[_e](Ee)).done,Ee.value)})}}}M.d(Je,{AQ:()=>ye,N3:()=>Re,sH:()=>Q,xN:()=>We})},7790:()=>{},3776:()=>{},477:()=>{},9969:(Rt,Je,M)=>{"use strict";M.d(Je,{FX:()=>ct,If:()=>l,K2:()=>ie,hZ:()=>h,i0:()=>fe,iF:()=>de,kY:()=>L,kp:()=>H,sf:()=>St,ui:()=>pt,wk:()=>Q});var l=function(le){return le[le.State=0]="State",le[le.Transition=1]="Transition",le[le.Sequence=2]="Sequence",le[le.Group=3]="Group",le[le.Animate=4]="Animate",le[le.Keyframes=5]="Keyframes",le[le.Style=6]="Style",le[le.Trigger=7]="Trigger",le[le.Reference=8]="Reference",le[le.AnimateChild=9]="AnimateChild",le[le.AnimateRef=10]="AnimateRef",le[le.Query=11]="Query",le[le.Stagger=12]="Stagger",le}(l||{});const H="*";function h(le,x){return{type:l.Trigger,name:le,definitions:x,options:{}}}function fe(le,x=null){return{type:l.Animate,styles:x,timings:le}}function ie(le,x=null){return{type:l.Sequence,steps:le,options:x}}function de(le){return{type:l.Style,styles:le,offset:null}}function Q(le,x,C){return{type:l.State,name:le,styles:x,options:C}}function L(le,x,C=null){return{type:l.Transition,expr:le,animation:x,options:C}}class St{constructor(x=0,C=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=x+C}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(x=>x()),this._onDoneFns=[])}onStart(x){this._originalOnStartFns.push(x),this._onStartFns.push(x)}onDone(x){this._originalOnDoneFns.push(x),this._onDoneFns.push(x)}onDestroy(x){this._onDestroyFns.push(x)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(x=>x()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(x=>x()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(x){this._position=this.totalTime?x*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(x){const C="start"==x?this._onStartFns:this._onDoneFns;C.forEach(j=>j()),C.length=0}}class pt{constructor(x){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=x;let C=0,j=0,J=0;const _e=this.players.length;0==_e?queueMicrotask(()=>this._onFinish()):this.players.forEach(Ee=>{Ee.onDone(()=>{++C==_e&&this._onFinish()}),Ee.onDestroy(()=>{++j==_e&&this._onDestroy()}),Ee.onStart(()=>{++J==_e&&this._onStart()})}),this.totalTime=this.players.reduce((Ee,Ve)=>Math.max(Ee,Ve.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(x=>x()),this._onDoneFns=[])}init(){this.players.forEach(x=>x.init())}onStart(x){this._onStartFns.push(x)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(x=>x()),this._onStartFns=[])}onDone(x){this._onDoneFns.push(x)}onDestroy(x){this._onDestroyFns.push(x)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(x=>x.play())}pause(){this.players.forEach(x=>x.pause())}restart(){this.players.forEach(x=>x.restart())}finish(){this._onFinish(),this.players.forEach(x=>x.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(x=>x.destroy()),this._onDestroyFns.forEach(x=>x()),this._onDestroyFns=[])}reset(){this.players.forEach(x=>x.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(x){const C=x*this.totalTime;this.players.forEach(j=>{const J=j.totalTime?Math.min(1,C/j.totalTime):1;j.setPosition(J)})}getPosition(){const x=this.players.reduce((C,j)=>null===C||j.totalTime>C.totalTime?j:C,null);return null!=x?x.getPosition():0}beforeDestroy(){this.players.forEach(x=>{x.beforeDestroy&&x.beforeDestroy()})}triggerCallback(x){const C="start"==x?this._onStartFns:this._onDoneFns;C.forEach(j=>j()),C.length=0}}const ct="!"},177:(Rt,Je,M)=>{"use strict";M.d(Je,{AJ:()=>ba,B3:()=>zi,MD:()=>Wo,N0:()=>vo,QT:()=>h,T3:()=>Hr,UE:()=>wo,VF:()=>X,Vy:()=>Cl,XO:()=>Ee,YU:()=>ht,Yq:()=>Si,ZD:()=>fe,_b:()=>G,aZ:()=>ye,bT:()=>Fr,cH:()=>le,hb:()=>ee,lG:()=>Yo,oV:()=>ct,qQ:()=>de,tL:()=>Ve,vh:()=>Fo});var l=M(4438);let H=null;function h(){return H}function fe(P){H??=P}class X{}const de=new l.nKC("");let Q=(()=>{class P{historyGo(se){throw new Error("")}static{this.\u0275fac=function(be){return new(be||P)}}static{this.\u0275prov=l.jDH({token:P,factory:()=>(0,l.WQX)(L),providedIn:"platform"})}}return P})(),L=(()=>{class P extends Q{constructor(){super(),this._doc=(0,l.WQX)(de),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return h().getBaseHref(this._doc)}onPopState(se){const be=h().getGlobalEventTarget(this._doc,"window");return be.addEventListener("popstate",se,!1),()=>be.removeEventListener("popstate",se)}onHashChange(se){const be=h().getGlobalEventTarget(this._doc,"window");return be.addEventListener("hashchange",se,!1),()=>be.removeEventListener("hashchange",se)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(se){this._location.pathname=se}pushState(se,be,mt){this._history.pushState(se,be,mt)}replaceState(se,be,mt){this._history.replaceState(se,be,mt)}forward(){this._history.forward()}back(){this._history.back()}historyGo(se=0){this._history.go(se)}getState(){return this._history.state}static{this.\u0275fac=function(be){return new(be||P)}}static{this.\u0275prov=l.jDH({token:P,factory:()=>new P,providedIn:"platform"})}}return P})();function I(P,we){if(0==P.length)return we;if(0==we.length)return P;let se=0;return P.endsWith("/")&&se++,we.startsWith("/")&&se++,2==se?P+we.substring(1):1==se?P+we:P+"/"+we}function K(P){const we=P.match(/#|\?|$/),se=we&&we.index||P.length;return P.slice(0,se-("/"===P[se-1]?1:0))+P.slice(se)}function te(P){return P&&"?"!==P[0]?"?"+P:P}let ee=(()=>{class P{historyGo(se){throw new Error("")}static{this.\u0275fac=function(be){return new(be||P)}}static{this.\u0275prov=l.jDH({token:P,factory:()=>(0,l.WQX)(Ce),providedIn:"root"})}}return P})();const ue=new l.nKC("");let Ce=(()=>{class P extends ee{constructor(se,be){super(),this._platformLocation=se,this._removeListenerFns=[],this._baseHref=be??this._platformLocation.getBaseHrefFromDOM()??(0,l.WQX)(de).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(se){this._removeListenerFns.push(this._platformLocation.onPopState(se),this._platformLocation.onHashChange(se))}getBaseHref(){return this._baseHref}prepareExternalUrl(se){return I(this._baseHref,se)}path(se=!1){const be=this._platformLocation.pathname+te(this._platformLocation.search),mt=this._platformLocation.hash;return mt&&se?`${be}${mt}`:be}pushState(se,be,mt,Xt){const Kt=this.prepareExternalUrl(mt+te(Xt));this._platformLocation.pushState(se,be,Kt)}replaceState(se,be,mt,Xt){const Kt=this.prepareExternalUrl(mt+te(Xt));this._platformLocation.replaceState(se,be,Kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(se=0){this._platformLocation.historyGo?.(se)}static{this.\u0275fac=function(be){return new(be||P)(l.KVO(Q),l.KVO(ue,8))}}static{this.\u0275prov=l.jDH({token:P,factory:P.\u0275fac,providedIn:"root"})}}return P})(),ye=(()=>{class P{constructor(se){this._subject=new l.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=se;const be=this._locationStrategy.getBaseHref();this._basePath=function ke(P){if(new RegExp("^(https?:)?//").test(P)){const[,se]=P.split(/\/\/[^\/]+/);return se}return P}(K(He(be))),this._locationStrategy.onPopState(mt=>{this._subject.emit({url:this.path(!0),pop:!0,state:mt.state,type:mt.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(se=!1){return this.normalize(this._locationStrategy.path(se))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(se,be=""){return this.path()==this.normalize(se+te(be))}normalize(se){return P.stripTrailingSlash(function We(P,we){if(!P||!we.startsWith(P))return we;const se=we.substring(P.length);return""===se||["/",";","?","#"].includes(se[0])?se:we}(this._basePath,He(se)))}prepareExternalUrl(se){return se&&"/"!==se[0]&&(se="/"+se),this._locationStrategy.prepareExternalUrl(se)}go(se,be="",mt=null){this._locationStrategy.pushState(mt,"",se,be),this._notifyUrlChangeListeners(this.prepareExternalUrl(se+te(be)),mt)}replaceState(se,be="",mt=null){this._locationStrategy.replaceState(mt,"",se,be),this._notifyUrlChangeListeners(this.prepareExternalUrl(se+te(be)),mt)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(se=0){this._locationStrategy.historyGo?.(se)}onUrlChange(se){return this._urlChangeListeners.push(se),this._urlChangeSubscription??=this.subscribe(be=>{this._notifyUrlChangeListeners(be.url,be.state)}),()=>{const be=this._urlChangeListeners.indexOf(se);this._urlChangeListeners.splice(be,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(se="",be){this._urlChangeListeners.forEach(mt=>mt(se,be))}subscribe(se,be,mt){return this._subject.subscribe({next:se,error:be,complete:mt})}static{this.normalizeQueryParams=te}static{this.joinWithSlash=I}static{this.stripTrailingSlash=K}static{this.\u0275fac=function(be){return new(be||P)(l.KVO(ee))}}static{this.\u0275prov=l.jDH({token:P,factory:()=>function Te(){return new ye((0,l.KVO)(ee))}(),providedIn:"root"})}}return P})();function He(P){return P.replace(/\/index.html$/,"")}var ct=function(P){return P[P.Format=0]="Format",P[P.Standalone=1]="Standalone",P}(ct||{}),le=function(P){return P[P.Narrow=0]="Narrow",P[P.Abbreviated=1]="Abbreviated",P[P.Wide=2]="Wide",P[P.Short=3]="Short",P}(le||{}),x=function(P){return P[P.Short=0]="Short",P[P.Medium=1]="Medium",P[P.Long=2]="Long",P[P.Full=3]="Full",P}(x||{});const C={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ee(P,we,se){const be=(0,l.H5H)(P),Xt=at([be[l.KH2.DaysFormat],be[l.KH2.DaysStandalone]],we);return at(Xt,se)}function Ve(P,we,se){const be=(0,l.H5H)(P),Xt=at([be[l.KH2.MonthsFormat],be[l.KH2.MonthsStandalone]],we);return at(Xt,se)}function Ot(P,we){return at((0,l.H5H)(P)[l.KH2.DateFormat],we)}function ot(P,we){return at((0,l.H5H)(P)[l.KH2.TimeFormat],we)}function Ut(P,we){return at((0,l.H5H)(P)[l.KH2.DateTimeFormat],we)}function ze(P,we){const se=(0,l.H5H)(P),be=se[l.KH2.NumberSymbols][we];if(typeof be>"u"){if(we===C.CurrencyDecimal)return se[l.KH2.NumberSymbols][C.Decimal];if(we===C.CurrencyGroup)return se[l.KH2.NumberSymbols][C.Group]}return be}function fn(P){if(!P[l.KH2.ExtraData])throw new Error(`Missing extra locale data for the locale "${P[l.KH2.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function at(P,we){for(let se=we;se>-1;se--)if(typeof P[se]<"u")return P[se];throw new Error("Locale data API: locale data undefined")}function Dt(P){const[we,se]=P.split(":");return{hours:+we,minutes:+se}}const Yn=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vn={},Yr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Gn=function(P){return P[P.Short=0]="Short",P[P.ShortGMT=1]="ShortGMT",P[P.Long=2]="Long",P[P.Extended=3]="Extended",P}(Gn||{}),An=function(P){return P[P.FullYear=0]="FullYear",P[P.Month=1]="Month",P[P.Date=2]="Date",P[P.Hours=3]="Hours",P[P.Minutes=4]="Minutes",P[P.Seconds=5]="Seconds",P[P.FractionalSeconds=6]="FractionalSeconds",P[P.Day=7]="Day",P}(An||{}),ii=function(P){return P[P.DayPeriods=0]="DayPeriods",P[P.Days=1]="Days",P[P.Months=2]="Months",P[P.Eras=3]="Eras",P}(ii||{});function Si(P,we,se,be){let mt=function Un(P){if(si(P))return P;if("number"==typeof P&&!isNaN(P))return new Date(P);if("string"==typeof P){if(P=P.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(P)){const[mt,Xt=1,Kt=1]=P.split("-").map(Qn=>+Qn);return $i(mt,Xt-1,Kt)}const se=parseFloat(P);if(!isNaN(P-se))return new Date(se);let be;if(be=P.match(Yn))return function Qi(P){const we=new Date(0);let se=0,be=0;const mt=P[8]?we.setUTCFullYear:we.setFullYear,Xt=P[8]?we.setUTCHours:we.setHours;P[9]&&(se=Number(P[9]+P[10]),be=Number(P[9]+P[11])),mt.call(we,Number(P[1]),Number(P[2])-1,Number(P[3]));const Kt=Number(P[4]||0)-se,Qn=Number(P[5]||0)-be,Dr=Number(P[6]||0),es=Math.floor(1e3*parseFloat("0."+(P[7]||0)));return Xt.call(we,Kt,Qn,Dr,es),we}(be)}const we=new Date(P);if(!si(we))throw new Error(`Unable to convert "${P}" into a date`);return we}(P);we=Ri(se,we)||we;let Qn,Kt=[];for(;we;){if(Qn=Yr.exec(we),!Qn){Kt.push(we);break}{Kt=Kt.concat(Qn.slice(1));const hs=Kt.pop();if(!hs)break;we=hs}}let Dr=mt.getTimezoneOffset();be&&(Dr=xt(be,Dr),mt=function mn(P,we,se){const be=se?-1:1,mt=P.getTimezoneOffset();return function on(P,we){return(P=new Date(P.getTime())).setMinutes(P.getMinutes()+we),P}(P,be*(xt(we,mt)-mt))}(mt,be,!0));let es="";return Kt.forEach(hs=>{const ar=function rt(P){if(Ht[P])return Ht[P];let we;switch(P){case"G":case"GG":case"GGG":we=_r(ii.Eras,le.Abbreviated);break;case"GGGG":we=_r(ii.Eras,le.Wide);break;case"GGGGG":we=_r(ii.Eras,le.Narrow);break;case"y":we=ri(An.FullYear,1,0,!1,!0);break;case"yy":we=ri(An.FullYear,2,0,!0,!0);break;case"yyy":we=ri(An.FullYear,3,0,!1,!0);break;case"yyyy":we=ri(An.FullYear,4,0,!1,!0);break;case"Y":we=At(1);break;case"YY":we=At(2,!0);break;case"YYY":we=At(3);break;case"YYYY":we=At(4);break;case"M":case"L":we=ri(An.Month,1,1);break;case"MM":case"LL":we=ri(An.Month,2,1);break;case"MMM":we=_r(ii.Months,le.Abbreviated);break;case"MMMM":we=_r(ii.Months,le.Wide);break;case"MMMMM":we=_r(ii.Months,le.Narrow);break;case"LLL":we=_r(ii.Months,le.Abbreviated,ct.Standalone);break;case"LLLL":we=_r(ii.Months,le.Wide,ct.Standalone);break;case"LLLLL":we=_r(ii.Months,le.Narrow,ct.Standalone);break;case"w":we=Pr(1);break;case"ww":we=Pr(2);break;case"W":we=Pr(1,!0);break;case"d":we=ri(An.Date,1);break;case"dd":we=ri(An.Date,2);break;case"c":case"cc":we=ri(An.Day,1);break;case"ccc":we=_r(ii.Days,le.Abbreviated,ct.Standalone);break;case"cccc":we=_r(ii.Days,le.Wide,ct.Standalone);break;case"ccccc":we=_r(ii.Days,le.Narrow,ct.Standalone);break;case"cccccc":we=_r(ii.Days,le.Short,ct.Standalone);break;case"E":case"EE":case"EEE":we=_r(ii.Days,le.Abbreviated);break;case"EEEE":we=_r(ii.Days,le.Wide);break;case"EEEEE":we=_r(ii.Days,le.Narrow);break;case"EEEEEE":we=_r(ii.Days,le.Short);break;case"a":case"aa":case"aaa":we=_r(ii.DayPeriods,le.Abbreviated);break;case"aaaa":we=_r(ii.DayPeriods,le.Wide);break;case"aaaaa":we=_r(ii.DayPeriods,le.Narrow);break;case"b":case"bb":case"bbb":we=_r(ii.DayPeriods,le.Abbreviated,ct.Standalone,!0);break;case"bbbb":we=_r(ii.DayPeriods,le.Wide,ct.Standalone,!0);break;case"bbbbb":we=_r(ii.DayPeriods,le.Narrow,ct.Standalone,!0);break;case"B":case"BB":case"BBB":we=_r(ii.DayPeriods,le.Abbreviated,ct.Format,!0);break;case"BBBB":we=_r(ii.DayPeriods,le.Wide,ct.Format,!0);break;case"BBBBB":we=_r(ii.DayPeriods,le.Narrow,ct.Format,!0);break;case"h":we=ri(An.Hours,1,-12);break;case"hh":we=ri(An.Hours,2,-12);break;case"H":we=ri(An.Hours,1);break;case"HH":we=ri(An.Hours,2);break;case"m":we=ri(An.Minutes,1);break;case"mm":we=ri(An.Minutes,2);break;case"s":we=ri(An.Seconds,1);break;case"ss":we=ri(An.Seconds,2);break;case"S":we=ri(An.FractionalSeconds,1);break;case"SS":we=ri(An.FractionalSeconds,2);break;case"SSS":we=ri(An.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":we=Cr(Gn.Short);break;case"ZZZZZ":we=Cr(Gn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":we=Cr(Gn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":we=Cr(Gn.Long);break;default:return null}return Ht[P]=we,we}(hs);es+=ar?ar(mt,se,Dr):"''"===hs?"'":hs.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),es}function $i(P,we,se){const be=new Date(0);return be.setFullYear(P,we,se),be.setHours(0,0,0),be}function Ri(P,we){const se=function J(P){return(0,l.H5H)(P)[l.KH2.LocaleId]}(P);if(Vn[se]??={},Vn[se][we])return Vn[se][we];let be="";switch(we){case"shortDate":be=Ot(P,x.Short);break;case"mediumDate":be=Ot(P,x.Medium);break;case"longDate":be=Ot(P,x.Long);break;case"fullDate":be=Ot(P,x.Full);break;case"shortTime":be=ot(P,x.Short);break;case"mediumTime":be=ot(P,x.Medium);break;case"longTime":be=ot(P,x.Long);break;case"fullTime":be=ot(P,x.Full);break;case"short":const mt=Ri(P,"shortTime"),Xt=Ri(P,"shortDate");be=Ki(Ut(P,x.Short),[mt,Xt]);break;case"medium":const Kt=Ri(P,"mediumTime"),Qn=Ri(P,"mediumDate");be=Ki(Ut(P,x.Medium),[Kt,Qn]);break;case"long":const Dr=Ri(P,"longTime"),es=Ri(P,"longDate");be=Ki(Ut(P,x.Long),[Dr,es]);break;case"full":const hs=Ri(P,"fullTime"),ar=Ri(P,"fullDate");be=Ki(Ut(P,x.Full),[hs,ar])}return be&&(Vn[se][we]=be),be}function Ki(P,we){return we&&(P=P.replace(/\{([^}]+)}/g,function(se,be){return null!=we&&be in we?we[be]:se})),P}function Pi(P,we,se="-",be,mt){let Xt="";(P<0||mt&&P<=0)&&(mt?P=1-P:(P=-P,Xt=se));let Kt=String(P);for(;Kt.length<we;)Kt="0"+Kt;return be&&(Kt=Kt.slice(Kt.length-we)),Xt+Kt}function ri(P,we,se=0,be=!1,mt=!1){return function(Xt,Kt){let Qn=function qi(P,we){switch(P){case An.FullYear:return we.getFullYear();case An.Month:return we.getMonth();case An.Date:return we.getDate();case An.Hours:return we.getHours();case An.Minutes:return we.getMinutes();case An.Seconds:return we.getSeconds();case An.FractionalSeconds:return we.getMilliseconds();case An.Day:return we.getDay();default:throw new Error(`Unknown DateType value "${P}".`)}}(P,Xt);if((se>0||Qn>-se)&&(Qn+=se),P===An.Hours)0===Qn&&-12===se&&(Qn=12);else if(P===An.FractionalSeconds)return function Ps(P,we){return Pi(P,3).substring(0,we)}(Qn,we);const Dr=ze(Kt,C.MinusSign);return Pi(Qn,we,Dr,be,mt)}}function _r(P,we,se=ct.Format,be=!1){return function(mt,Xt){return function wi(P,we,se,be,mt,Xt){switch(se){case ii.Months:return Ve(we,mt,be)[P.getMonth()];case ii.Days:return Ee(we,mt,be)[P.getDay()];case ii.DayPeriods:const Kt=P.getHours(),Qn=P.getMinutes();if(Xt){const es=function Sn(P){const we=(0,l.H5H)(P);return fn(we),(we[l.KH2.ExtraData][2]||[]).map(be=>"string"==typeof be?Dt(be):[Dt(be[0]),Dt(be[1])])}(we),hs=function Gt(P,we,se){const be=(0,l.H5H)(P);fn(be);const Xt=at([be[l.KH2.ExtraData][0],be[l.KH2.ExtraData][1]],we)||[];return at(Xt,se)||[]}(we,mt,be),ar=es.findIndex(Cs=>{if(Array.isArray(Cs)){const[Fi,lt]=Cs,Rn=Kt>=Fi.hours&&Qn>=Fi.minutes,en=Kt<lt.hours||Kt===lt.hours&&Qn<lt.minutes;if(Fi.hours<lt.hours){if(Rn&&en)return!0}else if(Rn||en)return!0}else if(Cs.hours===Kt&&Cs.minutes===Qn)return!0;return!1});if(-1!==ar)return hs[ar]}return function _e(P,we,se){const be=(0,l.H5H)(P),Xt=at([be[l.KH2.DayPeriodsFormat],be[l.KH2.DayPeriodsStandalone]],we);return at(Xt,se)}(we,mt,be)[Kt<12?0:1];case ii.Eras:return function Ne(P,we){return at((0,l.H5H)(P)[l.KH2.Eras],we)}(we,be)[P.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${se}`)}}(mt,Xt,P,we,se,be)}}function Cr(P){return function(we,se,be){const mt=-1*be,Xt=ze(se,C.MinusSign),Kt=mt>0?Math.floor(mt/60):Math.ceil(mt/60);switch(P){case Gn.Short:return(mt>=0?"+":"")+Pi(Kt,2,Xt)+Pi(Math.abs(mt%60),2,Xt);case Gn.ShortGMT:return"GMT"+(mt>=0?"+":"")+Pi(Kt,1,Xt);case Gn.Long:return"GMT"+(mt>=0?"+":"")+Pi(Kt,2,Xt)+":"+Pi(Math.abs(mt%60),2,Xt);case Gn.Extended:return 0===be?"Z":(mt>=0?"+":"")+Pi(Kt,2,Xt)+":"+Pi(Math.abs(mt%60),2,Xt);default:throw new Error(`Unknown zone width "${P}"`)}}}const Wr=0,Lr=4;function Bs(P){const we=P.getDay(),se=0===we?-3:Lr-we;return $i(P.getFullYear(),P.getMonth(),P.getDate()+se)}function Pr(P,we=!1){return function(se,be){let mt;if(we){const Xt=new Date(se.getFullYear(),se.getMonth(),1).getDay()-1,Kt=se.getDate();mt=1+Math.floor((Kt+Xt)/7)}else{const Xt=Bs(se),Kt=function or(P){const we=$i(P,Wr,1).getDay();return $i(P,0,1+(we<=Lr?Lr:Lr+7)-we)}(Xt.getFullYear()),Qn=Xt.getTime()-Kt.getTime();mt=1+Math.round(Qn/6048e5)}return Pi(mt,P,ze(be,C.MinusSign))}}function At(P,we=!1){return function(se,be){return Pi(Bs(se).getFullYear(),P,ze(be,C.MinusSign),we)}}const Ht={};function xt(P,we){P=P.replace(/:/g,"");const se=Date.parse("Jan 01, 1970 00:00:00 "+P)/6e4;return isNaN(se)?we:se}function si(P){return P instanceof Date&&!isNaN(P.valueOf())}function G(P,we){we=encodeURIComponent(we);for(const se of P.split(";")){const be=se.indexOf("="),[mt,Xt]=-1==be?[se,""]:[se.slice(0,be),se.slice(be+1)];if(mt.trim()===we)return decodeURIComponent(Xt)}return null}const ce=/\s+/,qe=[];let ht=(()=>{class P{constructor(se,be){this._ngEl=se,this._renderer=be,this.initialClasses=qe,this.stateMap=new Map}set klass(se){this.initialClasses=null!=se?se.trim().split(ce):qe}set ngClass(se){this.rawClass="string"==typeof se?se.trim().split(ce):se}ngDoCheck(){for(const be of this.initialClasses)this._updateState(be,!0);const se=this.rawClass;if(Array.isArray(se)||se instanceof Set)for(const be of se)this._updateState(be,!0);else if(null!=se)for(const be of Object.keys(se))this._updateState(be,!!se[be]);this._applyStateDiff()}_updateState(se,be){const mt=this.stateMap.get(se);void 0!==mt?(mt.enabled!==be&&(mt.changed=!0,mt.enabled=be),mt.touched=!0):this.stateMap.set(se,{enabled:be,changed:!0,touched:!0})}_applyStateDiff(){for(const se of this.stateMap){const be=se[0],mt=se[1];mt.changed?(this._toggleClass(be,mt.enabled),mt.changed=!1):mt.touched||(mt.enabled&&this._toggleClass(be,!1),this.stateMap.delete(be)),mt.touched=!1}}_toggleClass(se,be){(se=se.trim()).length>0&&se.split(ce).forEach(mt=>{be?this._renderer.addClass(this._ngEl.nativeElement,mt):this._renderer.removeClass(this._ngEl.nativeElement,mt)})}static{this.\u0275fac=function(be){return new(be||P)(l.rXU(l.aKT),l.rXU(l.sFG))}}static{this.\u0275dir=l.FsC({type:P,selectors:[["","ngClass",""]],inputs:{klass:[l.Mj6.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return P})(),Fr=(()=>{class P{constructor(se,be){this._viewContainer=se,this._context=new Br,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=be}set ngIf(se){this._context.$implicit=this._context.ngIf=se,this._updateView()}set ngIfThen(se){Us("ngIfThen",se),this._thenTemplateRef=se,this._thenViewRef=null,this._updateView()}set ngIfElse(se){Us("ngIfElse",se),this._elseTemplateRef=se,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(se,be){return!0}static{this.\u0275fac=function(be){return new(be||P)(l.rXU(l.c1b),l.rXU(l.C4Q))}}static{this.\u0275dir=l.FsC({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return P})();class Br{constructor(){this.$implicit=null,this.ngIf=null}}function Us(P,we){if(we&&!we.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,l.Tbb)(we)}'.`)}let zi=(()=>{class P{constructor(se,be,mt){this._ngEl=se,this._differs=be,this._renderer=mt,this._ngStyle=null,this._differ=null}set ngStyle(se){this._ngStyle=se,!this._differ&&se&&(this._differ=this._differs.find(se).create())}ngDoCheck(){if(this._differ){const se=this._differ.diff(this._ngStyle);se&&this._applyChanges(se)}}_setStyle(se,be){const[mt,Xt]=se.split("."),Kt=-1===mt.indexOf("-")?void 0:l.czy.DashCase;null!=be?this._renderer.setStyle(this._ngEl.nativeElement,mt,Xt?`${be}${Xt}`:be,Kt):this._renderer.removeStyle(this._ngEl.nativeElement,mt,Kt)}_applyChanges(se){se.forEachRemovedItem(be=>this._setStyle(be.key,null)),se.forEachAddedItem(be=>this._setStyle(be.key,be.currentValue)),se.forEachChangedItem(be=>this._setStyle(be.key,be.currentValue))}static{this.\u0275fac=function(be){return new(be||P)(l.rXU(l.aKT),l.rXU(l.MKu),l.rXU(l.sFG))}}static{this.\u0275dir=l.FsC({type:P,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return P})(),Hr=(()=>{class P{constructor(se){this._viewContainerRef=se,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(se){if(this._shouldRecreateView(se)){const be=this._viewContainerRef;if(this._viewRef&&be.remove(be.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const mt=this._createContextForwardProxy();this._viewRef=be.createEmbeddedView(this.ngTemplateOutlet,mt,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(se){return!!se.ngTemplateOutlet||!!se.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(se,be,mt)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,be,mt),get:(se,be,mt)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,be,mt)}})}static{this.\u0275fac=function(be){return new(be||P)(l.rXU(l.c1b))}}static{this.\u0275dir=l.FsC({type:P,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[l.OA$]})}}return P})();const cl=new l.nKC(""),no=new l.nKC("");let Fo=(()=>{class P{constructor(se,be,mt){this.locale=se,this.defaultTimezone=be,this.defaultOptions=mt}transform(se,be,mt,Xt){if(null==se||""===se||se!=se)return null;try{return Si(se,be??this.defaultOptions?.dateFormat??"mediumDate",Xt||this.locale,mt??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(Kt){throw function ks(P,we){return new l.wOt(2100,!1)}()}}static{this.\u0275fac=function(be){return new(be||P)(l.rXU(l.xe9,16),l.rXU(cl,24),l.rXU(no,24))}}static{this.\u0275pipe=l.EJ8({name:"date",type:P,pure:!0,standalone:!0})}}return P})(),Yo=(()=>{class P{constructor(se){this.differs=se,this.keyValues=[],this.compareFn=Pa}transform(se,be=Pa){if(!se||!(se instanceof Map)&&"object"!=typeof se)return null;this.differ??=this.differs.find(se).create();const mt=this.differ.diff(se),Xt=be!==this.compareFn;return mt&&(this.keyValues=[],mt.forEachItem(Kt=>{this.keyValues.push(function Na(P,we){return{key:P,value:we}}(Kt.key,Kt.currentValue))})),(mt||Xt)&&(this.keyValues.sort(be),this.compareFn=be),this.keyValues}static{this.\u0275fac=function(be){return new(be||P)(l.rXU(l.MKu,16))}}static{this.\u0275pipe=l.EJ8({name:"keyvalue",type:P,pure:!1,standalone:!0})}}return P})();function Pa(P,we){const se=P.key,be=we.key;if(se===be)return 0;if(void 0===se)return 1;if(void 0===be)return-1;if(null===se)return 1;if(null===be)return-1;if("string"==typeof se&&"string"==typeof be)return se<be?-1:1;if("number"==typeof se&&"number"==typeof be)return se-be;if("boolean"==typeof se&&"boolean"==typeof be)return se<be?-1:1;const mt=String(se),Xt=String(be);return mt==Xt?0:mt<Xt?-1:1}let Wo=(()=>{class P{static{this.\u0275fac=function(be){return new(be||P)}}static{this.\u0275mod=l.$C({type:P})}static{this.\u0275inj=l.G2t({})}}return P})();const ba="browser",wl="server";function wo(P){return P===ba}function Cl(P){return P===wl}class vo{}},1626:(Rt,Je,M)=>{"use strict";M.d(Je,{$R:()=>xt,Lr:()=>ee,Qq:()=>Ot,ZZ:()=>Pn,b$:()=>on,cS:()=>Ve,hv:()=>J,q1:()=>Ds,yz:()=>Ne});var l=M(467),H=M(4438),h=M(7673),fe=M(1985),X=M(6648),ie=M(274),de=M(5964),Q=M(6354),z=M(980),L=M(5558),I=M(177);class K{}class te{}class ee{constructor(G){this.normalizedNames=new Map,this.lazyUpdate=null,G?"string"==typeof G?this.lazyInit=()=>{this.headers=new Map,G.split("\n").forEach(ce=>{const qe=ce.indexOf(":");if(qe>0){const ht=ce.slice(0,qe),tn=ht.toLowerCase(),hn=ce.slice(qe+1).trim();this.maybeSetNormalizedName(ht,tn),this.headers.has(tn)?this.headers.get(tn).push(hn):this.headers.set(tn,[hn])}})}:typeof Headers<"u"&&G instanceof Headers?(this.headers=new Map,G.forEach((ce,qe)=>{this.setHeaderEntries(qe,ce)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(G).forEach(([ce,qe])=>{this.setHeaderEntries(ce,qe)})}:this.headers=new Map}has(G){return this.init(),this.headers.has(G.toLowerCase())}get(G){this.init();const ce=this.headers.get(G.toLowerCase());return ce&&ce.length>0?ce[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(G){return this.init(),this.headers.get(G.toLowerCase())||null}append(G,ce){return this.clone({name:G,value:ce,op:"a"})}set(G,ce){return this.clone({name:G,value:ce,op:"s"})}delete(G,ce){return this.clone({name:G,value:ce,op:"d"})}maybeSetNormalizedName(G,ce){this.normalizedNames.has(ce)||this.normalizedNames.set(ce,G)}init(){this.lazyInit&&(this.lazyInit instanceof ee?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(G=>this.applyUpdate(G)),this.lazyUpdate=null))}copyFrom(G){G.init(),Array.from(G.headers.keys()).forEach(ce=>{this.headers.set(ce,G.headers.get(ce)),this.normalizedNames.set(ce,G.normalizedNames.get(ce))})}clone(G){const ce=new ee;return ce.lazyInit=this.lazyInit&&this.lazyInit instanceof ee?this.lazyInit:this,ce.lazyUpdate=(this.lazyUpdate||[]).concat([G]),ce}applyUpdate(G){const ce=G.name.toLowerCase();switch(G.op){case"a":case"s":let qe=G.value;if("string"==typeof qe&&(qe=[qe]),0===qe.length)return;this.maybeSetNormalizedName(G.name,ce);const ht=("a"===G.op?this.headers.get(ce):void 0)||[];ht.push(...qe),this.headers.set(ce,ht);break;case"d":const tn=G.value;if(tn){let hn=this.headers.get(ce);if(!hn)return;hn=hn.filter(zn=>-1===tn.indexOf(zn)),0===hn.length?(this.headers.delete(ce),this.normalizedNames.delete(ce)):this.headers.set(ce,hn)}else this.headers.delete(ce),this.normalizedNames.delete(ce)}}setHeaderEntries(G,ce){const qe=(Array.isArray(ce)?ce:[ce]).map(tn=>tn.toString()),ht=G.toLowerCase();this.headers.set(ht,qe),this.maybeSetNormalizedName(G,ht)}forEach(G){this.init(),Array.from(this.normalizedNames.keys()).forEach(ce=>G(this.normalizedNames.get(ce),this.headers.get(ce)))}}class Ce{encodeKey(G){return We(G)}encodeValue(G){return We(G)}decodeKey(G){return decodeURIComponent(G)}decodeValue(G){return decodeURIComponent(G)}}const ye=/%(\d[a-f0-9])/gi,Te={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function We(O){return encodeURIComponent(O).replace(ye,(G,ce)=>Te[ce]??G)}function He(O){return`${O}`}class ke{constructor(G={}){if(this.updates=null,this.cloneFrom=null,this.encoder=G.encoder||new Ce,G.fromString){if(G.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Re(O,G){const ce=new Map;return O.length>0&&O.replace(/^\?/,"").split("&").forEach(ht=>{const tn=ht.indexOf("="),[hn,zn]=-1==tn?[G.decodeKey(ht),""]:[G.decodeKey(ht.slice(0,tn)),G.decodeValue(ht.slice(tn+1))],Kn=ce.get(hn)||[];Kn.push(zn),ce.set(hn,Kn)}),ce}(G.fromString,this.encoder)}else G.fromObject?(this.map=new Map,Object.keys(G.fromObject).forEach(ce=>{const qe=G.fromObject[ce],ht=Array.isArray(qe)?qe.map(He):[He(qe)];this.map.set(ce,ht)})):this.map=null}has(G){return this.init(),this.map.has(G)}get(G){this.init();const ce=this.map.get(G);return ce?ce[0]:null}getAll(G){return this.init(),this.map.get(G)||null}keys(){return this.init(),Array.from(this.map.keys())}append(G,ce){return this.clone({param:G,value:ce,op:"a"})}appendAll(G){const ce=[];return Object.keys(G).forEach(qe=>{const ht=G[qe];Array.isArray(ht)?ht.forEach(tn=>{ce.push({param:qe,value:tn,op:"a"})}):ce.push({param:qe,value:ht,op:"a"})}),this.clone(ce)}set(G,ce){return this.clone({param:G,value:ce,op:"s"})}delete(G,ce){return this.clone({param:G,value:ce,op:"d"})}toString(){return this.init(),this.keys().map(G=>{const ce=this.encoder.encodeKey(G);return this.map.get(G).map(qe=>ce+"="+this.encoder.encodeValue(qe)).join("&")}).filter(G=>""!==G).join("&")}clone(G){const ce=new ke({encoder:this.encoder});return ce.cloneFrom=this.cloneFrom||this,ce.updates=(this.updates||[]).concat(G),ce}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(G=>this.map.set(G,this.cloneFrom.map.get(G))),this.updates.forEach(G=>{switch(G.op){case"a":case"s":const ce=("a"===G.op?this.map.get(G.param):void 0)||[];ce.push(He(G.value)),this.map.set(G.param,ce);break;case"d":if(void 0===G.value){this.map.delete(G.param);break}{let qe=this.map.get(G.param)||[];const ht=qe.indexOf(He(G.value));-1!==ht&&qe.splice(ht,1),qe.length>0?this.map.set(G.param,qe):this.map.delete(G.param)}}}),this.cloneFrom=this.updates=null)}}class St{constructor(){this.map=new Map}set(G,ce){return this.map.set(G,ce),this}get(G){return this.map.has(G)||this.map.set(G,G.defaultValue()),this.map.get(G)}delete(G){return this.map.delete(G),this}has(G){return this.map.has(G)}keys(){return this.map.keys()}}function ct(O){return typeof ArrayBuffer<"u"&&O instanceof ArrayBuffer}function le(O){return typeof Blob<"u"&&O instanceof Blob}function x(O){return typeof FormData<"u"&&O instanceof FormData}class j{constructor(G,ce,qe,ht){let tn;if(this.url=ce,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=G.toUpperCase(),function pt(O){switch(O){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ht?(this.body=void 0!==qe?qe:null,tn=ht):tn=qe,tn&&(this.reportProgress=!!tn.reportProgress,this.withCredentials=!!tn.withCredentials,tn.responseType&&(this.responseType=tn.responseType),tn.headers&&(this.headers=tn.headers),tn.context&&(this.context=tn.context),tn.params&&(this.params=tn.params),this.transferCache=tn.transferCache),this.headers??=new ee,this.context??=new St,this.params){const hn=this.params.toString();if(0===hn.length)this.urlWithParams=ce;else{const zn=ce.indexOf("?");this.urlWithParams=ce+(-1===zn?"?":zn<ce.length-1?"&":"")+hn}}else this.params=new ke,this.urlWithParams=ce}serializeBody(){return null===this.body?null:"string"==typeof this.body||ct(this.body)||le(this.body)||x(this.body)||function C(O){return typeof URLSearchParams<"u"&&O instanceof URLSearchParams}(this.body)?this.body:this.body instanceof ke?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||x(this.body)?null:le(this.body)?this.body.type||null:ct(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ke?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(G={}){const ce=G.method||this.method,qe=G.url||this.url,ht=G.responseType||this.responseType,tn=G.transferCache??this.transferCache,hn=void 0!==G.body?G.body:this.body,zn=G.withCredentials??this.withCredentials,Kn=G.reportProgress??this.reportProgress;let qn=G.headers||this.headers,Or=G.params||this.params;const Fr=G.context??this.context;return void 0!==G.setHeaders&&(qn=Object.keys(G.setHeaders).reduce((Br,Us)=>Br.set(Us,G.setHeaders[Us]),qn)),G.setParams&&(Or=Object.keys(G.setParams).reduce((Br,Us)=>Br.set(Us,G.setParams[Us]),Or)),new j(ce,qe,hn,{params:Or,headers:qn,context:Fr,reportProgress:Kn,responseType:ht,withCredentials:zn,transferCache:tn})}}var J=function(O){return O[O.Sent=0]="Sent",O[O.UploadProgress=1]="UploadProgress",O[O.ResponseHeader=2]="ResponseHeader",O[O.DownloadProgress=3]="DownloadProgress",O[O.Response=4]="Response",O[O.User=5]="User",O}(J||{});class _e{constructor(G,ce=V.Ok,qe="OK"){this.headers=G.headers||new ee,this.status=void 0!==G.status?G.status:ce,this.statusText=G.statusText||qe,this.url=G.url||null,this.ok=this.status>=200&&this.status<300}}class Ee extends _e{constructor(G={}){super(G),this.type=J.ResponseHeader}clone(G={}){return new Ee({headers:G.headers||this.headers,status:void 0!==G.status?G.status:this.status,statusText:G.statusText||this.statusText,url:G.url||this.url||void 0})}}class Ve extends _e{constructor(G={}){super(G),this.type=J.Response,this.body=void 0!==G.body?G.body:null}clone(G={}){return new Ve({body:void 0!==G.body?G.body:this.body,headers:G.headers||this.headers,status:void 0!==G.status?G.status:this.status,statusText:G.statusText||this.statusText,url:G.url||this.url||void 0})}}class Ne extends _e{constructor(G){super(G,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${G.url||"(unknown url)"}`:`Http failure response for ${G.url||"(unknown url)"}: ${G.status} ${G.statusText}`,this.error=G.error||null}}var V=function(O){return O[O.Continue=100]="Continue",O[O.SwitchingProtocols=101]="SwitchingProtocols",O[O.Processing=102]="Processing",O[O.EarlyHints=103]="EarlyHints",O[O.Ok=200]="Ok",O[O.Created=201]="Created",O[O.Accepted=202]="Accepted",O[O.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",O[O.NoContent=204]="NoContent",O[O.ResetContent=205]="ResetContent",O[O.PartialContent=206]="PartialContent",O[O.MultiStatus=207]="MultiStatus",O[O.AlreadyReported=208]="AlreadyReported",O[O.ImUsed=226]="ImUsed",O[O.MultipleChoices=300]="MultipleChoices",O[O.MovedPermanently=301]="MovedPermanently",O[O.Found=302]="Found",O[O.SeeOther=303]="SeeOther",O[O.NotModified=304]="NotModified",O[O.UseProxy=305]="UseProxy",O[O.Unused=306]="Unused",O[O.TemporaryRedirect=307]="TemporaryRedirect",O[O.PermanentRedirect=308]="PermanentRedirect",O[O.BadRequest=400]="BadRequest",O[O.Unauthorized=401]="Unauthorized",O[O.PaymentRequired=402]="PaymentRequired",O[O.Forbidden=403]="Forbidden",O[O.NotFound=404]="NotFound",O[O.MethodNotAllowed=405]="MethodNotAllowed",O[O.NotAcceptable=406]="NotAcceptable",O[O.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",O[O.RequestTimeout=408]="RequestTimeout",O[O.Conflict=409]="Conflict",O[O.Gone=410]="Gone",O[O.LengthRequired=411]="LengthRequired",O[O.PreconditionFailed=412]="PreconditionFailed",O[O.PayloadTooLarge=413]="PayloadTooLarge",O[O.UriTooLong=414]="UriTooLong",O[O.UnsupportedMediaType=415]="UnsupportedMediaType",O[O.RangeNotSatisfiable=416]="RangeNotSatisfiable",O[O.ExpectationFailed=417]="ExpectationFailed",O[O.ImATeapot=418]="ImATeapot",O[O.MisdirectedRequest=421]="MisdirectedRequest",O[O.UnprocessableEntity=422]="UnprocessableEntity",O[O.Locked=423]="Locked",O[O.FailedDependency=424]="FailedDependency",O[O.TooEarly=425]="TooEarly",O[O.UpgradeRequired=426]="UpgradeRequired",O[O.PreconditionRequired=428]="PreconditionRequired",O[O.TooManyRequests=429]="TooManyRequests",O[O.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",O[O.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",O[O.InternalServerError=500]="InternalServerError",O[O.NotImplemented=501]="NotImplemented",O[O.BadGateway=502]="BadGateway",O[O.ServiceUnavailable=503]="ServiceUnavailable",O[O.GatewayTimeout=504]="GatewayTimeout",O[O.HttpVersionNotSupported=505]="HttpVersionNotSupported",O[O.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",O[O.InsufficientStorage=507]="InsufficientStorage",O[O.LoopDetected=508]="LoopDetected",O[O.NotExtended=510]="NotExtended",O[O.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",O}(V||{});function Oe(O,G){return{body:G,headers:O.headers,context:O.context,observe:O.observe,params:O.params,reportProgress:O.reportProgress,responseType:O.responseType,withCredentials:O.withCredentials,transferCache:O.transferCache}}let Ot=(()=>{class O{constructor(ce){this.handler=ce}request(ce,qe,ht={}){let tn;if(ce instanceof j)tn=ce;else{let Kn,qn;Kn=ht.headers instanceof ee?ht.headers:new ee(ht.headers),ht.params&&(qn=ht.params instanceof ke?ht.params:new ke({fromObject:ht.params})),tn=new j(ce,qe,void 0!==ht.body?ht.body:null,{headers:Kn,context:ht.context,params:qn,reportProgress:ht.reportProgress,responseType:ht.responseType||"json",withCredentials:ht.withCredentials,transferCache:ht.transferCache})}const hn=(0,h.of)(tn).pipe((0,ie.H)(Kn=>this.handler.handle(Kn)));if(ce instanceof j||"events"===ht.observe)return hn;const zn=hn.pipe((0,de.p)(Kn=>Kn instanceof Ve));switch(ht.observe||"body"){case"body":switch(tn.responseType){case"arraybuffer":return zn.pipe((0,Q.T)(Kn=>{if(null!==Kn.body&&!(Kn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Kn.body}));case"blob":return zn.pipe((0,Q.T)(Kn=>{if(null!==Kn.body&&!(Kn.body instanceof Blob))throw new Error("Response is not a Blob.");return Kn.body}));case"text":return zn.pipe((0,Q.T)(Kn=>{if(null!==Kn.body&&"string"!=typeof Kn.body)throw new Error("Response is not a string.");return Kn.body}));default:return zn.pipe((0,Q.T)(Kn=>Kn.body))}case"response":return zn;default:throw new Error(`Unreachable: unhandled observe type ${ht.observe}}`)}}delete(ce,qe={}){return this.request("DELETE",ce,qe)}get(ce,qe={}){return this.request("GET",ce,qe)}head(ce,qe={}){return this.request("HEAD",ce,qe)}jsonp(ce,qe){return this.request("JSONP",ce,{params:(new ke).append(qe,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ce,qe={}){return this.request("OPTIONS",ce,qe)}patch(ce,qe,ht={}){return this.request("PATCH",ce,Oe(ht,qe))}post(ce,qe,ht={}){return this.request("POST",ce,Oe(ht,qe))}put(ce,qe,ht={}){return this.request("PUT",ce,Oe(ht,qe))}static{this.\u0275fac=function(qe){return new(qe||O)(H.KVO(K))}}static{this.\u0275prov=H.jDH({token:O,factory:O.\u0275fac})}}return O})();const ot=/^\)\]\}',?\n/;function ze(O){if(O.url)return O.url;const G="X-Request-URL".toLocaleLowerCase();return O.headers.get(G)}let Mt=(()=>{class O{constructor(){this.fetchImpl=(0,H.WQX)(st,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=(0,H.WQX)(H.SKi)}handle(ce){return new fe.c(qe=>{const ht=new AbortController;return this.doRequest(ce,ht.signal,qe).then(je,tn=>qe.error(new Ne({error:tn}))),()=>ht.abort()})}doRequest(ce,qe,ht){var tn=this;return(0,l.A)(function*(){const hn=tn.createRequestInit(ce);let zn;try{const co=tn.fetchImpl(ce.urlWithParams,{signal:qe,...hn});(function yt(O){O.then(je,je)})(co),ht.next({type:J.Sent}),zn=yield co}catch(co){return void ht.error(new Ne({error:co,status:co.status??0,statusText:co.statusText,url:ce.urlWithParams,headers:co.headers}))}const Kn=new ee(zn.headers),qn=zn.statusText,Or=ze(zn)??ce.urlWithParams;let Fr=zn.status,Br=null;if(ce.reportProgress&&ht.next(new Ee({headers:Kn,status:Fr,statusText:qn,url:Or})),zn.body){const co=zn.headers.get("content-length"),Rr=[],Ur=zn.body.getReader();let Ws,Qs,Ls=0;const As=typeof Zone<"u"&&Zone.current;yield tn.ngZone.runOutsideAngular((0,l.A)(function*(){for(;;){const{done:Oo,value:zi}=yield Ur.read();if(Oo)break;if(Rr.push(zi),Ls+=zi.length,ce.reportProgress){Qs="text"===ce.responseType?(Qs??"")+(Ws??=new TextDecoder).decode(zi,{stream:!0}):void 0;const Hr=()=>ht.next({type:J.DownloadProgress,total:co?+co:void 0,loaded:Ls,partialText:Qs});As?As.run(Hr):Hr()}}}));const Po=tn.concatChunks(Rr,Ls);try{const Oo=zn.headers.get("Content-Type")??"";Br=tn.parseBody(ce,Po,Oo)}catch(Oo){return void ht.error(new Ne({error:Oo,headers:new ee(zn.headers),status:zn.status,statusText:zn.statusText,url:ze(zn)??ce.urlWithParams}))}}0===Fr&&(Fr=Br?V.Ok:0),Fr>=200&&Fr<300?(ht.next(new Ve({body:Br,headers:Kn,status:Fr,statusText:qn,url:Or})),ht.complete()):ht.error(new Ne({error:Br,headers:Kn,status:Fr,statusText:qn,url:Or}))})()}parseBody(ce,qe,ht){switch(ce.responseType){case"json":const tn=(new TextDecoder).decode(qe).replace(ot,"");return""===tn?null:JSON.parse(tn);case"text":return(new TextDecoder).decode(qe);case"blob":return new Blob([qe],{type:ht});case"arraybuffer":return qe.buffer}}createRequestInit(ce){const qe={},ht=ce.withCredentials?"include":void 0;if(ce.headers.forEach((tn,hn)=>qe[tn]=hn.join(",")),qe.Accept??="application/json, text/plain, */*",!qe["Content-Type"]){const tn=ce.detectContentTypeHeader();null!==tn&&(qe["Content-Type"]=tn)}return{body:ce.serializeBody(),method:ce.method,headers:qe,credentials:ht}}concatChunks(ce,qe){const ht=new Uint8Array(qe);let tn=0;for(const hn of ce)ht.set(hn,tn),tn+=hn.length;return ht}static{this.\u0275fac=function(qe){return new(qe||O)}}static{this.\u0275prov=H.jDH({token:O,factory:O.\u0275fac})}}return O})();class st{}function je(){}function Yt(O,G){return G(O)}function dn(O,G){return(ce,qe)=>G.intercept(ce,{handle:ht=>O(ht,qe)})}const Sn=new H.nKC(""),Gt=new H.nKC(""),vn=new H.nKC(""),at=new H.nKC("");function Dt(){let O=null;return(G,ce)=>{null===O&&(O=((0,H.WQX)(Sn,{optional:!0})??[]).reduceRight(dn,Yt));const qe=(0,H.WQX)(H.TgB),ht=qe.add();return O(G,ce).pipe((0,z.j)(()=>qe.remove(ht)))}}let Ln=(()=>{class O extends K{constructor(ce,qe){super(),this.backend=ce,this.injector=qe,this.chain=null,this.pendingTasks=(0,H.WQX)(H.TgB);const ht=(0,H.WQX)(at,{optional:!0});this.backend=ht??ce}handle(ce){if(null===this.chain){const ht=Array.from(new Set([...this.injector.get(Gt),...this.injector.get(vn,[])]));this.chain=ht.reduceRight((tn,hn)=>function fn(O,G,ce){return(qe,ht)=>(0,H.N4e)(ce,()=>G(qe,tn=>O(tn,ht)))}(tn,hn,this.injector),Yt)}const qe=this.pendingTasks.add();return this.chain(ce,ht=>this.backend.handle(ht)).pipe((0,z.j)(()=>this.pendingTasks.remove(qe)))}static{this.\u0275fac=function(qe){return new(qe||O)(H.KVO(te),H.KVO(H.uvJ))}}static{this.\u0275prov=H.jDH({token:O,factory:O.\u0275fac})}}return O})();const Ps=/^\)\]\}',?\n/;let qi=(()=>{class O{constructor(ce){this.xhrFactory=ce}handle(ce){if("JSONP"===ce.method)throw new H.wOt(-2800,!1);const qe=this.xhrFactory;return(qe.\u0275loadImpl?(0,X.H)(qe.\u0275loadImpl()):(0,h.of)(null)).pipe((0,L.n)(()=>new fe.c(tn=>{const hn=qe.build();if(hn.open(ce.method,ce.urlWithParams),ce.withCredentials&&(hn.withCredentials=!0),ce.headers.forEach((Rr,Ur)=>hn.setRequestHeader(Rr,Ur.join(","))),ce.headers.has("Accept")||hn.setRequestHeader("Accept","application/json, text/plain, */*"),!ce.headers.has("Content-Type")){const Rr=ce.detectContentTypeHeader();null!==Rr&&hn.setRequestHeader("Content-Type",Rr)}if(ce.responseType){const Rr=ce.responseType.toLowerCase();hn.responseType="json"!==Rr?Rr:"text"}const zn=ce.serializeBody();let Kn=null;const qn=()=>{if(null!==Kn)return Kn;const Rr=hn.statusText||"OK",Ur=new ee(hn.getAllResponseHeaders()),Ls=function ri(O){return"responseURL"in O&&O.responseURL?O.responseURL:/^X-Request-URL:/m.test(O.getAllResponseHeaders())?O.getResponseHeader("X-Request-URL"):null}(hn)||ce.url;return Kn=new Ee({headers:Ur,status:hn.status,statusText:Rr,url:Ls}),Kn},Or=()=>{let{headers:Rr,status:Ur,statusText:Ls,url:Ws}=qn(),Qs=null;Ur!==V.NoContent&&(Qs=typeof hn.response>"u"?hn.responseText:hn.response),0===Ur&&(Ur=Qs?V.Ok:0);let As=Ur>=200&&Ur<300;if("json"===ce.responseType&&"string"==typeof Qs){const Po=Qs;Qs=Qs.replace(Ps,"");try{Qs=""!==Qs?JSON.parse(Qs):null}catch(Oo){Qs=Po,As&&(As=!1,Qs={error:Oo,text:Qs})}}As?(tn.next(new Ve({body:Qs,headers:Rr,status:Ur,statusText:Ls,url:Ws||void 0})),tn.complete()):tn.error(new Ne({error:Qs,headers:Rr,status:Ur,statusText:Ls,url:Ws||void 0}))},Fr=Rr=>{const{url:Ur}=qn(),Ls=new Ne({error:Rr,status:hn.status||0,statusText:hn.statusText||"Unknown Error",url:Ur||void 0});tn.error(Ls)};let Br=!1;const Us=Rr=>{Br||(tn.next(qn()),Br=!0);let Ur={type:J.DownloadProgress,loaded:Rr.loaded};Rr.lengthComputable&&(Ur.total=Rr.total),"text"===ce.responseType&&hn.responseText&&(Ur.partialText=hn.responseText),tn.next(Ur)},co=Rr=>{let Ur={type:J.UploadProgress,loaded:Rr.loaded};Rr.lengthComputable&&(Ur.total=Rr.total),tn.next(Ur)};return hn.addEventListener("load",Or),hn.addEventListener("error",Fr),hn.addEventListener("timeout",Fr),hn.addEventListener("abort",Fr),ce.reportProgress&&(hn.addEventListener("progress",Us),null!==zn&&hn.upload&&hn.upload.addEventListener("progress",co)),hn.send(zn),tn.next({type:J.Sent}),()=>{hn.removeEventListener("error",Fr),hn.removeEventListener("abort",Fr),hn.removeEventListener("load",Or),hn.removeEventListener("timeout",Fr),ce.reportProgress&&(hn.removeEventListener("progress",Us),null!==zn&&hn.upload&&hn.upload.removeEventListener("progress",co)),hn.readyState!==hn.DONE&&hn.abort()}})))}static{this.\u0275fac=function(qe){return new(qe||O)(H.KVO(I.N0))}}static{this.\u0275prov=H.jDH({token:O,factory:O.\u0275fac})}}return O})();const _r=new H.nKC(""),Cr=new H.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Lr=new H.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class or{}let Bs=(()=>{class O{constructor(ce,qe,ht){this.doc=ce,this.platform=qe,this.cookieName=ht,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ce=this.doc.cookie||"";return ce!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,I._b)(ce,this.cookieName),this.lastCookieString=ce),this.lastToken}static{this.\u0275fac=function(qe){return new(qe||O)(H.KVO(I.qQ),H.KVO(H.Agw),H.KVO(Cr))}}static{this.\u0275prov=H.jDH({token:O,factory:O.\u0275fac})}}return O})();function Pr(O,G){const ce=O.url.toLowerCase();if(!(0,H.WQX)(_r)||"GET"===O.method||"HEAD"===O.method||ce.startsWith("http://")||ce.startsWith("https://"))return G(O);const qe=(0,H.WQX)(or).getToken(),ht=(0,H.WQX)(Lr);return null!=qe&&!O.headers.has(ht)&&(O=O.clone({headers:O.headers.set(ht,qe)})),G(O)}var Ht=function(O){return O[O.Interceptors=0]="Interceptors",O[O.LegacyInterceptors=1]="LegacyInterceptors",O[O.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",O[O.NoXsrfProtection=3]="NoXsrfProtection",O[O.JsonpSupport=4]="JsonpSupport",O[O.RequestsMadeViaParent=5]="RequestsMadeViaParent",O[O.Fetch=6]="Fetch",O}(Ht||{});function rt(O,G){return{\u0275kind:O,\u0275providers:G}}function xt(...O){const G=[Ot,qi,Ln,{provide:K,useExisting:Ln},{provide:te,useExisting:qi},{provide:Gt,useValue:Pr,multi:!0},{provide:_r,useValue:!0},{provide:or,useClass:Bs}];for(const ce of O)G.push(...ce.\u0275providers);return(0,H.EmA)(G)}function on(O){return rt(Ht.Interceptors,O.map(G=>({provide:Gt,useValue:G,multi:!0})))}const mn=new H.nKC("");function Pn(){return rt(Ht.Fetch,[Mt,{provide:te,useExisting:Mt},{provide:at,useExisting:Mt}])}let Ds=(()=>{class O{static{this.\u0275fac=function(qe){return new(qe||O)}}static{this.\u0275mod=H.$C({type:O})}static{this.\u0275inj=H.G2t({providers:[xt(rt(Ht.LegacyInterceptors,[{provide:mn,useFactory:Dt},{provide:Gt,useExisting:mn,multi:!0}]))]})}}return O})()},4438:(Rt,Je,M)=>{"use strict";function H(t,i){return Object.is(t,i)}M.d(Je,{bc$:()=>Ro,iLQ:()=>Ox,sZ2:()=>gs,o8S:()=>nf,BIS:()=>No,gRc:()=>yw,Ql9:()=>DA,OM3:()=>np,Ocv:()=>LA,abz:()=>id,Z63:()=>ja,aKT:()=>Ch,uvJ:()=>oe,zcH:()=>Bc,bkB:()=>Kc,$GK:()=>br,nKC:()=>ht,zZn:()=>nc,_q3:()=>zx,MKu:()=>Gx,xe9:()=>Wy,Co$:()=>s,Vns:()=>n,SKi:()=>Ho,Agw:()=>vs,PLl:()=>Zr,sFG:()=>Zh,_9s:()=>ru,czy:()=>Oh,WPN:()=>Vd,C4Q:()=>Jf,NYb:()=>bA,giA:()=>ow,RxE:()=>ZM,c1b:()=>op,gXe:()=>qs,mal:()=>L0,Af3:()=>xi,tdH:()=>O0,L39:()=>A2,EWP:()=>R2,a0P:()=>k2,Ol2:()=>R,w6W:()=>a,QZP:()=>Yw,Rfq:()=>Pr,oKB:()=>fr,WQX:()=>ur,hFB:()=>Rv,QuC:()=>me,EmA:()=>fi,CGW:()=>Av,N4e:()=>Zn,vPA:()=>Db,O8t:()=>N2,ebz:()=>W0,An2:()=>qh,H3F:()=>JM,H8p:()=>Ka,KH2:()=>nm,TgB:()=>Z,wOt:()=>Tt,WHO:()=>rw,e01:()=>sw,lNU:()=>Dt,h9k:()=>o_,$MX:()=>Zp,ZF7:()=>Nh,Kcf:()=>m1,e5t:()=>y1,UyX:()=>v1,cWb:()=>g1,osQ:()=>_1,H5H:()=>fx,Zy3:()=>un,mq5:()=>iS,JZv:()=>ri,TL3:()=>p2,LfX:()=>Fs,plB:()=>yd,jNT:()=>Nx,zjR:()=>aw,ngT:()=>oc,TL$:()=>ls,Tbb:()=>Wr,rcV:()=>Tu,nM4:()=>by,Vt3:()=>up,Mj6:()=>Zo,GFd:()=>e,OA$:()=>Nc,Jv_:()=>bM,aNF:()=>xM,R7$:()=>hd,BMQ:()=>ho,HbH:()=>kE,ZvI:()=>WE,AVh:()=>rx,vxM:()=>KE,wni:()=>$S,nv$:()=>Zg,T$4:()=>q0,qhs:()=>an,VBU:()=>Ao,FsC:()=>mo,jDH:()=>sr,G2t:()=>to,$C:()=>Xa,EJ8:()=>zl,rXU:()=>Wd,nrm:()=>ux,bVm:()=>Py,qex:()=>Ny,k0s:()=>Ry,j41:()=>Iy,RV6:()=>nS,xGo:()=>xh,Mr5:()=>dx,pXf:()=>IS,KVO:()=>Vs,kS0:()=>Mh,bIt:()=>gx,lsd:()=>QS,XpG:()=>FS,nI1:()=>PM,bMT:()=>OM,i5U:()=>FM,SdG:()=>kS,NAR:()=>LS,Y8G:()=>tx,FS9:()=>_x,lJ4:()=>SM,eq3:()=>MM,l_i:()=>wM,sMw:()=>CM,ziG:()=>TM,NyB:()=>qS,mGM:()=>KS,sdS:()=>ZS,Dyx:()=>ZE,Z7z:()=>qE,fX1:()=>YE,Vm6:()=>QE,Njj:()=>Bo,tSv:()=>f_,eBV:()=>so,npT:()=>a_,f$h:()=>Xm,B4B:()=>$m,n$t:()=>Km,xc7:()=>ix,zvX:()=>hx,DNE:()=>_n,C5r:()=>LM,EFF:()=>lM,JRh:()=>bx,SpI:()=>By,Lme:()=>xx,GBs:()=>XS,wEZ:()=>YS}),M(467);let h=null,fe=!1,X=1;const ie=Symbol("SIGNAL");function de(t){const i=h;return h=t,i}const I={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function K(t){if(fe)throw new Error("");if(null===h)return;h.consumerOnSignalRead(t);const i=h.nextProducerIndex++;pt(h),i<h.producerNode.length&&h.producerNode[i]!==t&&St(h)&&Ke(h.producerNode[i],h.producerIndexOfThis[i]),h.producerNode[i]!==t&&(h.producerNode[i]=t,h.producerIndexOfThis[i]=St(h)?ke(t,h,i):0),h.producerLastReadVersion[i]=t.version}function ee(t){if((!St(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==X)){if(!t.producerMustRecompute(t)&&!We(t))return t.dirty=!1,void(t.lastCleanEpoch=X);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=X}}function ue(t){if(void 0===t.liveConsumerNode)return;const i=fe;fe=!0;try{for(const r of t.liveConsumerNode)r.dirty||Re(r)}finally{fe=i}}function Ce(){return!1!==h?.consumerAllowSignalWrites}function Re(t){t.dirty=!0,ue(t),t.consumerMarkedDirty?.(t)}function ye(t){return t&&(t.nextProducerIndex=0),de(t)}function Te(t,i){if(de(i),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(St(t))for(let r=t.nextProducerIndex;r<t.producerNode.length;r++)Ke(t.producerNode[r],t.producerIndexOfThis[r]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function We(t){pt(t);for(let i=0;i<t.producerNode.length;i++){const r=t.producerNode[i],o=t.producerLastReadVersion[i];if(o!==r.version||(ee(r),o!==r.version))return!0}return!1}function He(t){if(pt(t),St(t))for(let i=0;i<t.producerNode.length;i++)Ke(t.producerNode[i],t.producerIndexOfThis[i]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ke(t,i,r){if(ct(t),pt(t),0===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)t.producerIndexOfThis[o]=ke(t.producerNode[o],t,o);return t.liveConsumerIndexOfThis.push(r),t.liveConsumerNode.push(i)-1}function Ke(t,i){if(ct(t),pt(t),1===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)Ke(t.producerNode[o],t.producerIndexOfThis[o]);const r=t.liveConsumerNode.length-1;if(t.liveConsumerNode[i]=t.liveConsumerNode[r],t.liveConsumerIndexOfThis[i]=t.liveConsumerIndexOfThis[r],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,i<t.liveConsumerNode.length){const o=t.liveConsumerIndexOfThis[i],d=t.liveConsumerNode[i];pt(d),d.producerIndexOfThis[o]=i}}function St(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function pt(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function ct(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function le(t){const i=Object.create(J);i.computation=t;const r=()=>{if(ee(i),K(i),i.value===j)throw i.error;return i.value};return r[ie]=i,r}const x=Symbol("UNSET"),C=Symbol("COMPUTING"),j=Symbol("ERRORED"),J={...I,value:x,dirty:!0,error:null,equal:H,producerMustRecompute:t=>t.value===x||t.value===C,producerRecomputeValue(t){if(t.value===C)throw new Error("Detected cycle in computations.");const i=t.value;t.value=C;const r=ye(t);let o;try{o=t.computation()}catch(d){o=j,t.error=d}finally{Te(t,r)}i!==x&&i!==j&&o!==j&&t.equal(i,o)?t.value=i:(t.value=o,t.version++)}};let Ee=function _e(){throw new Error};function Ve(){Ee()}let V=null;function Ut(t,i){Ce()||Ve(),t.equal(t.value,i)||(t.value=i,function st(t){t.version++,function te(){X++}(),ue(t),V?.()}(t))}const Mt={...I,equal:H,value:void 0};const yt=()=>{},Yt={...I,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{null!==t.schedule&&t.schedule(t.ref)},hasRun:!1,cleanupFn:yt};var fn=M(1413),Sn=M(8359),Gt=M(4412),vn=M(6354);const Dt="https://g.co/ng/security#xss";class Tt extends Error{constructor(i,r){super(un(i,r)),this.code=i}}function un(t,i){return`NG0${Math.abs(t)}${i?": "+i:""}`}const Ln=Symbol("InputSignalNode#UNSET"),Yn={...Mt,transformFn:void 0,applyValueToInputSignal(t,i){Ut(t,i)}};function Gn(t,i){const r=Object.create(Yn);function o(){if(K(r),r.value===Ln)throw new Tt(-950,!1);return r.value}return r.value=t,r.transformFn=i?.transform,o[ie]=r,o}function An(t){return{toString:t}.toString()}const Si="__parameters__";function Pi(t,i,r){return An(()=>{const o=function Ki(t){return function(...r){if(t){const o=t(...r);for(const d in o)this[d]=o[d]}}}(i);function d(...g){if(this instanceof d)return o.apply(this,g),this;const y=new d(...g);return S.annotation=y,S;function S(k,he,Ae){const Ze=k.hasOwnProperty(Si)?k[Si]:Object.defineProperty(k,Si,{value:[]})[Si];for(;Ze.length<=Ae;)Ze.push(null);return(Ze[Ae]=Ze[Ae]||[]).push(y),k}}return r&&(d.prototype=Object.create(r.prototype)),d.prototype.ngMetadataName=t,d.annotationCls=d,d})}const ri=globalThis;function wi(t){for(let i in t)if(t[i]===wi)return i;throw Error("Could not find renamed property on target object.")}function Cr(t,i){for(const r in i)i.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=i[r])}function Wr(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Wr).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const i=t.toString();if(null==i)return""+i;const r=i.indexOf("\n");return-1===r?i:i.substring(0,r)}function Lr(t,i){return null==t||""===t?null===i?"":i:null==i||""===i?t:t+" "+i}const Bs=wi({__forward_ref__:wi});function Pr(t){return t.__forward_ref__=Pr,t.toString=function(){return Wr(this())},t}function At(t){return Ht(t)?t():t}function Ht(t){return"function"==typeof t&&t.hasOwnProperty(Bs)&&t.__forward_ref__===Pr}function Cn(t,i,r,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${r} ${o} ${i} <=Actual]`))}function sr(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function to(t){return{providers:t.providers||[],imports:t.imports||[]}}function Os(t){return lo(t,O)||lo(t,ce)}function Fs(t){return null!==Os(t)}function lo(t,i){return t.hasOwnProperty(i)?t[i]:null}function Ye(t){return t&&(t.hasOwnProperty(G)||t.hasOwnProperty(qe))?t[G]:null}const O=wi({\u0275prov:wi}),G=wi({\u0275inj:wi}),ce=wi({ngInjectableDef:wi}),qe=wi({ngInjectorDef:wi});class ht{constructor(i,r){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=sr({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Rr(t){return t&&!!t.\u0275providers}const Ur=wi({\u0275cmp:wi}),Ls=wi({\u0275dir:wi}),Ws=wi({\u0275pipe:wi}),Qs=wi({\u0275mod:wi}),As=wi({\u0275fac:wi}),Po=wi({__NG_ELEMENT_ID__:wi}),Oo=wi({__NG_ENV_ID__:wi});function zi(t){return"string"==typeof t?t:null==t?"":String(t)}function ca(t,i){throw new Tt(-201,!1)}var br=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(br||{});let ha;function Ra(){return ha}function js(t){const i=ha;return ha=t,i}function za(t,i,r){const o=Os(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:r&br.Optional?null:void 0!==i?i:void ca()}const no={},Fo="__NG_DI_FLAG__",Qo="ngTempTokenPath",Ga=/\n/gm,Na="__source";let Yo;function na(t){const i=Yo;return Yo=t,i}function Yl(t,i=br.Default){if(void 0===Yo)throw new Tt(-203,!1);return null===Yo?za(t,void 0,i):Yo.get(t,i&br.Optional?null:void 0,i)}function Vs(t,i=br.Default){return(Ra()||Yl)(At(t),i)}function ur(t,i=br.Default){return Vs(t,ua(i))}function ua(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Oa(t){const i=[];for(let r=0;r<t.length;r++){const o=At(t[r]);if(Array.isArray(o)){if(0===o.length)throw new Tt(900,!1);let d,g=br.Default;for(let y=0;y<o.length;y++){const S=o[y],k=ba(S);"number"==typeof k?-1===k?d=S.token:g|=k:d=S}i.push(Vs(d,g))}else i.push(Vs(o))}return i}function Wo(t,i){return t[Fo]=i,t.prototype[Fo]=i,t}function ba(t){return t[Fo]}const wo=Wo(Pi("Optional"),8),Wa=Wo(Pi("SkipSelf"),4);function Za(t,i){return t.hasOwnProperty(As)?t[As]:null}function Fa(t,i){t.forEach(r=>Array.isArray(r)?Fa(r,i):i(r))}function La(t,i,r){i>=t.length?t.push(r):t.splice(i,0,r)}function vo(t,i){return i>=t.length-1?t.pop():t.splice(i,1)[0]}function ul(t,i,r){const o=t.length-r;for(;i<o;)t[i]=t[i+r],i++;for(;r--;)t.pop()}function Ul(t,i,r,o){let d=t.length;if(d==i)t.push(r,o);else if(1===d)t.push(o,t[0]),t[0]=r;else{for(d--,t.push(t[d-1],t[d]);d>i;)t[d]=t[d-2],d--;t[i]=r,t[i+1]=o}}function yo(t,i,r){let o=Co(t,i);return o>=0?t[1|o]=r:(o=~o,Ul(t,o,i,r)),o}function Ja(t,i){const r=Co(t,i);if(r>=0)return t[1|r]}function Co(t,i){return function Vl(t,i,r){let o=0,d=t.length>>r;for(;d!==o;){const g=o+(d-o>>1),y=t[g<<r];if(i===y)return g<<r;y>i?d=g:o=g+1}return~(d<<r)}(t,i,1)}const ra={},jr=[],ja=new ht(""),ka=new ht("",-1),po=new ht("");class $a{get(i,r=no){if(r===no){const o=new Error(`NullInjectorError: No provider for ${Wr(i)}!`);throw o.name="NullInjectorError",o}return r}}var dl=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(dl||{}),qs=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(qs||{}),Zo=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Zo||{});function Tc(t,i,r){let o=t.length;for(;;){const d=t.indexOf(i,r);if(-1===d)return d;if(0===d||t.charCodeAt(d-1)<=32){const g=i.length;if(d+g===o||t.charCodeAt(d+g)<=32)return d}r=d+1}}function sa(t,i,r){let o=0;for(;o<r.length;){const d=r[o];if("number"==typeof d){if(0!==d)break;o++;const g=r[o++],y=r[o++],S=r[o++];t.setAttribute(i,y,S,g)}else{const g=d,y=r[++o];Me(g)?t.setProperty(i,g,y):t.setAttribute(i,g,y),o++}}return o}function pe(t){return 3===t||4===t||6===t}function Me(t){return 64===t.charCodeAt(0)}function ne(t,i){if(null!==i&&0!==i.length)if(null===t||0===t.length)t=i.slice();else{let r=-1;for(let o=0;o<i.length;o++){const d=i[o];"number"==typeof d?r=d:0===r||Xe(t,r,d,null,-1===r||2===r?i[++o]:null)}}return t}function Xe(t,i,r,o,d){let g=0,y=t.length;if(-1===i)y=-1;else for(;g<t.length;){const S=t[g++];if("number"==typeof S){if(S===i){y=-1;break}if(S>i){y=g-1;break}}}for(;g<t.length;){const S=t[g];if("number"==typeof S)break;if(S===r){if(null===o)return void(null!==d&&(t[g+1]=d));if(o===t[g+1])return void(t[g+2]=d)}g++,null!==o&&g++,null!==d&&g++}-1!==y&&(t.splice(y,0,i),g=y+1),t.splice(g++,0,r),null!==o&&t.splice(g++,0,o),null!==d&&t.splice(g++,0,d)}const Ct="ng-template";function Di(t,i,r,o){let d=0;if(o){for(;d<i.length&&"string"==typeof i[d];d+=2)if("class"===i[d]&&-1!==Tc(i[d+1].toLowerCase(),r,0))return!0}else if(Nr(t))return!1;if(d=i.indexOf(1,d),d>-1){let g;for(;++d<i.length&&"string"==typeof(g=i[d]);)if(g.toLowerCase()===r)return!0}return!1}function Nr(t){return 4===t.type&&t.value!==Ct}function el(t,i,r){return i===(4!==t.type||r?t.value:Ct)}function Hl(t,i,r){let o=4;const d=t.attrs,g=null!==d?function _u(t){for(let i=0;i<t.length;i++)if(pe(t[i]))return i;return t.length}(d):0;let y=!1;for(let S=0;S<i.length;S++){const k=i[S];if("number"!=typeof k){if(!y)if(4&o){if(o=2|1&o,""!==k&&!el(t,k,r)||""===k&&1===i.length){if(Lo(o))return!1;y=!0}}else if(8&o){if(null===d||!Di(t,d,k,r)){if(Lo(o))return!1;y=!0}}else{const he=i[++S],Ae=tl(k,d,Nr(t),r);if(-1===Ae){if(Lo(o))return!1;y=!0;continue}if(""!==he){let Ze;if(Ze=Ae>g?"":d[Ae+1].toLowerCase(),2&o&&he!==Ze){if(Lo(o))return!1;y=!0}}}}else{if(!y&&!Lo(o)&&!Lo(k))return!1;if(y&&Lo(k))continue;y=!1,o=k|1&o}}return Lo(o)||y}function Lo(t){return!(1&t)}function tl(t,i,r,o){if(null===i)return-1;let d=0;if(o||!r){let g=!1;for(;d<i.length;){const y=i[d];if(y===t)return d;if(3===y||6===y)g=!0;else{if(1===y||2===y){let S=i[++d];for(;"string"==typeof S;)S=i[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=g?1:2}return-1}return function Hs(t,i){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){const o=t[r];if("number"==typeof o)return-1;if(o===i)return r;r++}return-1}(i,t)}function au(t,i,r=!1){for(let o=0;o<i.length;o++)if(Hl(t,i[o],r))return!0;return!1}function zu(t,i){e:for(let r=0;r<i.length;r++){const o=i[r];if(t.length===o.length){for(let d=0;d<t.length;d++)if(t[d]!==o[d])continue e;return!0}}return!1}function jc(t,i){return t?":not("+i.trim()+")":i}function nl(t){let i=t[0],r=1,o=2,d="",g=!1;for(;r<t.length;){let y=t[r];if("string"==typeof y)if(2&o){const S=t[++r];d+="["+y+(S.length>0?'="'+S+'"':"")+"]"}else 8&o?d+="."+y:4&o&&(d+=" "+y);else""!==d&&!Lo(y)&&(i+=jc(g,d),d=""),o=y,g=g||!Lo(o);r++}return""!==d&&(i+=jc(g,d)),i}function Ao(t){return An(()=>{const i=ut(t),r={...i,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===dl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||qs.Emulated,styles:t.styles||jr,_:null,schemas:t.schemas||null,tView:null,id:""};kt(r);const o=t.dependencies;return r.directiveDefs=Dn(o,!1),r.pipeDefs=Dn(o,!0),r.id=function Zi(t){let i=0;const r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const d of r)i=Math.imul(31,i)+d.charCodeAt(0)|0;return i+=2147483648,"c"+i}(r),r})}function Dc(t){return et(t)||Se(t)}function Ua(t){return null!==t}function Xa(t){return An(()=>({type:t.type,bootstrap:t.bootstrap||jr,declarations:t.declarations||jr,imports:t.imports||jr,exports:t.exports||jr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function bo(t,i){if(null==t)return ra;const r={};for(const o in t)if(t.hasOwnProperty(o)){const d=t[o];let g,y,S=Zo.None;Array.isArray(d)?(S=d[0],g=d[1],y=d[2]??g):(g=d,y=d),i?(r[g]=S!==Zo.None?[o,S]:o,i[g]=y):r[g]=o}return r}function mo(t){return An(()=>{const i=ut(t);return kt(i),i})}function zl(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function et(t){return t[Ur]||null}function Se(t){return t[Ls]||null}function q(t){return t[Ws]||null}function me(t){const i=et(t)||Se(t)||q(t);return null!==i&&i.standalone}function Fe(t,i){const r=t[Qs]||null;if(!r&&!0===i)throw new Error(`Type ${Wr(t)} does not have '\u0275mod' property.`);return r}function ut(t){const i={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputTransforms:null,inputConfig:t.inputs||ra,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||jr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bo(t.inputs,i),outputs:bo(t.outputs),debugInfo:null}}function kt(t){t.features?.forEach(i=>i(t))}function Dn(t,i){if(!t)return null;const r=i?q:Dc;return()=>("function"==typeof t?t():t).map(o=>r(o)).filter(Ua)}function fi(t){return{\u0275providers:t}}function fr(...t){return{\u0275providers:ws(0,t),\u0275fromNgModule:!0}}function ws(t,...i){const r=[],o=new Set;let d;const g=y=>{r.push(y)};return Fa(i,y=>{const S=y;ds(S,g,[],o)&&(d||=[],d.push(S))}),void 0!==d&&Zs(d,g),r}function Zs(t,i){for(let r=0;r<t.length;r++){const{ngModule:o,providers:d}=t[r];da(d,g=>{i(g,o)})}}function ds(t,i,r,o){if(!(t=At(t)))return!1;let d=null,g=Ye(t);const y=!g&&et(t);if(g||y){if(y&&!y.standalone)return!1;d=t}else{const k=t.ngModule;if(g=Ye(k),!g)return!1;d=k}const S=o.has(d);if(y){if(S)return!1;if(o.add(d),y.dependencies){const k="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const he of k)ds(he,i,r,o)}}else{if(!g)return!1;{if(null!=g.imports&&!S){let he;o.add(d);try{Fa(g.imports,Ae=>{ds(Ae,i,r,o)&&(he||=[],he.push(Ae))})}finally{}void 0!==he&&Zs(he,i)}if(!S){const he=Za(d)||(()=>new d);i({provide:d,useFactory:he,deps:jr},d),i({provide:po,useValue:d,multi:!0},d),i({provide:ja,useValue:()=>Vs(d),multi:!0},d)}const k=g.providers;if(null!=k&&!S){const he=t;da(k,Ae=>{i(Ae,he)})}}}return d!==t&&void 0!==t.providers}function da(t,i){for(let r of t)Rr(r)&&(r=r.\u0275providers),Array.isArray(r)?da(r,i):i(r)}const To=wi({provide:String,useValue:wi});function Tr(t){return null!==t&&"object"==typeof t&&To in t}function ir(t){return"function"==typeof t}const Ka=new ht(""),uc={},Ie={};let D;function F(){return void 0===D&&(D=new $a),D}class oe{}class De extends oe{get destroyed(){return this._destroyed}constructor(i,r,o,d){super(),this.parent=r,this.source=o,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xr(i,y=>this.processProvider(y)),this.records.set(ka,Jt(void 0,this)),d.has("environment")&&this.records.set(oe,Jt(void 0,this));const g=this.records.get(Ka);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(po,jr,br.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const i=de(null);try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const o of r)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),de(i)}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();const r=na(this),o=js(void 0);try{return i()}finally{na(r),js(o)}}get(i,r=no,o=br.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(Oo))return i[Oo](this);o=ua(o);const g=na(this),y=js(void 0);try{if(!(o&br.SkipSelf)){let k=this.records.get(i);if(void 0===k){const he=function bi(t){return"function"==typeof t||"object"==typeof t&&t instanceof ht}(i)&&Os(i);k=he&&this.injectableDefInScope(he)?Jt(nt(i),uc):null,this.records.set(i,k)}if(null!=k)return this.hydrate(i,k)}return(o&br.Self?F():this.parent).get(i,r=o&br.Optional&&r===no?null:r)}catch(S){if("NullInjectorError"===S.name){if((S[Qo]=S[Qo]||[]).unshift(Wr(i)),g)throw S;return function wl(t,i,r,o){const d=t[Qo];throw i[Na]&&d.unshift(i[Na]),t.message=function ma(t,i,r,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let d=Wr(i);if(Array.isArray(i))d=i.map(Wr).join(" -> ");else if("object"==typeof i){let g=[];for(let y in i)if(i.hasOwnProperty(y)){let S=i[y];g.push(y+":"+("string"==typeof S?JSON.stringify(S):Wr(S)))}d=`{${g.join(", ")}}`}return`${r}${o?"("+o+")":""}[${d}]: ${t.replace(Ga,"\n  ")}`}("\n"+t.message,d,r,o),t.ngTokenPath=d,t[Qo]=null,t}(S,i,"R3InjectorError",this.source)}throw S}finally{js(y),na(g)}}resolveInjectorInitializers(){const i=de(null),r=na(this),o=js(void 0);try{const g=this.get(ja,jr,br.Self);for(const y of g)y()}finally{na(r),js(o),de(i)}}toString(){const i=[],r=this.records;for(const o of r.keys())i.push(Wr(o));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Tt(205,!1)}processProvider(i){let r=ir(i=At(i))?i:At(i&&i.provide);const o=function Pt(t){return Tr(t)?Jt(void 0,t.useValue):Jt(Lt(t),uc)}(i);if(!ir(i)&&!0===i.multi){let d=this.records.get(r);d||(d=Jt(void 0,uc,!0),d.factory=()=>Oa(d.multi),this.records.set(r,d)),r=i,d.multi.push(i)}this.records.set(r,o)}hydrate(i,r){const o=de(null);try{return r.value===uc&&(r.value=Ie,r.value=r.factory()),"object"==typeof r.value&&r.value&&function pi(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}finally{de(o)}}injectableDefInScope(i){if(!i.providedIn)return!1;const r=At(i.providedIn);return"string"==typeof r?"any"===r||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(i){const r=this._onDestroyHooks.indexOf(i);-1!==r&&this._onDestroyHooks.splice(r,1)}}function nt(t){const i=Os(t),r=null!==i?i.factory:Za(t);if(null!==r)return r;if(t instanceof ht)throw new Tt(204,!1);if(t instanceof Function)return function vt(t){if(t.length>0)throw new Tt(204,!1);const r=function Go(t){return t&&(t[O]||t[ce])||null}(t);return null!==r?()=>r.factory(t):()=>new t}(t);throw new Tt(204,!1)}function Lt(t,i,r){let o;if(ir(t)){const d=At(t);return Za(d)||nt(d)}if(Tr(t))o=()=>At(t.useValue);else if(function yn(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...Oa(t.deps||[]));else if(function Gl(t){return!(!t||!t.useExisting)}(t))o=()=>Vs(At(t.useExisting));else{const d=At(t&&(t.useClass||t.provide));if(!function oi(t){return!!t.deps}(t))return Za(d)||nt(d);o=()=>new d(...Oa(t.deps))}return o}function Jt(t,i,r=!1){return{factory:t,value:i,multi:r?[]:void 0}}function xr(t,i){for(const r of t)Array.isArray(r)?xr(r,i):r&&Rr(r)?xr(r.\u0275providers,i):i(r)}function Zn(t,i){t instanceof De&&t.assertNotDestroyed();const o=na(t),d=js(void 0);try{return i()}finally{na(o),js(d)}}function Ji(){return void 0!==Ra()||null!=function Pa(){return Yo}()}function xi(t){if(!Ji())throw new Tt(-203,!1)}const Rn=0,en=1,bn=2,ui=3,pr=4,zr=5,ts=6,go=7,lr=8,Is=9,$s=10,vi=11,Jo=12,Js=13,io=14,Ts=15,dc=16,Ac=17,Ea=18,Wl=19,oa=20,rs=21,Va=22,jl=23,Er=25,hc=1,hl=7,gr=9,ro=10;var Sa=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Sa||{});function $r(t){return Array.isArray(t)&&"object"==typeof t[hc]}function ea(t){return Array.isArray(t)&&!0===t[hc]}function Qa(t){return!!(4&t.flags)}function Tl(t){return t.componentOffset>-1}function ta(t){return!(1&~t.flags)}function rl(t){return!!t.template}function ga(t){return!!(512&t[bn])}function $c(t){return!(256&~t[bn])}class lu{constructor(i,r,o){this.previousValue=i,this.currentValue=r,this.firstChange=o}isFirstChange(){return this.firstChange}}function gc(t,i,r,o){null!==i?i.applyValueToInputSignal(i,o):t[r]=o}function Nc(){return Al}function Al(t){return t.type.prototype.ngOnChanges&&(t.setInput=oh),Gu}function Gu(){const t=Il(this),i=t?.current;if(i){const r=t.previous;if(r===ra)t.previous=i;else for(let o in i)r[o]=i[o];t.current=null,this.ngOnChanges(i)}}function oh(t,i,r,o,d){const g=this.declaredInputs[o],y=Il(t)||function lh(t,i){return t[ah]=i}(t,{previous:ra,current:null}),S=y.current||(y.current={}),k=y.previous,he=k[g];S[g]=new lu(he&&he.currentValue,r,k===ra),gc(t,i,d,r)}Nc.ngInherit=!0;const ah="__ngSimpleChanges__";function Il(t){return t[ah]||null}const Rl=function(t,i,r){};let pp=!1;function Rs(t){for(;Array.isArray(t);)t=t[Rn];return t}function Ha(t,i){return Rs(i[t])}function Ma(t,i){return Rs(i[t.index])}function ko(t,i){return t.data[i]}function Pc(t,i){return t[i]}function fs(t,i){const r=i[t];return $r(r)?r:r[Rn]}function af(t){return!(128&~t[bn])}function Oc(t,i){return null==i?null:t[i]}function Cd(t){t[Ac]=0}function gv(t){1024&t[bn]||(t[bn]|=1024,af(t)&&ch(t))}function mp(t,i){for(;t>0;)i=i[io],t--;return i}function lm(t){return!!(9216&t[bn]||t[jl]?.dirty)}function rr(t){t[$s].changeDetectionScheduler?.notify(1),lm(t)?ch(t):64&t[bn]&&(function sl(){return pp}()?(t[bn]|=1024,ch(t)):t[$s].changeDetectionScheduler?.notify())}function ch(t){t[$s].changeDetectionScheduler?.notify();let i=_c(t);for(;null!==i&&!(8192&i[bn])&&(i[bn]|=8192,af(i));)i=_c(i)}function Nl(t,i){if(!(256&~t[bn]))throw new Tt(911,!1);null===t[rs]&&(t[rs]=[]),t[rs].push(i)}function uh(t,i){if(null===t[rs])return;const r=t[rs].indexOf(i);-1!==r&&t[rs].splice(r,1)}function _c(t){const i=t[ui];return ea(i)?i[ui]:i}const cr={lFrame:ph(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Dd(){return cr.bindingsEnabled}function Xu(){return null!==cr.skipHydrationRootTNode}function xn(){return cr.lFrame.lView}function xs(){return cr.lFrame.tView}function so(t){return cr.lFrame.contextLView=t,t[lr]}function Bo(t){return cr.lFrame.contextLView=null,t}function zs(){let t=cu();for(;null!==t&&64===t.type;)t=t.parent;return t}function cu(){return cr.lFrame.currentTNode}function Zl(){const t=cr.lFrame,i=t.currentTNode;return t.isParent?i:i.parent}function jo(t,i){const r=cr.lFrame;r.currentTNode=t,r.isParent=i}function hf(){return cr.lFrame.isParent}function Ku(){cr.lFrame.isParent=!1}function Uo(){const t=cr.lFrame;let i=t.bindingRootIndex;return-1===i&&(i=t.bindingRootIndex=t.tView.bindingStartIndex),i}function Jl(){return cr.lFrame.bindingIndex++}function Fc(t){const i=cr.lFrame,r=i.bindingIndex;return i.bindingIndex=i.bindingIndex+t,r}function $l(t){cr.lFrame.inI18n=t}function Lc(t,i){const r=cr.lFrame;r.bindingIndex=r.bindingRootIndex=t,bu(i)}function bu(t){cr.lFrame.currentDirectiveIndex=t}function Qu(t){const i=cr.lFrame.currentDirectiveIndex;return-1===i?null:t[i]}function bc(){return cr.lFrame.currentQueryIndex}function Id(t){cr.lFrame.currentQueryIndex=t}function _v(t){const i=t[en];return 2===i.type?i.declTNode:1===i.type?t[zr]:null}function xu(t,i,r){if(r&br.SkipSelf){let d=i,g=t;for(;!(d=d.parent,null!==d||r&br.Host||(d=_v(g),null===d||(g=g[io],10&d.type))););if(null===d)return!1;i=d,t=g}const o=cr.lFrame=fh();return o.currentTNode=i,o.lView=t,!0}function uu(t){const i=fh(),r=t[en];cr.lFrame=i,i.currentTNode=r.firstChild,i.lView=t,i.tView=r,i.contextLView=t,i.bindingIndex=r.bindingStartIndex,i.inI18n=!1}function fh(){const t=cr.lFrame,i=null===t?null:t.child;return null===i?ph(t):i}function ph(t){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=i),i}function vp(){const t=cr.lFrame;return cr.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const um=vp;function Yu(){const t=vp();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fl(){return cr.lFrame.selectedIndex}function qu(t){cr.lFrame.selectedIndex=t}function Vo(){const t=cr.lFrame;return ko(t.tView,t.selectedIndex)}let ff=!0;function mh(){return ff}function ec(t){ff=t}function pf(t,i){for(let r=i.directiveStart,o=i.directiveEnd;r<o;r++){const g=t.data[r].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:S,ngAfterViewInit:k,ngAfterViewChecked:he,ngOnDestroy:Ae}=g;y&&(t.contentHooks??=[]).push(-r,y),S&&((t.contentHooks??=[]).push(r,S),(t.contentCheckHooks??=[]).push(r,S)),k&&(t.viewHooks??=[]).push(-r,k),he&&((t.viewHooks??=[]).push(r,he),(t.viewCheckHooks??=[]).push(r,he)),null!=Ae&&(t.destroyHooks??=[]).push(r,Ae)}}function Rd(t,i,r){yp(t,i,3,r)}function gh(t,i,r,o){(3&t[bn])===r&&yp(t,i,r,o)}function mf(t,i){let r=t[bn];(3&r)===i&&(r&=16383,r+=1,t[bn]=r)}function yp(t,i,r,o){const g=o??-1,y=i.length-1;let S=0;for(let k=void 0!==o?65535&t[Ac]:0;k<y;k++)if("number"==typeof i[k+1]){if(S=i[k],null!=o&&S>=o)break}else i[k]<0&&(t[Ac]+=65536),(S<g||-1==g)&&(Ev(t,r,i,k),t[Ac]=(4294901760&t[Ac])+k+2),k++}function pm(t,i){Rl(4,t,i);const r=de(null);try{i.call(t)}finally{de(r),Rl(5,t,i)}}function Ev(t,i,r,o){const d=r[o]<0,g=r[o+1],S=t[d?-r[o]:r[o]];d?t[bn]>>14<t[Ac]>>16&&(3&t[bn])===i&&(t[bn]+=16384,pm(S,g)):pm(S,g)}const Nd=-1;class vh{constructor(i,r,o){this.factory=i,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=o}}function _h(t){return t!==Nd}function du(t){return 32767&t}function Eu(t,i){let r=function gm(t){return t>>16}(t),o=i;for(;r>0;)o=o[io],r--;return o}let Sp=!0;function Pd(t){const i=Sp;return Sp=t,i}const tc=255,Mp=5;let wp=0;const kc={};function yh(t,i){const r=Cp(t,i);if(-1!==r)return r;const o=i[en];o.firstCreatePass&&(t.injectorIndex=i.length,vf(o.data,t),vf(i,null),vf(o.blueprint,null));const d=Zu(t,i),g=t.injectorIndex;if(_h(d)){const y=du(d),S=Eu(d,i),k=S[en].data;for(let he=0;he<8;he++)i[g+he]=S[y+he]|k[y+he]}return i[g+8]=d,g}function vf(t,i){t.push(0,0,0,0,0,0,0,0,i)}function Cp(t,i){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===i[t.injectorIndex+8]?-1:t.injectorIndex}function Zu(t,i){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let r=0,o=null,d=i;for(;null!==d;){if(o=Sh(d),null===o)return Nd;if(r++,d=d[io],-1!==o.injectorIndex)return o.injectorIndex|r<<16}return Nd}function _f(t,i,r){!function gf(t,i,r){let o;"string"==typeof r?o=r.charCodeAt(0)||0:r.hasOwnProperty(Po)&&(o=r[Po]),null==o&&(o=r[Po]=wp++);const d=o&tc;i.data[t+(d>>Mp)]|=1<<d}(t,i,r)}function yf(t,i,r){if(r&br.Optional||void 0!==t)return t;ca()}function bf(t,i,r,o){if(r&br.Optional&&void 0===o&&(o=null),!(r&(br.Self|br.Host))){const d=t[Is],g=js(void 0);try{return d?d.get(i,o,r&br.Optional):za(i,o,r&br.Optional)}finally{js(g)}}return yf(o,0,r)}function Tp(t,i,r,o=br.Default,d){if(null!==t){if(2048&i[bn]&&!(o&br.Self)){const y=function Tv(t,i,r,o,d){let g=t,y=i;for(;null!==g&&null!==y&&2048&y[bn]&&!(512&y[bn]);){const S=xf(g,y,r,o|br.Self,kc);if(S!==kc)return S;let k=g.parent;if(!k){const he=y[oa];if(he){const Ae=he.get(r,kc,o);if(Ae!==kc)return Ae}k=Sh(y),y=y[io]}g=k}return d}(t,i,r,o,kc);if(y!==kc)return y}const g=xf(t,i,r,o,kc);if(g!==kc)return g}return bf(i,r,o,d)}function xf(t,i,r,o,d){const g=function bh(t){if("string"==typeof t)return t.charCodeAt(0)||0;const i=t.hasOwnProperty(Po)?t[Po]:void 0;return"number"==typeof i?i>=0?i&tc:ym:i}(r);if("function"==typeof g){if(!xu(i,t,o))return o&br.Host?yf(d,0,o):bf(i,r,o,d);try{let y;if(y=g(o),null!=y||o&br.Optional)return y;ca()}finally{um()}}else if("number"==typeof g){let y=null,S=Cp(t,i),k=Nd,he=o&br.Host?i[Ts][zr]:null;for((-1===S||o&br.SkipSelf)&&(k=-1===S?Zu(t,i):i[S+8],k!==Nd&&td(o,!1)?(y=i[en],S=du(k),i=Eu(k,i)):S=-1);-1!==S;){const Ae=i[en];if(ed(g,S,Ae.data)){const Ze=_m(S,i,r,y,o,he);if(Ze!==kc)return Ze}k=i[S+8],k!==Nd&&td(o,i[en].data[S+8]===he)&&ed(g,S,i)?(y=Ae,S=du(k),i=Eu(k,i)):S=-1}}return d}function _m(t,i,r,o,d,g){const y=i[en],S=y.data[t+8],Ae=Ju(S,y,r,null==o?Tl(S)&&Sp:o!=y&&!!(3&S.type),d&br.Host&&g===S);return null!==Ae?hu(i,y,Ae,S):kc}function Ju(t,i,r,o,d){const g=t.providerIndexes,y=i.data,S=1048575&g,k=t.directiveStart,Ae=g>>20,It=d?S+Ae:t.directiveEnd;for(let Bt=o?S:S+Ae;Bt<It;Bt++){const Zt=y[Bt];if(Bt<k&&r===Zt||Bt>=k&&Zt.type===r)return Bt}if(d){const Bt=y[k];if(Bt&&rl(Bt)&&Bt.type===r)return k}return null}function hu(t,i,r,o){let d=t[r];const g=i.data;if(function Sv(t){return t instanceof vh}(d)){const y=d;y.resolving&&function El(t,i){throw i&&i.join(" > "),new Tt(-200,t)}(function Hr(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():zi(t)}(g[r]));const S=Pd(y.canSeeViewProviders);y.resolving=!0;const he=y.injectImpl?js(y.injectImpl):null;xu(t,o,br.Default);try{d=t[r]=y.factory(void 0,g,t,o),i.firstCreatePass&&r>=o.directiveStart&&function xv(t,i,r){const{ngOnChanges:o,ngOnInit:d,ngDoCheck:g}=i.type.prototype;if(o){const y=Al(i);(r.preOrderHooks??=[]).push(t,y),(r.preOrderCheckHooks??=[]).push(t,y)}d&&(r.preOrderHooks??=[]).push(0-t,d),g&&((r.preOrderHooks??=[]).push(t,g),(r.preOrderCheckHooks??=[]).push(t,g))}(r,g[r],i)}finally{null!==he&&js(he),Pd(S),y.resolving=!1,um()}}return d}function ed(t,i,r){return!!(r[i+(t>>Mp)]&1<<t)}function td(t,i){return!(t&br.Self||t&br.Host&&i)}class wa{constructor(i,r){this._tNode=i,this._lView=r}get(i,r,o){return Tp(this._tNode,this._lView,i,ua(o),r)}}function ym(){return new wa(zs(),xn())}function xh(t){return An(()=>{const i=t.prototype.constructor,r=i[As]||Eh(i),o=Object.prototype;let d=Object.getPrototypeOf(t.prototype).constructor;for(;d&&d!==o;){const g=d[As]||Eh(d);if(g&&g!==r)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Eh(t){return Ht(t)?()=>{const i=Eh(At(t));return i&&i()}:Za(t)}function Sh(t){const i=t[en],r=i.type;return 2===r?i.declTNode:1===r?t[zr]:null}function Mh(t){return function vm(t,i){if("class"===i)return t.classes;if("style"===i)return t.styles;const r=t.attrs;if(r){const o=r.length;let d=0;for(;d<o;){const g=r[d];if(pe(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<o&&"string"==typeof r[d];)d++;else{if(g===i)return r[d+1];d+=2}}}return null}(zs(),t)}function Sm(t,i=null,r=null,o){const d=Mm(t,i,r,o);return d.resolveInjectorInitializers(),d}function Mm(t,i=null,r=null,o,d=new Set){const g=[r||jr,fr(t)];return o=o||("object"==typeof t?void 0:Wr(t)),new De(g,i||F(),o||null,d)}let nc=(()=>{class t{static{this.THROW_IF_NOT_FOUND=no}static{this.NULL=new $a}static create(r,o){if(Array.isArray(r))return Sm({name:""},o,r,"");{const d=r.name??"";return Sm({name:d},r.parent,r.providers,d)}}static{this.\u0275prov=sr({token:t,providedIn:"any",factory:()=>Vs(ka)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();function Pp(t){return t.ngOriginalError}class Bc{constructor(){this._console=console}handleError(i){const r=this._findOriginalError(i);this._console.error("ERROR",i),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(i){let r=i&&Pp(i);for(;r&&Pp(r);)r=Pp(r);return r||null}}const Tm=new ht("",{providedIn:"root",factory:()=>ur(Bc).handleError.bind(void 0)});let id=(()=>{class t{static{this.__NG_ELEMENT_ID__=Dm}static{this.__NG_ENV_ID__=r=>r}}return t})();class Op extends id{constructor(i){super(),this._lView=i}onDestroy(i){return Nl(this._lView,i),()=>uh(this._lView,i)}}function Dm(){return new Op(xn())}class Fp{constructor(){this.destroyed=!1,this.listeners=null,this.errorHandler=ur(Bc,{optional:!0}),this.destroyRef=ur(id),this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(i){if(this.destroyed)throw new Tt(953,!1);return(this.listeners??=[]).push(i),{unsubscribe:()=>{const r=this.listeners?.indexOf(i);void 0!==r&&-1!==r&&this.listeners?.splice(r,1)}}}emit(i){if(this.destroyed)throw new Tt(953,!1);if(null===this.listeners)return;const r=de(null);try{for(const o of this.listeners)try{o(i)}catch(d){this.errorHandler?.handleError(d)}}finally{de(r)}}}function Av(t){return new Fp}function Am(t,i){return Gn(t,i)}const Rv=(Am.required=function Iv(t){return Gn(Ln,t)},Am);function Nv(){return Fd(zs(),xn())}function Fd(t,i){return new Ch(Ma(t,i))}let Ch=(()=>{class t{constructor(r){this.nativeElement=r}static{this.__NG_ELEMENT_ID__=Nv}}return t})();function Mf(t){return t instanceof Ch?t.nativeElement:t}function Lp(t){return i=>{setTimeout(t,void 0,i)}}const Kc=class Pv extends fn.B{constructor(i=!1){super(),this.destroyRef=void 0,this.__isAsync=i,Ji()&&(this.destroyRef=ur(id,{optional:!0})??void 0)}emit(i){const r=de(null);try{super.next(i)}finally{de(r)}}subscribe(i,r,o){let d=i,g=r||(()=>null),y=o;if(i&&"object"==typeof i){const k=i;d=k.next?.bind(k),g=k.error?.bind(k),y=k.complete?.bind(k)}this.__isAsync&&(g=Lp(g),d&&(d=Lp(d)),y&&(y=Lp(y)));const S=super.subscribe({next:d,error:g,complete:y});return i instanceof Sn.yU&&i.add(S),S}};function Ov(){return this._results[Symbol.iterator]()}class wf{get changes(){return this._changes??=new Kc}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const r=wf.prototype;r[Symbol.iterator]||(r[Symbol.iterator]=Ov)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,r){return this._results.reduce(i,r)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,r){this.dirty=!1;const o=function Ys(t){return t.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Cc(t,i,r){if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++){let d=t[o],g=i[o];if(r&&(d=r(d),g=r(g)),g!==d)return!1}return!0}(this._results,o,r))&&(this._results=o,this.length=o.length,this.last=o[this.length-1],this.first=o[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(i){this._onDirty=i}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Th(t){return!(128&~t.flags)}const Im=new Map;let n1=0;const Rm="__ngContext__";function Pl(t,i){$r(i)?(t[Rm]=i[Wl],function r1(t){Im.set(t[Wl],t)}(i)):t[Rm]=i}function Nm(t){return zp(t[Jo])}function Pm(t){return zp(t[pr])}function zp(t){for(;null!==t&&!ea(t);)t=t[pr];return t}let Ar;function ls(t){Ar=t}function os(){if(void 0!==Ar)return Ar;if(typeof document<"u")return document;throw new Tt(210,!1)}const gs=new ht("",{providedIn:"root",factory:()=>Do}),Do="ng",Zr=new ht(""),vs=new ht("",{providedIn:"platform",factory:()=>"unknown"}),Ro=new ht(""),No=new ht("",{providedIn:"root",factory:()=>os().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let If=()=>null;function Jc(t,i,r=!1){return If(t,i,r)}const Xv=new ht("",{providedIn:"root",factory:()=>!1});let Kp,Qp;function Rh(t){return function Lm(){if(void 0===Kp&&(Kp=null,ri.trustedTypes))try{Kp=ri.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Kp}()?.createHTML(t)||t}function km(){if(void 0===Qp&&(Qp=null,ri.trustedTypes))try{Qp=ri.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Qp}function Qv(t){return km()?.createHTML(t)||t}function qv(t){return km()?.createScriptURL(t)||t}class Ud{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dt})`}}class c1 extends Ud{getTypeName(){return"HTML"}}class u1 extends Ud{getTypeName(){return"Style"}}class d1 extends Ud{getTypeName(){return"Script"}}class h1 extends Ud{getTypeName(){return"URL"}}class f1 extends Ud{getTypeName(){return"ResourceURL"}}function Tu(t){return t instanceof Ud?t.changingThisBreaksApplicationSecurity:t}function Nh(t,i){const r=function p1(t){return t instanceof Ud&&t.getTypeName()||null}(t);if(null!=r&&r!==i){if("ResourceURL"===r&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${r} (see ${Dt})`)}return r===i}function m1(t){return new c1(t)}function g1(t){return new u1(t)}function v1(t){return new d1(t)}function _1(t){return new h1(t)}function y1(t){return new f1(t)}function Yp(t){const i=new b1(t);return function qp(){try{return!!(new window.DOMParser).parseFromString(Rh(""),"text/html")}catch{return!1}}()?new Zv(i):i}class Zv{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const r=(new window.DOMParser).parseFromString(Rh(i),"text/html").body;return null===r?this.inertDocumentHelper.getInertBodyElement(i):(r.removeChild(r.firstChild),r)}catch{return null}}}class b1{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const r=this.inertDocument.createElement("template");return r.innerHTML=Rh(i),r}}const Jv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Zp(t){return(t=String(t)).match(Jv)?t:"unsafe:"+t}function Du(t){const i={};for(const r of t.split(","))i[r]=!0;return i}function Ff(...t){const i={};for(const r of t)for(const o in r)r.hasOwnProperty(o)&&(i[o]=!0);return i}const Bm=Du("area,br,col,hr,img,wbr"),e_=Du("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Um=Du("rp,rt"),Hm=Ff(Bm,Ff(e_,Du("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ff(Um,Du("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ff(Um,e_)),zm=Du("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ph=Ff(zm,Du("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Du("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),t_=Du("script,style,template");class n_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let r=i.firstChild,o=!0,d=[];for(;r;)if(r.nodeType===Node.ELEMENT_NODE?o=this.startElement(r):r.nodeType===Node.TEXT_NODE?this.chars(r.nodeValue):this.sanitizedSomething=!0,o&&r.firstChild)d.push(r),r=E1(r);else for(;r;){r.nodeType===Node.ELEMENT_NODE&&this.endElement(r);let g=Gm(r);if(g){r=g;break}r=d.pop()}return this.buf.join("")}startElement(i){const r=i_(i).toLowerCase();if(!Hm.hasOwnProperty(r))return this.sanitizedSomething=!0,!t_.hasOwnProperty(r);this.buf.push("<"),this.buf.push(r);const o=i.attributes;for(let d=0;d<o.length;d++){const g=o.item(d),y=g.name,S=y.toLowerCase();if(!Ph.hasOwnProperty(S)){this.sanitizedSomething=!0;continue}let k=g.value;zm[S]&&(k=Zp(k)),this.buf.push(" ",y,'="',Wm(k),'"')}return this.buf.push(">"),!0}endElement(i){const r=i_(i).toLowerCase();Hm.hasOwnProperty(r)&&!Bm.hasOwnProperty(r)&&(this.buf.push("</"),this.buf.push(r),this.buf.push(">"))}chars(i){this.buf.push(Wm(i))}}function Gm(t){const i=t.nextSibling;if(i&&t!==i.previousSibling)throw r_(i);return i}function E1(t){const i=t.firstChild;if(i&&function x1(t,i){return(t.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,i))throw r_(i);return i}function i_(t){const i=t.nodeName;return"string"==typeof i?i:"FORM"}function r_(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const s_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,S1=/([^\#-~ |!])/g;function Wm(t){return t.replace(/&/g,"&amp;").replace(s_,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(S1,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jp;function o_(t,i){let r=null;try{Jp=Jp||Yp(t);let o=i?String(i):"";r=Jp.getInertBodyElement(o);let d=5,g=o;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,o=g,g=r.innerHTML,r=Jp.getInertBodyElement(o)}while(o!==g);return Rh((new n_).sanitizeChildren(jm(r)||r))}finally{if(r){const o=jm(r)||r;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function jm(t){return"content"in t&&function M1(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Vd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Vd||{});function a_(t){const i=Lf();return i?Qv(i.sanitize(Vd.HTML,t)||""):Nh(t,"HTML")?Qv(Tu(t)):o_(os(),zi(t))}function $m(t){const i=Lf();return i?i.sanitize(Vd.URL,t)||"":Nh(t,"URL")?Tu(t):Zp(zi(t))}function Xm(t){const i=Lf();if(i)return qv(i.sanitize(Vd.RESOURCE_URL,t)||"");if(Nh(t,"ResourceURL"))return qv(Tu(t));throw new Tt(904,!1)}function Km(t,i,r){return function l_(t,i){return"src"===i&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===i&&("base"===t||"link"===t)?Xm:$m}(i,r)(t)}function Lf(){const t=xn();return t&&t[$s].sanitizer}const A1=/^>|^->|<!--|-->|--!>|<!-$/g,I1=/(<|>)/g,R1="\u200b$1\u200b";function Zm(t){Cn("Must never be called in production mode");const r=function e0(t){Cn("Must never be called in production mode");const r=t[Ts][lr];return r&&r.constructor?et(r.constructor):null}(t)?.type?.name;return r?` (used in the '${r}' component template)`:""}function f_(t){return t.ownerDocument.defaultView}function Sc(t){return t instanceof Function?t():t}function eu(t){return"browser"===(t??ur(nc)).get(vs)}var Oh=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Oh||{});let ld;function Hd(t,i){return ld(t,i)}function tu(t,i,r,o,d){if(null!=o){let g,y=!1;ea(o)?g=o:$r(o)&&(y=!0,o=o[Rn]);const S=Rs(o);0===t&&null!==r?null==d?Hf(i,r,S):dd(i,r,S,d||null,!0):1===t&&null!==r?dd(i,r,S,d||null,!0):2===t?function Wf(t,i,r){const o=l0(t,i);o&&function E_(t,i,r,o){t.removeChild(i,r,o)}(t,o,i,r)}(i,S,y):3===t&&i.destroyNode(S),null!=g&&function U1(t,i,r,o,d){const g=r[hl];g!==Rs(r)&&tu(i,t,o,g,d);for(let S=ro;S<r.length;S++){const k=r[S];u0(k[en],k,t,i,o,g)}}(i,t,g,r,d)}}function cd(t,i){return t.createText(i)}function r0(t,i){return t.createComment(function Qm(t){return t.replace(A1,i=>i.replace(I1,R1))}(i))}function zd(t,i,r){return t.createElement(i,r)}function eg(t,i){i[$s].changeDetectionScheduler?.notify(1),u0(t,i,i[vi],2,null,null)}function Uf(t,i){const r=t[gr],o=r.indexOf(i);r.splice(o,1)}function ud(t,i){if(t.length<=ro)return;const r=ro+i,o=t[r];if(o){const d=o[dc];null!==d&&d!==t&&Uf(d,o),i>0&&(t[r-1][pr]=o[pr]);const g=vo(t,ro+i);!function Bf(t,i){eg(t,i),i[Rn]=null,i[zr]=null}(o[en],o);const y=g[Ea];null!==y&&y.detachView(g[en]),o[ui]=null,o[pr]=null,o[bn]&=-129}return o}function Vf(t,i){if(!(256&i[bn])){const r=i[vi];r.destroyNode&&u0(t,i,r,3,null,null),function tg(t){let i=t[Jo];if(!i)return ng(t[en],t);for(;i;){let r=null;if($r(i))r=i[Jo];else{const o=i[ro];o&&(r=o)}if(!r){for(;i&&!i[pr]&&i!==t;)$r(i)&&ng(i[en],i),i=i[ui];null===i&&(i=t),$r(i)&&ng(i[en],i),r=i&&i[pr]}i=r}}(i)}}function ng(t,i){if(256&i[bn])return;const r=de(null);try{i[bn]&=-129,i[bn]|=256,i[jl]&&He(i[jl]),function b_(t,i){let r;if(null!=t&&null!=(r=t.destroyHooks))for(let o=0;o<r.length;o+=2){const d=i[r[o]];if(!(d instanceof vh)){const g=r[o+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const S=d[g[y]],k=g[y+1];Rl(4,S,k);try{k.call(S)}finally{Rl(5,S,k)}}else{Rl(4,d,g);try{g.call(d)}finally{Rl(5,d,g)}}}}}(t,i),function y_(t,i){const r=t.cleanup,o=i[go];if(null!==r)for(let g=0;g<r.length-1;g+=2)if("string"==typeof r[g]){const y=r[g+3];y>=0?o[y]():o[-y].unsubscribe(),g+=2}else r[g].call(o[r[g+1]]);null!==o&&(i[go]=null);const d=i[rs];if(null!==d){i[rs]=null;for(let g=0;g<d.length;g++)(0,d[g])()}}(t,i),1===i[en].type&&i[vi].destroy();const o=i[dc];if(null!==o&&ea(i[ui])){o!==i[ui]&&Uf(o,i);const d=i[Ea];null!==d&&d.detachView(t)}!function kv(t){Im.delete(t[Wl])}(i)}finally{de(r)}}function o0(t,i,r){return x_(t,i.parent,r)}function x_(t,i,r){let o=i;for(;null!==o&&40&o.type;)o=(i=o).parent;if(null===o)return r[Rn];{const{componentOffset:d}=o;if(d>-1){const{encapsulation:g}=t.data[o.directiveStart+d];if(g===qs.None||g===qs.Emulated)return null}return Ma(o,r)}}function dd(t,i,r,o,d){t.insertBefore(i,r,o,d)}function Hf(t,i,r){t.appendChild(i,r)}function a0(t,i,r,o,d){null!==o?dd(t,i,r,o,d):Hf(t,i,r)}function l0(t,i){return t.parentNode(i)}function pu(t,i,r){return w_(t,i,r)}function ig(t,i,r){return 40&t.type?Ma(t,r):null}let zf,w_=ig;function kh(t,i){w_=t,zf=i}function Iu(t,i,r,o){const d=o0(t,o,i),g=i[vi],S=pu(o.parent||i[zr],o,i);if(null!=d)if(Array.isArray(r))for(let k=0;k<r.length;k++)a0(g,d,r[k],S,!1);else a0(g,d,r,S,!1);void 0!==zf&&zf(g,o,i,r,d)}function Bh(t,i){if(null!==i){const r=i.type;if(3&r)return Ma(i,t);if(4&r)return c0(-1,t[i.index]);if(8&r){const o=i.child;if(null!==o)return Bh(t,o);{const d=t[i.index];return ea(d)?c0(-1,d):Rs(d)}}if(32&r)return Hd(i,t)()||Rs(t[i.index]);{const o=Gf(t,i);return null!==o?Array.isArray(o)?o[0]:Bh(_c(t[Ts]),o):Bh(t,i.next)}}return null}function Gf(t,i){return null!==i?t[Ts][zr].projection[i.projection]:null}function c0(t,i){const r=ro+t+1;if(r<i.length){const o=i[r],d=o[en].firstChild;if(null!==d)return Bh(o,d)}return i[hl]}function Gd(t,i,r,o,d,g,y){for(;null!=r;){const S=o[r.index],k=r.type;if(y&&0===i&&(S&&Pl(Rs(S),o),r.flags|=2),32&~r.flags)if(8&k)Gd(t,i,r.child,o,d,g,!1),tu(i,t,d,S,g);else if(32&k){const he=Hd(r,o);let Ae;for(;Ae=he();)tu(i,t,d,Ae,g);tu(i,t,d,S,g)}else 16&k?C_(t,i,o,r,d,g):tu(i,t,d,S,g);r=y?r.projectionNext:r.next}}function u0(t,i,r,o,d,g){Gd(r,o,t.firstChild,i,d,g,!1)}function C_(t,i,r,o,d,g){const y=r[Ts],k=y[zr].projection[o.projection];if(Array.isArray(k))for(let he=0;he<k.length;he++)tu(i,t,d,k[he],g);else{let he=k;const Ae=y[ui];Th(o)&&(he.flags|=128),Gd(t,i,he,Ae,d,g,!0)}}function T_(t,i,r){""===r?t.removeAttribute(i,"class"):t.setAttribute(i,"class",r)}function d0(t,i,r){const{mergedAttrs:o,classes:d,styles:g}=r;null!==o&&sa(t,i,o),null!==d&&T_(t,i,d),null!==g&&function sc(t,i,r){t.setAttribute(i,"style",r)}(t,i,g)}const ns={};function hd(t=1){Vh(xs(),xn(),fl()+t,!1)}function Vh(t,i,r,o){if(!o)if(3&~i[bn]){const g=t.preOrderHooks;null!==g&&gh(i,g,0,r)}else{const g=t.preOrderCheckHooks;null!==g&&Rd(i,g,r)}qu(r)}function Wd(t,i=br.Default){const r=xn();return null===r?Vs(t,i):Tp(zs(),r,At(t),i)}function h0(t,i,r,o,d,g){const y=de(null);try{let S=null;d&Zo.SignalBased&&(S=i[o][ie]),null!==S&&void 0!==S.transformFn&&(g=S.transformFn(g)),d&Zo.HasDecoratorInputTransform&&(g=t.inputTransforms[o].call(i,g)),null!==t.setInput?t.setInput(i,S,g,r,o):gc(i,S,o,g)}finally{de(y)}}function jd(t,i,r,o,d,g,y,S,k,he,Ae){const Ze=i.blueprint.slice();return Ze[Rn]=d,Ze[bn]=204|o,(null!==he||t&&2048&t[bn])&&(Ze[bn]|=2048),Cd(Ze),Ze[ui]=Ze[io]=t,Ze[lr]=r,Ze[$s]=y||t&&t[$s],Ze[vi]=S||t&&t[vi],Ze[Is]=k||t&&t[Is]||null,Ze[zr]=g,Ze[Wl]=function i1(){return n1++}(),Ze[ts]=Ae,Ze[oa]=he,Ze[Ts]=2==i.type?t[Ts]:Ze,Ze}function Hh(t,i,r,o,d){let g=t.data[i];if(null===g)g=Ru(t,i,r,o,d),function aa(){return cr.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=r,g.value=o,g.attrs=d;const y=Zl();g.injectorIndex=null===y?-1:y.injectorIndex}return jo(g,!0),g}function Ru(t,i,r,o,d){const g=cu(),y=hf(),k=t.data[i]=function z1(t,i,r,o,d,g){let y=i?i.injectorIndex:-1,S=0;return Xu()&&(S|=128),{type:r,index:o,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:S,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,r,i,o,d);return null===t.firstChild&&(t.firstChild=k),null!==g&&(y?null==g.child&&null!==k.parent&&(g.child=k):null===g.next&&(g.next=k,k.prev=g)),k}function jf(t,i,r,o){if(0===r)return-1;const d=i.length;for(let g=0;g<r;g++)i.push(o),t.blueprint.push(o),t.data.push(null);return d}function Kl(t,i,r,o,d){const g=fl(),y=2&o;try{qu(-1),y&&i.length>Er&&Vh(t,i,Er,!1),Rl(y?2:0,d),r(o,d)}finally{qu(g),Rl(y?3:1,d)}}function zh(t,i,r){if(Qa(i)){const o=de(null);try{const g=i.directiveEnd;for(let y=i.directiveStart;y<g;y++){const S=t.data[y];S.contentQueries&&S.contentQueries(1,r[y],y)}}finally{de(o)}}}function Gh(t,i,r){Dd()&&(function W1(t,i,r,o){const d=r.directiveStart,g=r.directiveEnd;Tl(r)&&function $1(t,i,r){const o=Ma(i,t),d=Wh(r);let y=16;r.signals?y=4096:r.onPush&&(y=64);const S=v0(t,jd(t,d,null,y,o,i,null,t[$s].rendererFactory.createRenderer(o,r),null,null,null));t[i.index]=S}(i,r,t.data[d+r.componentOffset]),t.firstCreatePass||yh(r,i),Pl(o,i);const y=r.initialInputs;for(let S=d;S<g;S++){const k=t.data[S],he=hu(i,t,S,r);Pl(he,i),null!==y&&X1(0,S-d,he,k,0,y),rl(k)&&(fs(r.index,i)[lr]=hu(i,t,S,r))}}(t,i,r,Ma(r,i)),!(64&~r.flags)&&nu(t,i,r))}function f0(t,i,r=Ma){const o=i.localNames;if(null!==o){let d=i.index+1;for(let g=0;g<o.length;g+=2){const y=o[g+1],S=-1===y?r(i,t):t[y];t[d++]=S}}}function Wh(t){const i=t.tView;return null===i||i.incompleteFirstPass?t.tView=jh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):i}function jh(t,i,r,o,d,g,y,S,k,he,Ae){const Ze=Er+o,It=Ze+d,Bt=function sg(t,i){const r=[];for(let o=0;o<i;o++)r.push(o<t?null:ns);return r}(Ze,It),Zt="function"==typeof he?he():he;return Bt[en]={type:t,blueprint:Bt,template:r,queries:null,viewQuery:S,declTNode:i,data:Bt.slice().fill(null,Ze),bindingStartIndex:Ze,expandoStartIndex:It,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:k,consts:Zt,incompleteFirstPass:!1,ssrId:Ae}}let $f=()=>null;function og(t,i,r,o,d){for(let g in i){if(!i.hasOwnProperty(g))continue;const y=i[g];if(void 0===y)continue;o??={};let S,k=Zo.None;Array.isArray(y)?(S=y[0],k=y[1]):S=y;let he=g;if(null!==d){if(!d.hasOwnProperty(g))continue;he=d[g]}0===t?ag(o,r,he,S,k):ag(o,r,he,S)}return o}function ag(t,i,r,o,d){let g;t.hasOwnProperty(r)?(g=t[r]).push(i,o):g=t[r]=[i,o],void 0!==d&&g.push(d)}function gl(t,i,r,o,d,g,y,S){const k=Ma(i,r);let Ae,he=i.inputs;!S&&null!=he&&(Ae=he[o])?(gg(t,r,Ae,o,d),Tl(i)&&function G1(t,i){const r=fs(i,t);16&r[bn]||(r[bn]|=64)}(r,i.index)):3&i.type&&(o=function p0(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),d=null!=y?y(d,i.value||"",o):d,g.setProperty(k,o,d))}function N_(t,i,r,o){if(Dd()){const d=null===o?null:{"":-1},g=function j1(t,i){const r=t.directiveRegistry;let o=null,d=null;if(r)for(let g=0;g<r.length;g++){const y=r[g];if(au(i,y.selectors,!1))if(o||(o=[]),rl(y))if(null!==y.findHostDirectiveDefs){const S=[];d=d||new Map,y.findHostDirectiveDefs(y,S,d),o.unshift(...S,y),Xf(t,i,S.length)}else o.unshift(y),Xf(t,i,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,o,d),o.push(y)}return null===o?null:[o,d]}(t,r);let y,S;null===g?y=S=null:[y,S]=g,null!==y&&m0(t,i,r,y,d,S),d&&function g0(t,i,r){if(i){const o=t.localNames=[];for(let d=0;d<i.length;d+=2){const g=r[i[d+1]];if(null==g)throw new Tt(-301,!1);o.push(i[d],g)}}}(r,o,d)}r.mergedAttrs=ne(r.mergedAttrs,r.attrs)}function m0(t,i,r,o,d,g){for(let he=0;he<o.length;he++)_f(yh(r,i),t,o[he].type);!function dg(t,i,r){t.flags|=1,t.directiveStart=i,t.directiveEnd=i+r,t.providerIndexes=i}(r,t.data.length,o.length);for(let he=0;he<o.length;he++){const Ae=o[he];Ae.providersResolver&&Ae.providersResolver(Ae)}let y=!1,S=!1,k=jf(t,i,o.length,null);for(let he=0;he<o.length;he++){const Ae=o[he];r.mergedAttrs=ne(r.mergedAttrs,Ae.hostAttrs),hg(t,r,i,k,Ae),ug(k,Ae,d),null!==Ae.contentQueries&&(r.flags|=4),(null!==Ae.hostBindings||null!==Ae.hostAttrs||0!==Ae.hostVars)&&(r.flags|=64);const Ze=Ae.type.prototype;!y&&(Ze.ngOnChanges||Ze.ngOnInit||Ze.ngDoCheck)&&((t.preOrderHooks??=[]).push(r.index),y=!0),!S&&(Ze.ngOnChanges||Ze.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(r.index),S=!0),k++}!function lg(t,i,r){const d=i.directiveEnd,g=t.data,y=i.attrs,S=[];let k=null,he=null;for(let Ae=i.directiveStart;Ae<d;Ae++){const Ze=g[Ae],It=r?r.get(Ze):null,Zt=It?It.outputs:null;k=og(0,Ze.inputs,Ae,k,It?It.inputs:null),he=og(1,Ze.outputs,Ae,he,Zt);const Mn=null===k||null===y||Nr(i)?null:K1(k,Ae,y);S.push(Mn)}null!==k&&(k.hasOwnProperty("class")&&(i.flags|=8),k.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=S,i.inputs=k,i.outputs=he}(t,r,g)}function nu(t,i,r){const o=r.directiveStart,d=r.directiveEnd,g=r.index,y=function hh(){return cr.lFrame.currentDirectiveIndex}();try{qu(g);for(let S=o;S<d;S++){const k=t.data[S],he=i[S];bu(S),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&cg(k,he)}}finally{qu(-1),bu(y)}}function cg(t,i){null!==t.hostBindings&&t.hostBindings(1,i)}function Xf(t,i,r){i.componentOffset=r,(t.components??=[]).push(i.index)}function ug(t,i,r){if(r){if(i.exportAs)for(let o=0;o<i.exportAs.length;o++)r[i.exportAs[o]]=t;rl(i)&&(r[""]=t)}}function hg(t,i,r,o,d){t.data[o]=d;const g=d.factory||(d.factory=Za(d.type)),y=new vh(g,rl(d),Wd);t.blueprint[o]=y,r[o]=y,function sE(t,i,r,o,d){const g=d.hostBindings;if(g){let y=t.hostBindingOpCodes;null===y&&(y=t.hostBindingOpCodes=[]);const S=~i.index;(function oE(t){let i=t.length;for(;i>0;){const r=t[--i];if("number"==typeof r&&r<0)return r}return 0})(y)!=S&&y.push(S),y.push(r,o,g)}}(t,i,o,jf(t,r,d.hostVars,ns),d)}function iu(t,i,r,o,d,g){const y=Ma(t,i);!function fg(t,i,r,o,d,g,y){if(null==g)t.removeAttribute(i,d,r);else{const S=null==y?zi(g):y(g,o||"",d);t.setAttribute(i,d,S,r)}}(i[vi],y,g,t.value,r,o,d)}function X1(t,i,r,o,d,g){const y=g[i];if(null!==y)for(let S=0;S<y.length;)h0(o,r,y[S++],y[S++],y[S++],y[S++])}function K1(t,i,r){let o=null,d=0;for(;d<r.length;){const g=r[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(t.hasOwnProperty(g)){null===o&&(o=[]);const y=t[g];for(let S=0;S<y.length;S+=3)if(y[S]===i){o.push(g,y[S+1],y[S+2],r[d+1]);break}}d+=2}else d+=2;else d+=4}return o}function $h(t,i,r,o){return[t,!0,0,i,null,o,null,r,null,null]}function P_(t,i){const r=t.contentQueries;if(null!==r){const o=de(null);try{for(let d=0;d<r.length;d+=2){const y=r[d+1];if(-1!==y){const S=t.data[y];Id(r[d]),S.contentQueries(2,i[y],y)}}}finally{de(o)}}}function v0(t,i){return t[Jo]?t[Js][pr]=i:t[Jo]=i,t[Js]=i,i}function pg(t,i,r){Id(0);const o=de(null);try{i(t,r)}finally{de(o)}}function Xh(t){return t[go]||(t[go]=[])}function mg(t){return t.cleanup||(t.cleanup=[])}function O_(t,i,r){return(null===t||rl(t))&&(r=function sf(t){for(;Array.isArray(t);){if("object"==typeof t[hc])return t;t=t[Rn]}return null}(r[i.index])),r[vi]}function Kf(t,i){const r=t[Is],o=r?r.get(Bc,null):null;o&&o.handleError(i)}function gg(t,i,r,o,d){for(let g=0;g<r.length;){const y=r[g++],S=r[g++],k=r[g++];h0(t.data[y],i[y],o,S,k,d)}}function mu(t,i,r){const o=Ha(i,t);!function Lh(t,i,r){t.setValue(i,r)}(t[vi],o,r)}function F_(t,i){const r=fs(i,t),o=r[en];!function L_(t,i){for(let r=i.length;r<t.blueprint.length;r++)i.push(t.blueprint[r])}(o,r);const d=r[Rn];null!==d&&null===r[ts]&&(r[ts]=Jc(d,r[Is])),Kh(o,r,r[lr])}function Kh(t,i,r){uu(i);try{const o=t.viewQuery;null!==o&&pg(1,o,r);const d=t.template;null!==d&&Kl(t,i,d,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),i[Ea]?.finishViewCreation(t),t.staticContentQueries&&P_(t,i),t.staticViewQueries&&pg(2,t.viewQuery,r);const g=t.components;null!==g&&function Q1(t,i){for(let r=0;r<i.length;r++)F_(t,i[r])}(i,g)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{i[bn]&=-5,Yu()}}function fd(t,i,r,o){const d=de(null);try{const g=i.tView,k=jd(t,g,r,4096&t[bn]?4096:16,null,i,null,null,o?.injector??null,o?.embeddedViewInjector??null,o?.dehydratedView??null);k[dc]=t[i.index];const Ae=t[Ea];return null!==Ae&&(k[Ea]=Ae.createEmbeddedView(g)),Kh(g,k,r),k}finally{de(d)}}function Qf(t,i){const r=ro+i;if(r<t.length)return t[r]}function pd(t,i){return!i||null===i.firstChild||Th(t)}function Xd(t,i,r,o=!0){const d=i[en];if(function v_(t,i,r,o){const d=ro+o,g=r.length;o>0&&(r[d-1][pr]=i),o<g-ro?(i[pr]=r[d],La(r,ro+o,i)):(r.push(i),i[pr]=null),i[ui]=r;const y=i[dc];null!==y&&r!==y&&function __(t,i){const r=t[gr];i[Ts]!==i[ui][ui][Ts]&&(t[bn]|=Sa.HasTransplantedViews),null===r?t[gr]=[i]:r.push(i)}(y,i);const S=i[Ea];null!==S&&S.insertView(t),rr(i),i[bn]|=128}(d,i,t,r),o){const y=c0(r,t),S=i[vi],k=l0(S,t[hl]);null!==k&&function s0(t,i,r,o,d,g){o[Rn]=d,o[zr]=i,u0(t,o,r,1,d,g)}(d,t[zr],S,i,k,y)}const g=i[ts];null!==g&&null!==g.firstChild&&(g.firstChild=null)}function Kd(t,i){const r=ud(t,i);return void 0!==r&&Vf(r[en],r),r}function Qd(t,i,r,o,d=!1){for(;null!==r;){const g=i[r.index];null!==g&&o.push(Rs(g)),ea(g)&&md(g,o);const y=r.type;if(8&y)Qd(t,i,r.child,o);else if(32&y){const S=Hd(r,i);let k;for(;k=S();)o.push(k)}else if(16&y){const S=Gf(i,r);if(Array.isArray(S))o.push(...S);else{const k=_c(i[Ts]);Qd(k[en],k,S,o,!0)}}r=d?r.projectionNext:r.next}return o}function md(t,i){for(let r=ro;r<t.length;r++){const o=t[r],d=o[en].firstChild;null!==d&&Qd(o[en],o,d,i)}t[hl]!==t[Rn]&&i.push(t[hl])}let _0=[];const x0={...I,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ch(t.lView)},consumerOnSignalRead(){this.lView[jl]=this}},k_=100;function Pu(t,i=!0,r=0){const o=t[$s],d=o.rendererFactory;d.begin?.();try{!function Y1(t,i){_g(t,i);let r=0;for(;lm(t);){if(r===k_)throw new Tt(103,!1);r++,_g(t,1)}}(t,r)}catch(y){throw i&&Kf(t,y),y}finally{d.end?.(),o.inlineEffectRunner?.flush()}}function Yd(t,i,r,o){const d=i[bn];if(!(256&~d))return;i[$s].inlineEffectRunner?.flush(),uu(i);let y=null,S=null;(function Yf(t){return 2!==t.type})(t)&&(S=function y0(t){return t[jl]??function b0(t){const i=_0.pop()??Object.create(x0);return i.lView=t,i}(t)}(i),y=ye(S));try{Cd(i),function Xc(t){return cr.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==r&&Kl(t,i,r,2,o);const k=!(3&~d);if(k){const Ze=t.preOrderCheckHooks;null!==Ze&&Rd(i,Ze,null)}else{const Ze=t.preOrderHooks;null!==Ze&&gh(i,Ze,0,null),mf(i,0)}if(function Z1(t){for(let i=Nm(t);null!==i;i=Pm(i)){if(!(i[bn]&Sa.HasTransplantedViews))continue;const r=i[gr];for(let o=0;o<r.length;o++){gv(r[o])}}}(i),B_(i,0),null!==t.contentQueries&&P_(t,i),k){const Ze=t.contentCheckHooks;null!==Ze&&Rd(i,Ze)}else{const Ze=t.contentHooks;null!==Ze&&gh(i,Ze,1),mf(i,1)}!function Fl(t,i){const r=t.hostBindingOpCodes;if(null!==r)try{for(let o=0;o<r.length;o++){const d=r[o];if(d<0)qu(~d);else{const g=d,y=r[++o],S=r[++o];Lc(y,g),S(2,i[g])}}}finally{qu(-1)}}(t,i);const he=t.components;null!==he&&V_(i,he,0);const Ae=t.viewQuery;if(null!==Ae&&pg(2,Ae,o),k){const Ze=t.viewCheckHooks;null!==Ze&&Rd(i,Ze)}else{const Ze=t.viewHooks;null!==Ze&&gh(i,Ze,2),mf(i,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i[Va]){for(const Ze of i[Va])Ze();i[Va]=null}i[bn]&=-73}catch(k){throw ch(i),k}finally{null!==S&&(Te(S,y),function vg(t){t.lView[jl]!==t&&(t.lView=null,_0.push(t))}(S)),Yu()}}function B_(t,i){for(let r=Nm(t);null!==r;r=Pm(r))for(let o=ro;o<r.length;o++)U_(r[o],i)}function J1(t,i,r){U_(fs(i,t),r)}function U_(t,i){af(t)&&_g(t,i)}function _g(t,i){const o=t[en],d=t[bn],g=t[jl];let y=!!(0===i&&16&d);if(y||=!!(64&d&&0===i),y||=!!(1024&d),y||=!(!g?.dirty||!We(g)),g&&(g.dirty=!1),t[bn]&=-9217,y)Yd(o,t,o.template,t[lr]);else if(8192&d){B_(t,1);const S=o.components;null!==S&&V_(t,S,1)}}function V_(t,i,r){for(let o=0;o<i.length;o++)J1(t,i[o],r)}function qf(t){for(t[$s].changeDetectionScheduler?.notify();t;){t[bn]|=64;const i=_c(t);if(ga(t)&&!i)return t;t=i}return null}class Zf{get rootNodes(){const i=this._lView,r=i[en];return Qd(r,i,r.firstChild,[])}constructor(i,r,o=!0){this._lView=i,this._cdRefInjectingView=r,this.notifyErrorHandler=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[lr]}set context(i){this._lView[lr]=i}get destroyed(){return!(256&~this._lView[bn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[ui];if(ea(i)){const r=i[8],o=r?r.indexOf(this):-1;o>-1&&(ud(i,o),vo(r,o))}this._attachedToViewContainer=!1}Vf(this._lView[en],this._lView)}onDestroy(i){Nl(this._lView,i)}markForCheck(){qf(this._cdRefInjectingView||this._lView)}detach(){this._lView[bn]&=-129}reattach(){rr(this._lView),this._lView[bn]|=128}detectChanges(){this._lView[bn]|=1024,Pu(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Tt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,eg(this._lView[en],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Tt(902,!1);this._appRef=i,rr(this._lView)}}let Jf=(()=>{class t{static{this.__NG_ELEMENT_ID__=yg}}return t})();const eb=Jf,tb=class extends eb{constructor(i,r,o){super(),this._declarationLView=i,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(i,r){return this.createEmbeddedViewImpl(i,r)}createEmbeddedViewImpl(i,r,o){const d=fd(this._declarationLView,this._declarationTContainer,i,{embeddedViewInjector:r,dehydratedView:o});return new Zf(d)}};function yg(){return E0(zs(),xn())}function E0(t,i){return 4&t.type?new tb(i,t,Fd(t,i)):null}let vd=()=>null;function _d(t,i){return vd(t,i)}class qh{}class hb{}class K_{}class Q_{resolveComponentFactory(i){throw function lE(t){const i=Error(`No component factory found for ${Wr(t)}.`);return i.ngComponent=t,i}(i)}}let np=(()=>{class t{static{this.NULL=new Q_}}return t})();class ru{}let Zh=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function Y_(){const t=xn(),r=fs(zs().index,t);return($r(r)?r:t)[vi]}()}}return t})(),P0=(()=>{class t{static{this.\u0275prov=sr({token:t,providedIn:"root",factory:()=>null})}}return t})();const Rg={};function O0(t,i){if(null!==function Q(){return h}())throw new Tt(-602,!1)}const Jd=new Set;function oc(t){Jd.has(t)||(Jd.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function ip(...t){}class Ho{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Kc(!1),this.onMicrotaskEmpty=new Kc(!1),this.onStable=new Kc(!1),this.onError=new Kc(!1),typeof Zone>"u")throw new Tt(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!o&&r,d.shouldCoalesceRunChangeDetection=o,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function fb(){const t="function"==typeof ri.requestAnimationFrame;let i=ri[t?"requestAnimationFrame":"setTimeout"],r=ri[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&i&&r){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Ou(t){const i=()=>{!function Hc(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ri,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Pg(t),t.isCheckStableRunning=!0,Ng(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Pg(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,o,d,g,y,S)=>{if(function F0(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(S))return r.invokeTask(d,g,y,S);try{return Fu(t),r.invokeTask(d,g,y,S)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||t.shouldCoalesceRunChangeDetection)&&i(),pb(t)}},onInvoke:(r,o,d,g,y,S,k)=>{try{return Fu(t),r.invoke(d,g,y,S,k)}finally{t.shouldCoalesceRunChangeDetection&&i(),pb(t)}},onHasTask:(r,o,d,g)=>{r.hasTask(d,g),o===d&&("microTask"==g.change?(t._hasPendingMicrotasks=g.microTask,Pg(t),Ng(t)):"macroTask"==g.change&&(t.hasPendingMacrotasks=g.macroTask))},onHandleError:(r,o,d,g)=>(r.handleError(d,g),t.runOutsideAngular(()=>t.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ho.isInAngularZone())throw new Tt(909,!1)}static assertNotInAngularZone(){if(Ho.isInAngularZone())throw new Tt(909,!1)}run(i,r,o){return this._inner.run(i,r,o)}runTask(i,r,o,d){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+d,i,q_,ip,ip);try{return g.runTask(y,r,o)}finally{g.cancelTask(y)}}runGuarded(i,r,o){return this._inner.runGuarded(i,r,o)}runOutsideAngular(i){return this._outer.run(i)}}const q_={};function Ng(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Pg(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Fu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pb(t){t._nesting--,Ng(t)}var Jh=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Jh||{});const gb={destroy(){}};function Lu(t,i){const r=i?.injector??ur(nc);(i?.runOnServer||eu(r))&&r.get(eh).internalCallbacks.push(t)}function L0(t,i){!i&&xi();const r=i?.injector??ur(nc);if(!eu(r))return gb;oc("NgAfterNextRender");const o=r.get(eh),d=o.handler??=new Fg,g=i?.phase??Jh.MixedReadWrite,y=()=>{d.unregister(k),S()},S=r.get(id).onDestroy(y),k=Zn(r,()=>new Og(g,()=>{y(),t()}));return d.register(k),{destroy:y}}class Og{constructor(i,r){this.phase=i,this.callbackFn=r,this.zone=ur(Ho),this.errorHandler=ur(Bc,{optional:!0}),ur(qh,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(i){this.errorHandler?.handleError(i)}}}class Fg{constructor(){this.executingCallbacks=!1,this.buckets={[Jh.EarlyRead]:new Set,[Jh.Write]:new Set,[Jh.MixedReadWrite]:new Set,[Jh.Read]:new Set},this.deferredCallbacks=new Set}register(i){(this.executingCallbacks?this.deferredCallbacks:this.buckets[i.phase]).add(i)}unregister(i){this.buckets[i.phase].delete(i),this.deferredCallbacks.delete(i)}execute(){this.executingCallbacks=!0;for(const i of Object.values(this.buckets))for(const r of i)r.invoke();this.executingCallbacks=!1;for(const i of this.deferredCallbacks)this.buckets[i.phase].add(i);this.deferredCallbacks.clear()}destroy(){for(const i of Object.values(this.buckets))i.clear();this.deferredCallbacks.clear()}}let eh=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const o of r)o()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=sr({token:t,providedIn:"root",factory:()=>new t})}}return t})();function yd(t){return!!Fe(t)}function k0(t,i,r){let o=r?t.styles:null,d=r?t.classes:null,g=0;if(null!==i)for(let y=0;y<i.length;y++){const S=i[y];"number"==typeof S?g=S:1==g?d=Lr(d,S):2==g&&(o=Lr(o,S+": "+i[++y]+";"))}r?t.styles=o:t.stylesWithoutHost=o,r?t.classes=d:t.classesWithoutHost=d}class B0 extends np{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const r=et(i);return new V0(r,this.ngModule)}}function Bg(t){const i=[];for(const r in t){if(!t.hasOwnProperty(r))continue;const o=t[r];void 0!==o&&i.push({propName:Array.isArray(o)?o[0]:o,templateName:r})}return i}class U0{constructor(i,r){this.injector=i,this.parentInjector=r}get(i,r,o){o=ua(o);const d=this.injector.get(i,Rg,o);return d!==Rg||r===Rg?d:this.parentInjector.get(i,r,o)}}class V0 extends K_{get inputs(){const i=this.componentDef,r=i.inputTransforms,o=Bg(i.inputs);if(null!==r)for(const d of o)r.hasOwnProperty(d.propName)&&(d.transform=r[d.propName]);return o}get outputs(){return Bg(this.componentDef.outputs)}constructor(i,r){super(),this.componentDef=i,this.ngModule=r,this.componentType=i.type,this.selector=function cc(t){return t.map(nl).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!r}create(i,r,o,d){const g=de(null);try{let y=(d=d||this.ngModule)instanceof oe?d:d?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const S=y?new U0(i,y):i,k=S.get(ru,null);if(null===k)throw new Tt(407,!1);const he=S.get(P0,null),It={rendererFactory:k,sanitizer:he,inlineEffectRunner:null,afterRenderEventManager:S.get(eh,null),changeDetectionScheduler:S.get(qh,null)},Bt=k.createRenderer(null,this.componentDef),Zt=this.componentDef.selectors[0][0]||"div",Mn=o?function D_(t,i,r,o){const g=o.get(Xv,!1)||r===qs.ShadowDom,y=t.selectRootElement(i,g);return function $d(t){$f(t)}(y),y}(Bt,o,this.componentDef.encapsulation,S):zd(Bt,Zt,function bb(t){const i=t.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(Zt));let Wn=512;this.componentDef.signals?Wn|=4096:this.componentDef.onPush||(Wn|=16);let mi=null;null!==Mn&&(mi=Jc(Mn,S,!0));const On=jh(0,null,null,1,0,null,null,null,null,null,null),Qr=jd(null,On,null,Wn,null,null,It,Bt,S,null,mi);let fo,Ko;uu(Qr);try{const xl=this.componentDef;let Gc,am=null;xl.findHostDirectiveDefs?(Gc=[],am=new Map,xl.findHostDirectiveDefs(xl,Gc,am),Gc.push(xl)):Gc=[xl];const qw=function J_(t,i){const r=t[en],o=Er;return t[o]=i,Hh(r,o,2,"#host",null)}(Qr,Mn),B2=function ey(t,i,r,o,d,g,y){const S=d[en];!function fE(t,i,r,o){for(const d of t)i.mergedAttrs=ne(i.mergedAttrs,d.hostAttrs);null!==i.mergedAttrs&&(k0(i,i.mergedAttrs,!0),null!==r&&d0(o,r,i))}(o,t,i,y);let k=null;null!==i&&(k=Jc(i,d[Is]));const he=g.rendererFactory.createRenderer(i,r);let Ae=16;r.signals?Ae=4096:r.onPush&&(Ae=64);const Ze=jd(d,Wh(r),null,Ae,d[t.index],t,g,he,null,null,k);return S.firstCreatePass&&Xf(S,t,o.length-1),v0(d,Ze),d[t.index]=Ze}(qw,Mn,xl,Gc,Qr,It,Bt);Ko=ko(On,Er),Mn&&function ty(t,i,r,o){if(o)sa(t,r,["ng-version","17.3.12"]);else{const{attrs:d,classes:g}=function Ba(t){const i=[],r=[];let o=1,d=2;for(;o<t.length;){let g=t[o];if("string"==typeof g)2===d?""!==g&&i.push(g,t[++o]):8===d&&r.push(g);else{if(!Lo(d))break;d=g}o++}return{attrs:i,classes:r}}(i.selectors[0]);d&&sa(t,r,d),g&&g.length>0&&T_(t,r,g.join(" "))}}(Bt,xl,Mn,o),void 0!==r&&function pE(t,i,r){const o=t.projection=[];for(let d=0;d<i.length;d++){const g=r[d];o.push(null!=g?Array.from(g):null)}}(Ko,this.ngContentSelectors,r),fo=function H0(t,i,r,o,d,g){const y=zs(),S=d[en],k=Ma(y,d);m0(S,d,y,r,null,o);for(let Ae=0;Ae<r.length;Ae++)Pl(hu(d,S,y.directiveStart+Ae,y),d);nu(S,d,y),k&&Pl(k,d);const he=hu(d,S,y.directiveStart+y.componentOffset,y);if(t[lr]=d[lr]=he,null!==g)for(const Ae of g)Ae(he,i);return zh(S,y,d),he}(B2,xl,Gc,am,Qr,[ny]),Kh(On,Qr,null)}finally{Yu()}return new xb(this.componentType,fo,Fd(Ko,Qr),Qr,Ko)}finally{de(g)}}}class xb extends hb{constructor(i,r,o,d,g){super(),this.location=o,this._rootLView=d,this._tNode=g,this.previousInputValues=null,this.instance=r,this.hostView=this.changeDetectorRef=new Zf(d,void 0,!1),this.componentType=i}setInput(i,r){const o=this._tNode.inputs;let d;if(null!==o&&(d=o[i])){if(this.previousInputValues??=new Map,this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),r))return;const g=this._rootLView;gg(g[en],g,d,i,r),this.previousInputValues.set(i,r),qf(fs(this._tNode.index,g))}}get injector(){return new wa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function ny(){const t=zs();pf(xn()[en],t)}let op=(()=>{class t{static{this.__NG_ELEMENT_ID__=nh}}return t})();function nh(){return Vg(zs(),xn())}const mE=op,iy=class extends mE{constructor(i,r,o){super(),this._lContainer=i,this._hostTNode=r,this._hostLView=o}get element(){return Fd(this._hostTNode,this._hostLView)}get injector(){return new wa(this._hostTNode,this._hostLView)}get parentInjector(){const i=Zu(this._hostTNode,this._hostLView);if(_h(i)){const r=Eu(i,this._hostLView),o=du(i);return new wa(r[en].data[o+8],r)}return new wa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const r=Ug(this._lContainer);return null!==r&&r[i]||null}get length(){return this._lContainer.length-ro}createEmbeddedView(i,r,o){let d,g;"number"==typeof o?d=o:null!=o&&(d=o.index,g=o.injector);const y=_d(this._lContainer,i.ssrId),S=i.createEmbeddedViewImpl(r||{},g,y);return this.insertImpl(S,d,pd(this._hostTNode,y)),S}createComponent(i,r,o,d,g){const y=i&&!function Kt(t){return"function"==typeof t}(i);let S;if(y)S=r;else{const Zt=r||{};S=Zt.index,o=Zt.injector,d=Zt.projectableNodes,g=Zt.environmentInjector||Zt.ngModuleRef}const k=y?i:new V0(et(i)),he=o||this.parentInjector;if(!g&&null==k.ngModule){const Mn=(y?he:this.parentInjector).get(oe,null);Mn&&(g=Mn)}const Ae=et(k.componentType??{}),Ze=_d(this._lContainer,Ae?.id??null),Bt=k.create(he,d,Ze?.firstChild??null,g);return this.insertImpl(Bt.hostView,S,pd(this._hostTNode,Ze)),Bt}insert(i,r){return this.insertImpl(i,r,!0)}insertImpl(i,r,o){const d=i._lView;if(function mv(t){return ea(t[ui])}(d)){const S=this.indexOf(i);if(-1!==S)this.detach(S);else{const k=d[ui],he=new iy(k,k[zr],k[ui]);he.detach(he.indexOf(i))}}const g=this._adjustIndex(r),y=this._lContainer;return Xd(y,d,g,o),i.attachToViewContainerRef(),La(ku(y),g,i),i}move(i,r){return this.insert(i,r)}indexOf(i){const r=Ug(this._lContainer);return null!==r?r.indexOf(i):-1}remove(i){const r=this._adjustIndex(i,-1),o=ud(this._lContainer,r);o&&(vo(ku(this._lContainer),r),Vf(o[en],o))}detach(i){const r=this._adjustIndex(i,-1),o=ud(this._lContainer,r);return o&&null!=vo(ku(this._lContainer),r)?new Zf(o):null}_adjustIndex(i,r=0){return i??this.length+r}};function Ug(t){return t[8]}function ku(t){return t[8]||(t[8]=[])}function Vg(t,i){let r;const o=i[t.index];return ea(o)?r=o:(r=$h(o,i,null,t),i[t.index]=r,v0(i,r)),xd(r,i,t,o),new iy(r,t,i)}let xd=function Ed(t,i,r,o){if(t[hl])return;let d;d=8&r.type?Rs(o):function Eb(t,i){const r=t[vi],o=r.createComment(""),d=Ma(i,t);return dd(r,l0(r,d),o,function M_(t,i){return t.nextSibling(i)}(r,d),!1),o}(i,r),t[hl]=d},ry=()=>!1;function sy(t,i,r){return ry(t,i,r)}class ay{constructor(i){this.queryList=i,this.matches=null}clone(){return new ay(this.queryList)}setDirty(){this.queryList.setDirty()}}class ly{constructor(i=[]){this.queries=i}createEmbeddedView(i){const r=i.queries;if(null!==r){const o=null!==i.contentQueries?i.contentQueries[0]:r.length,d=[];for(let g=0;g<o;g++){const y=r.getByIndex(g);d.push(this.queries[y.indexInDeclarationView].clone())}return new ly(d)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}finishViewCreation(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let r=0;r<this.queries.length;r++)null!==py(i,r).matches&&this.queries[r].setDirty()}}class cy{constructor(i,r,o=null){this.flags=r,this.read=o,this.predicate="string"==typeof i?function gE(t){return t.split(",").map(i=>i.trim())}(i):i}}class ap{constructor(i=[]){this.queries=i}elementStart(i,r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(i,r)}elementEnd(i){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(i)}embeddedTView(i){let r=null;for(let o=0;o<this.length;o++){const d=null!==r?r.length:0,g=this.getByIndex(o).embeddedTView(i,d);g&&(g.indexInDeclarationView=o,null!==r?r.push(g):r=[g])}return null!==r?new ap(r):null}template(i,r){for(let o=0;o<this.queries.length;o++)this.queries[o].template(i,r)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Hg{constructor(i,r=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(i,r){this.isApplyingToNode(r)&&this.matchTNode(i,r)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,r){this.elementStart(i,r)}embeddedTView(i,r){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,r),new Hg(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1&~this.metadata.flags){const r=this._declarationNodeIndex;let o=i.parent;for(;null!==o&&8&o.type&&o.index!==r;)o=o.parent;return r===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(i,r){const o=this.metadata.predicate;if(Array.isArray(o))for(let d=0;d<o.length;d++){const g=o[d];this.matchTNodeWithReadOption(i,r,zg(r,g)),this.matchTNodeWithReadOption(i,r,Ju(r,i,g,!1,!1))}else o===Jf?4&r.type&&this.matchTNodeWithReadOption(i,r,-1):this.matchTNodeWithReadOption(i,r,Ju(r,i,o,!1,!1))}matchTNodeWithReadOption(i,r,o){if(null!==o){const d=this.metadata.read;if(null!==d)if(d===Ch||d===op||d===Jf&&4&r.type)this.addMatch(r.index,-2);else{const g=Ju(r,i,d,!1,!1);null!==g&&this.addMatch(r.index,g)}else this.addMatch(r.index,o)}}addMatch(i,r){null===this.matches?this.matches=[i,r]:this.matches.push(i,r)}}function zg(t,i){const r=t.localNames;if(null!==r)for(let o=0;o<r.length;o+=2)if(r[o]===i)return r[o+1];return null}function wb(t,i,r,o){return-1===r?function Mb(t,i){return 11&t.type?Fd(t,i):4&t.type?E0(t,i):null}(i,t):-2===r?function Cb(t,i,r){return r===Ch?Fd(i,t):r===Jf?E0(i,t):r===op?Vg(i,t):void 0}(t,i,o):hu(t,t[en],r,i)}function uy(t,i,r,o){const d=i[Ea].queries[o];if(null===d.matches){const g=t.data,y=r.matches,S=[];for(let k=0;null!==y&&k<y.length;k+=2){const he=y[k];S.push(he<0?null:wb(i,g[he],y[k+1],r.metadata.read))}d.matches=S}return d.matches}function Gg(t,i,r,o){const d=t.queries.getByIndex(r),g=d.matches;if(null!==g){const y=uy(t,i,d,r);for(let S=0;S<g.length;S+=2){const k=g[S];if(k>0)o.push(y[S/2]);else{const he=g[S+1],Ae=i[-k];for(let Ze=ro;Ze<Ae.length;Ze++){const It=Ae[Ze];It[dc]===It[ui]&&Gg(It[en],It,he,o)}if(null!==Ae[gr]){const Ze=Ae[gr];for(let It=0;It<Ze.length;It++){const Bt=Ze[It];Gg(Bt[en],Bt,he,o)}}}}}return o}function Wg(t,i){return t[Ea].queries[i].queryList}function dy(t,i,r){const o=new wf(!(4&~r));return function Nu(t,i,r,o){const d=Xh(i);d.push(r),t.firstCreatePass&&mg(t).push(o,d.length-1)}(t,i,o,o.destroy),(i[Ea]??=new ly).queries.push(new ay(o))-1}function hy(t,i,r){const o=xs();return o.firstCreatePass&&(fy(o,new cy(t,i,r),-1),!(2&~i)&&(o.staticViewQueries=!0)),dy(o,xn(),i)}function fy(t,i,r){null===t.queries&&(t.queries=new ap),t.queries.track(new Hg(i,r))}function py(t,i){return t.queries.getByIndex(i)}function jg(t,i){const r=t[en],o=py(r,i);return o.crossesNgTemplate?Gg(r,t,i,[]):uy(r,t,o,i)}function Db(t,i){oc("NgSignals");const r=function Oe(t){const i=Object.create(Mt);i.value=t;const r=()=>(K(i),i.value);return r[ie]=i,r}(t),o=r[ie];return i?.equal&&(o.equal=i.equal),r.set=d=>Ut(o,d),r.update=d=>function ze(t,i){Ce()||Ve(),Ut(t,i(t.value))}(o,d),r.asReadonly=$g.bind(r),r}function $g(){const t=this[ie];if(void 0===t.readonlyFn){const i=()=>this();i[ie]=t,t.readonlyFn=i}return t.readonlyFn}function z0(t,i){let r;const o=le(()=>{r._dirtyCounter();const d=function gy(t,i){const r=t._lView,o=t._queryIndex;if(void 0===r||void 0===o||4&r[bn])return i?void 0:jr;const d=Wg(r,o),g=jg(r,o);return d.reset(g,Mf),i?d.first:d._changesDetected||void 0===t._flatValue?t._flatValue=d.toArray():t._flatValue}(r,t);if(i&&void 0===d)throw new Tt(-951,!1);return d});return r=o[ie],r._dirtyCounter=Db(0),r._flatValue=void 0,o}function Nb(t,i){return function G0(){return z0(!0,!1)}()}const W0=(Nb.required=function vy(t,i){return function Ib(){return z0(!0,!0)}()},Nb);function up(t){let i=function _y(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),r=!0;const o=[t];for(;i;){let d;if(rl(t))d=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Tt(903,!1);d=i.\u0275dir}if(d){if(r){o.push(d);const y=t;y.inputs=Q0(t.inputs),y.inputTransforms=Q0(t.inputTransforms),y.declaredInputs=Q0(t.declaredInputs),y.outputs=Q0(t.outputs);const S=d.hostBindings;S&&Wb(t,S);const k=d.viewQuery,he=d.contentQueries;if(k&&zb(t,k),he&&Gb(t,he),yy(t,d),Cr(t.outputs,d.outputs),rl(d)&&d.data.animation){const Ae=t.data;Ae.animation=(Ae.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let y=0;y<g.length;y++){const S=g[y];S&&S.ngInherit&&S(t),S===up&&(r=!1)}}i=Object.getPrototypeOf(i)}!function qg(t){let i=0,r=null;for(let o=t.length-1;o>=0;o--){const d=t[o];d.hostVars=i+=d.hostVars,d.hostAttrs=ne(d.hostAttrs,r=ne(r,d.hostAttrs))}}(o)}function yy(t,i){for(const r in i.inputs){if(!i.inputs.hasOwnProperty(r)||t.inputs.hasOwnProperty(r))continue;const o=i.inputs[r];if(void 0!==o&&(t.inputs[r]=o,t.declaredInputs[r]=i.declaredInputs[r],null!==i.inputTransforms)){const d=Array.isArray(o)?o[0]:o;if(!i.inputTransforms.hasOwnProperty(d))continue;t.inputTransforms??={},t.inputTransforms[d]=i.inputTransforms[d]}}}function Q0(t){return t===ra?{}:t===jr?[]:t}function zb(t,i){const r=t.viewQuery;t.viewQuery=r?(o,d)=>{i(o,d),r(o,d)}:i}function Gb(t,i){const r=t.contentQueries;t.contentQueries=r?(o,d,g)=>{i(o,d,g),r(o,d,g)}:i}function Wb(t,i){const r=t.hostBindings;t.hostBindings=r?(o,d)=>{i(o,d),r(o,d)}:i}function by(t){const i=r=>{const o=(Array.isArray(t)?t:t()).map(d=>"function"==typeof d?{directive:At(d),inputs:ra,outputs:ra}:{directive:At(d.directive),inputs:Ey(d.inputs),outputs:Ey(d.outputs)});null===r.hostDirectives?(r.findHostDirectiveDefs=xy,r.hostDirectives=o):r.hostDirectives.unshift(...o)};return i.ngInherit=!0,i}function xy(t,i,r){if(null!==t.hostDirectives)for(const o of t.hostDirectives){const d=Se(o.directive);Kb(d.declaredInputs,o.inputs),xy(d,i,r),r.set(d,o),i.push(d)}}function Ey(t){if(void 0===t||0===t.length)return ra;const i={};for(let r=0;r<t.length;r+=2)i[t[r]]=t[r+1];return i}function Kb(t,i){for(const r in i)i.hasOwnProperty(r)&&(t[i[r]]=t[r])}function e(t){const i=t.inputConfig,r={};for(const o in i)if(i.hasOwnProperty(o)){const d=i[o];Array.isArray(d)&&d[3]&&(r[o]=d[3])}t.inputTransforms=r}class n{}class s{}function a(t,i){return new p(t,i??null,[])}class p extends n{constructor(i,r,o){super(),this._parent=r,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new B0(this);const d=Fe(i);this._bootstrapComponents=Sc(d.bootstrap),this._r3Injector=Mm(i,r,[{provide:n,useValue:this},{provide:np,useValue:this.componentFactoryResolver},...o],Wr(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class v extends s{constructor(i){super(),this.moduleType=i}create(i){return new p(this.moduleType,i,[])}}class E extends n{constructor(i){super(),this.componentFactoryResolver=new B0(this),this.instance=null;const r=new De([...i.providers,{provide:n,useValue:this},{provide:np,useValue:this.componentFactoryResolver}],i.parent||F(),i.debugName,new Set(["environment"]));this.injector=r,i.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function R(t,i,r=null){return new E({providers:t,parent:i,debugName:r,runEnvironmentInitializers:!0}).injector}let B=(()=>{class t{constructor(){this.cachedInjectors=new Map}getOrCreateInjector(r,o,d,g){if(!this.cachedInjectors.has(r)){const y=d.length>0?R(d,o,g):null;this.cachedInjectors.set(r,y)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=sr({token:t,providedIn:"environment",factory:()=>new t})}}return t})(),Z=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Gt.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=sr({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Le(t){return!!dt(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function dt(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function bt(t,i,r){return t[i]=r}function $e(t,i,r){return!Object.is(t[i],r)&&(t[i]=r,!0)}function Nt(t,i,r,o){const d=$e(t,i,r);return $e(t,i+1,o)||d}function _n(t,i,r,o,d,g,y,S){const k=xn(),he=xs(),Ae=t+Er,Ze=he.firstCreatePass?function kn(t,i,r,o,d,g,y,S,k){const he=i.consts,Ae=Hh(i,t,4,y||null,Oc(he,S));N_(i,r,Ae,Oc(he,k)),pf(i,Ae);const Ze=Ae.tView=jh(2,Ae,o,d,g,i.directiveRegistry,i.pipeRegistry,null,i.schemas,he,null);return null!==i.queries&&(i.queries.template(i,Ae),Ze.queries=i.queries.embeddedTView(Ae)),Ae}(Ae,he,k,i,r,o,d,g,y):he.data[Ae];jo(Ze,!1);const It=ti(he,k,Ze,t);mh()&&Iu(he,k,It,Ze),Pl(It,k);const Bt=$h(It,k,It,Ze);return k[Ae]=Bt,v0(k,Bt),sy(Bt,Ze,k),ta(Ze)&&Gh(he,k,Ze),null!=y&&f0(k,Ze,S),_n}let ti=function wn(t,i,r,o){return ec(!0),i[vi].createComment("")};var _i=function(t){return t[t.NOT_STARTED=0]="NOT_STARTED",t[t.IN_PROGRESS=1]="IN_PROGRESS",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t}(_i||{});const ps=0,Eo=1;var En=function(t){return t[t.Placeholder=0]="Placeholder",t[t.Loading=1]="Loading",t[t.Complete=2]="Complete",t[t.Error=3]="Error",t}(En||{}),ci=function(t){return t[t.Initial=-1]="Initial",t}(ci||{});const ji=0,gi=1,Sr=2,Xr=3,Jr=4,eo=5;var Bn=function(t){return t[t.Manual=0]="Manual",t[t.Playthrough=1]="Playthrough",t}(Bn||{});function ni(t,i,r){const o=1===t?eo:Jr;null===i[o]&&(i[o]=[]),i[o].push(r)}function Et(t,i){const r=1===t?eo:Jr,o=i[r];if(null!==o){for(const d of o)d();i[r]=null}}function vr(t){Et(1,t),Et(0,t)}function jn(t){return t+1}function Bi(t,i){return t[jn(i.index)]}function dr(t,i){const r=jn(i.index);return t.data[r]}function Qe(t,i){return i===En.Placeholder?t.placeholderBlockConfig?.[ps]??null:i===En.Loading?t.loadingBlockConfig?.[ps]??null:null}function sn(t){return t.loadingBlockConfig?.[Eo]??null}function In(t,i){if(!t||0===t.length)return i;const r=new Set(t);for(const o of i)r.add(o);return t.length===r.size?t:Array.from(r)}const Xn=new WeakMap;let Gr=null,Yi=0;class Gs{constructor(){this.callbacks=new Set,this.listener=()=>{for(const i of this.callbacks)i()}}}function Wt(t,i,r){const o=r.get(Ho);let d=Xn.get(t);return Gr=Gr||o.runOutsideAngular(()=>new IntersectionObserver(g=>{for(const y of g)y.isIntersecting&&Xn.has(y.target)&&o.run(Xn.get(y.target).listener)})),d||(d=new Gs,o.runOutsideAngular(()=>Gr.observe(t)),Xn.set(t,d),Yi++),d.callbacks.add(i),()=>{Xn.has(t)&&(d.callbacks.delete(i),0===d.callbacks.size&&(Gr?.unobserve(t),Xn.delete(t),Yi--),0===Yi&&(Gr?.disconnect(),Gr=null))}}let su=(()=>{class t{constructor(){this.executingCallbacks=!1,this.timeoutId=null,this.invokeTimerAt=null,this.current=[],this.deferred=[]}add(r,o){this.addToQueue(this.executingCallbacks?this.deferred:this.current,Date.now()+r,o),this.scheduleTimer()}remove(r){const{current:o,deferred:d}=this;-1===this.removeFromQueue(o,r)&&this.removeFromQueue(d,r),0===o.length&&0===d.length&&this.clearTimeout()}addToQueue(r,o,d){let g=r.length;for(let y=0;y<r.length;y+=2)if(r[y]>o){g=y;break}Ul(r,g,o,d)}removeFromQueue(r,o){let d=-1;for(let g=0;g<r.length;g+=2)if(r[g+1]===o){d=g;break}return d>-1&&ul(r,d,2),d}scheduleTimer(){const r=()=>{this.clearTimeout(),this.executingCallbacks=!0;const d=[...this.current],g=Date.now();for(let S=0;S<d.length;S+=2){const he=d[S+1];if(!(d[S]<=g))break;he()}let y=-1;for(let S=0;S<this.current.length&&this.current[S]<=g;S+=2)y=S+1;if(y>=0&&ul(this.current,0,y+1),this.executingCallbacks=!1,this.deferred.length>0){for(let S=0;S<this.deferred.length;S+=2)this.addToQueue(this.current,this.deferred[S],this.deferred[S+1]);this.deferred.length=0}this.scheduleTimer()};if(this.current.length>0){const d=Date.now(),g=this.current[0];if(null===this.timeoutId||this.invokeTimerAt&&this.invokeTimerAt-g>16){this.clearTimeout();const y=Math.max(g-d,16);this.invokeTimerAt=g,this.timeoutId=setTimeout(r,y)}}}clearTimeout(){null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}ngOnDestroy(){this.clearTimeout(),this.current.length=0,this.deferred.length=0}static{this.\u0275prov=sr({token:t,providedIn:"root",factory:()=>new t})}}return t})();const Sy=new ht("");let Bu=null;function q0(t,i,r,o){const d=t.consts;null!=r&&(i.placeholderBlockConfig=Oc(d,r)),null!=o&&(i.loadingBlockConfig=Oc(d,o)),null===Bu&&(Bu=Mr)}function Zg(t,i,r,o,d,g,y,S,k){const he=xn(),Ae=xs(),Ze=t+Er;if(_n(t,null,0,0),Ae.firstCreatePass){oc("NgDefer");const Wn={primaryTmplIndex:i,loadingTmplIndex:o??null,placeholderTmplIndex:d??null,errorTmplIndex:g??null,placeholderBlockConfig:null,loadingBlockConfig:null,dependencyResolverFn:r??null,loadingState:_i.NOT_STARTED,loadingPromise:null,providers:null};k?.(Ae,Wn,S,y),function Xi(t,i,r){const o=jn(i);t.data[o]=r}(Ae,Ze,Wn)}const It=zs();sy(he[Ze],It,he);const Zt=[null,ci.Initial,null,null,null,null];!function Ei(t,i,r){t[jn(i)]=r}(he,Ze,Zt);const Mn=()=>vr(Zt);ni(0,Zt,()=>uh(he,Mn)),Nl(he,Mn)}function an(t,i){const r=xn(),o=zs();(function Ks(t,i){nr(En.Placeholder,i,t[i.index])})(r,o),function Fn(t,i,r,o,d,g,y){const S=t[Is];Lu(function k(){if($c(t))return;const he=Bi(t,i),Ae=he[gi];if(Ae!==ci.Initial&&Ae!==En.Placeholder)return;const Ze=function Ni(t,i,r){return null==r?t:r>=0?mp(r,t):t[i.index][ro]??null}(t,i,o);if(!Ze)return void Lu(k,{injector:S});if($c(Ze))return;const It=function Tn(t,i){return Ha(Er+i,t)}(Ze,r),Bt=d(It,()=>{t!==Ze&&uh(Ze,Bt),g()},S);t!==Ze&&Nl(Ze,Bt),ni(y,he,Bt)},{injector:S})}(r,o,t,i,Wt,()=>function ac(t,i){const r=t[en],o=t[i.index];if(!function Y0(t){return t.get(Sy,null,{optional:!0})?.behavior!==Bn.Manual&&eu(t)}(t[Is]))return;const g=Bi(t,i),y=dr(r,i);switch(vr(g),y.loadingState){case _i.NOT_STARTED:nr(En.Loading,i,o),function Ll(t,i,r){const o=i[Is],d=i[en];if(t.loadingState!==_i.NOT_STARTED)return t.loadingPromise??Promise.resolve();const g=Bi(i,r),y=function Hn(t,i){return ko(t,i.primaryTmplIndex+Er)}(d,t);t.loadingState=_i.IN_PROGRESS,Et(1,g);let S=t.dependencyResolverFn;const k=o.get(Z),he=k.add();return S?(t.loadingPromise=Promise.allSettled(S()).then(Ae=>{let Ze=!1;const It=[],Bt=[];for(const Zt of Ae){if("fulfilled"!==Zt.status){Ze=!0;break}{const Mn=Zt.value,Wn=et(Mn)||Se(Mn);if(Wn)It.push(Wn);else{const mi=q(Mn);mi&&Bt.push(mi)}}}if(t.loadingPromise=null,k.remove(he),Ze){if(t.loadingState=_i.FAILED,null===t.errorTmplIndex){Zm(i);const Mn=new Tt(750,!1);Kf(i,Mn)}}else{t.loadingState=_i.COMPLETE;const Zt=y.tView;if(It.length>0){Zt.directiveRegistry=In(Zt.directiveRegistry,It);const Wn=ws(!1,...It.map(mi=>mi.type));t.providers=Wn}Bt.length>0&&(Zt.pipeRegistry=In(Zt.pipeRegistry,Bt))}}),t.loadingPromise):(t.loadingPromise=Promise.resolve().then(()=>{t.loadingPromise=null,t.loadingState=_i.COMPLETE,k.remove(he)}),t.loadingPromise)}(y,t,i),y.loadingState===_i.IN_PROGRESS&&wr(y,i,o);break;case _i.IN_PROGRESS:nr(En.Loading,i,o),wr(y,i,o);break;case _i.COMPLETE:nr(En.Complete,i,o);break;case _i.FAILED:nr(En.Error,i,o)}}(r,o),0)}function nr(t,i,r,o=!1){const d=r[ui],g=d[en];if($c(d))return;const y=Bi(d,i);if(Xo(y[gi],t)&&Xo(y[ji]??-1,t)){const k=d[Is],he=dr(g,i),Ze=o||!eu(k)||null===sn(he)&&null===Qe(he,En.Loading)&&!Qe(he,En.Placeholder)?_s:Bu;try{Ze(t,y,r,i,d)}catch(It){Kf(d,It)}}}function _s(t,i,r,o,d){const g=function ft(t,i,r){const d=dr(i[en],r);switch(t){case En.Complete:return d.primaryTmplIndex;case En.Loading:return d.loadingTmplIndex;case En.Error:return d.errorTmplIndex;case En.Placeholder:return d.placeholderTmplIndex;default:return null}}(t,d,o);if(null!==g){i[gi]=t;const y=d[en],k=ko(y,g+Er),he=0;let Ae;if(Kd(r,he),t===En.Complete){const Bt=dr(y,o),Zt=Bt.providers;if(Zt&&Zt.length>0){const Mn=d[Is],Wn=function hr(t){return t instanceof U0&&"function"==typeof t.injector.__ngOutletInjector}(Mn),mi=Wn?Mn:Mn.get(oe);Ae=mi.get(B).getOrCreateInjector(Bt,mi,Zt,""),Wn&&(Ae=function cs(t,i){return t.injector.__ngOutletInjector(i)}(Mn,Ae))}}const Ze=_d(r,k.tView.ssrId),It=fd(d,k,null,{dehydratedView:Ze,injector:Ae});Xd(r,It,he,pd(k,Ze)),qf(It)}}function Mr(t,i,r,o,d){const g=Date.now(),S=dr(d[en],o);if(null===i[Sr]||i[Sr]<=g){i[Sr]=null;const k=sn(S),he=null!==i[Xr];if(t!==En.Loading||null===k||he){t>En.Loading&&he&&(i[Xr](),i[Xr]=null,i[ji]=null),_s(t,i,r,o,d);const Ae=Qe(S,t);null!==Ae&&(i[Sr]=g+Ae,Xs(Ae,i,o,r,d))}else{i[ji]=t;const Ae=Xs(k,i,o,r,d);i[Xr]=Ae}}else i[ji]=t}function Xs(t,i,r,o,d){return function So(t,i,r){const d=r[Is].get(su);return d.add(t,i),()=>d.remove(i)}(t,()=>{const y=i[ji];i[Sr]=null,i[ji]=null,null!==y&&nr(y,r,o)},d)}function Xo(t,i){return t<i}function wr(t,i,r){t.loadingPromise.then(()=>{t.loadingState===_i.COMPLETE?nr(En.Complete,i,r):t.loadingState===_i.FAILED&&nr(En.Error,i,r)})}function ho(t,i,r,o){const d=xn();return $e(d,Jl(),i)&&(xs(),iu(Vo(),d,t,i,r,o)),ho}function ou(t,i,r,o){return $e(t,Jl(),r)?i+zi(r)+o:ns}function ll(t,i,r,o,d,g){const S=Nt(t,function yc(){return cr.lFrame.bindingIndex}(),r,d);return Fc(2),S?i+zi(r)+o+zi(d)+g:ns}function Dy(t,i){return t<<17|i<<2}function tf(t){return t>>17&32767}function Zb(t){return 2|t}function dp(t){return(131068&t)>>2}function Jb(t,i){return-131069&t|i<<2}function ex(t){return 1|t}function IE(t,i,r,o){const d=t[r+1],g=null===i;let y=o?tf(d):dp(d),S=!1;for(;0!==y&&(!1===S||g);){const he=t[y+1];mC(t[y],i)&&(S=!0,t[y+1]=o?ex(he):Zb(he)),y=o?tf(he):dp(he)}S&&(t[r+1]=o?Zb(d):ex(d))}function mC(t,i){return null===t||null==i||(Array.isArray(t)?t[1]:t)===i||!(!Array.isArray(t)||"string"!=typeof i)&&Co(t,i)>=0}const yl={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function RE(t){return t.substring(yl.key,yl.keyEnd)}function NE(t,i){const r=yl.textEnd;return r===i?-1:(i=yl.keyEnd=function yC(t,i,r){for(;i<r&&t.charCodeAt(i)>32;)i++;return i}(t,yl.key=i,r),em(t,i,r))}function em(t,i,r){for(;i<r&&t.charCodeAt(i)<=32;)i++;return i}function tx(t,i,r){const o=xn();return $e(o,Jl(),i)&&gl(xs(),Vo(),o,t,i,o[vi],r,!1),tx}function nx(t,i,r,o,d){const y=d?"class":"style";gg(t,r,i.inputs[y],y,o)}function ix(t,i,r){return Vu(t,i,r,!1),ix}function rx(t,i){return Vu(t,i,null,!0),rx}function kE(t){Hu(DC,wd,t,!0)}function wd(t,i){for(let r=function vC(t){return function OE(t){yl.key=0,yl.keyEnd=0,yl.value=0,yl.valueEnd=0,yl.textEnd=t.length}(t),NE(t,em(t,0,yl.textEnd))}(i);r>=0;r=NE(i,r))yo(t,RE(i),!0)}function Vu(t,i,r,o){const d=xn(),g=xs(),y=Fc(2);g.firstUpdatePass&&UE(g,t,y,o),i!==ns&&$e(d,y,i)&&HE(g,g.data[fl()],d,d[vi],t,d[y+1]=function IC(t,i){return null==t||""===t||("string"==typeof i?t+=i:"object"==typeof t&&(t=Wr(Tu(t)))),t}(i,r),o,y)}function Hu(t,i,r,o){const d=xs(),g=Fc(2);d.firstUpdatePass&&UE(d,null,g,o);const y=xn();if(r!==ns&&$e(y,g,r)){const S=d.data[fl()];if(GE(S,o)&&!BE(d,g)){let k=o?S.classesWithoutHost:S.stylesWithoutHost;null!==k&&(r=Lr(k,r||"")),nx(d,S,y,r,o)}else!function AC(t,i,r,o,d,g,y,S){d===ns&&(d=jr);let k=0,he=0,Ae=0<d.length?d[0]:null,Ze=0<g.length?g[0]:null;for(;null!==Ae||null!==Ze;){const It=k<d.length?d[k+1]:void 0,Bt=he<g.length?g[he+1]:void 0;let Mn,Zt=null;Ae===Ze?(k+=2,he+=2,It!==Bt&&(Zt=Ze,Mn=Bt)):null===Ze||null!==Ae&&Ae<Ze?(k+=2,Zt=Ae):(he+=2,Zt=Ze,Mn=Bt),null!==Zt&&HE(t,i,r,o,Zt,Mn,y,S),Ae=k<d.length?d[k]:null,Ze=he<g.length?g[he]:null}}(d,S,y,y[vi],y[g+1],y[g+1]=function TC(t,i,r){if(null==r||""===r)return jr;const o=[],d=Tu(r);if(Array.isArray(d))for(let g=0;g<d.length;g++)t(o,d[g],!0);else if("object"==typeof d)for(const g in d)d.hasOwnProperty(g)&&t(o,g,d[g]);else"string"==typeof d&&i(o,d);return o}(t,i,r),o,g)}}function BE(t,i){return i>=t.expandoStartIndex}function UE(t,i,r,o){const d=t.data;if(null===d[r+1]){const g=d[fl()],y=BE(t,r);GE(g,o)&&null===i&&!y&&(i=!1),i=function SC(t,i,r,o){const d=Qu(t);let g=o?i.residualClasses:i.residualStyles;if(null===d)0===(o?i.classBindings:i.styleBindings)&&(r=ev(r=sx(null,t,i,r,o),i.attrs,o),g=null);else{const y=i.directiveStylingLast;if(-1===y||t[y]!==d)if(r=sx(d,t,i,r,o),null===g){let k=function MC(t,i,r){const o=r?i.classBindings:i.styleBindings;if(0!==dp(o))return t[tf(o)]}(t,i,o);void 0!==k&&Array.isArray(k)&&(k=sx(null,t,i,k[1],o),k=ev(k,i.attrs,o),function wC(t,i,r,o){t[tf(r?i.classBindings:i.styleBindings)]=o}(t,i,o,k))}else g=function CC(t,i,r){let o;const d=i.directiveEnd;for(let g=1+i.directiveStylingLast;g<d;g++)o=ev(o,t[g].hostAttrs,r);return ev(o,i.attrs,r)}(t,i,o)}return void 0!==g&&(o?i.residualClasses=g:i.residualStyles=g),r}(d,g,i,o),function fC(t,i,r,o,d,g){let y=g?i.classBindings:i.styleBindings,S=tf(y),k=dp(y);t[o]=r;let Ae,he=!1;if(Array.isArray(r)?(Ae=r[1],(null===Ae||Co(r,Ae)>0)&&(he=!0)):Ae=r,d)if(0!==k){const It=tf(t[S+1]);t[o+1]=Dy(It,S),0!==It&&(t[It+1]=Jb(t[It+1],o)),t[S+1]=function dC(t,i){return 131071&t|i<<17}(t[S+1],o)}else t[o+1]=Dy(S,0),0!==S&&(t[S+1]=Jb(t[S+1],o)),S=o;else t[o+1]=Dy(k,0),0===S?S=o:t[k+1]=Jb(t[k+1],o),k=o;he&&(t[o+1]=Zb(t[o+1])),IE(t,Ae,o,!0),IE(t,Ae,o,!1),function pC(t,i,r,o,d){const g=d?t.residualClasses:t.residualStyles;null!=g&&"string"==typeof i&&Co(g,i)>=0&&(r[o+1]=ex(r[o+1]))}(i,Ae,t,o,g),y=Dy(S,k),g?i.classBindings=y:i.styleBindings=y}(d,g,i,r,y,o)}}function sx(t,i,r,o,d){let g=null;const y=r.directiveEnd;let S=r.directiveStylingLast;for(-1===S?S=r.directiveStart:S++;S<y&&(g=i[S],o=ev(o,g.hostAttrs,d),g!==t);)S++;return null!==t&&(r.directiveStylingLast=S),o}function ev(t,i,r){const o=r?1:2;let d=-1;if(null!==i)for(let g=0;g<i.length;g++){const y=i[g];"number"==typeof y?d=y:d===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),yo(t,y,!!r||i[++g]))}return void 0===t?null:t}function DC(t,i,r){const o=String(i);""!==o&&!o.includes(" ")&&yo(t,o,r)}function HE(t,i,r,o,d,g,y,S){if(!(3&i.type))return;const k=t.data,he=k[S+1],Ae=function hC(t){return!(1&~t)}(he)?zE(k,i,r,d,dp(he),y):void 0;Ay(Ae)||(Ay(g)||function uC(t){return!(2&~t)}(he)&&(g=zE(k,null,r,d,S,y)),function V1(t,i,r,o,d){if(i)d?t.addClass(r,o):t.removeClass(r,o);else{let g=-1===o.indexOf("-")?void 0:Oh.DashCase;null==d?t.removeStyle(r,o,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Oh.Important),t.setStyle(r,o,d,g))}}(o,y,Ha(fl(),r),d,g))}function zE(t,i,r,o,d,g){const y=null===i;let S;for(;d>0;){const k=t[d],he=Array.isArray(k),Ae=he?k[1]:k,Ze=null===Ae;let It=r[d+1];It===ns&&(It=Ze?jr:void 0);let Bt=Ze?Ja(It,o):Ae===o?It:void 0;if(he&&!Ay(Bt)&&(Bt=Ja(k,o)),Ay(Bt)&&(S=Bt,y))return S;const Zt=t[d+1];d=y?tf(Zt):dp(Zt)}if(null!==i){let k=g?i.residualClasses:i.residualStyles;null!=k&&(S=Ja(k,o))}return S}function Ay(t){return void 0!==t}function GE(t,i){return!!(t.flags&(i?8:16))}function WE(t,i,r){Hu(yo,wd,ou(xn(),t,i,r),!0)}class VC{destroy(i){}updateValue(i,r){}swap(i,r){const o=Math.min(i,r),d=Math.max(i,r),g=this.detach(d);if(d-o>1){const y=this.detach(o);this.attach(o,g),this.attach(d,y)}else this.attach(o,g)}move(i,r){this.attach(r,this.detach(i))}}function ox(t,i,r,o,d){return t===r&&Object.is(i,o)?1:Object.is(d(t,i),d(r,o))?-1:0}function ax(t,i,r,o){return!(void 0===i||!i.has(o)||(t.attach(r,i.get(o)),i.delete(o),0))}function jE(t,i,r,o,d){if(ax(t,i,o,r(o,d)))t.updateValue(o,d);else{const g=t.create(o,d);t.attach(o,g)}}function $E(t,i,r,o){const d=new Set;for(let g=i;g<=r;g++)d.add(o(g,t.at(g)));return d}class XE{constructor(){this.kvMap=new Map,this._vMap=void 0}has(i){return this.kvMap.has(i)}delete(i){if(!this.has(i))return!1;const r=this.kvMap.get(i);return void 0!==this._vMap&&this._vMap.has(r)?(this.kvMap.set(i,this._vMap.get(r)),this._vMap.delete(r)):this.kvMap.delete(i),!0}get(i){return this.kvMap.get(i)}set(i,r){if(this.kvMap.has(i)){let o=this.kvMap.get(i);void 0===this._vMap&&(this._vMap=new Map);const d=this._vMap;for(;d.has(o);)o=d.get(o);d.set(o,r)}else this.kvMap.set(i,r)}forEach(i){for(let[r,o]of this.kvMap)if(i(o,r),void 0!==this._vMap){const d=this._vMap;for(;d.has(o);)o=d.get(o),i(o,r)}}}function KE(t,i,r){oc("NgControlFlow");const o=xn(),d=Jl(),g=lx(o,Er+t);if($e(o,d,i)){const S=de(null);try{if(Kd(g,0),-1!==i){const k=cx(o[en],Er+i),he=_d(g,k.tView.ssrId);Xd(g,fd(o,k,r,{dehydratedView:he}),0,pd(k,he))}}finally{de(S)}}else{const S=Qf(g,0);void 0!==S&&(S[lr]=r)}}class zC{constructor(i,r,o){this.lContainer=i,this.$implicit=r,this.$index=o}get $count(){return this.lContainer.length-ro}}function QE(t){return t}function YE(t,i){return i}class GC{constructor(i,r,o){this.hasEmptyBlock=i,this.trackByFn=r,this.liveCollection=o}}function qE(t,i,r,o,d,g,y,S,k,he,Ae,Ze,It){oc("NgControlFlow");const Bt=void 0!==k,Zt=xn(),Mn=S?y.bind(Zt[Ts][lr]):y,Wn=new GC(Bt,Mn);Zt[Er+t]=Wn,_n(t+1,i,r,o,d,g),Bt&&_n(t+2,k,he,Ae,Ze,It)}class WC extends VC{constructor(i,r,o){super(),this.lContainer=i,this.hostLView=r,this.templateTNode=o,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-ro}at(i){return this.getLView(i)[lr].$implicit}attach(i,r){const o=r[ts];this.needsIndexUpdate||=i!==this.length,Xd(this.lContainer,r,i,pd(this.templateTNode,o))}detach(i){return this.needsIndexUpdate||=i!==this.length-1,function jC(t,i){return ud(t,i)}(this.lContainer,i)}create(i,r){const o=_d(this.lContainer,this.templateTNode.tView.ssrId);return fd(this.hostLView,this.templateTNode,new zC(this.lContainer,r,i),{dehydratedView:o})}destroy(i){Vf(i[en],i)}updateValue(i,r){this.getLView(i)[lr].$implicit=r}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let i=0;i<this.length;i++)this.getLView(i)[lr].$index=i}getLView(i){return function $C(t,i){return Qf(t,i)}(this.lContainer,i)}}function ZE(t){const i=de(null),r=fl();try{const o=xn(),d=o[en],g=o[r];if(void 0===g.liveCollection){const S=r+1,k=lx(o,S),he=cx(d,S);g.liveCollection=new WC(k,o,he)}else g.liveCollection.reset();const y=g.liveCollection;if(function HC(t,i,r){let o,d,g=0,y=t.length-1;if(Array.isArray(i)){let S=i.length-1;for(;g<=y&&g<=S;){const k=t.at(g),he=i[g],Ae=ox(g,k,g,he,r);if(0!==Ae){Ae<0&&t.updateValue(g,he),g++;continue}const Ze=t.at(y),It=i[S],Bt=ox(y,Ze,S,It,r);if(0!==Bt){Bt<0&&t.updateValue(y,It),y--,S--;continue}const Zt=r(g,k),Mn=r(y,Ze),Wn=r(g,he);if(Object.is(Wn,Mn)){const mi=r(S,It);Object.is(mi,Zt)?(t.swap(g,y),t.updateValue(y,It),S--,y--):t.move(y,g),t.updateValue(g,he),g++}else if(o??=new XE,d??=$E(t,g,y,r),ax(t,o,g,Wn))t.updateValue(g,he),g++,y++;else if(d.has(Wn))o.set(Zt,t.detach(g)),y--;else{const mi=t.create(g,i[g]);t.attach(g,mi),g++,y++}}for(;g<=S;)jE(t,o,r,g,i[g]),g++}else if(null!=i){const S=i[Symbol.iterator]();let k=S.next();for(;!k.done&&g<=y;){const he=t.at(g),Ae=k.value,Ze=ox(g,he,g,Ae,r);if(0!==Ze)Ze<0&&t.updateValue(g,Ae),g++,k=S.next();else{o??=new XE,d??=$E(t,g,y,r);const It=r(g,Ae);if(ax(t,o,g,It))t.updateValue(g,Ae),g++,y++,k=S.next();else if(d.has(It)){const Bt=r(g,he);o.set(Bt,t.detach(g)),y--}else t.attach(g,t.create(g,Ae)),g++,y++,k=S.next()}}for(;!k.done;)jE(t,o,r,t.length,k.value),k=S.next()}for(;g<=y;)t.destroy(t.detach(y--));o?.forEach(S=>{t.destroy(S)})}(y,t,g.trackByFn),y.updateIndexes(),g.hasEmptyBlock){const S=Jl(),k=0===y.length;if($e(o,S,k)){const he=r+2,Ae=lx(o,he);if(k){const Ze=cx(d,he),It=_d(Ae,Ze.tView.ssrId);Xd(Ae,fd(o,Ze,void 0,{dehydratedView:It}),0,pd(Ze,It))}else Kd(Ae,0)}}}finally{de(i)}}function lx(t,i){return t[i]}function cx(t,i){return ko(t,i)}function Iy(t,i,r,o){const d=xn(),g=xs(),y=Er+t,S=d[vi],k=g.firstCreatePass?function XC(t,i,r,o,d,g){const y=i.consts,k=Hh(i,t,2,o,Oc(y,d));return N_(i,r,k,Oc(y,g)),null!==k.attrs&&k0(k,k.attrs,!1),null!==k.mergedAttrs&&k0(k,k.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,k),k}(y,g,d,i,r,o):g.data[y],he=JE(g,d,k,S,i,t);d[y]=he;const Ae=ta(k);return jo(k,!0),d0(S,he,k),!function gn(t){return!(32&~t.flags)}(k)&&mh()&&Iu(g,d,he,k),0===function bs(){return cr.lFrame.elementDepthCount}()&&Pl(he,d),function cm(){cr.lFrame.elementDepthCount++}(),Ae&&(Gh(g,d,k),zh(g,k,d)),null!==o&&f0(d,k),Iy}function Ry(){let t=zs();hf()?Ku():(t=t.parent,jo(t,!1));const i=t;(function lf(t){return cr.skipHydrationRootTNode===t})(i)&&function df(){cr.skipHydrationRootTNode=null}(),function $u(){cr.lFrame.elementDepthCount--}();const r=xs();return r.firstCreatePass&&(pf(r,t),Qa(t)&&r.queries.elementEnd(t)),null!=i.classesWithoutHost&&function xp(t){return!!(8&t.flags)}(i)&&nx(r,i,xn(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function mm(t){return!!(16&t.flags)}(i)&&nx(r,i,xn(),i.stylesWithoutHost,!1),Ry}function ux(t,i,r,o){return Iy(t,i,r,o),Ry(),ux}let JE=(t,i,r,o,d,g)=>(ec(!0),zd(o,d,function fm(){return cr.lFrame.currentNamespace}()));function Ny(t,i,r){const o=xn(),d=xs(),g=t+Er,y=d.firstCreatePass?function YC(t,i,r,o,d){const g=i.consts,y=Oc(g,o),S=Hh(i,t,8,"ng-container",y);return null!==y&&k0(S,y,!0),N_(i,r,S,Oc(g,d)),null!==i.queries&&i.queries.elementStart(i,S),S}(g,d,o,i,r):d.data[g];jo(y,!0);const S=tS(d,o,y,t);return o[g]=S,mh()&&Iu(d,o,S,y),Pl(S,o),ta(y)&&(Gh(d,o,y),zh(d,y,o)),null!=r&&f0(o,y),Ny}function Py(){let t=zs();const i=xs();return hf()?Ku():(t=t.parent,jo(t,!1)),i.firstCreatePass&&(pf(i,t),Qa(t)&&i.queries.elementEnd(t)),Py}let tS=(t,i,r,o)=>(ec(!0),r0(i[vi],""));function nS(){return xn()}function dx(t,i,r){const o=xn();return $e(o,Jl(),i)&&gl(xs(),Vo(),o,t,i,o[vi],r,!0),dx}function hx(t,i,r){const o=xn();if($e(o,Jl(),i)){const g=xs(),y=Vo();gl(g,y,o,t,i,O_(Qu(g.data),y,o),r,!0)}return hx}const hp=void 0;var eT=["en",[["a","p"],["AM","PM"],hp],[["AM","PM"],hp,hp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hp,"{1} 'at' {0}",hp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function JC(t){const r=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===r&&0===o?1:5}];let tm={};function fx(t){const i=function tT(t){return t.toLowerCase().replace(/_/g,"-")}(t);let r=rS(i);if(r)return r;const o=i.split("-")[0];if(r=rS(o),r)return r;if("en"===o)return eT;throw new Tt(701,!1)}function iS(t){return fx(t)[nm.PluralCase]}function rS(t){return t in tm||(tm[t]=ri.ng&&ri.ng.common&&ri.ng.common.locales&&ri.ng.common.locales[t]),tm[t]}var nm=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(nm||{});const im="en-US",Oy={marker:"element"},Fy={marker:"ICU"};var zc=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}(zc||{});let sS=im;function aS(t,i,r){const o=i.insertBeforeIndex,d=Array.isArray(o)?o[0]:o;return null===d?ig(t,0,r):Rs(r[d])}function lS(t,i,r,o,d){const g=i.insertBeforeIndex;if(Array.isArray(g)){let y=o,S=null;if(3&i.type||(S=y,y=d),null!==y&&-1===i.componentOffset)for(let k=1;k<g.length;k++)dd(t,y,r[g[k]],S,!1)}}function cS(t,i){if(t.push(i),t.length>1)for(let r=t.length-2;r>=0;r--){const o=t[r];uS(o)||oT(o,i)&&null===aT(o)&&lT(o,i.index)}}function uS(t){return!(64&t.type)}function oT(t,i){return uS(i)||t.index>i.index}function aT(t){const i=t.insertBeforeIndex;return Array.isArray(i)?i[0]:i}function lT(t,i){const r=t.insertBeforeIndex;Array.isArray(r)?r[0]=i:(kh(aS,lS),t.insertBeforeIndex=i)}function dT(t,i,r){const o=Ru(t,r,64,null,null);return cS(i,o),o}let rv=(t,i,r,o)=>(ec(!0),function pS(t,i,r){const o=t[vi];switch(r){case Node.COMMENT_NODE:return r0(o,i);case Node.TEXT_NODE:return cd(o,i);case Node.ELEMENT_NODE:return zd(o,i,null)}}(t,r,o));function bT(){const t=[];let r,o,i=-1;function g(S,k){i=0;const he=function Ly(t,i){const r=i[t.currentCaseLViewIndex];return null===r?r:r<0?~r:r}(S,k);o=null!==he?S.remove[he]:jr}function y(){if(i<o.length){const S=o[i++];return S>0?r[S]:(t.push(i,o),g(r[en].data[~S],r),y())}return 0===t.length?null:(o=t.pop(),i=t.pop(),y())}return function d(S,k){for(r=k;t.length;)t.pop();return g(S.value,k),y}}const ky=/\ufffd(\d+):?\d*\ufffd/gi,ET=/\ufffd(\d+)\ufffd/,bS=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,sv="\ufffd",ST=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,MT=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,wT=/\uE500/g;function xS(t,i,r,o,d,g,y){const S=jf(t,o,1,null);let k=S<<zc.SHIFT,he=Zl();i===he&&(he=null),null===he&&(k|=zc.APPEND_EAGERLY),y&&(k|=zc.COMMENT,function Fh(t){void 0===ld&&(ld=t())}(bT)),d.push(k,null===g?"":g);const Ae=Ru(t,S,y?32:1,null===g?"":g,null);cS(r,Ae);const Ze=Ae.index;return jo(Ae,!1),null!==he&&i!==he&&function uT(t,i){let r=t.insertBeforeIndex;null===r?(kh(aS,lS),r=t.insertBeforeIndex=[null,i]):(function Un(t,i,r){t!=i&&Cn(r,t,i,"==")}(Array.isArray(r),!0,"Expecting array here"),r.push(i))}(he,Ze),Ae}function DT(t,i,r,o,d,g,y,S){const k=S.match(ky),Ae=xS(i,r,o,y,d,k?null:S,!1).index;k&&ov(g,S,Ae,null,0,null),t.push({kind:0,index:Ae})}function ov(t,i,r,o,d,g){const y=t.length,S=y+1;t.push(null,null);const k=y+2,he=i.split(ky);let Ae=0;for(let Ze=0;Ze<he.length;Ze++){const It=he[Ze];if(1&Ze){const Bt=d+parseInt(It,10);t.push(-1-Bt),Ae|=ES(Bt)}else""!==It&&t.push(It)}return t.push(r<<2|(o?1:0)),o&&t.push(o,g),t[y]=Ae,t[S]=t.length-k,Ae}function ES(t){return 1<<Math.min(t,31)}function SS(t){let i,g,r="",o=0,d=!1;for(;null!==(i=ST.exec(t));)d?i[0]===`${sv}/*${g}${sv}`&&(o=i.index,d=!1):(r+=t.substring(o,i.index+i[0].length),g=i[1],d=!0);return r+=t.slice(o),r}function MS(t,i,r,o,d,g,y){let S=0;const k={type:g.type,currentCaseLViewIndex:jf(i,r,1,null),anchorIdx:y,cases:[],create:[],remove:[],update:[]};(function LT(t,i,r){t.push(ES(i.mainBinding),2,-1-i.mainBinding,r<<2|2)})(o,g,y),function cT(t,i,r){const o=t.data[i];null===o?t.data[i]=r:o.value=r}(i,y,k);const he=g.values,Ae=[];for(let Ze=0;Ze<he.length;Ze++){const It=he[Ze],Bt=[];for(let Mn=0;Mn<It.length;Mn++){const Wn=It[Mn];if("string"!=typeof Wn){const mi=Bt.push(Wn)-1;It[Mn]=`\x3c!--\ufffd${mi}\ufffd--\x3e`}}const Zt=[];Ae.push(Zt),S=OT(Zt,i,k,r,o,d,g.cases[Ze],It.join(""),Bt)|S}S&&function kT(t,i,r){t.push(i,1,r<<2|3)}(o,S,y),t.push({kind:3,index:y,cases:Ae,currentCaseLViewIndex:k.currentCaseLViewIndex})}function PT(t){const i=[],r=[];let o=1,d=0;const g=px(t=t.replace(bS,function(y,S,k){return o="select"===k?0:1,d=parseInt(S.slice(1),10),""}));for(let y=0;y<g.length;){let S=g[y++].trim();1===o&&(S=S.replace(/\s*(?:=)?(\w+)\s*/,"$1")),S.length&&i.push(S);const k=px(g[y++]);i.length>r.length&&r.push(k)}return{type:o,mainBinding:d,cases:i,values:r}}function px(t){if(!t)return[];let i=0;const r=[],o=[],d=/[{}]/g;let g;for(d.lastIndex=0;g=d.exec(t);){const S=g.index;if("}"==g[0]){if(r.pop(),0==r.length){const k=t.substring(i,S);bS.test(k)?o.push(PT(k)):o.push(k),i=S+1}}else{if(0==r.length){const k=t.substring(i,S);o.push(k),i=S+1}r.push("{")}}const y=t.substring(i);return o.push(y),o}function OT(t,i,r,o,d,g,y,S,k){const he=[],Ae=[],Ze=[];r.cases.push(y),r.create.push(he),r.remove.push(Ae),r.update.push(Ze);const Bt=Yp(os()).getInertBodyElement(S),Zt=jm(Bt)||Bt;return Zt?wS(t,i,r,o,d,he,Ae,Ze,Zt,g,k,0):0}function wS(t,i,r,o,d,g,y,S,k,he,Ae,Ze){let It=0,Bt=k.firstChild;for(;Bt;){const Zt=jf(i,o,1,null);switch(Bt.nodeType){case Node.ELEMENT_NODE:const Mn=Bt,Wn=Mn.tagName.toLowerCase();if(Hm.hasOwnProperty(Wn)){mx(g,Oy,Wn,he,Zt),i.data[Zt]=Wn;const fo=Mn.attributes;for(let xl=0;xl<fo.length;xl++){const Gc=fo.item(xl),am=Gc.name.toLowerCase();Gc.value.match(ky)?Ph.hasOwnProperty(am)&&ov(S,Gc.value,Zt,Gc.name,0,zm[am]?Zp:null):BT(g,Zt,Gc)}const Ko={kind:1,index:Zt,children:[]};t.push(Ko),It=wS(Ko.children,i,r,o,d,g,y,S,Bt,Zt,Ae,Ze+1)|It,CS(y,Zt,Ze)}break;case Node.TEXT_NODE:const mi=Bt.textContent||"",On=mi.match(ky);mx(g,null,On?"":mi,he,Zt),CS(y,Zt,Ze),On&&(It=ov(S,mi,Zt,null,0,null)|It),t.push({kind:0,index:Zt});break;case Node.COMMENT_NODE:const Qr=ET.exec(Bt.textContent||"");if(Qr){const Ko=Ae[parseInt(Qr[1],10)];mx(g,Fy,"",he,Zt),MS(t,i,o,d,he,Ko,Zt),FT(y,Zt,Ze)}}Bt=Bt.nextSibling}return It}function CS(t,i,r){0===r&&t.push(i)}function FT(t,i,r){0===r&&(t.push(~i),t.push(i))}function mx(t,i,r,o,d){null!==i&&t.push(i),t.push(r,d,function hT(t,i,r){return t|i<<17|r<<1}(0,o,d))}function BT(t,i,r){t.push(i<<1|1,r.name,r.value)}function DS(t,i,r=-1){const o=xs(),d=xn(),g=Er+t,y=Oc(o.consts,i),S=Zl();o.firstCreatePass&&function TT(t,i,r,o,d,g){const y=Zl(),S=[],k=[],he=[[]],Ae=[[]];d=function NT(t,i){if(function RT(t){return-1===t}(i))return SS(t);{const r=t.indexOf(`:${i}${sv}`)+2+i.toString().length,o=t.search(new RegExp(`${sv}\\/\\*\\d+:${i}${sv}`));return SS(t.substring(r,o))}}(d,g);const Ze=function CT(t){return t.replace(wT," ")}(d).split(MT);for(let It=0;It<Ze.length;It++){let Bt=Ze[It];if(1&It){const Zt=47===Bt.charCodeAt(0),Mn=Bt.charCodeAt(Zt?1:0),Wn=Er+Number.parseInt(Bt.substring(Zt?2:1));if(Zt)he.shift(),Ae.shift(),jo(Zl(),!1);else{const mi=dT(t,he[0],Wn);he.unshift([]),jo(mi,!0);const On={kind:2,index:Wn,children:[],type:35===Mn?0:1};Ae[0].push(On),Ae.unshift(On.children)}}else{const Zt=px(Bt);for(let Mn=0;Mn<Zt.length;Mn++){let Wn=Zt[Mn];if(1&Mn){const mi=Wn;if("object"!=typeof mi)throw new Error(`Unable to parse ICU expression in "${d}" message.`);const Qr=xS(t,y,he[0],r,S,"",!0).index;MS(Ae[0],t,r,k,i,mi,Qr)}else""!==Wn&&DT(Ae[0],t,y,he[0],S,k,r,Wn)}}}t.data[o]={create:S,update:k,ast:Ae[0]}}(o,null===S?0:S.index,d,g,y,r),2===o.type?d[Ts][bn]|=32:d[bn]|=32;const k=o.data[g],Ae=x_(o,S===d[zr]?null:S,d);(function vT(t,i,r,o){const d=t[vi];for(let g=0;g<i.length;g++){const y=i[g++],he=(y&zc.APPEND_EAGERLY)===zc.APPEND_EAGERLY,Ae=y>>>zc.SHIFT;let Ze=t[Ae],It=!1;null===Ze&&(Ze=t[Ae]=rv(t,Ae,i[g],(y&zc.COMMENT)===zc.COMMENT?Node.COMMENT_NODE:Node.TEXT_NODE),It=mh()),he&&null!==r&&It&&dd(d,r,Ze,o,!1)}})(d,k.create,Ae,S&&8&S.type?d[S.index]:null),$l(!0)}function IS(t,i,r){DS(t,i,r),function AS(){$l(!1)}()}function gx(t,i,r,o){const d=xn(),g=xs(),y=zs();return function vx(t,i,r,o,d,g,y){const S=ta(o),he=t.firstCreatePass&&mg(t),Ae=i[lr],Ze=Xh(i);let It=!0;if(3&o.type||y){const Mn=Ma(o,i),Wn=y?y(Mn):Mn,mi=Ze.length,On=y?fo=>y(Rs(fo[o.index])):o.index;let Qr=null;if(!y&&S&&(Qr=function YT(t,i,r,o){const d=t.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const y=d[g];if(y===r&&d[g+1]===o){const S=i[go],k=d[g+2];return S.length>k?S[k]:null}"string"==typeof y&&(g+=2)}return null}(t,i,d,o.index)),null!==Qr)(Qr.__ngLastListenerFn__||Qr).__ngNextListenerFn__=g,Qr.__ngLastListenerFn__=g,It=!1;else{g=OS(o,i,Ae,g,!1);const fo=r.listen(Wn,d,g);Ze.push(g,fo),he&&he.push(d,On,mi,mi+1)}}else g=OS(o,i,Ae,g,!1);const Bt=o.outputs;let Zt;if(It&&null!==Bt&&(Zt=Bt[d])){const Mn=Zt.length;if(Mn)for(let Wn=0;Wn<Mn;Wn+=2){const Ko=i[Zt[Wn]][Zt[Wn+1]].subscribe(g),xl=Ze.length;Ze.push(g,Ko),he&&he.push(d,o.index,xl,-(xl+1))}}}(g,d,d[vi],y,t,i,o),gx}function PS(t,i,r,o){const d=de(null);try{return Rl(6,i,r),!1!==r(o)}catch(g){return Kf(t,g),!1}finally{Rl(7,i,r),de(d)}}function OS(t,i,r,o,d){return function g(y){if(y===Function)return o;qf(t.componentOffset>-1?fs(t.index,i):i);let k=PS(i,r,o,y),he=g.__ngNextListenerFn__;for(;he;)k=PS(i,r,he,y)&&k,he=he.__ngNextListenerFn__;return d&&!1===k&&y.preventDefault(),k}}function FS(t=1){return function yv(t){return(cr.lFrame.contextLView=mp(t,cr.lFrame.contextLView))[lr]}(t)}function qT(t,i){let r=null;const o=function Wc(t){const i=t.attrs;if(null!=i){const r=i.indexOf(5);if(!(1&r))return i[r+1]}return null}(t);for(let d=0;d<i.length;d++){const g=i[d];if("*"!==g){if(null===o?au(t,g,!0):zu(o,g))return d}else r=d}return r}function LS(t){const i=xn()[Ts][zr];if(!i.projection){const o=i.projection=function ia(t,i){const r=[];for(let o=0;o<t;o++)r.push(i);return r}(t?t.length:1,null),d=o.slice();let g=i.child;for(;null!==g;){const y=t?qT(g,t):0;null!==y&&(d[y]?d[y].projectionNext=g:o[y]=g,d[y]=g),g=g.next}}}function kS(t,i=0,r){const o=xn(),d=xs(),g=Hh(d,Er+t,16,null,r||null);null===g.projection&&(g.projection=i),Ku(),(!o[ts]||Xu())&&32&~g.flags&&function rg(t,i,r){C_(i[vi],0,i,r,o0(t,r,i),pu(r.parent||i[zr],r,i))}(d,o,g)}function _x(t,i,r){return yx(t,"",i,"",r),_x}function yx(t,i,r,o,d){const g=xn(),y=ou(g,i,r,o);return y!==ns&&gl(xs(),Vo(),g,t,y,g[vi],d,!1),yx}function $S(t,i,r,o){!function $o(t,i,r,o){const d=xs();if(d.firstCreatePass){const g=zs();fy(d,new cy(i,r,o),g.index),function Tb(t,i){const r=t.contentQueries||(t.contentQueries=[]);i!==(r.length?r[r.length-1]:-1)&&r.push(t.queries.length-1,i)}(d,t),!(2&~r)&&(d.staticContentQueries=!0)}return dy(d,xn(),r)}(t,i,r,o)}function XS(t,i,r){hy(t,i,r)}function KS(t){const i=xn(),r=xs(),o=bc();Id(o+1);const d=py(r,o);if(t.dirty&&function pv(t){return!(4&~t[bn])}(i)===!(2&~d.metadata.flags)){if(null===d.matches)t.reset([]);else{const g=jg(i,o);t.reset(g,Mf),t.notifyOnChanges()}return!0}return!1}function QS(){return Wg(xn(),bc())}function YS(t,i,r,o){!function Xg(t,i){const r=t[ie];r._lView=xn(),r._queryIndex=i,r._queryList=Wg(r._lView,i),r._queryList.onDirty(()=>r._dirtyCounter.update(o=>o+1))}(t,hy(i,r,o))}function qS(t=1){Id(bc()+t)}function ZS(t){return Pc(function vv(){return cr.lFrame.contextLView}(),Er+t)}function lM(t,i=""){const r=xn(),o=xs(),d=t+Er,g=o.firstCreatePass?Hh(o,d,1,i,null):o.data[d],y=cM(o,r,g,i,t);r[d]=y,mh()&&Iu(o,r,y,g),jo(g,!1)}let cM=(t,i,r,o,d)=>(ec(!0),cd(i[vi],o));function bx(t){return By("",t,""),bx}function By(t,i,r){const o=xn(),d=ou(o,t,i,r);return d!==ns&&mu(o,fl(),d),By}function xx(t,i,r,o,d){const g=xn(),y=ll(g,t,i,r,o,d);return y!==ns&&mu(g,fl(),y),xx}function Ex(t,i,r,o,d){if(t=At(t),Array.isArray(t))for(let g=0;g<t.length;g++)Ex(t[g],i,r,o,d);else{const g=xs(),y=xn(),S=zs();let k=ir(t)?t:At(t.provide);const he=Lt(t),Ae=1048575&S.providerIndexes,Ze=S.directiveStart,It=S.providerIndexes>>20;if(ir(t)||!t.multi){const Bt=new vh(he,d,Wd),Zt=Mx(k,i,d?Ae:Ae+It,Ze);-1===Zt?(_f(yh(S,y),g,k),Sx(g,t,i.length),i.push(k),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),r.push(Bt),y.push(Bt)):(r[Zt]=Bt,y[Zt]=Bt)}else{const Bt=Mx(k,i,Ae+It,Ze),Zt=Mx(k,i,Ae,Ae+It),Wn=Zt>=0&&r[Zt];if(d&&!Wn||!d&&!(Bt>=0&&r[Bt])){_f(yh(S,y),g,k);const mi=function mD(t,i,r,o,d){const g=new vh(t,r,Wd);return g.multi=[],g.index=i,g.componentProviders=0,yM(g,d,o&&!r),g}(d?pD:fD,r.length,d,o,he);!d&&Wn&&(r[Zt].providerFactory=mi),Sx(g,t,i.length,0),i.push(k),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),r.push(mi),y.push(mi)}else Sx(g,t,Bt>-1?Bt:Zt,yM(r[d?Zt:Bt],he,!d&&o));!d&&o&&Wn&&r[Zt].componentProviders++}}}function Sx(t,i,r,o){const d=ir(i),g=function il(t){return!!t.useClass}(i);if(d||g){const k=(g?At(i.useClass):i).prototype.ngOnDestroy;if(k){const he=t.destroyHooks||(t.destroyHooks=[]);if(!d&&i.multi){const Ae=he.indexOf(r);-1===Ae?he.push(r,[o,k]):he[Ae+1].push(o,k)}else he.push(r,k)}}}function yM(t,i,r){return r&&t.componentProviders++,t.multi.push(i)-1}function Mx(t,i,r,o){for(let d=r;d<o;d++)if(i[d]===t)return d;return-1}function fD(t,i,r,o){return wx(this.multi,[])}function pD(t,i,r,o){const d=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,S=hu(r,r[en],this.providerFactory.index,o);g=S.slice(0,y),wx(d,g);for(let k=y;k<S.length;k++)g.push(S[k])}else g=[],wx(d,g);return g}function wx(t,i){for(let r=0;r<t.length;r++)i.push((0,t[r])());return i}function bM(t,i=[]){return r=>{r.providersResolver=(o,d)=>function hD(t,i,r){const o=xs();if(o.firstCreatePass){const d=rl(t);Ex(r,o.data,o.blueprint,d,!0),Ex(i,o.data,o.blueprint,d,!1)}}(o,d?d(t):t,i)}}let gD=(()=>{class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){const o=ws(0,r.type),d=o.length>0?R([o],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,d)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=sr({token:t,providedIn:"environment",factory:()=>new t(Vs(oe))})}}return t})();function xM(t){oc("NgStandalone"),t.getStandaloneInjector=i=>i.get(gD).getOrCreateStandaloneInjector(t)}function SM(t,i,r){const o=Uo()+t,d=xn();return d[o]===ns?bt(d,o,r?i.call(r):i()):function tt(t,i){return t[i]}(d,o)}function MM(t,i,r,o){return DM(xn(),Uo(),t,i,r,o)}function wM(t,i,r,o,d){return AM(xn(),Uo(),t,i,r,o,d)}function CM(t,i,r,o,d,g){return function IM(t,i,r,o,d,g,y,S){const k=i+r;return function pn(t,i,r,o,d){const g=Nt(t,i,r,o);return $e(t,i+2,d)||g}(t,k,d,g,y)?bt(t,k+3,S?o.call(S,d,g,y):o(d,g,y)):av(t,k+3)}(xn(),Uo(),t,i,r,o,d,g)}function TM(t,i,r,o,d,g,y){return function RM(t,i,r,o,d,g,y,S,k){const he=i+r;return function rn(t,i,r,o,d,g){const y=Nt(t,i,r,o);return Nt(t,i+2,d,g)||y}(t,he,d,g,y,S)?bt(t,he+4,k?o.call(k,d,g,y,S):o(d,g,y,S)):av(t,he+4)}(xn(),Uo(),t,i,r,o,d,g,y)}function av(t,i){const r=t[i];return r===ns?void 0:r}function DM(t,i,r,o,d,g){const y=i+r;return $e(t,y,d)?bt(t,y+1,g?o.call(g,d):o(d)):av(t,y+1)}function AM(t,i,r,o,d,g,y){const S=i+r;return Nt(t,S,d,g)?bt(t,S+2,y?o.call(y,d,g):o(d,g)):av(t,S+2)}function PM(t,i){const r=xs();let o;const d=t+Er;r.firstCreatePass?(o=function MD(t,i){if(i)for(let r=i.length-1;r>=0;r--){const o=i[r];if(t===o.name)return o}}(i,r.pipeRegistry),r.data[d]=o,o.onDestroy&&(r.destroyHooks??=[]).push(d,o.onDestroy)):o=r.data[d];const g=o.factory||(o.factory=Za(o.type)),S=js(Wd);try{const k=Pd(!1),he=g();return Pd(k),function JT(t,i,r,o){r>=t.data.length&&(t.data[r]=null,t.blueprint[r]=null),i[r]=o}(r,xn(),d,he),he}finally{js(S)}}function OM(t,i,r){const o=t+Er,d=xn(),g=Pc(d,o);return lv(d,o)?DM(d,Uo(),i,g.transform,r,g):g.transform(r)}function FM(t,i,r,o){const d=t+Er,g=xn(),y=Pc(g,d);return lv(g,d)?AM(g,Uo(),i,y.transform,r,o,y):y.transform(r,o)}function lv(t,i){return t[en].data[i].pure}function LM(t,i){return E0(t,i)}class ZM{constructor(i){this.full=i;const r=i.split(".");this.major=r[0],this.minor=r[1],this.patch=r.slice(2).join(".")}}let JM=(()=>{class t{log(r){console.log(r)}warn(r){console.warn(r)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=sr({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const rw=new ht(""),sw=new ht("");let Rx,bA=(()=>{class t{constructor(r,o,d){this._ngZone=r,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Rx||(function xA(t){Rx=t}(d),d.addToWindow(o)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ho.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(r)||(clearTimeout(o.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,d){let g=-1;o&&o>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),r()},o)),this._callbacks.push({doneCb:r,timeoutId:g,updateCb:d})}whenStable(r,o,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,o,d){return[]}static{this.\u0275fac=function(o){return new(o||t)(Vs(Ho),Vs(ow),Vs(sw))}}static{this.\u0275prov=sr({token:t,factory:t.\u0275fac})}}return t})(),ow=(()=>{class t{constructor(){this._applications=new Map}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return Rx?.findTestabilityInTree(this,r,o)??null}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=sr({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();function Nx(t){return!!t&&"function"==typeof t.then}function aw(t){return!!t&&"function"==typeof t.subscribe}const EA=new ht("");let Px=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o}),this.appInits=ur(EA,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const r=[];for(const d of this.appInits){const g=d();if(Nx(g))r.push(g);else if(aw(g)){const y=new Promise((S,k)=>{g.subscribe({complete:S,error:k})});r.push(y)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{o()}).catch(d=>{this.reject(d)}),0===r.length&&o(),this.initialized=!0}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=sr({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Ox=new ht("");let nf=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ur(Tm),this.afterRenderEffectManager=ur(eh),this.externalTestViews=new Set,this.beforeRender=new fn.B,this.afterTick=new fn.B,this.componentTypes=[],this.components=[],this.isStable=ur(Z).hasPendingTasks.pipe((0,vn.T)(r=>!r)),this._injector=ur(oe)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,o){const d=r instanceof K_;if(!this._injector.get(Px).done)throw!d&&me(r),new Tt(405,!1);let y;y=d?r:this._injector.get(np).resolveComponentFactory(r),this.componentTypes.push(y.componentType);const S=function SA(t){return t.isBoundToModule}(y)?void 0:this._injector.get(n),he=y.create(nc.NULL,[],o||y.selector,S),Ae=he.location.nativeElement,Ze=he.injector.get(rw,null);return Ze?.registerApplication(Ae),he.onDestroy(()=>{this.detachView(he.hostView),zy(this.components,he),Ze?.unregisterApplication(Ae)}),this._loadComponent(he),he}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Tt(101,!1);const o=de(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(d){this.internalErrorHandler(d)}finally{this.afterTick.next(),this._runningTick=!1,de(o)}}detectChangesInAttachedViews(r){let o=0;const d=this.afterRenderEffectManager;for(;;){if(o===k_)throw new Tt(103,!1);if(r){const g=0===o;this.beforeRender.next(g);for(let{_lView:y,notifyErrorHandler:S}of this._views)wA(y,g,S)}if(o++,d.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:g})=>Fx(g))&&(d.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:g})=>Fx(g))))break}}attachView(r){const o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){const o=r;zy(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const o=this._injector.get(Ox,[]);[...this._bootstrapListeners,...o].forEach(d=>d(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>zy(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Tt(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=sr({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function zy(t,i){const r=t.indexOf(i);r>-1&&t.splice(r,1)}function wA(t,i,r){!i&&!Fx(t)||function CA(t,i,r){let o;r?(o=0,t[bn]|=1024):o=64&t[bn]?0:1,Pu(t,i,o)}(t,r,i)}function Fx(t){return lm(t)}class TA{constructor(i,r){this.ngModuleFactory=i,this.componentFactories=r}}let DA=(()=>{class t{compileModuleSync(r){return new v(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const o=this.compileModuleSync(r),g=Sc(Fe(r).declarations).reduce((y,S)=>{const k=et(S);return k&&y.push(new V0(k)),y},[]);return new TA(o,g)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=sr({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),RA=(()=>{class t{constructor(){this.zone=ur(Ho),this.applicationRef=ur(nf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=sr({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function hw(t){return[{provide:Ho,useFactory:t},{provide:ja,multi:!0,useFactory:()=>{const i=ur(RA,{optional:!0});return()=>i.initialize()}},{provide:ja,multi:!0,useFactory:()=>{const i=ur(OA);return()=>{i.initialize()}}},{provide:Tm,useFactory:NA}]}function NA(){const t=ur(Ho),i=ur(Bc);return r=>t.runOutsideAngular(()=>i.handleError(r))}function PA(t){return fi([[],hw(()=>new Ho(function fw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}(t)))])}let OA=(()=>{class t{constructor(){this.subscription=new Sn.yU,this.initialized=!1,this.zone=ur(Ho),this.pendingTasks=ur(Z)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ho.assertNotInAngularZone(),queueMicrotask(()=>{null!==r&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ho.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=sr({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Wy=new ht("",{providedIn:"root",factory:()=>ur(Wy,br.Optional|br.SkipSelf)||function FA(){return typeof $localize<"u"&&$localize.locale||im}()}),LA=new ht("",{providedIn:"root",factory:()=>"USD"}),Lx=new ht("");let rf=null;let yw=(()=>{class t{static{this.__NG_ELEMENT_ID__=HA}}return t})();function HA(t){return function zA(t,i,r){if(Tl(t)&&!r){const o=fs(t.index,i);return new Zf(o,o)}return 47&t.type?new Zf(i[Ts],i):null}(zs(),xn(),!(16&~t))}class Sw{constructor(){}supports(i){return Le(i)}create(i){return new XA(i)}}const $A=(t,i)=>i;class XA{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||$A}forEachItem(i){let r;for(r=this._itHead;null!==r;r=r._next)i(r)}forEachOperation(i){let r=this._itHead,o=this._removalsHead,d=0,g=null;for(;r||o;){const y=!o||r&&r.currentIndex<ww(o,d,g)?r:o,S=ww(y,d,g),k=y.currentIndex;if(y===o)d--,o=o._nextRemoved;else if(r=r._next,null==y.previousIndex)d++;else{g||(g=[]);const he=S-d,Ae=k-d;if(he!=Ae){for(let It=0;It<he;It++){const Bt=It<g.length?g[It]:g[It]=0,Zt=Bt+It;Ae<=Zt&&Zt<he&&(g[It]=Bt+1)}g[y.previousIndex]=Ae-he}}S!==k&&i(y,S,k)}}forEachPreviousItem(i){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)i(r)}forEachAddedItem(i){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)i(r)}forEachMovedItem(i){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)i(r)}forEachRemovedItem(i){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)i(r)}forEachIdentityChange(i){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)i(r)}diff(i){if(null==i&&(i=[]),!Le(i))throw new Tt(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let d,g,y,r=this._itHead,o=!1;if(Array.isArray(i)){this.length=i.length;for(let S=0;S<this.length;S++)g=i[S],y=this._trackByFn(S,g),null!==r&&Object.is(r.trackById,y)?(o&&(r=this._verifyReinsertion(r,g,y,S)),Object.is(r.item,g)||this._addIdentityChange(r,g)):(r=this._mismatch(r,g,y,S),o=!0),r=r._next}else d=0,function Ft(t,i){if(Array.isArray(t))for(let r=0;r<t.length;r++)i(t[r]);else{const r=t[Symbol.iterator]();let o;for(;!(o=r.next()).done;)i(o.value)}}(i,S=>{y=this._trackByFn(d,S),null!==r&&Object.is(r.trackById,y)?(o&&(r=this._verifyReinsertion(r,S,y,d)),Object.is(r.item,S)||this._addIdentityChange(r,S)):(r=this._mismatch(r,S,y,d),o=!0),r=r._next,d++}),this.length=d;return this._truncate(r),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,r,o,d){let g;return null===i?g=this._itTail:(g=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(i.item,r)||this._addIdentityChange(i,r),this._reinsertAfter(i,g,d)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(o,d))?(Object.is(i.item,r)||this._addIdentityChange(i,r),this._moveAfter(i,g,d)):i=this._addAfter(new KA(r,o),g,d),i}_verifyReinsertion(i,r,o,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==g?i=this._reinsertAfter(g,i._prev,d):i.currentIndex!=d&&(i.currentIndex=d,this._addToMoves(i,d)),i}_truncate(i){for(;null!==i;){const r=i._next;this._addToRemovals(this._unlink(i)),i=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,r,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const d=i._prevRemoved,g=i._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(i,r,o),this._addToMoves(i,o),i}_moveAfter(i,r,o){return this._unlink(i),this._insertAfter(i,r,o),this._addToMoves(i,o),i}_addAfter(i,r,o){return this._insertAfter(i,r,o),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,r,o){const d=null===r?this._itHead:r._next;return i._next=d,i._prev=r,null===d?this._itTail=i:d._prev=i,null===r?this._itHead=i:r._next=i,null===this._linkedRecords&&(this._linkedRecords=new Mw),this._linkedRecords.put(i),i.currentIndex=o,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const r=i._prev,o=i._next;return null===r?this._itHead=o:r._next=o,null===o?this._itTail=r:o._prev=r,i}_addToMoves(i,r){return i.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Mw),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,r){return i.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class KA{constructor(i,r){this.item=i,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QA{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,r){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===r||r<=o.currentIndex)&&Object.is(o.trackById,i))return o;return null}remove(i){const r=i._prevDup,o=i._nextDup;return null===r?this._head=o:r._nextDup=o,null===o?this._tail=r:o._prevDup=r,null===this._head}}class Mw{constructor(){this.map=new Map}put(i){const r=i.trackById;let o=this.map.get(r);o||(o=new QA,this.map.set(r,o)),o.add(i)}get(i,r){const d=this.map.get(i);return d?d.get(i,r):null}remove(i){const r=i.trackById;return this.map.get(r).remove(i)&&this.map.delete(r),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ww(t,i,r){const o=t.previousIndex;if(null===o)return o;let d=0;return r&&o<r.length&&(d=r[o]),o+i+d}class Cw{constructor(){}supports(i){return i instanceof Map||dt(i)}create(){return new YA}}class YA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let r;for(r=this._mapHead;null!==r;r=r._next)i(r)}forEachPreviousItem(i){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)i(r)}forEachChangedItem(i){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)i(r)}forEachAddedItem(i){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)i(r)}forEachRemovedItem(i){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)i(r)}diff(i){if(i){if(!(i instanceof Map||dt(i)))throw new Tt(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(i,(o,d)=>{if(r&&r.key===d)this._maybeAddToChanges(r,o),this._appendAfter=r,r=r._next;else{const g=this._getOrCreateRecordForKey(d,o);r=this._insertBeforeOrAppend(r,g)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let o=r;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,r){if(i){const o=i._prev;return r._next=i,r._prev=o,i._prev=r,o&&(o._next=r),i===this._mapHead&&(this._mapHead=r),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(i,r){if(this._records.has(i)){const d=this._records.get(i);this._maybeAddToChanges(d,r);const g=d._prev,y=d._next;return g&&(g._next=y),y&&(y._prev=g),d._next=null,d._prev=null,d}const o=new qA(i);return this._records.set(i,o),o.currentValue=r,this._addToAdditions(o),o}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,r){Object.is(r,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=r,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,r){i instanceof Map?i.forEach(r):Object.keys(i).forEach(o=>r(i[o],o))}}class qA{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Tw(){return new zx([new Sw])}let zx=(()=>{class t{static{this.\u0275prov=sr({token:t,providedIn:"root",factory:Tw})}constructor(r){this.factories=r}static create(r,o){if(null!=o){const d=o.factories.slice();r=r.concat(d)}return new t(r)}static extend(r){return{provide:t,useFactory:o=>t.create(r,o||Tw()),deps:[[t,new Wa,new wo]]}}find(r){const o=this.factories.find(d=>d.supports(r));if(null!=o)return o;throw new Tt(901,!1)}}return t})();function Dw(){return new Gx([new Cw])}let Gx=(()=>{class t{static{this.\u0275prov=sr({token:t,providedIn:"root",factory:Dw})}constructor(r){this.factories=r}static create(r,o){if(o){const d=o.factories.slice();r=r.concat(d)}return new t(r)}static extend(r){return{provide:t,useFactory:o=>t.create(r,o||Dw()),deps:[[t,new Wa,new wo]]}}find(r){const o=this.factories.find(d=>d.supports(r));if(o)return o;throw new Tt(901,!1)}}return t})();function p2(t){try{const{rootComponent:i,appProviders:r,platformProviders:o}=t,d=function VA(t=[]){if(rf)return rf;const i=function gw(t=[],i){return nc.create({name:i,providers:[{provide:Ka,useValue:"platform"},{provide:Lx,useValue:new Set([()=>rf=null])},...t]})}(t);return rf=i,function lw(){!function Ne(t){Ee=t}(()=>{throw new Tt(600,!1)})}(),function vw(t){t.get(Zr,null)?.forEach(r=>r())}(i),i}(o),g=[PA(),...r||[]],S=new E({providers:g,parent:d,debugName:"",runEnvironmentInitializers:!1}).injector,k=S.get(Ho);return k.run(()=>{S.resolveInjectorInitializers();const he=S.get(Bc,null);let Ae;k.runOutsideAngular(()=>{Ae=k.onError.subscribe({next:Bt=>{he.handleError(Bt)}})});const Ze=()=>S.destroy(),It=d.get(Lx);return It.add(Ze),S.onDestroy(()=>{Ae.unsubscribe(),It.delete(Ze)}),function cw(t,i,r){try{const o=r();return Nx(o)?o.catch(d=>{throw i.runOutsideAngular(()=>t.handleError(d)),d}):o}catch(o){throw i.runOutsideAngular(()=>t.handleError(o)),o}}(he,k,()=>{const Bt=S.get(Px);return Bt.runInitializers(),Bt.donePromise.then(()=>{!function oS(t){"string"==typeof t&&(sS=t.toLowerCase().replace(/_/g,"-"))}(S.get(Wy,im)||im);const Mn=S.get(nf);return void 0!==i&&Mn.bootstrap(i),Mn})})})}catch(i){return Promise.reject(i)}}function A2(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function R2(t,i){oc("NgSignals");const r=le(t);return i?.equal&&(r[ie].equal=i.equal),r}function N2(t){const i=de(null);try{return t()}finally{de(i)}}const P2=new ht("",{providedIn:"root",factory:()=>ur(O2)});let O2=(()=>{class t{static{this.\u0275prov=sr({token:t,providedIn:"root",factory:()=>new F2})}}return t})();class F2{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=ur(Z),this.taskId=null}scheduleEffect(i){if(this.enqueue(i),null===this.taskId){const r=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(r),this.taskId=null})}}enqueue(i){const r=i.creationZone;this.queues.has(r)||this.queues.set(r,new Set);const o=this.queues.get(r);o.has(i)||(this.queuedEffectCount++,o.add(i))}flush(){for(;this.queuedEffectCount>0;)for(const[i,r]of this.queues)null===i?this.flushQueue(r):i.run(()=>this.flushQueue(r))}flushQueue(i){for(const r of i)i.delete(r),this.queuedEffectCount--,r.run()}}class L2{constructor(i,r,o,d,g,y){this.scheduler=i,this.effectFn=r,this.creationZone=o,this.injector=g,this.watcher=function je(t,i,r){const o=Object.create(Yt);r&&(o.consumerAllowSignalWrites=!0),o.fn=t,o.schedule=i;const d=k=>{o.cleanupFn=k};return o.ref={notify:()=>Re(o),run:()=>{if(null===o.fn)return;if(function z(){return fe}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(o.dirty=!1,o.hasRun&&!We(o))return;o.hasRun=!0;const k=ye(o);try{o.cleanupFn(),o.cleanupFn=yt,o.fn(d)}finally{Te(o,k)}},cleanup:()=>o.cleanupFn(),destroy:()=>function y(k){(function g(k){return null===k.fn&&null===k.schedule})(k)||(He(k),k.cleanupFn(),k.fn=null,k.schedule=null,k.cleanupFn=yt)}(o),[ie]:o},o.ref}(S=>this.runEffect(S),()=>this.schedule(),y),this.unregisterOnDestroy=d?.onDestroy(()=>this.destroy())}runEffect(i){try{this.effectFn(i)}catch(r){this.injector.get(Bc,null,{optional:!0})?.handleError(r)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function Yw(t,i){oc("NgSignals"),!i?.injector&&xi();const r=i?.injector??ur(nc),o=!0!==i?.manualCleanup?r.get(id):null,d=new L2(r.get(P2),t,typeof Zone>"u"?null:Zone.current,o,r,i?.allowSignalWrites??!1),g=r.get(yw,null,{optional:!0});return g&&8&g._lView[bn]?(g._lView[Va]??=[]).push(d.watcher.notify):d.watcher.notify(),d}function k2(t,i){const r=et(t),o=i.elementInjector||F();return new V0(r).create(o,i.projectableNodes,i.hostElement,i.environmentInjector)}},9079:(Rt,Je,M)=>{"use strict";M.d(Je,{ot:()=>z,pQ:()=>fe});var l=M(4438),H=M(1985),h=M(6977);function fe(L){L||((0,l.Af3)(fe),L=(0,l.WQX)(l.abz));const I=new H.c(K=>L.onDestroy(K.next.bind(K)));return K=>K.pipe((0,h.Q)(I))}function z(L,I){const K=!I?.manualCleanup;K&&!I?.injector&&(0,l.Af3)(z);const te=K?I?.injector?.get(l.abz)??(0,l.WQX)(l.abz):null;let ee;ee=(0,l.vPA)(I?.requireSync?{kind:0}:{kind:1,value:I?.initialValue});const ue=L.subscribe({next:Ce=>ee.set({kind:1,value:Ce}),error:Ce=>{if(I?.rejectErrors)throw Ce;ee.set({kind:2,error:Ce})}});return te?.onDestroy(ue.unsubscribe.bind(ue)),(0,l.EWP)(()=>{const Ce=ee();switch(Ce.kind){case 1:return Ce.value;case 2:throw Ce.error;case 0:throw new l.wOt(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}},9417:(Rt,Je,M)=>{"use strict";M.d(Je,{BC:()=>Dt,JD:()=>Yo,MJ:()=>Br,X1:()=>sa,YN:()=>Tc,Zm:()=>L,cb:()=>Tt,cz:()=>Re,gE:()=>mn,j4:()=>no,k0:()=>We,kq:()=>Q,l_:()=>fa,me:()=>ee,ok:()=>$a,qT:()=>Bl,wz:()=>Vs,xH:()=>qo,y7:()=>wl});var l=M(4438),H=M(177),h=M(6648),fe=M(7468),X=M(6354);let ie=(()=>{class pe{constructor(ne,Xe){this._renderer=ne,this._elementRef=Xe,this.onChange=Ct=>{},this.onTouched=()=>{}}setProperty(ne,Xe){this._renderer.setProperty(this._elementRef.nativeElement,ne,Xe)}registerOnTouched(ne){this.onTouched=ne}registerOnChange(ne){this.onChange=ne}setDisabledState(ne){this.setProperty("disabled",ne)}static{this.\u0275fac=function(Xe){return new(Xe||pe)(l.rXU(l.sFG),l.rXU(l.aKT))}}static{this.\u0275dir=l.FsC({type:pe})}}return pe})(),de=(()=>{class pe extends ie{static{this.\u0275fac=(()=>{let ne;return function(Ct){return(ne||(ne=l.xGo(pe)))(Ct||pe)}})()}static{this.\u0275dir=l.FsC({type:pe,features:[l.Vt3]})}}return pe})();const Q=new l.nKC(""),z={provide:Q,useExisting:(0,l.Rfq)(()=>L),multi:!0};let L=(()=>{class pe extends de{writeValue(ne){this.setProperty("checked",ne)}static{this.\u0275fac=(()=>{let ne;return function(Ct){return(ne||(ne=l.xGo(pe)))(Ct||pe)}})()}static{this.\u0275dir=l.FsC({type:pe,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(Xe,Ct){1&Xe&&l.bIt("change",function(Nr){return Ct.onChange(Nr.target.checked)})("blur",function(){return Ct.onTouched()})},features:[l.Jv_([z]),l.Vt3]})}}return pe})();const I={provide:Q,useExisting:(0,l.Rfq)(()=>ee),multi:!0},te=new l.nKC("");let ee=(()=>{class pe extends ie{constructor(ne,Xe,Ct){super(ne,Xe),this._compositionMode=Ct,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function K(){const pe=(0,H.QT)()?(0,H.QT)().getUserAgent():"";return/android (\d+)/.test(pe.toLowerCase())}())}writeValue(ne){this.setProperty("value",ne??"")}_handleInput(ne){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(ne)}_compositionStart(){this._composing=!0}_compositionEnd(ne){this._composing=!1,this._compositionMode&&this.onChange(ne)}static{this.\u0275fac=function(Xe){return new(Xe||pe)(l.rXU(l.sFG),l.rXU(l.aKT),l.rXU(te,8))}}static{this.\u0275dir=l.FsC({type:pe,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Xe,Ct){1&Xe&&l.bIt("input",function(Nr){return Ct._handleInput(Nr.target.value)})("blur",function(){return Ct.onTouched()})("compositionstart",function(){return Ct._compositionStart()})("compositionend",function(Nr){return Ct._compositionEnd(Nr.target.value)})},features:[l.Jv_([I]),l.Vt3]})}}return pe})();function ue(pe){return null==pe||("string"==typeof pe||Array.isArray(pe))&&0===pe.length}function Ce(pe){return null!=pe&&"number"==typeof pe.length}const Re=new l.nKC(""),ye=new l.nKC(""),Te=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class We{static min(Me){return function He(pe){return Me=>{if(ue(Me.value)||ue(pe))return null;const ne=parseFloat(Me.value);return!isNaN(ne)&&ne<pe?{min:{min:pe,actual:Me.value}}:null}}(Me)}static max(Me){return function ke(pe){return Me=>{if(ue(Me.value)||ue(pe))return null;const ne=parseFloat(Me.value);return!isNaN(ne)&&ne>pe?{max:{max:pe,actual:Me.value}}:null}}(Me)}static required(Me){return function Ke(pe){return ue(pe.value)?{required:!0}:null}(Me)}static requiredTrue(Me){return function St(pe){return!0===pe.value?null:{required:!0}}(Me)}static email(Me){return function pt(pe){return ue(pe.value)||Te.test(pe.value)?null:{email:!0}}(Me)}static minLength(Me){return function ct(pe){return Me=>ue(Me.value)||!Ce(Me.value)?null:Me.value.length<pe?{minlength:{requiredLength:pe,actualLength:Me.value.length}}:null}(Me)}static maxLength(Me){return function le(pe){return Me=>Ce(Me.value)&&Me.value.length>pe?{maxlength:{requiredLength:pe,actualLength:Me.value.length}}:null}(Me)}static pattern(Me){return function x(pe){if(!pe)return C;let Me,ne;return"string"==typeof pe?(ne="","^"!==pe.charAt(0)&&(ne+="^"),ne+=pe,"$"!==pe.charAt(pe.length-1)&&(ne+="$"),Me=new RegExp(ne)):(ne=pe.toString(),Me=pe),Xe=>{if(ue(Xe.value))return null;const Ct=Xe.value;return Me.test(Ct)?null:{pattern:{requiredPattern:ne,actualValue:Ct}}}}(Me)}static nullValidator(Me){return null}static compose(Me){return V(Me)}static composeAsync(Me){return Ot(Me)}}function C(pe){return null}function j(pe){return null!=pe}function J(pe){return(0,l.jNT)(pe)?(0,h.H)(pe):pe}function _e(pe){let Me={};return pe.forEach(ne=>{Me=null!=ne?{...Me,...ne}:Me}),0===Object.keys(Me).length?null:Me}function Ee(pe,Me){return Me.map(ne=>ne(pe))}function Ne(pe){return pe.map(Me=>function Ve(pe){return!pe.validate}(Me)?Me:ne=>Me.validate(ne))}function V(pe){if(!pe)return null;const Me=pe.filter(j);return 0==Me.length?null:function(ne){return _e(Ee(ne,Me))}}function Oe(pe){return null!=pe?V(Ne(pe)):null}function Ot(pe){if(!pe)return null;const Me=pe.filter(j);return 0==Me.length?null:function(ne){const Xe=Ee(ne,Me).map(J);return(0,fe.p)(Xe).pipe((0,X.T)(_e))}}function ot(pe){return null!=pe?Ot(Ne(pe)):null}function Ut(pe,Me){return null===pe?[Me]:Array.isArray(pe)?[...pe,Me]:[pe,Me]}function ze(pe){return pe._rawValidators}function Mt(pe){return pe._rawAsyncValidators}function st(pe){return pe?Array.isArray(pe)?pe:[pe]:[]}function je(pe,Me){return Array.isArray(pe)?pe.includes(Me):pe===Me}function yt(pe,Me){const ne=st(Me);return st(pe).forEach(Ct=>{je(ne,Ct)||ne.push(Ct)}),ne}function Yt(pe,Me){return st(Me).filter(ne=>!je(pe,ne))}class dn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Me){this._rawValidators=Me||[],this._composedValidatorFn=Oe(this._rawValidators)}_setAsyncValidators(Me){this._rawAsyncValidators=Me||[],this._composedAsyncValidatorFn=ot(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Me){this._onDestroyCallbacks.push(Me)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Me=>Me()),this._onDestroyCallbacks=[]}reset(Me=void 0){this.control&&this.control.reset(Me)}hasError(Me,ne){return!!this.control&&this.control.hasError(Me,ne)}getError(Me,ne){return this.control?this.control.getError(Me,ne):null}}class fn extends dn{get formDirective(){return null}get path(){return null}}class Sn extends dn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gt{constructor(Me){this._cd=Me}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Dt=(()=>{class pe extends Gt{constructor(ne){super(ne)}static{this.\u0275fac=function(Xe){return new(Xe||pe)(l.rXU(Sn,2))}}static{this.\u0275dir=l.FsC({type:pe,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Xe,Ct){2&Xe&&l.AVh("ng-untouched",Ct.isUntouched)("ng-touched",Ct.isTouched)("ng-pristine",Ct.isPristine)("ng-dirty",Ct.isDirty)("ng-valid",Ct.isValid)("ng-invalid",Ct.isInvalid)("ng-pending",Ct.isPending)},features:[l.Vt3]})}}return pe})(),Tt=(()=>{class pe extends Gt{constructor(ne){super(ne)}static{this.\u0275fac=function(Xe){return new(Xe||pe)(l.rXU(fn,10))}}static{this.\u0275dir=l.FsC({type:pe,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(Xe,Ct){2&Xe&&l.AVh("ng-untouched",Ct.isUntouched)("ng-touched",Ct.isTouched)("ng-pristine",Ct.isPristine)("ng-dirty",Ct.isDirty)("ng-valid",Ct.isValid)("ng-invalid",Ct.isInvalid)("ng-pending",Ct.isPending)("ng-submitted",Ct.isSubmitted)},features:[l.Vt3]})}}return pe})();const wi="VALID",Cr="INVALID",Wr="PENDING",Lr="DISABLED";function or(pe){return(Ht(pe)?pe.validators:pe)||null}function Pr(pe,Me){return(Ht(Me)?Me.asyncValidators:pe)||null}function Ht(pe){return null!=pe&&!Array.isArray(pe)&&"object"==typeof pe}function rt(pe,Me,ne){const Xe=pe.controls;if(!(Me?Object.keys(Xe):Xe).length)throw new l.wOt(1e3,"");if(!Xe[ne])throw new l.wOt(1001,"")}function xt(pe,Me,ne){pe._forEachChild((Xe,Ct)=>{if(void 0===ne[Ct])throw new l.wOt(1002,"")})}class on{constructor(Me,ne){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(Me),this._assignAsyncValidators(ne)}get validator(){return this._composedValidatorFn}set validator(Me){this._rawValidators=this._composedValidatorFn=Me}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Me){this._rawAsyncValidators=this._composedAsyncValidatorFn=Me}get parent(){return this._parent}get valid(){return this.status===wi}get invalid(){return this.status===Cr}get pending(){return this.status==Wr}get disabled(){return this.status===Lr}get enabled(){return this.status!==Lr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Me){this._assignValidators(Me)}setAsyncValidators(Me){this._assignAsyncValidators(Me)}addValidators(Me){this.setValidators(yt(Me,this._rawValidators))}addAsyncValidators(Me){this.setAsyncValidators(yt(Me,this._rawAsyncValidators))}removeValidators(Me){this.setValidators(Yt(Me,this._rawValidators))}removeAsyncValidators(Me){this.setAsyncValidators(Yt(Me,this._rawAsyncValidators))}hasValidator(Me){return je(this._rawValidators,Me)}hasAsyncValidator(Me){return je(this._rawAsyncValidators,Me)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Me={}){this.touched=!0,this._parent&&!Me.onlySelf&&this._parent.markAsTouched(Me)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(Me=>Me.markAllAsTouched())}markAsUntouched(Me={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(ne=>{ne.markAsUntouched({onlySelf:!0})}),this._parent&&!Me.onlySelf&&this._parent._updateTouched(Me)}markAsDirty(Me={}){this.pristine=!1,this._parent&&!Me.onlySelf&&this._parent.markAsDirty(Me)}markAsPristine(Me={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(ne=>{ne.markAsPristine({onlySelf:!0})}),this._parent&&!Me.onlySelf&&this._parent._updatePristine(Me)}markAsPending(Me={}){this.status=Wr,!1!==Me.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!Me.onlySelf&&this._parent.markAsPending(Me)}disable(Me={}){const ne=this._parentMarkedDirty(Me.onlySelf);this.status=Lr,this.errors=null,this._forEachChild(Xe=>{Xe.disable({...Me,onlySelf:!0})}),this._updateValue(),!1!==Me.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Me,skipPristineCheck:ne}),this._onDisabledChange.forEach(Xe=>Xe(!0))}enable(Me={}){const ne=this._parentMarkedDirty(Me.onlySelf);this.status=wi,this._forEachChild(Xe=>{Xe.enable({...Me,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Me.emitEvent}),this._updateAncestors({...Me,skipPristineCheck:ne}),this._onDisabledChange.forEach(Xe=>Xe(!1))}_updateAncestors(Me){this._parent&&!Me.onlySelf&&(this._parent.updateValueAndValidity(Me),Me.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(Me){this._parent=Me}getRawValue(){return this.value}updateValueAndValidity(Me={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wi||this.status===Wr)&&this._runAsyncValidator(Me.emitEvent)),!1!==Me.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Me.onlySelf&&this._parent.updateValueAndValidity(Me)}_updateTreeValidity(Me={emitEvent:!0}){this._forEachChild(ne=>ne._updateTreeValidity(Me)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Me.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lr:wi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Me){if(this.asyncValidator){this.status=Wr,this._hasOwnPendingAsyncValidator=!0;const ne=J(this.asyncValidator(this));this._asyncValidationSubscription=ne.subscribe(Xe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Xe,{emitEvent:Me})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(Me,ne={}){this.errors=Me,this._updateControlsErrors(!1!==ne.emitEvent)}get(Me){let ne=Me;return null==ne||(Array.isArray(ne)||(ne=ne.split(".")),0===ne.length)?null:ne.reduce((Xe,Ct)=>Xe&&Xe._find(Ct),this)}getError(Me,ne){const Xe=ne?this.get(ne):this;return Xe&&Xe.errors?Xe.errors[Me]:null}hasError(Me,ne){return!!this.getError(Me,ne)}get root(){let Me=this;for(;Me._parent;)Me=Me._parent;return Me}_updateControlsErrors(Me){this.status=this._calculateStatus(),Me&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(Me)}_initObservables(){this.valueChanges=new l.bkB,this.statusChanges=new l.bkB}_calculateStatus(){return this._allControlsDisabled()?Lr:this.errors?Cr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wr)?Wr:this._anyControlsHaveStatus(Cr)?Cr:wi}_anyControlsHaveStatus(Me){return this._anyControls(ne=>ne.status===Me)}_anyControlsDirty(){return this._anyControls(Me=>Me.dirty)}_anyControlsTouched(){return this._anyControls(Me=>Me.touched)}_updatePristine(Me={}){this.pristine=!this._anyControlsDirty(),this._parent&&!Me.onlySelf&&this._parent._updatePristine(Me)}_updateTouched(Me={}){this.touched=this._anyControlsTouched(),this._parent&&!Me.onlySelf&&this._parent._updateTouched(Me)}_registerOnCollectionChange(Me){this._onCollectionChange=Me}_setUpdateStrategy(Me){Ht(Me)&&null!=Me.updateOn&&(this._updateOn=Me.updateOn)}_parentMarkedDirty(Me){return!Me&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Me){return null}_assignValidators(Me){this._rawValidators=Array.isArray(Me)?Me.slice():Me,this._composedValidatorFn=function Bs(pe){return Array.isArray(pe)?Oe(pe):pe||null}(this._rawValidators)}_assignAsyncValidators(Me){this._rawAsyncValidators=Array.isArray(Me)?Me.slice():Me,this._composedAsyncValidatorFn=function At(pe){return Array.isArray(pe)?ot(pe):pe||null}(this._rawAsyncValidators)}}class mn extends on{constructor(Me,ne,Xe){super(or(ne),Pr(Xe,ne)),this.controls=Me,this._initObservables(),this._setUpdateStrategy(ne),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Me,ne){return this.controls[Me]?this.controls[Me]:(this.controls[Me]=ne,ne.setParent(this),ne._registerOnCollectionChange(this._onCollectionChange),ne)}addControl(Me,ne,Xe={}){this.registerControl(Me,ne),this.updateValueAndValidity({emitEvent:Xe.emitEvent}),this._onCollectionChange()}removeControl(Me,ne={}){this.controls[Me]&&this.controls[Me]._registerOnCollectionChange(()=>{}),delete this.controls[Me],this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}setControl(Me,ne,Xe={}){this.controls[Me]&&this.controls[Me]._registerOnCollectionChange(()=>{}),delete this.controls[Me],ne&&this.registerControl(Me,ne),this.updateValueAndValidity({emitEvent:Xe.emitEvent}),this._onCollectionChange()}contains(Me){return this.controls.hasOwnProperty(Me)&&this.controls[Me].enabled}setValue(Me,ne={}){xt(this,0,Me),Object.keys(Me).forEach(Xe=>{rt(this,!0,Xe),this.controls[Xe].setValue(Me[Xe],{onlySelf:!0,emitEvent:ne.emitEvent})}),this.updateValueAndValidity(ne)}patchValue(Me,ne={}){null!=Me&&(Object.keys(Me).forEach(Xe=>{const Ct=this.controls[Xe];Ct&&Ct.patchValue(Me[Xe],{onlySelf:!0,emitEvent:ne.emitEvent})}),this.updateValueAndValidity(ne))}reset(Me={},ne={}){this._forEachChild((Xe,Ct)=>{Xe.reset(Me?Me[Ct]:null,{onlySelf:!0,emitEvent:ne.emitEvent})}),this._updatePristine(ne),this._updateTouched(ne),this.updateValueAndValidity(ne)}getRawValue(){return this._reduceChildren({},(Me,ne,Xe)=>(Me[Xe]=ne.getRawValue(),Me))}_syncPendingControls(){let Me=this._reduceChildren(!1,(ne,Xe)=>!!Xe._syncPendingControls()||ne);return Me&&this.updateValueAndValidity({onlySelf:!0}),Me}_forEachChild(Me){Object.keys(this.controls).forEach(ne=>{const Xe=this.controls[ne];Xe&&Me(Xe,ne)})}_setUpControls(){this._forEachChild(Me=>{Me.setParent(this),Me._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Me){for(const[ne,Xe]of Object.entries(this.controls))if(this.contains(ne)&&Me(Xe))return!0;return!1}_reduceValue(){return this._reduceChildren({},(ne,Xe,Ct)=>((Xe.enabled||this.disabled)&&(ne[Ct]=Xe.value),ne))}_reduceChildren(Me,ne){let Xe=Me;return this._forEachChild((Ct,Di)=>{Xe=ne(Xe,Ct,Di)}),Xe}_allControlsDisabled(){for(const Me of Object.keys(this.controls))if(this.controls[Me].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Me){return this.controls.hasOwnProperty(Me)?this.controls[Me]:null}}class Oi extends mn{}const Pn=new l.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>Hi}),Hi="always";function Ir(pe,Me,ne=Hi){yr(pe,Me),Me.valueAccessor.writeValue(pe.value),(pe.disabled||"always"===ne)&&Me.valueAccessor.setDisabledState?.(pe.disabled),function ao(pe,Me){Me.valueAccessor.registerOnChange(ne=>{pe._pendingValue=ne,pe._pendingChange=!0,pe._pendingDirty=!0,"change"===pe.updateOn&&sr(pe,Me)})}(pe,Me),function Ms(pe,Me){const ne=(Xe,Ct)=>{Me.valueAccessor.writeValue(Xe),Ct&&Me.viewToModelUpdate(Xe)};pe.registerOnChange(ne),Me._registerOnDestroy(()=>{pe._unregisterOnChange(ne)})}(pe,Me),function ms(pe,Me){Me.valueAccessor.registerOnTouched(()=>{pe._pendingTouched=!0,"blur"===pe.updateOn&&pe._pendingChange&&sr(pe,Me),"submit"!==pe.updateOn&&pe.markAsTouched()})}(pe,Me),function qr(pe,Me){if(Me.valueAccessor.setDisabledState){const ne=Xe=>{Me.valueAccessor.setDisabledState(Xe)};pe.registerOnDisabledChange(ne),Me._registerOnDestroy(()=>{pe._unregisterOnDisabledChange(ne)})}}(pe,Me)}function yi(pe,Me,ne=!0){const Xe=()=>{};Me.valueAccessor&&(Me.valueAccessor.registerOnChange(Xe),Me.valueAccessor.registerOnTouched(Xe)),us(pe,Me),pe&&(Me._invokeOnDestroyCallbacks(),pe._registerOnCollectionChange(()=>{}))}function Cn(pe,Me){pe.forEach(ne=>{ne.registerOnValidatorChange&&ne.registerOnValidatorChange(Me)})}function yr(pe,Me){const ne=ze(pe);null!==Me.validator?pe.setValidators(Ut(ne,Me.validator)):"function"==typeof ne&&pe.setValidators([ne]);const Xe=Mt(pe);null!==Me.asyncValidator?pe.setAsyncValidators(Ut(Xe,Me.asyncValidator)):"function"==typeof Xe&&pe.setAsyncValidators([Xe]);const Ct=()=>pe.updateValueAndValidity();Cn(Me._rawValidators,Ct),Cn(Me._rawAsyncValidators,Ct)}function us(pe,Me){let ne=!1;if(null!==pe){if(null!==Me.validator){const Ct=ze(pe);if(Array.isArray(Ct)&&Ct.length>0){const Di=Ct.filter(Nr=>Nr!==Me.validator);Di.length!==Ct.length&&(ne=!0,pe.setValidators(Di))}}if(null!==Me.asyncValidator){const Ct=Mt(pe);if(Array.isArray(Ct)&&Ct.length>0){const Di=Ct.filter(Nr=>Nr!==Me.asyncValidator);Di.length!==Ct.length&&(ne=!0,pe.setAsyncValidators(Di))}}}const Xe=()=>{};return Cn(Me._rawValidators,Xe),Cn(Me._rawAsyncValidators,Xe),ne}function sr(pe,Me){pe._pendingDirty&&pe.markAsDirty(),pe.setValue(pe._pendingValue,{emitModelToViewChange:!1}),Me.viewToModelUpdate(pe._pendingValue),pe._pendingChange=!1}function G(pe,Me){if(!pe.hasOwnProperty("model"))return!1;const ne=pe.model;return!!ne.isFirstChange()||!Object.is(Me,ne.currentValue)}function ht(pe,Me){if(!Me)return null;let ne,Xe,Ct;return Array.isArray(Me),Me.forEach(Di=>{Di.constructor===ee?ne=Di:function ce(pe){return Object.getPrototypeOf(pe.constructor)===de}(Di)?Xe=Di:Ct=Di}),Ct||Xe||ne||null}function Or(pe,Me){const ne=pe.indexOf(Me);ne>-1&&pe.splice(ne,1)}function Fr(pe){return"object"==typeof pe&&null!==pe&&2===Object.keys(pe).length&&"value"in pe&&"disabled"in pe}Promise.resolve();const Br=class extends on{constructor(Me=null,ne,Xe){super(or(ne),Pr(Xe,ne)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Me),this._setUpdateStrategy(ne),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ht(ne)&&(ne.nonNullable||ne.initialValueIsDefault)&&(this.defaultValue=Fr(Me)?Me.value:Me)}setValue(Me,ne={}){this.value=this._pendingValue=Me,this._onChange.length&&!1!==ne.emitModelToViewChange&&this._onChange.forEach(Xe=>Xe(this.value,!1!==ne.emitViewToModelChange)),this.updateValueAndValidity(ne)}patchValue(Me,ne={}){this.setValue(Me,ne)}reset(Me=this.defaultValue,ne={}){this._applyFormState(Me),this.markAsPristine(ne),this.markAsUntouched(ne),this.setValue(this.value,ne),this._pendingChange=!1}_updateValue(){}_anyControls(Me){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Me){this._onChange.push(Me)}_unregisterOnChange(Me){Or(this._onChange,Me)}registerOnDisabledChange(Me){this._onDisabledChange.push(Me)}_unregisterOnDisabledChange(Me){Or(this._onDisabledChange,Me)}_forEachChild(Me){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Me){Fr(Me)?(this.value=this._pendingValue=Me.value,Me.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Me}};Promise.resolve();let Bl=(()=>{class pe{static{this.\u0275fac=function(Xe){return new(Xe||pe)}}static{this.\u0275dir=l.FsC({type:pe,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return pe})();const js=new l.nKC(""),za={provide:Sn,useExisting:(0,l.Rfq)(()=>fa)};let fa=(()=>{class pe extends Sn{set isDisabled(ne){}static{this._ngModelWarningSentOnce=!1}constructor(ne,Xe,Ct,Di,Nr){super(),this._ngModelWarningConfig=Di,this.callSetDisabledState=Nr,this.update=new l.bkB,this._ngModelWarningSent=!1,this._setValidators(ne),this._setAsyncValidators(Xe),this.valueAccessor=ht(0,Ct)}ngOnChanges(ne){if(this._isControlChanged(ne)){const Xe=ne.form.previousValue;Xe&&yi(Xe,this,!1),Ir(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}G(ne,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&yi(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(ne){this.viewModel=ne,this.update.emit(ne)}_isControlChanged(ne){return ne.hasOwnProperty("form")}static{this.\u0275fac=function(Xe){return new(Xe||pe)(l.rXU(Re,10),l.rXU(ye,10),l.rXU(Q,10),l.rXU(js,8),l.rXU(Pn,8))}}static{this.\u0275dir=l.FsC({type:pe,selectors:[["","formControl",""]],inputs:{form:[l.Mj6.None,"formControl","form"],isDisabled:[l.Mj6.None,"disabled","isDisabled"],model:[l.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[l.Jv_([za]),l.Vt3,l.OA$]})}}return pe})();const cl={provide:fn,useExisting:(0,l.Rfq)(()=>no)};let no=(()=>{class pe extends fn{constructor(ne,Xe,Ct){super(),this.callSetDisabledState=Ct,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.bkB,this._setValidators(ne),this._setAsyncValidators(Xe)}ngOnChanges(ne){this._checkFormPresent(),ne.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(us(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(ne){const Xe=this.form.get(ne.path);return Ir(Xe,ne,this.callSetDisabledState),Xe.updateValueAndValidity({emitEvent:!1}),this.directives.push(ne),Xe}getControl(ne){return this.form.get(ne.path)}removeControl(ne){yi(ne.control||null,ne,!1),function tn(pe,Me){const ne=pe.indexOf(Me);ne>-1&&pe.splice(ne,1)}(this.directives,ne)}addFormGroup(ne){this._setUpFormContainer(ne)}removeFormGroup(ne){this._cleanUpFormContainer(ne)}getFormGroup(ne){return this.form.get(ne.path)}addFormArray(ne){this._setUpFormContainer(ne)}removeFormArray(ne){this._cleanUpFormContainer(ne)}getFormArray(ne){return this.form.get(ne.path)}updateModel(ne,Xe){this.form.get(ne.path).setValue(Xe)}onSubmit(ne){return this.submitted=!0,function qe(pe,Me){pe._syncPendingControls(),Me.forEach(ne=>{const Xe=ne.control;"submit"===Xe.updateOn&&Xe._pendingChange&&(ne.viewToModelUpdate(Xe._pendingValue),Xe._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(ne),"dialog"===ne?.target?.method}onReset(){this.resetForm()}resetForm(ne=void 0){this.form.reset(ne),this.submitted=!1}_updateDomValue(){this.directives.forEach(ne=>{const Xe=ne.control,Ct=this.form.get(ne.path);Xe!==Ct&&(yi(Xe||null,ne),(pe=>pe instanceof Br)(Ct)&&(Ir(Ct,ne,this.callSetDisabledState),ne.control=Ct))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(ne){const Xe=this.form.get(ne.path);(function to(pe,Me){yr(pe,Me)})(Xe,ne),Xe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(ne){if(this.form){const Xe=this.form.get(ne.path);Xe&&function Os(pe,Me){return us(pe,Me)}(Xe,ne)&&Xe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){yr(this.form,this),this._oldForm&&us(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(Xe){return new(Xe||pe)(l.rXU(Re,10),l.rXU(ye,10),l.rXU(Pn,8))}}static{this.\u0275dir=l.FsC({type:pe,selectors:[["","formGroup",""]],hostBindings:function(Xe,Ct){1&Xe&&l.bIt("submit",function(Nr){return Ct.onSubmit(Nr)})("reset",function(){return Ct.onReset()})},inputs:{form:[l.Mj6.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l.Jv_([cl]),l.Vt3,l.OA$]})}}return pe})();const Na={provide:Sn,useExisting:(0,l.Rfq)(()=>Yo)};let Yo=(()=>{class pe extends Sn{set isDisabled(ne){}static{this._ngModelWarningSentOnce=!1}constructor(ne,Xe,Ct,Di,Nr){super(),this._ngModelWarningConfig=Nr,this._added=!1,this.name=null,this.update=new l.bkB,this._ngModelWarningSent=!1,this._parent=ne,this._setValidators(Xe),this._setAsyncValidators(Ct),this.valueAccessor=ht(0,Di)}ngOnChanges(ne){this._added||this._setUpControl(),G(ne,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(ne){this.viewModel=ne,this.update.emit(ne)}get path(){return function Ds(pe,Me){return[...Me.path,pe]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(Xe){return new(Xe||pe)(l.rXU(fn,13),l.rXU(Re,10),l.rXU(ye,10),l.rXU(Q,10),l.rXU(js,8))}}static{this.\u0275dir=l.FsC({type:pe,selectors:[["","formControlName",""]],inputs:{name:[l.Mj6.None,"formControlName","name"],isDisabled:[l.Mj6.None,"disabled","isDisabled"],model:[l.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[l.Jv_([Na]),l.Vt3,l.OA$]})}}return pe})();const Pa={provide:Q,useExisting:(0,l.Rfq)(()=>Vs),multi:!0};function na(pe,Me){return null==pe?`${Me}`:(Me&&"object"==typeof Me&&(Me="Object"),`${pe}: ${Me}`.slice(0,50))}let Vs=(()=>{class pe extends de{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(ne){this._compareWith=ne}writeValue(ne){this.value=ne;const Ct=na(this._getOptionId(ne),ne);this.setProperty("value",Ct)}registerOnChange(ne){this.onChange=Xe=>{this.value=this._getOptionValue(Xe),ne(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(ne){for(const Xe of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Xe),ne))return Xe;return null}_getOptionValue(ne){const Xe=function Yl(pe){return pe.split(":")[0]}(ne);return this._optionMap.has(Xe)?this._optionMap.get(Xe):ne}static{this.\u0275fac=(()=>{let ne;return function(Ct){return(ne||(ne=l.xGo(pe)))(Ct||pe)}})()}static{this.\u0275dir=l.FsC({type:pe,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(Xe,Ct){1&Xe&&l.bIt("change",function(Nr){return Ct.onChange(Nr.target.value)})("blur",function(){return Ct.onTouched()})},inputs:{compareWith:"compareWith"},features:[l.Jv_([Pa]),l.Vt3]})}}return pe})(),qo=(()=>{class pe{constructor(ne,Xe,Ct){this._element=ne,this._renderer=Xe,this._select=Ct,this._select&&(this.id=this._select._registerOption())}set ngValue(ne){null!=this._select&&(this._select._optionMap.set(this.id,ne),this._setElementValue(na(this.id,ne)),this._select.writeValue(this._select.value))}set value(ne){this._setElementValue(ne),this._select&&this._select.writeValue(this._select.value)}_setElementValue(ne){this._renderer.setProperty(this._element.nativeElement,"value",ne)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(Xe){return new(Xe||pe)(l.rXU(l.aKT),l.rXU(l.sFG),l.rXU(Vs,9))}}static{this.\u0275dir=l.FsC({type:pe,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return pe})();const ur={provide:Q,useExisting:(0,l.Rfq)(()=>ba),multi:!0};function ua(pe,Me){return null==pe?`${Me}`:("string"==typeof Me&&(Me=`'${Me}'`),Me&&"object"==typeof Me&&(Me="Object"),`${pe}: ${Me}`.slice(0,50))}let ba=(()=>{class pe extends de{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(ne){this._compareWith=ne}writeValue(ne){let Xe;if(this.value=ne,Array.isArray(ne)){const Ct=ne.map(Di=>this._getOptionId(Di));Xe=(Di,Nr)=>{Di._setSelected(Ct.indexOf(Nr.toString())>-1)}}else Xe=(Ct,Di)=>{Ct._setSelected(!1)};this._optionMap.forEach(Xe)}registerOnChange(ne){this.onChange=Xe=>{const Ct=[],Di=Xe.selectedOptions;if(void 0!==Di){const Nr=Di;for(let el=0;el<Nr.length;el++){const Lo=this._getOptionValue(Nr[el].value);Ct.push(Lo)}}else{const Nr=Xe.options;for(let el=0;el<Nr.length;el++){const Hl=Nr[el];if(Hl.selected){const Lo=this._getOptionValue(Hl.value);Ct.push(Lo)}}}this.value=Ct,ne(Ct)}}_registerOption(ne){const Xe=(this._idCounter++).toString();return this._optionMap.set(Xe,ne),Xe}_getOptionId(ne){for(const Xe of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Xe)._value,ne))return Xe;return null}_getOptionValue(ne){const Xe=function Oa(pe){return pe.split(":")[0]}(ne);return this._optionMap.has(Xe)?this._optionMap.get(Xe)._value:ne}static{this.\u0275fac=(()=>{let ne;return function(Ct){return(ne||(ne=l.xGo(pe)))(Ct||pe)}})()}static{this.\u0275dir=l.FsC({type:pe,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(Xe,Ct){1&Xe&&l.bIt("change",function(Nr){return Ct.onChange(Nr.target)})("blur",function(){return Ct.onTouched()})},inputs:{compareWith:"compareWith"},features:[l.Jv_([ur]),l.Vt3]})}}return pe})(),wl=(()=>{class pe{constructor(ne,Xe,Ct){this._element=ne,this._renderer=Xe,this._select=Ct,this._select&&(this.id=this._select._registerOption(this))}set ngValue(ne){null!=this._select&&(this._value=ne,this._setElementValue(ua(this.id,ne)),this._select.writeValue(this._select.value))}set value(ne){this._select?(this._value=ne,this._setElementValue(ua(this.id,ne)),this._select.writeValue(this._select.value)):this._setElementValue(ne)}_setElementValue(ne){this._renderer.setProperty(this._element.nativeElement,"value",ne)}_setSelected(ne){this._renderer.setProperty(this._element.nativeElement,"selected",ne)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(Xe){return new(Xe||pe)(l.rXU(l.aKT),l.rXU(l.sFG),l.rXU(ba,9))}}static{this.\u0275dir=l.FsC({type:pe,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return pe})(),ra=(()=>{class pe{static{this.\u0275fac=function(Xe){return new(Xe||pe)}}static{this.\u0275mod=l.$C({type:pe})}static{this.\u0275inj=l.G2t({})}}return pe})();class jr extends on{constructor(Me,ne,Xe){super(or(ne),Pr(Xe,ne)),this.controls=Me,this._initObservables(),this._setUpdateStrategy(ne),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(Me){return this.controls[this._adjustIndex(Me)]}push(Me,ne={}){this.controls.push(Me),this._registerControl(Me),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}insert(Me,ne,Xe={}){this.controls.splice(Me,0,ne),this._registerControl(ne),this.updateValueAndValidity({emitEvent:Xe.emitEvent})}removeAt(Me,ne={}){let Xe=this._adjustIndex(Me);Xe<0&&(Xe=0),this.controls[Xe]&&this.controls[Xe]._registerOnCollectionChange(()=>{}),this.controls.splice(Xe,1),this.updateValueAndValidity({emitEvent:ne.emitEvent})}setControl(Me,ne,Xe={}){let Ct=this._adjustIndex(Me);Ct<0&&(Ct=0),this.controls[Ct]&&this.controls[Ct]._registerOnCollectionChange(()=>{}),this.controls.splice(Ct,1),ne&&(this.controls.splice(Ct,0,ne),this._registerControl(ne)),this.updateValueAndValidity({emitEvent:Xe.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(Me,ne={}){xt(this,0,Me),Me.forEach((Xe,Ct)=>{rt(this,!1,Ct),this.at(Ct).setValue(Xe,{onlySelf:!0,emitEvent:ne.emitEvent})}),this.updateValueAndValidity(ne)}patchValue(Me,ne={}){null!=Me&&(Me.forEach((Xe,Ct)=>{this.at(Ct)&&this.at(Ct).patchValue(Xe,{onlySelf:!0,emitEvent:ne.emitEvent})}),this.updateValueAndValidity(ne))}reset(Me=[],ne={}){this._forEachChild((Xe,Ct)=>{Xe.reset(Me[Ct],{onlySelf:!0,emitEvent:ne.emitEvent})}),this._updatePristine(ne),this._updateTouched(ne),this.updateValueAndValidity(ne)}getRawValue(){return this.controls.map(Me=>Me.getRawValue())}clear(Me={}){this.controls.length<1||(this._forEachChild(ne=>ne._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:Me.emitEvent}))}_adjustIndex(Me){return Me<0?Me+this.length:Me}_syncPendingControls(){let Me=this.controls.reduce((ne,Xe)=>!!Xe._syncPendingControls()||ne,!1);return Me&&this.updateValueAndValidity({onlySelf:!0}),Me}_forEachChild(Me){this.controls.forEach((ne,Xe)=>{Me(ne,Xe)})}_updateValue(){this.value=this.controls.filter(Me=>Me.enabled||this.disabled).map(Me=>Me.value)}_anyControls(Me){return this.controls.some(ne=>ne.enabled&&Me(ne))}_setUpControls(){this._forEachChild(Me=>this._registerControl(Me))}_allControlsDisabled(){for(const Me of this.controls)if(Me.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(Me){Me.setParent(this),Me._registerOnCollectionChange(this._onCollectionChange)}_find(Me){return this.at(Me)??null}}function po(pe){return!!pe&&(void 0!==pe.asyncValidators||void 0!==pe.validators||void 0!==pe.updateOn)}let $a=(()=>{class pe{constructor(){this.useNonNullable=!1}get nonNullable(){const ne=new pe;return ne.useNonNullable=!0,ne}group(ne,Xe=null){const Ct=this._reduceControls(ne);let Di={};return po(Xe)?Di=Xe:null!==Xe&&(Di.validators=Xe.validator,Di.asyncValidators=Xe.asyncValidator),new mn(Ct,Di)}record(ne,Xe=null){const Ct=this._reduceControls(ne);return new Oi(Ct,Xe)}control(ne,Xe,Ct){let Di={};return this.useNonNullable?(po(Xe)?Di=Xe:(Di.validators=Xe,Di.asyncValidators=Ct),new Br(ne,{...Di,nonNullable:!0})):new Br(ne,Xe,Ct)}array(ne,Xe,Ct){const Di=ne.map(Nr=>this._createControl(Nr));return new jr(Di,Xe,Ct)}_reduceControls(ne){const Xe={};return Object.keys(ne).forEach(Ct=>{Xe[Ct]=this._createControl(ne[Ct])}),Xe}_createControl(ne){return ne instanceof Br||ne instanceof on?ne:Array.isArray(ne)?this.control(ne[0],ne.length>1?ne[1]:null,ne.length>2?ne[2]:null):this.control(ne)}static{this.\u0275fac=function(Xe){return new(Xe||pe)}}static{this.\u0275prov=l.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"})}}return pe})(),Tc=(()=>{class pe{static withConfig(ne){return{ngModule:pe,providers:[{provide:Pn,useValue:ne.callSetDisabledState??Hi}]}}static{this.\u0275fac=function(Xe){return new(Xe||pe)}}static{this.\u0275mod=l.$C({type:pe})}static{this.\u0275inj=l.G2t({imports:[ra]})}}return pe})(),sa=(()=>{class pe{static withConfig(ne){return{ngModule:pe,providers:[{provide:js,useValue:ne.warnOnNgModelWithFormControl??"always"},{provide:Pn,useValue:ne.callSetDisabledState??Hi}]}}static{this.\u0275fac=function(Xe){return new(Xe||pe)}}static{this.\u0275mod=l.$C({type:pe})}static{this.\u0275inj=l.G2t({imports:[ra]})}}return pe})()},4073:()=>{"use strict";const Rt=":";Error;const ze=function(je,...yt){if(ze.translate){const dn=ze.translate(je,yt);je=dn[0],yt=dn[1]}let Yt=st(je[0],je.raw[0]);for(let dn=1;dn<je.length;dn++)Yt+=yt[dn-1]+st(je[dn],je.raw[dn]);return Yt},Mt=":";function st(je,yt){return yt.charAt(0)===Mt?je.substring(function j(je,yt){for(let Yt=1,dn=1;Yt<je.length;Yt++,dn++)if("\\"===yt[dn])dn++;else if(je[Yt]===Rt)return Yt;throw new Error(`Unterminated $localize metadata block in "${yt}".`)}(je,yt)+1):je}globalThis.$localize=ze},345:(Rt,Je,M)=>{"use strict";M.d(Je,{B7:()=>pt,B8:()=>Ot,hE:()=>Dt,up:()=>Ps});var l=M(4438),H=M(177);class h extends H.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fe extends h{static makeCurrent(){(0,H.ZD)(new fe)}onAndCancel(Ht,rt,xt){return Ht.addEventListener(rt,xt),()=>{Ht.removeEventListener(rt,xt)}}dispatchEvent(Ht,rt){Ht.dispatchEvent(rt)}remove(Ht){Ht.parentNode&&Ht.parentNode.removeChild(Ht)}createElement(Ht,rt){return(rt=rt||this.getDefaultDocument()).createElement(Ht)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ht){return Ht.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ht){return Ht instanceof DocumentFragment}getGlobalEventTarget(Ht,rt){return"window"===rt?window:"document"===rt?Ht:"body"===rt?Ht.body:null}getBaseHref(Ht){const rt=function ie(){return X=X||document.querySelector("base"),X?X.getAttribute("href"):null}();return null==rt?null:function de(At){return new URL(At,document.baseURI).pathname}(rt)}resetBaseElement(){X=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ht){return(0,H._b)(document.cookie,Ht)}}let X=null,z=(()=>{class At{build(){return new XMLHttpRequest}static{this.\u0275fac=function(xt){return new(xt||At)}}static{this.\u0275prov=l.jDH({token:At,factory:At.\u0275fac})}}return At})();const L=new l.nKC("");let I=(()=>{class At{constructor(rt,xt){this._zone=xt,this._eventNameToPlugin=new Map,rt.forEach(on=>{on.manager=this}),this._plugins=rt.slice().reverse()}addEventListener(rt,xt,on){return this._findPluginFor(xt).addEventListener(rt,xt,on)}getZone(){return this._zone}_findPluginFor(rt){let xt=this._eventNameToPlugin.get(rt);if(xt)return xt;if(xt=this._plugins.find(mn=>mn.supports(rt)),!xt)throw new l.wOt(5101,!1);return this._eventNameToPlugin.set(rt,xt),xt}static{this.\u0275fac=function(xt){return new(xt||At)(l.KVO(L),l.KVO(l.SKi))}}static{this.\u0275prov=l.jDH({token:At,factory:At.\u0275fac})}}return At})();class K{constructor(Ht){this._doc=Ht}}const te="ng-app-id";let ee=(()=>{class At{constructor(rt,xt,on,mn={}){this.doc=rt,this.appId=xt,this.nonce=on,this.platformId=mn,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,H.Vy)(mn),this.resetHostNodes()}addStyles(rt){for(const xt of rt)1===this.changeUsageCount(xt,1)&&this.onStyleAdded(xt)}removeStyles(rt){for(const xt of rt)this.changeUsageCount(xt,-1)<=0&&this.onStyleRemoved(xt)}ngOnDestroy(){const rt=this.styleNodesInDOM;rt&&(rt.forEach(xt=>xt.remove()),rt.clear());for(const xt of this.getAllStyles())this.onStyleRemoved(xt);this.resetHostNodes()}addHost(rt){this.hostNodes.add(rt);for(const xt of this.getAllStyles())this.addStyleToHost(rt,xt)}removeHost(rt){this.hostNodes.delete(rt)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(rt){for(const xt of this.hostNodes)this.addStyleToHost(xt,rt)}onStyleRemoved(rt){const xt=this.styleRef;xt.get(rt)?.elements?.forEach(on=>on.remove()),xt.delete(rt)}collectServerRenderedStyles(){const rt=this.doc.head?.querySelectorAll(`style[${te}="${this.appId}"]`);if(rt?.length){const xt=new Map;return rt.forEach(on=>{null!=on.textContent&&xt.set(on.textContent,on)}),xt}return null}changeUsageCount(rt,xt){const on=this.styleRef;if(on.has(rt)){const mn=on.get(rt);return mn.usage+=xt,mn.usage}return on.set(rt,{usage:xt,elements:[]}),xt}getStyleElement(rt,xt){const on=this.styleNodesInDOM,mn=on?.get(xt);if(mn?.parentNode===rt)return on.delete(xt),mn.removeAttribute(te),mn;{const Un=this.doc.createElement("style");return this.nonce&&Un.setAttribute("nonce",this.nonce),Un.textContent=xt,this.platformIsServer&&Un.setAttribute(te,this.appId),rt.appendChild(Un),Un}}addStyleToHost(rt,xt){const on=this.getStyleElement(rt,xt),mn=this.styleRef,Un=mn.get(xt)?.elements;Un?Un.push(on):mn.set(xt,{elements:[on],usage:1})}resetHostNodes(){const rt=this.hostNodes;rt.clear(),rt.add(this.doc.head)}static{this.\u0275fac=function(xt){return new(xt||At)(l.KVO(H.qQ),l.KVO(l.sZ2),l.KVO(l.BIS,8),l.KVO(l.Agw))}}static{this.\u0275prov=l.jDH({token:At,factory:At.\u0275fac})}}return At})();const ue={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ce=/%COMP%/g,He=new l.nKC("",{providedIn:"root",factory:()=>!0});function St(At,Ht){return Ht.map(rt=>rt.replace(Ce,At))}let pt=(()=>{class At{constructor(rt,xt,on,mn,Un,Qi,si,Oi=null){this.eventManager=rt,this.sharedStylesHost=xt,this.appId=on,this.removeStylesOnCompDestroy=mn,this.doc=Un,this.platformId=Qi,this.ngZone=si,this.nonce=Oi,this.rendererByCompId=new Map,this.platformIsServer=(0,H.Vy)(Qi),this.defaultRenderer=new ct(rt,Un,si,this.platformIsServer)}createRenderer(rt,xt){if(!rt||!xt)return this.defaultRenderer;this.platformIsServer&&xt.encapsulation===l.gXe.ShadowDom&&(xt={...xt,encapsulation:l.gXe.Emulated});const on=this.getOrCreateRenderer(rt,xt);return on instanceof _e?on.applyToHost(rt):on instanceof J&&on.applyStyles(),on}getOrCreateRenderer(rt,xt){const on=this.rendererByCompId;let mn=on.get(xt.id);if(!mn){const Un=this.doc,Qi=this.ngZone,si=this.eventManager,Oi=this.sharedStylesHost,kr=this.removeStylesOnCompDestroy,Pn=this.platformIsServer;switch(xt.encapsulation){case l.gXe.Emulated:mn=new _e(si,Oi,xt,this.appId,kr,Un,Qi,Pn);break;case l.gXe.ShadowDom:return new j(si,Oi,rt,xt,Un,Qi,this.nonce,Pn);default:mn=new J(si,Oi,xt,kr,Un,Qi,Pn)}on.set(xt.id,mn)}return mn}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(xt){return new(xt||At)(l.KVO(I),l.KVO(ee),l.KVO(l.sZ2),l.KVO(He),l.KVO(H.qQ),l.KVO(l.Agw),l.KVO(l.SKi),l.KVO(l.BIS))}}static{this.\u0275prov=l.jDH({token:At,factory:At.\u0275fac})}}return At})();class ct{constructor(Ht,rt,xt,on){this.eventManager=Ht,this.doc=rt,this.ngZone=xt,this.platformIsServer=on,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(Ht,rt){return rt?this.doc.createElementNS(ue[rt]||rt,Ht):this.doc.createElement(Ht)}createComment(Ht){return this.doc.createComment(Ht)}createText(Ht){return this.doc.createTextNode(Ht)}appendChild(Ht,rt){(C(Ht)?Ht.content:Ht).appendChild(rt)}insertBefore(Ht,rt,xt){Ht&&(C(Ht)?Ht.content:Ht).insertBefore(rt,xt)}removeChild(Ht,rt){Ht&&Ht.removeChild(rt)}selectRootElement(Ht,rt){let xt="string"==typeof Ht?this.doc.querySelector(Ht):Ht;if(!xt)throw new l.wOt(-5104,!1);return rt||(xt.textContent=""),xt}parentNode(Ht){return Ht.parentNode}nextSibling(Ht){return Ht.nextSibling}setAttribute(Ht,rt,xt,on){if(on){rt=on+":"+rt;const mn=ue[on];mn?Ht.setAttributeNS(mn,rt,xt):Ht.setAttribute(rt,xt)}else Ht.setAttribute(rt,xt)}removeAttribute(Ht,rt,xt){if(xt){const on=ue[xt];on?Ht.removeAttributeNS(on,rt):Ht.removeAttribute(`${xt}:${rt}`)}else Ht.removeAttribute(rt)}addClass(Ht,rt){Ht.classList.add(rt)}removeClass(Ht,rt){Ht.classList.remove(rt)}setStyle(Ht,rt,xt,on){on&(l.czy.DashCase|l.czy.Important)?Ht.style.setProperty(rt,xt,on&l.czy.Important?"important":""):Ht.style[rt]=xt}removeStyle(Ht,rt,xt){xt&l.czy.DashCase?Ht.style.removeProperty(rt):Ht.style[rt]=""}setProperty(Ht,rt,xt){null!=Ht&&(Ht[rt]=xt)}setValue(Ht,rt){Ht.nodeValue=rt}listen(Ht,rt,xt){if("string"==typeof Ht&&!(Ht=(0,H.QT)().getGlobalEventTarget(this.doc,Ht)))throw new Error(`Unsupported event target ${Ht} for event ${rt}`);return this.eventManager.addEventListener(Ht,rt,this.decoratePreventDefault(xt))}decoratePreventDefault(Ht){return rt=>{if("__ngUnwrap__"===rt)return Ht;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Ht(rt)):Ht(rt))&&rt.preventDefault()}}}function C(At){return"TEMPLATE"===At.tagName&&void 0!==At.content}class j extends ct{constructor(Ht,rt,xt,on,mn,Un,Qi,si){super(Ht,mn,Un,si),this.sharedStylesHost=rt,this.hostEl=xt,this.shadowRoot=xt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Oi=St(on.id,on.styles);for(const kr of Oi){const Pn=document.createElement("style");Qi&&Pn.setAttribute("nonce",Qi),Pn.textContent=kr,this.shadowRoot.appendChild(Pn)}}nodeOrShadowRoot(Ht){return Ht===this.hostEl?this.shadowRoot:Ht}appendChild(Ht,rt){return super.appendChild(this.nodeOrShadowRoot(Ht),rt)}insertBefore(Ht,rt,xt){return super.insertBefore(this.nodeOrShadowRoot(Ht),rt,xt)}removeChild(Ht,rt){return super.removeChild(this.nodeOrShadowRoot(Ht),rt)}parentNode(Ht){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ht)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class J extends ct{constructor(Ht,rt,xt,on,mn,Un,Qi,si){super(Ht,mn,Un,Qi),this.sharedStylesHost=rt,this.removeStylesOnCompDestroy=on,this.styles=si?St(si,xt.styles):xt.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class _e extends J{constructor(Ht,rt,xt,on,mn,Un,Qi,si){const Oi=on+"-"+xt.id;super(Ht,rt,xt,mn,Un,Qi,si,Oi),this.contentAttr=function ke(At){return"_ngcontent-%COMP%".replace(Ce,At)}(Oi),this.hostAttr=function Ke(At){return"_nghost-%COMP%".replace(Ce,At)}(Oi)}applyToHost(Ht){this.applyStyles(),this.setAttribute(Ht,this.hostAttr,"")}createElement(Ht,rt){const xt=super.createElement(Ht,rt);return super.setAttribute(xt,this.contentAttr,""),xt}}let Ee=(()=>{class At extends K{constructor(rt){super(rt)}supports(rt){return!0}addEventListener(rt,xt,on){return rt.addEventListener(xt,on,!1),()=>this.removeEventListener(rt,xt,on)}removeEventListener(rt,xt,on){return rt.removeEventListener(xt,on)}static{this.\u0275fac=function(xt){return new(xt||At)(l.KVO(H.qQ))}}static{this.\u0275prov=l.jDH({token:At,factory:At.\u0275fac})}}return At})();const Ve=["alt","control","meta","shift"],Ne={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},V={alt:At=>At.altKey,control:At=>At.ctrlKey,meta:At=>At.metaKey,shift:At=>At.shiftKey};let Oe=(()=>{class At extends K{constructor(rt){super(rt)}supports(rt){return null!=At.parseEventName(rt)}addEventListener(rt,xt,on){const mn=At.parseEventName(xt),Un=At.eventCallback(mn.fullKey,on,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,H.QT)().onAndCancel(rt,mn.domEventName,Un))}static parseEventName(rt){const xt=rt.toLowerCase().split("."),on=xt.shift();if(0===xt.length||"keydown"!==on&&"keyup"!==on)return null;const mn=At._normalizeKey(xt.pop());let Un="",Qi=xt.indexOf("code");if(Qi>-1&&(xt.splice(Qi,1),Un="code."),Ve.forEach(Oi=>{const kr=xt.indexOf(Oi);kr>-1&&(xt.splice(kr,1),Un+=Oi+".")}),Un+=mn,0!=xt.length||0===mn.length)return null;const si={};return si.domEventName=on,si.fullKey=Un,si}static matchEventFullKeyCode(rt,xt){let on=Ne[rt.key]||rt.key,mn="";return xt.indexOf("code.")>-1&&(on=rt.code,mn="code."),!(null==on||!on)&&(on=on.toLowerCase()," "===on?on="space":"."===on&&(on="dot"),Ve.forEach(Un=>{Un!==on&&(0,V[Un])(rt)&&(mn+=Un+".")}),mn+=on,mn===xt)}static eventCallback(rt,xt,on){return mn=>{At.matchEventFullKeyCode(mn,rt)&&on.runGuarded(()=>xt(mn))}}static _normalizeKey(rt){return"esc"===rt?"escape":rt}static{this.\u0275fac=function(xt){return new(xt||At)(l.KVO(H.qQ))}}static{this.\u0275prov=l.jDH({token:At,factory:At.\u0275fac})}}return At})();function Ot(At,Ht){return(0,l.TL3)({rootComponent:At,...Ut(Ht)})}function Ut(At){return{appProviders:[...Sn,...At?.providers??[]],platformProviders:yt}}const yt=[{provide:l.Agw,useValue:H.AJ},{provide:l.PLl,useValue:function Mt(){fe.makeCurrent()},multi:!0},{provide:H.qQ,useFactory:function je(){return(0,l.TL$)(document),document},deps:[]}],Sn=[{provide:l.H8p,useValue:"root"},{provide:l.zcH,useFactory:function st(){return new l.zcH},deps:[]},{provide:L,useClass:Ee,multi:!0,deps:[H.qQ,l.SKi,l.Agw]},{provide:L,useClass:Oe,multi:!0,deps:[H.qQ]},pt,ee,I,{provide:l._9s,useExisting:pt},{provide:H.N0,useClass:z,deps:[]},[]];let Dt=(()=>{class At{constructor(rt){this._doc=rt}getTitle(){return this._doc.title}setTitle(rt){this._doc.title=rt||""}static{this.\u0275fac=function(xt){return new(xt||At)(l.KVO(H.qQ))}}static{this.\u0275prov=l.jDH({token:At,factory:At.\u0275fac,providedIn:"root"})}}return At})(),Ps=(()=>{class At{static{this.\u0275fac=function(xt){return new(xt||At)}}static{this.\u0275prov=l.jDH({token:At,factory:function(xt){let on=null;return on=xt?new(xt||At):l.KVO(ri),on},providedIn:"root"})}}return At})(),ri=(()=>{class At extends Ps{constructor(rt){super(),this._doc=rt}sanitize(rt,xt){if(null==xt)return null;switch(rt){case l.WPN.NONE:return xt;case l.WPN.HTML:return(0,l.ZF7)(xt,"HTML")?(0,l.rcV)(xt):(0,l.h9k)(this._doc,String(xt)).toString();case l.WPN.STYLE:return(0,l.ZF7)(xt,"Style")?(0,l.rcV)(xt):xt;case l.WPN.SCRIPT:if((0,l.ZF7)(xt,"Script"))return(0,l.rcV)(xt);throw new l.wOt(5200,!1);case l.WPN.URL:return(0,l.ZF7)(xt,"URL")?(0,l.rcV)(xt):(0,l.$MX)(String(xt));case l.WPN.RESOURCE_URL:if((0,l.ZF7)(xt,"ResourceURL"))return(0,l.rcV)(xt);throw new l.wOt(5201,!1);default:throw new l.wOt(5202,!1)}}bypassSecurityTrustHtml(rt){return(0,l.Kcf)(rt)}bypassSecurityTrustStyle(rt){return(0,l.cWb)(rt)}bypassSecurityTrustScript(rt){return(0,l.UyX)(rt)}bypassSecurityTrustUrl(rt){return(0,l.osQ)(rt)}bypassSecurityTrustResourceUrl(rt){return(0,l.e5t)(rt)}static{this.\u0275fac=function(xt){return new(xt||At)(l.KVO(H.qQ))}}static{this.\u0275prov=l.jDH({token:At,factory:At.\u0275fac,providedIn:"root"})}}return At})()},33:(Rt,Je,M)=>{"use strict";M.d(Je,{nX:()=>pa,wF:()=>Br,Ix:()=>Rn,n3:()=>ua,lh:()=>Jo,qQ:()=>Sa});var l=M(4438),H=M(4402),h=M(6648),fe=M(7673),X=M(4412),ie=M(9350),de=M(4572),Q=M(8793),z=M(9030),L=M(1203),I=M(8810),K=M(983),te=M(1985),ee=M(8359),ue=M(9974),Ce=M(4360);function Re(){return(0,ue.N)((T,W)=>{let N=null;T._refCount++;const Y=(0,Ce._)(W,void 0,void 0,void 0,()=>{if(!T||T._refCount<=0||0<--T._refCount)return void(N=null);const xe=T._connection,Ge=N;N=null,xe&&(!Ge||xe===Ge)&&xe.unsubscribe(),W.unsubscribe()});T.subscribe(Y),Y.closed||(N=T.connect())})}class ye extends te.c{constructor(W,N){super(),this.source=W,this.subjectFactory=N,this._subject=null,this._refCount=0,this._connection=null,(0,ue.S)(W)&&(this.lift=W.lift)}_subscribe(W){return this.getSubject().subscribe(W)}getSubject(){const W=this._subject;return(!W||W.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:W}=this;this._subject=this._connection=null,W?.unsubscribe()}connect(){let W=this._connection;if(!W){W=this._connection=new ee.yU;const N=this.getSubject();W.add(this.source.subscribe((0,Ce._)(N,void 0,()=>{this._teardown(),N.complete()},Y=>{this._teardown(),N.error(Y)},()=>this._teardown()))),W.closed&&(this._connection=null,W=ee.yU.EMPTY)}return W}refCount(){return Re()(this)}}var Te=M(1413),We=M(177),He=M(6354),ke=M(5558),Ke=M(6697),St=M(9172),pt=M(5964),ct=M(1397);function le(T){return(0,ue.N)((W,N)=>{let Y=!1;W.subscribe((0,Ce._)(N,xe=>{Y=!0,N.next(xe)},()=>{Y||N.next(T),N.complete()}))})}function x(T=C){return(0,ue.N)((W,N)=>{let Y=!1;W.subscribe((0,Ce._)(N,xe=>{Y=!0,N.next(xe)},()=>Y?N.complete():N.error(T())))})}function C(){return new ie.G}var j=M(3669);function J(T,W){const N=arguments.length>=2;return Y=>Y.pipe(T?(0,pt.p)((xe,Ge)=>T(xe,Ge,Y)):j.D,(0,Ke.s)(1),N?le(W):x(()=>new ie.G))}var _e=M(274),Ee=M(8141),Ve=M(9437);function Oe(T){return T<=0?()=>K.w:(0,ue.N)((W,N)=>{let Y=[];W.subscribe((0,Ce._)(N,xe=>{Y.push(xe),T<Y.length&&Y.shift()},()=>{for(const xe of Y)N.next(xe);N.complete()},void 0,()=>{Y=null}))})}var ot=M(3703),Ut=M(980),ze=M(6977),st=(M(6365),M(345));const je="primary",yt=Symbol("RouteTitle");class Yt{constructor(W){this.params=W||{}}has(W){return Object.prototype.hasOwnProperty.call(this.params,W)}get(W){if(this.has(W)){const N=this.params[W];return Array.isArray(N)?N[0]:N}return null}getAll(W){if(this.has(W)){const N=this.params[W];return Array.isArray(N)?N:[N]}return[]}get keys(){return Object.keys(this.params)}}function dn(T){return new Yt(T)}function fn(T,W,N){const Y=N.path.split("/");if(Y.length>T.length||"full"===N.pathMatch&&(W.hasChildren()||Y.length<T.length))return null;const xe={};for(let Ge=0;Ge<Y.length;Ge++){const _t=Y[Ge],Qt=T[Ge];if(_t.startsWith(":"))xe[_t.substring(1)]=Qt;else if(_t!==Qt.path)return null}return{consumed:T.slice(0,Y.length),posParams:xe}}function Gt(T,W){const N=T?vn(T):void 0,Y=W?vn(W):void 0;if(!N||!Y||N.length!=Y.length)return!1;let xe;for(let Ge=0;Ge<N.length;Ge++)if(xe=N[Ge],!at(T[xe],W[xe]))return!1;return!0}function vn(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}function at(T,W){if(Array.isArray(T)&&Array.isArray(W)){if(T.length!==W.length)return!1;const N=[...T].sort(),Y=[...W].sort();return N.every((xe,Ge)=>Y[Ge]===xe)}return T===W}function Dt(T){return T.length>0?T[T.length-1]:null}function Tt(T){return(0,H.A)(T)?T:(0,l.jNT)(T)?(0,h.H)(Promise.resolve(T)):(0,fe.of)(T)}const un={exact:function Yr(T,W,N){if(!Ps(T.segments,W.segments)||!Si(T.segments,W.segments,N)||T.numberOfChildren!==W.numberOfChildren)return!1;for(const Y in W.children)if(!T.children[Y]||!Yr(T.children[Y],W.children[Y],N))return!1;return!0},subset:An},Ln={exact:function Vn(T,W){return Gt(T,W)},subset:function Gn(T,W){return Object.keys(W).length<=Object.keys(T).length&&Object.keys(W).every(N=>at(T[N],W[N]))},ignored:()=>!0};function Yn(T,W,N){return un[N.paths](T.root,W.root,N.matrixParams)&&Ln[N.queryParams](T.queryParams,W.queryParams)&&!("exact"===N.fragment&&T.fragment!==W.fragment)}function An(T,W,N){return ii(T,W,W.segments,N)}function ii(T,W,N,Y){if(T.segments.length>N.length){const xe=T.segments.slice(0,N.length);return!(!Ps(xe,N)||W.hasChildren()||!Si(xe,N,Y))}if(T.segments.length===N.length){if(!Ps(T.segments,N)||!Si(T.segments,N,Y))return!1;for(const xe in W.children)if(!T.children[xe]||!An(T.children[xe],W.children[xe],Y))return!1;return!0}{const xe=N.slice(0,T.segments.length),Ge=N.slice(T.segments.length);return!!(Ps(T.segments,xe)&&Si(T.segments,xe,Y)&&T.children[je])&&ii(T.children[je],W,Ge,Y)}}function Si(T,W,N){return W.every((Y,xe)=>Ln[N](T[xe].parameters,Y.parameters))}class $i{constructor(W=new Ri([],{}),N={},Y=null){this.root=W,this.queryParams=N,this.fragment=Y}get queryParamMap(){return this._queryParamMap??=dn(this.queryParams),this._queryParamMap}toString(){return wi.serialize(this)}}class Ri{constructor(W,N){this.segments=W,this.children=N,this.parent=null,Object.values(N).forEach(Y=>Y.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cr(this)}}class Ki{constructor(W,N){this.path=W,this.parameters=N}get parameterMap(){return this._parameterMap??=dn(this.parameters),this._parameterMap}toString(){return rt(this)}}function Ps(T,W){return T.length===W.length&&T.every((N,Y)=>N.path===W[Y].path)}let qi=(()=>{class T{static{this.\u0275fac=function(Y){return new(Y||T)}}static{this.\u0275prov=l.jDH({token:T,factory:()=>new _r,providedIn:"root"})}}return T})();class _r{parse(W){const N=new Ds(W);return new $i(N.parseRootSegment(),N.parseQueryParams(),N.parseFragment())}serialize(W){const N=`/${Wr(W.root,!0)}`,Y=function on(T){const W=Object.entries(T).map(([N,Y])=>Array.isArray(Y)?Y.map(xe=>`${or(N)}=${or(xe)}`).join("&"):`${or(N)}=${or(Y)}`).filter(N=>N);return W.length?`?${W.join("&")}`:""}(W.queryParams);return`${N}${Y}${"string"==typeof W.fragment?`#${function Bs(T){return encodeURI(T)}(W.fragment)}`:""}`}}const wi=new _r;function Cr(T){return T.segments.map(W=>rt(W)).join("/")}function Wr(T,W){if(!T.hasChildren())return Cr(T);if(W){const N=T.children[je]?Wr(T.children[je],!1):"",Y=[];return Object.entries(T.children).forEach(([xe,Ge])=>{xe!==je&&Y.push(`${xe}:${Wr(Ge,!1)}`)}),Y.length>0?`${N}(${Y.join("//")})`:N}{const N=function ri(T,W){let N=[];return Object.entries(T.children).forEach(([Y,xe])=>{Y===je&&(N=N.concat(W(xe,Y)))}),Object.entries(T.children).forEach(([Y,xe])=>{Y!==je&&(N=N.concat(W(xe,Y)))}),N}(T,(Y,xe)=>xe===je?[Wr(T.children[je],!1)]:[`${xe}:${Wr(Y,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[je]?`${Cr(T)}/${N[0]}`:`${Cr(T)}/(${N.join("//")})`}}function Lr(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function or(T){return Lr(T).replace(/%3B/gi,";")}function Pr(T){return Lr(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function At(T){return decodeURIComponent(T)}function Ht(T){return At(T.replace(/\+/g,"%20"))}function rt(T){return`${Pr(T.path)}${function xt(T){return Object.entries(T).map(([W,N])=>`;${Pr(W)}=${Pr(N)}`).join("")}(T.parameters)}`}const mn=/^[^\/()?;#]+/;function Un(T){const W=T.match(mn);return W?W[0]:""}const Qi=/^[^\/()?;=#]+/,Oi=/^[^=?&#]+/,Pn=/^[^&#]+/;class Ds{constructor(W){this.url=W,this.remaining=W}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ri([],{}):new Ri([],this.parseChildren())}parseQueryParams(){const W={};if(this.consumeOptional("?"))do{this.parseQueryParam(W)}while(this.consumeOptional("&"));return W}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const W=[];for(this.peekStartsWith("(")||W.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),W.push(this.parseSegment());let N={};this.peekStartsWith("/(")&&(this.capture("/"),N=this.parseParens(!0));let Y={};return this.peekStartsWith("(")&&(Y=this.parseParens(!1)),(W.length>0||Object.keys(N).length>0)&&(Y[je]=new Ri(W,N)),Y}parseSegment(){const W=Un(this.remaining);if(""===W&&this.peekStartsWith(";"))throw new l.wOt(4009,!1);return this.capture(W),new Ki(At(W),this.parseMatrixParams())}parseMatrixParams(){const W={};for(;this.consumeOptional(";");)this.parseParam(W);return W}parseParam(W){const N=function si(T){const W=T.match(Qi);return W?W[0]:""}(this.remaining);if(!N)return;this.capture(N);let Y="";if(this.consumeOptional("=")){const xe=Un(this.remaining);xe&&(Y=xe,this.capture(Y))}W[At(N)]=At(Y)}parseQueryParam(W){const N=function kr(T){const W=T.match(Oi);return W?W[0]:""}(this.remaining);if(!N)return;this.capture(N);let Y="";if(this.consumeOptional("=")){const _t=function Hi(T){const W=T.match(Pn);return W?W[0]:""}(this.remaining);_t&&(Y=_t,this.capture(Y))}const xe=Ht(N),Ge=Ht(Y);if(W.hasOwnProperty(xe)){let _t=W[xe];Array.isArray(_t)||(_t=[_t],W[xe]=_t),_t.push(Ge)}else W[xe]=Ge}parseParens(W){const N={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Y=Un(this.remaining),xe=this.remaining[Y.length];if("/"!==xe&&")"!==xe&&";"!==xe)throw new l.wOt(4010,!1);let Ge;Y.indexOf(":")>-1?(Ge=Y.slice(0,Y.indexOf(":")),this.capture(Ge),this.capture(":")):W&&(Ge=je);const _t=this.parseChildren();N[Ge]=1===Object.keys(_t).length?_t[je]:new Ri([],_t),this.consumeOptional("//")}return N}peekStartsWith(W){return this.remaining.startsWith(W)}consumeOptional(W){return!!this.peekStartsWith(W)&&(this.remaining=this.remaining.substring(W.length),!0)}capture(W){if(!this.consumeOptional(W))throw new l.wOt(4011,!1)}}function Ir(T){return T.segments.length>0?new Ri([],{[je]:T}):T}function yi(T){const W={};for(const[Y,xe]of Object.entries(T.children)){const Ge=yi(xe);if(Y===je&&0===Ge.segments.length&&Ge.hasChildren())for(const[_t,Qt]of Object.entries(Ge.children))W[_t]=Qt;else(Ge.segments.length>0||Ge.hasChildren())&&(W[Y]=Ge)}return function Cn(T){if(1===T.numberOfChildren&&T.children[je]){const W=T.children[je];return new Ri(T.segments.concat(W.segments),W.children)}return T}(new Ri(T.segments,W))}function qr(T){return T instanceof $i}function us(T){let W;const xe=Ir(function N(Ge){const _t={};for(const jt of Ge.children){const ei=N(jt);_t[jt.outlet]=ei}const Qt=new Ri(Ge.url,_t);return Ge===T&&(W=Qt),Qt}(T.root));return W??xe}function ao(T,W,N,Y){let xe=T;for(;xe.parent;)xe=xe.parent;if(0===W.length)return Ms(xe,xe,xe,N,Y);const Ge=function Fs(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new Os(!0,0,T);let W=0,N=!1;const Y=T.reduce((xe,Ge,_t)=>{if("object"==typeof Ge&&null!=Ge){if(Ge.outlets){const Qt={};return Object.entries(Ge.outlets).forEach(([jt,ei])=>{Qt[jt]="string"==typeof ei?ei.split("/"):ei}),[...xe,{outlets:Qt}]}if(Ge.segmentPath)return[...xe,Ge.segmentPath]}return"string"!=typeof Ge?[...xe,Ge]:0===_t?(Ge.split("/").forEach((Qt,jt)=>{0==jt&&"."===Qt||(0==jt&&""===Qt?N=!0:".."===Qt?W++:""!=Qt&&xe.push(Qt))}),xe):[...xe,Ge]},[]);return new Os(N,W,Y)}(W);if(Ge.toRoot())return Ms(xe,xe,new Ri([],{}),N,Y);const _t=function Go(T,W,N){if(T.isAbsolute)return new lo(W,!0,0);if(!N)return new lo(W,!1,NaN);if(null===N.parent)return new lo(N,!0,0);const Y=ms(T.commands[0])?0:1;return function Ye(T,W,N){let Y=T,xe=W,Ge=N;for(;Ge>xe;){if(Ge-=xe,Y=Y.parent,!Y)throw new l.wOt(4005,!1);xe=Y.segments.length}return new lo(Y,!1,xe-Ge)}(N,N.segments.length-1+Y,T.numberOfDoubleDots)}(Ge,xe,T),Qt=_t.processChildren?ce(_t.segmentGroup,_t.index,Ge.commands):G(_t.segmentGroup,_t.index,Ge.commands);return Ms(xe,_t.segmentGroup,Qt,N,Y)}function ms(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function sr(T){return"object"==typeof T&&null!=T&&T.outlets}function Ms(T,W,N,Y,xe){let _t,Ge={};Y&&Object.entries(Y).forEach(([jt,ei])=>{Ge[jt]=Array.isArray(ei)?ei.map(Ai=>`${Ai}`):`${ei}`}),_t=T===W?N:to(T,W,N);const Qt=Ir(yi(_t));return new $i(Qt,Ge,xe)}function to(T,W,N){const Y={};return Object.entries(T.children).forEach(([xe,Ge])=>{Y[xe]=Ge===W?N:to(Ge,W,N)}),new Ri(T.segments,Y)}class Os{constructor(W,N,Y){if(this.isAbsolute=W,this.numberOfDoubleDots=N,this.commands=Y,W&&Y.length>0&&ms(Y[0]))throw new l.wOt(4003,!1);const xe=Y.find(sr);if(xe&&xe!==Dt(Y))throw new l.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class lo{constructor(W,N,Y){this.segmentGroup=W,this.processChildren=N,this.index=Y}}function G(T,W,N){if(T??=new Ri([],{}),0===T.segments.length&&T.hasChildren())return ce(T,W,N);const Y=function qe(T,W,N){let Y=0,xe=W;const Ge={match:!1,pathIndex:0,commandIndex:0};for(;xe<T.segments.length;){if(Y>=N.length)return Ge;const _t=T.segments[xe],Qt=N[Y];if(sr(Qt))break;const jt=`${Qt}`,ei=Y<N.length-1?N[Y+1]:null;if(xe>0&&void 0===jt)break;if(jt&&ei&&"object"==typeof ei&&void 0===ei.outlets){if(!zn(jt,ei,_t))return Ge;Y+=2}else{if(!zn(jt,{},_t))return Ge;Y++}xe++}return{match:!0,pathIndex:xe,commandIndex:Y}}(T,W,N),xe=N.slice(Y.commandIndex);if(Y.match&&Y.pathIndex<T.segments.length){const Ge=new Ri(T.segments.slice(0,Y.pathIndex),{});return Ge.children[je]=new Ri(T.segments.slice(Y.pathIndex),T.children),ce(Ge,0,xe)}return Y.match&&0===xe.length?new Ri(T.segments,{}):Y.match&&!T.hasChildren()?ht(T,W,N):Y.match?ce(T,0,xe):ht(T,W,N)}function ce(T,W,N){if(0===N.length)return new Ri(T.segments,{});{const Y=function O(T){return sr(T[0])?T[0].outlets:{[je]:T}}(N),xe={};if(Object.keys(Y).some(Ge=>Ge!==je)&&T.children[je]&&1===T.numberOfChildren&&0===T.children[je].segments.length){const Ge=ce(T.children[je],W,N);return new Ri(T.segments,Ge.children)}return Object.entries(Y).forEach(([Ge,_t])=>{"string"==typeof _t&&(_t=[_t]),null!==_t&&(xe[Ge]=G(T.children[Ge],W,_t))}),Object.entries(T.children).forEach(([Ge,_t])=>{void 0===Y[Ge]&&(xe[Ge]=_t)}),new Ri(T.segments,xe)}}function ht(T,W,N){const Y=T.segments.slice(0,W);let xe=0;for(;xe<N.length;){const Ge=N[xe];if(sr(Ge)){const jt=tn(Ge.outlets);return new Ri(Y,jt)}if(0===xe&&ms(N[0])){Y.push(new Ki(T.segments[W].path,hn(N[0]))),xe++;continue}const _t=sr(Ge)?Ge.outlets[je]:`${Ge}`,Qt=xe<N.length-1?N[xe+1]:null;_t&&Qt&&ms(Qt)?(Y.push(new Ki(_t,hn(Qt))),xe+=2):(Y.push(new Ki(_t,{})),xe++)}return new Ri(Y,{})}function tn(T){const W={};return Object.entries(T).forEach(([N,Y])=>{"string"==typeof Y&&(Y=[Y]),null!==Y&&(W[N]=ht(new Ri([],{}),0,Y))}),W}function hn(T){const W={};return Object.entries(T).forEach(([N,Y])=>W[N]=`${Y}`),W}function zn(T,W,N){return T==N.path&&Gt(W,N.parameters)}const Kn="imperative";var qn=function(T){return T[T.NavigationStart=0]="NavigationStart",T[T.NavigationEnd=1]="NavigationEnd",T[T.NavigationCancel=2]="NavigationCancel",T[T.NavigationError=3]="NavigationError",T[T.RoutesRecognized=4]="RoutesRecognized",T[T.ResolveStart=5]="ResolveStart",T[T.ResolveEnd=6]="ResolveEnd",T[T.GuardsCheckStart=7]="GuardsCheckStart",T[T.GuardsCheckEnd=8]="GuardsCheckEnd",T[T.RouteConfigLoadStart=9]="RouteConfigLoadStart",T[T.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",T[T.ChildActivationStart=11]="ChildActivationStart",T[T.ChildActivationEnd=12]="ChildActivationEnd",T[T.ActivationStart=13]="ActivationStart",T[T.ActivationEnd=14]="ActivationEnd",T[T.Scroll=15]="Scroll",T[T.NavigationSkipped=16]="NavigationSkipped",T}(qn||{});class Or{constructor(W,N){this.id=W,this.url=N}}class Fr extends Or{constructor(W,N,Y="imperative",xe=null){super(W,N),this.type=qn.NavigationStart,this.navigationTrigger=Y,this.restoredState=xe}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Br extends Or{constructor(W,N,Y){super(W,N),this.urlAfterRedirects=Y,this.type=qn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Us=function(T){return T[T.Redirect=0]="Redirect",T[T.SupersededByNewNavigation=1]="SupersededByNewNavigation",T[T.NoDataFromResolver=2]="NoDataFromResolver",T[T.GuardRejected=3]="GuardRejected",T}(Us||{}),co=function(T){return T[T.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",T[T.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",T}(co||{});class Rr extends Or{constructor(W,N,Y,xe){super(W,N),this.reason=Y,this.code=xe,this.type=qn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ur extends Or{constructor(W,N,Y,xe){super(W,N),this.reason=Y,this.code=xe,this.type=qn.NavigationSkipped}}class Ls extends Or{constructor(W,N,Y,xe){super(W,N),this.error=Y,this.target=xe,this.type=qn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ws extends Or{constructor(W,N,Y,xe){super(W,N),this.urlAfterRedirects=Y,this.state=xe,this.type=qn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qs extends Or{constructor(W,N,Y,xe){super(W,N),this.urlAfterRedirects=Y,this.state=xe,this.type=qn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class As extends Or{constructor(W,N,Y,xe,Ge){super(W,N),this.urlAfterRedirects=Y,this.state=xe,this.shouldActivate=Ge,this.type=qn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Po extends Or{constructor(W,N,Y,xe){super(W,N),this.urlAfterRedirects=Y,this.state=xe,this.type=qn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oo extends Or{constructor(W,N,Y,xe){super(W,N),this.urlAfterRedirects=Y,this.state=xe,this.type=qn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zi{constructor(W){this.route=W,this.type=qn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hr{constructor(W){this.route=W,this.type=qn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Bl{constructor(W){this.snapshot=W,this.type=qn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ks{constructor(W){this.snapshot=W,this.type=qn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class El{constructor(W){this.snapshot=W,this.type=qn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ys{constructor(W){this.snapshot=W,this.type=qn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ca{}class br{constructor(W){this.url=W}}class Ra{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new js,this.attachRef=null}}let js=(()=>{class T{constructor(){this.contexts=new Map}onChildOutletCreated(N,Y){const xe=this.getOrCreateContext(N);xe.outlet=Y,this.contexts.set(N,xe)}onChildOutletDestroyed(N){const Y=this.getContext(N);Y&&(Y.outlet=null,Y.attachRef=null)}onOutletDeactivated(){const N=this.contexts;return this.contexts=new Map,N}onOutletReAttached(N){this.contexts=N}getOrCreateContext(N){let Y=this.getContext(N);return Y||(Y=new Ra,this.contexts.set(N,Y)),Y}getContext(N){return this.contexts.get(N)||null}static{this.\u0275fac=function(Y){return new(Y||T)}}static{this.\u0275prov=l.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})();class za{constructor(W){this._root=W}get root(){return this._root.value}parent(W){const N=this.pathFromRoot(W);return N.length>1?N[N.length-2]:null}children(W){const N=fa(W,this._root);return N?N.children.map(Y=>Y.value):[]}firstChild(W){const N=fa(W,this._root);return N&&N.children.length>0?N.children[0].value:null}siblings(W){const N=cl(W,this._root);return N.length<2?[]:N[N.length-2].children.map(xe=>xe.value).filter(xe=>xe!==W)}pathFromRoot(W){return cl(W,this._root).map(N=>N.value)}}function fa(T,W){if(T===W.value)return W;for(const N of W.children){const Y=fa(T,N);if(Y)return Y}return null}function cl(T,W){if(T===W.value)return[W];for(const N of W.children){const Y=cl(T,N);if(Y.length)return Y.unshift(W),Y}return[]}class no{constructor(W,N){this.value=W,this.children=N}toString(){return`TreeNode(${this.value})`}}function Fo(T){const W={};return T&&T.children.forEach(N=>W[N.value.outlet]=N),W}class Qo extends za{constructor(W,N){super(W),this.snapshot=N,na(this,W)}toString(){return this.snapshot.toString()}}function Ml(T){const W=function Ga(T){const Ge=new Yo([],{},{},"",{},je,T,null,{});return new Pa("",new no(Ge,[]))}(T),N=new X.t([new Ki("",{})]),Y=new X.t({}),xe=new X.t({}),Ge=new X.t({}),_t=new X.t(""),Qt=new pa(N,Y,Ge,_t,xe,je,T,W.root);return Qt.snapshot=W.root,new Qo(new no(Qt,[]),W)}class pa{constructor(W,N,Y,xe,Ge,_t,Qt,jt){this.urlSubject=W,this.paramsSubject=N,this.queryParamsSubject=Y,this.fragmentSubject=xe,this.dataSubject=Ge,this.outlet=_t,this.component=Qt,this._futureSnapshot=jt,this.title=this.dataSubject?.pipe((0,He.T)(ei=>ei[yt]))??(0,fe.of)(void 0),this.url=W,this.params=N,this.queryParams=Y,this.fragment=xe,this.data=Ge}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,He.T)(W=>dn(W))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,He.T)(W=>dn(W))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Na(T,W,N="emptyOnly"){let Y;const{routeConfig:xe}=T;return Y=null===W||"always"!==N&&""!==xe?.path&&(W.component||W.routeConfig?.loadComponent)?{params:{...T.params},data:{...T.data},resolve:{...T.data,...T._resolvedData??{}}}:{params:{...W.params,...T.params},data:{...W.data,...T.data},resolve:{...T.data,...W.data,...xe?.data,...T._resolvedData}},xe&&ur(xe)&&(Y.resolve[yt]=xe.title),Y}class Yo{get title(){return this.data?.[yt]}constructor(W,N,Y,xe,Ge,_t,Qt,jt,ei){this.url=W,this.params=N,this.queryParams=Y,this.fragment=xe,this.data=Ge,this.outlet=_t,this.component=Qt,this.routeConfig=jt,this._resolve=ei}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=dn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=dn(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Y=>Y.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Pa extends za{constructor(W,N){super(N),this.url=W,na(this,N)}toString(){return Yl(this._root)}}function na(T,W){W.value._routerState=T,W.children.forEach(N=>na(T,N))}function Yl(T){const W=T.children.length>0?` { ${T.children.map(Yl).join(", ")} } `:"";return`${T.value}${W}`}function Vs(T){if(T.snapshot){const W=T.snapshot,N=T._futureSnapshot;T.snapshot=N,Gt(W.queryParams,N.queryParams)||T.queryParamsSubject.next(N.queryParams),W.fragment!==N.fragment&&T.fragmentSubject.next(N.fragment),Gt(W.params,N.params)||T.paramsSubject.next(N.params),function Sn(T,W){if(T.length!==W.length)return!1;for(let N=0;N<T.length;++N)if(!Gt(T[N],W[N]))return!1;return!0}(W.url,N.url)||T.urlSubject.next(N.url),Gt(W.data,N.data)||T.dataSubject.next(N.data)}else T.snapshot=T._futureSnapshot,T.dataSubject.next(T._futureSnapshot.data)}function qo(T,W){const N=Gt(T.params,W.params)&&function Pi(T,W){return Ps(T,W)&&T.every((N,Y)=>Gt(N.parameters,W[Y].parameters))}(T.url,W.url);return N&&!(!T.parent!=!W.parent)&&(!T.parent||qo(T.parent,W.parent))}function ur(T){return"string"==typeof T.title||null===T.title}let ua=(()=>{class T{constructor(){this.activated=null,this._activatedRoute=null,this.name=je,this.activateEvents=new l.bkB,this.deactivateEvents=new l.bkB,this.attachEvents=new l.bkB,this.detachEvents=new l.bkB,this.parentContexts=(0,l.WQX)(js),this.location=(0,l.WQX)(l.c1b),this.changeDetector=(0,l.WQX)(l.gRc),this.environmentInjector=(0,l.WQX)(l.uvJ),this.inputBinder=(0,l.WQX)(Wo,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(N){if(N.name){const{firstChange:Y,previousValue:xe}=N.name;if(Y)return;this.isTrackedInParentContexts(xe)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(xe)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(N){return this.parentContexts.getContext(N)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const N=this.parentContexts.getContext(this.name);N?.route&&(N.attachRef?this.attach(N.attachRef,N.route):this.activateWith(N.route,N.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.wOt(4012,!1);this.location.detach();const N=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(N.instance),N}attach(N,Y){this.activated=N,this._activatedRoute=Y,this.location.insert(N.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(N.instance)}deactivate(){if(this.activated){const N=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(N)}}activateWith(N,Y){if(this.isActivated)throw new l.wOt(4013,!1);this._activatedRoute=N;const xe=this.location,_t=N.snapshot.component,Qt=this.parentContexts.getOrCreateContext(this.name).children,jt=new Oa(N,Qt,xe.injector);this.activated=xe.createComponent(_t,{index:xe.length,injector:jt,environmentInjector:Y??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(Y){return new(Y||T)}}static{this.\u0275dir=l.FsC({type:T,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[l.OA$]})}}return T})();class Oa{__ngOutletInjector(W){return new Oa(this.route,this.childContexts,W)}constructor(W,N,Y){this.route=W,this.childContexts=N,this.parent=Y}get(W,N){return W===pa?this.route:W===js?this.childContexts:this.parent.get(W,N)}}const Wo=new l.nKC("");function ma(T,W,N){if(N&&T.shouldReuseRoute(W.value,N.value.snapshot)){const Y=N.value;Y._futureSnapshot=W.value;const xe=function lc(T,W,N){return W.children.map(Y=>{for(const xe of N.children)if(T.shouldReuseRoute(Y.value,xe.value.snapshot))return ma(T,Y,xe);return ma(T,Y)})}(T,W,N);return new no(Y,xe)}{if(T.shouldAttach(W.value)){const Ge=T.retrieve(W.value);if(null!==Ge){const _t=Ge.route;return _t.value._futureSnapshot=W.value,_t.children=W.children.map(Qt=>ma(T,Qt)),_t}}const Y=function wo(T){return new pa(new X.t(T.url),new X.t(T.params),new X.t(T.queryParams),new X.t(T.fragment),new X.t(T.data),T.outlet,T.component,T)}(W.value),xe=W.children.map(Ge=>ma(T,Ge));return new no(Y,xe)}}const Cl="ngNavigationCancelingError";function Wa(T,W){const{redirectTo:N,navigationBehaviorOptions:Y}=qr(W)?{redirectTo:W,navigationBehaviorOptions:void 0}:W,xe=qa(!1,Us.Redirect);return xe.url=N,xe.navigationBehaviorOptions=Y,xe}function qa(T,W){const N=new Error(`NavigationCancelingError: ${T||""}`);return N[Cl]=!0,N.cancellationCode=W,N}function Cc(T){return!!T&&T[Cl]}let Ys=(()=>{class T{static{this.\u0275fac=function(Y){return new(Y||T)}}static{this.\u0275cmp=l.VBU({type:T,selectors:[["ng-component"]],standalone:!0,features:[l.aNF],decls:1,vars:0,template:function(Y,xe){1&Y&&l.nrm(0,"router-outlet")},dependencies:[ua],encapsulation:2})}}return T})();function Ja(T){const W=T.children&&T.children.map(Ja),N=W?{...T,children:W}:{...T};return!N.component&&!N.loadComponent&&(W||N.loadChildren)&&N.outlet&&N.outlet!==je&&(N.component=Ys),N}function Co(T){return T.outlet||je}function Vl(T){if(!T)return null;if(T.routeConfig?._injector)return T.routeConfig._injector;for(let W=T.parent;W;W=W.parent){const N=W.routeConfig;if(N?._loadedInjector)return N._loadedInjector;if(N?._injector)return N._injector}return null}class ja{constructor(W,N,Y,xe,Ge){this.routeReuseStrategy=W,this.futureState=N,this.currState=Y,this.forwardEvent=xe,this.inputBindingEnabled=Ge}activate(W){const N=this.futureState._root,Y=this.currState?this.currState._root:null;this.deactivateChildRoutes(N,Y,W),Vs(this.futureState.root),this.activateChildRoutes(N,Y,W)}deactivateChildRoutes(W,N,Y){const xe=Fo(N);W.children.forEach(Ge=>{const _t=Ge.value.outlet;this.deactivateRoutes(Ge,xe[_t],Y),delete xe[_t]}),Object.values(xe).forEach(Ge=>{this.deactivateRouteAndItsChildren(Ge,Y)})}deactivateRoutes(W,N,Y){const xe=W.value,Ge=N?N.value:null;if(xe===Ge)if(xe.component){const _t=Y.getContext(xe.outlet);_t&&this.deactivateChildRoutes(W,N,_t.children)}else this.deactivateChildRoutes(W,N,Y);else Ge&&this.deactivateRouteAndItsChildren(N,Y)}deactivateRouteAndItsChildren(W,N){W.value.component&&this.routeReuseStrategy.shouldDetach(W.value.snapshot)?this.detachAndStoreRouteSubtree(W,N):this.deactivateRouteAndOutlet(W,N)}detachAndStoreRouteSubtree(W,N){const Y=N.getContext(W.value.outlet),xe=Y&&W.value.component?Y.children:N,Ge=Fo(W);for(const _t of Object.values(Ge))this.deactivateRouteAndItsChildren(_t,xe);if(Y&&Y.outlet){const _t=Y.outlet.detach(),Qt=Y.children.onOutletDeactivated();this.routeReuseStrategy.store(W.value.snapshot,{componentRef:_t,route:W,contexts:Qt})}}deactivateRouteAndOutlet(W,N){const Y=N.getContext(W.value.outlet),xe=Y&&W.value.component?Y.children:N,Ge=Fo(W);for(const _t of Object.values(Ge))this.deactivateRouteAndItsChildren(_t,xe);Y&&(Y.outlet&&(Y.outlet.deactivate(),Y.children.onOutletDeactivated()),Y.attachRef=null,Y.route=null)}activateChildRoutes(W,N,Y){const xe=Fo(N);W.children.forEach(Ge=>{this.activateRoutes(Ge,xe[Ge.value.outlet],Y),this.forwardEvent(new ys(Ge.value.snapshot))}),W.children.length&&this.forwardEvent(new ks(W.value.snapshot))}activateRoutes(W,N,Y){const xe=W.value,Ge=N?N.value:null;if(Vs(xe),xe===Ge)if(xe.component){const _t=Y.getOrCreateContext(xe.outlet);this.activateChildRoutes(W,N,_t.children)}else this.activateChildRoutes(W,N,Y);else if(xe.component){const _t=Y.getOrCreateContext(xe.outlet);if(this.routeReuseStrategy.shouldAttach(xe.snapshot)){const Qt=this.routeReuseStrategy.retrieve(xe.snapshot);this.routeReuseStrategy.store(xe.snapshot,null),_t.children.onOutletReAttached(Qt.contexts),_t.attachRef=Qt.componentRef,_t.route=Qt.route.value,_t.outlet&&_t.outlet.attach(Qt.componentRef,Qt.route.value),Vs(Qt.route.value),this.activateChildRoutes(W,null,_t.children)}else{const Qt=Vl(xe.snapshot);_t.attachRef=null,_t.route=xe,_t.injector=Qt,_t.outlet&&_t.outlet.activateWith(xe,_t.injector),this.activateChildRoutes(W,null,_t.children)}}else this.activateChildRoutes(W,null,Y)}}class ka{constructor(W){this.path=W,this.route=this.path[this.path.length-1]}}class po{constructor(W,N){this.component=W,this.route=N}}function $a(T,W,N){const Y=T._root;return Zo(Y,W?W._root:null,N,[Y.value])}function qs(T,W){const N=Symbol(),Y=W.get(T,N);return Y===N?"function"!=typeof T||(0,l.LfX)(T)?W.get(T):T:Y}function Zo(T,W,N,Y,xe={canDeactivateChecks:[],canActivateChecks:[]}){const Ge=Fo(W);return T.children.forEach(_t=>{(function Tc(T,W,N,Y,xe={canDeactivateChecks:[],canActivateChecks:[]}){const Ge=T.value,_t=W?W.value:null,Qt=N?N.getContext(T.value.outlet):null;if(_t&&Ge.routeConfig===_t.routeConfig){const jt=function sa(T,W,N){if("function"==typeof N)return N(T,W);switch(N){case"pathParamsChange":return!Ps(T.url,W.url);case"pathParamsOrQueryParamsChange":return!Ps(T.url,W.url)||!Gt(T.queryParams,W.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qo(T,W)||!Gt(T.queryParams,W.queryParams);default:return!qo(T,W)}}(_t,Ge,Ge.routeConfig.runGuardsAndResolvers);jt?xe.canActivateChecks.push(new ka(Y)):(Ge.data=_t.data,Ge._resolvedData=_t._resolvedData),Zo(T,W,Ge.component?Qt?Qt.children:null:N,Y,xe),jt&&Qt&&Qt.outlet&&Qt.outlet.isActivated&&xe.canDeactivateChecks.push(new po(Qt.outlet.component,_t))}else _t&&pe(W,Qt,xe),xe.canActivateChecks.push(new ka(Y)),Zo(T,null,Ge.component?Qt?Qt.children:null:N,Y,xe)})(_t,Ge[_t.value.outlet],N,Y.concat([_t.value]),xe),delete Ge[_t.value.outlet]}),Object.entries(Ge).forEach(([_t,Qt])=>pe(Qt,N.getContext(_t),xe)),xe}function pe(T,W,N){const Y=Fo(T),xe=T.value;Object.entries(Y).forEach(([Ge,_t])=>{pe(_t,xe.component?W?W.children.getContext(Ge):null:W,N)}),N.canDeactivateChecks.push(new po(xe.component&&W&&W.outlet&&W.outlet.isActivated?W.outlet.component:null,xe))}function Me(T){return"function"==typeof T}function Hl(T){return T instanceof ie.G||"EmptyError"===T?.name}const Lo=Symbol("INITIAL_VALUE");function tl(){return(0,ke.n)(T=>(0,de.z)(T.map(W=>W.pipe((0,Ke.s)(1),(0,St.Z)(Lo)))).pipe((0,He.T)(W=>{for(const N of W)if(!0!==N){if(N===Lo)return Lo;if(!1===N||N instanceof $i)return N}return!0}),(0,pt.p)(W=>W!==Lo),(0,Ke.s)(1)))}function Ao(T){return(0,L.F)((0,Ee.M)(W=>{if(qr(W))throw Wa(0,W)}),(0,He.T)(W=>!0===W))}class Ua{constructor(W){this.segmentGroup=W||null}}class Xa extends Error{constructor(W){super(),this.urlTree=W}}function bo(T){return(0,I.$)(new Ua(T))}class Se{constructor(W,N){this.urlSerializer=W,this.urlTree=N}lineralizeSegments(W,N){let Y=[],xe=N.root;for(;;){if(Y=Y.concat(xe.segments),0===xe.numberOfChildren)return(0,fe.of)(Y);if(xe.numberOfChildren>1||!xe.children[je])return(0,I.$)(new l.wOt(4e3,!1));xe=xe.children[je]}}applyRedirectCommands(W,N,Y){const xe=this.applyRedirectCreateUrlTree(N,this.urlSerializer.parse(N),W,Y);if(N.startsWith("/"))throw new Xa(xe);return xe}applyRedirectCreateUrlTree(W,N,Y,xe){const Ge=this.createSegmentGroup(W,N.root,Y,xe);return new $i(Ge,this.createQueryParams(N.queryParams,this.urlTree.queryParams),N.fragment)}createQueryParams(W,N){const Y={};return Object.entries(W).forEach(([xe,Ge])=>{if("string"==typeof Ge&&Ge.startsWith(":")){const Qt=Ge.substring(1);Y[xe]=N[Qt]}else Y[xe]=Ge}),Y}createSegmentGroup(W,N,Y,xe){const Ge=this.createSegments(W,N.segments,Y,xe);let _t={};return Object.entries(N.children).forEach(([Qt,jt])=>{_t[Qt]=this.createSegmentGroup(W,jt,Y,xe)}),new Ri(Ge,_t)}createSegments(W,N,Y,xe){return N.map(Ge=>Ge.path.startsWith(":")?this.findPosParam(W,Ge,xe):this.findOrReturn(Ge,Y))}findPosParam(W,N,Y){const xe=Y[N.path.substring(1)];if(!xe)throw new l.wOt(4001,!1);return xe}findOrReturn(W,N){let Y=0;for(const xe of N){if(xe.path===W.path)return N.splice(Y),xe;Y++}return W}}const q={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function me(T,W,N,Y,xe){const Ge=Fe(T,W,N);return Ge.matched?(Y=function Fa(T,W){return T.providers&&!T._injector&&(T._injector=(0,l.Ol2)(T.providers,W,`Route: ${T.path}`)),T._injector??W}(W,Y),function Dc(T,W,N,Y){const xe=W.canMatch;if(!xe||0===xe.length)return(0,fe.of)(!0);const Ge=xe.map(_t=>{const Qt=qs(_t,T);return Tt(function el(T){return T&&Me(T.canMatch)}(Qt)?Qt.canMatch(W,N):(0,l.N4e)(T,()=>Qt(W,N)))});return(0,fe.of)(Ge).pipe(tl(),Ao())}(Y,W,N).pipe((0,He.T)(_t=>!0===_t?Ge:{...q}))):(0,fe.of)(Ge)}function Fe(T,W,N){if("**"===W.path)return function ut(T){return{matched:!0,parameters:T.length>0?Dt(T).parameters:{},consumedSegments:T,remainingSegments:[],positionalParamSegments:{}}}(N);if(""===W.path)return"full"===W.pathMatch&&(T.hasChildren()||N.length>0)?{...q}:{matched:!0,consumedSegments:[],remainingSegments:N,parameters:{},positionalParamSegments:{}};const xe=(W.matcher||fn)(N,T,W);if(!xe)return{...q};const Ge={};Object.entries(xe.posParams??{}).forEach(([Qt,jt])=>{Ge[Qt]=jt.path});const _t=xe.consumed.length>0?{...Ge,...xe.consumed[xe.consumed.length-1].parameters}:Ge;return{matched:!0,consumedSegments:xe.consumed,remainingSegments:N.slice(xe.consumed.length),parameters:_t,positionalParamSegments:xe.posParams??{}}}function kt(T,W,N,Y){return N.length>0&&function Zi(T,W,N){return N.some(Y=>fr(T,W,Y)&&Co(Y)!==je)}(T,N,Y)?{segmentGroup:new Ri(W,li(Y,new Ri(N,T.children))),slicedSegments:[]}:0===N.length&&function fi(T,W,N){return N.some(Y=>fr(T,W,Y))}(T,N,Y)?{segmentGroup:new Ri(T.segments,Dn(T,N,Y,T.children)),slicedSegments:N}:{segmentGroup:new Ri(T.segments,T.children),slicedSegments:N}}function Dn(T,W,N,Y){const xe={};for(const Ge of N)if(fr(T,W,Ge)&&!Y[Co(Ge)]){const _t=new Ri([],{});xe[Co(Ge)]=_t}return{...Y,...xe}}function li(T,W){const N={};N[je]=W;for(const Y of T)if(""===Y.path&&Co(Y)!==je){const xe=new Ri([],{});N[Co(Y)]=xe}return N}function fr(T,W,N){return(!(T.hasChildren()||W.length>0)||"full"!==N.pathMatch)&&""===N.path}class ds{}class To{constructor(W,N,Y,xe,Ge,_t,Qt){this.injector=W,this.configLoader=N,this.rootComponentType=Y,this.config=xe,this.urlTree=Ge,this.paramsInheritanceStrategy=_t,this.urlSerializer=Qt,this.applyRedirects=new Se(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(W){return new l.wOt(4002,`'${W.segmentGroup}'`)}recognize(){const W=kt(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(W).pipe((0,He.T)(N=>{const Y=new Yo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},je,this.rootComponentType,null,{}),xe=new no(Y,N),Ge=new Pa("",xe),_t=function yr(T,W,N=null,Y=null){return ao(us(T),W,N,Y)}(Y,[],this.urlTree.queryParams,this.urlTree.fragment);return _t.queryParams=this.urlTree.queryParams,Ge.url=this.urlSerializer.serialize(_t),this.inheritParamsAndData(Ge._root,null),{state:Ge,tree:_t}}))}match(W){return this.processSegmentGroup(this.injector,this.config,W,je).pipe((0,Ve.W)(Y=>{if(Y instanceof Xa)return this.urlTree=Y.urlTree,this.match(Y.urlTree.root);throw Y instanceof Ua?this.noMatchError(Y):Y}))}inheritParamsAndData(W,N){const Y=W.value,xe=Na(Y,N,this.paramsInheritanceStrategy);Y.params=Object.freeze(xe.params),Y.data=Object.freeze(xe.data),W.children.forEach(Ge=>this.inheritParamsAndData(Ge,Y))}processSegmentGroup(W,N,Y,xe){return 0===Y.segments.length&&Y.hasChildren()?this.processChildren(W,N,Y):this.processSegment(W,N,Y,Y.segments,xe,!0).pipe((0,He.T)(Ge=>Ge instanceof no?[Ge]:[]))}processChildren(W,N,Y){const xe=[];for(const Ge of Object.keys(Y.children))"primary"===Ge?xe.unshift(Ge):xe.push(Ge);return(0,h.H)(xe).pipe((0,_e.H)(Ge=>{const _t=Y.children[Ge],Qt=function ql(T,W){const N=T.filter(Y=>Co(Y)===W);return N.push(...T.filter(Y=>Co(Y)!==W)),N}(N,Ge);return this.processSegmentGroup(W,Qt,_t,Ge)}),function V(T,W){return(0,ue.N)(function Ne(T,W,N,Y,xe){return(Ge,_t)=>{let Qt=N,jt=W,ei=0;Ge.subscribe((0,Ce._)(_t,Ai=>{const Vr=ei++;jt=Qt?T(jt,Ai,Vr):(Qt=!0,Ai),Y&&_t.next(jt)},xe&&(()=>{Qt&&_t.next(jt),_t.complete()})))}}(T,W,arguments.length>=2,!0))}((Ge,_t)=>(Ge.push(..._t),Ge)),le(null),function Ot(T,W){const N=arguments.length>=2;return Y=>Y.pipe(T?(0,pt.p)((xe,Ge)=>T(xe,Ge,Y)):j.D,Oe(1),N?le(W):x(()=>new ie.G))}(),(0,ct.Z)(Ge=>{if(null===Ge)return bo(Y);const _t=yn(Ge);return function Tr(T){T.sort((W,N)=>W.value.outlet===je?-1:N.value.outlet===je?1:W.value.outlet.localeCompare(N.value.outlet))}(_t),(0,fe.of)(_t)}))}processSegment(W,N,Y,xe,Ge,_t){return(0,h.H)(N).pipe((0,_e.H)(Qt=>this.processSegmentAgainstRoute(Qt._injector??W,N,Qt,Y,xe,Ge,_t).pipe((0,Ve.W)(jt=>{if(jt instanceof Ua)return(0,fe.of)(null);throw jt}))),J(Qt=>!!Qt),(0,Ve.W)(Qt=>{if(Hl(Qt))return function Zs(T,W,N){return 0===W.length&&!T.children[N]}(Y,xe,Ge)?(0,fe.of)(new ds):bo(Y);throw Qt}))}processSegmentAgainstRoute(W,N,Y,xe,Ge,_t,Qt){return function ws(T,W,N,Y){return!!(Co(T)===Y||Y!==je&&fr(W,N,T))&&Fe(W,T,N).matched}(Y,xe,Ge,_t)?void 0===Y.redirectTo?this.matchSegmentAgainstRoute(W,xe,Y,Ge,_t):this.allowRedirects&&Qt?this.expandSegmentAgainstRouteUsingRedirect(W,xe,N,Y,Ge,_t):bo(xe):bo(xe)}expandSegmentAgainstRouteUsingRedirect(W,N,Y,xe,Ge,_t){const{matched:Qt,consumedSegments:jt,positionalParamSegments:ei,remainingSegments:Ai}=Fe(N,xe,Ge);if(!Qt)return bo(N);xe.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Vr=this.applyRedirects.applyRedirectCommands(jt,xe.redirectTo,ei);return this.applyRedirects.lineralizeSegments(xe,Vr).pipe((0,ct.Z)(Io=>this.processSegment(W,Y,N,Io.concat(Ai),_t,!1)))}matchSegmentAgainstRoute(W,N,Y,xe,Ge){const _t=me(N,Y,xe,W);return"**"===Y.path&&(N.children={}),_t.pipe((0,ke.n)(Qt=>Qt.matched?this.getChildConfig(W=Y._injector??W,Y,xe).pipe((0,ke.n)(({routes:jt})=>{const ei=Y._loadedInjector??W,{consumedSegments:Ai,remainingSegments:Vr,parameters:Io}=Qt,mc=new Yo(Ai,Io,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function il(T){return T.data||{}}(Y),Co(Y),Y.component??Y._loadedComponent??null,Y,function Ka(T){return T.resolve||{}}(Y)),{segmentGroup:lu,slicedSegments:gc}=kt(N,Ai,Vr,jt);if(0===gc.length&&lu.hasChildren())return this.processChildren(ei,jt,lu).pipe((0,He.T)(Al=>null===Al?null:new no(mc,Al)));if(0===jt.length&&0===gc.length)return(0,fe.of)(new no(mc,[]));const Nc=Co(Y)===Ge;return this.processSegment(ei,jt,lu,gc,Nc?je:Ge,!0).pipe((0,He.T)(Al=>new no(mc,Al instanceof no?[Al]:[])))})):bo(N)))}getChildConfig(W,N,Y){return N.children?(0,fe.of)({routes:N.children,injector:W}):N.loadChildren?void 0!==N._loadedRoutes?(0,fe.of)({routes:N._loadedRoutes,injector:N._loadedInjector}):function Ba(T,W,N,Y){const xe=W.canLoad;if(void 0===xe||0===xe.length)return(0,fe.of)(!0);const Ge=xe.map(_t=>{const Qt=qs(_t,T);return Tt(function Xe(T){return T&&Me(T.canLoad)}(Qt)?Qt.canLoad(W,N):(0,l.N4e)(T,()=>Qt(W,N)))});return(0,fe.of)(Ge).pipe(tl(),Ao())}(W,N,Y).pipe((0,ct.Z)(xe=>xe?this.configLoader.loadChildren(W,N).pipe((0,Ee.M)(Ge=>{N._loadedRoutes=Ge.routes,N._loadedInjector=Ge.injector})):function et(T){return(0,I.$)(qa(!1,Us.GuardRejected))}())):(0,fe.of)({routes:[],injector:W})}}function Gl(T){const W=T.value.routeConfig;return W&&""===W.path}function yn(T){const W=[],N=new Set;for(const Y of T){if(!Gl(Y)){W.push(Y);continue}const xe=W.find(Ge=>Y.value.routeConfig===Ge.value.routeConfig);void 0!==xe?(xe.children.push(...Y.children),N.add(xe)):W.push(Y)}for(const Y of N){const xe=yn(Y.children);W.push(new no(Y.value,xe))}return W.filter(Y=>!N.has(Y))}function D(T){const W=T.children.map(N=>D(N)).flat();return[T,...W]}function nt(T){return(0,ke.n)(W=>{const N=T(W);return N?(0,h.H)(N).pipe((0,He.T)(()=>W)):(0,fe.of)(W)})}let vt=(()=>{class T{buildTitle(N){let Y,xe=N.root;for(;void 0!==xe;)Y=this.getResolvedTitleForRoute(xe)??Y,xe=xe.children.find(Ge=>Ge.outlet===je);return Y}getResolvedTitleForRoute(N){return N.data[yt]}static{this.\u0275fac=function(Y){return new(Y||T)}}static{this.\u0275prov=l.jDH({token:T,factory:()=>(0,l.WQX)(Pt),providedIn:"root"})}}return T})(),Pt=(()=>{class T extends vt{constructor(N){super(),this.title=N}updateTitle(N){const Y=this.buildTitle(N);void 0!==Y&&this.title.setTitle(Y)}static{this.\u0275fac=function(Y){return new(Y||T)(l.KVO(st.hE))}}static{this.\u0275prov=l.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})();const Lt=new l.nKC("",{providedIn:"root",factory:()=>({})}),Jt=new l.nKC("");let oi=(()=>{class T{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,l.WQX)(l.Ql9)}loadComponent(N){if(this.componentLoaders.get(N))return this.componentLoaders.get(N);if(N._loadedComponent)return(0,fe.of)(N._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(N);const Y=Tt(N.loadComponent()).pipe((0,He.T)(xr),(0,Ee.M)(Ge=>{this.onLoadEndListener&&this.onLoadEndListener(N),N._loadedComponent=Ge}),(0,Ut.j)(()=>{this.componentLoaders.delete(N)})),xe=new ye(Y,()=>new Te.B).pipe(Re());return this.componentLoaders.set(N,xe),xe}loadChildren(N,Y){if(this.childrenLoaders.get(Y))return this.childrenLoaders.get(Y);if(Y._loadedRoutes)return(0,fe.of)({routes:Y._loadedRoutes,injector:Y._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(Y);const Ge=function pi(T,W,N,Y){return Tt(T.loadChildren()).pipe((0,He.T)(xr),(0,ct.Z)(xe=>xe instanceof l.Co$||Array.isArray(xe)?(0,fe.of)(xe):(0,h.H)(W.compileModuleAsync(xe))),(0,He.T)(xe=>{Y&&Y(T);let Ge,_t,Qt=!1;return Array.isArray(xe)?(_t=xe,!0):(Ge=xe.create(N).injector,_t=Ge.get(Jt,[],{optional:!0,self:!0}).flat()),{routes:_t.map(Ja),injector:Ge}}))}(Y,this.compiler,N,this.onLoadEndListener).pipe((0,Ut.j)(()=>{this.childrenLoaders.delete(Y)})),_t=new ye(Ge,()=>new Te.B).pipe(Re());return this.childrenLoaders.set(Y,_t),_t}static{this.\u0275fac=function(Y){return new(Y||T)}}static{this.\u0275prov=l.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})();function xr(T){return function bi(T){return T&&"object"==typeof T&&"default"in T}(T)?T.default:T}let Zn=(()=>{class T{static{this.\u0275fac=function(Y){return new(Y||T)}}static{this.\u0275prov=l.jDH({token:T,factory:()=>(0,l.WQX)(Ji),providedIn:"root"})}}return T})(),Ji=(()=>{class T{shouldProcessUrl(N){return!0}extract(N){return N}merge(N,Y){return N}static{this.\u0275fac=function(Y){return new(Y||T)}}static{this.\u0275prov=l.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})();const xi=new l.nKC(""),P=new l.nKC("");function we(T,W,N){const Y=T.get(P),xe=T.get(We.qQ);return T.get(l.SKi).runOutsideAngular(()=>{if(!xe.startViewTransition||Y.skipNextTransition)return Y.skipNextTransition=!1,new Promise(ei=>setTimeout(ei));let Ge;const _t=new Promise(ei=>{Ge=ei}),Qt=xe.startViewTransition(()=>(Ge(),function se(T){return new Promise(W=>{(0,l.mal)(W,{injector:T})})}(T))),{onViewTransitionCreated:jt}=Y;return jt&&(0,l.N4e)(T,()=>jt({transition:Qt,from:W,to:N})),_t})}let be=(()=>{class T{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Te.B,this.transitionAbortSubject=new Te.B,this.configLoader=(0,l.WQX)(oi),this.environmentInjector=(0,l.WQX)(l.uvJ),this.urlSerializer=(0,l.WQX)(qi),this.rootContexts=(0,l.WQX)(js),this.location=(0,l.WQX)(We.aZ),this.inputBindingEnabled=null!==(0,l.WQX)(Wo,{optional:!0}),this.titleStrategy=(0,l.WQX)(vt),this.options=(0,l.WQX)(Lt,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,l.WQX)(Zn),this.createViewTransition=(0,l.WQX)(xi,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,fe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=xe=>this.events.next(new Hr(xe)),this.configLoader.onLoadStartListener=xe=>this.events.next(new zi(xe))}complete(){this.transitions?.complete()}handleNavigationRequest(N){const Y=++this.navigationId;this.transitions?.next({...this.transitions.value,...N,id:Y})}setupNavigations(N,Y,xe){return this.transitions=new X.t({id:0,currentUrlTree:Y,currentRawUrl:Y,extractedUrl:this.urlHandlingStrategy.extract(Y),urlAfterRedirects:this.urlHandlingStrategy.extract(Y),rawUrl:Y,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Kn,restoredState:null,currentSnapshot:xe.snapshot,targetSnapshot:null,currentRouterState:xe,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,pt.p)(Ge=>0!==Ge.id),(0,He.T)(Ge=>({...Ge,extractedUrl:this.urlHandlingStrategy.extract(Ge.rawUrl)})),(0,ke.n)(Ge=>{let _t=!1,Qt=!1;return(0,fe.of)(Ge).pipe((0,ke.n)(jt=>{if(this.navigationId>Ge.id)return this.cancelNavigationTransition(Ge,"",Us.SupersededByNewNavigation),K.w;this.currentTransition=Ge,this.currentNavigation={id:jt.id,initialUrl:jt.rawUrl,extractedUrl:jt.extractedUrl,trigger:jt.source,extras:jt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const ei=!N.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!ei&&"reload"!==(jt.extras.onSameUrlNavigation??N.onSameUrlNavigation)){const Vr="";return this.events.next(new Ur(jt.id,this.urlSerializer.serialize(jt.rawUrl),Vr,co.IgnoredSameUrlNavigation)),jt.resolve(null),K.w}if(this.urlHandlingStrategy.shouldProcessUrl(jt.rawUrl))return(0,fe.of)(jt).pipe((0,ke.n)(Vr=>{const Io=this.transitions?.getValue();return this.events.next(new Fr(Vr.id,this.urlSerializer.serialize(Vr.extractedUrl),Vr.source,Vr.restoredState)),Io!==this.transitions?.getValue()?K.w:Promise.resolve(Vr)}),function uc(T,W,N,Y,xe,Ge){return(0,ct.Z)(_t=>function xa(T,W,N,Y,xe,Ge,_t="emptyOnly"){return new To(T,W,N,Y,xe,_t,Ge).recognize()}(T,W,N,Y,_t.extractedUrl,xe,Ge).pipe((0,He.T)(({state:Qt,tree:jt})=>({..._t,targetSnapshot:Qt,urlAfterRedirects:jt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,N.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Ee.M)(Vr=>{Ge.targetSnapshot=Vr.targetSnapshot,Ge.urlAfterRedirects=Vr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Vr.urlAfterRedirects};const Io=new Ws(Vr.id,this.urlSerializer.serialize(Vr.extractedUrl),this.urlSerializer.serialize(Vr.urlAfterRedirects),Vr.targetSnapshot);this.events.next(Io)}));if(ei&&this.urlHandlingStrategy.shouldProcessUrl(jt.currentRawUrl)){const{id:Vr,extractedUrl:Io,source:mc,restoredState:lu,extras:gc}=jt,Nc=new Fr(Vr,this.urlSerializer.serialize(Io),mc,lu);this.events.next(Nc);const Al=Ml(this.rootComponentType).snapshot;return this.currentTransition=Ge={...jt,targetSnapshot:Al,urlAfterRedirects:Io,extras:{...gc,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Io,(0,fe.of)(Ge)}{const Vr="";return this.events.next(new Ur(jt.id,this.urlSerializer.serialize(jt.extractedUrl),Vr,co.IgnoredByUrlHandlingStrategy)),jt.resolve(null),K.w}}),(0,Ee.M)(jt=>{const ei=new Qs(jt.id,this.urlSerializer.serialize(jt.extractedUrl),this.urlSerializer.serialize(jt.urlAfterRedirects),jt.targetSnapshot);this.events.next(ei)}),(0,He.T)(jt=>(this.currentTransition=Ge={...jt,guards:$a(jt.targetSnapshot,jt.currentSnapshot,this.rootContexts)},Ge)),function au(T,W){return(0,ct.Z)(N=>{const{targetSnapshot:Y,currentSnapshot:xe,guards:{canActivateChecks:Ge,canDeactivateChecks:_t}}=N;return 0===_t.length&&0===Ge.length?(0,fe.of)({...N,guardsResult:!0}):function Wc(T,W,N,Y){return(0,h.H)(T).pipe((0,ct.Z)(xe=>function cc(T,W,N,Y,xe){const Ge=W&&W.routeConfig?W.routeConfig.canDeactivate:null;if(!Ge||0===Ge.length)return(0,fe.of)(!0);const _t=Ge.map(Qt=>{const jt=Vl(W)??xe,ei=qs(Qt,jt);return Tt(function Nr(T){return T&&Me(T.canDeactivate)}(ei)?ei.canDeactivate(T,W,N,Y):(0,l.N4e)(jt,()=>ei(T,W,N,Y))).pipe(J())});return(0,fe.of)(_t).pipe(tl())}(xe.component,xe.route,N,W,Y)),J(xe=>!0!==xe,!0))}(_t,Y,xe,T).pipe((0,ct.Z)(Qt=>Qt&&function ne(T){return"boolean"==typeof T}(Qt)?function _u(T,W,N,Y){return(0,h.H)(W).pipe((0,_e.H)(xe=>(0,Q.x)(function zu(T,W){return null!==T&&W&&W(new Bl(T)),(0,fe.of)(!0)}(xe.route.parent,Y),function Hs(T,W){return null!==T&&W&&W(new El(T)),(0,fe.of)(!0)}(xe.route,Y),function nl(T,W,N){const Y=W[W.length-1],Ge=W.slice(0,W.length-1).reverse().map(_t=>function dl(T){const W=T.routeConfig?T.routeConfig.canActivateChild:null;return W&&0!==W.length?{node:T,guards:W}:null}(_t)).filter(_t=>null!==_t).map(_t=>(0,z.v)(()=>{const Qt=_t.guards.map(jt=>{const ei=Vl(_t.node)??N,Ai=qs(jt,ei);return Tt(function Di(T){return T&&Me(T.canActivateChild)}(Ai)?Ai.canActivateChild(Y,T):(0,l.N4e)(ei,()=>Ai(Y,T))).pipe(J())});return(0,fe.of)(Qt).pipe(tl())}));return(0,fe.of)(Ge).pipe(tl())}(T,xe.path,N),function jc(T,W,N){const Y=W.routeConfig?W.routeConfig.canActivate:null;if(!Y||0===Y.length)return(0,fe.of)(!0);const xe=Y.map(Ge=>(0,z.v)(()=>{const _t=Vl(W)??N,Qt=qs(Ge,_t);return Tt(function Ct(T){return T&&Me(T.canActivate)}(Qt)?Qt.canActivate(W,T):(0,l.N4e)(_t,()=>Qt(W,T))).pipe(J())}));return(0,fe.of)(xe).pipe(tl())}(T,xe.route,N))),J(xe=>!0!==xe,!0))}(Y,Ge,T,W):(0,fe.of)(Qt)),(0,He.T)(Qt=>({...N,guardsResult:Qt})))})}(this.environmentInjector,jt=>this.events.next(jt)),(0,Ee.M)(jt=>{if(Ge.guardsResult=jt.guardsResult,qr(jt.guardsResult))throw Wa(0,jt.guardsResult);const ei=new As(jt.id,this.urlSerializer.serialize(jt.extractedUrl),this.urlSerializer.serialize(jt.urlAfterRedirects),jt.targetSnapshot,!!jt.guardsResult);this.events.next(ei)}),(0,pt.p)(jt=>!!jt.guardsResult||(this.cancelNavigationTransition(jt,"",Us.GuardRejected),!1)),nt(jt=>{if(jt.guards.canActivateChecks.length)return(0,fe.of)(jt).pipe((0,Ee.M)(ei=>{const Ai=new Po(ei.id,this.urlSerializer.serialize(ei.extractedUrl),this.urlSerializer.serialize(ei.urlAfterRedirects),ei.targetSnapshot);this.events.next(Ai)}),(0,ke.n)(ei=>{let Ai=!1;return(0,fe.of)(ei).pipe(function Ie(T,W){return(0,ct.Z)(N=>{const{targetSnapshot:Y,guards:{canActivateChecks:xe}}=N;if(!xe.length)return(0,fe.of)(N);const Ge=new Set(xe.map(jt=>jt.route)),_t=new Set;for(const jt of Ge)if(!_t.has(jt))for(const ei of D(jt))_t.add(ei);let Qt=0;return(0,h.H)(_t).pipe((0,_e.H)(jt=>Ge.has(jt)?function F(T,W,N,Y){const xe=T.routeConfig,Ge=T._resolve;return void 0!==xe?.title&&!ur(xe)&&(Ge[yt]=xe.title),function oe(T,W,N,Y){const xe=vn(T);if(0===xe.length)return(0,fe.of)({});const Ge={};return(0,h.H)(xe).pipe((0,ct.Z)(_t=>function De(T,W,N,Y){const xe=Vl(W)??Y,Ge=qs(T,xe);return Tt(Ge.resolve?Ge.resolve(W,N):(0,l.N4e)(xe,()=>Ge(W,N)))}(T[_t],W,N,Y).pipe(J(),(0,Ee.M)(Qt=>{Ge[_t]=Qt}))),Oe(1),(0,ot.u)(Ge),(0,Ve.W)(_t=>Hl(_t)?K.w:(0,I.$)(_t)))}(Ge,T,W,Y).pipe((0,He.T)(_t=>(T._resolvedData=_t,T.data=Na(T,T.parent,N).resolve,null)))}(jt,Y,T,W):(jt.data=Na(jt,jt.parent,T).resolve,(0,fe.of)(void 0))),(0,Ee.M)(()=>Qt++),Oe(1),(0,ct.Z)(jt=>Qt===_t.size?(0,fe.of)(N):K.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Ee.M)({next:()=>Ai=!0,complete:()=>{Ai||this.cancelNavigationTransition(ei,"",Us.NoDataFromResolver)}}))}),(0,Ee.M)(ei=>{const Ai=new Oo(ei.id,this.urlSerializer.serialize(ei.extractedUrl),this.urlSerializer.serialize(ei.urlAfterRedirects),ei.targetSnapshot);this.events.next(Ai)}))}),nt(jt=>{const ei=Ai=>{const Vr=[];Ai.routeConfig?.loadComponent&&!Ai.routeConfig._loadedComponent&&Vr.push(this.configLoader.loadComponent(Ai.routeConfig).pipe((0,Ee.M)(Io=>{Ai.component=Io}),(0,He.T)(()=>{})));for(const Io of Ai.children)Vr.push(...ei(Io));return Vr};return(0,de.z)(ei(jt.targetSnapshot.root)).pipe(le(null),(0,Ke.s)(1))}),nt(()=>this.afterPreactivation()),(0,ke.n)(()=>{const{currentSnapshot:jt,targetSnapshot:ei}=Ge,Ai=this.createViewTransition?.(this.environmentInjector,jt.root,ei.root);return Ai?(0,h.H)(Ai).pipe((0,He.T)(()=>Ge)):(0,fe.of)(Ge)}),(0,He.T)(jt=>{const ei=function wl(T,W,N){const Y=ma(T,W._root,N?N._root:void 0);return new Qo(Y,W)}(N.routeReuseStrategy,jt.targetSnapshot,jt.currentRouterState);return this.currentTransition=Ge={...jt,targetRouterState:ei},this.currentNavigation.targetRouterState=ei,Ge}),(0,Ee.M)(()=>{this.events.next(new ca)}),((T,W,N,Y)=>(0,He.T)(xe=>(new ja(W,xe.targetRouterState,xe.currentRouterState,N,Y).activate(T),xe)))(this.rootContexts,N.routeReuseStrategy,jt=>this.events.next(jt),this.inputBindingEnabled),(0,Ke.s)(1),(0,Ee.M)({next:jt=>{_t=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Br(jt.id,this.urlSerializer.serialize(jt.extractedUrl),this.urlSerializer.serialize(jt.urlAfterRedirects))),this.titleStrategy?.updateTitle(jt.targetRouterState.snapshot),jt.resolve(!0)},complete:()=>{_t=!0}}),(0,ze.Q)(this.transitionAbortSubject.pipe((0,Ee.M)(jt=>{throw jt}))),(0,Ut.j)(()=>{!_t&&!Qt&&this.cancelNavigationTransition(Ge,"",Us.SupersededByNewNavigation),this.currentTransition?.id===Ge.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,Ve.W)(jt=>{if(Qt=!0,Cc(jt))this.events.next(new Rr(Ge.id,this.urlSerializer.serialize(Ge.extractedUrl),jt.message,jt.cancellationCode)),function Za(T){return Cc(T)&&qr(T.url)}(jt)?this.events.next(new br(jt.url)):Ge.resolve(!1);else{this.events.next(new Ls(Ge.id,this.urlSerializer.serialize(Ge.extractedUrl),jt,Ge.targetSnapshot??void 0));try{Ge.resolve(N.errorHandler(jt))}catch(ei){this.options.resolveNavigationPromiseOnError?Ge.resolve(!1):Ge.reject(ei)}}return K.w}))}))}cancelNavigationTransition(N,Y,xe){const Ge=new Rr(N.id,this.urlSerializer.serialize(N.extractedUrl),Y,xe);this.events.next(Ge),N.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(Y){return new(Y||T)}}static{this.\u0275prov=l.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})();function mt(T){return T!==Kn}let Xt=(()=>{class T{static{this.\u0275fac=function(Y){return new(Y||T)}}static{this.\u0275prov=l.jDH({token:T,factory:()=>(0,l.WQX)(Qn),providedIn:"root"})}}return T})();class Kt{shouldDetach(W){return!1}store(W,N){}shouldAttach(W){return!1}retrieve(W){return null}shouldReuseRoute(W,N){return W.routeConfig===N.routeConfig}}let Qn=(()=>{class T extends Kt{static{this.\u0275fac=(()=>{let N;return function(xe){return(N||(N=l.xGo(T)))(xe||T)}})()}static{this.\u0275prov=l.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})(),Dr=(()=>{class T{static{this.\u0275fac=function(Y){return new(Y||T)}}static{this.\u0275prov=l.jDH({token:T,factory:()=>(0,l.WQX)(es),providedIn:"root"})}}return T})(),es=(()=>{class T extends Dr{constructor(){super(...arguments),this.location=(0,l.WQX)(We.aZ),this.urlSerializer=(0,l.WQX)(qi),this.options=(0,l.WQX)(Lt,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,l.WQX)(Zn),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new $i,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ml(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(N){return this.location.subscribe(Y=>{"popstate"===Y.type&&N(Y.url,Y.state)})}handleRouterEvent(N,Y){if(N instanceof Fr)this.stateMemento=this.createStateMemento();else if(N instanceof Ur)this.rawUrlTree=Y.initialUrl;else if(N instanceof Ws){if("eager"===this.urlUpdateStrategy&&!Y.extras.skipLocationChange){const xe=this.urlHandlingStrategy.merge(Y.finalUrl,Y.initialUrl);this.setBrowserUrl(xe,Y)}}else N instanceof ca?(this.currentUrlTree=Y.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(Y.finalUrl,Y.initialUrl),this.routerState=Y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Y))):N instanceof Rr&&(N.code===Us.GuardRejected||N.code===Us.NoDataFromResolver)?this.restoreHistory(Y):N instanceof Ls?this.restoreHistory(Y,!0):N instanceof Br&&(this.lastSuccessfulId=N.id,this.currentPageId=this.browserPageId)}setBrowserUrl(N,Y){const xe=this.urlSerializer.serialize(N);if(this.location.isCurrentPathEqualTo(xe)||Y.extras.replaceUrl){const _t={...Y.extras.state,...this.generateNgRouterState(Y.id,this.browserPageId)};this.location.replaceState(xe,"",_t)}else{const Ge={...Y.extras.state,...this.generateNgRouterState(Y.id,this.browserPageId+1)};this.location.go(xe,"",Ge)}}restoreHistory(N,Y=!1){if("computed"===this.canceledNavigationResolution){const Ge=this.currentPageId-this.browserPageId;0!==Ge?this.location.historyGo(Ge):this.currentUrlTree===N.finalUrl&&0===Ge&&(this.resetState(N),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(Y&&this.resetState(N),this.resetUrlToCurrentUrlTree())}resetState(N){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,N.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(N,Y){return"computed"===this.canceledNavigationResolution?{navigationId:N,\u0275routerPageId:Y}:{navigationId:N}}static{this.\u0275fac=(()=>{let N;return function(xe){return(N||(N=l.xGo(T)))(xe||T)}})()}static{this.\u0275prov=l.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})();var hs=function(T){return T[T.COMPLETE=0]="COMPLETE",T[T.FAILED=1]="FAILED",T[T.REDIRECTING=2]="REDIRECTING",T}(hs||{});function Cs(T){throw T}const Fi={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lt={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Rn=(()=>{class T{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,l.WQX)(l.H3F),this.stateManager=(0,l.WQX)(Dr),this.options=(0,l.WQX)(Lt,{optional:!0})||{},this.pendingTasks=(0,l.WQX)(l.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,l.WQX)(be),this.urlSerializer=(0,l.WQX)(qi),this.location=(0,l.WQX)(We.aZ),this.urlHandlingStrategy=(0,l.WQX)(Zn),this._events=new Te.B,this.errorHandler=this.options.errorHandler||Cs,this.navigated=!1,this.routeReuseStrategy=(0,l.WQX)(Xt),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,l.WQX)(Jt,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,l.WQX)(Wo,{optional:!0}),this.eventsSubscription=new ee.yU,this.isNgZoneEnabled=(0,l.WQX)(l.SKi)instanceof l.SKi&&l.SKi.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:N=>{this.console.warn(N)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const N=this.navigationTransitions.events.subscribe(Y=>{try{const xe=this.navigationTransitions.currentTransition,Ge=this.navigationTransitions.currentNavigation;if(null!==xe&&null!==Ge)if(this.stateManager.handleRouterEvent(Y,Ge),Y instanceof Rr&&Y.code!==Us.Redirect&&Y.code!==Us.SupersededByNewNavigation)this.navigated=!0;else if(Y instanceof Br)this.navigated=!0;else if(Y instanceof br){const _t=this.urlHandlingStrategy.merge(Y.url,xe.currentRawUrl),Qt={info:xe.extras.info,skipLocationChange:xe.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mt(xe.source)};this.scheduleNavigation(_t,Kn,null,Qt,{resolve:xe.resolve,reject:xe.reject,promise:xe.promise})}(function bn(T){return!(T instanceof ca||T instanceof br)})(Y)&&this._events.next(Y)}catch(xe){this.navigationTransitions.transitionAbortSubject.next(xe)}});this.eventsSubscription.add(N)}resetRootComponentType(N){this.routerState.root.component=N,this.navigationTransitions.rootComponentType=N}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Kn,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((N,Y)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(N,"popstate",Y)},0)})}navigateToSyncWithBrowser(N,Y,xe){const Ge={replaceUrl:!0},_t=xe?.navigationId?xe:null;if(xe){const jt={...xe};delete jt.navigationId,delete jt.\u0275routerPageId,0!==Object.keys(jt).length&&(Ge.state=jt)}const Qt=this.parseUrl(N);this.scheduleNavigation(Qt,Y,_t,Ge)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(N){this.config=N.map(Ja),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(N,Y={}){const{relativeTo:xe,queryParams:Ge,fragment:_t,queryParamsHandling:Qt,preserveFragment:jt}=Y,ei=jt?this.currentUrlTree.fragment:_t;let Vr,Ai=null;switch(Qt){case"merge":Ai={...this.currentUrlTree.queryParams,...Ge};break;case"preserve":Ai=this.currentUrlTree.queryParams;break;default:Ai=Ge||null}null!==Ai&&(Ai=this.removeEmptyProps(Ai));try{Vr=us(xe?xe.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof N[0]||!N[0].startsWith("/"))&&(N=[]),Vr=this.currentUrlTree.root}return ao(Vr,N,Ai,ei??null)}navigateByUrl(N,Y={skipLocationChange:!1}){const xe=qr(N)?N:this.parseUrl(N),Ge=this.urlHandlingStrategy.merge(xe,this.rawUrlTree);return this.scheduleNavigation(Ge,Kn,null,Y)}navigate(N,Y={skipLocationChange:!1}){return function en(T){for(let W=0;W<T.length;W++)if(null==T[W])throw new l.wOt(4008,!1)}(N),this.navigateByUrl(this.createUrlTree(N,Y),Y)}serializeUrl(N){return this.urlSerializer.serialize(N)}parseUrl(N){try{return this.urlSerializer.parse(N)}catch{return this.urlSerializer.parse("/")}}isActive(N,Y){let xe;if(xe=!0===Y?{...Fi}:!1===Y?{...lt}:Y,qr(N))return Yn(this.currentUrlTree,N,xe);const Ge=this.parseUrl(N);return Yn(this.currentUrlTree,Ge,xe)}removeEmptyProps(N){return Object.entries(N).reduce((Y,[xe,Ge])=>(null!=Ge&&(Y[xe]=Ge),Y),{})}scheduleNavigation(N,Y,xe,Ge,_t){if(this.disposed)return Promise.resolve(!1);let Qt,jt,ei;_t?(Qt=_t.resolve,jt=_t.reject,ei=_t.promise):ei=new Promise((Vr,Io)=>{Qt=Vr,jt=Io});const Ai=this.pendingTasks.add();return function ar(T,W){T.events.pipe((0,pt.p)(N=>N instanceof Br||N instanceof Rr||N instanceof Ls||N instanceof Ur),(0,He.T)(N=>N instanceof Br||N instanceof Ur?hs.COMPLETE:N instanceof Rr&&(N.code===Us.Redirect||N.code===Us.SupersededByNewNavigation)?hs.REDIRECTING:hs.FAILED),(0,pt.p)(N=>N!==hs.REDIRECTING),(0,Ke.s)(1)).subscribe(()=>{W()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Ai))}),this.navigationTransitions.handleNavigationRequest({source:Y,restoredState:xe,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:N,extras:Ge,resolve:Qt,reject:jt,promise:ei,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ei.catch(Vr=>Promise.reject(Vr))}static{this.\u0275fac=function(Y){return new(Y||T)}}static{this.\u0275prov=l.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})();const $s=new l.nKC("");function Jo(T,...W){return(0,l.EmA)([{provide:Jt,multi:!0,useValue:T},[],{provide:pa,useFactory:Js,deps:[Rn]},{provide:l.iLQ,multi:!0,useFactory:Wl},W.map(N=>N.\u0275providers)])}function Js(T){return T.routerState.root}function Wl(){const T=(0,l.WQX)(l.zZn);return W=>{const N=T.get(l.o8S);if(W!==N.components[0])return;const Y=T.get(Rn),xe=T.get(oa);1===T.get(rs)&&Y.initialNavigation(),T.get(hc,null,l.$GK.Optional)?.setUpPreloading(),T.get($s,null,l.$GK.Optional)?.init(),Y.resetRootComponentType(N.componentTypes[0]),xe.closed||(xe.next(),xe.complete(),xe.unsubscribe())}}const oa=new l.nKC("",{factory:()=>new Te.B}),rs=new l.nKC("",{providedIn:"root",factory:()=>1}),hc=new l.nKC("");function Sa(T){return function io(T,W){return{\u0275kind:T,\u0275providers:W}}(9,[{provide:xi,useValue:we},{provide:P,useValue:{skipNextTransition:!!T?.skipInitialTransition,...T}}])}},4221:(Rt,Je,M)=>{"use strict";M.d(Je,{Lw:()=>gf,DI:()=>Af,$G:()=>ui,HC:()=>Sa,Bq:()=>yf,UN:()=>Mi,X9:()=>ed,Um:()=>Ju,sy:()=>bh,Gx:()=>hu,Ri:()=>Su,WA:()=>td,Pv:()=>Sh,m_:()=>Eh,RS:()=>Pm,md:()=>Up,n8:()=>Tf});var l=M(4438),H=M(9079),h=M(1985),fe=M(983),X=M(7673),ie=M(1413),de=M(8750),Q=M(1397),z=M(7441),L=M(8071),I=M(6450);const K=["addListener","removeListener"],te=["addEventListener","removeEventListener"],ee=["on","off"];function ue(m,A,f,_){if((0,L.T)(f)&&(_=f,f=void 0),_)return ue(m,A,f).pipe((0,I.I)(_));const[w,ge]=function Te(m){return(0,L.T)(m.addEventListener)&&(0,L.T)(m.removeEventListener)}(m)?te.map(Be=>wt=>m[Be](A,wt,f)):function Re(m){return(0,L.T)(m.addListener)&&(0,L.T)(m.removeListener)}(m)?K.map(Ce(m,A)):function ye(m){return(0,L.T)(m.on)&&(0,L.T)(m.off)}(m)?ee.map(Ce(m,A)):[];if(!w&&(0,z.X)(m))return(0,Q.Z)(Be=>ue(Be,A,f))((0,de.Tg)(m));if(!w)throw new TypeError("Invalid event target");return new h.c(Be=>{const wt=(...Vt)=>Be.next(1<Vt.length?Vt:Vt[0]);return w(wt),()=>ge(wt)})}function Ce(m,A){return f=>_=>m[f](A,_)}var We=M(1584);const{isArray:He}=Array;function ke(m){return 1===m.length&&He(m[0])?m[0]:m}var Ke=M(4360);function St(...m){return 1===(m=ke(m)).length?(0,de.Tg)(m[0]):new h.c(function pt(m){return A=>{let f=[];for(let _=0;f&&!A.closed&&_<m.length;_++)f.push((0,de.Tg)(m[_]).subscribe((0,Ke._)(A,w=>{if(f){for(let ge=0;ge<f.length;ge++)ge!==_&&f[ge].unsubscribe();f=null}A.next(w)})))}}(m))}M(6365);var le=M(9326);function j(...m){const A=(0,le.ms)(m),f=ke(m);return f.length?new h.c(_=>{let w=f.map(()=>[]),ge=f.map(()=>!1);_.add(()=>{w=ge=null});for(let Be=0;!_.closed&&Be<f.length;Be++)(0,de.Tg)(f[Be]).subscribe((0,Ke._)(_,wt=>{if(w[Be].push(wt),w.every(Vt=>Vt.length)){const Vt=w.map(nn=>nn.shift());_.next(A?A(...Vt):Vt),w.some((nn,ln)=>!nn.length&&ge[ln])&&_.complete()}},()=>{ge[Be]=!0,!w[Be].length&&_.complete()}));return()=>{w=ge=null}}):fe.w}M(6648);var J=M(8793),Ee=M(6977),Ve=M(5964),Ne=M(6697),V=M(8141),Oe=M(6354),Ot=M(9974),ot=M(3669),Ut=M(5343);function ze(...m){const A=(0,le.ms)(m);return(0,Ot.N)((f,_)=>{const w=m.length,ge=new Array(w);let Be=m.map(()=>!1),wt=!1;for(let Vt=0;Vt<w;Vt++)(0,de.Tg)(m[Vt]).subscribe((0,Ke._)(_,nn=>{ge[Vt]=nn,!wt&&!Be[Vt]&&(Be[Vt]=!0,(wt=Be.every(ot.D))&&(Be=null))},Ut.l));f.subscribe((0,Ke._)(_,Vt=>{if(wt){const nn=[Vt,...ge];_.next(A?A(...nn):nn)}}))})}var Mt=M(8839),je=M(3703);function yt(m,A){return A?f=>(0,J.x)(A.pipe((0,Ne.s)(1),function st(){return(0,Ot.N)((m,A)=>{m.subscribe((0,Ke._)(A,Ut.l))})}()),f.pipe(yt(m))):(0,Q.Z)((f,_)=>(0,de.Tg)(m(f,_)).pipe((0,Ne.s)(1),(0,je.u)(f)))}var dn=M(5558),fn=M(9172);function Gt(m,A){return m===A}var at=M(980),Dt=M(177),un=(M(9417),{left:"right",right:"left",bottom:"top",top:"bottom"});function Ln(m){return m.replace(/left|right|bottom|top/g,function(A){return un[A]})}function Yn(m){return m.split("-")[0]}var Vn={start:"end",end:"start"};function Yr(m){return m.replace(/start|end/g,function(A){return Vn[A]})}var Gn="top",An="bottom",ii="right",Si="left",$i="auto",Ri=[Gn,An,ii,Si],Ki="start",Pi="end",ri="viewport",qi="popper",wi=Ri.reduce(function(m,A){return m.concat([A+"-"+Ki,A+"-"+Pi])},[]),Cr=[].concat(Ri,[$i]).reduce(function(m,A){return m.concat([A,A+"-"+Ki,A+"-"+Pi])},[]),on=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function mn(m){if(null==m)return window;if("[object Window]"!==m.toString()){var A=m.ownerDocument;return A&&A.defaultView||window}return m}function Un(m){return m instanceof mn(m).Element||m instanceof Element}function Qi(m){return m instanceof mn(m).HTMLElement||m instanceof HTMLElement}function si(m){return!(typeof ShadowRoot>"u")&&(m instanceof mn(m).ShadowRoot||m instanceof ShadowRoot)}function Oi(m){return((Un(m)?m.ownerDocument:m.document)||window.document).documentElement}var kr=Math.max,Pn=Math.min,Hi=Math.round;function Ds(){var m=navigator.userAgentData;return null!=m&&m.brands&&Array.isArray(m.brands)?m.brands.map(function(A){return A.brand+"/"+A.version}).join(" "):navigator.userAgent}function Ir(){return!/^((?!chrome|android).)*safari/i.test(Ds())}function yi(m,A,f){void 0===A&&(A=!1),void 0===f&&(f=!1);var _=m.getBoundingClientRect(),w=1,ge=1;A&&Qi(m)&&(w=m.offsetWidth>0&&Hi(_.width)/m.offsetWidth||1,ge=m.offsetHeight>0&&Hi(_.height)/m.offsetHeight||1);var wt=(Un(m)?mn(m):window).visualViewport,Vt=!Ir()&&f,nn=(_.left+(Vt&&wt?wt.offsetLeft:0))/w,ln=(_.top+(Vt&&wt?wt.offsetTop:0))/ge,Jn=_.width/w,ai=_.height/ge;return{width:Jn,height:ai,top:ln,right:nn+Jn,bottom:ln+ai,left:nn,x:nn,y:ln}}function Cn(m){var A=mn(m);return{scrollLeft:A.pageXOffset,scrollTop:A.pageYOffset}}function qr(m){return yi(Oi(m)).left+Cn(m).scrollLeft}function us(m){return mn(m).getComputedStyle(m)}function ms(m){return m?(m.nodeName||"").toLowerCase():null}function sr(m){return"html"===ms(m)?m:m.assignedSlot||m.parentNode||(si(m)?m.host:null)||Oi(m)}function Ms(m){var A=us(m);return/auto|scroll|overlay|hidden/.test(A.overflow+A.overflowY+A.overflowX)}function to(m){return["html","body","#document"].indexOf(ms(m))>=0?m.ownerDocument.body:Qi(m)&&Ms(m)?m:to(sr(m))}function Os(m,A){var f;void 0===A&&(A=[]);var _=to(m),w=_===(null==(f=m.ownerDocument)?void 0:f.body),ge=mn(_),Be=w?[ge].concat(ge.visualViewport||[],Ms(_)?_:[]):_,wt=A.concat(Be);return w?wt:wt.concat(Os(sr(Be)))}function Fs(m){return["table","td","th"].indexOf(ms(m))>=0}function lo(m){return Qi(m)&&"fixed"!==us(m).position?m.offsetParent:null}function Ye(m){for(var A=mn(m),f=lo(m);f&&Fs(f)&&"static"===us(f).position;)f=lo(f);return f&&("html"===ms(f)||"body"===ms(f)&&"static"===us(f).position)?A:f||function Go(m){var A=/firefox/i.test(Ds());if(/Trident/i.test(Ds())&&Qi(m)&&"fixed"===us(m).position)return null;var w=sr(m);for(si(w)&&(w=w.host);Qi(w)&&["html","body"].indexOf(ms(w))<0;){var ge=us(w);if("none"!==ge.transform||"none"!==ge.perspective||"paint"===ge.contain||-1!==["transform","perspective"].indexOf(ge.willChange)||A&&"filter"===ge.willChange||A&&ge.filter&&"none"!==ge.filter)return w;w=w.parentNode}return null}(m)||A}function O(m,A){var f=A.getRootNode&&A.getRootNode();if(m.contains(A))return!0;if(f&&si(f)){var _=A;do{if(_&&m.isSameNode(_))return!0;_=_.parentNode||_.host}while(_)}return!1}function G(m){return Object.assign({},m,{left:m.x,top:m.y,right:m.x+m.width,bottom:m.y+m.height})}function qe(m,A,f){return A===ri?G(function yr(m,A){var f=mn(m),_=Oi(m),w=f.visualViewport,ge=_.clientWidth,Be=_.clientHeight,wt=0,Vt=0;if(w){ge=w.width,Be=w.height;var nn=Ir();(nn||!nn&&"fixed"===A)&&(wt=w.offsetLeft,Vt=w.offsetTop)}return{width:ge,height:Be,x:wt+qr(m),y:Vt}}(m,f)):Un(A)?function ce(m,A){var f=yi(m,!1,"fixed"===A);return f.top=f.top+m.clientTop,f.left=f.left+m.clientLeft,f.bottom=f.top+m.clientHeight,f.right=f.left+m.clientWidth,f.width=m.clientWidth,f.height=m.clientHeight,f.x=f.left,f.y=f.top,f}(A,f):G(function ao(m){var A,f=Oi(m),_=Cn(m),w=null==(A=m.ownerDocument)?void 0:A.body,ge=kr(f.scrollWidth,f.clientWidth,w?w.scrollWidth:0,w?w.clientWidth:0),Be=kr(f.scrollHeight,f.clientHeight,w?w.scrollHeight:0,w?w.clientHeight:0),wt=-_.scrollLeft+qr(m),Vt=-_.scrollTop;return"rtl"===us(w||f).direction&&(wt+=kr(f.clientWidth,w?w.clientWidth:0)-ge),{width:ge,height:Be,x:wt,y:Vt}}(Oi(m)))}function hn(m){return m.split("-")[1]}function zn(m){return["top","bottom"].indexOf(m)>=0?"x":"y"}function Kn(m){var Vt,A=m.reference,f=m.element,_=m.placement,w=_?Yn(_):null,ge=_?hn(_):null,Be=A.x+A.width/2-f.width/2,wt=A.y+A.height/2-f.height/2;switch(w){case Gn:Vt={x:Be,y:A.y-f.height};break;case An:Vt={x:Be,y:A.y+A.height};break;case ii:Vt={x:A.x+A.width,y:wt};break;case Si:Vt={x:A.x-f.width,y:wt};break;default:Vt={x:A.x,y:A.y}}var nn=w?zn(w):null;if(null!=nn){var ln="y"===nn?"height":"width";switch(ge){case Ki:Vt[nn]=Vt[nn]-(A[ln]/2-f[ln]/2);break;case Pi:Vt[nn]=Vt[nn]+(A[ln]/2-f[ln]/2)}}return Vt}function Or(m){return Object.assign({},{top:0,right:0,bottom:0,left:0},m)}function Fr(m,A){return A.reduce(function(f,_){return f[_]=m,f},{})}function Br(m,A){void 0===A&&(A={});var _=A.placement,w=void 0===_?m.placement:_,ge=A.strategy,Be=void 0===ge?m.strategy:ge,wt=A.boundary,Vt=void 0===wt?"clippingParents":wt,nn=A.rootBoundary,ln=void 0===nn?ri:nn,Jn=A.elementContext,ai=void 0===Jn?qi:Jn,di=A.altBoundary,is=void 0!==di&&di,Ar=A.padding,ls=void 0===Ar?0:Ar,os=Or("number"!=typeof ls?ls:Fr(ls,Ri)),Do=m.rects.popper,Zr=m.elements[is?ai===qi?"reference":qi:ai],vs=function tn(m,A,f,_){var w="clippingParents"===A?function ht(m){var A=Os(sr(m)),_=["absolute","fixed"].indexOf(us(m).position)>=0&&Qi(m)?Ye(m):m;return Un(_)?A.filter(function(w){return Un(w)&&O(w,_)&&"body"!==ms(w)}):[]}(m):[].concat(A),ge=[].concat(w,[f]),wt=ge.reduce(function(Vt,nn){var ln=qe(m,nn,_);return Vt.top=kr(ln.top,Vt.top),Vt.right=Pn(ln.right,Vt.right),Vt.bottom=Pn(ln.bottom,Vt.bottom),Vt.left=kr(ln.left,Vt.left),Vt},qe(m,ge[0],_));return wt.width=wt.right-wt.left,wt.height=wt.bottom-wt.top,wt.x=wt.left,wt.y=wt.top,wt}(Un(Zr)?Zr:Zr.contextElement||Oi(m.elements.popper),Vt,ln,Be),oo=yi(m.elements.reference),Ro=Kn({reference:oo,element:Do,strategy:"absolute",placement:w}),No=G(Object.assign({},Do,Ro)),Ca=ai===qi?No:oo,la={top:vs.top-Ca.top+os.top,bottom:Ca.bottom-vs.bottom+os.bottom,left:vs.left-Ca.left+os.left,right:Ca.right-vs.right+os.right},pl=m.modifiersData.offset;if(ai===qi&&pl){var xc=pl[w];Object.keys(la).forEach(function(Ta){var Qc=[ii,An].indexOf(Ta)>=0?1:-1,Yc=[Gn,An].indexOf(Ta)>=0?"y":"x";la[Ta]+=xc[Yc]*Qc})}return la}const Ur={name:"flip",enabled:!0,phase:"main",fn:function Rr(m){var A=m.state,f=m.options,_=m.name;if(!A.modifiersData[_]._skip){for(var w=f.mainAxis,ge=void 0===w||w,Be=f.altAxis,wt=void 0===Be||Be,Vt=f.fallbackPlacements,nn=f.padding,ln=f.boundary,Jn=f.rootBoundary,ai=f.altBoundary,di=f.flipVariations,is=void 0===di||di,Ar=f.allowedAutoPlacements,ls=A.options.placement,os=Yn(ls),Do=Vt||(os!==ls&&is?function co(m){if(Yn(m)===$i)return[];var A=Ln(m);return[Yr(m),A,Yr(A)]}(ls):[Ln(ls)]),Zr=[ls].concat(Do).reduce(function(Zc,ic){return Zc.concat(Yn(ic)===$i?function Us(m,A){void 0===A&&(A={});var w=A.boundary,ge=A.rootBoundary,Be=A.padding,wt=A.flipVariations,Vt=A.allowedAutoPlacements,nn=void 0===Vt?Cr:Vt,ln=hn(A.placement),Jn=ln?wt?wi:wi.filter(function(is){return hn(is)===ln}):Ri,ai=Jn.filter(function(is){return nn.indexOf(is)>=0});0===ai.length&&(ai=Jn);var di=ai.reduce(function(is,Ar){return is[Ar]=Br(m,{placement:Ar,boundary:w,rootBoundary:ge,padding:Be})[Yn(Ar)],is},{});return Object.keys(di).sort(function(is,Ar){return di[is]-di[Ar]})}(A,{placement:ic,boundary:ln,rootBoundary:Jn,padding:nn,flipVariations:is,allowedAutoPlacements:Ar}):ic)},[]),vs=A.rects.reference,oo=A.rects.popper,Ro=new Map,No=!0,Ca=Zr[0],la=0;la<Zr.length;la++){var pl=Zr[la],xc=Yn(pl),Ta=hn(pl)===Ki,Qc=[Gn,An].indexOf(xc)>=0,Yc=Qc?"width":"height",ml=Br(A,{placement:pl,boundary:ln,rootBoundary:Jn,altBoundary:ai,padding:nn}),al=Qc?Ta?ii:Si:Ta?An:Gn;vs[Yc]>oo[Yc]&&(al=Ln(al));var rd=Ln(al),qc=[];if(ge&&qc.push(ml[xc]<=0),wt&&qc.push(ml[al]<=0,ml[rd]<=0),qc.every(function(Zc){return Zc})){Ca=pl,No=!1;break}Ro.set(pl,qc)}if(No)for(var sd=function(ic){var Ld=Zr.find(function(wu){var rc=Ro.get(wu);if(rc)return rc.slice(0,ic).every(function(Dh){return Dh})});if(Ld)return Ca=Ld,"break"},Ec=is?3:1;Ec>0&&"break"!==sd(Ec);Ec--);A.placement!==Ca&&(A.modifiersData[_]._skip=!0,A.placement=Ca,A.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ws(m,A,f){return kr(m,Pn(A,f))}function As(m){var A=yi(m),f=m.offsetWidth,_=m.offsetHeight;return Math.abs(A.width-f)<=1&&(f=A.width),Math.abs(A.height-_)<=1&&(_=A.height),{x:m.offsetLeft,y:m.offsetTop,width:f,height:_}}const Oo={name:"preventOverflow",enabled:!0,phase:"main",fn:function Po(m){var A=m.state,f=m.options,_=m.name,w=f.mainAxis,ge=void 0===w||w,Be=f.altAxis,wt=void 0!==Be&&Be,ai=f.tether,di=void 0===ai||ai,is=f.tetherOffset,Ar=void 0===is?0:is,ls=Br(A,{boundary:f.boundary,rootBoundary:f.rootBoundary,padding:f.padding,altBoundary:f.altBoundary}),os=Yn(A.placement),gs=hn(A.placement),Do=!gs,Zr=zn(os),vs=function Ls(m){return"x"===m?"y":"x"}(Zr),oo=A.modifiersData.popperOffsets,Ro=A.rects.reference,No=A.rects.popper,Ca="function"==typeof Ar?Ar(Object.assign({},A.rects,{placement:A.placement})):Ar,la="number"==typeof Ca?{mainAxis:Ca,altAxis:Ca}:Object.assign({mainAxis:0,altAxis:0},Ca),pl=A.modifiersData.offset?A.modifiersData.offset[A.placement]:null,xc={x:0,y:0};if(oo){if(ge){var Ta,Qc="y"===Zr?Gn:Si,Yc="y"===Zr?An:ii,ml="y"===Zr?"height":"width",al=oo[Zr],rd=al+ls[Qc],qc=al-ls[Yc],fu=di?-No[ml]/2:0,sd=gs===Ki?Ro[ml]:No[ml],Ec=gs===Ki?-No[ml]:-Ro[ml],Mu=A.elements.arrow,Zc=di&&Mu?As(Mu):{width:0,height:0},ic=A.modifiersData["arrow#persistent"]?A.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ld=ic[Qc],wu=ic[Yc],rc=Ws(0,Ro[ml],Zc[ml]),Dh=Do?Ro[ml]/2-fu-rc-Ld-la.mainAxis:sd-rc-Ld-la.mainAxis,If=Do?-Ro[ml]/2+fu+rc+wu+la.mainAxis:Ec+rc+wu+la.mainAxis,Ah=A.elements.arrow&&Ye(A.elements.arrow),Gp=Ah?"y"===Zr?Ah.clientTop||0:Ah.clientLeft||0:0,Jc=null!=(Ta=pl?.[Zr])?Ta:0,Da=al+If-Jc,kd=Ws(di?Pn(rd,al+Dh-Jc-Gp):rd,al,di?kr(qc,Da):qc);oo[Zr]=kd,xc[Zr]=kd-al}if(wt){var od,Cu=oo[vs],Nf="y"===vs?"height":"width",Om=Cu+ls["x"===Zr?Gn:Si],ad=Cu-ls["x"===Zr?An:ii],Pf=-1!==[Gn,Si].indexOf(os),Bd=null!=(od=pl?.[vs])?od:0,Ih=Pf?Om:Cu-Ro[Nf]-No[Nf]-Bd+la.altAxis,jp=Pf?Cu+Ro[Nf]+No[Nf]-Bd-la.altAxis:ad,Of=di&&Pf?function Qs(m,A,f){var _=Ws(m,A,f);return _>f?f:_}(Ih,Cu,jp):Ws(di?Ih:Om,Cu,di?jp:ad);oo[vs]=Of,xc[vs]=Of-Cu}A.modifiersData[_]=xc}},requiresIfExists:["offset"]},ks={name:"arrow",enabled:!0,phase:"main",fn:function Hr(m){var A,f=m.state,_=m.name,w=m.options,ge=f.elements.arrow,Be=f.modifiersData.popperOffsets,wt=Yn(f.placement),Vt=zn(wt),ln=[Si,ii].indexOf(wt)>=0?"height":"width";if(ge&&Be){var Jn=function(A,f){return Or("number"!=typeof(A="function"==typeof A?A(Object.assign({},f.rects,{placement:f.placement})):A)?A:Fr(A,Ri))}(w.padding,f),ai=As(ge),di="y"===Vt?Gn:Si,is="y"===Vt?An:ii,Ar=f.rects.reference[ln]+f.rects.reference[Vt]-Be[Vt]-f.rects.popper[ln],ls=Be[Vt]-f.rects.reference[Vt],os=Ye(ge),gs=os?"y"===Vt?os.clientHeight||0:os.clientWidth||0:0,oo=gs/2-ai[ln]/2+(Ar/2-ls/2),Ro=Ws(Jn[di],oo,gs-ai[ln]-Jn[is]);f.modifiersData[_]=((A={})[Vt]=Ro,A.centerOffset=Ro-oo,A)}},effect:function Bl(m){var A=m.state,_=m.options.element,w=void 0===_?"[data-popper-arrow]":_;null!=w&&("string"==typeof w&&!(w=A.elements.popper.querySelector(w))||O(A.elements.popper,w)&&(A.elements.arrow=w))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ca(m,A,f){void 0===f&&(f=!1);var _=Qi(A),w=Qi(A)&&function Sl(m){var A=m.getBoundingClientRect(),f=Hi(A.width)/m.offsetWidth||1,_=Hi(A.height)/m.offsetHeight||1;return 1!==f||1!==_}(A),ge=Oi(A),Be=yi(m,w,f),wt={scrollLeft:0,scrollTop:0},Vt={x:0,y:0};return(_||!_&&!f)&&(("body"!==ms(A)||Ms(ge))&&(wt=function ys(m){return m!==mn(m)&&Qi(m)?function El(m){return{scrollLeft:m.scrollLeft,scrollTop:m.scrollTop}}(m):Cn(m)}(A)),Qi(A)?((Vt=yi(A,!0)).x+=A.clientLeft,Vt.y+=A.clientTop):ge&&(Vt.x=qr(ge))),{x:Be.left+wt.scrollLeft-Vt.x,y:Be.top+wt.scrollTop-Vt.y,width:Be.width,height:Be.height}}function br(m){var A=new Map,f=new Set,_=[];function w(ge){f.add(ge.name),[].concat(ge.requires||[],ge.requiresIfExists||[]).forEach(function(wt){if(!f.has(wt)){var Vt=A.get(wt);Vt&&w(Vt)}}),_.push(ge)}return m.forEach(function(ge){A.set(ge.name,ge)}),m.forEach(function(ge){f.has(ge.name)||w(ge)}),_}function Ra(m){var A;return function(){return A||(A=new Promise(function(f){Promise.resolve().then(function(){A=void 0,f(m())})})),A}}var za={placement:"bottom",modifiers:[],strategy:"absolute"};function fa(){for(var m=arguments.length,A=new Array(m),f=0;f<m;f++)A[f]=arguments[f];return!A.some(function(_){return!(_&&"function"==typeof _.getBoundingClientRect)})}function cl(m){void 0===m&&(m={});var f=m.defaultModifiers,_=void 0===f?[]:f,w=m.defaultOptions,ge=void 0===w?za:w;return function(wt,Vt,nn){void 0===nn&&(nn=ge);var ln={placement:"bottom",orderedModifiers:[],options:Object.assign({},za,ge),modifiersData:{},elements:{reference:wt,popper:Vt},attributes:{},styles:{}},Jn=[],ai=!1,di={state:ln,setOptions:function(os){var gs="function"==typeof os?os(ln.options):os;Ar(),ln.options=Object.assign({},ge,ln.options,gs),ln.scrollParents={reference:Un(wt)?Os(wt):wt.contextElement?Os(wt.contextElement):[],popper:Os(Vt)};var Do=function ha(m){var A=br(m);return on.reduce(function(f,_){return f.concat(A.filter(function(w){return w.phase===_}))},[])}(function js(m){var A=m.reduce(function(f,_){var w=f[_.name];return f[_.name]=w?Object.assign({},w,_,{options:Object.assign({},w.options,_.options),data:Object.assign({},w.data,_.data)}):_,f},{});return Object.keys(A).map(function(f){return A[f]})}([].concat(_,ln.options.modifiers)));return ln.orderedModifiers=Do.filter(function(Zr){return Zr.enabled}),function is(){ln.orderedModifiers.forEach(function(ls){var gs=ls.options,Zr=ls.effect;if("function"==typeof Zr){var vs=Zr({state:ln,name:ls.name,instance:di,options:void 0===gs?{}:gs});Jn.push(vs||function(){})}})}(),di.update()},forceUpdate:function(){if(!ai){var os=ln.elements,gs=os.reference,Do=os.popper;if(fa(gs,Do)){ln.rects={reference:ca(gs,Ye(Do),"fixed"===ln.options.strategy),popper:As(Do)},ln.reset=!1,ln.placement=ln.options.placement,ln.orderedModifiers.forEach(function(la){return ln.modifiersData[la.name]=Object.assign({},la.data)});for(var Zr=0;Zr<ln.orderedModifiers.length;Zr++)if(!0!==ln.reset){var vs=ln.orderedModifiers[Zr],oo=vs.fn,Ro=vs.options;"function"==typeof oo&&(ln=oo({state:ln,options:void 0===Ro?{}:Ro,name:vs.name,instance:di})||ln)}else ln.reset=!1,Zr=-1}}},update:Ra(function(){return new Promise(function(ls){di.forceUpdate(),ls(ln)})}),destroy:function(){Ar(),ai=!0}};if(!fa(wt,Vt))return di;function Ar(){Jn.forEach(function(ls){return ls()}),Jn=[]}return di.setOptions(nn).then(function(ls){!ai&&nn.onFirstUpdate&&nn.onFirstUpdate(ls)}),di}}var Fo={passive:!0},Na={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Pa(m){var A,f=m.popper,_=m.popperRect,w=m.placement,ge=m.variation,Be=m.offsets,wt=m.position,Vt=m.gpuAcceleration,nn=m.adaptive,ln=m.roundOffsets,Jn=m.isFixed,ai=Be.x,di=void 0===ai?0:ai,is=Be.y,Ar=void 0===is?0:is,ls="function"==typeof ln?ln({x:di,y:Ar}):{x:di,y:Ar};di=ls.x,Ar=ls.y;var os=Be.hasOwnProperty("x"),gs=Be.hasOwnProperty("y"),Do=Si,Zr=Gn,vs=window;if(nn){var oo=Ye(f),Ro="clientHeight",No="clientWidth";oo===mn(f)&&"static"!==us(oo=Oi(f)).position&&"absolute"===wt&&(Ro="scrollHeight",No="scrollWidth"),(w===Gn||(w===Si||w===ii)&&ge===Pi)&&(Zr=An,Ar-=(Jn&&oo===vs&&vs.visualViewport?vs.visualViewport.height:oo[Ro])-_.height,Ar*=Vt?1:-1),w!==Si&&(w!==Gn&&w!==An||ge!==Pi)||(Do=ii,di-=(Jn&&oo===vs&&vs.visualViewport?vs.visualViewport.width:oo[No])-_.width,di*=Vt?1:-1)}var Ta,pl=Object.assign({position:wt},nn&&Na),xc=!0===ln?function Yo(m,A){var _=m.y,w=A.devicePixelRatio||1;return{x:Hi(m.x*w)/w||0,y:Hi(_*w)/w||0}}({x:di,y:Ar},mn(f)):{x:di,y:Ar};return di=xc.x,Ar=xc.y,Object.assign({},pl,Vt?((Ta={})[Zr]=gs?"0":"",Ta[Do]=os?"0":"",Ta.transform=(vs.devicePixelRatio||1)<=1?"translate("+di+"px, "+Ar+"px)":"translate3d("+di+"px, "+Ar+"px, 0)",Ta):((A={})[Zr]=gs?Ar+"px":"",A[Do]=os?di+"px":"",A.transform="",A))}var Oa=cl({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Qo(m){var A=m.state,f=m.instance,_=m.options,w=_.scroll,ge=void 0===w||w,Be=_.resize,wt=void 0===Be||Be,Vt=mn(A.elements.popper),nn=[].concat(A.scrollParents.reference,A.scrollParents.popper);return ge&&nn.forEach(function(ln){ln.addEventListener("scroll",f.update,Fo)}),wt&&Vt.addEventListener("resize",f.update,Fo),function(){ge&&nn.forEach(function(ln){ln.removeEventListener("scroll",f.update,Fo)}),wt&&Vt.removeEventListener("resize",f.update,Fo)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function Ga(m){var A=m.state;A.modifiersData[m.name]=Kn({reference:A.rects.reference,element:A.rects.popper,strategy:"absolute",placement:A.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function na(m){var A=m.state,f=m.options,_=f.gpuAcceleration,w=void 0===_||_,ge=f.adaptive,Be=void 0===ge||ge,wt=f.roundOffsets,Vt=void 0===wt||wt,nn={placement:Yn(A.placement),variation:hn(A.placement),popper:A.elements.popper,popperRect:A.rects.popper,gpuAcceleration:w,isFixed:"fixed"===A.options.strategy};null!=A.modifiersData.popperOffsets&&(A.styles.popper=Object.assign({},A.styles.popper,Pa(Object.assign({},nn,{offsets:A.modifiersData.popperOffsets,position:A.options.strategy,adaptive:Be,roundOffsets:Vt})))),null!=A.modifiersData.arrow&&(A.styles.arrow=Object.assign({},A.styles.arrow,Pa(Object.assign({},nn,{offsets:A.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Vt})))),A.attributes.popper=Object.assign({},A.attributes.popper,{"data-popper-placement":A.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function Vs(m){var A=m.state;Object.keys(A.elements).forEach(function(f){var _=A.styles[f]||{},w=A.attributes[f]||{},ge=A.elements[f];!Qi(ge)||!ms(ge)||(Object.assign(ge.style,_),Object.keys(w).forEach(function(Be){var wt=w[Be];!1===wt?ge.removeAttribute(Be):ge.setAttribute(Be,!0===wt?"":wt)}))})},effect:function qo(m){var A=m.state,f={popper:{position:A.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(A.elements.popper.style,f.popper),A.styles=f,A.elements.arrow&&Object.assign(A.elements.arrow.style,f.arrow),function(){Object.keys(A.elements).forEach(function(_){var w=A.elements[_],ge=A.attributes[_]||{},wt=Object.keys(A.styles.hasOwnProperty(_)?A.styles[_]:f[_]).reduce(function(Vt,nn){return Vt[nn]="",Vt},{});!Qi(w)||!ms(w)||(Object.assign(w.style,wt),Object.keys(ge).forEach(function(Vt){w.removeAttribute(Vt)}))})}},requires:["computeStyles"]}]});const wl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function ba(m){var A=m.state,_=m.name,w=m.options.offset,ge=void 0===w?[0,0]:w,Be=Cr.reduce(function(ln,Jn){return ln[Jn]=function Wo(m,A,f){var _=Yn(m),w=[Si,Gn].indexOf(_)>=0?-1:1,ge="function"==typeof f?f(Object.assign({},A,{placement:m})):f,Be=ge[0],wt=ge[1];return Be=Be||0,wt=(wt||0)*w,[Si,ii].indexOf(_)>=0?{x:wt,y:Be}:{x:Be,y:wt}}(Jn,A.rects,ge),ln},{}),wt=Be[A.placement],nn=wt.y;null!=A.modifiersData.popperOffsets&&(A.modifiersData.popperOffsets.x+=wt.x,A.modifiersData.popperOffsets.y+=nn),A.modifiersData[_]=Be}},ma=["*"],$a=m=>({$implicit:m}),ne=["dialog"],Xe=["ngbNavOutlet",""];function Ct(m,A){}function Di(m,A){if(1&m&&(l.j41(0,"div",0),l.DNE(1,Ct,0,0,"ng-template",1),l.k0s()),2&m){const f=l.XpG().$implicit,_=l.XpG();l.Y8G("item",f)("nav",_.nav)("role",_.paneRole),l.R7$(),l.Y8G("ngTemplateOutlet",(null==f.contentTpl?null:f.contentTpl.templateRef)||null)("ngTemplateOutletContext",l.eq3(5,$a,f.active||_.isPanelTransitioning(f)))}}function Nr(m,A){if(1&m&&l.DNE(0,Di,2,7,"div",0),2&m){const f=A.$implicit,_=l.XpG();l.vxM(0,f.isPanelInDom()||_.isPanelTransitioning(f)?0:-1)}}const Lt={animation:!0,transitionTimerDelayMs:5};let Jt=(()=>{class m{constructor(){this.animation=Lt.animation}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})();function Ji(m){return"string"==typeof m}function we(m){return null!=m}function se(m){return m&&m.then}function Kt(m){return(m||document.body).getBoundingClientRect()}const hs=()=>{},{transitionTimerDelayMs:ar}=Lt,Cs=new Map,Fi=(m,A,f,_)=>{let w=_.context||{};const ge=Cs.get(A);if(ge)switch(_.runningTransition){case"continue":return fe.w;case"stop":m.run(()=>ge.transition$.complete()),w=Object.assign(ge.context,w),Cs.delete(A)}const Be=f(A,_.animation,w)||hs;if(!_.animation||"none"===window.getComputedStyle(A).transitionProperty)return m.run(()=>Be()),(0,X.of)(void 0).pipe(function Qn(m){return A=>new h.c(f=>A.subscribe({next:Be=>m.run(()=>f.next(Be)),error:Be=>m.run(()=>f.error(Be)),complete:()=>m.run(()=>f.complete())}))}(m));const wt=new ie.B,Vt=new ie.B,nn=wt.pipe(function _e(...m){return A=>(0,J.x)(A,(0,X.of)(...m))}(!0));Cs.set(A,{transition$:wt,complete:()=>{Vt.next(),Vt.complete()},context:w});const ln=function pi(m){const{transitionDelay:A,transitionDuration:f}=window.getComputedStyle(m);return 1e3*(parseFloat(A)+parseFloat(f))}(A);return m.runOutsideAngular(()=>{const Jn=ue(A,"transitionend").pipe((0,Ee.Q)(nn),(0,Ve.p)(({target:di})=>di===A));St((0,We.O)(ln+ar).pipe((0,Ee.Q)(nn)),Jn,Vt).pipe((0,Ee.Q)(nn)).subscribe(()=>{Cs.delete(A),m.run(()=>{Be(),wt.next(),wt.complete()})})}),wt.asObservable()},en=(m,A,f)=>{let{direction:_,maxSize:w,dimension:ge}=f;const{classList:Be}=m;function wt(){Be.add("collapse"),"show"===_?Be.add("show"):Be.remove("show")}if(A)return w||(w=function Rn(m,A){if(typeof navigator>"u")return"0px";const{classList:f}=m,_=f.contains("show");_||f.add("show"),m.style[A]="";const w=m.getBoundingClientRect()[A]+"px";return _||f.remove("show"),w}(m,ge),f.maxSize=w,m.style[ge]="show"!==_?w:"0px",Be.remove("collapse"),Be.remove("collapsing"),Be.remove("show"),Kt(m),Be.add("collapsing")),m.style[ge]="show"===_?w:"0px",()=>{wt(),Be.remove("collapsing"),m.style[ge]=""};wt()};let bn=(()=>{class m{constructor(){this._ngbConfig=(0,l.WQX)(Jt),this.horizontal=!1}get animation(){return this._animation??this._ngbConfig.animation}set animation(f){this._animation=f}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),ui=(()=>{class m{constructor(){this._config=(0,l.WQX)(bn),this._element=(0,l.WQX)(l.aKT),this._zone=(0,l.WQX)(l.SKi),this.animation=this._config.animation,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new l.bkB,this.horizontal=this._config.horizontal,this.shown=new l.bkB,this.hidden=new l.bkB}set collapsed(f){this._isCollapsed!==f&&(this._isCollapsed=f,this._afterInit&&this._runTransitionWithEvents(f,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(f=this._isCollapsed){this.collapsed=!f,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(f,_){return Fi(this._zone,this._element.nativeElement,en,{animation:_,runningTransition:"stop",context:{direction:f?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(f,_){this._runTransition(f,_).subscribe(()=>{f?this.hidden.emit():this.shown.emit()})}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(_,w){2&_&&l.AVh("collapse-horizontal",w.horizontal)},inputs:{animation:"animation",collapsed:[l.Mj6.None,"ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0})}}return m})(),Js=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Ac=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),ro=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Sa=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})();var Ai=function(m){return m[m.Tab=9]="Tab",m[m.Enter=13]="Enter",m[m.Escape=27]="Escape",m[m.Space=32]="Space",m[m.PageUp=33]="PageUp",m[m.PageDown=34]="PageDown",m[m.End=35]="End",m[m.Home=36]="Home",m[m.ArrowLeft=37]="ArrowLeft",m[m.ArrowUp=38]="ArrowUp",m[m.ArrowRight=39]="ArrowRight",m[m.ArrowDown=40]="ArrowDown",m}(Ai||{});const Gu=(m,A)=>!!A&&A.some(f=>f.contains(m)),oh=(m,A)=>!A||null!=function Xt(m,A){return!A||typeof m.closest>"u"?null:m.closest(A)}(m,A),ah=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function lh(m,A,f,_,w,ge,Be,wt){f&&m.runOutsideAngular((m=>ah?()=>setTimeout(()=>m(),100):m)(()=>{const nn=ue(A,"keydown").pipe((0,Ee.Q)(w),(0,Ve.p)(ai=>ai.which===Ai.Escape),(0,V.M)(ai=>ai.preventDefault())),ln=ue(A,"mousedown").pipe((0,Oe.T)(ai=>{const di=ai.target;return 2!==ai.button&&!Gu(di,Be)&&("inside"===f?Gu(di,ge)&&oh(di,wt):"outside"===f?!Gu(di,ge):oh(di,wt)||!Gu(di,ge))}),(0,Ee.Q)(w)),Jn=ue(A,"mouseup").pipe(ze(ln),(0,Ve.p)(([ai,di])=>di),function Yt(m,A=Mt.E){const f=(0,We.O)(m,A);return yt(()=>f)}(0),(0,Ee.Q)(w));St([nn.pipe((0,Oe.T)(ai=>0)),Jn.pipe((0,Oe.T)(ai=>1))]).subscribe(ai=>m.run(()=>_(ai)))}))}const vc=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Wu(m){const A=Array.from(m.querySelectorAll(vc)).filter(f=>-1!==f.tabIndex);return[A[0],A[A.length-1]]}const Rl=(m,A,f,_=!1)=>{m.runOutsideAngular(()=>{const w=ue(A,"focusin").pipe((0,Ee.Q)(f),(0,Oe.T)(ge=>ge.target));ue(A,"keydown").pipe((0,Ee.Q)(f),(0,Ve.p)(ge=>ge.which===Ai.Tab),ze(w)).subscribe(([ge,Be])=>{const[wt,Vt]=Wu(A);(Be===wt||Be===A)&&ge.shiftKey&&(Vt.focus(),ge.preventDefault()),Be===Vt&&!ge.shiftKey&&(wt.focus(),ge.preventDefault())}),_&&ue(A,"click").pipe((0,Ee.Q)(f),ze(w),(0,Oe.T)(ge=>ge[1])).subscribe(ge=>ge.focus())})};let ki=(()=>{class m{constructor(){this._element=(0,l.WQX)(Dt.qQ).documentElement}isRTL(){return"rtl"===(this._element.getAttribute("dir")||"").toLowerCase()}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})();const Ya=/\s+/,pp=/  +/gi,sl={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]},Rs=/^left/,sf=/^right/,Ha=/^start/,Ma=/^end/;function ko({placement:m,baseClass:A},f){let _=Array.isArray(m)?m:m.split(Ya),ge=_.findIndex(nn=>"auto"===nn);ge>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(nn){null==_.find(ln=>-1!==ln.search("^"+nn))&&_.splice(ge++,1,nn)});const Be=_.map(nn=>function ju(m,A){const[f,_]=sl[m];return A&&_||f}(nn,f.isRTL()));return{placement:Be.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!A,phase:"write",fn({state:nn}){const ln=new RegExp(A+"(-[a-z]+)*","gi"),Jn=nn.elements.popper,ai=nn.placement;let di=Jn.className;di=di.replace(ln,""),di+=` ${function fv(m,A){let[f,_]=A.split("-");const w=f.replace(Rs,"start").replace(sf,"end");let ge=[w];if(_){let Be=_;("left"===f||"right"===f)&&(Be=Be.replace(Ha,"top").replace(Ma,"bottom")),ge.push(`${w}-${Be}`)}return m&&(ge=ge.map(Be=>`${m}-${Be}`)),ge.join(" ")}(A,ai)}`,di=di.trim().replace(pp," "),Jn.className=di}},Ur,Oo,ks,{enabled:!0,name:"flip",options:{fallbackPlacements:Be}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function Pc(m){return m}new Date(1882,10,12),new Date(2174,10,25);let xp=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Pd=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Cv=(()=>{class m{constructor(){this._ngbConfig=(0,l.WQX)(Jt),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(f){this._animation=f}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})();class tc{constructor(A,f,_){this.nodes=A,this.viewRef=f,this.componentRef=_}}class Mp{constructor(A){this._componentType=A,this._windowRef=null,this._contentRef=null,this._document=(0,l.WQX)(Dt.qQ),this._applicationRef=(0,l.WQX)(l.o8S),this._injector=(0,l.WQX)(l.zZn),this._viewContainerRef=(0,l.WQX)(l.c1b),this._ngZone=(0,l.WQX)(l.SKi)}open(A,f,_=!1){this._windowRef||(this._contentRef=this._getContentRef(A,f),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:w}=this._windowRef.location,ge=this._ngZone.onStable.pipe((0,Ne.s)(1),(0,Q.Z)(()=>Fi(this._ngZone,w,({classList:Be})=>Be.add("show"),{animation:_,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:ge}}close(A=!1){return this._windowRef?Fi(this._ngZone,this._windowRef.location.nativeElement,({classList:f})=>f.remove("show"),{animation:A,runningTransition:"stop"}).pipe((0,V.M)(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):(0,X.of)(void 0)}_getContentRef(A,f){if(A){if(A instanceof l.C4Q){const _=A.createEmbeddedView(f);return this._applicationRef.attachView(_),new tc([_.rootNodes],_)}return new tc([[this._document.createTextNode(`${A}`)]])}return new tc([])}}let wp=(()=>{class m{constructor(){this._document=(0,l.WQX)(Dt.qQ)}hide(){const f=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),_=this._document.body,w=_.style,{overflow:ge,paddingRight:Be}=w;if(f>0){const wt=parseFloat(window.getComputedStyle(_).paddingRight);w.paddingRight=`${wt+f}px`}return w.overflow="hidden",()=>{f>0&&(w.paddingRight=Be),w.overflow=ge}}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),kc=(()=>{class m{constructor(){this._nativeElement=(0,l.WQX)(l.aKT).nativeElement,this._zone=(0,l.WQX)(l.SKi)}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Ne.s)(1)).subscribe(()=>{Fi(this._zone,this._nativeElement,(f,_)=>{_&&Kt(f),f.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Fi(this._zone,this._nativeElement,({classList:f})=>f.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275cmp=l.VBU({type:m,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(_,w){2&_&&(l.HbH("modal-backdrop"+(w.backdropClass?" "+w.backdropClass:"")),l.AVh("show",!w.animation)("fade",w.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[l.aNF],decls:0,vars:0,template:function(_,w){},encapsulation:2})}}return m})();class gf{update(A){}close(A){}dismiss(A){}}const yh=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],vf=["animation","backdropClass"];class Cp{_applyWindowOptions(A,f){yh.forEach(_=>{we(f[_])&&(A[_]=f[_])})}_applyBackdropOptions(A,f){vf.forEach(_=>{we(f[_])&&(A[_]=f[_])})}update(A){this._applyWindowOptions(this._windowCmptRef.instance,A),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,A)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,Ee.Q)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,Ee.Q)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(A,f,_,w){this._windowCmptRef=A,this._contentRef=f,this._backdropCmptRef=_,this._beforeDismiss=w,this._closed=new ie.B,this._dismissed=new ie.B,this._hidden=new ie.B,A.instance.dismissEvent.subscribe(ge=>{this.dismiss(ge)}),this.result=new Promise((ge,Be)=>{this._resolve=ge,this._reject=Be}),this.result.then(null,()=>{})}close(A){this._windowCmptRef&&(this._closed.next(A),this._resolve(A),this._removeModalElements())}_dismiss(A){this._dismissed.next(A),this._reject(A),this._removeModalElements()}dismiss(A){if(this._windowCmptRef)if(this._beforeDismiss){const f=this._beforeDismiss();se(f)?f.then(_=>{!1!==_&&this._dismiss(A)},()=>{}):!1!==f&&this._dismiss(A)}else this._dismiss(A)}_removeModalElements(){const A=this._windowCmptRef.instance.hide(),f=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,X.of)(void 0);A.subscribe(()=>{const{nativeElement:_}=this._windowCmptRef.location;_.parentNode.removeChild(_),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),f.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:_}=this._backdropCmptRef.location;_.parentNode.removeChild(_),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),j(A,f).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Zu=function(m){return m[m.BACKDROP_CLICK=0]="BACKDROP_CLICK",m[m.ESC=1]="ESC",m}(Zu||{});let _f=(()=>{class m{constructor(){this._document=(0,l.WQX)(Dt.qQ),this._elRef=(0,l.WQX)(l.aKT),this._zone=(0,l.WQX)(l.SKi),this._closed$=new ie.B,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new l.bkB,this.shown=new ie.B,this.hidden=new ie.B}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Ji(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(f){this.dismissEvent.emit(f)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Ne.s)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:f}=this._elRef,_={animation:this.animation,runningTransition:"stop"},Be=j(Fi(this._zone,f,()=>f.classList.remove("show"),_),Fi(this._zone,this._dialogEl.nativeElement,()=>{},_));return Be.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),Be}_show(){const f={animation:this.animation,runningTransition:"continue"};j(Fi(this._zone,this._elRef.nativeElement,(ge,Be)=>{Be&&Kt(ge),ge.classList.add("show")},f),Fi(this._zone,this._dialogEl.nativeElement,()=>{},f)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:f}=this._elRef;this._zone.runOutsideAngular(()=>{ue(f,"keydown").pipe((0,Ee.Q)(this._closed$),(0,Ve.p)(w=>w.which===Ai.Escape)).subscribe(w=>{this.keyboard?requestAnimationFrame(()=>{w.defaultPrevented||this._zone.run(()=>this.dismiss(Zu.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let _=!1;ue(this._dialogEl.nativeElement,"mousedown").pipe((0,Ee.Q)(this._closed$),(0,V.M)(()=>_=!1),(0,dn.n)(()=>ue(f,"mouseup").pipe((0,Ee.Q)(this._closed$),(0,Ne.s)(1))),(0,Ve.p)(({target:w})=>f===w)).subscribe(()=>{_=!0}),ue(f,"click").pipe((0,Ee.Q)(this._closed$)).subscribe(({target:w})=>{f===w&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!_&&this._zone.run(()=>this.dismiss(Zu.BACKDROP_CLICK))),_=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:f}=this._elRef;if(!f.contains(document.activeElement)){const _=f.querySelector("[ngbAutofocus]"),w=Wu(f)[0];(_||w||f).focus()}}_restoreFocus(){const f=this._document.body,_=this._elWithFocus;let w;w=_&&_.focus&&f.contains(_)?_:f,this._zone.runOutsideAngular(()=>{setTimeout(()=>w.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Fi(this._zone,this._elRef.nativeElement,({classList:f})=>(f.add("modal-static"),()=>f.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275cmp=l.VBU({type:m,selectors:[["ngb-modal-window"]],viewQuery:function(_,w){if(1&_&&l.GBs(ne,7),2&_){let ge;l.mGM(ge=l.lsd())&&(w._dialogEl=ge.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(_,w){2&_&&(l.BMQ("aria-modal",!0)("aria-labelledby",w.ariaLabelledBy)("aria-describedby",w.ariaDescribedBy),l.HbH("modal d-block"+(w.windowClass?" "+w.windowClass:"")),l.AVh("fade",w.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[l.aNF],ngContentSelectors:ma,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(_,w){1&_&&(l.NAR(),l.j41(0,"div",1,0)(2,"div",2),l.SdG(3),l.k0s()()),2&_&&l.HbH("modal-dialog"+(w.size?" modal-"+w.size:"")+(w.centered?" modal-dialog-centered":"")+w.fullscreenClass+(w.scrollable?" modal-dialog-scrollable":"")+(w.modalDialogClass?" "+w.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}}return m})(),vm=(()=>{class m{constructor(){this._applicationRef=(0,l.WQX)(l.o8S),this._injector=(0,l.WQX)(l.zZn),this._environmentInjector=(0,l.WQX)(l.uvJ),this._document=(0,l.WQX)(Dt.qQ),this._scrollBar=(0,l.WQX)(wp),this._activeWindowCmptHasChanged=new ie.B,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new l.bkB;const f=(0,l.WQX)(l.SKi);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const _=this._windowCmpts[this._windowCmpts.length-1];Rl(f,_.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(_.location.nativeElement)}})}_restoreScrollBar(){const f=this._scrollBarRestoreFn;f&&(this._scrollBarRestoreFn=null,f())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(f,_,w){const ge=w.container instanceof HTMLElement?w.container:we(w.container)?this._document.querySelector(w.container):this._document.body;if(!ge)throw new Error(`The specified modal container "${w.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const Be=new gf,wt=(f=w.injector||f).get(l.uvJ,null)||this._environmentInjector,Vt=this._getContentRef(f,wt,_,Be,w);let nn=!1!==w.backdrop?this._attachBackdrop(ge):void 0,ln=this._attachWindowComponent(ge,Vt.nodes),Jn=new Cp(ln,Vt,nn,w.beforeDismiss);return this._registerModalRef(Jn),this._registerWindowCmpt(ln),Jn.hidden.pipe((0,Ne.s)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),Be.close=ai=>{Jn.close(ai)},Be.dismiss=ai=>{Jn.dismiss(ai)},Be.update=ai=>{Jn.update(ai)},Jn.update(w),1===this._modalRefs.length&&this._document.body.classList.add("modal-open"),nn&&nn.instance&&nn.changeDetectorRef.detectChanges(),ln.changeDetectorRef.detectChanges(),Jn}get activeInstances(){return this._activeInstances}dismissAll(f){this._modalRefs.forEach(_=>_.dismiss(f))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(f){let _=(0,l.a0P)(kc,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(_.hostView),f.appendChild(_.location.nativeElement),_}_attachWindowComponent(f,_){let w=(0,l.a0P)(_f,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:_});return this._applicationRef.attachView(w.hostView),f.appendChild(w.location.nativeElement),w}_getContentRef(f,_,w,ge,Be){return w?w instanceof l.C4Q?this._createFromTemplateRef(w,ge):Ji(w)?this._createFromString(w):this._createFromComponent(f,_,w,ge,Be):new tc([])}_createFromTemplateRef(f,_){const ge=f.createEmbeddedView({$implicit:_,close(Be){_.close(Be)},dismiss(Be){_.dismiss(Be)}});return this._applicationRef.attachView(ge),new tc([ge.rootNodes],ge)}_createFromString(f){const _=this._document.createTextNode(`${f}`);return new tc([[_]])}_createFromComponent(f,_,w,ge,Be){const wt=l.zZn.create({providers:[{provide:gf,useValue:ge}],parent:f}),Vt=(0,l.a0P)(w,{environmentInjector:_,elementInjector:wt}),nn=Vt.location.nativeElement;return Be.scrollable&&nn.classList.add("component-host-scrollable"),this._applicationRef.attachView(Vt.hostView),new tc([[nn]],Vt.hostView,Vt)}_setAriaHidden(f){const _=f.parentElement;_&&f!==this._document.body&&(Array.from(_.children).forEach(w=>{w!==f&&"SCRIPT"!==w.nodeName&&(this._ariaHiddenValues.set(w,w.getAttribute("aria-hidden")),w.setAttribute("aria-hidden","true"))}),this._setAriaHidden(_))}_revertAriaHidden(){this._ariaHiddenValues.forEach((f,_)=>{f?_.setAttribute("aria-hidden",f):_.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(f){const _=()=>{const w=this._modalRefs.indexOf(f);w>-1&&(this._modalRefs.splice(w,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(f),this._activeInstances.emit(this._modalRefs),f.result.then(_,_)}_registerWindowCmpt(f){this._windowCmpts.push(f),this._activeWindowCmptHasChanged.next(),f.onDestroy(()=>{const _=this._windowCmpts.indexOf(f);_>-1&&(this._windowCmpts.splice(_,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),yf=(()=>{class m{constructor(){this._injector=(0,l.WQX)(l.zZn),this._modalStack=(0,l.WQX)(vm),this._config=(0,l.WQX)(Cv)}open(f,_={}){const w={...this._config,animation:this._config.animation,..._};return this._modalStack.open(this._injector,f,w)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(f){this._modalStack.dismissAll(f)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),bf=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({providers:[yf]})}}return m})(),Tp=(()=>{class m{constructor(){this._ngbConfig=(0,l.WQX)(Jt),this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(f){this._animation=f}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})();const xf=m=>we(m)&&""!==m;let _m=0,Ju=(()=>{class m{constructor(){this.templateRef=(0,l.WQX)(l.C4Q)}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275dir=l.FsC({type:m,selectors:[["ng-template","ngbNavContent",""]],standalone:!0})}}return m})(),hu=(()=>{class m{constructor(f){this.role=f,this.nav=(0,l.WQX)(ed)}static{this.\u0275fac=function(_){return new(_||m)(l.kS0("role"))}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbNavItem","",5,"ng-container"]],hostVars:1,hostBindings:function(_,w){2&_&&l.BMQ("role",w.role?w.role:w.nav.roles?"presentation":void 0)},standalone:!0})}}return m})(),bh=(()=>{class m{constructor(){this._nav=(0,l.WQX)(ed),this._nativeElement=(0,l.WQX)(l.aKT).nativeElement,this.disabled=!1,this.shown=new l.bkB,this.hidden=new l.bkB}ngAfterContentChecked(){this.contentTpl=this.contentTpls.first}ngOnInit(){we(this.domId)||(this.domId="ngb-nav-"+_m++)}get active(){return this._nav.activeId===this.id}get id(){return xf(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(we(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}isNgContainer(){return this._nativeElement.nodeType===Node.COMMENT_NODE}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbNavItem",""]],contentQueries:function(_,w,ge){if(1&_&&l.wni(ge,Ju,4),2&_){let Be;l.mGM(Be=l.lsd())&&(w.contentTpls=Be)}},hostVars:2,hostBindings:function(_,w){2&_&&l.AVh("nav-item",!0)},inputs:{destroyOnHide:"destroyOnHide",disabled:"disabled",domId:"domId",_id:[l.Mj6.None,"ngbNavItem","_id"]},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbNavItem"],standalone:!0})}}return m})(),ed=(()=>{class m{constructor(f){this.role=f,this._config=(0,l.WQX)(Tp),this._cd=(0,l.WQX)(l.gRc),this._document=(0,l.WQX)(Dt.qQ),this._nativeElement=(0,l.WQX)(l.aKT).nativeElement,this.destroyRef=(0,l.WQX)(l.abz),this._navigatingWithKeyboard=!1,this.activeIdChange=new l.bkB,this.animation=this._config.animation,this.destroyOnHide=this._config.destroyOnHide,this.orientation=this._config.orientation,this.roles=this._config.roles,this.keyboard=this._config.keyboard,this.shown=new l.bkB,this.hidden=new l.bkB,this.navItemChange$=new ie.B,this.navChange=new l.bkB}click(f){f.disabled||this._updateActiveId(f.id)}onFocusout({relatedTarget:f}){this._nativeElement.contains(f)||(this._navigatingWithKeyboard=!1)}onKeyDown(f){if("tablist"!==this.roles||!this.keyboard)return;const _=f.which,w=this.links.filter(wt=>!wt.navItem.disabled),{length:ge}=w;let Be=-1;if(w.forEach((wt,Vt)=>{wt.nativeElement===this._document.activeElement&&(Be=Vt)}),ge){switch(_){case Ai.ArrowUp:case Ai.ArrowLeft:Be=(Be-1+ge)%ge;break;case Ai.ArrowRight:case Ai.ArrowDown:Be=(Be+1)%ge;break;case Ai.Home:Be=0;break;case Ai.End:Be=ge-1}"changeWithArrows"===this.keyboard&&this.select(w[Be].navItem.id),w[Be].nativeElement.focus(),this._navigatingWithKeyboard=!0,f.preventDefault()}}select(f){this._updateActiveId(f,!1)}ngAfterContentInit(){if(!we(this.activeId)){const f=this.items.first?this.items.first.id:null;xf(f)&&(this._updateActiveId(f,!1),this._cd.detectChanges())}this.items.changes.pipe((0,H.pQ)(this.destroyRef)).subscribe(()=>this._notifyItemChanged(this.activeId))}ngOnChanges({activeId:f}){f&&!f.firstChange&&this._notifyItemChanged(f.currentValue)}_updateActiveId(f,_=!0){if(this.activeId!==f){let w=!1;_&&this.navChange.emit({activeId:this.activeId,nextId:f,preventDefault:()=>{w=!0}}),w||(this.activeId=f,this.activeIdChange.emit(f),this._notifyItemChanged(f))}}_notifyItemChanged(f){this.navItemChange$.next(this._getItemById(f))}_getItemById(f){return this.items&&this.items.find(_=>_.id===f)||null}static{this.\u0275fac=function(_){return new(_||m)(l.kS0("role"))}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbNav",""]],contentQueries:function(_,w,ge){if(1&_&&(l.wni(ge,bh,4),l.wni(ge,td,5)),2&_){let Be;l.mGM(Be=l.lsd())&&(w.items=Be),l.mGM(Be=l.lsd())&&(w.links=Be)}},hostVars:6,hostBindings:function(_,w){1&_&&l.bIt("keydown.arrowLeft",function(Be){return w.onKeyDown(Be)})("keydown.arrowRight",function(Be){return w.onKeyDown(Be)})("keydown.arrowDown",function(Be){return w.onKeyDown(Be)})("keydown.arrowUp",function(Be){return w.onKeyDown(Be)})("keydown.Home",function(Be){return w.onKeyDown(Be)})("keydown.End",function(Be){return w.onKeyDown(Be)})("focusout",function(Be){return w.onFocusout(Be)}),2&_&&(l.BMQ("aria-orientation","vertical"===w.orientation&&"tablist"===w.roles?"vertical":void 0)("role",w.role?w.role:w.roles?"tablist":void 0),l.AVh("nav",!0)("flex-column","vertical"===w.orientation))},inputs:{activeId:"activeId",animation:"animation",destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard"},outputs:{activeIdChange:"activeIdChange",shown:"shown",hidden:"hidden",navChange:"navChange"},exportAs:["ngbNav"],standalone:!0,features:[l.OA$]})}}return m})(),td=(()=>{class m{constructor(f){this.role=f,this.navItem=(0,l.WQX)(bh),this.nav=(0,l.WQX)(ed),this.nativeElement=(0,l.WQX)(l.aKT).nativeElement}get tabindex(){return!1===this.nav.keyboard?this.navItem.disabled?-1:void 0:this.nav._navigatingWithKeyboard||this.navItem.disabled||!this.navItem.active?-1:void 0}static{this.\u0275fac=function(_){return new(_||m)(l.kS0("role"))}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbNavLink",""]],hostVars:14,hostBindings:function(_,w){2&_&&(l.Mr5("id",w.navItem.domId),l.BMQ("role",w.role?w.role:w.nav.roles?"tab":void 0)("tabindex",w.tabindex)("aria-controls",w.navItem.isPanelInDom()?w.navItem.panelDomId:null)("aria-selected",w.navItem.active)("aria-disabled",w.navItem.disabled),l.AVh("nav-link",!0)("nav-item",w.navItem.isNgContainer())("active",w.navItem.active)("disabled",w.navItem.disabled))},standalone:!0})}}return m})(),Su=(()=>{class m extends td{static{this.\u0275fac=(()=>{let f;return function(w){return(f||(f=l.xGo(m)))(w||m)}})()}static{this.\u0275dir=l.FsC({type:m,selectors:[["a","ngbNavLink",""]],hostAttrs:["href",""],hostBindings:function(_,w){1&_&&l.bIt("click",function(Be){return w.nav.click(w.navItem),Be.preventDefault()})},standalone:!0,features:[l.Vt3]})}}return m})();const wa=({classList:m})=>(m.remove("show"),()=>m.remove("active")),ym=(m,A)=>{A&&Kt(m),m.classList.add("show")};let xh=(()=>{class m{constructor(){this.nativeElement=(0,l.WQX)(l.aKT).nativeElement}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(_,w){2&_&&(l.Mr5("id",w.item.panelDomId),l.BMQ("role",w.role?w.role:w.nav.roles?"tabpanel":void 0)("aria-labelledby",w.item.domId),l.AVh("fade",w.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0})}}return m})(),Eh=(()=>{class m{constructor(){this._cd=(0,l.WQX)(l.gRc),this._ngZone=(0,l.WQX)(l.SKi),this._activePane=null}isPanelTransitioning(f){return this._activePane?.item===f}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe((0,H.pQ)(this.nav.destroyRef),(0,fn.Z)(this._activePane?.item||null),function Sn(m,A=ot.D){return m=m??Gt,(0,Ot.N)((f,_)=>{let w,ge=!0;f.subscribe((0,Ke._)(_,Be=>{const wt=A(Be);(ge||!m(w,wt))&&(ge=!1,w=wt,_.next(Be))}))})}(),function vn(m){return(0,Ve.p)((A,f)=>m<=f)}(1)).subscribe(f=>{const _={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Fi(this._ngZone,this._activePane.nativeElement,wa,_).subscribe(()=>{const w=this._activePane?.item;this._activePane=this._getPaneForItem(f),this._cd.markForCheck(),this._activePane&&(this._activePane.nativeElement.classList.add("active"),Fi(this._ngZone,this._activePane.nativeElement,ym,_).subscribe(()=>{f&&(f.shown.emit(),this.nav.shown.emit(f.id))})),w&&(w.hidden.emit(),this.nav.hidden.emit(w.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.nativeElement.classList.add("show"),this._activePane?.nativeElement.classList.add("active")}_getPaneForItem(f){return this._panes&&this._panes.find(_=>_.item===f)||null}_getActivePane(){return this._panes&&this._panes.find(f=>f.item.active)||null}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275cmp=l.VBU({type:m,selectors:[["","ngbNavOutlet",""]],viewQuery:function(_,w){if(1&_&&l.GBs(xh,5),2&_){let ge;l.mGM(ge=l.lsd())&&(w._panes=ge)}},hostVars:2,hostBindings:function(_,w){2&_&&l.AVh("tab-content",!0)},inputs:{paneRole:"paneRole",nav:[l.Mj6.None,"ngbNavOutlet","nav"]},standalone:!0,features:[l.aNF],attrs:Xe,decls:2,vars:0,consts:[["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(_,w){1&_&&l.Z7z(0,Nr,1,1,null,null,l.fX1),2&_&&l.Dyx(w.nav.items)},dependencies:[xh,Dt.T3],encapsulation:2,changeDetection:0})}}return m})(),Sh=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Rp=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})();const Np={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};let wm=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Bc=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Op=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Mf=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Th=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),Bp=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),kv=(()=>{class m{constructor(){this._ngbConfig=(0,l.WQX)(Jt),this.autoClose=!0,this.placement="auto",this.popperOptions=f=>f,this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(f){this._animation=f}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),Bv=0,Xl=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275cmp=l.VBU({type:m,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(_,w){2&_&&(l.Mr5("id",w.id),l.HbH("tooltip"+(w.tooltipClass?" "+w.tooltipClass:"")),l.AVh("fade",w.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},standalone:!0,features:[l.aNF],ngContentSelectors:ma,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(_,w){1&_&&(l.NAR(),l.nrm(0,"div",0),l.j41(1,"div",1),l.SdG(2),l.k0s())},styles:["ngb-tooltip-window{pointer-events:none;position:absolute}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-top,ngb-tooltip-window.bs-tooltip-bottom{padding-left:0;padding-right:0}ngb-tooltip-window.bs-tooltip-start,ngb-tooltip-window.bs-tooltip-end{padding-top:0;padding-bottom:0}\n"],encapsulation:2,changeDetection:0})}}return m})(),Up=(()=>{class m{constructor(){this._config=(0,l.WQX)(kv),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disableTooltip=this._config.disableTooltip,this.tooltipClass=this._config.tooltipClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new l.bkB,this.hidden=new l.bkB,this._nativeElement=(0,l.WQX)(l.aKT).nativeElement,this._ngZone=(0,l.WQX)(l.SKi),this._document=(0,l.WQX)(Dt.qQ),this._changeDetector=(0,l.WQX)(l.gRc),this._ngbTooltipWindowId="ngb-tooltip-"+Bv++,this._popupService=new Mp(Xl),this._windowRef=null,this._positioning=function fs(){const m=(0,l.WQX)(ki);let A=null;return{createPopper(f){if(!A){let w=(f.updatePopperOptions||Pc)(ko(f,m));A=Oa(f.hostElement,f.targetElement,w)}},update(){A&&A.update()},setOptions(f){if(A){let w=(f.updatePopperOptions||Pc)(ko(f,m));A.setOptions(w)}},destroy(){A&&(A.destroy(),A=null)}}}()}set ngbTooltip(f){this._ngbTooltip=f,!f&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(f){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){const{windowRef:_,transition$:w}=this._popupService.open(this._ngbTooltip,f??this.tooltipContext,this.animation);this._windowRef=_,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("tooltipClass",this.tooltipClass),this._windowRef.setInput("id",this._ngbTooltipWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbTooltipWindowId),"body"===this.container&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-tooltip",updatePopperOptions:ge=>this.popperOptions(function Cd(m){return A=>(A.modifiers.push(wl,{name:"offset",options:{offset:()=>m}}),A)}([0,6])(ge))}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),lh(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement],[this._nativeElement]),w.subscribe(()=>this.shown.emit())}}close(f=this.animation){null!=this._windowRef&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(f).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function Em(m,A,f,_,w,ge=0,Be=0){const wt=function xm(m){const A=(m||"").trim();if(0===A.length)return[];const f=A.split(/\s+/).map(w=>w.split(":")).map(w=>Np[w[0]]||w),_=f.filter(w=>w.includes("manual"));if(_.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===_.length&&f.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return _.length?[]:f}(A);if(0===wt.length)return()=>{};const Vt=new Set,nn=[];let ln;function Jn(di,is){m.addEventListener(di,is),nn.push(()=>m.removeEventListener(di,is))}function ai(di,is){clearTimeout(ln),is>0?ln=setTimeout(di,is):di()}for(const[di,is]of wt)is?(Jn(di,()=>{Vt.add(di),ai(()=>Vt.size>0&&_(),ge)}),Jn(is,()=>{Vt.delete(di),ai(()=>0===Vt.size&&w(),Be)})):Jn(di,()=>f()?ai(w,Be):ai(_,ge));return()=>nn.forEach(di=>di())}(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:f}){f&&this.isOpen()&&this._windowRef.setInput("tooltipClass",f.currentValue)}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_getPositionTargetElement(){return(Ji(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275dir=l.FsC({type:m,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",tooltipContext:"tooltipContext",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],standalone:!0,features:[l.OA$]})}}return m})(),Tf=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})();new l.nKC("live announcer delay",{providedIn:"root",factory:()=>100});let Vp=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})(),zv=(()=>{class m{constructor(){this._ngbConfig=(0,l.WQX)(Jt),this.backdrop=!0,this.keyboard=!0,this.position="start",this.scroll=!1}get animation(){return this._animation??this._ngbConfig.animation}set animation(f){this._animation=f}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})();class Af{close(A){}dismiss(A){}}class Gv{get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,Ee.Q)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,Ee.Q)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._panelCmptRef.instance.shown.asObservable()}constructor(A,f,_,w){this._panelCmptRef=A,this._contentRef=f,this._backdropCmptRef=_,this._beforeDismiss=w,this._closed=new ie.B,this._dismissed=new ie.B,this._hidden=new ie.B,A.instance.dismissEvent.subscribe(ge=>{this.dismiss(ge)}),_&&_.instance.dismissEvent.subscribe(ge=>{this.dismiss(ge)}),this.result=new Promise((ge,Be)=>{this._resolve=ge,this._reject=Be}),this.result.then(null,()=>{})}close(A){this._panelCmptRef&&(this._closed.next(A),this._resolve(A),this._removeOffcanvasElements())}_dismiss(A){this._dismissed.next(A),this._reject(A),this._removeOffcanvasElements()}dismiss(A){if(this._panelCmptRef)if(this._beforeDismiss){const f=this._beforeDismiss();se(f)?f.then(_=>{!1!==_&&this._dismiss(A)},()=>{}):!1!==f&&this._dismiss(A)}else this._dismiss(A)}_removeOffcanvasElements(){const A=this._panelCmptRef.instance.hide(),f=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,X.of)(void 0);A.subscribe(()=>{const{nativeElement:_}=this._panelCmptRef.location;_.parentNode.removeChild(_),this._panelCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._panelCmptRef=null,this._contentRef=null}),f.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:_}=this._backdropCmptRef.location;_.parentNode.removeChild(_),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),j(A,f).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Hp=function(m){return m[m.BACKDROP_CLICK=0]="BACKDROP_CLICK",m[m.ESC=1]="ESC",m}(Hp||{});let Wv=(()=>{class m{constructor(){this._nativeElement=(0,l.WQX)(l.aKT).nativeElement,this._zone=(0,l.WQX)(l.SKi),this.dismissEvent=new l.bkB}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Ne.s)(1)).subscribe(()=>{Fi(this._zone,this._nativeElement,(f,_)=>{_&&Kt(f),f.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Fi(this._zone,this._nativeElement,({classList:f})=>f.remove("show"),{animation:this.animation,runningTransition:"stop"})}dismiss(){this.static||this.dismissEvent.emit(Hp.BACKDROP_CLICK)}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275cmp=l.VBU({type:m,selectors:[["ngb-offcanvas-backdrop"]],hostVars:6,hostBindings:function(_,w){1&_&&l.bIt("mousedown",function(){return w.dismiss()}),2&_&&(l.HbH("offcanvas-backdrop"+(w.backdropClass?" "+w.backdropClass:"")),l.AVh("show",!w.animation)("fade",w.animation))},inputs:{animation:"animation",backdropClass:"backdropClass",static:"static"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[l.aNF],decls:0,vars:0,template:function(_,w){},encapsulation:2})}}return m})(),jv=(()=>{class m{constructor(){this._document=(0,l.WQX)(Dt.qQ),this._elRef=(0,l.WQX)(l.aKT),this._zone=(0,l.WQX)(l.SKi),this._closed$=new ie.B,this._elWithFocus=null,this.keyboard=!0,this.position="start",this.dismissEvent=new l.bkB,this.shown=new ie.B,this.hidden=new ie.B}dismiss(f){this.dismissEvent.emit(f)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Ne.s)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const _=Fi(this._zone,this._elRef.nativeElement,w=>(w.classList.remove("showing"),w.classList.add("hiding"),()=>w.classList.remove("show","hiding")),{animation:this.animation,runningTransition:"stop"});return _.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),_}_show(){Fi(this._zone,this._elRef.nativeElement,(w,ge)=>(ge&&Kt(w),w.classList.add("show","showing"),()=>w.classList.remove("showing")),{animation:this.animation,runningTransition:"continue"}).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:f}=this._elRef;this._zone.runOutsideAngular(()=>{ue(f,"keydown").pipe((0,Ee.Q)(this._closed$),(0,Ve.p)(_=>_.which===Ai.Escape)).subscribe(_=>{this.keyboard&&requestAnimationFrame(()=>{_.defaultPrevented||this._zone.run(()=>this.dismiss(Hp.ESC))})})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:f}=this._elRef;if(!f.contains(document.activeElement)){const _=f.querySelector("[ngbAutofocus]"),w=Wu(f)[0];(_||w||f).focus()}}_restoreFocus(){const f=this._document.body,_=this._elWithFocus;let w;w=_&&_.focus&&f.contains(_)?_:f,this._zone.runOutsideAngular(()=>{setTimeout(()=>w.focus()),this._elWithFocus=null})}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275cmp=l.VBU({type:m,selectors:[["ngb-offcanvas-panel"]],hostAttrs:["role","dialog","tabindex","-1"],hostVars:5,hostBindings:function(_,w){2&_&&(l.BMQ("aria-modal",!0)("aria-labelledby",w.ariaLabelledBy)("aria-describedby",w.ariaDescribedBy),l.HbH("offcanvas offcanvas-"+w.position+(w.panelClass?" "+w.panelClass:"")))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",keyboard:"keyboard",panelClass:"panelClass",position:"position"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[l.aNF],ngContentSelectors:ma,decls:1,vars:0,template:function(_,w){1&_&&(l.NAR(),l.SdG(0))},encapsulation:2})}}return m})(),Nm=(()=>{class m{constructor(){this._applicationRef=(0,l.WQX)(l.o8S),this._injector=(0,l.WQX)(l.zZn),this._document=(0,l.WQX)(Dt.qQ),this._scrollBar=(0,l.WQX)(wp),this._activePanelCmptHasChanged=new ie.B,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._panelAttributes=["animation","ariaDescribedBy","ariaLabelledBy","keyboard","panelClass","position"],this._activeInstance=new l.bkB;const f=(0,l.WQX)(l.SKi);this._activePanelCmptHasChanged.subscribe(()=>{this._panelCmpt&&Rl(f,this._panelCmpt.location.nativeElement,this._activePanelCmptHasChanged)})}_restoreScrollBar(){const f=this._scrollBarRestoreFn;f&&(this._scrollBarRestoreFn=null,f())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(f,_,w){const ge=w.container instanceof HTMLElement?w.container:we(w.container)?this._document.querySelector(w.container):this._document.body;if(!ge)throw new Error(`The specified offcanvas container "${w.container||"body"}" was not found in the DOM.`);w.scroll||this._hideScrollBar();const Be=new Af,wt=this._getContentRef(w.injector||f,_,Be);let Vt=!1!==w.backdrop?this._attachBackdrop(ge):void 0,nn=this._attachWindowComponent(ge,wt.nodes),ln=new Gv(nn,wt,Vt,w.beforeDismiss);return this._registerOffcanvasRef(ln),this._registerPanelCmpt(nn),ln.hidden.pipe((0,at.j)(()=>this._restoreScrollBar())).subscribe(),Be.close=Jn=>{ln.close(Jn)},Be.dismiss=Jn=>{ln.dismiss(Jn)},this._applyPanelOptions(nn.instance,w),Vt&&Vt.instance&&(this._applyBackdropOptions(Vt.instance,w),Vt.changeDetectorRef.detectChanges()),nn.changeDetectorRef.detectChanges(),ln}get activeInstance(){return this._activeInstance}dismiss(f){this._offcanvasRef?.dismiss(f)}hasOpenOffcanvas(){return!!this._offcanvasRef}_attachBackdrop(f){let _=(0,l.a0P)(Wv,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(_.hostView),f.appendChild(_.location.nativeElement),_}_attachWindowComponent(f,_){let w=(0,l.a0P)(jv,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:_});return this._applicationRef.attachView(w.hostView),f.appendChild(w.location.nativeElement),w}_applyPanelOptions(f,_){this._panelAttributes.forEach(w=>{we(_[w])&&(f[w]=_[w])})}_applyBackdropOptions(f,_){this._backdropAttributes.forEach(w=>{we(_[w])&&(f[w]=_[w])}),f.static="static"===_.backdrop}_getContentRef(f,_,w){return _?_ instanceof l.C4Q?this._createFromTemplateRef(_,w):Ji(_)?this._createFromString(_):this._createFromComponent(f,_,w):new tc([])}_createFromTemplateRef(f,_){const ge=f.createEmbeddedView({$implicit:_,close(Be){_.close(Be)},dismiss(Be){_.dismiss(Be)}});return this._applicationRef.attachView(ge),new tc([ge.rootNodes],ge)}_createFromString(f){const _=this._document.createTextNode(`${f}`);return new tc([[_]])}_createFromComponent(f,_,w){const ge=l.zZn.create({providers:[{provide:Af,useValue:w}],parent:f}),Be=(0,l.a0P)(_,{environmentInjector:this._applicationRef.injector,elementInjector:ge}),wt=Be.location.nativeElement;return this._applicationRef.attachView(Be.hostView),new tc([[wt]],Be.hostView,Be)}_registerOffcanvasRef(f){const _=()=>{this._offcanvasRef=void 0,this._activeInstance.emit(this._offcanvasRef)};this._offcanvasRef=f,this._activeInstance.emit(this._offcanvasRef),f.result.then(_,_)}_registerPanelCmpt(f){this._panelCmpt=f,this._activePanelCmptHasChanged.next(),f.onDestroy(()=>{this._panelCmpt=void 0,this._activePanelCmptHasChanged.next()})}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),Pm=(()=>{class m{constructor(){this._injector=(0,l.WQX)(l.zZn),this._offcanvasStack=(0,l.WQX)(Nm),this._config=(0,l.WQX)(zv)}open(f,_={}){const w={...this._config,animation:this._config.animation,..._};return this._offcanvasStack.open(this._injector,f,w)}get activeInstance(){return this._offcanvasStack.activeInstance}dismiss(f){this._offcanvasStack.dismiss(f)}hasOpenOffcanvas(){return this._offcanvasStack.hasOpenOffcanvas()}static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275prov=l.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),zp=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({})}}return m})();const ss=[Js,Ac,ro,Sa,xp,Pd,bf,Sh,zp,Rp,wm,Bc,Op,Mf,Th,Bp,Tf,Vp];let Mi=(()=>{class m{static{this.\u0275fac=function(_){return new(_||m)}}static{this.\u0275mod=l.$C({type:m})}static{this.\u0275inj=l.G2t({imports:[ss,Js,Ac,ro,Sa,xp,Pd,bf,Sh,zp,Rp,wm,Bc,Op,Mf,Th,Bp,Tf,Vp]})}}return m})()},4909:(Rt,Je,M)=>{"use strict";M.d(Je,{Wr:()=>We,h:()=>Sn,D9:()=>Yt,c$:()=>je});var l=M(4438),H=M(7673),h=M(4402),fe=M(7468),X=M(8793),ie=M(9030),de=M(6697),Q=M(1413),z=M(6129);class L extends Q.B{constructor(vn=1/0,at=1/0,Dt=z.U){super(),this._bufferSize=vn,this._windowTime=at,this._timestampProvider=Dt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=at===1/0,this._bufferSize=Math.max(1,vn),this._windowTime=Math.max(1,at)}next(vn){const{isStopped:at,_buffer:Dt,_infiniteTimeWindow:Tt,_timestampProvider:un,_windowTime:Ln}=this;at||(Dt.push(vn),!Tt&&Dt.push(un.now()+Ln)),this._trimBuffer(),super.next(vn)}_subscribe(vn){this._throwIfClosed(),this._trimBuffer();const at=this._innerSubscribe(vn),{_infiniteTimeWindow:Dt,_buffer:Tt}=this,un=Tt.slice();for(let Ln=0;Ln<un.length&&!vn.closed;Ln+=Dt?1:2)vn.next(un[Ln]);return this._checkFinalizedStatuses(vn),at}_trimBuffer(){const{_bufferSize:vn,_timestampProvider:at,_buffer:Dt,_infiniteTimeWindow:Tt}=this,un=(Tt?1:2)*vn;if(vn<1/0&&un<Dt.length&&Dt.splice(0,Dt.length-un),!Tt){const Ln=at.now();let Yn=0;for(let Vn=1;Vn<Dt.length&&Dt[Vn]<=Ln;Vn+=2)Yn=Vn;Yn&&Dt.splice(0,Yn+1)}}}var I=M(8750),K=M(7707),te=M(9974);function ue(Gt,vn,...at){if(!0===vn)return void Gt();if(!1===vn)return;const Dt=new K.Ms({next:()=>{Dt.unsubscribe(),Gt()}});return(0,I.Tg)(vn(...at)).subscribe(Dt)}function Ce(Gt,vn,at){let Dt,Tt=!1;return Gt&&"object"==typeof Gt?({bufferSize:Dt=1/0,windowTime:vn=1/0,refCount:Tt=!1,scheduler:at}=Gt):Dt=Gt??1/0,function ee(Gt={}){const{connector:vn=(()=>new Q.B),resetOnError:at=!0,resetOnComplete:Dt=!0,resetOnRefCountZero:Tt=!0}=Gt;return un=>{let Ln,Yn,Vn,Yr=0,Gn=!1,An=!1;const ii=()=>{Yn?.unsubscribe(),Yn=void 0},Si=()=>{ii(),Ln=Vn=void 0,Gn=An=!1},$i=()=>{const Ri=Ln;Si(),Ri?.unsubscribe()};return(0,te.N)((Ri,Ki)=>{Yr++,!An&&!Gn&&ii();const Pi=Vn=Vn??vn();Ki.add(()=>{Yr--,0===Yr&&!An&&!Gn&&(Yn=ue($i,Tt))}),Pi.subscribe(Ki),!Ln&&Yr>0&&(Ln=new K.Ms({next:Ps=>Pi.next(Ps),error:Ps=>{An=!0,ii(),Yn=ue(Si,at,Ps),Pi.error(Ps)},complete:()=>{Gn=!0,ii(),Yn=ue(Si,Dt),Pi.complete()}}),(0,I.Tg)(Ri).subscribe(Ln))})(un)}}({connector:()=>new L(Dt,vn,at),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Tt})}var Re=M(6354),ye=M(274),Te=M(5558);class We{}let He=(()=>{class Gt extends We{getTranslation(at){return(0,H.of)({})}static \u0275fac=(()=>{let at;return function(Tt){return(at||(at=l.xGo(Gt)))(Tt||Gt)}})();static \u0275prov=l.jDH({token:Gt,factory:Gt.\u0275fac})}return Gt})();class ke{}let Ke=(()=>{class Gt{handle(at){return at.key}static \u0275fac=function(Dt){return new(Dt||Gt)};static \u0275prov=l.jDH({token:Gt,factory:Gt.\u0275fac})}return Gt})();function St(Gt,vn){if(Gt===vn)return!0;if(null===Gt||null===vn)return!1;if(Gt!=Gt&&vn!=vn)return!0;const at=typeof Gt;let Tt,un,Ln;if(at==typeof vn&&"object"==at){if(!Array.isArray(Gt)){if(Array.isArray(vn))return!1;for(un in Ln=Object.create(null),Gt){if(!St(Gt[un],vn[un]))return!1;Ln[un]=!0}for(un in vn)if(!(un in Ln)&&typeof vn[un]<"u")return!1;return!0}if(!Array.isArray(vn))return!1;if((Tt=Gt.length)==vn.length){for(un=0;un<Tt;un++)if(!St(Gt[un],vn[un]))return!1;return!0}}return!1}function pt(Gt){return typeof Gt<"u"&&null!==Gt}function ct(Gt){return le(Gt)&&!x(Gt)&&null!==Gt}function le(Gt){return"object"==typeof Gt}function x(Gt){return Array.isArray(Gt)}function C(Gt){return"string"==typeof Gt}function J(Gt,vn){const at=Object.assign({},Gt);return le(Gt)?(le(Gt)&&le(vn)&&Object.keys(vn).forEach(Dt=>{ct(vn[Dt])?Dt in Gt?at[Dt]=J(Gt[Dt],vn[Dt]):Object.assign(at,{[Dt]:vn[Dt]}):Object.assign(at,{[Dt]:vn[Dt]})}),at):J({},vn)}function _e(Gt,vn){const at=vn.split(".");vn="";do{vn+=at.shift(),pt(Gt)&&pt(Gt[vn])&&(ct(Gt[vn])||x(Gt[vn])||!at.length)?(Gt=Gt[vn],vn=""):at.length?vn+=".":Gt=void 0}while(at.length);return Gt}class Ve{}let Ne=(()=>{class Gt extends Ve{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(at,Dt){return C(at)?this.interpolateString(at,Dt):function j(Gt){return"function"==typeof Gt}(at)?this.interpolateFunction(at,Dt):void 0}interpolateFunction(at,Dt){return at(Dt)}interpolateString(at,Dt){return Dt?at.replace(this.templateMatcher,(Tt,un)=>{const Ln=_e(Dt,un);return pt(Ln)?Ln:Tt}):at}static \u0275fac=(()=>{let at;return function(Tt){return(at||(at=l.xGo(Gt)))(Tt||Gt)}})();static \u0275prov=l.jDH({token:Gt,factory:Gt.\u0275fac})}return Gt})();class V{}let Oe=(()=>{class Gt extends V{compile(at,Dt){return at}compileTranslations(at,Dt){return at}static \u0275fac=(()=>{let at;return function(Tt){return(at||(at=l.xGo(Gt)))(Tt||Gt)}})();static \u0275prov=l.jDH({token:Gt,factory:Gt.\u0275fac})}return Gt})();class Ot{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new l.bkB;onLangChange=new l.bkB;onDefaultLangChange=new l.bkB}const ot=new l.nKC("ISOLATE_TRANSLATE_SERVICE"),Ut=new l.nKC("USE_DEFAULT_LANG"),ze=new l.nKC("DEFAULT_LANGUAGE"),Mt=new l.nKC("USE_EXTEND"),st=Gt=>(0,h.A)(Gt)?Gt:(0,H.of)(Gt);let je=(()=>{class Gt{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(at){this.store.defaultLang=at}get currentLang(){return this.store.currentLang}set currentLang(at){this.store.currentLang=at}get langs(){return this.store.langs}set langs(at){this.store.langs=at}get translations(){return this.store.translations}set translations(at){this.store.translations=at}constructor(at,Dt,Tt,un,Ln,Yn=!0,Vn=!1,Yr=!1,Gn){this.store=at,this.currentLoader=Dt,this.compiler=Tt,this.parser=un,this.missingTranslationHandler=Ln,this.useDefaultLang=Yn,this.extend=Yr,Vn&&(this.store=new Ot),Gn&&this.setDefaultLang(Gn)}setDefaultLang(at){if(at===this.defaultLang)return;const Dt=this.retrieveTranslations(at);typeof Dt<"u"?(null==this.defaultLang&&(this.defaultLang=at),Dt.pipe((0,de.s)(1)).subscribe(()=>{this.changeDefaultLang(at)})):this.changeDefaultLang(at)}getDefaultLang(){return this.defaultLang}use(at){if(this.lastUseLanguage=at,at===this.currentLang)return(0,H.of)(this.translations[at]);this.currentLang||(this.currentLang=at);const Dt=this.retrieveTranslations(at);return(0,h.A)(Dt)?(Dt.pipe((0,de.s)(1)).subscribe(()=>{this.changeLang(at)}),Dt):(this.changeLang(at),(0,H.of)(this.translations[at]))}changeLang(at){at===this.lastUseLanguage&&(this.currentLang=at,this.onLangChange.emit({lang:at,translations:this.translations[at]}),null==this.defaultLang&&this.changeDefaultLang(at))}retrieveTranslations(at){if(typeof this.translations[at]>"u"||this.extend)return this._translationRequests[at]=this._translationRequests[at]||this.loadAndCompileTranslations(at),this._translationRequests[at]}getTranslation(at){return this.loadAndCompileTranslations(at)}loadAndCompileTranslations(at){this.pending=!0;const Dt=this.currentLoader.getTranslation(at).pipe(Ce(1),(0,de.s)(1));return this.loadingTranslations=Dt.pipe((0,Re.T)(Tt=>this.compiler.compileTranslations(Tt,at)),Ce(1),(0,de.s)(1)),this.loadingTranslations.subscribe({next:Tt=>{this.translations[at]=this.extend&&this.translations[at]?{...Tt,...this.translations[at]}:Tt,this.updateLangs(),this.pending=!1},error:Tt=>{this.pending=!1}}),Dt}setTranslation(at,Dt,Tt=!1){const un=this.compiler.compileTranslations(Dt,at);this.translations[at]=(Tt||this.extend)&&this.translations[at]?J(this.translations[at],un):un,this.updateLangs(),this.onTranslationChange.emit({lang:at,translations:this.translations[at]})}getLangs(){return this.langs}addLangs(at){const Dt=at.filter(Tt=>!this.langs.includes(Tt));Dt.length>0&&(this.langs=[...this.langs,...Dt])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(at,Dt,Tt){let un;if(at&&(un=this.runInterpolation(_e(at,Dt),Tt)),void 0===un&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(un=this.runInterpolation(_e(this.translations[this.defaultLang],Dt),Tt)),void 0===un){const Ln={key:Dt,translateService:this};typeof Tt<"u"&&(Ln.interpolateParams=Tt),un=this.missingTranslationHandler.handle(Ln)}return void 0!==un?un:Dt}runInterpolation(at,Dt){if(x(at))return at.map(Tt=>this.runInterpolation(Tt,Dt));if(ct(at)){const Tt={};for(const un in at){const Ln=this.runInterpolation(at[un],Dt);void 0!==Ln&&(Tt[un]=Ln)}return Tt}return this.parser.interpolate(at,Dt)}getParsedResult(at,Dt,Tt){if(Dt instanceof Array){const un={};let Ln=!1;for(const Vn of Dt)un[Vn]=this.getParsedResultForKey(at,Vn,Tt),Ln=Ln||(0,h.A)(un[Vn]);if(!Ln)return un;const Yn=Dt.map(Vn=>st(un[Vn]));return(0,fe.p)(Yn).pipe((0,Re.T)(Vn=>{const Yr={};return Vn.forEach((Gn,An)=>{Yr[Dt[An]]=Gn}),Yr}))}return this.getParsedResultForKey(at,Dt,Tt)}get(at,Dt){if(!pt(at)||!at.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe((0,ye.H)(Tt=>st(this.getParsedResult(Tt,at,Dt)))):st(this.getParsedResult(this.translations[this.currentLang],at,Dt))}getStreamOnTranslationChange(at,Dt){if(!pt(at)||!at.length)throw new Error('Parameter "key" is required and cannot be empty');return(0,X.x)((0,ie.v)(()=>this.get(at,Dt)),this.onTranslationChange.pipe((0,Te.n)(Tt=>{const un=this.getParsedResult(Tt.translations,at,Dt);return st(un)})))}stream(at,Dt){if(!pt(at)||!at.length)throw new Error('Parameter "key" required');return(0,X.x)((0,ie.v)(()=>this.get(at,Dt)),this.onLangChange.pipe((0,Te.n)(Tt=>{const un=this.getParsedResult(Tt.translations,at,Dt);return st(un)})))}instant(at,Dt){if(!pt(at)||0===at.length)throw new Error('Parameter "key" is required and cannot be empty');const Tt=this.getParsedResult(this.translations[this.currentLang],at,Dt);return(0,h.A)(Tt)?Array.isArray(at)?at.reduce((un,Ln)=>(un[Ln]=Ln,un),{}):at:Tt}set(at,Dt,Tt=this.currentLang){(function Ee(Gt,vn,at){const Dt=vn.split(".");let Tt=Gt;for(let un=0;un<Dt.length;un++){const Ln=Dt[un];un===Dt.length-1?Tt[Ln]=at:((!Tt[Ln]||!ct(Tt[Ln]))&&(Tt[Ln]={}),Tt=Tt[Ln])}})(this.translations[Tt],at,C(Dt)?this.compiler.compile(Dt,Tt):this.compiler.compileTranslations(Dt,Tt)),this.updateLangs(),this.onTranslationChange.emit({lang:Tt,translations:this.translations[Tt]})}changeDefaultLang(at){this.defaultLang=at,this.onDefaultLangChange.emit({lang:at,translations:this.translations[at]})}reloadLang(at){return this.resetLang(at),this.loadAndCompileTranslations(at)}resetLang(at){delete this._translationRequests[at],delete this.translations[at]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;const at=this.getBrowserCultureLang();return at?at.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(Dt){return new(Dt||Gt)(l.KVO(Ot),l.KVO(We),l.KVO(V),l.KVO(Ve),l.KVO(ke),l.KVO(Ut),l.KVO(ot),l.KVO(Mt),l.KVO(ze))};static \u0275prov=l.jDH({token:Gt,factory:Gt.\u0275fac,providedIn:"root"})}return Gt})(),Yt=(()=>{class Gt{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(at,Dt){this.translate=at,this._ref=Dt}updateValue(at,Dt,Tt){const un=Ln=>{this.value=void 0!==Ln?Ln:at,this.lastKey=at,this._ref.markForCheck()};if(Tt){const Ln=this.translate.getParsedResult(Tt,at,Dt);(0,h.A)(Ln)?Ln.subscribe(un):un(Ln)}this.translate.get(at,Dt).subscribe(un)}transform(at,...Dt){if(!at||!at.length)return at;if(St(at,this.lastKey)&&St(Dt,this.lastParams))return this.value;let Tt;if(pt(Dt[0])&&Dt.length)if(C(Dt[0])&&Dt[0].length){const un=Dt[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{Tt=JSON.parse(un)}catch(Ln){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${Dt[0]}`)}}else ct(Dt[0])&&(Tt=Dt[0]);return this.lastKey=at,this.lastParams=Dt,this.updateValue(at,Tt),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(un=>{this.lastKey&&un.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(at,Tt,un.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(un=>{this.lastKey&&(this.lastKey=null,this.updateValue(at,Tt,un.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(at,Tt))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(Dt){return new(Dt||Gt)(l.rXU(je,16),l.rXU(l.gRc,16))};static \u0275pipe=l.EJ8({name:"translate",type:Gt,pure:!1,standalone:!0});static \u0275prov=l.jDH({token:Gt,factory:Gt.\u0275fac})}return Gt})(),Sn=(()=>{class Gt{static forRoot(at={}){return{ngModule:Gt,providers:[at.loader||{provide:We,useClass:He},at.compiler||{provide:V,useClass:Oe},at.parser||{provide:Ve,useClass:Ne},at.missingTranslationHandler||{provide:ke,useClass:Ke},Ot,{provide:ot,useValue:at.isolate},{provide:Ut,useValue:at.useDefaultLang},{provide:Mt,useValue:at.extend},{provide:ze,useValue:at.defaultLanguage},je]}}static forChild(at={}){return{ngModule:Gt,providers:[at.loader||{provide:We,useClass:He},at.compiler||{provide:V,useClass:Oe},at.parser||{provide:Ve,useClass:Ne},at.missingTranslationHandler||{provide:ke,useClass:Ke},{provide:ot,useValue:at.isolate},{provide:Ut,useValue:at.useDefaultLang},{provide:Mt,useValue:at.extend},{provide:ze,useValue:at.defaultLanguage},je]}}static \u0275fac=function(Dt){return new(Dt||Gt)};static \u0275mod=l.$C({type:Gt});static \u0275inj=l.G2t({})}return Gt})()},9242:(Rt,Je,M)=>{"use strict";M.d(Je,{gq:()=>I,ob:()=>ke,tA:()=>Ke});var l=M(4438),H=M(177),h=M(7673),fe=M(4412),X=M(1413),ie=M(5964);const de=new l.nKC("recaptcha-language"),Q=new l.nKC("recaptcha-base-url"),z=new l.nKC("recaptcha-nonce-tag"),I=(new l.nKC("recaptcha-settings"),new l.nKC("recaptcha-v3-site-key")),K=new l.nKC("recaptcha-loader-options"),ue={loadScript:function te(ct,le,x,{url:C,lang:j,nonce:J}={}){window.ng2recaptchaloaded=()=>{x(grecaptcha)};const _e=document.createElement("script");_e.innerHTML="";const{url:Ee,nonce:Ve}=le(new URL(C||"https://www.google.com/recaptcha/api.js"));Ee.searchParams.set("render","explicit"===ct?ct:ct.key),Ee.searchParams.set("onload","ng2recaptchaloaded"),Ee.searchParams.set("trustedtypes","true"),j&&Ee.searchParams.set("hl",j),_e.src=Ee.href;const Ne=Ve||J;Ne&&_e.setAttribute("nonce",Ne),_e.async=!0,_e.defer=!0,document.head.appendChild(_e)},newLoadScript:function ee({v3SiteKey:ct,onBeforeLoad:le,onLoaded:x}){ue.loadScript(ct?{key:ct}:"explicit",le,x)}};let Re=(()=>{class ct{static{this.ready=null}constructor(x,C,j,J,_e,Ee){this.platformId=x,this.language=C,this.baseUrl=j,this.nonce=J,this.v3SiteKey=_e,this.options=Ee;const Ve=this.init();this.ready=Ve?function Ce(ct){return ct.asObservable().pipe((0,ie.p)(le=>null!==le))}(Ve):(0,h.of)()}init(){if(ct.ready)return ct.ready;if(!(0,H.UE)(this.platformId))return;const x=new fe.t(null);return ct.ready=x,ue.newLoadScript({v3SiteKey:this.v3SiteKey,onBeforeLoad:C=>{if(this.options?.onBeforeLoad)return this.options.onBeforeLoad(C);const j=new URL(this.baseUrl??C);return this.language&&j.searchParams.set("hl",this.language),{url:j,nonce:this.nonce}},onLoaded:C=>{let j=C;this.options?.onLoaded&&(j=this.options.onLoaded(C)),x.next(j)}}),x}static{this.\u0275fac=function(C){return new(C||ct)(l.KVO(l.Agw),l.KVO(de,8),l.KVO(Q,8),l.KVO(z,8),l.KVO(I,8),l.KVO(K,8))}}static{this.\u0275prov=l.jDH({token:ct,factory:ct.\u0275fac})}}return ct})(),ke=(()=>{class ct{constructor(x,C,j){this.recaptchaLoader=C,this.zone=x,this.siteKey=j,this.init()}get onExecute(){return this.onExecuteSubject||(this.onExecuteSubject=new X.B,this.onExecuteObservable=this.onExecuteSubject.asObservable()),this.onExecuteObservable}get onExecuteError(){return this.onExecuteErrorSubject||(this.onExecuteErrorSubject=new X.B,this.onExecuteErrorObservable=this.onExecuteErrorSubject.asObservable()),this.onExecuteErrorObservable}execute(x){const C=new X.B;return this.grecaptcha?this.executeActionWithSubject(x,C):(this.actionBacklog||(this.actionBacklog=[]),this.actionBacklog.push([x,C])),C.asObservable()}executeActionWithSubject(x,C){const j=J=>{this.zone.run(()=>{C.error(J),this.onExecuteErrorSubject&&this.onExecuteErrorSubject.next({action:x,error:J})})};this.zone.runOutsideAngular(()=>{try{this.grecaptcha.execute(this.siteKey,{action:x}).then(J=>{this.zone.run(()=>{C.next(J),C.complete(),this.onExecuteSubject&&this.onExecuteSubject.next({action:x,token:J})})},j)}catch(J){j(J)}})}init(){this.recaptchaLoader.ready.subscribe(x=>{this.grecaptcha=x,this.actionBacklog&&this.actionBacklog.length>0&&(this.actionBacklog.forEach(([C,j])=>this.executeActionWithSubject(C,j)),this.actionBacklog=void 0)})}static{this.\u0275fac=function(C){return new(C||ct)(l.KVO(l.SKi),l.KVO(Re),l.KVO(I))}}static{this.\u0275prov=l.jDH({token:ct,factory:ct.\u0275fac})}}return ct})(),Ke=(()=>{class ct{static{this.\u0275fac=function(C){return new(C||ct)}}static{this.\u0275mod=l.$C({type:ct})}static{this.\u0275inj=l.G2t({providers:[ke,Re]})}}return ct})()},5794:(Rt,Je,M)=>{"use strict";M.d(Je,{DP:()=>Ee,tw:()=>j});var l=M(4438),H=M(9969),h=M(177),fe=M(1413),X=M(345);const ie=["toast-component",""];function de(ot,Ut){if(1&ot){const ze=l.RV6();l.j41(0,"button",5),l.bIt("click",function(){l.eBV(ze);const st=l.XpG();return l.Njj(st.remove())}),l.j41(1,"span",6),l.EFF(2,"\xd7"),l.k0s()()}}function Q(ot,Ut){if(1&ot&&(l.qex(0),l.EFF(1),l.bVm()),2&ot){const ze=l.XpG(2);l.R7$(),l.SpI("[",ze.duplicatesCount+1,"]")}}function z(ot,Ut){if(1&ot&&(l.j41(0,"div"),l.EFF(1),l.DNE(2,Q,2,1,"ng-container",4),l.k0s()),2&ot){const ze=l.XpG();l.HbH(ze.options.titleClass),l.BMQ("aria-label",ze.title),l.R7$(),l.SpI(" ",ze.title," "),l.R7$(),l.Y8G("ngIf",ze.duplicatesCount)}}function L(ot,Ut){if(1&ot&&l.nrm(0,"div",7),2&ot){const ze=l.XpG();l.HbH(ze.options.messageClass),l.Y8G("innerHTML",ze.message,l.npT)}}function I(ot,Ut){if(1&ot&&(l.j41(0,"div",8),l.EFF(1),l.k0s()),2&ot){const ze=l.XpG();l.HbH(ze.options.messageClass),l.BMQ("aria-label",ze.message),l.R7$(),l.SpI(" ",ze.message," ")}}function K(ot,Ut){if(1&ot&&(l.j41(0,"div"),l.nrm(1,"div",9),l.k0s()),2&ot){const ze=l.XpG();l.R7$(),l.xc7("width",ze.width()+"%")}}class We{_attachedHost;component;viewContainerRef;injector;constructor(Ut,ze){this.component=Ut,this.injector=ze}attach(Ut,ze){return this._attachedHost=Ut,Ut.attach(this,ze)}detach(){const Ut=this._attachedHost;if(Ut)return this._attachedHost=void 0,Ut.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Ut){this._attachedHost=Ut}}class He{_attachedPortal;_disposeFn;attach(Ut,ze){return this._attachedPortal=Ut,this.attachComponentPortal(Ut,ze)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Ut){this._disposeFn=Ut}}class ke{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new fe.B;_activate=new fe.B;_manualClose=new fe.B;_resetTimeout=new fe.B;_countDuplicate=new fe.B;constructor(Ut){this._overlayRef=Ut}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Ut,ze){Ut&&this._resetTimeout.next(),ze&&this._countDuplicate.next(++this.duplicatesCount)}}class Ke{toastId;config;message;title;toastType;toastRef;_onTap=new fe.B;_onAction=new fe.B;constructor(Ut,ze,Mt,st,je,yt){this.toastId=Ut,this.config=ze,this.message=Mt,this.title=st,this.toastType=je,this.toastRef=yt,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Ut){this._onAction.next(Ut)}onAction(){return this._onAction.asObservable()}}const pt=new l.nKC("ToastConfig");class ct extends He{_hostDomElement;_componentFactoryResolver;_appRef;constructor(Ut,ze,Mt){super(),this._hostDomElement=Ut,this._componentFactoryResolver=ze,this._appRef=Mt}attachComponentPortal(Ut,ze){const Mt=this._componentFactoryResolver.resolveComponentFactory(Ut.component);let st;return st=Mt.create(Ut.injector),this._appRef.attachView(st.hostView),this.setDisposeFn(()=>{this._appRef.detachView(st.hostView),st.destroy()}),ze?this._hostDomElement.insertBefore(this._getComponentRootNode(st),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(st)),st}_getComponentRootNode(Ut){return Ut.hostView.rootNodes[0]}}let le=(()=>{class ot{_document=(0,l.WQX)(h.qQ);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const ze=this._document.createElement("div");ze.classList.add("overlay-container"),ze.setAttribute("aria-live","polite"),this._document.body.appendChild(ze),this._containerElement=ze}static \u0275fac=function(Mt){return new(Mt||ot)};static \u0275prov=l.jDH({token:ot,factory:ot.\u0275fac,providedIn:"root"})}return ot})();class x{_portalHost;constructor(Ut){this._portalHost=Ut}attach(Ut,ze=!0){return this._portalHost.attach(Ut,ze)}detach(){return this._portalHost.detach()}}let C=(()=>{class ot{_overlayContainer=(0,l.WQX)(le);_componentFactoryResolver=(0,l.WQX)(l.OM3);_appRef=(0,l.WQX)(l.o8S);_document=(0,l.WQX)(h.qQ);_paneElements=new Map;create(ze,Mt){return this._createOverlayRef(this.getPaneElement(ze,Mt))}getPaneElement(ze="",Mt){return this._paneElements.get(Mt)||this._paneElements.set(Mt,{}),this._paneElements.get(Mt)[ze]||(this._paneElements.get(Mt)[ze]=this._createPaneElement(ze,Mt)),this._paneElements.get(Mt)[ze]}_createPaneElement(ze,Mt){const st=this._document.createElement("div");return st.id="toast-container",st.classList.add(ze),st.classList.add("toast-container"),Mt?Mt.getContainerElement().appendChild(st):this._overlayContainer.getContainerElement().appendChild(st),st}_createPortalHost(ze){return new ct(ze,this._componentFactoryResolver,this._appRef)}_createOverlayRef(ze){return new x(this._createPortalHost(ze))}static \u0275fac=function(Mt){return new(Mt||ot)};static \u0275prov=l.jDH({token:ot,factory:ot.\u0275fac,providedIn:"root"})}return ot})(),j=(()=>{class ot{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(ze,Mt,st,je,yt){this.overlay=Mt,this._injector=st,this.sanitizer=je,this.ngZone=yt,this.toastrConfig={...ze.default,...ze.config},ze.config.iconClasses&&(this.toastrConfig.iconClasses={...ze.default.iconClasses,...ze.config.iconClasses})}show(ze,Mt,st={},je=""){return this._preBuildNotification(je,ze,Mt,this.applyConfig(st))}success(ze,Mt,st={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",ze,Mt,this.applyConfig(st))}error(ze,Mt,st={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",ze,Mt,this.applyConfig(st))}info(ze,Mt,st={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",ze,Mt,this.applyConfig(st))}warning(ze,Mt,st={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",ze,Mt,this.applyConfig(st))}clear(ze){for(const Mt of this.toasts)if(void 0!==ze){if(Mt.toastId===ze)return void Mt.toastRef.manualClose()}else Mt.toastRef.manualClose()}remove(ze){const Mt=this._findToast(ze);if(!Mt||(Mt.activeToast.toastRef.close(),this.toasts.splice(Mt.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const st=this.toasts[this.currentlyActive].toastRef;st.isInactive()||(this.currentlyActive=this.currentlyActive+1,st.activate())}return!0}findDuplicate(ze="",Mt="",st,je){const{includeTitleDuplicates:yt}=this.toastrConfig;for(const Yt of this.toasts)if((!yt||yt&&Yt.title===ze)&&Yt.message===Mt)return Yt.toastRef.onDuplicate(st,je),Yt;return null}applyConfig(ze={}){return{...this.toastrConfig,...ze}}_findToast(ze){for(let Mt=0;Mt<this.toasts.length;Mt++)if(this.toasts[Mt].toastId===ze)return{index:Mt,activeToast:this.toasts[Mt]};return null}_preBuildNotification(ze,Mt,st,je){return je.onActivateTick?this.ngZone.run(()=>this._buildNotification(ze,Mt,st,je)):this._buildNotification(ze,Mt,st,je)}_buildNotification(ze,Mt,st,je){if(!je.toastComponent)throw new Error("toastComponent required");const yt=this.findDuplicate(st,Mt,this.toastrConfig.resetTimeoutOnDuplicate&&je.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&st||Mt)&&this.toastrConfig.preventDuplicates&&null!==yt)return yt;this.previousToastMessage=Mt;let Yt=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(Yt=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const dn=this.overlay.create(je.positionClass,this.overlayContainer);this.index=this.index+1;let fn=Mt;Mt&&je.enableHtml&&(fn=this.sanitizer.sanitize(l.WPN.HTML,Mt));const Sn=new ke(dn),Gt=new Ke(this.index,je,fn,st,ze,Sn),at=l.zZn.create({providers:[{provide:Ke,useValue:Gt}],parent:this._injector}),Dt=new We(je.toastComponent,at),Tt=dn.attach(Dt,je.newestOnTop);Sn.componentInstance=Tt.instance;const un={toastId:this.index,title:st||"",message:Mt||"",toastRef:Sn,onShown:Sn.afterActivate(),onHidden:Sn.afterClosed(),onTap:Gt.onTap(),onAction:Gt.onAction(),portal:Tt};return Yt||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{un.toastRef.activate()})),this.toasts.push(un),un}static \u0275fac=function(Mt){return new(Mt||ot)(l.KVO(pt),l.KVO(C),l.KVO(l.zZn),l.KVO(X.up),l.KVO(l.SKi))};static \u0275prov=l.jDH({token:ot,factory:ot.\u0275fac,providedIn:"root"})}return ot})();const _e={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class ot{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=(0,l.vPA)(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if("inactive"===this.state().value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(ze,Mt,st){this.toastrService=ze,this.toastPackage=Mt,this.ngZone=st,this.message=Mt.message,this.title=Mt.title,this.options=Mt.config,this.originalTimeout=Mt.config.timeOut,this.toastClasses=`${Mt.toastType} ${Mt.config.toastClass}`,this.sub=Mt.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=Mt.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=Mt.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=Mt.toastRef.countDuplicate().subscribe(je=>{this.duplicatesCount=je}),this.state=(0,l.vPA)({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(ze=>({...ze,value:"active"})),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width()||100===this.width()||!this.options.timeOut)return;const ze=(new Date).getTime();this.width.set((this.hideTime-ze)/this.options.timeOut*100),"increasing"===this.options.progressAnimation&&this.width.update(st=>100-st),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(ze=>({...ze,value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state().value&&(clearTimeout(this.timeout),this.state.update(ze=>({...ze,value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state().value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state().value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state().value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(ze,Mt){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(ze),Mt)):this.timeout=setTimeout(()=>ze(),Mt)}outsideInterval(ze,Mt){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(ze),Mt)):this.intervalId=setInterval(()=>ze(),Mt)}runInsideAngular(ze){this.ngZone?this.ngZone.run(()=>ze()):ze()}static \u0275fac=function(Mt){return new(Mt||ot)(l.rXU(j),l.rXU(Ke),l.rXU(l.SKi))};static \u0275cmp=l.VBU({type:ot,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Mt,st){1&Mt&&l.bIt("click",function(){return st.tapToast()})("mouseenter",function(){return st.stickAround()})("mouseleave",function(){return st.delayedHideToast()}),2&Mt&&(l.zvX("@flyInOut",st._state),l.HbH(st.toastClasses),l.xc7("display",st.displayStyle))},standalone:!0,features:[l.aNF],attrs:ie,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Mt,st){1&Mt&&l.DNE(0,de,3,0,"button",0)(1,z,3,5,"div",1)(2,L,1,3,"div",2)(3,I,2,4,"div",3)(4,K,2,2,"div",4),2&Mt&&(l.Y8G("ngIf",st.options.closeButton),l.R7$(),l.Y8G("ngIf",st.title),l.R7$(),l.Y8G("ngIf",st.message&&st.options.enableHtml),l.R7$(),l.Y8G("ngIf",st.message&&!st.options.enableHtml),l.R7$(),l.Y8G("ngIf",st.options.progressBar))},dependencies:[h.bT],encapsulation:2,data:{animation:[(0,H.hZ)("flyInOut",[(0,H.wk)("inactive",(0,H.iF)({opacity:0})),(0,H.wk)("active",(0,H.iF)({opacity:1})),(0,H.wk)("removed",(0,H.iF)({opacity:0})),(0,H.kY)("inactive => active",(0,H.i0)("{{ easeTime }}ms {{ easing }}")),(0,H.kY)("active => removed",(0,H.i0)("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return ot})()},Ee=(ot={})=>(0,l.EmA)([{provide:pt,useValue:{default:_e,config:ot}}])},467:(Rt,Je,M)=>{"use strict";function l(h,fe,X,ie,de,Q,z){try{var L=h[Q](z),I=L.value}catch(K){return void X(K)}L.done?fe(I):Promise.resolve(I).then(ie,de)}function H(h){return function(){var fe=this,X=arguments;return new Promise(function(ie,de){var Q=h.apply(fe,X);function z(I){l(Q,ie,de,z,L,"next",I)}function L(I){l(Q,ie,de,z,L,"throw",I)}z(void 0)})}}M.d(Je,{A:()=>H})},1636:Rt=>{"use strict";Rt.exports={rE:"6.5.7"}}},Rt=>{var Je=l=>Rt(Rt.s=l);Je(4073),Je(8527)}]);