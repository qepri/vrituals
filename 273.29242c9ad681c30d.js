"use strict";(self.webpackChunkfront_simple=self.webpackChunkfront_simple||[]).push([[273],{5273:(D,g,a)=>{a.r(g),a.d(g,{default:()=>w});var t=a(4438),c=a(177),f=a(33),_=a(7673),h=a(7468),b=a(9437),s=a(980),u=a(3373),k=a(3841),r=a(1774),F=a(5794);function i(n,y){1&n&&t.nrm(0,"span",17)}function d(n,y){if(1&n){const e=t.RV6();t.j41(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21)(4,"h5",22),t.EFF(5,"Curator Panel"),t.k0s()(),t.j41(6,"div",23)(7,"p"),t.EFF(8,"Create and manage curated selections from the Kwalhia community."),t.k0s(),t.j41(9,"button",24),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.navigateTo("curations"))}),t.EFF(10," Manage Curations "),t.k0s()()()()()}}function v(n,y){if(1&n){const e=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),t.nrm(4,"i",6),t.j41(5,"h5",7),t.EFF(6,"My Artworks"),t.k0s(),t.j41(7,"p",8),t.EFF(8,"Upload and manage your artwork portfolio"),t.k0s(),t.j41(9,"button",9),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.navigateTo("artworks"))}),t.EFF(10," Manage Artworks "),t.k0s()(),t.j41(11,"div",10)(12,"small",11),t.EFF(13),t.k0s()()()(),t.j41(14,"div",3)(15,"div",4)(16,"div",5),t.nrm(17,"i",12),t.j41(18,"h5",7),t.EFF(19,"Series Collections"),t.k0s(),t.j41(20,"p",8),t.EFF(21,"Organize your works into thematic series"),t.k0s(),t.j41(22,"button",9),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.navigateTo("series"))}),t.EFF(23," Manage Series "),t.k0s()(),t.j41(24,"div",10)(25,"small",11),t.EFF(26),t.k0s()()()(),t.j41(27,"div",3)(28,"div",4)(29,"div",5),t.nrm(30,"i",13),t.j41(31,"h5",7),t.EFF(32,"Gallery Settings"),t.k0s(),t.j41(33,"p",8),t.EFF(34,"Customize how your gallery appears to visitors"),t.k0s(),t.j41(35,"button",9),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.navigateTo("gallery"))}),t.EFF(36," Edit Gallery "),t.k0s()(),t.j41(37,"div",10)(38,"small",11),t.EFF(39),t.k0s()()()()(),t.j41(40,"div",2)(41,"div",3)(42,"div",4)(43,"div",5),t.nrm(44,"i",14),t.j41(45,"h5",7),t.EFF(46,"VR Gallery"),t.k0s(),t.j41(47,"p",8),t.EFF(48,"Configure VR settings, textures, 3D objects & room geometries"),t.k0s(),t.j41(49,"button",9),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.navigateTo("vrGallery"))}),t.EFF(50," Manage VR Gallery "),t.k0s()(),t.j41(51,"div",10)(52,"small",11),t.EFF(53,"Create immersive 3D exhibitions"),t.k0s()()()(),t.j41(54,"div",3)(55,"div",4)(56,"div",5),t.nrm(57,"i",15),t.j41(58,"h5",7),t.EFF(59,"Publish Website"),t.k0s(),t.j41(60,"p",8),t.EFF(61,"Make your changes live for visitors to see"),t.k0s(),t.j41(62,"button",16),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.publishSite())}),t.DNE(63,i,1,0,"span",17),t.EFF(64," Publish Site "),t.k0s()(),t.j41(65,"div",10)(66,"small",11),t.EFF(67,"Post to the internet!"),t.k0s()()()()(),t.DNE(68,d,11,0,"div",18)}if(2&n){const e=t.XpG();t.R7$(13),t.SpI("",e.artworkCount()," artworks uploaded"),t.R7$(13),t.SpI("",e.seriesCount()," active series"),t.R7$(13),t.SpI("Last updated: ",e.lastGalleryUpdate(),""),t.R7$(23),t.Y8G("disabled",e.publishing()),t.R7$(),t.vxM(63,e.publishing()?63:-1),t.R7$(5),t.vxM(68,e.isCurator()?68:-1)}}function p(n,y){1&n&&t.nrm(0,"span",31)}function C(n,y){if(1&n){const e=t.RV6();t.j41(0,"div",25)(1,"div",26)(2,"div",27)(3,"div",23),t.nrm(4,"i",28),t.j41(5,"h3",7),t.EFF(6,"Create Your Artist Profile"),t.k0s(),t.j41(7,"p",29),t.EFF(8," To start showcasing your artwork and managing your gallery, you'll need to create your artist profile first. "),t.k0s(),t.j41(9,"button",30),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.createProfile())}),t.DNE(10,p,1,0,"span",31),t.EFF(11," Create Artist Profile "),t.k0s()()()()()}if(2&n){const e=t.XpG(2);t.R7$(9),t.Y8G("disabled",e.loading()),t.R7$(),t.vxM(10,e.loading()?10:-1)}}function m(n,y){if(1&n){const e=t.RV6();t.j41(0,"div",25)(1,"div",26)(2,"div",27)(3,"div",23),t.nrm(4,"i",32),t.j41(5,"h3",7),t.EFF(6,"Upgrade to Pro"),t.k0s(),t.j41(7,"p",29),t.EFF(8," To create your artist profile and showcase your artwork, you need a Pro subscription. "),t.k0s(),t.j41(9,"button",33),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.navigateTo("billing"))}),t.EFF(10," Upgrade to Pro "),t.k0s()()()()()}}function x(n,y){if(1&n&&t.DNE(0,C,12,2,"div",25)(1,m,11,0),2&n){const e=t.XpG();t.vxM(0,!0===e.userIsPro()?0:1)}}let w=(()=>{class n{constructor(){this.router=(0,t.WQX)(f.Ix),this.artistService=(0,t.WQX)(u.gA),this.artworkService=(0,t.WQX)(u.UN),this.seriesService=(0,t.WQX)(u.xB),this.galleryService=(0,t.WQX)(u.AF),this.store=(0,t.WQX)(k.P),this.toastr=(0,t.WQX)(F.tw),this.userIsPro=this.store.userIsPro,this.profileData=(0,t.vPA)(null),this.profileExists=(0,t.vPA)(!1),this.artworkCount=(0,t.vPA)(0),this.seriesCount=(0,t.vPA)(0),this.isCurator=(0,t.vPA)(!1),this.lastGalleryUpdate=(0,t.vPA)("Never"),this.loading=(0,t.vPA)(!1),this.publishing=(0,t.vPA)(!1)}ngOnInit(){console.log("Dashboard ngOnInit - userIsPro:",this.userIsPro()),this.loadAllData()}loadAllData(){this.loading.set(!0),this.artistService.getMyProfile().pipe((0,b.W)(()=>(this.profileExists.set(!1),this.loading.set(!1),(0,_.of)(null)))).subscribe(e=>{e?(this.profileData.set(e),this.profileExists.set(!0),this.isCurator.set(e.isCurator),this.store.setArtistProfile(e),this.store.setArtistProfileForm({displayName:e.displayName,bio:e.bio,website:e.website,instagram:e.instagram,twitter:e.twitter}),this.fetchAdditionalData()):this.loading.set(!1)})}fetchAdditionalData(){(0,h.p)({series:this.seriesService.getMySeries({page:1,limit:50}).pipe((0,b.W)(()=>(0,_.of)({data:[]}))),artworks:this.artworkService.getMyArtworks({page:1,limit:100}).pipe((0,b.W)(()=>(0,_.of)({data:[]}))),gallery:this.galleryService.getMyGallery().pipe((0,b.W)(()=>(0,_.of)(null)))}).pipe((0,s.j)(()=>this.loading.set(!1))).subscribe({next:e=>{if(e.series?.data){const o=e.series.data.map(l=>({...l,artworks:e.artworks.data.filter(E=>E.seriesId===l.id)}));this.store.series.set(o),this.seriesCount.set(e.series.data.length)}e.artworks?.data&&(this.store.artworks.set(e.artworks.data),this.artworkCount.set(e.artworks.data.length)),e.gallery&&(this.store.setGallery(e.gallery),this.store.setGalleryForm({bgImage:e.gallery.bgImage,bgRepeat:e.gallery.bgRepeat,bgColor:e.gallery.bgColor,containerColor:e.gallery.containerColor,textColor:e.gallery.textColor,accentColor:e.gallery.accentColor,fontFamily:e.gallery.fontFamily}),e.gallery.updatedAt&&this.lastGalleryUpdate.set(new Date(e.gallery.updatedAt).toLocaleDateString()))},error:e=>{console.error("Error fetching additional data:",e)}})}createProfile(){this.router.navigate(["/"+r.S.KWH+"/new/profileConfig"])}editProfile(){this.getArtistName(),this.router.navigate(["/"+r.S.KWH+"/${artistName}/profileConfig"])}navigateTo(e){const o=this.getArtistName(),E={artworks:"artworksConfig",series:"seriesConfig",gallery:"galleryConfig",curations:"curations",vrGallery:"vrGallery"}[e];E&&this.router.navigate(["/"+r.S.KWH+`/${o}/${E}`])}getArtistName(){return this.profileData()?.displayName?.toLowerCase().replace(/\s+/g,"-")||""}publishSite(){if(!this.profileData())return;this.publishing.set(!0);const e=this.profileData().id;this.artistService.publishArtistSite(e).pipe((0,s.j)(()=>this.publishing.set(!1))).subscribe({next:o=>{this.toastr.success(o.message||"Site published successfully")},error:o=>{console.error("Failed to publish site:",o),this.toastr.error("Failed to publish site. Please try again.")}})}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-kwalhia-dashboard"]],standalone:!0,features:[t.aNF],decls:5,vars:1,consts:[[1,"container","my-5",2,"padding","0 10vw"],[1,"display-5"],[1,"row","mb-4"],[1,"col-md-4","mb-3"],[1,"card","h-100"],[1,"card-body","text-center"],[1,"fas","fa-images","fa-3x","mb-3","text-primary"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-outline-primary",3,"click"],[1,"card-footer","bg-transparent"],[1,"text-muted"],[1,"fas","fa-layer-group","fa-3x","mb-3","text-primary"],[1,"fas","fa-palette","fa-3x","mb-3","text-primary"],[1,"fas","fa-vr-cardboard","fa-3x","mb-3","text-primary"],[1,"fas","fa-globe","fa-3x","mb-3","text-success"],[1,"btn","btn-success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"row","mb-3"],[1,"col-md-12"],[1,"card","border-info"],[1,"card-header","bg-info","text-white"],[1,"mb-0"],[1,"card-body"],[1,"btn","btn-info",3,"click"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card","text-center"],[1,"fas","fa-user-plus","fa-4x","mb-4","text-primary"],[1,"card-text","text-muted","mb-4"],[1,"btn","btn-primary","btn-lg",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-crown","fa-4x","mb-4","text-warning"],[1,"btn","btn-warning","btn-lg",3,"click"]],template:function(o,l){1&o&&(t.j41(0,"div",0)(1,"h1",1),t.EFF(2,"Artist Managment"),t.k0s(),t.DNE(3,v,69,6)(4,x,2,1),t.k0s()),2&o&&(t.R7$(3),t.vxM(3,l.profileExists()?3:4))},dependencies:[c.MD],encapsulation:2})}}return n})()},2010:(D,g,a)=>{a.d(g,{v:()=>_});var t=a(5312),c=a(4438),f=a(1626);let _=(()=>{class h{constructor(s){this.http=s,this.apiUrl=t.c.apiUrl}findAll(s){return this.http.get(`${this.apiUrl}/${this.endpoint}`,{params:{...s}})}findOne(s){return this.http.get(`${this.apiUrl}/${this.endpoint}/${s}`)}create(s){return this.http.post(`${this.apiUrl}/${this.endpoint}`,s)}update(s,u){return this.http.patch(`${this.apiUrl}/${this.endpoint}/${s}`,u)}remove(s){return this.http.delete(`${this.apiUrl}/${this.endpoint}/${s}`)}static{this.\u0275fac=function(u){return new(u||h)(c.KVO(f.Qq))}}static{this.\u0275prov=c.jDH({token:h,factory:h.\u0275fac})}}return h})()},2249:(D,g,a)=>{a.d(g,{f:()=>_});var t=a(2010),c=a(4438),f=a(1626);let _=(()=>{class h extends t.v{constructor(s){super(s),this.http=s,this.endpoint="hydra-scripts"}getMyScripts(s){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-scripts`,{params:{...s}})}getHydraScript(s){return this.http.get(`${this.apiUrl}/${this.endpoint}/${s}`)}static{this.\u0275fac=function(u){return new(u||h)(c.KVO(f.Qq))}}static{this.\u0275prov=c.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},3373:(D,g,a)=>{a.d(g,{gA:()=>_,vA:()=>t.v,AF:()=>s,fC:()=>k.f,UN:()=>h,xB:()=>b,RV:()=>u});var t=a(2010),c=a(4438),f=a(1626);let _=(()=>{class r extends t.v{constructor(i){super(i),this.http=i,this.endpoint="artist-profiles"}getMyProfile(){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-profile`)}publishArtistSite(i){return this.http.post(`${this.apiUrl}/${this.endpoint}/${i}/publish`,{})}static{this.\u0275fac=function(d){return new(d||r)(c.KVO(f.Qq))}}static{this.\u0275prov=c.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),h=(()=>{class r extends t.v{constructor(i){super(i),this.http=i,this.endpoint="kwalhia-art"}getAllArtworks(i){return this.findAll(i)}getMyArtworks(i){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-artwork`,{params:{...i}})}getArtwork(i){return this.findOne(i)}uploadArtwork(i,d,v){const p=new FormData;return p.append("file",d),p.append("aspectRatio",v),Object.entries(i).forEach(([C,m])=>{null!=m&&p.append(C,m.toString())}),this.http.post(`${this.apiUrl}/${this.endpoint}`,p)}updateArtwork(i,d,v){const p=new FormData;return v&&p.append("file",v),Object.entries(d).forEach(([C,m])=>{null!=m&&p.append(C,m.toString())}),this.http.patch(`${this.apiUrl}/${this.endpoint}/${i}`,p)}uploadWithFormData(i){return this.http.post(`${this.apiUrl}/${this.endpoint}`,i)}deleteArtwork(i){return this.remove(i)}create(i){return console.warn("Please use uploadArtwork method instead of create for adding new artwork"),super.create(i)}static{this.\u0275fac=function(d){return new(d||r)(c.KVO(f.Qq))}}static{this.\u0275prov=c.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),b=(()=>{class r extends t.v{constructor(i){super(i),this.http=i,this.endpoint="series"}getMySeries(i){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-series`,{params:{...i}})}static{this.\u0275fac=function(d){return new(d||r)(c.KVO(f.Qq))}}static{this.\u0275prov=c.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),s=(()=>{class r extends t.v{constructor(i){super(i),this.http=i,this.endpoint="galleries"}getMyGallery(){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-gallery`)}static{this.\u0275fac=function(d){return new(d||r)(c.KVO(f.Qq))}}static{this.\u0275prov=c.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),u=(()=>{class r extends t.v{constructor(i){super(i),this.http=i,this.endpoint="textures"}getTexture(i){return this.http.get(`${this.apiUrl}/${this.endpoint}/${i}`)}getMyTextures(i){return this.http.get(`${this.apiUrl}/${this.endpoint}/my-textures`,{params:{...i}})}getTexturesByType(i,d){return this.http.get(`${this.apiUrl}/${this.endpoint}/type/${i}`,{params:{...d}})}uploadTexture(i,d,v=!1){const p=new FormData;return p.append("file",d),p.append("type",i),p.append("isPublic",v.toString()),this.http.post(`${this.apiUrl}/${this.endpoint}`,p)}static{this.\u0275fac=function(d){return new(d||r)(c.KVO(f.Qq))}}static{this.\u0275prov=c.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var k=a(2249)}}]);